var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
var __objRest = (source, exclude) => {
  var target = {};
  for (var prop in source)
    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)
      target[prop] = source[prop];
  if (source != null && __getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(source)) {
      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))
        target[prop] = source[prop];
    }
  return target;
};
import { atomComputed, createElement, propTypes, atom, createComponent, useRef, useImperativeHandle, useViewEffect, render, watchReactive } from "axii";
var commonjsGlobal = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
function getDefaultExportFromCjs(x) {
  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, "default") ? x["default"] : x;
}
var editor = { exports: {} };
/*! For license information please see editor.js.LICENSE.txt */
(function(module, exports) {
  !function(t, e) {
    module.exports = e();
  }(window, function() {
    return function(t) {
      var e = {};
      function n(o) {
        if (e[o])
          return e[o].exports;
        var r = e[o] = { i: o, l: false, exports: {} };
        return t[o].call(r.exports, r, r.exports, n), r.l = true, r.exports;
      }
      return n.m = t, n.c = e, n.d = function(t2, e2, o) {
        n.o(t2, e2) || Object.defineProperty(t2, e2, { enumerable: true, get: o });
      }, n.r = function(t2) {
        typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(t2, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t2, "__esModule", { value: true });
      }, n.t = function(t2, e2) {
        if (1 & e2 && (t2 = n(t2)), 8 & e2)
          return t2;
        if (4 & e2 && typeof t2 == "object" && t2 && t2.__esModule)
          return t2;
        var o = Object.create(null);
        if (n.r(o), Object.defineProperty(o, "default", { enumerable: true, value: t2 }), 2 & e2 && typeof t2 != "string")
          for (var r in t2)
            n.d(o, r, function(e3) {
              return t2[e3];
            }.bind(null, r));
        return o;
      }, n.n = function(t2) {
        var e2 = t2 && t2.__esModule ? function() {
          return t2.default;
        } : function() {
          return t2;
        };
        return n.d(e2, "a", e2), e2;
      }, n.o = function(t2, e2) {
        return Object.prototype.hasOwnProperty.call(t2, e2);
      }, n.p = "", n(n.s = 186);
    }([function(t, e, n) {
      var o = n(10), r = n(17), i = n(27), a = n(21), s = n(31), l = function(t2, e2, n2) {
        var c, u, f, d, p = t2 & l.F, h = t2 & l.G, v = t2 & l.S, g = t2 & l.P, y = t2 & l.B, b = h ? o : v ? o[e2] || (o[e2] = {}) : (o[e2] || {}).prototype, m = h ? r : r[e2] || (r[e2] = {}), k = m.prototype || (m.prototype = {});
        for (c in h && (n2 = e2), n2)
          f = ((u = !p && b && b[c] !== void 0) ? b : n2)[c], d = y && u ? s(f, o) : g && typeof f == "function" ? s(Function.call, f) : f, b && a(b, c, f, t2 & l.U), m[c] != f && i(m, c, d), g && k[c] != f && (k[c] = f);
      };
      o.core = r, l.F = 1, l.G = 2, l.S = 4, l.P = 8, l.B = 16, l.W = 32, l.U = 64, l.R = 128, t.exports = l;
    }, function(t, e) {
      t.exports = function(t2) {
        return t2 && t2.__esModule ? t2 : { default: t2 };
      };
    }, function(t, e) {
      t.exports = function(t2, e2) {
        if (!(t2 instanceof e2))
          throw new TypeError("Cannot call a class as a function");
      };
    }, function(t, e) {
      function n(t2, e2) {
        for (var n2 = 0; n2 < e2.length; n2++) {
          var o = e2[n2];
          o.enumerable = o.enumerable || false, o.configurable = true, "value" in o && (o.writable = true), Object.defineProperty(t2, o.key, o);
        }
      }
      t.exports = function(t2, e2, o) {
        return e2 && n(t2.prototype, e2), o && n(t2, o), t2;
      };
    }, function(t, e) {
      function n(e2) {
        return t.exports = n = Object.setPrototypeOf ? Object.getPrototypeOf : function(t2) {
          return t2.__proto__ || Object.getPrototypeOf(t2);
        }, n(e2);
      }
      t.exports = n;
    }, function(t, e, n) {
      var o = n(110);
      t.exports = function(t2, e2) {
        if (typeof e2 != "function" && e2 !== null)
          throw new TypeError("Super expression must either be null or a function");
        t2.prototype = Object.create(e2 && e2.prototype, { constructor: { value: t2, writable: true, configurable: true } }), e2 && o(t2, e2);
      };
    }, function(t, e, n) {
      var o = n(80), r = n(149);
      t.exports = function(t2, e2) {
        return !e2 || o(e2) !== "object" && typeof e2 != "function" ? r(t2) : e2;
      };
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(23), n(370), n(24), n(398), n(15)], (i = typeof (o = function(t2, e2, o2, r2, i2, a) {
        var s, l = n(1);
        function c(t3, e3) {
          var n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "log", o3 = arguments.length > 3 ? arguments[3] : void 0, r3 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : "color: inherit";
          if ("console" in window && window.console[n2]) {
            var i3 = ["info", "log", "warn", "error"].includes(n2), a2 = [];
            switch (c.logLevel) {
              case s.ERROR:
                if (n2 !== "error")
                  return;
                break;
              case s.WARN:
                if (!["error", "warn"].includes(n2))
                  return;
                break;
              case s.INFO:
                if (!i3 || t3)
                  return;
            }
            o3 && a2.push(o3);
            var l2 = "Editor.js ".concat("2.22.2"), u2 = "line-height: 1em;\n            color: #006FEA;\n            display: inline-block;\n            font-size: 11px;\n            line-height: 1em;\n            background-color: #fff;\n            padding: 4px 9px;\n            border-radius: 30px;\n            border: 1px solid rgba(56, 138, 229, 0.16);\n            margin: 4px 5px 4px 0;";
            t3 && (i3 ? (a2.unshift(u2, r3), e3 = "%c".concat(l2, "%c ").concat(e3)) : e3 = "( ".concat(l2, " )").concat(e3));
            try {
              if (i3)
                if (o3) {
                  var f2;
                  (f2 = console)[n2].apply(f2, ["".concat(e3, " %o")].concat(a2));
                } else {
                  var d2;
                  (d2 = console)[n2].apply(d2, [e3].concat(a2));
                }
              else
                console[n2](e3);
            } catch (t4) {
            }
          }
        }
        Object.defineProperty(t2, "__esModule", { value: true }), t2.setLogLevel = function(t3) {
          c.logLevel = t3;
        }, t2.typeOf = d, t2.isFunction = p, t2.isObject = h, t2.isString = function(t3) {
          return d(t3) === "string";
        }, t2.isBoolean = function(t3) {
          return d(t3) === "boolean";
        }, t2.isNumber = function(t3) {
          return d(t3) === "number";
        }, t2.isUndefined = v, t2.isClass = function(t3) {
          return p(t3) && /^\s*class\s+/.test(t3.toString());
        }, t2.isEmpty = function(t3) {
          return !t3 || Object.keys(t3).length === 0 && t3.constructor === Object;
        }, t2.isPromise = function(t3) {
          return Promise.resolve(t3) === t3;
        }, t2.isPrintableKey = function(t3) {
          return t3 > 47 && t3 < 58 || t3 === 32 || t3 === 13 || t3 === 229 || t3 > 64 && t3 < 91 || t3 > 95 && t3 < 112 || t3 > 185 && t3 < 193 || t3 > 218 && t3 < 223;
        }, t2.sequence = function(t3) {
          return g.apply(this, arguments);
        }, t2.array = function(t3) {
          return Array.prototype.slice.call(t3);
        }, t2.delay = function(t3, e3) {
          return function() {
            var n2 = this, o3 = arguments;
            window.setTimeout(function() {
              return t3.apply(n2, o3);
            }, e3);
          };
        }, t2.getFileExtension = function(t3) {
          return t3.name.split(".").pop();
        }, t2.isValidMimeType = function(t3) {
          return /^[-\w]+\/([-+\w]+|\*)$/.test(t3);
        }, t2.debounce = function(t3, e3, n2) {
          var o3, r3 = this;
          return function() {
            for (var i3 = arguments.length, a2 = new Array(i3), s2 = 0; s2 < i3; s2++)
              a2[s2] = arguments[s2];
            var l2 = r3, c2 = function() {
              o3 = null, n2 || t3.apply(l2, a2);
            }, u2 = n2 && !o3;
            window.clearTimeout(o3), o3 = window.setTimeout(c2, e3), u2 && t3.apply(l2, a2);
          };
        }, t2.copyTextToClipboard = function(t3) {
          var e3 = a.default.make("div", "codex-editor-clipboard", { innerHTML: t3 });
          document.body.appendChild(e3);
          var n2 = window.getSelection(), o3 = document.createRange();
          o3.selectNode(e3), window.getSelection().removeAllRanges(), n2.addRange(o3), document.execCommand("copy"), document.body.removeChild(e3);
        }, t2.getUserOS = y, t2.capitalize = function(t3) {
          return t3[0].toUpperCase() + t3.slice(1);
        }, t2.deepMerge = function t3(e3) {
          for (var n2 = arguments.length, r3 = new Array(n2 > 1 ? n2 - 1 : 0), i3 = 1; i3 < n2; i3++)
            r3[i3 - 1] = arguments[i3];
          if (!r3.length)
            return e3;
          var a2 = r3.shift();
          if (h(e3) && h(a2))
            for (var s2 in a2)
              h(a2[s2]) ? (e3[s2] || Object.assign(e3, (0, o2.default)({}, s2, {})), t3(e3[s2], a2[s2])) : Object.assign(e3, (0, o2.default)({}, s2, a2[s2]));
          return t3.apply(void 0, [e3].concat(r3));
        }, t2.beautifyShortcut = function(t3) {
          var e3 = y();
          return t3 = t3.replace(/shift/gi, "\u21E7").replace(/backspace/gi, "\u232B").replace(/enter/gi, "\u23CE").replace(/up/gi, "\u2191").replace(/left/gi, "\u2192").replace(/down/gi, "\u2193").replace(/right/gi, "\u2190").replace(/escape/gi, "\u238B").replace(/insert/gi, "Ins").replace(/delete/gi, "\u2421").replace(/\+/gi, " + "), t3 = e3.mac ? t3.replace(/ctrl|cmd/gi, "\u2318").replace(/alt/gi, "\u2325") : t3.replace(/cmd/gi, "Ctrl").replace(/windows/gi, "WIN");
        }, t2.getValidUrl = function(t3) {
          try {
            return new URL(t3).href;
          } catch (t4) {
          }
          return t3.substring(0, 2) === "//" ? window.location.protocol + t3 : window.location.origin + t3;
        }, t2.generateBlockId = function() {
          return (0, i2.nanoid)(10);
        }, t2.openTab = function(t3) {
          window.open(t3, "_blank");
        }, t2.generateId = function() {
          var t3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
          return "".concat(t3).concat(Math.floor(1e8 * Math.random()).toString(16));
        }, t2.deprecationAssert = function(t3, e3, n2) {
          var o3 = "\xAB".concat(e3, "\xBB is deprecated and will be removed in the next major release. Please use the \xAB").concat(n2, "\xBB instead.");
          t3 && f(o3, "warn");
        }, t2.cacheable = function(t3, e3, n2) {
          var o3 = n2.value ? "value" : "get", r3 = n2[o3], i3 = "#".concat(e3, "Cache");
          if (n2[o3] = function() {
            if (this[i3] === void 0) {
              for (var t4 = arguments.length, e4 = new Array(t4), n3 = 0; n3 < t4; n3++)
                e4[n3] = arguments[n3];
              this[i3] = r3.apply.apply(r3, [this].concat(e4));
            }
            return this[i3];
          }, o3 === "get" && n2.set) {
            var a2 = n2.set;
            n2.set = function(e4) {
              delete t3[i3], a2.apply(this, e4);
            };
          }
          return n2;
        }, t2.isTouchSupported = t2.logLabeled = t2.log = t2.mouseButtons = t2.keyCodes = t2.LogLevels = void 0, e2 = l(e2), o2 = l(o2), r2 = l(r2), a = l(a), t2.LogLevels = s, function(t3) {
          t3.VERBOSE = "VERBOSE", t3.INFO = "INFO", t3.WARN = "WARN", t3.ERROR = "ERROR";
        }(s || (t2.LogLevels = s = {})), t2.keyCodes = { BACKSPACE: 8, TAB: 9, ENTER: 13, SHIFT: 16, CTRL: 17, ALT: 18, ESC: 27, SPACE: 32, LEFT: 37, UP: 38, DOWN: 40, RIGHT: 39, DELETE: 46, META: 91 }, t2.mouseButtons = { LEFT: 0, WHEEL: 1, RIGHT: 2, BACKWARD: 3, FORWARD: 4 }, c.logLevel = s.VERBOSE;
        var u = c.bind(window, false);
        t2.log = u;
        var f = c.bind(window, true);
        function d(t3) {
          return Object.prototype.toString.call(t3).match(/\s([a-zA-Z]+)/)[1].toLowerCase();
        }
        function p(t3) {
          return d(t3) === "function";
        }
        function h(t3) {
          return d(t3) === "object";
        }
        function v(t3) {
          return d(t3) === "undefined";
        }
        function g() {
          return (g = (0, r2.default)(e2.default.mark(function t3(n2) {
            var o3, i3, a2, s2, l2 = arguments;
            return e2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    return s2 = function() {
                      return (s2 = (0, r2.default)(e2.default.mark(function t5(n3, o4, r3) {
                        return e2.default.wrap(function(t6) {
                          for (; ; )
                            switch (t6.prev = t6.next) {
                              case 0:
                                return t6.prev = 0, t6.next = 3, n3.function(n3.data);
                              case 3:
                                return t6.next = 5, o4(v(n3.data) ? {} : n3.data);
                              case 5:
                                t6.next = 10;
                                break;
                              case 7:
                                t6.prev = 7, t6.t0 = t6.catch(0), r3(v(n3.data) ? {} : n3.data);
                              case 10:
                              case "end":
                                return t6.stop();
                            }
                        }, t5, null, [[0, 7]]);
                      }))).apply(this, arguments);
                    }, a2 = function(t5, e3, n3) {
                      return s2.apply(this, arguments);
                    }, o3 = l2.length > 1 && l2[1] !== void 0 ? l2[1] : function() {
                    }, i3 = l2.length > 2 && l2[2] !== void 0 ? l2[2] : function() {
                    }, t4.abrupt("return", n2.reduce(function() {
                      var t5 = (0, r2.default)(e2.default.mark(function t6(n3, r3) {
                        return e2.default.wrap(function(t7) {
                          for (; ; )
                            switch (t7.prev = t7.next) {
                              case 0:
                                return t7.next = 2, n3;
                              case 2:
                                return t7.abrupt("return", a2(r3, o3, i3));
                              case 3:
                              case "end":
                                return t7.stop();
                            }
                        }, t6);
                      }));
                      return function(e3, n3) {
                        return t5.apply(this, arguments);
                      };
                    }(), Promise.resolve()));
                  case 5:
                  case "end":
                    return t4.stop();
                }
            }, t3);
          }))).apply(this, arguments);
        }
        function y() {
          var t3 = { win: false, mac: false, x11: false, linux: false }, e3 = Object.keys(t3).find(function(t4) {
            return navigator.appVersion.toLowerCase().indexOf(t4) !== -1;
          });
          return e3 ? (t3[e3] = true, t3) : t3;
        }
        t2.logLabeled = f;
        var b = "ontouchstart" in document.documentElement;
        t2.isTouchSupported = b;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o = n(80);
      function r() {
        if (typeof WeakMap != "function")
          return null;
        var t2 = new WeakMap();
        return r = function() {
          return t2;
        }, t2;
      }
      t.exports = function(t2) {
        if (t2 && t2.__esModule)
          return t2;
        if (t2 === null || o(t2) !== "object" && typeof t2 != "function")
          return { default: t2 };
        var e2 = r();
        if (e2 && e2.has(t2))
          return e2.get(t2);
        var n2 = {}, i = Object.defineProperty && Object.getOwnPropertyDescriptor;
        for (var a in t2)
          if (Object.prototype.hasOwnProperty.call(t2, a)) {
            var s = i ? Object.getOwnPropertyDescriptor(t2, a) : null;
            s && (s.get || s.set) ? Object.defineProperty(n2, a, s) : n2[a] = t2[a];
          }
        return n2.default = t2, e2 && e2.set(t2, n2), n2;
      };
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(375)], (i = typeof (o = function(o2, r2, i2, a) {
        var s = n(1);
        function l(t2) {
          if (typeof Symbol == "undefined" || t2[Symbol.iterator] == null) {
            if (Array.isArray(t2) || (t2 = function(t3, e3) {
              if (t3) {
                if (typeof t3 == "string")
                  return c(t3, e3);
                var n3 = Object.prototype.toString.call(t3).slice(8, -1);
                return n3 === "Object" && t3.constructor && (n3 = t3.constructor.name), n3 === "Map" || n3 === "Set" ? Array.from(n3) : n3 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n3) ? c(t3, e3) : void 0;
              }
            }(t2))) {
              var e2 = 0, n2 = function() {
              };
              return { s: n2, n: function() {
                return e2 >= t2.length ? { done: true } : { done: false, value: t2[e2++] };
              }, e: function(t3) {
                throw t3;
              }, f: n2 };
            }
            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
          }
          var o3, r3, i3 = true, a2 = false;
          return { s: function() {
            o3 = t2[Symbol.iterator]();
          }, n: function() {
            var t3 = o3.next();
            return i3 = t3.done, t3;
          }, e: function(t3) {
            a2 = true, r3 = t3;
          }, f: function() {
            try {
              i3 || o3.return == null || o3.return();
            } finally {
              if (a2)
                throw r3;
            }
          } };
        }
        function c(t2, e2) {
          (e2 == null || e2 > t2.length) && (e2 = t2.length);
          for (var n2 = 0, o3 = new Array(e2); n2 < e2; n2++)
            o3[n2] = t2[n2];
          return o3;
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = s(r2), i2 = s(i2), a = s(a);
        var u = function() {
          function t2(e2) {
            var n2 = this, o3 = e2.config, i3 = e2.eventsDispatcher;
            if ((0, r2.default)(this, t2), this.nodes = {}, this.listeners = new a.default(), this.readOnlyMutableListeners = { on: function(t3, e3, o4) {
              var r3 = arguments.length > 3 && arguments[3] !== void 0 && arguments[3];
              n2.mutableListenerIds.push(n2.listeners.on(t3, e3, o4, r3));
            }, clearAll: function() {
              var t3, e3 = l(n2.mutableListenerIds);
              try {
                for (e3.s(); !(t3 = e3.n()).done; ) {
                  var o4 = t3.value;
                  n2.listeners.offById(o4);
                }
              } catch (t4) {
                e3.e(t4);
              } finally {
                e3.f();
              }
              n2.mutableListenerIds = [];
            } }, this.mutableListenerIds = [], (this instanceof t2 ? this.constructor : void 0) === t2)
              throw new TypeError("Constructors for abstract class Module are not allowed.");
            this.config = o3, this.eventsDispatcher = i3;
          }
          return (0, i2.default)(t2, [{ key: "removeAllNodes", value: function() {
            for (var t3 in this.nodes) {
              var e2 = this.nodes[t3];
              e2 instanceof HTMLElement && e2.remove();
            }
          } }, { key: "state", set: function(t3) {
            this.Editor = t3;
          } }, { key: "isRtl", get: function() {
            return this.config.i18n.direction === "rtl";
          } }]), t2;
        }();
        o2.default = u, u.displayName = "Module", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e) {
      var n = t.exports = typeof window != "undefined" && window.Math == Math ? window : typeof self != "undefined" && self.Math == Math ? self : Function("return this")();
      typeof __g == "number" && (__g = n);
    }, function(t, e) {
      t.exports = function(t2) {
        try {
          return !!t2();
        } catch (t3) {
          return true;
        }
      };
    }, function(t, e, n) {
      var o = n(13);
      t.exports = function(t2) {
        if (!o(t2))
          throw TypeError(t2 + " is not an object!");
        return t2;
      };
    }, function(t, e) {
      t.exports = function(t2) {
        return typeof t2 == "object" ? t2 !== null : typeof t2 == "function";
      };
    }, function(t, e, n) {
      var o = n(68)("wks"), r = n(44), i = n(10).Symbol, a = typeof i == "function";
      (t.exports = function(t2) {
        return o[t2] || (o[t2] = a && i[t2] || (a ? i : r)("Symbol." + t2));
      }).store = o;
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(42), n(2), n(3), n(7)], (i = typeof (o = function(o2, r2, i2, a, s) {
        var l = n(8), c = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = c(r2), i2 = c(i2), a = c(a), s = l(s);
        var u = function() {
          function t2() {
            (0, i2.default)(this, t2);
          }
          return (0, a.default)(t2, null, [{ key: "isSingleTag", value: function(t3) {
            return t3.tagName && ["AREA", "BASE", "BR", "COL", "COMMAND", "EMBED", "HR", "IMG", "INPUT", "KEYGEN", "LINK", "META", "PARAM", "SOURCE", "TRACK", "WBR"].includes(t3.tagName);
          } }, { key: "isLineBreakTag", value: function(t3) {
            return t3 && t3.tagName && ["BR", "WBR"].includes(t3.tagName);
          } }, { key: "make", value: function(t3) {
            var e2, n2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null, o3 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, i3 = document.createElement(t3);
            for (var a2 in Array.isArray(n2) ? (e2 = i3.classList).add.apply(e2, (0, r2.default)(n2)) : n2 && i3.classList.add(n2), o3)
              Object.prototype.hasOwnProperty.call(o3, a2) && (i3[a2] = o3[a2]);
            return i3;
          } }, { key: "text", value: function(t3) {
            return document.createTextNode(t3);
          } }, { key: "svg", value: function(t3) {
            var e2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 14, n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 14, o3 = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            return o3.classList.add("icon", "icon--" + t3), o3.setAttribute("width", e2 + "px"), o3.setAttribute("height", n2 + "px"), o3.innerHTML = '<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'.concat(t3, '"></use>'), o3;
          } }, { key: "append", value: function(t3, e2) {
            Array.isArray(e2) ? e2.forEach(function(e3) {
              return t3.appendChild(e3);
            }) : t3.appendChild(e2);
          } }, { key: "prepend", value: function(t3, e2) {
            Array.isArray(e2) ? (e2 = e2.reverse()).forEach(function(e3) {
              return t3.prepend(e3);
            }) : t3.prepend(e2);
          } }, { key: "swap", value: function(t3, e2) {
            var n2 = document.createElement("div"), o3 = t3.parentNode;
            o3.insertBefore(n2, t3), o3.insertBefore(t3, e2), o3.insertBefore(e2, n2), o3.removeChild(n2);
          } }, { key: "find", value: function() {
            var t3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : document, e2 = arguments.length > 1 ? arguments[1] : void 0;
            return t3.querySelector(e2);
          } }, { key: "get", value: function(t3) {
            return document.getElementById(t3);
          } }, { key: "findAll", value: function() {
            var t3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : document, e2 = arguments.length > 1 ? arguments[1] : void 0;
            return t3.querySelectorAll(e2);
          } }, { key: "findAllInputs", value: function(e2) {
            return s.array(e2.querySelectorAll(t2.allInputsSelector)).reduce(function(e3, n2) {
              return t2.isNativeInput(n2) || t2.containsOnlyInlineElements(n2) ? [].concat((0, r2.default)(e3), [n2]) : [].concat((0, r2.default)(e3), (0, r2.default)(t2.getDeepestBlockElements(n2)));
            }, []);
          } }, { key: "getDeepestNode", value: function(e2) {
            var n2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], o3 = n2 ? "lastChild" : "firstChild", r3 = n2 ? "previousSibling" : "nextSibling";
            if (e2 && e2.nodeType === Node.ELEMENT_NODE && e2[o3]) {
              var i3 = e2[o3];
              if (t2.isSingleTag(i3) && !t2.isNativeInput(i3) && !t2.isLineBreakTag(i3))
                if (i3[r3])
                  i3 = i3[r3];
                else {
                  if (!i3.parentNode[r3])
                    return i3.parentNode;
                  i3 = i3.parentNode[r3];
                }
              return this.getDeepestNode(i3, n2);
            }
            return e2;
          } }, { key: "isElement", value: function(t3) {
            return !s.isNumber(t3) && t3 && t3.nodeType && t3.nodeType === Node.ELEMENT_NODE;
          } }, { key: "isFragment", value: function(t3) {
            return !s.isNumber(t3) && t3 && t3.nodeType && t3.nodeType === Node.DOCUMENT_FRAGMENT_NODE;
          } }, { key: "isContentEditable", value: function(t3) {
            return t3.contentEditable === "true";
          } }, { key: "isNativeInput", value: function(t3) {
            return !(!t3 || !t3.tagName) && ["INPUT", "TEXTAREA"].includes(t3.tagName);
          } }, { key: "canSetCaret", value: function(e2) {
            var n2 = true;
            if (t2.isNativeInput(e2))
              switch (e2.type) {
                case "file":
                case "checkbox":
                case "radio":
                case "hidden":
                case "submit":
                case "button":
                case "image":
                case "reset":
                  n2 = false;
              }
            else
              n2 = t2.isContentEditable(e2);
            return n2;
          } }, { key: "isNodeEmpty", value: function(t3) {
            return !(this.isSingleTag(t3) && !this.isLineBreakTag(t3)) && (this.isElement(t3) && this.isNativeInput(t3) ? t3.value : t3.textContent.replace("\u200B", "")).trim().length === 0;
          } }, { key: "isLeaf", value: function(t3) {
            return !!t3 && t3.childNodes.length === 0;
          } }, { key: "isEmpty", value: function(t3) {
            t3.normalize();
            for (var e2 = [t3]; e2.length > 0; )
              if (t3 = e2.shift()) {
                if (this.isLeaf(t3) && !this.isNodeEmpty(t3))
                  return false;
                t3.childNodes && e2.push.apply(e2, (0, r2.default)(Array.from(t3.childNodes)));
              }
            return true;
          } }, { key: "isHTMLString", value: function(e2) {
            var n2 = t2.make("div");
            return n2.innerHTML = e2, n2.childElementCount > 0;
          } }, { key: "getContentLength", value: function(e2) {
            return t2.isNativeInput(e2) ? e2.value.length : e2.nodeType === Node.TEXT_NODE ? e2.length : e2.textContent.length;
          } }, { key: "containsOnlyInlineElements", value: function(e2) {
            var n2;
            return s.isString(e2) ? (n2 = document.createElement("div")).innerHTML = e2 : n2 = e2, Array.from(n2.children).every(function e3(n3) {
              return !t2.blockElements.includes(n3.tagName.toLowerCase()) && Array.from(n3.children).every(e3);
            });
          } }, { key: "getDeepestBlockElements", value: function(e2) {
            return t2.containsOnlyInlineElements(e2) ? [e2] : Array.from(e2.children).reduce(function(e3, n2) {
              return [].concat((0, r2.default)(e3), (0, r2.default)(t2.getDeepestBlockElements(n2)));
            }, []);
          } }, { key: "getHolder", value: function(t3) {
            return s.isString(t3) ? document.getElementById(t3) : t3;
          } }, { key: "isExtensionNode", value: function(t3) {
            return t3 && ["GRAMMARLY-EXTENSION"].includes(t3.nodeName);
          } }, { key: "isAnchor", value: function(t3) {
            return t3.tagName.toLowerCase() === "a";
          } }, { key: "allInputsSelector", get: function() {
            return "[contenteditable=true], textarea, input:not([type]), " + ["text", "password", "email", "number", "search", "tel", "url"].map(function(t3) {
              return 'input[type="'.concat(t3, '"]');
            }).join(", ");
          } }, { key: "blockElements", get: function() {
            return ["address", "article", "aside", "blockquote", "canvas", "div", "dl", "dt", "fieldset", "figcaption", "figure", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "header", "hgroup", "hr", "li", "main", "nav", "noscript", "ol", "output", "p", "pre", "ruby", "section", "table", "tr", "tfoot", "ul", "video"];
          } }]), t2;
        }();
        o2.default = u, u.displayName = "Dom", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o = n(33), r = Math.min;
      t.exports = function(t2) {
        return t2 > 0 ? r(o(t2), 9007199254740991) : 0;
      };
    }, function(t, e) {
      var n = t.exports = { version: "2.6.11" };
      typeof __e == "number" && (__e = n);
    }, function(t, e, n) {
      t.exports = !n(11)(function() {
        return Object.defineProperty({}, "a", { get: function() {
          return 7;
        } }).a != 7;
      });
    }, function(t, e, n) {
      var o = n(12), r = n(113), i = n(40), a = Object.defineProperty;
      e.f = n(18) ? Object.defineProperty : function(t2, e2, n2) {
        if (o(t2), e2 = i(e2, true), o(n2), r)
          try {
            return a(t2, e2, n2);
          } catch (t3) {
          }
        if ("get" in n2 || "set" in n2)
          throw TypeError("Accessors not supported!");
        return "value" in n2 && (t2[e2] = n2.value), t2;
      };
    }, function(t, e, n) {
      var o = n(38);
      t.exports = function(t2) {
        return Object(o(t2));
      };
    }, function(t, e, n) {
      var o = n(10), r = n(27), i = n(26), a = n(44)("src"), s = n(191), l = ("" + s).split("toString");
      n(17).inspectSource = function(t2) {
        return s.call(t2);
      }, (t.exports = function(t2, e2, n2, s2) {
        var c = typeof n2 == "function";
        c && (i(n2, "name") || r(n2, "name", e2)), t2[e2] !== n2 && (c && (i(n2, a) || r(n2, a, t2[e2] ? "" + t2[e2] : l.join(String(e2)))), t2 === o ? t2[e2] = n2 : s2 ? t2[e2] ? t2[e2] = n2 : r(t2, e2, n2) : (delete t2[e2], r(t2, e2, n2)));
      })(Function.prototype, "toString", function() {
        return typeof this == "function" && this[a] || s.call(this);
      });
    }, function(t, e, n) {
      var o = n(0), r = n(11), i = n(38), a = /"/g, s = function(t2, e2, n2, o2) {
        var r2 = String(i(t2)), s2 = "<" + e2;
        return n2 !== "" && (s2 += " " + n2 + '="' + String(o2).replace(a, "&quot;") + '"'), s2 + ">" + r2 + "</" + e2 + ">";
      };
      t.exports = function(t2, e2) {
        var n2 = {};
        n2[t2] = e2(s), o(o.P + o.F * r(function() {
          var e3 = ""[t2]('"');
          return e3 !== e3.toLowerCase() || e3.split('"').length > 3;
        }), "String", n2);
      };
    }, function(t, e, n) {
      t.exports = n(144);
    }, function(t, e) {
      function n(t2, e2, n2, o, r, i, a) {
        try {
          var s = t2[i](a), l = s.value;
        } catch (t3) {
          return void n2(t3);
        }
        s.done ? e2(l) : Promise.resolve(l).then(o, r);
      }
      t.exports = function(t2) {
        return function() {
          var e2 = this, o = arguments;
          return new Promise(function(r, i) {
            var a = t2.apply(e2, o);
            function s(t3) {
              n(a, r, i, s, l, "next", t3);
            }
            function l(t3) {
              n(a, r, i, s, l, "throw", t3);
            }
            s(void 0);
          });
        };
      };
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(7), n(15)], (i = typeof (o = function(o2, r2, i2, a, s) {
        var l = n(8), c = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = c(r2), i2 = c(i2), a = l(a), s = c(s);
        var u = function() {
          function t2() {
            (0, r2.default)(this, t2), this.instance = null, this.selection = null, this.savedSelectionRange = null, this.isFakeBackgroundEnabled = false, this.commandBackground = "backColor", this.commandRemoveFormat = "removeFormat";
          }
          return (0, i2.default)(t2, [{ key: "removeFakeBackground", value: function() {
            this.isFakeBackgroundEnabled && (this.isFakeBackgroundEnabled = false, document.execCommand(this.commandRemoveFormat));
          } }, { key: "setFakeBackground", value: function() {
            document.execCommand(this.commandBackground, false, "#a8d6ff"), this.isFakeBackgroundEnabled = true;
          } }, { key: "save", value: function() {
            this.savedSelectionRange = t2.range;
          } }, { key: "restore", value: function() {
            if (this.savedSelectionRange) {
              var t3 = window.getSelection();
              t3.removeAllRanges(), t3.addRange(this.savedSelectionRange);
            }
          } }, { key: "clearSaved", value: function() {
            this.savedSelectionRange = null;
          } }, { key: "collapseToEnd", value: function() {
            var t3 = window.getSelection(), e2 = document.createRange();
            e2.selectNodeContents(t3.focusNode), e2.collapse(false), t3.removeAllRanges(), t3.addRange(e2);
          } }, { key: "findParentTag", value: function(t3, e2) {
            var n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 10, o3 = window.getSelection(), r3 = null;
            if (!o3 || !o3.anchorNode || !o3.focusNode)
              return null;
            var i3 = [o3.anchorNode, o3.focusNode];
            return i3.forEach(function(o4) {
              for (var i4 = n2; i4 > 0 && o4.parentNode && (o4.tagName !== t3 || (r3 = o4, e2 && o4.classList && !o4.classList.contains(e2) && (r3 = null), !r3)); )
                o4 = o4.parentNode, i4--;
            }), r3;
          } }, { key: "expandToTag", value: function(t3) {
            var e2 = window.getSelection();
            e2.removeAllRanges();
            var n2 = document.createRange();
            n2.selectNodeContents(t3), e2.addRange(n2);
          } }], [{ key: "isSelectionAtEditor", value: function(e2) {
            if (!e2)
              return false;
            var n2 = e2.anchorNode || e2.focusNode;
            n2 && n2.nodeType === Node.TEXT_NODE && (n2 = n2.parentNode);
            var o3 = null;
            return n2 && n2 instanceof Element && (o3 = n2.closest(".".concat(t2.CSS.editorZone))), !!o3 && o3.nodeType === Node.ELEMENT_NODE;
          } }, { key: "isRangeAtEditor", value: function(e2) {
            if (e2) {
              var n2 = e2.startContainer;
              n2 && n2.nodeType === Node.TEXT_NODE && (n2 = n2.parentNode);
              var o3 = null;
              return n2 && n2 instanceof Element && (o3 = n2.closest(".".concat(t2.CSS.editorZone))), !!o3 && o3.nodeType === Node.ELEMENT_NODE;
            }
          } }, { key: "getRangeFromSelection", value: function(t3) {
            return t3 && t3.rangeCount ? t3.getRangeAt(0) : null;
          } }, { key: "get", value: function() {
            return window.getSelection();
          } }, { key: "setCursor", value: function(t3) {
            var e2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, n2 = document.createRange(), o3 = window.getSelection();
            if (s.default.isNativeInput(t3)) {
              if (!s.default.canSetCaret(t3))
                return;
              return t3.focus(), t3.selectionStart = t3.selectionEnd = e2, t3.getBoundingClientRect();
            }
            return n2.setStart(t3, e2), n2.setEnd(t3, e2), o3.removeAllRanges(), o3.addRange(n2), n2.getBoundingClientRect();
          } }, { key: "addFakeCursor", value: function(e2) {
            var n2 = t2.range, o3 = s.default.make("span", "codex-editor__fake-cursor");
            o3.dataset.mutationFree = "true", !n2 || e2 && !e2.contains(n2.startContainer) || (n2.collapse(), n2.insertNode(o3));
          } }, { key: "removeFakeCursor", value: function() {
            var t3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : document.body, e2 = s.default.find(t3, ".codex-editor__fake-cursor");
            e2 && e2.remove();
          } }, { key: "CSS", get: function() {
            return { editorWrapper: "codex-editor", editorZone: "codex-editor__redactor" };
          } }, { key: "anchorNode", get: function() {
            var t3 = window.getSelection();
            return t3 ? t3.anchorNode : null;
          } }, { key: "anchorElement", get: function() {
            var t3 = window.getSelection();
            if (!t3)
              return null;
            var e2 = t3.anchorNode;
            return e2 ? s.default.isElement(e2) ? e2 : e2.parentElement : null;
          } }, { key: "anchorOffset", get: function() {
            var t3 = window.getSelection();
            return t3 ? t3.anchorOffset : null;
          } }, { key: "isCollapsed", get: function() {
            var t3 = window.getSelection();
            return t3 ? t3.isCollapsed : null;
          } }, { key: "isAtEditor", get: function() {
            return this.isSelectionAtEditor(t2.get());
          } }, { key: "isSelectionExists", get: function() {
            return !!t2.get().anchorNode;
          } }, { key: "range", get: function() {
            return this.getRangeFromSelection(this.get());
          } }, { key: "rect", get: function() {
            var t3, e2 = document.selection, n2 = { x: 0, y: 0, width: 0, height: 0 };
            if (e2 && e2.type !== "Control")
              return t3 = (e2 = e2).createRange(), n2.x = t3.boundingLeft, n2.y = t3.boundingTop, n2.width = t3.boundingWidth, n2.height = t3.boundingHeight, n2;
            if (!window.getSelection)
              return a.log("Method window.getSelection is not supported", "warn"), n2;
            if ((e2 = window.getSelection()).rangeCount === null || isNaN(e2.rangeCount))
              return a.log("Method SelectionUtils.rangeCount is not supported", "warn"), n2;
            if (e2.rangeCount === 0)
              return n2;
            if ((t3 = e2.getRangeAt(0).cloneRange()).getBoundingClientRect && (n2 = t3.getBoundingClientRect()), n2.x === 0 && n2.y === 0) {
              var o3 = document.createElement("span");
              if (o3.getBoundingClientRect) {
                o3.appendChild(document.createTextNode("\u200B")), t3.insertNode(o3), n2 = o3.getBoundingClientRect();
                var r3 = o3.parentNode;
                r3.removeChild(o3), r3.normalize();
              }
            }
            return n2;
          } }, { key: "text", get: function() {
            return window.getSelection ? window.getSelection().toString() : "";
          } }]), t2;
        }();
        o2.default = u, u.displayName = "SelectionUtils", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e) {
      var n = {}.hasOwnProperty;
      t.exports = function(t2, e2) {
        return n.call(t2, e2);
      };
    }, function(t, e, n) {
      var o = n(19), r = n(43);
      t.exports = n(18) ? function(t2, e2, n2) {
        return o.f(t2, e2, r(1, n2));
      } : function(t2, e2, n2) {
        return t2[e2] = n2, t2;
      };
    }, function(t, e, n) {
      var o = n(61), r = n(38);
      t.exports = function(t2) {
        return o(r(t2));
      };
    }, function(t, e, n) {
      var o = n(11);
      t.exports = function(t2, e2) {
        return !!t2 && o(function() {
          e2 ? t2.call(null, function() {
          }, 1) : t2.call(null);
        });
      };
    }, function(t, e, n) {
      var o = n(360), r = n(361), i = n(145), a = n(362);
      t.exports = function(t2, e2) {
        return o(t2) || r(t2, e2) || i(t2, e2) || a();
      };
    }, function(t, e, n) {
      var o = n(32);
      t.exports = function(t2, e2, n2) {
        if (o(t2), e2 === void 0)
          return t2;
        switch (n2) {
          case 1:
            return function(n3) {
              return t2.call(e2, n3);
            };
          case 2:
            return function(n3, o2) {
              return t2.call(e2, n3, o2);
            };
          case 3:
            return function(n3, o2, r) {
              return t2.call(e2, n3, o2, r);
            };
        }
        return function() {
          return t2.apply(e2, arguments);
        };
      };
    }, function(t, e) {
      t.exports = function(t2) {
        if (typeof t2 != "function")
          throw TypeError(t2 + " is not a function!");
        return t2;
      };
    }, function(t, e) {
      var n = Math.ceil, o = Math.floor;
      t.exports = function(t2) {
        return isNaN(t2 = +t2) ? 0 : (t2 > 0 ? o : n)(t2);
      };
    }, function(t, e, n) {
      var o = n(62), r = n(43), i = n(28), a = n(40), s = n(26), l = n(113), c = Object.getOwnPropertyDescriptor;
      e.f = n(18) ? c : function(t2, e2) {
        if (t2 = i(t2), e2 = a(e2, true), l)
          try {
            return c(t2, e2);
          } catch (t3) {
          }
        if (s(t2, e2))
          return r(!o.f.call(t2, e2), t2[e2]);
      };
    }, function(t, e, n) {
      var o = n(0), r = n(17), i = n(11);
      t.exports = function(t2, e2) {
        var n2 = (r.Object || {})[t2] || Object[t2], a = {};
        a[t2] = e2(n2), o(o.S + o.F * i(function() {
          n2(1);
        }), "Object", a);
      };
    }, function(t, e, n) {
      var o = n(31), r = n(61), i = n(20), a = n(16), s = n(129);
      t.exports = function(t2, e2) {
        var n2 = t2 == 1, l = t2 == 2, c = t2 == 3, u = t2 == 4, f = t2 == 6, d = t2 == 5 || f, p = e2 || s;
        return function(e3, s2, h) {
          for (var v, g, y = i(e3), b = r(y), m = o(s2, h, 3), k = a(b.length), x = 0, w = n2 ? p(e3, k) : l ? p(e3, 0) : void 0; k > x; x++)
            if ((d || x in b) && (g = m(v = b[x], x, y), t2)) {
              if (n2)
                w[x] = g;
              else if (g)
                switch (t2) {
                  case 3:
                    return true;
                  case 5:
                    return v;
                  case 6:
                    return x;
                  case 2:
                    w.push(v);
                }
              else if (u)
                return false;
            }
          return f ? -1 : c || u ? u : w;
        };
      };
    }, function(t, e) {
      var n = {}.toString;
      t.exports = function(t2) {
        return n.call(t2).slice(8, -1);
      };
    }, function(t, e) {
      t.exports = function(t2) {
        if (t2 == null)
          throw TypeError("Can't call method on  " + t2);
        return t2;
      };
    }, function(t, e, n) {
      if (n(18)) {
        var o = n(45), r = n(10), i = n(11), a = n(0), s = n(79), l = n(109), c = n(31), u = n(57), f = n(43), d = n(27), p = n(58), h = n(33), v = n(16), g = n(140), y = n(47), b = n(40), m = n(26), k = n(63), x = n(13), w = n(20), S = n(101), T = n(48), E = n(50), B = n(49).f, C = n(103), _ = n(44), O = n(14), I = n(36), M = n(69), R = n(64), A = n(105), N = n(55), P = n(72), L = n(56), D = n(104), j = n(131), F = n(19), U = n(34), H = F.f, z = U.f, W = r.RangeError, Y = r.TypeError, V = r.Uint8Array, X = Array.prototype, G = l.ArrayBuffer, K = l.DataView, Z = I(0), q = I(2), J = I(3), $ = I(4), Q = I(5), tt = I(6), et = M(true), nt = M(false), ot = A.values, rt = A.keys, it = A.entries, at = X.lastIndexOf, st = X.reduce, lt = X.reduceRight, ct = X.join, ut = X.sort, ft = X.slice, dt = X.toString, pt = X.toLocaleString, ht = O("iterator"), vt = O("toStringTag"), gt = _("typed_constructor"), yt = _("def_constructor"), bt = s.CONSTR, mt = s.TYPED, kt = s.VIEW, xt = I(1, function(t2, e2) {
          return Bt(R(t2, t2[yt]), e2);
        }), wt = i(function() {
          return new V(new Uint16Array([1]).buffer)[0] === 1;
        }), St = !!V && !!V.prototype.set && i(function() {
          new V(1).set({});
        }), Tt = function(t2, e2) {
          var n2 = h(t2);
          if (n2 < 0 || n2 % e2)
            throw W("Wrong offset!");
          return n2;
        }, Et = function(t2) {
          if (x(t2) && mt in t2)
            return t2;
          throw Y(t2 + " is not a typed array!");
        }, Bt = function(t2, e2) {
          if (!x(t2) || !(gt in t2))
            throw Y("It is not a typed array constructor!");
          return new t2(e2);
        }, Ct = function(t2, e2) {
          return _t(R(t2, t2[yt]), e2);
        }, _t = function(t2, e2) {
          for (var n2 = 0, o2 = e2.length, r2 = Bt(t2, o2); o2 > n2; )
            r2[n2] = e2[n2++];
          return r2;
        }, Ot = function(t2, e2, n2) {
          H(t2, e2, { get: function() {
            return this._d[n2];
          } });
        }, It = function(t2) {
          var e2, n2, o2, r2, i2, a2, s2 = w(t2), l2 = arguments.length, u2 = l2 > 1 ? arguments[1] : void 0, f2 = u2 !== void 0, d2 = C(s2);
          if (d2 != null && !S(d2)) {
            for (a2 = d2.call(s2), o2 = [], e2 = 0; !(i2 = a2.next()).done; e2++)
              o2.push(i2.value);
            s2 = o2;
          }
          for (f2 && l2 > 2 && (u2 = c(u2, arguments[2], 2)), e2 = 0, n2 = v(s2.length), r2 = Bt(this, n2); n2 > e2; e2++)
            r2[e2] = f2 ? u2(s2[e2], e2) : s2[e2];
          return r2;
        }, Mt = function() {
          for (var t2 = 0, e2 = arguments.length, n2 = Bt(this, e2); e2 > t2; )
            n2[t2] = arguments[t2++];
          return n2;
        }, Rt = !!V && i(function() {
          pt.call(new V(1));
        }), At = function() {
          return pt.apply(Rt ? ft.call(Et(this)) : Et(this), arguments);
        }, Nt = { copyWithin: function(t2, e2) {
          return j.call(Et(this), t2, e2, arguments.length > 2 ? arguments[2] : void 0);
        }, every: function(t2) {
          return $(Et(this), t2, arguments.length > 1 ? arguments[1] : void 0);
        }, fill: function(t2) {
          return D.apply(Et(this), arguments);
        }, filter: function(t2) {
          return Ct(this, q(Et(this), t2, arguments.length > 1 ? arguments[1] : void 0));
        }, find: function(t2) {
          return Q(Et(this), t2, arguments.length > 1 ? arguments[1] : void 0);
        }, findIndex: function(t2) {
          return tt(Et(this), t2, arguments.length > 1 ? arguments[1] : void 0);
        }, forEach: function(t2) {
          Z(Et(this), t2, arguments.length > 1 ? arguments[1] : void 0);
        }, indexOf: function(t2) {
          return nt(Et(this), t2, arguments.length > 1 ? arguments[1] : void 0);
        }, includes: function(t2) {
          return et(Et(this), t2, arguments.length > 1 ? arguments[1] : void 0);
        }, join: function(t2) {
          return ct.apply(Et(this), arguments);
        }, lastIndexOf: function(t2) {
          return at.apply(Et(this), arguments);
        }, map: function(t2) {
          return xt(Et(this), t2, arguments.length > 1 ? arguments[1] : void 0);
        }, reduce: function(t2) {
          return st.apply(Et(this), arguments);
        }, reduceRight: function(t2) {
          return lt.apply(Et(this), arguments);
        }, reverse: function() {
          for (var t2, e2 = Et(this).length, n2 = Math.floor(e2 / 2), o2 = 0; o2 < n2; )
            t2 = this[o2], this[o2++] = this[--e2], this[e2] = t2;
          return this;
        }, some: function(t2) {
          return J(Et(this), t2, arguments.length > 1 ? arguments[1] : void 0);
        }, sort: function(t2) {
          return ut.call(Et(this), t2);
        }, subarray: function(t2, e2) {
          var n2 = Et(this), o2 = n2.length, r2 = y(t2, o2);
          return new (R(n2, n2[yt]))(n2.buffer, n2.byteOffset + r2 * n2.BYTES_PER_ELEMENT, v((e2 === void 0 ? o2 : y(e2, o2)) - r2));
        } }, Pt = function(t2, e2) {
          return Ct(this, ft.call(Et(this), t2, e2));
        }, Lt = function(t2) {
          Et(this);
          var e2 = Tt(arguments[1], 1), n2 = this.length, o2 = w(t2), r2 = v(o2.length), i2 = 0;
          if (r2 + e2 > n2)
            throw W("Wrong length!");
          for (; i2 < r2; )
            this[e2 + i2] = o2[i2++];
        }, Dt = { entries: function() {
          return it.call(Et(this));
        }, keys: function() {
          return rt.call(Et(this));
        }, values: function() {
          return ot.call(Et(this));
        } }, jt = function(t2, e2) {
          return x(t2) && t2[mt] && typeof e2 != "symbol" && e2 in t2 && String(+e2) == String(e2);
        }, Ft = function(t2, e2) {
          return jt(t2, e2 = b(e2, true)) ? f(2, t2[e2]) : z(t2, e2);
        }, Ut = function(t2, e2, n2) {
          return !(jt(t2, e2 = b(e2, true)) && x(n2) && m(n2, "value")) || m(n2, "get") || m(n2, "set") || n2.configurable || m(n2, "writable") && !n2.writable || m(n2, "enumerable") && !n2.enumerable ? H(t2, e2, n2) : (t2[e2] = n2.value, t2);
        };
        bt || (U.f = Ft, F.f = Ut), a(a.S + a.F * !bt, "Object", { getOwnPropertyDescriptor: Ft, defineProperty: Ut }), i(function() {
          dt.call({});
        }) && (dt = pt = function() {
          return ct.call(this);
        });
        var Ht = p({}, Nt);
        p(Ht, Dt), d(Ht, ht, Dt.values), p(Ht, { slice: Pt, set: Lt, constructor: function() {
        }, toString: dt, toLocaleString: At }), Ot(Ht, "buffer", "b"), Ot(Ht, "byteOffset", "o"), Ot(Ht, "byteLength", "l"), Ot(Ht, "length", "e"), H(Ht, vt, { get: function() {
          return this[mt];
        } }), t.exports = function(t2, e2, n2, l2) {
          var c2 = t2 + ((l2 = !!l2) ? "Clamped" : "") + "Array", f2 = "get" + t2, p2 = "set" + t2, h2 = r[c2], y2 = h2 || {}, b2 = h2 && E(h2), m2 = !h2 || !s.ABV, w2 = {}, S2 = h2 && h2.prototype, C2 = function(t3, n3) {
            H(t3, n3, { get: function() {
              return function(t4, n4) {
                var o2 = t4._d;
                return o2.v[f2](n4 * e2 + o2.o, wt);
              }(this, n3);
            }, set: function(t4) {
              return function(t5, n4, o2) {
                var r2 = t5._d;
                l2 && (o2 = (o2 = Math.round(o2)) < 0 ? 0 : o2 > 255 ? 255 : 255 & o2), r2.v[p2](n4 * e2 + r2.o, o2, wt);
              }(this, n3, t4);
            }, enumerable: true });
          };
          m2 ? (h2 = n2(function(t3, n3, o2, r2) {
            u(t3, h2, c2, "_d");
            var i2, a2, s2, l3, f3 = 0, p3 = 0;
            if (x(n3)) {
              if (!(n3 instanceof G || (l3 = k(n3)) == "ArrayBuffer" || l3 == "SharedArrayBuffer"))
                return mt in n3 ? _t(h2, n3) : It.call(h2, n3);
              i2 = n3, p3 = Tt(o2, e2);
              var y3 = n3.byteLength;
              if (r2 === void 0) {
                if (y3 % e2)
                  throw W("Wrong length!");
                if ((a2 = y3 - p3) < 0)
                  throw W("Wrong length!");
              } else if ((a2 = v(r2) * e2) + p3 > y3)
                throw W("Wrong length!");
              s2 = a2 / e2;
            } else
              s2 = g(n3), i2 = new G(a2 = s2 * e2);
            for (d(t3, "_d", { b: i2, o: p3, l: a2, e: s2, v: new K(i2) }); f3 < s2; )
              C2(t3, f3++);
          }), S2 = h2.prototype = T(Ht), d(S2, "constructor", h2)) : i(function() {
            h2(1);
          }) && i(function() {
            new h2(-1);
          }) && P(function(t3) {
            new h2(), new h2(null), new h2(1.5), new h2(t3);
          }, true) || (h2 = n2(function(t3, n3, o2, r2) {
            var i2;
            return u(t3, h2, c2), x(n3) ? n3 instanceof G || (i2 = k(n3)) == "ArrayBuffer" || i2 == "SharedArrayBuffer" ? r2 !== void 0 ? new y2(n3, Tt(o2, e2), r2) : o2 !== void 0 ? new y2(n3, Tt(o2, e2)) : new y2(n3) : mt in n3 ? _t(h2, n3) : It.call(h2, n3) : new y2(g(n3));
          }), Z(b2 !== Function.prototype ? B(y2).concat(B(b2)) : B(y2), function(t3) {
            t3 in h2 || d(h2, t3, y2[t3]);
          }), h2.prototype = S2, o || (S2.constructor = h2));
          var _2 = S2[ht], O2 = !!_2 && (_2.name == "values" || _2.name == null), I2 = Dt.values;
          d(h2, gt, true), d(S2, mt, c2), d(S2, kt, true), d(S2, yt, h2), (l2 ? new h2(1)[vt] == c2 : vt in S2) || H(S2, vt, { get: function() {
            return c2;
          } }), w2[c2] = h2, a(a.G + a.W + a.F * (h2 != y2), w2), a(a.S, c2, { BYTES_PER_ELEMENT: e2 }), a(a.S + a.F * i(function() {
            y2.of.call(h2, 1);
          }), c2, { from: It, of: Mt }), "BYTES_PER_ELEMENT" in S2 || d(S2, "BYTES_PER_ELEMENT", e2), a(a.P, c2, Nt), L(c2), a(a.P + a.F * St, c2, { set: Lt }), a(a.P + a.F * !O2, c2, Dt), o || S2.toString == dt || (S2.toString = dt), a(a.P + a.F * i(function() {
            new h2(1).slice();
          }), c2, { slice: Pt }), a(a.P + a.F * (i(function() {
            return [1, 2].toLocaleString() != new h2([1, 2]).toLocaleString();
          }) || !i(function() {
            S2.toLocaleString.call([1, 2]);
          })), c2, { toLocaleString: At }), N[c2] = O2 ? _2 : I2, o || O2 || d(S2, ht, I2);
        };
      } else
        t.exports = function() {
        };
    }, function(t, e, n) {
      var o = n(13);
      t.exports = function(t2, e2) {
        if (!o(t2))
          return t2;
        var n2, r;
        if (e2 && typeof (n2 = t2.toString) == "function" && !o(r = n2.call(t2)))
          return r;
        if (typeof (n2 = t2.valueOf) == "function" && !o(r = n2.call(t2)))
          return r;
        if (!e2 && typeof (n2 = t2.toString) == "function" && !o(r = n2.call(t2)))
          return r;
        throw TypeError("Can't convert object to primitive value");
      };
    }, function(t, e, n) {
      var o = n(44)("meta"), r = n(13), i = n(26), a = n(19).f, s = 0, l = Object.isExtensible || function() {
        return true;
      }, c = !n(11)(function() {
        return l(Object.preventExtensions({}));
      }), u = function(t2) {
        a(t2, o, { value: { i: "O" + ++s, w: {} } });
      }, f = t.exports = { KEY: o, NEED: false, fastKey: function(t2, e2) {
        if (!r(t2))
          return typeof t2 == "symbol" ? t2 : (typeof t2 == "string" ? "S" : "P") + t2;
        if (!i(t2, o)) {
          if (!l(t2))
            return "F";
          if (!e2)
            return "E";
          u(t2);
        }
        return t2[o].i;
      }, getWeak: function(t2, e2) {
        if (!i(t2, o)) {
          if (!l(t2))
            return true;
          if (!e2)
            return false;
          u(t2);
        }
        return t2[o].w;
      }, onFreeze: function(t2) {
        return c && f.NEED && l(t2) && !i(t2, o) && u(t2), t2;
      } };
    }, function(t, e, n) {
      var o = n(367), r = n(368), i = n(145), a = n(369);
      t.exports = function(t2) {
        return o(t2) || r(t2) || i(t2) || a();
      };
    }, function(t, e) {
      t.exports = function(t2, e2) {
        return { enumerable: !(1 & t2), configurable: !(2 & t2), writable: !(4 & t2), value: e2 };
      };
    }, function(t, e) {
      var n = 0, o = Math.random();
      t.exports = function(t2) {
        return "Symbol(".concat(t2 === void 0 ? "" : t2, ")_", (++n + o).toString(36));
      };
    }, function(t, e) {
      t.exports = false;
    }, function(t, e, n) {
      var o = n(115), r = n(88);
      t.exports = Object.keys || function(t2) {
        return o(t2, r);
      };
    }, function(t, e, n) {
      var o = n(33), r = Math.max, i = Math.min;
      t.exports = function(t2, e2) {
        return (t2 = o(t2)) < 0 ? r(t2 + e2, 0) : i(t2, e2);
      };
    }, function(t, e, n) {
      var o = n(12), r = n(116), i = n(88), a = n(87)("IE_PROTO"), s = function() {
      }, l = function() {
        var t2, e2 = n(85)("iframe"), o2 = i.length;
        for (e2.style.display = "none", n(89).appendChild(e2), e2.src = "javascript:", (t2 = e2.contentWindow.document).open(), t2.write("<script>document.F=Object<\/script>"), t2.close(), l = t2.F; o2--; )
          delete l.prototype[i[o2]];
        return l();
      };
      t.exports = Object.create || function(t2, e2) {
        var n2;
        return t2 !== null ? (s.prototype = o(t2), n2 = new s(), s.prototype = null, n2[a] = t2) : n2 = l(), e2 === void 0 ? n2 : r(n2, e2);
      };
    }, function(t, e, n) {
      var o = n(115), r = n(88).concat("length", "prototype");
      e.f = Object.getOwnPropertyNames || function(t2) {
        return o(t2, r);
      };
    }, function(t, e, n) {
      var o = n(26), r = n(20), i = n(87)("IE_PROTO"), a = Object.prototype;
      t.exports = Object.getPrototypeOf || function(t2) {
        return t2 = r(t2), o(t2, i) ? t2[i] : typeof t2.constructor == "function" && t2 instanceof t2.constructor ? t2.constructor.prototype : t2 instanceof Object ? a : null;
      };
    }, function(t, e, n) {
      var o = n(14)("unscopables"), r = Array.prototype;
      r[o] == null && n(27)(r, o, {}), t.exports = function(t2) {
        r[o][t2] = true;
      };
    }, function(t, e, n) {
      var o = n(13);
      t.exports = function(t2, e2) {
        if (!o(t2) || t2._t !== e2)
          throw TypeError("Incompatible receiver, " + e2 + " required!");
        return t2;
      };
    }, function(t, e, n) {
      var o = n(19).f, r = n(26), i = n(14)("toStringTag");
      t.exports = function(t2, e2, n2) {
        t2 && !r(t2 = n2 ? t2 : t2.prototype, i) && o(t2, i, { configurable: true, value: e2 });
      };
    }, function(t, e, n) {
      var o = n(0), r = n(38), i = n(11), a = n(91), s = "[" + a + "]", l = RegExp("^" + s + s + "*"), c = RegExp(s + s + "*$"), u = function(t2, e2, n2) {
        var r2 = {}, s2 = i(function() {
          return !!a[t2]() || "\u200B\x85"[t2]() != "\u200B\x85";
        }), l2 = r2[t2] = s2 ? e2(f) : a[t2];
        n2 && (r2[n2] = l2), o(o.P + o.F * s2, "String", r2);
      }, f = u.trim = function(t2, e2) {
        return t2 = String(r(t2)), 1 & e2 && (t2 = t2.replace(l, "")), 2 & e2 && (t2 = t2.replace(c, "")), t2;
      };
      t.exports = u;
    }, function(t, e) {
      t.exports = {};
    }, function(t, e, n) {
      var o = n(10), r = n(19), i = n(18), a = n(14)("species");
      t.exports = function(t2) {
        var e2 = o[t2];
        i && e2 && !e2[a] && r.f(e2, a, { configurable: true, get: function() {
          return this;
        } });
      };
    }, function(t, e) {
      t.exports = function(t2, e2, n, o) {
        if (!(t2 instanceof e2) || o !== void 0 && o in t2)
          throw TypeError(n + ": incorrect invocation!");
        return t2;
      };
    }, function(t, e, n) {
      var o = n(21);
      t.exports = function(t2, e2, n2) {
        for (var r in e2)
          o(t2, r, e2[r], n2);
        return t2;
      };
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(147)], (i = typeof (o = function(o2, r2, i2, a) {
        var s = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = s(r2), i2 = s(i2), a = s(a);
        var l = function() {
          function t2() {
            (0, r2.default)(this, t2);
          }
          return (0, i2.default)(t2, null, [{ key: "ui", value: function(e2, n2) {
            return t2._t(e2, n2);
          } }, { key: "t", value: function(e2, n2) {
            return t2._t(e2, n2);
          } }, { key: "setDictionary", value: function(e2) {
            t2.currentDictionary = e2;
          } }, { key: "_t", value: function(e2, n2) {
            var o3 = t2.getNamespace(e2);
            return o3 && o3[n2] ? o3[n2] : n2;
          } }, { key: "getNamespace", value: function(e2) {
            return e2.split(".").reduce(function(t3, e3) {
              return t3 && Object.keys(t3).length ? t3[e3] : {};
            }, t2.currentDictionary);
          } }]), t2;
        }();
        o2.default = l, l.displayName = "I18n", l.currentDictionary = a.default, t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(380), n(7)], (i = typeof (o = function(o2, r2, i2, a, s) {
        var l = n(8), c = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = c(r2), i2 = c(i2), a = c(a), s = l(s);
        var u = function() {
          function t2(e2) {
            var n2 = this;
            (0, r2.default)(this, t2), this.iterator = null, this.activated = false, this.allowArrows = true, this.onKeyDown = function(e3) {
              if (n2.isEventReadyForHandling(e3))
                switch (t2.usedKeys.includes(e3.keyCode) && e3.preventDefault(), e3.keyCode) {
                  case s.keyCodes.TAB:
                    n2.handleTabPress(e3);
                    break;
                  case s.keyCodes.LEFT:
                  case s.keyCodes.UP:
                    n2.flipLeft();
                    break;
                  case s.keyCodes.RIGHT:
                  case s.keyCodes.DOWN:
                    n2.flipRight();
                    break;
                  case s.keyCodes.ENTER:
                    n2.handleEnterPress(e3);
                }
            }, this.allowArrows = !s.isBoolean(e2.allowArrows) || e2.allowArrows, this.iterator = new a.default(e2.items, e2.focusedItemClass), this.activateCallback = e2.activateCallback;
          }
          return (0, i2.default)(t2, [{ key: "activate", value: function(t3) {
            this.activated = true, t3 && this.iterator.setItems(t3), document.addEventListener("keydown", this.onKeyDown);
          } }, { key: "deactivate", value: function() {
            this.activated = false, this.dropCursor(), document.removeEventListener("keydown", this.onKeyDown);
          } }, { key: "focusFirst", value: function() {
            this.dropCursor(), this.flipRight();
          } }, { key: "flipLeft", value: function() {
            this.iterator.previous();
          } }, { key: "flipRight", value: function() {
            this.iterator.next();
          } }, { key: "dropCursor", value: function() {
            this.iterator.dropCursor();
          } }, { key: "isEventReadyForHandling", value: function(t3) {
            var e2 = [s.keyCodes.TAB, s.keyCodes.ENTER], n2 = this.iterator.currentItem == document.activeElement;
            return this.allowArrows && !n2 && e2.push(s.keyCodes.LEFT, s.keyCodes.RIGHT, s.keyCodes.UP, s.keyCodes.DOWN), this.activated && e2.indexOf(t3.keyCode) !== -1;
          } }, { key: "handleTabPress", value: function(t3) {
            switch (t3.shiftKey ? a.default.directions.LEFT : a.default.directions.RIGHT) {
              case a.default.directions.RIGHT:
                this.flipRight();
                break;
              case a.default.directions.LEFT:
                this.flipLeft();
            }
          } }, { key: "handleEnterPress", value: function(t3) {
            this.activated && (this.iterator.currentItem && this.iterator.currentItem.click(), s.isFunction(this.activateCallback) && this.activateCallback(this.iterator.currentItem), t3.preventDefault(), t3.stopPropagation());
          } }, { key: "currentItem", get: function() {
            return this.iterator.currentItem;
          } }], [{ key: "usedKeys", get: function() {
            return [s.keyCodes.TAB, s.keyCodes.LEFT, s.keyCodes.RIGHT, s.keyCodes.ENTER, s.keyCodes.UP, s.keyCodes.DOWN];
          } }]), t2;
        }();
        o2.default = u, u.displayName = "Flipper", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o = n(37);
      t.exports = Object("z").propertyIsEnumerable(0) ? Object : function(t2) {
        return o(t2) == "String" ? t2.split("") : Object(t2);
      };
    }, function(t, e) {
      e.f = {}.propertyIsEnumerable;
    }, function(t, e, n) {
      var o = n(37), r = n(14)("toStringTag"), i = o(function() {
        return arguments;
      }()) == "Arguments";
      t.exports = function(t2) {
        var e2, n2, a;
        return t2 === void 0 ? "Undefined" : t2 === null ? "Null" : typeof (n2 = function(t3, e3) {
          try {
            return t3[e3];
          } catch (t4) {
          }
        }(e2 = Object(t2), r)) == "string" ? n2 : i ? o(e2) : (a = o(e2)) == "Object" && typeof e2.callee == "function" ? "Arguments" : a;
      };
    }, function(t, e, n) {
      var o = n(12), r = n(32), i = n(14)("species");
      t.exports = function(t2, e2) {
        var n2, a = o(t2).constructor;
        return a === void 0 || (n2 = o(a)[i]) == null ? e2 : r(n2);
      };
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(7), n(378)], (i = typeof (o = function(t2, e2, o2) {
        var r2 = n(1), i2 = n(8);
        function a(t3) {
          var e3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, n2 = { tags: e3 }, r3 = new o2.default(n2);
          return r3.clean(t3);
        }
        function s(t3, n2) {
          return Array.isArray(t3) ? (i3 = n2, t3.map(function(t4) {
            return s(t4, i3);
          })) : e2.isObject(t3) ? function(t4, n3) {
            var o4, r4 = {};
            for (var i4 in t4)
              if (Object.prototype.hasOwnProperty.call(t4, i4)) {
                var a2 = t4[i4], l = (o4 = n3[i4], e2.isObject(o4) || e2.isBoolean(o4) || e2.isFunction(o4) ? n3[i4] : n3);
                r4[i4] = s(a2, l);
              }
            return r4;
          }(t3, n2) : e2.isString(t3) ? (o3 = t3, r3 = n2, e2.isObject(r3) ? a(o3, r3) : r3 === false ? a(o3, {}) : o3) : t3;
          var o3, r3, i3;
        }
        Object.defineProperty(t2, "__esModule", { value: true }), t2.sanitizeBlocks = function(t3, n2) {
          return t3.map(function(t4) {
            var o3 = e2.isFunction(n2) ? n2(t4.tool) : n2;
            return e2.isEmpty(o3) || (t4.data = s(t4.data, o3)), t4;
          });
        }, t2.clean = a, e2 = i2(e2), o2 = r2(o2);
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(30), n(23), n(24), n(42), n(2), n(3), n(149), n(168), n(5), n(6), n(4), n(15), n(7), n(111), n(25), n(151)], (i = typeof (o = function(t2, e2, o2, r2, i2, a, s, l, c, u, f, d, p, h, v, g, y) {
        var b, m = n(8), k = n(1);
        function x() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t3) {
            return false;
          }
        }
        Object.defineProperty(t2, "__esModule", { value: true }), t2.default = t2.BlockToolAPI = void 0, e2 = k(e2), o2 = k(o2), r2 = k(r2), i2 = k(i2), a = k(a), s = k(s), l = k(l), c = k(c), u = k(u), f = k(f), d = k(d), p = k(p), h = m(h), v = k(v), g = k(g), y = k(y), t2.BlockToolAPI = b, function(t3) {
          t3.APPEND_CALLBACK = "appendCallback", t3.RENDERED = "rendered", t3.MOVED = "moved", t3.UPDATED = "updated", t3.REMOVED = "removed", t3.ON_PASTE = "onPaste";
        }(b || (t2.BlockToolAPI = b = {}));
        var w = function(t3) {
          (0, u.default)(S, t3);
          var n2, y2, m2, k2, w2 = (n2 = S, function() {
            var t4, e3 = (0, d.default)(n2);
            if (x()) {
              var o3 = (0, d.default)(this).constructor;
              t4 = Reflect.construct(e3, arguments, o3);
            } else
              t4 = e3.apply(this, arguments);
            return (0, f.default)(this, t4);
          });
          function S(t4) {
            var e3, n3 = t4.id, o3 = n3 === void 0 ? h.generateBlockId() : n3, r3 = t4.data, s2 = t4.tool, c2 = t4.api, u2 = t4.readOnly, f2 = t4.tunesData;
            return (0, a.default)(this, S), (e3 = w2.call(this)).cachedInputs = [], e3.tunesInstances = new Map(), e3.defaultTunesInstances = new Map(), e3.unavailableTunesData = {}, e3.inputIndex = 0, e3.modificationDebounceTimer = 450, e3.didMutated = h.debounce(function(t5) {
              !t5.some(function(t6) {
                var e4 = t6.addedNodes, n4 = e4 === void 0 ? [] : e4, o4 = t6.removedNodes;
                return [].concat((0, i2.default)(Array.from(n4)), (0, i2.default)(Array.from(o4))).some(function(t7) {
                  return p.default.isElement(t7) && t7.dataset.mutationFree === "true";
                });
              }) && (e3.cachedInputs = [], e3.updateCurrentInput(), e3.call(b.UPDATED), e3.emit("didMutated", (0, l.default)(e3)));
            }, e3.modificationDebounceTimer), e3.handleFocus = function() {
              e3.cachedInputs = [], e3.updateCurrentInput();
            }, e3.name = s2.name, e3.id = o3, e3.settings = s2.settings, e3.config = s2.settings.config || {}, e3.api = c2, e3.blockAPI = new v.default((0, l.default)(e3)), e3.mutationObserver = new MutationObserver(e3.didMutated), e3.tool = s2, e3.toolInstance = s2.create(r3, e3.blockAPI, u2), e3.tunes = s2.tunes, e3.composeTunes(f2), e3.holder = e3.compose(), e3;
          }
          return (0, s.default)(S, [{ key: "call", value: function(t4, e3) {
            if (h.isFunction(this.toolInstance[t4])) {
              t4 === b.APPEND_CALLBACK && h.log("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead", "warn");
              try {
                this.toolInstance[t4].call(this.toolInstance, e3);
              } catch (e4) {
                h.log("Error during '".concat(t4, "' call: ").concat(e4.message), "error");
              }
            }
          } }, { key: "mergeWith", value: (k2 = (0, r2.default)(o2.default.mark(function t4(e3) {
            return o2.default.wrap(function(t5) {
              for (; ; )
                switch (t5.prev = t5.next) {
                  case 0:
                    return t5.next = 2, this.toolInstance.merge(e3);
                  case 2:
                  case "end":
                    return t5.stop();
                }
            }, t4, this);
          })), function(t4) {
            return k2.apply(this, arguments);
          }) }, { key: "save", value: (m2 = (0, r2.default)(o2.default.mark(function t4() {
            var n3, r3, a2, s2, l2 = this;
            return o2.default.wrap(function(t5) {
              for (; ; )
                switch (t5.prev = t5.next) {
                  case 0:
                    return t5.next = 2, this.toolInstance.save(this.pluginsContent);
                  case 2:
                    return n3 = t5.sent, r3 = this.unavailableTunesData, [].concat((0, i2.default)(this.tunesInstances.entries()), (0, i2.default)(this.defaultTunesInstances.entries())).forEach(function(t6) {
                      var n4 = (0, e2.default)(t6, 2), o3 = n4[0], i3 = n4[1];
                      if (h.isFunction(i3.save))
                        try {
                          r3[o3] = i3.save();
                        } catch (t7) {
                          h.log("Tune ".concat(i3.constructor.name, " save method throws an Error %o"), "warn", t7);
                        }
                    }), a2 = window.performance.now(), t5.abrupt("return", Promise.resolve(n3).then(function(t6) {
                      return s2 = window.performance.now(), { id: l2.id, tool: l2.name, data: t6, tunes: r3, time: s2 - a2 };
                    }).catch(function(t6) {
                      h.log("Saving proccess for ".concat(l2.name, " tool failed due to the ").concat(t6), "log", "red");
                    }));
                  case 7:
                  case "end":
                    return t5.stop();
                }
            }, t4, this);
          })), function() {
            return m2.apply(this, arguments);
          }) }, { key: "validate", value: (y2 = (0, r2.default)(o2.default.mark(function t4(e3) {
            var n3;
            return o2.default.wrap(function(t5) {
              for (; ; )
                switch (t5.prev = t5.next) {
                  case 0:
                    if (n3 = true, !(this.toolInstance.validate instanceof Function)) {
                      t5.next = 5;
                      break;
                    }
                    return t5.next = 4, this.toolInstance.validate(e3);
                  case 4:
                    n3 = t5.sent;
                  case 5:
                    return t5.abrupt("return", n3);
                  case 6:
                  case "end":
                    return t5.stop();
                }
            }, t4, this);
          })), function(t4) {
            return y2.apply(this, arguments);
          }) }, { key: "renderTunes", value: function() {
            var t4 = document.createDocumentFragment(), e3 = document.createDocumentFragment();
            return this.tunesInstances.forEach(function(e4) {
              p.default.append(t4, e4.render());
            }), this.defaultTunesInstances.forEach(function(t5) {
              p.default.append(e3, t5.render());
            }), [t4, e3];
          } }, { key: "updateCurrentInput", value: function() {
            this.currentInput = p.default.isNativeInput(document.activeElement) || !g.default.anchorNode ? document.activeElement : g.default.anchorNode;
          } }, { key: "willSelect", value: function() {
            this.mutationObserver.observe(this.holder.firstElementChild, { childList: true, subtree: true, characterData: true, attributes: true }), this.addInputEvents();
          } }, { key: "willUnselect", value: function() {
            this.mutationObserver.disconnect(), this.removeInputEvents();
          } }, { key: "destroy", value: function() {
            (0, c.default)((0, d.default)(S.prototype), "destroy", this).call(this), h.isFunction(this.toolInstance.destroy) && this.toolInstance.destroy();
          } }, { key: "renderSettings", value: function() {
            if (h.isFunction(this.toolInstance.renderSettings))
              return this.toolInstance.renderSettings();
          } }, { key: "compose", value: function() {
            var t4 = p.default.make("div", S.CSS.wrapper), e3 = p.default.make("div", S.CSS.content), n3 = this.toolInstance.render();
            e3.appendChild(n3);
            var o3 = e3;
            return [].concat((0, i2.default)(this.tunesInstances.values()), (0, i2.default)(this.defaultTunesInstances.values())).forEach(function(t5) {
              if (h.isFunction(t5.wrap))
                try {
                  o3 = t5.wrap(o3);
                } catch (e4) {
                  h.log("Tune ".concat(t5.constructor.name, " wrap method throws an Error %o"), "warn", e4);
                }
            }), t4.appendChild(o3), t4;
          } }, { key: "composeTunes", value: function(t4) {
            var n3 = this;
            Array.from(this.tunes.values()).forEach(function(e3) {
              (e3.isInternal ? n3.defaultTunesInstances : n3.tunesInstances).set(e3.name, e3.create(t4[e3.name], n3.blockAPI));
            }), Object.entries(t4).forEach(function(t5) {
              var o3 = (0, e2.default)(t5, 2), r3 = o3[0], i3 = o3[1];
              n3.tunesInstances.has(r3) || (n3.unavailableTunesData[r3] = i3);
            });
          } }, { key: "addInputEvents", value: function() {
            var t4 = this;
            this.inputs.forEach(function(e3) {
              e3.addEventListener("focus", t4.handleFocus), p.default.isNativeInput(e3) && e3.addEventListener("input", t4.didMutated);
            });
          } }, { key: "removeInputEvents", value: function() {
            var t4 = this;
            this.inputs.forEach(function(e3) {
              e3.removeEventListener("focus", t4.handleFocus), p.default.isNativeInput(e3) && e3.removeEventListener("input", t4.didMutated);
            });
          } }, { key: "inputs", get: function() {
            if (this.cachedInputs.length !== 0)
              return this.cachedInputs;
            var t4 = p.default.findAllInputs(this.holder);
            return this.inputIndex > t4.length - 1 && (this.inputIndex = t4.length - 1), this.cachedInputs = t4, t4;
          } }, { key: "currentInput", get: function() {
            return this.inputs[this.inputIndex];
          }, set: function(t4) {
            var e3 = this.inputs.findIndex(function(e4) {
              return e4 === t4 || e4.contains(t4);
            });
            e3 !== -1 && (this.inputIndex = e3);
          } }, { key: "firstInput", get: function() {
            return this.inputs[0];
          } }, { key: "lastInput", get: function() {
            var t4 = this.inputs;
            return t4[t4.length - 1];
          } }, { key: "nextInput", get: function() {
            return this.inputs[this.inputIndex + 1];
          } }, { key: "previousInput", get: function() {
            return this.inputs[this.inputIndex - 1];
          } }, { key: "data", get: function() {
            return this.save().then(function(t4) {
              return t4 && !h.isEmpty(t4.data) ? t4.data : {};
            });
          } }, { key: "sanitize", get: function() {
            return this.tool.sanitizeConfig;
          } }, { key: "mergeable", get: function() {
            return h.isFunction(this.toolInstance.merge);
          } }, { key: "isEmpty", get: function() {
            var t4 = p.default.isEmpty(this.pluginsContent), e3 = !this.hasMedia;
            return t4 && e3;
          } }, { key: "hasMedia", get: function() {
            return !!this.holder.querySelector(["img", "iframe", "video", "audio", "source", "input", "textarea", "twitterwidget"].join(","));
          } }, { key: "focused", set: function(t4) {
            this.holder.classList.toggle(S.CSS.focused, t4);
          }, get: function() {
            return this.holder.classList.contains(S.CSS.focused);
          } }, { key: "selected", set: function(t4) {
            t4 ? (this.holder.classList.add(S.CSS.selected), g.default.addFakeCursor(this.holder)) : (this.holder.classList.remove(S.CSS.selected), g.default.removeFakeCursor(this.holder));
          }, get: function() {
            return this.holder.classList.contains(S.CSS.selected);
          } }, { key: "stretched", set: function(t4) {
            this.holder.classList.toggle(S.CSS.wrapperStretched, t4);
          }, get: function() {
            return this.holder.classList.contains(S.CSS.wrapperStretched);
          } }, { key: "dropTarget", set: function(t4) {
            this.holder.classList.toggle(S.CSS.dropTarget, t4);
          } }, { key: "pluginsContent", get: function() {
            var t4 = this.holder.querySelector(".".concat(S.CSS.content));
            if (t4 && t4.childNodes.length)
              for (var e3 = t4.childNodes.length - 1; e3 >= 0; e3--) {
                var n3 = t4.childNodes[e3];
                if (!p.default.isExtensionNode(n3))
                  return n3;
              }
            return null;
          } }], [{ key: "CSS", get: function() {
            return { wrapper: "ce-block", wrapperStretched: "ce-block--stretched", content: "ce-block__content", focused: "ce-block--focused", selected: "ce-block--selected", dropTarget: "ce-block--drop-target" };
          } }]), S;
        }(y.default);
        t2.default = w, w.displayName = "Block";
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(7)], (i = typeof (o = function(t2, e2, o2, r2) {
        var i2, a, s, l, c, u, f = n(8), d = n(1);
        Object.defineProperty(t2, "__esModule", { value: true }), t2.default = t2.InternalTuneSettings = t2.InternalInlineToolSettings = t2.InternalBlockToolSettings = t2.CommonInternalSettings = t2.UserSettings = t2.ToolType = void 0, e2 = d(e2), o2 = d(o2), r2 = f(r2), t2.ToolType = i2, function(t3) {
          t3[t3.Block = 0] = "Block", t3[t3.Inline = 1] = "Inline", t3[t3.Tune = 2] = "Tune";
        }(i2 || (t2.ToolType = i2 = {})), t2.UserSettings = a, function(t3) {
          t3.Shortcut = "shortcut", t3.Toolbox = "toolbox", t3.EnabledInlineTools = "inlineToolbar", t3.EnabledBlockTunes = "tunes", t3.Config = "config";
        }(a || (t2.UserSettings = a = {})), t2.CommonInternalSettings = s, function(t3) {
          t3.Shortcut = "shortcut", t3.SanitizeConfig = "sanitize";
        }(s || (t2.CommonInternalSettings = s = {})), t2.InternalBlockToolSettings = l, function(t3) {
          t3.IsEnabledLineBreaks = "enableLineBreaks", t3.Toolbox = "toolbox", t3.ConversionConfig = "conversionConfig", t3.IsReadOnlySupported = "isReadOnlySupported", t3.PasteConfig = "pasteConfig";
        }(l || (t2.InternalBlockToolSettings = l = {})), t2.InternalInlineToolSettings = c, function(t3) {
          t3.IsInline = "isInline", t3.Title = "title";
        }(c || (t2.InternalInlineToolSettings = c = {})), t2.InternalTuneSettings = u, function(t3) {
          t3.IsTune = "isTune";
        }(u || (t2.InternalTuneSettings = u = {}));
        var p = function() {
          function t3(n2) {
            var o3 = n2.name, r3 = n2.constructable, i3 = n2.config, a2 = n2.api, s2 = n2.isDefault, l2 = n2.isInternal, c2 = l2 !== void 0 && l2, u2 = n2.defaultPlaceholder;
            (0, e2.default)(this, t3), this.api = a2, this.name = o3, this.constructable = r3, this.config = i3, this.isDefault = s2, this.isInternal = c2, this.defaultPlaceholder = u2;
          }
          return (0, o2.default)(t3, [{ key: "reset", value: function() {
            if (r2.isFunction(this.constructable.reset))
              return this.constructable.reset();
          } }, { key: "prepare", value: function() {
            if (r2.isFunction(this.constructable.prepare))
              return this.constructable.prepare({ toolName: this.name, config: this.settings });
          } }, { key: "isInline", value: function() {
            return this.type === i2.Inline;
          } }, { key: "isBlock", value: function() {
            return this.type === i2.Block;
          } }, { key: "isTune", value: function() {
            return this.type === i2.Tune;
          } }, { key: "settings", get: function() {
            var t4 = this.config[a.Config] || {};
            return this.isDefault && !("placeholder" in t4) && this.defaultPlaceholder && (t4.placeholder = this.defaultPlaceholder), t4;
          } }, { key: "shortcut", get: function() {
            var t4 = this.constructable[s.Shortcut];
            return this.config[a.Shortcut] || t4;
          } }, { key: "sanitizeConfig", get: function() {
            return this.constructable[s.SanitizeConfig] || {};
          } }]), t3;
        }();
        t2.default = p, p.displayName = "BaseTool";
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o = n(17), r = n(10), i = r["__core-js_shared__"] || (r["__core-js_shared__"] = {});
      (t.exports = function(t2, e2) {
        return i[t2] || (i[t2] = e2 !== void 0 ? e2 : {});
      })("versions", []).push({ version: o.version, mode: n(45) ? "pure" : "global", copyright: "\xA9 2019 Denis Pushkarev (zloirock.ru)" });
    }, function(t, e, n) {
      var o = n(28), r = n(16), i = n(47);
      t.exports = function(t2) {
        return function(e2, n2, a) {
          var s, l = o(e2), c = r(l.length), u = i(a, c);
          if (t2 && n2 != n2) {
            for (; c > u; )
              if ((s = l[u++]) != s)
                return true;
          } else
            for (; c > u; u++)
              if ((t2 || u in l) && l[u] === n2)
                return t2 || u || 0;
          return !t2 && -1;
        };
      };
    }, function(t, e) {
      e.f = Object.getOwnPropertySymbols;
    }, function(t, e, n) {
      var o = n(37);
      t.exports = Array.isArray || function(t2) {
        return o(t2) == "Array";
      };
    }, function(t, e, n) {
      var o = n(14)("iterator"), r = false;
      try {
        var i = [7][o]();
        i.return = function() {
          r = true;
        }, Array.from(i, function() {
          throw 2;
        });
      } catch (t2) {
      }
      t.exports = function(t2, e2) {
        if (!e2 && !r)
          return false;
        var n2 = false;
        try {
          var i2 = [7], a = i2[o]();
          a.next = function() {
            return { done: n2 = true };
          }, i2[o] = function() {
            return a;
          }, t2(i2);
        } catch (t3) {
        }
        return n2;
      };
    }, function(t, e, n) {
      var o = n(12);
      t.exports = function() {
        var t2 = o(this), e2 = "";
        return t2.global && (e2 += "g"), t2.ignoreCase && (e2 += "i"), t2.multiline && (e2 += "m"), t2.unicode && (e2 += "u"), t2.sticky && (e2 += "y"), e2;
      };
    }, function(t, e, n) {
      var o = n(63), r = RegExp.prototype.exec;
      t.exports = function(t2, e2) {
        var n2 = t2.exec;
        if (typeof n2 == "function") {
          var i = n2.call(t2, e2);
          if (typeof i != "object")
            throw new TypeError("RegExp exec method returned something other than an Object or null");
          return i;
        }
        if (o(t2) !== "RegExp")
          throw new TypeError("RegExp#exec called on incompatible receiver");
        return r.call(t2, e2);
      };
    }, function(t, e, n) {
      n(133);
      var o = n(21), r = n(27), i = n(11), a = n(38), s = n(14), l = n(106), c = s("species"), u = !i(function() {
        var t2 = /./;
        return t2.exec = function() {
          var t3 = [];
          return t3.groups = { a: "7" }, t3;
        }, "".replace(t2, "$<a>") !== "7";
      }), f = function() {
        var t2 = /(?:)/, e2 = t2.exec;
        t2.exec = function() {
          return e2.apply(this, arguments);
        };
        var n2 = "ab".split(t2);
        return n2.length === 2 && n2[0] === "a" && n2[1] === "b";
      }();
      t.exports = function(t2, e2, n2) {
        var d = s(t2), p = !i(function() {
          var e3 = {};
          return e3[d] = function() {
            return 7;
          }, ""[t2](e3) != 7;
        }), h = p ? !i(function() {
          var e3 = false, n3 = /a/;
          return n3.exec = function() {
            return e3 = true, null;
          }, t2 === "split" && (n3.constructor = {}, n3.constructor[c] = function() {
            return n3;
          }), n3[d](""), !e3;
        }) : void 0;
        if (!p || !h || t2 === "replace" && !u || t2 === "split" && !f) {
          var v = /./[d], g = n2(a, d, ""[t2], function(t3, e3, n3, o2, r2) {
            return e3.exec === l ? p && !r2 ? { done: true, value: v.call(e3, n3, o2) } : { done: true, value: t3.call(n3, e3, o2) } : { done: false };
          }), y = g[0], b = g[1];
          o(String.prototype, t2, y), r(RegExp.prototype, d, e2 == 2 ? function(t3, e3) {
            return b.call(t3, this, e3);
          } : function(t3) {
            return b.call(t3, this);
          });
        }
      };
    }, function(t, e, n) {
      var o = n(31), r = n(128), i = n(101), a = n(12), s = n(16), l = n(103), c = {}, u = {};
      (e = t.exports = function(t2, e2, n2, f, d) {
        var p, h, v, g, y = d ? function() {
          return t2;
        } : l(t2), b = o(n2, f, e2 ? 2 : 1), m = 0;
        if (typeof y != "function")
          throw TypeError(t2 + " is not iterable!");
        if (i(y)) {
          for (p = s(t2.length); p > m; m++)
            if ((g = e2 ? b(a(h = t2[m])[0], h[1]) : b(t2[m])) === c || g === u)
              return g;
        } else
          for (v = y.call(t2); !(h = v.next()).done; )
            if ((g = r(v, b, h.value, e2)) === c || g === u)
              return g;
      }).BREAK = c, e.RETURN = u;
    }, function(t, e, n) {
      var o = n(10).navigator;
      t.exports = o && o.userAgent || "";
    }, function(t, e, n) {
      var o = n(10), r = n(0), i = n(21), a = n(58), s = n(41), l = n(76), c = n(57), u = n(13), f = n(11), d = n(72), p = n(53), h = n(92);
      t.exports = function(t2, e2, n2, v, g, y) {
        var b = o[t2], m = b, k = g ? "set" : "add", x = m && m.prototype, w = {}, S = function(t3) {
          var e3 = x[t3];
          i(x, t3, t3 == "delete" || t3 == "has" ? function(t4) {
            return !(y && !u(t4)) && e3.call(this, t4 === 0 ? 0 : t4);
          } : t3 == "get" ? function(t4) {
            return y && !u(t4) ? void 0 : e3.call(this, t4 === 0 ? 0 : t4);
          } : t3 == "add" ? function(t4) {
            return e3.call(this, t4 === 0 ? 0 : t4), this;
          } : function(t4, n3) {
            return e3.call(this, t4 === 0 ? 0 : t4, n3), this;
          });
        };
        if (typeof m == "function" && (y || x.forEach && !f(function() {
          new m().entries().next();
        }))) {
          var T = new m(), E = T[k](y ? {} : -0, 1) != T, B = f(function() {
            T.has(1);
          }), C = d(function(t3) {
            new m(t3);
          }), _ = !y && f(function() {
            for (var t3 = new m(), e3 = 5; e3--; )
              t3[k](e3, e3);
            return !t3.has(-0);
          });
          C || ((m = e2(function(e3, n3) {
            c(e3, m, t2);
            var o2 = h(new b(), e3, m);
            return n3 != null && l(n3, g, o2[k], o2), o2;
          })).prototype = x, x.constructor = m), (B || _) && (S("delete"), S("has"), g && S("get")), (_ || E) && S(k), y && x.clear && delete x.clear;
        } else
          m = v.getConstructor(e2, t2, g, k), a(m.prototype, n2), s.NEED = true;
        return p(m, t2), w[t2] = m, r(r.G + r.W + r.F * (m != b), w), y || v.setStrong(m, t2, g), m;
      };
    }, function(t, e, n) {
      for (var o, r = n(10), i = n(27), a = n(44), s = a("typed_array"), l = a("view"), c = !(!r.ArrayBuffer || !r.DataView), u = c, f = 0, d = "Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(","); f < 9; )
        (o = r[d[f++]]) ? (i(o.prototype, s, true), i(o.prototype, l, true)) : u = false;
      t.exports = { ABV: c, CONSTR: u, TYPED: s, VIEW: l };
    }, function(t, e) {
      function n(e2) {
        return typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? t.exports = n = function(t2) {
          return typeof t2;
        } : t.exports = n = function(t2) {
          return t2 && typeof Symbol == "function" && t2.constructor === Symbol && t2 !== Symbol.prototype ? "symbol" : typeof t2;
        }, n(e2);
      }
      t.exports = n;
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9)], (i = typeof (o = function(o2, r2, i2, a, s, l, c) {
        var u = n(1);
        function f() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = u(r2), i2 = u(i2), a = u(a), s = u(s), l = u(l);
        var d = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (f()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            return (0, r2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, i2.default)(o3, [{ key: "getMethodsForTool", value: function(t3) {
            return Object.assign(this.methods, { i18n: this.Editor.I18nAPI.getMethodsForTool(t3) });
          } }, { key: "methods", get: function() {
            return { blocks: this.Editor.BlocksAPI.methods, caret: this.Editor.CaretAPI.methods, events: this.Editor.EventsAPI.methods, listeners: this.Editor.ListenersAPI.methods, notifier: this.Editor.NotifierAPI.methods, sanitizer: this.Editor.SanitizerAPI.methods, saver: this.Editor.SaverAPI.methods, selection: this.Editor.SelectionAPI.methods, styles: this.Editor.StylesAPI.classes, toolbar: this.Editor.ToolbarAPI.methods, inlineToolbar: this.Editor.InlineToolbarAPI.methods, tooltip: this.Editor.TooltipAPI.methods, i18n: this.Editor.I18nAPI.methods, readOnly: this.Editor.ReadOnlyAPI.methods };
          } }]), o3;
        }((c = u(c)).default);
        o2.default = d, d.displayName = "API", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(379)], (i = typeof (o = function(o2, r2, i2, a) {
        var s = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = s(r2), i2 = s(i2), a = s(a);
        var l = function() {
          function t2() {
            (0, r2.default)(this, t2), this.lib = new a.default();
          }
          return (0, i2.default)(t2, [{ key: "destroy", value: function() {
            this.lib.destroy();
          } }, { key: "show", value: function(t3, e2, n2) {
            this.lib.show(t3, e2, n2);
          } }, { key: "hide", value: function() {
            this.lib.hide();
          } }, { key: "onHover", value: function(t3, e2, n2) {
            this.lib.onHover(t3, e2, n2);
          } }]), t2;
        }();
        o2.default = l, l.displayName = "Tooltip", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9), n(15), n(7), n(59), n(84), n(82)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p, h) {
        var v = n(8), g = n(1);
        function y() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = g(r2), i2 = g(i2), a = g(a), s = g(s), l = g(l), c = g(c), u = g(u), f = v(f), d = g(d), h = g(h);
        var b = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (y()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3(t3) {
            var e3, i3 = t3.config, a2 = t3.eventsDispatcher;
            return (0, r2.default)(this, o3), (e3 = n2.call(this, { config: i3, eventsDispatcher: a2 })).tooltip = new h.default(), e3;
          }
          return (0, i2.default)(o3, [{ key: "toggleReadOnly", value: function(t3) {
            t3 ? (this.destroy(), this.Editor.Toolbox.destroy(), this.Editor.BlockSettings.destroy(), this.disableModuleBindings()) : (this.drawUI(), this.enableModuleBindings());
          } }, { key: "move", value: function() {
            var t3 = !(arguments.length > 0 && arguments[0] !== void 0) || arguments[0];
            t3 && (this.Editor.Toolbox.close(), this.Editor.BlockSettings.close());
            var e3 = this.Editor.BlockManager.currentBlock.holder;
            if (e3) {
              var n3 = this.Editor.UI.isMobile, o4 = e3.offsetHeight, r3 = e3.offsetTop;
              if (n3)
                r3 += o4;
              else {
                var i3 = Math.floor(o4 / 2);
                this.nodes.plusButton.style.transform = "translate3d(0, calc(".concat(i3, "px - 50%), 0)"), this.Editor.Toolbox.nodes.toolbox.style.transform = "translate3d(0, calc(".concat(i3, "px - 50%), 0)");
              }
              this.nodes.wrapper.style.transform = "translate3D(0, ".concat(Math.floor(r3), "px, 0)");
            }
          } }, { key: "open", value: function() {
            var t3 = this, e3 = !(arguments.length > 0 && arguments[0] !== void 0) || arguments[0], n3 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
            f.delay(function() {
              t3.move(n3), t3.nodes.wrapper.classList.add(t3.CSS.toolbarOpened), e3 ? t3.blockActions.show() : t3.blockActions.hide();
            }, 50)();
          } }, { key: "close", value: function() {
            this.nodes.wrapper.classList.remove(this.CSS.toolbarOpened), this.blockActions.hide(), this.Editor.Toolbox.close(), this.Editor.BlockSettings.close();
          } }, { key: "make", value: function() {
            var t3 = this;
            this.nodes.wrapper = u.default.make("div", this.CSS.toolbar), ["content", "actions"].forEach(function(e4) {
              t3.nodes[e4] = u.default.make("div", t3.CSS[e4]);
            }), u.default.append(this.nodes.wrapper, this.nodes.content), u.default.append(this.nodes.content, this.nodes.actions), this.nodes.plusButton = u.default.make("div", this.CSS.plusButton), u.default.append(this.nodes.plusButton, u.default.svg("plus", 14, 14)), u.default.append(this.nodes.content, this.nodes.plusButton), this.readOnlyMutableListeners.on(this.nodes.plusButton, "click", function() {
              t3.plusButtonClicked();
            }, false);
            var e3 = u.default.make("div");
            e3.appendChild(document.createTextNode(d.default.ui(p.I18nInternalNS.ui.toolbar.toolbox, "Add"))), e3.appendChild(u.default.make("div", this.CSS.plusButtonShortcut, { textContent: "\u21E5 Tab" })), this.tooltip.onHover(this.nodes.plusButton, e3), this.nodes.blockActionsButtons = u.default.make("div", this.CSS.blockActionsButtons), this.nodes.settingsToggler = u.default.make("span", this.CSS.settingsToggler);
            var n3 = u.default.svg("dots", 8, 8);
            u.default.append(this.nodes.settingsToggler, n3), u.default.append(this.nodes.blockActionsButtons, this.nodes.settingsToggler), u.default.append(this.nodes.actions, this.nodes.blockActionsButtons), this.tooltip.onHover(this.nodes.settingsToggler, d.default.ui(p.I18nInternalNS.ui.blockTunes.toggler, "Click to tune"), { placement: "top" }), u.default.append(this.nodes.content, this.Editor.Toolbox.nodes.toolbox), u.default.append(this.nodes.actions, this.Editor.BlockSettings.nodes.wrapper), u.default.append(this.Editor.UI.nodes.wrapper, this.nodes.wrapper);
          } }, { key: "plusButtonClicked", value: function() {
            this.Editor.Toolbox.toggle();
          } }, { key: "enableModuleBindings", value: function() {
            var t3 = this;
            this.readOnlyMutableListeners.on(this.nodes.settingsToggler, "mousedown", function(e3) {
              e3.stopPropagation(), t3.settingsTogglerClicked();
            }, true);
          } }, { key: "disableModuleBindings", value: function() {
            this.readOnlyMutableListeners.clearAll();
          } }, { key: "settingsTogglerClicked", value: function() {
            this.Editor.BlockSettings.opened ? this.Editor.BlockSettings.close() : this.Editor.BlockSettings.open();
          } }, { key: "drawUI", value: function() {
            this.Editor.BlockSettings.make(), this.Editor.Toolbox.make(), this.make();
          } }, { key: "destroy", value: function() {
            this.removeAllNodes(), this.tooltip.destroy();
          } }, { key: "CSS", get: function() {
            return { toolbar: "ce-toolbar", content: "ce-toolbar__content", actions: "ce-toolbar__actions", actionsOpened: "ce-toolbar__actions--opened", toolbarOpened: "ce-toolbar--opened", plusButton: "ce-toolbar__plus", plusButtonShortcut: "ce-toolbar__plus-shortcut", plusButtonHidden: "ce-toolbar__plus--hidden", blockActionsButtons: "ce-toolbar__actions-buttons", settingsToggler: "ce-toolbar__settings-btn" };
          } }, { key: "opened", get: function() {
            return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened);
          } }, { key: "plusButton", get: function() {
            var t3 = this;
            return { hide: function() {
              return t3.nodes.plusButton.classList.add(t3.CSS.plusButtonHidden);
            }, show: function() {
              t3.Editor.Toolbox.isEmpty || t3.nodes.plusButton.classList.remove(t3.CSS.plusButtonHidden);
            } };
          } }, { key: "blockActions", get: function() {
            var t3 = this;
            return { hide: function() {
              t3.nodes.actions.classList.remove(t3.CSS.actionsOpened);
            }, show: function() {
              t3.nodes.actions.classList.add(t3.CSS.actionsOpened);
            } };
          } }]), o3;
        }(c.default);
        o2.default = b, b.displayName = "Toolbar", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(30), n(147), n(7)], (i = typeof (o = function(t2, e2, o2, r2) {
        var i2 = n(1);
        Object.defineProperty(t2, "__esModule", { value: true }), t2.I18nInternalNS = void 0, e2 = i2(e2);
        var a = function t3(n2, o3) {
          var i3 = {};
          return Object.entries(n2).forEach(function(n3) {
            var a2 = (0, e2.default)(n3, 2), s = a2[0], l = a2[1];
            if ((0, r2.isObject)(l)) {
              var c = o3 ? "".concat(o3, ".").concat(s) : s, u = Object.values(l).every(function(t4) {
                return (0, r2.isString)(t4);
              });
              i3[s] = u ? c : t3(l, c);
            } else
              i3[s] = l;
          }), i3;
        }((o2 = i2(o2)).default);
        t2.I18nInternalNS = a;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o = n(13), r = n(10).document, i = o(r) && o(r.createElement);
      t.exports = function(t2) {
        return i ? r.createElement(t2) : {};
      };
    }, function(t, e, n) {
      e.f = n(14);
    }, function(t, e, n) {
      var o = n(68)("keys"), r = n(44);
      t.exports = function(t2) {
        return o[t2] || (o[t2] = r(t2));
      };
    }, function(t, e) {
      t.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
    }, function(t, e, n) {
      var o = n(10).document;
      t.exports = o && o.documentElement;
    }, function(t, e, n) {
      var o = n(13), r = n(12), i = function(t2, e2) {
        if (r(t2), !o(e2) && e2 !== null)
          throw TypeError(e2 + ": can't set as prototype!");
      };
      t.exports = { set: Object.setPrototypeOf || ("__proto__" in {} ? function(t2, e2, o2) {
        try {
          (o2 = n(31)(Function.call, n(34).f(Object.prototype, "__proto__").set, 2))(t2, []), e2 = !(t2 instanceof Array);
        } catch (t3) {
          e2 = true;
        }
        return function(t3, n2) {
          return i(t3, n2), e2 ? t3.__proto__ = n2 : o2(t3, n2), t3;
        };
      }({}, false) : void 0), check: i };
    }, function(t, e) {
      t.exports = "	\n\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF";
    }, function(t, e, n) {
      var o = n(13), r = n(90).set;
      t.exports = function(t2, e2, n2) {
        var i, a = e2.constructor;
        return a !== n2 && typeof a == "function" && (i = a.prototype) !== n2.prototype && o(i) && r && r(t2, i), t2;
      };
    }, function(t, e, n) {
      var o = n(33), r = n(38);
      t.exports = function(t2) {
        var e2 = String(r(this)), n2 = "", i = o(t2);
        if (i < 0 || i == 1 / 0)
          throw RangeError("Count can't be negative");
        for (; i > 0; (i >>>= 1) && (e2 += e2))
          1 & i && (n2 += e2);
        return n2;
      };
    }, function(t, e) {
      t.exports = Math.sign || function(t2) {
        return (t2 = +t2) == 0 || t2 != t2 ? t2 : t2 < 0 ? -1 : 1;
      };
    }, function(t, e) {
      var n = Math.expm1;
      t.exports = !n || n(10) > 22025.465794806718 || n(10) < 22025.465794806718 || n(-2e-17) != -2e-17 ? function(t2) {
        return (t2 = +t2) == 0 ? t2 : t2 > -1e-6 && t2 < 1e-6 ? t2 + t2 * t2 / 2 : Math.exp(t2) - 1;
      } : n;
    }, function(t, e, n) {
      var o = n(33), r = n(38);
      t.exports = function(t2) {
        return function(e2, n2) {
          var i, a, s = String(r(e2)), l = o(n2), c = s.length;
          return l < 0 || l >= c ? t2 ? "" : void 0 : (i = s.charCodeAt(l)) < 55296 || i > 56319 || l + 1 === c || (a = s.charCodeAt(l + 1)) < 56320 || a > 57343 ? t2 ? s.charAt(l) : i : t2 ? s.slice(l, l + 2) : a - 56320 + (i - 55296 << 10) + 65536;
        };
      };
    }, function(t, e, n) {
      var o = n(45), r = n(0), i = n(21), a = n(27), s = n(55), l = n(127), c = n(53), u = n(50), f = n(14)("iterator"), d = !([].keys && "next" in [].keys()), p = function() {
        return this;
      };
      t.exports = function(t2, e2, n2, h, v, g, y) {
        l(n2, e2, h);
        var b, m, k, x = function(t3) {
          if (!d && t3 in E)
            return E[t3];
          switch (t3) {
            case "keys":
            case "values":
              return function() {
                return new n2(this, t3);
              };
          }
          return function() {
            return new n2(this, t3);
          };
        }, w = e2 + " Iterator", S = v == "values", T = false, E = t2.prototype, B = E[f] || E["@@iterator"] || v && E[v], C = B || x(v), _ = v ? S ? x("entries") : C : void 0, O = e2 == "Array" && E.entries || B;
        if (O && (k = u(O.call(new t2()))) !== Object.prototype && k.next && (c(k, w, true), o || typeof k[f] == "function" || a(k, f, p)), S && B && B.name !== "values" && (T = true, C = function() {
          return B.call(this);
        }), o && !y || !d && !T && E[f] || a(E, f, C), s[e2] = C, s[w] = p, v)
          if (b = { values: S ? C : x("values"), keys: g ? C : x("keys"), entries: _ }, y)
            for (m in b)
              m in E || i(E, m, b[m]);
          else
            r(r.P + r.F * (d || T), e2, b);
        return b;
      };
    }, function(t, e, n) {
      var o = n(99), r = n(38);
      t.exports = function(t2, e2, n2) {
        if (o(e2))
          throw TypeError("String#" + n2 + " doesn't accept regex!");
        return String(r(t2));
      };
    }, function(t, e, n) {
      var o = n(13), r = n(37), i = n(14)("match");
      t.exports = function(t2) {
        var e2;
        return o(t2) && ((e2 = t2[i]) !== void 0 ? !!e2 : r(t2) == "RegExp");
      };
    }, function(t, e, n) {
      var o = n(14)("match");
      t.exports = function(t2) {
        var e2 = /./;
        try {
          "/./"[t2](e2);
        } catch (n2) {
          try {
            return e2[o] = false, !"/./"[t2](e2);
          } catch (t3) {
          }
        }
        return true;
      };
    }, function(t, e, n) {
      var o = n(55), r = n(14)("iterator"), i = Array.prototype;
      t.exports = function(t2) {
        return t2 !== void 0 && (o.Array === t2 || i[r] === t2);
      };
    }, function(t, e, n) {
      var o = n(19), r = n(43);
      t.exports = function(t2, e2, n2) {
        e2 in t2 ? o.f(t2, e2, r(0, n2)) : t2[e2] = n2;
      };
    }, function(t, e, n) {
      var o = n(63), r = n(14)("iterator"), i = n(55);
      t.exports = n(17).getIteratorMethod = function(t2) {
        if (t2 != null)
          return t2[r] || t2["@@iterator"] || i[o(t2)];
      };
    }, function(t, e, n) {
      var o = n(20), r = n(47), i = n(16);
      t.exports = function(t2) {
        for (var e2 = o(this), n2 = i(e2.length), a = arguments.length, s = r(a > 1 ? arguments[1] : void 0, n2), l = a > 2 ? arguments[2] : void 0, c = l === void 0 ? n2 : r(l, n2); c > s; )
          e2[s++] = t2;
        return e2;
      };
    }, function(t, e, n) {
      var o = n(51), r = n(132), i = n(55), a = n(28);
      t.exports = n(97)(Array, "Array", function(t2, e2) {
        this._t = a(t2), this._i = 0, this._k = e2;
      }, function() {
        var t2 = this._t, e2 = this._k, n2 = this._i++;
        return !t2 || n2 >= t2.length ? (this._t = void 0, r(1)) : r(0, e2 == "keys" ? n2 : e2 == "values" ? t2[n2] : [n2, t2[n2]]);
      }, "values"), i.Arguments = i.Array, o("keys"), o("values"), o("entries");
    }, function(t, e, n) {
      var o, r, i = n(73), a = RegExp.prototype.exec, s = String.prototype.replace, l = a, c = (o = /a/, r = /b*/g, a.call(o, "a"), a.call(r, "a"), o.lastIndex !== 0 || r.lastIndex !== 0), u = /()??/.exec("")[1] !== void 0;
      (c || u) && (l = function(t2) {
        var e2, n2, o2, r2, l2 = this;
        return u && (n2 = new RegExp("^" + l2.source + "$(?!\\s)", i.call(l2))), c && (e2 = l2.lastIndex), o2 = a.call(l2, t2), c && o2 && (l2.lastIndex = l2.global ? o2.index + o2[0].length : e2), u && o2 && o2.length > 1 && s.call(o2[0], n2, function() {
          for (r2 = 1; r2 < arguments.length - 2; r2++)
            arguments[r2] === void 0 && (o2[r2] = void 0);
        }), o2;
      }), t.exports = l;
    }, function(t, e, n) {
      var o = n(96)(true);
      t.exports = function(t2, e2, n2) {
        return e2 + (n2 ? o(t2, e2).length : 1);
      };
    }, function(t, e, n) {
      var o, r, i, a = n(31), s = n(121), l = n(89), c = n(85), u = n(10), f = u.process, d = u.setImmediate, p = u.clearImmediate, h = u.MessageChannel, v = u.Dispatch, g = 0, y = {}, b = function() {
        var t2 = +this;
        if (y.hasOwnProperty(t2)) {
          var e2 = y[t2];
          delete y[t2], e2();
        }
      }, m = function(t2) {
        b.call(t2.data);
      };
      d && p || (d = function(t2) {
        for (var e2 = [], n2 = 1; arguments.length > n2; )
          e2.push(arguments[n2++]);
        return y[++g] = function() {
          s(typeof t2 == "function" ? t2 : Function(t2), e2);
        }, o(g), g;
      }, p = function(t2) {
        delete y[t2];
      }, n(37)(f) == "process" ? o = function(t2) {
        f.nextTick(a(b, t2, 1));
      } : v && v.now ? o = function(t2) {
        v.now(a(b, t2, 1));
      } : h ? (i = (r = new h()).port2, r.port1.onmessage = m, o = a(i.postMessage, i, 1)) : u.addEventListener && typeof postMessage == "function" && !u.importScripts ? (o = function(t2) {
        u.postMessage(t2 + "", "*");
      }, u.addEventListener("message", m, false)) : o = "onreadystatechange" in c("script") ? function(t2) {
        l.appendChild(c("script")).onreadystatechange = function() {
          l.removeChild(this), b.call(t2);
        };
      } : function(t2) {
        setTimeout(a(b, t2, 1), 0);
      }), t.exports = { set: d, clear: p };
    }, function(t, e, n) {
      var o = n(10), r = n(18), i = n(45), a = n(79), s = n(27), l = n(58), c = n(11), u = n(57), f = n(33), d = n(16), p = n(140), h = n(49).f, v = n(19).f, g = n(104), y = n(53), b = o.ArrayBuffer, m = o.DataView, k = o.Math, x = o.RangeError, w = o.Infinity, S = b, T = k.abs, E = k.pow, B = k.floor, C = k.log, _ = k.LN2, O = r ? "_b" : "buffer", I = r ? "_l" : "byteLength", M = r ? "_o" : "byteOffset";
      function R(t2, e2, n2) {
        var o2, r2, i2, a2 = new Array(n2), s2 = 8 * n2 - e2 - 1, l2 = (1 << s2) - 1, c2 = l2 >> 1, u2 = e2 === 23 ? E(2, -24) - E(2, -77) : 0, f2 = 0, d2 = t2 < 0 || t2 === 0 && 1 / t2 < 0 ? 1 : 0;
        for ((t2 = T(t2)) != t2 || t2 === w ? (r2 = t2 != t2 ? 1 : 0, o2 = l2) : (o2 = B(C(t2) / _), t2 * (i2 = E(2, -o2)) < 1 && (o2--, i2 *= 2), (t2 += o2 + c2 >= 1 ? u2 / i2 : u2 * E(2, 1 - c2)) * i2 >= 2 && (o2++, i2 /= 2), o2 + c2 >= l2 ? (r2 = 0, o2 = l2) : o2 + c2 >= 1 ? (r2 = (t2 * i2 - 1) * E(2, e2), o2 += c2) : (r2 = t2 * E(2, c2 - 1) * E(2, e2), o2 = 0)); e2 >= 8; a2[f2++] = 255 & r2, r2 /= 256, e2 -= 8)
          ;
        for (o2 = o2 << e2 | r2, s2 += e2; s2 > 0; a2[f2++] = 255 & o2, o2 /= 256, s2 -= 8)
          ;
        return a2[--f2] |= 128 * d2, a2;
      }
      function A(t2, e2, n2) {
        var o2, r2 = 8 * n2 - e2 - 1, i2 = (1 << r2) - 1, a2 = i2 >> 1, s2 = r2 - 7, l2 = n2 - 1, c2 = t2[l2--], u2 = 127 & c2;
        for (c2 >>= 7; s2 > 0; u2 = 256 * u2 + t2[l2], l2--, s2 -= 8)
          ;
        for (o2 = u2 & (1 << -s2) - 1, u2 >>= -s2, s2 += e2; s2 > 0; o2 = 256 * o2 + t2[l2], l2--, s2 -= 8)
          ;
        if (u2 === 0)
          u2 = 1 - a2;
        else {
          if (u2 === i2)
            return o2 ? NaN : c2 ? -w : w;
          o2 += E(2, e2), u2 -= a2;
        }
        return (c2 ? -1 : 1) * o2 * E(2, u2 - e2);
      }
      function N(t2) {
        return t2[3] << 24 | t2[2] << 16 | t2[1] << 8 | t2[0];
      }
      function P(t2) {
        return [255 & t2];
      }
      function L(t2) {
        return [255 & t2, t2 >> 8 & 255];
      }
      function D(t2) {
        return [255 & t2, t2 >> 8 & 255, t2 >> 16 & 255, t2 >> 24 & 255];
      }
      function j(t2) {
        return R(t2, 52, 8);
      }
      function F(t2) {
        return R(t2, 23, 4);
      }
      function U(t2, e2, n2) {
        v(t2.prototype, e2, { get: function() {
          return this[n2];
        } });
      }
      function H(t2, e2, n2, o2) {
        var r2 = p(+n2);
        if (r2 + e2 > t2[I])
          throw x("Wrong index!");
        var i2 = t2[O]._b, a2 = r2 + t2[M], s2 = i2.slice(a2, a2 + e2);
        return o2 ? s2 : s2.reverse();
      }
      function z(t2, e2, n2, o2, r2, i2) {
        var a2 = p(+n2);
        if (a2 + e2 > t2[I])
          throw x("Wrong index!");
        for (var s2 = t2[O]._b, l2 = a2 + t2[M], c2 = o2(+r2), u2 = 0; u2 < e2; u2++)
          s2[l2 + u2] = c2[i2 ? u2 : e2 - u2 - 1];
      }
      if (a.ABV) {
        if (!c(function() {
          b(1);
        }) || !c(function() {
          new b(-1);
        }) || c(function() {
          return new b(), new b(1.5), new b(NaN), b.name != "ArrayBuffer";
        })) {
          for (var W, Y = (b = function(t2) {
            return u(this, b), new S(p(t2));
          }).prototype = S.prototype, V = h(S), X = 0; V.length > X; )
            (W = V[X++]) in b || s(b, W, S[W]);
          i || (Y.constructor = b);
        }
        var G = new m(new b(2)), K = m.prototype.setInt8;
        G.setInt8(0, 2147483648), G.setInt8(1, 2147483649), !G.getInt8(0) && G.getInt8(1) || l(m.prototype, { setInt8: function(t2, e2) {
          K.call(this, t2, e2 << 24 >> 24);
        }, setUint8: function(t2, e2) {
          K.call(this, t2, e2 << 24 >> 24);
        } }, true);
      } else
        b = function(t2) {
          u(this, b, "ArrayBuffer");
          var e2 = p(t2);
          this._b = g.call(new Array(e2), 0), this[I] = e2;
        }, m = function(t2, e2, n2) {
          u(this, m, "DataView"), u(t2, b, "DataView");
          var o2 = t2[I], r2 = f(e2);
          if (r2 < 0 || r2 > o2)
            throw x("Wrong offset!");
          if (r2 + (n2 = n2 === void 0 ? o2 - r2 : d(n2)) > o2)
            throw x("Wrong length!");
          this[O] = t2, this[M] = r2, this[I] = n2;
        }, r && (U(b, "byteLength", "_l"), U(m, "buffer", "_b"), U(m, "byteLength", "_l"), U(m, "byteOffset", "_o")), l(m.prototype, { getInt8: function(t2) {
          return H(this, 1, t2)[0] << 24 >> 24;
        }, getUint8: function(t2) {
          return H(this, 1, t2)[0];
        }, getInt16: function(t2) {
          var e2 = H(this, 2, t2, arguments[1]);
          return (e2[1] << 8 | e2[0]) << 16 >> 16;
        }, getUint16: function(t2) {
          var e2 = H(this, 2, t2, arguments[1]);
          return e2[1] << 8 | e2[0];
        }, getInt32: function(t2) {
          return N(H(this, 4, t2, arguments[1]));
        }, getUint32: function(t2) {
          return N(H(this, 4, t2, arguments[1])) >>> 0;
        }, getFloat32: function(t2) {
          return A(H(this, 4, t2, arguments[1]), 23, 4);
        }, getFloat64: function(t2) {
          return A(H(this, 8, t2, arguments[1]), 52, 8);
        }, setInt8: function(t2, e2) {
          z(this, 1, t2, P, e2);
        }, setUint8: function(t2, e2) {
          z(this, 1, t2, P, e2);
        }, setInt16: function(t2, e2) {
          z(this, 2, t2, L, e2, arguments[2]);
        }, setUint16: function(t2, e2) {
          z(this, 2, t2, L, e2, arguments[2]);
        }, setInt32: function(t2, e2) {
          z(this, 4, t2, D, e2, arguments[2]);
        }, setUint32: function(t2, e2) {
          z(this, 4, t2, D, e2, arguments[2]);
        }, setFloat32: function(t2, e2) {
          z(this, 4, t2, F, e2, arguments[2]);
        }, setFloat64: function(t2, e2) {
          z(this, 8, t2, j, e2, arguments[2]);
        } });
      y(b, "ArrayBuffer"), y(m, "DataView"), s(m.prototype, a.VIEW, true), e.ArrayBuffer = b, e.DataView = m;
    }, function(t, e) {
      function n(e2, o) {
        return t.exports = n = Object.setPrototypeOf || function(t2, e3) {
          return t2.__proto__ = e3, t2;
        }, n(e2, o);
      }
      t.exports = n;
    }, function(t, e, n) {
      var o, r, i;
      r = [e], (i = typeof (o = function(n2) {
        Object.defineProperty(n2, "__esModule", { value: true }), n2.default = void 0;
        var o2 = function(t2) {
          var e2 = { get id() {
            return t2.id;
          }, get name() {
            return t2.name;
          }, get config() {
            return t2.config;
          }, get holder() {
            return t2.holder;
          }, get isEmpty() {
            return t2.isEmpty;
          }, get selected() {
            return t2.selected;
          }, set stretched(e3) {
            t2.stretched = e3;
          }, get stretched() {
            return t2.stretched;
          }, call: function(e3, n3) {
            return t2.call(e3, n3);
          }, save: function() {
            return t2.save();
          }, validate: function(e3) {
            return t2.validate(e3);
          } };
          Object.setPrototypeOf(this, e2);
        };
        n2.default = o2, t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(42), n(2), n(3), n(383)], (i = typeof (o = function(o2, r2, i2, a, s) {
        var l = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = l(r2), i2 = l(i2), a = l(a), s = l(s);
        var c = function() {
          function t2() {
            (0, i2.default)(this, t2), this.registeredShortcuts = new Map();
          }
          return (0, a.default)(t2, [{ key: "add", value: function(t3) {
            if (this.findShortcut(t3.on, t3.name))
              throw Error("Shortcut ".concat(t3.name, " is already registered for ").concat(t3.on, ". Please remove it before add a new handler."));
            var e2 = new s.default({ name: t3.name, on: t3.on, callback: t3.handler }), n2 = this.registeredShortcuts.get(t3.on) || [];
            this.registeredShortcuts.set(t3.on, [].concat((0, r2.default)(n2), [e2]));
          } }, { key: "remove", value: function(t3, e2) {
            var n2 = this.findShortcut(t3, e2);
            if (n2) {
              n2.remove();
              var o3 = this.registeredShortcuts.get(t3);
              this.registeredShortcuts.set(t3, o3.filter(function(t4) {
                return t4 !== n2;
              }));
            }
          } }, { key: "findShortcut", value: function(t3, e2) {
            return (this.registeredShortcuts.get(t3) || []).find(function(t4) {
              return t4.name === e2;
            });
          } }]), t2;
        }();
        c.displayName = "Shortcuts";
        var u = new c();
        o2.default = u, t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      t.exports = !n(18) && !n(11)(function() {
        return Object.defineProperty(n(85)("div"), "a", { get: function() {
          return 7;
        } }).a != 7;
      });
    }, function(t, e, n) {
      var o = n(10), r = n(17), i = n(45), a = n(86), s = n(19).f;
      t.exports = function(t2) {
        var e2 = r.Symbol || (r.Symbol = i ? {} : o.Symbol || {});
        t2.charAt(0) == "_" || t2 in e2 || s(e2, t2, { value: a.f(t2) });
      };
    }, function(t, e, n) {
      var o = n(26), r = n(28), i = n(69)(false), a = n(87)("IE_PROTO");
      t.exports = function(t2, e2) {
        var n2, s = r(t2), l = 0, c = [];
        for (n2 in s)
          n2 != a && o(s, n2) && c.push(n2);
        for (; e2.length > l; )
          o(s, n2 = e2[l++]) && (~i(c, n2) || c.push(n2));
        return c;
      };
    }, function(t, e, n) {
      var o = n(19), r = n(12), i = n(46);
      t.exports = n(18) ? Object.defineProperties : function(t2, e2) {
        r(t2);
        for (var n2, a = i(e2), s = a.length, l = 0; s > l; )
          o.f(t2, n2 = a[l++], e2[n2]);
        return t2;
      };
    }, function(t, e, n) {
      var o = n(28), r = n(49).f, i = {}.toString, a = typeof window == "object" && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
      t.exports.f = function(t2) {
        return a && i.call(t2) == "[object Window]" ? function(t3) {
          try {
            return r(t3);
          } catch (t4) {
            return a.slice();
          }
        }(t2) : r(o(t2));
      };
    }, function(t, e, n) {
      var o = n(18), r = n(46), i = n(70), a = n(62), s = n(20), l = n(61), c = Object.assign;
      t.exports = !c || n(11)(function() {
        var t2 = {}, e2 = {}, n2 = Symbol(), o2 = "abcdefghijklmnopqrst";
        return t2[n2] = 7, o2.split("").forEach(function(t3) {
          e2[t3] = t3;
        }), c({}, t2)[n2] != 7 || Object.keys(c({}, e2)).join("") != o2;
      }) ? function(t2, e2) {
        for (var n2 = s(t2), c2 = arguments.length, u = 1, f = i.f, d = a.f; c2 > u; )
          for (var p, h = l(arguments[u++]), v = f ? r(h).concat(f(h)) : r(h), g = v.length, y = 0; g > y; )
            p = v[y++], o && !d.call(h, p) || (n2[p] = h[p]);
        return n2;
      } : c;
    }, function(t, e) {
      t.exports = Object.is || function(t2, e2) {
        return t2 === e2 ? t2 !== 0 || 1 / t2 == 1 / e2 : t2 != t2 && e2 != e2;
      };
    }, function(t, e, n) {
      var o = n(32), r = n(13), i = n(121), a = [].slice, s = {}, l = function(t2, e2, n2) {
        if (!(e2 in s)) {
          for (var o2 = [], r2 = 0; r2 < e2; r2++)
            o2[r2] = "a[" + r2 + "]";
          s[e2] = Function("F,a", "return new F(" + o2.join(",") + ")");
        }
        return s[e2](t2, n2);
      };
      t.exports = Function.bind || function(t2) {
        var e2 = o(this), n2 = a.call(arguments, 1), s2 = function() {
          var o2 = n2.concat(a.call(arguments));
          return this instanceof s2 ? l(e2, o2.length, o2) : i(e2, o2, t2);
        };
        return r(e2.prototype) && (s2.prototype = e2.prototype), s2;
      };
    }, function(t, e) {
      t.exports = function(t2, e2, n) {
        var o = n === void 0;
        switch (e2.length) {
          case 0:
            return o ? t2() : t2.call(n);
          case 1:
            return o ? t2(e2[0]) : t2.call(n, e2[0]);
          case 2:
            return o ? t2(e2[0], e2[1]) : t2.call(n, e2[0], e2[1]);
          case 3:
            return o ? t2(e2[0], e2[1], e2[2]) : t2.call(n, e2[0], e2[1], e2[2]);
          case 4:
            return o ? t2(e2[0], e2[1], e2[2], e2[3]) : t2.call(n, e2[0], e2[1], e2[2], e2[3]);
        }
        return t2.apply(n, e2);
      };
    }, function(t, e, n) {
      var o = n(10).parseInt, r = n(54).trim, i = n(91), a = /^[-+]?0[xX]/;
      t.exports = o(i + "08") !== 8 || o(i + "0x16") !== 22 ? function(t2, e2) {
        var n2 = r(String(t2), 3);
        return o(n2, e2 >>> 0 || (a.test(n2) ? 16 : 10));
      } : o;
    }, function(t, e, n) {
      var o = n(10).parseFloat, r = n(54).trim;
      t.exports = 1 / o(n(91) + "-0") != -1 / 0 ? function(t2) {
        var e2 = r(String(t2), 3), n2 = o(e2);
        return n2 === 0 && e2.charAt(0) == "-" ? -0 : n2;
      } : o;
    }, function(t, e, n) {
      var o = n(37);
      t.exports = function(t2, e2) {
        if (typeof t2 != "number" && o(t2) != "Number")
          throw TypeError(e2);
        return +t2;
      };
    }, function(t, e, n) {
      var o = n(13), r = Math.floor;
      t.exports = function(t2) {
        return !o(t2) && isFinite(t2) && r(t2) === t2;
      };
    }, function(t, e) {
      t.exports = Math.log1p || function(t2) {
        return (t2 = +t2) > -1e-8 && t2 < 1e-8 ? t2 - t2 * t2 / 2 : Math.log(1 + t2);
      };
    }, function(t, e, n) {
      var o = n(48), r = n(43), i = n(53), a = {};
      n(27)(a, n(14)("iterator"), function() {
        return this;
      }), t.exports = function(t2, e2, n2) {
        t2.prototype = o(a, { next: r(1, n2) }), i(t2, e2 + " Iterator");
      };
    }, function(t, e, n) {
      var o = n(12);
      t.exports = function(t2, e2, n2, r) {
        try {
          return r ? e2(o(n2)[0], n2[1]) : e2(n2);
        } catch (e3) {
          var i = t2.return;
          throw i !== void 0 && o(i.call(t2)), e3;
        }
      };
    }, function(t, e, n) {
      var o = n(281);
      t.exports = function(t2, e2) {
        return new (o(t2))(e2);
      };
    }, function(t, e, n) {
      var o = n(32), r = n(20), i = n(61), a = n(16);
      t.exports = function(t2, e2, n2, s, l) {
        o(e2);
        var c = r(t2), u = i(c), f = a(c.length), d = l ? f - 1 : 0, p = l ? -1 : 1;
        if (n2 < 2)
          for (; ; ) {
            if (d in u) {
              s = u[d], d += p;
              break;
            }
            if (d += p, l ? d < 0 : f <= d)
              throw TypeError("Reduce of empty array with no initial value");
          }
        for (; l ? d >= 0 : f > d; d += p)
          d in u && (s = e2(s, u[d], d, c));
        return s;
      };
    }, function(t, e, n) {
      var o = n(20), r = n(47), i = n(16);
      t.exports = [].copyWithin || function(t2, e2) {
        var n2 = o(this), a = i(n2.length), s = r(t2, a), l = r(e2, a), c = arguments.length > 2 ? arguments[2] : void 0, u = Math.min((c === void 0 ? a : r(c, a)) - l, a - s), f = 1;
        for (l < s && s < l + u && (f = -1, l += u - 1, s += u - 1); u-- > 0; )
          l in n2 ? n2[s] = n2[l] : delete n2[s], s += f, l += f;
        return n2;
      };
    }, function(t, e) {
      t.exports = function(t2, e2) {
        return { value: e2, done: !!t2 };
      };
    }, function(t, e, n) {
      var o = n(106);
      n(0)({ target: "RegExp", proto: true, forced: o !== /./.exec }, { exec: o });
    }, function(t, e, n) {
      n(18) && /./g.flags != "g" && n(19).f(RegExp.prototype, "flags", { configurable: true, get: n(73) });
    }, function(t, e, n) {
      var o, r, i, a, s = n(45), l = n(10), c = n(31), u = n(63), f = n(0), d = n(13), p = n(32), h = n(57), v = n(76), g = n(64), y = n(108).set, b = n(301)(), m = n(136), k = n(302), x = n(77), w = n(137), S = l.TypeError, T = l.process, E = T && T.versions, B = E && E.v8 || "", C = l.Promise, _ = u(T) == "process", O = function() {
      }, I = r = m.f, M = !!function() {
        try {
          var t2 = C.resolve(1), e2 = (t2.constructor = {})[n(14)("species")] = function(t3) {
            t3(O, O);
          };
          return (_ || typeof PromiseRejectionEvent == "function") && t2.then(O) instanceof e2 && B.indexOf("6.6") !== 0 && x.indexOf("Chrome/66") === -1;
        } catch (t3) {
        }
      }(), R = function(t2) {
        var e2;
        return !(!d(t2) || typeof (e2 = t2.then) != "function") && e2;
      }, A = function(t2, e2) {
        if (!t2._n) {
          t2._n = true;
          var n2 = t2._c;
          b(function() {
            for (var o2 = t2._v, r2 = t2._s == 1, i2 = 0, a2 = function(e3) {
              var n3, i3, a3, s2 = r2 ? e3.ok : e3.fail, l2 = e3.resolve, c2 = e3.reject, u2 = e3.domain;
              try {
                s2 ? (r2 || (t2._h == 2 && L(t2), t2._h = 1), s2 === true ? n3 = o2 : (u2 && u2.enter(), n3 = s2(o2), u2 && (u2.exit(), a3 = true)), n3 === e3.promise ? c2(S("Promise-chain cycle")) : (i3 = R(n3)) ? i3.call(n3, l2, c2) : l2(n3)) : c2(o2);
              } catch (t3) {
                u2 && !a3 && u2.exit(), c2(t3);
              }
            }; n2.length > i2; )
              a2(n2[i2++]);
            t2._c = [], t2._n = false, e2 && !t2._h && N(t2);
          });
        }
      }, N = function(t2) {
        y.call(l, function() {
          var e2, n2, o2, r2 = t2._v, i2 = P(t2);
          if (i2 && (e2 = k(function() {
            _ ? T.emit("unhandledRejection", r2, t2) : (n2 = l.onunhandledrejection) ? n2({ promise: t2, reason: r2 }) : (o2 = l.console) && o2.error && o2.error("Unhandled promise rejection", r2);
          }), t2._h = _ || P(t2) ? 2 : 1), t2._a = void 0, i2 && e2.e)
            throw e2.v;
        });
      }, P = function(t2) {
        return t2._h !== 1 && (t2._a || t2._c).length === 0;
      }, L = function(t2) {
        y.call(l, function() {
          var e2;
          _ ? T.emit("rejectionHandled", t2) : (e2 = l.onrejectionhandled) && e2({ promise: t2, reason: t2._v });
        });
      }, D = function(t2) {
        var e2 = this;
        e2._d || (e2._d = true, (e2 = e2._w || e2)._v = t2, e2._s = 2, e2._a || (e2._a = e2._c.slice()), A(e2, true));
      }, j = function(t2) {
        var e2, n2 = this;
        if (!n2._d) {
          n2._d = true, n2 = n2._w || n2;
          try {
            if (n2 === t2)
              throw S("Promise can't be resolved itself");
            (e2 = R(t2)) ? b(function() {
              var o2 = { _w: n2, _d: false };
              try {
                e2.call(t2, c(j, o2, 1), c(D, o2, 1));
              } catch (t3) {
                D.call(o2, t3);
              }
            }) : (n2._v = t2, n2._s = 1, A(n2, false));
          } catch (t3) {
            D.call({ _w: n2, _d: false }, t3);
          }
        }
      };
      M || (C = function(t2) {
        h(this, C, "Promise", "_h"), p(t2), o.call(this);
        try {
          t2(c(j, this, 1), c(D, this, 1));
        } catch (t3) {
          D.call(this, t3);
        }
      }, (o = function(t2) {
        this._c = [], this._a = void 0, this._s = 0, this._d = false, this._v = void 0, this._h = 0, this._n = false;
      }).prototype = n(58)(C.prototype, { then: function(t2, e2) {
        var n2 = I(g(this, C));
        return n2.ok = typeof t2 != "function" || t2, n2.fail = typeof e2 == "function" && e2, n2.domain = _ ? T.domain : void 0, this._c.push(n2), this._a && this._a.push(n2), this._s && A(this, false), n2.promise;
      }, catch: function(t2) {
        return this.then(void 0, t2);
      } }), i = function() {
        var t2 = new o();
        this.promise = t2, this.resolve = c(j, t2, 1), this.reject = c(D, t2, 1);
      }, m.f = I = function(t2) {
        return t2 === C || t2 === a ? new i(t2) : r(t2);
      }), f(f.G + f.W + f.F * !M, { Promise: C }), n(53)(C, "Promise"), n(56)("Promise"), a = n(17).Promise, f(f.S + f.F * !M, "Promise", { reject: function(t2) {
        var e2 = I(this);
        return (0, e2.reject)(t2), e2.promise;
      } }), f(f.S + f.F * (s || !M), "Promise", { resolve: function(t2) {
        return w(s && this === a ? C : this, t2);
      } }), f(f.S + f.F * !(M && n(72)(function(t2) {
        C.all(t2).catch(O);
      })), "Promise", { all: function(t2) {
        var e2 = this, n2 = I(e2), o2 = n2.resolve, r2 = n2.reject, i2 = k(function() {
          var n3 = [], i3 = 0, a2 = 1;
          v(t2, false, function(t3) {
            var s2 = i3++, l2 = false;
            n3.push(void 0), a2++, e2.resolve(t3).then(function(t4) {
              l2 || (l2 = true, n3[s2] = t4, --a2 || o2(n3));
            }, r2);
          }), --a2 || o2(n3);
        });
        return i2.e && r2(i2.v), n2.promise;
      }, race: function(t2) {
        var e2 = this, n2 = I(e2), o2 = n2.reject, r2 = k(function() {
          v(t2, false, function(t3) {
            e2.resolve(t3).then(n2.resolve, o2);
          });
        });
        return r2.e && o2(r2.v), n2.promise;
      } });
    }, function(t, e, n) {
      var o = n(32);
      function r(t2) {
        var e2, n2;
        this.promise = new t2(function(t3, o2) {
          if (e2 !== void 0 || n2 !== void 0)
            throw TypeError("Bad Promise constructor");
          e2 = t3, n2 = o2;
        }), this.resolve = o(e2), this.reject = o(n2);
      }
      t.exports.f = function(t2) {
        return new r(t2);
      };
    }, function(t, e, n) {
      var o = n(12), r = n(13), i = n(136);
      t.exports = function(t2, e2) {
        if (o(t2), r(e2) && e2.constructor === t2)
          return e2;
        var n2 = i.f(t2);
        return (0, n2.resolve)(e2), n2.promise;
      };
    }, function(t, e, n) {
      var o = n(19).f, r = n(48), i = n(58), a = n(31), s = n(57), l = n(76), c = n(97), u = n(132), f = n(56), d = n(18), p = n(41).fastKey, h = n(52), v = d ? "_s" : "size", g = function(t2, e2) {
        var n2, o2 = p(e2);
        if (o2 !== "F")
          return t2._i[o2];
        for (n2 = t2._f; n2; n2 = n2.n)
          if (n2.k == e2)
            return n2;
      };
      t.exports = { getConstructor: function(t2, e2, n2, c2) {
        var u2 = t2(function(t3, o2) {
          s(t3, u2, e2, "_i"), t3._t = e2, t3._i = r(null), t3._f = void 0, t3._l = void 0, t3[v] = 0, o2 != null && l(o2, n2, t3[c2], t3);
        });
        return i(u2.prototype, { clear: function() {
          for (var t3 = h(this, e2), n3 = t3._i, o2 = t3._f; o2; o2 = o2.n)
            o2.r = true, o2.p && (o2.p = o2.p.n = void 0), delete n3[o2.i];
          t3._f = t3._l = void 0, t3[v] = 0;
        }, delete: function(t3) {
          var n3 = h(this, e2), o2 = g(n3, t3);
          if (o2) {
            var r2 = o2.n, i2 = o2.p;
            delete n3._i[o2.i], o2.r = true, i2 && (i2.n = r2), r2 && (r2.p = i2), n3._f == o2 && (n3._f = r2), n3._l == o2 && (n3._l = i2), n3[v]--;
          }
          return !!o2;
        }, forEach: function(t3) {
          h(this, e2);
          for (var n3, o2 = a(t3, arguments.length > 1 ? arguments[1] : void 0, 3); n3 = n3 ? n3.n : this._f; )
            for (o2(n3.v, n3.k, this); n3 && n3.r; )
              n3 = n3.p;
        }, has: function(t3) {
          return !!g(h(this, e2), t3);
        } }), d && o(u2.prototype, "size", { get: function() {
          return h(this, e2)[v];
        } }), u2;
      }, def: function(t2, e2, n2) {
        var o2, r2, i2 = g(t2, e2);
        return i2 ? i2.v = n2 : (t2._l = i2 = { i: r2 = p(e2, true), k: e2, v: n2, p: o2 = t2._l, n: void 0, r: false }, t2._f || (t2._f = i2), o2 && (o2.n = i2), t2[v]++, r2 !== "F" && (t2._i[r2] = i2)), t2;
      }, getEntry: g, setStrong: function(t2, e2, n2) {
        c(t2, e2, function(t3, n3) {
          this._t = h(t3, e2), this._k = n3, this._l = void 0;
        }, function() {
          for (var t3 = this._k, e3 = this._l; e3 && e3.r; )
            e3 = e3.p;
          return this._t && (this._l = e3 = e3 ? e3.n : this._t._f) ? u(0, t3 == "keys" ? e3.k : t3 == "values" ? e3.v : [e3.k, e3.v]) : (this._t = void 0, u(1));
        }, n2 ? "entries" : "values", !n2, true), f(e2);
      } };
    }, function(t, e, n) {
      var o = n(58), r = n(41).getWeak, i = n(12), a = n(13), s = n(57), l = n(76), c = n(36), u = n(26), f = n(52), d = c(5), p = c(6), h = 0, v = function(t2) {
        return t2._l || (t2._l = new g());
      }, g = function() {
        this.a = [];
      }, y = function(t2, e2) {
        return d(t2.a, function(t3) {
          return t3[0] === e2;
        });
      };
      g.prototype = { get: function(t2) {
        var e2 = y(this, t2);
        if (e2)
          return e2[1];
      }, has: function(t2) {
        return !!y(this, t2);
      }, set: function(t2, e2) {
        var n2 = y(this, t2);
        n2 ? n2[1] = e2 : this.a.push([t2, e2]);
      }, delete: function(t2) {
        var e2 = p(this.a, function(e3) {
          return e3[0] === t2;
        });
        return ~e2 && this.a.splice(e2, 1), !!~e2;
      } }, t.exports = { getConstructor: function(t2, e2, n2, i2) {
        var c2 = t2(function(t3, o2) {
          s(t3, c2, e2, "_i"), t3._t = e2, t3._i = h++, t3._l = void 0, o2 != null && l(o2, n2, t3[i2], t3);
        });
        return o(c2.prototype, { delete: function(t3) {
          if (!a(t3))
            return false;
          var n3 = r(t3);
          return n3 === true ? v(f(this, e2)).delete(t3) : n3 && u(n3, this._i) && delete n3[this._i];
        }, has: function(t3) {
          if (!a(t3))
            return false;
          var n3 = r(t3);
          return n3 === true ? v(f(this, e2)).has(t3) : n3 && u(n3, this._i);
        } }), c2;
      }, def: function(t2, e2, n2) {
        var o2 = r(i(e2), true);
        return o2 === true ? v(t2).set(e2, n2) : o2[t2._i] = n2, t2;
      }, ufstore: v };
    }, function(t, e, n) {
      var o = n(33), r = n(16);
      t.exports = function(t2) {
        if (t2 === void 0)
          return 0;
        var e2 = o(t2), n2 = r(e2);
        if (e2 !== n2)
          throw RangeError("Wrong length!");
        return n2;
      };
    }, function(t, e, n) {
      var o = n(49), r = n(70), i = n(12), a = n(10).Reflect;
      t.exports = a && a.ownKeys || function(t2) {
        var e2 = o.f(i(t2)), n2 = r.f;
        return n2 ? e2.concat(n2(t2)) : e2;
      };
    }, function(t, e, n) {
      var o = n(16), r = n(93), i = n(38);
      t.exports = function(t2, e2, n2, a) {
        var s = String(i(t2)), l = s.length, c = n2 === void 0 ? " " : String(n2), u = o(e2);
        if (u <= l || c == "")
          return s;
        var f = u - l, d = r.call(c, Math.ceil(f / c.length));
        return d.length > f && (d = d.slice(0, f)), a ? d + s : s + d;
      };
    }, function(t, e, n) {
      var o = n(18), r = n(46), i = n(28), a = n(62).f;
      t.exports = function(t2) {
        return function(e2) {
          for (var n2, s = i(e2), l = r(s), c = l.length, u = 0, f = []; c > u; )
            n2 = l[u++], o && !a.call(s, n2) || f.push(t2 ? [n2, s[n2]] : s[n2]);
          return f;
        };
      };
    }, function(t, e, n) {
      var o = function(t2) {
        var e2 = Object.prototype, n2 = e2.hasOwnProperty, o2 = typeof Symbol == "function" ? Symbol : {}, r = o2.iterator || "@@iterator", i = o2.asyncIterator || "@@asyncIterator", a = o2.toStringTag || "@@toStringTag";
        function s(t3, e3, n3, o3) {
          var r2 = e3 && e3.prototype instanceof u ? e3 : u, i2 = Object.create(r2.prototype), a2 = new w(o3 || []);
          return i2._invoke = function(t4, e4, n4) {
            var o4 = "suspendedStart";
            return function(r3, i3) {
              if (o4 === "executing")
                throw new Error("Generator is already running");
              if (o4 === "completed") {
                if (r3 === "throw")
                  throw i3;
                return T();
              }
              for (n4.method = r3, n4.arg = i3; ; ) {
                var a3 = n4.delegate;
                if (a3) {
                  var s2 = m(a3, n4);
                  if (s2) {
                    if (s2 === c)
                      continue;
                    return s2;
                  }
                }
                if (n4.method === "next")
                  n4.sent = n4._sent = n4.arg;
                else if (n4.method === "throw") {
                  if (o4 === "suspendedStart")
                    throw o4 = "completed", n4.arg;
                  n4.dispatchException(n4.arg);
                } else
                  n4.method === "return" && n4.abrupt("return", n4.arg);
                o4 = "executing";
                var u2 = l(t4, e4, n4);
                if (u2.type === "normal") {
                  if (o4 = n4.done ? "completed" : "suspendedYield", u2.arg === c)
                    continue;
                  return { value: u2.arg, done: n4.done };
                }
                u2.type === "throw" && (o4 = "completed", n4.method = "throw", n4.arg = u2.arg);
              }
            };
          }(t3, n3, a2), i2;
        }
        function l(t3, e3, n3) {
          try {
            return { type: "normal", arg: t3.call(e3, n3) };
          } catch (t4) {
            return { type: "throw", arg: t4 };
          }
        }
        t2.wrap = s;
        var c = {};
        function u() {
        }
        function f() {
        }
        function d() {
        }
        var p = {};
        p[r] = function() {
          return this;
        };
        var h = Object.getPrototypeOf, v = h && h(h(S([])));
        v && v !== e2 && n2.call(v, r) && (p = v);
        var g = d.prototype = u.prototype = Object.create(p);
        function y(t3) {
          ["next", "throw", "return"].forEach(function(e3) {
            t3[e3] = function(t4) {
              return this._invoke(e3, t4);
            };
          });
        }
        function b(t3, e3) {
          var o3;
          this._invoke = function(r2, i2) {
            function a2() {
              return new e3(function(o4, a3) {
                !function o5(r3, i3, a4, s2) {
                  var c2 = l(t3[r3], t3, i3);
                  if (c2.type !== "throw") {
                    var u2 = c2.arg, f2 = u2.value;
                    return f2 && typeof f2 == "object" && n2.call(f2, "__await") ? e3.resolve(f2.__await).then(function(t4) {
                      o5("next", t4, a4, s2);
                    }, function(t4) {
                      o5("throw", t4, a4, s2);
                    }) : e3.resolve(f2).then(function(t4) {
                      u2.value = t4, a4(u2);
                    }, function(t4) {
                      return o5("throw", t4, a4, s2);
                    });
                  }
                  s2(c2.arg);
                }(r2, i2, o4, a3);
              });
            }
            return o3 = o3 ? o3.then(a2, a2) : a2();
          };
        }
        function m(t3, e3) {
          var n3 = t3.iterator[e3.method];
          if (n3 === void 0) {
            if (e3.delegate = null, e3.method === "throw") {
              if (t3.iterator.return && (e3.method = "return", e3.arg = void 0, m(t3, e3), e3.method === "throw"))
                return c;
              e3.method = "throw", e3.arg = new TypeError("The iterator does not provide a 'throw' method");
            }
            return c;
          }
          var o3 = l(n3, t3.iterator, e3.arg);
          if (o3.type === "throw")
            return e3.method = "throw", e3.arg = o3.arg, e3.delegate = null, c;
          var r2 = o3.arg;
          return r2 ? r2.done ? (e3[t3.resultName] = r2.value, e3.next = t3.nextLoc, e3.method !== "return" && (e3.method = "next", e3.arg = void 0), e3.delegate = null, c) : r2 : (e3.method = "throw", e3.arg = new TypeError("iterator result is not an object"), e3.delegate = null, c);
        }
        function k(t3) {
          var e3 = { tryLoc: t3[0] };
          1 in t3 && (e3.catchLoc = t3[1]), 2 in t3 && (e3.finallyLoc = t3[2], e3.afterLoc = t3[3]), this.tryEntries.push(e3);
        }
        function x(t3) {
          var e3 = t3.completion || {};
          e3.type = "normal", delete e3.arg, t3.completion = e3;
        }
        function w(t3) {
          this.tryEntries = [{ tryLoc: "root" }], t3.forEach(k, this), this.reset(true);
        }
        function S(t3) {
          if (t3) {
            var e3 = t3[r];
            if (e3)
              return e3.call(t3);
            if (typeof t3.next == "function")
              return t3;
            if (!isNaN(t3.length)) {
              var o3 = -1, i2 = function e4() {
                for (; ++o3 < t3.length; )
                  if (n2.call(t3, o3))
                    return e4.value = t3[o3], e4.done = false, e4;
                return e4.value = void 0, e4.done = true, e4;
              };
              return i2.next = i2;
            }
          }
          return { next: T };
        }
        function T() {
          return { value: void 0, done: true };
        }
        return f.prototype = g.constructor = d, d.constructor = f, d[a] = f.displayName = "GeneratorFunction", t2.isGeneratorFunction = function(t3) {
          var e3 = typeof t3 == "function" && t3.constructor;
          return !!e3 && (e3 === f || (e3.displayName || e3.name) === "GeneratorFunction");
        }, t2.mark = function(t3) {
          return Object.setPrototypeOf ? Object.setPrototypeOf(t3, d) : (t3.__proto__ = d, a in t3 || (t3[a] = "GeneratorFunction")), t3.prototype = Object.create(g), t3;
        }, t2.awrap = function(t3) {
          return { __await: t3 };
        }, y(b.prototype), b.prototype[i] = function() {
          return this;
        }, t2.AsyncIterator = b, t2.async = function(e3, n3, o3, r2, i2) {
          i2 === void 0 && (i2 = Promise);
          var a2 = new b(s(e3, n3, o3, r2), i2);
          return t2.isGeneratorFunction(n3) ? a2 : a2.next().then(function(t3) {
            return t3.done ? t3.value : a2.next();
          });
        }, y(g), g[a] = "Generator", g[r] = function() {
          return this;
        }, g.toString = function() {
          return "[object Generator]";
        }, t2.keys = function(t3) {
          var e3 = [];
          for (var n3 in t3)
            e3.push(n3);
          return e3.reverse(), function n4() {
            for (; e3.length; ) {
              var o3 = e3.pop();
              if (o3 in t3)
                return n4.value = o3, n4.done = false, n4;
            }
            return n4.done = true, n4;
          };
        }, t2.values = S, w.prototype = { constructor: w, reset: function(t3) {
          if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = false, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(x), !t3)
            for (var e3 in this)
              e3.charAt(0) === "t" && n2.call(this, e3) && !isNaN(+e3.slice(1)) && (this[e3] = void 0);
        }, stop: function() {
          this.done = true;
          var t3 = this.tryEntries[0].completion;
          if (t3.type === "throw")
            throw t3.arg;
          return this.rval;
        }, dispatchException: function(t3) {
          if (this.done)
            throw t3;
          var e3 = this;
          function o3(n3, o4) {
            return a2.type = "throw", a2.arg = t3, e3.next = n3, o4 && (e3.method = "next", e3.arg = void 0), !!o4;
          }
          for (var r2 = this.tryEntries.length - 1; r2 >= 0; --r2) {
            var i2 = this.tryEntries[r2], a2 = i2.completion;
            if (i2.tryLoc === "root")
              return o3("end");
            if (i2.tryLoc <= this.prev) {
              var s2 = n2.call(i2, "catchLoc"), l2 = n2.call(i2, "finallyLoc");
              if (s2 && l2) {
                if (this.prev < i2.catchLoc)
                  return o3(i2.catchLoc, true);
                if (this.prev < i2.finallyLoc)
                  return o3(i2.finallyLoc);
              } else if (s2) {
                if (this.prev < i2.catchLoc)
                  return o3(i2.catchLoc, true);
              } else {
                if (!l2)
                  throw new Error("try statement without catch or finally");
                if (this.prev < i2.finallyLoc)
                  return o3(i2.finallyLoc);
              }
            }
          }
        }, abrupt: function(t3, e3) {
          for (var o3 = this.tryEntries.length - 1; o3 >= 0; --o3) {
            var r2 = this.tryEntries[o3];
            if (r2.tryLoc <= this.prev && n2.call(r2, "finallyLoc") && this.prev < r2.finallyLoc) {
              var i2 = r2;
              break;
            }
          }
          i2 && (t3 === "break" || t3 === "continue") && i2.tryLoc <= e3 && e3 <= i2.finallyLoc && (i2 = null);
          var a2 = i2 ? i2.completion : {};
          return a2.type = t3, a2.arg = e3, i2 ? (this.method = "next", this.next = i2.finallyLoc, c) : this.complete(a2);
        }, complete: function(t3, e3) {
          if (t3.type === "throw")
            throw t3.arg;
          return t3.type === "break" || t3.type === "continue" ? this.next = t3.arg : t3.type === "return" ? (this.rval = this.arg = t3.arg, this.method = "return", this.next = "end") : t3.type === "normal" && e3 && (this.next = e3), c;
        }, finish: function(t3) {
          for (var e3 = this.tryEntries.length - 1; e3 >= 0; --e3) {
            var n3 = this.tryEntries[e3];
            if (n3.finallyLoc === t3)
              return this.complete(n3.completion, n3.afterLoc), x(n3), c;
          }
        }, catch: function(t3) {
          for (var e3 = this.tryEntries.length - 1; e3 >= 0; --e3) {
            var n3 = this.tryEntries[e3];
            if (n3.tryLoc === t3) {
              var o3 = n3.completion;
              if (o3.type === "throw") {
                var r2 = o3.arg;
                x(n3);
              }
              return r2;
            }
          }
          throw new Error("illegal catch attempt");
        }, delegateYield: function(t3, e3, n3) {
          return this.delegate = { iterator: S(t3), resultName: e3, nextLoc: n3 }, this.method === "next" && (this.arg = void 0), c;
        } }, t2;
      }(t.exports);
      try {
        regeneratorRuntime = o;
      } catch (t2) {
        Function("r", "regeneratorRuntime = r")(o);
      }
    }, function(t, e, n) {
      var o = n(146);
      t.exports = function(t2, e2) {
        if (t2) {
          if (typeof t2 == "string")
            return o(t2, e2);
          var n2 = Object.prototype.toString.call(t2).slice(8, -1);
          return n2 === "Object" && t2.constructor && (n2 = t2.constructor.name), n2 === "Map" || n2 === "Set" ? Array.from(n2) : n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2) ? o(t2, e2) : void 0;
        }
      };
    }, function(t, e) {
      t.exports = function(t2, e2) {
        (e2 == null || e2 > t2.length) && (e2 = t2.length);
        for (var n = 0, o = new Array(e2); n < e2; n++)
          o[n] = t2[n];
        return o;
      };
    }, function(t) {
      t.exports = JSON.parse('{"ui":{"blockTunes":{"toggler":{"Click to tune":"","or drag to move":""}},"inlineToolbar":{"converter":{"Convert to":""}},"toolbar":{"toolbox":{"Add":""}}},"toolNames":{"Text":"","Link":"","Bold":"","Italic":""},"tools":{"link":{"Add a link":""},"stub":{"The block can not be displayed correctly.":""}},"blockTunes":{"delete":{"Delete":""},"moveUp":{"Move up":""},"moveDown":{"Move down":""}}}');
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(5), n(6), n(4), n(150)], (i = typeof (o = function(t2, e2, o2, r2, i2, a) {
        var s = n(1);
        function l() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t3) {
            return false;
          }
        }
        Object.defineProperty(t2, "__esModule", { value: true }), t2.CriticalError = void 0, e2 = s(e2), o2 = s(o2), r2 = s(r2), i2 = s(i2);
        var c = function(t3) {
          (0, o2.default)(s2, t3);
          var n2, a2 = (n2 = s2, function() {
            var t4, e3 = (0, i2.default)(n2);
            if (l()) {
              var o3 = (0, i2.default)(this).constructor;
              t4 = Reflect.construct(e3, arguments, o3);
            } else
              t4 = e3.apply(this, arguments);
            return (0, r2.default)(this, t4);
          });
          function s2() {
            return (0, e2.default)(this, s2), a2.apply(this, arguments);
          }
          return s2;
        }((0, (a = s(a)).default)(Error));
        t2.CriticalError = c, c.displayName = "CriticalError";
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e) {
      t.exports = function(t2) {
        if (t2 === void 0)
          throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t2;
      };
    }, function(t, e, n) {
      var o = n(4), r = n(110), i = n(371), a = n(372);
      function s(e2) {
        var n2 = typeof Map == "function" ? new Map() : void 0;
        return t.exports = s = function(t2) {
          if (t2 === null || !i(t2))
            return t2;
          if (typeof t2 != "function")
            throw new TypeError("Super expression must either be null or a function");
          if (n2 !== void 0) {
            if (n2.has(t2))
              return n2.get(t2);
            n2.set(t2, e3);
          }
          function e3() {
            return a(t2, arguments, o(this).constructor);
          }
          return e3.prototype = Object.create(t2.prototype, { constructor: { value: e3, enumerable: false, writable: true, configurable: true } }), r(e3, t2);
        }, s(e2);
      }
      t.exports = s;
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(7)], (i = typeof (o = function(o2, r2, i2, a) {
        var s = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = s(r2), i2 = s(i2);
        var l = function() {
          function t2() {
            (0, r2.default)(this, t2), this.subscribers = {};
          }
          return (0, i2.default)(t2, [{ key: "on", value: function(t3, e2) {
            t3 in this.subscribers || (this.subscribers[t3] = []), this.subscribers[t3].push(e2);
          } }, { key: "once", value: function(t3, e2) {
            var n2 = this;
            t3 in this.subscribers || (this.subscribers[t3] = []), this.subscribers[t3].push(function o3(r3) {
              var i3 = e2(r3), a2 = n2.subscribers[t3].indexOf(o3);
              return a2 !== -1 && n2.subscribers[t3].splice(a2, 1), i3;
            });
          } }, { key: "emit", value: function(t3, e2) {
            !(0, a.isEmpty)(this.subscribers) && this.subscribers[t3] && this.subscribers[t3].reduce(function(t4, e3) {
              return e3(t4) || t4;
            }, e2);
          } }, { key: "off", value: function(t3, e2) {
            for (var n2 = 0; n2 < this.subscribers[t3].length; n2++)
              if (this.subscribers[t3][n2] === e2) {
                delete this.subscribers[t3][n2];
                break;
              }
          } }, { key: "destroy", value: function() {
            this.subscribers = null;
          } }]), t2;
        }();
        o2.default = l, l.displayName = "EventsDispatcher", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(7), n(111), n(9)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f) {
        var d = n(8), p = n(1);
        function h() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = p(r2), i2 = p(i2), a = p(a), s = p(s), l = p(l), c = d(c), u = p(u);
        var v = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (h()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            var t3;
            return (0, r2.default)(this, o3), (t3 = n2.apply(this, arguments)).insert = function() {
              var e3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : t3.config.defaultBlock, n3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, o4 = arguments.length > 3 ? arguments[3] : void 0, r3 = arguments.length > 4 ? arguments[4] : void 0;
              t3.Editor.BlockManager.insert({ tool: e3, data: n3, index: o4, needToFocus: r3 });
            }, t3.update = function(e3, n3) {
              var o4 = t3.Editor.BlockManager, r3 = o4.getBlockById(e3);
              if (r3) {
                var i3 = o4.getBlockIndex(r3);
                o4.insert({ id: r3.id, tool: r3.name, data: n3, index: i3, replace: true, tunes: r3.tunes });
              } else
                c.log("blocks.update(): Block with passed id was not found", "warn");
            }, t3;
          }
          return (0, i2.default)(o3, [{ key: "getBlocksCount", value: function() {
            return this.Editor.BlockManager.blocks.length;
          } }, { key: "getCurrentBlockIndex", value: function() {
            return this.Editor.BlockManager.currentBlockIndex;
          } }, { key: "getBlockByIndex", value: function(t3) {
            var e3 = this.Editor.BlockManager.getBlockByIndex(t3);
            if (e3 !== void 0)
              return new u.default(e3);
            c.logLabeled("There is no block at index `" + t3 + "`", "warn");
          } }, { key: "getById", value: function(t3) {
            var e3 = this.Editor.BlockManager.getBlockById(t3);
            return e3 === void 0 ? (c.logLabeled("There is no block with id `" + t3 + "`", "warn"), null) : new u.default(e3);
          } }, { key: "swap", value: function(t3, e3) {
            c.log("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead", "info"), this.Editor.BlockManager.swap(t3, e3), this.Editor.Toolbar.move(false);
          } }, { key: "move", value: function(t3, e3) {
            this.Editor.BlockManager.move(t3, e3), this.Editor.Toolbar.move(false);
          } }, { key: "delete", value: function(t3) {
            try {
              this.Editor.BlockManager.removeBlock(t3);
            } catch (t4) {
              return void c.logLabeled(t4, "warn");
            }
            this.Editor.BlockManager.blocks.length === 0 && this.Editor.BlockManager.insert(), this.Editor.BlockManager.currentBlock && this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock, this.Editor.Caret.positions.END), this.Editor.Toolbar.close();
          } }, { key: "clear", value: function() {
            this.Editor.BlockManager.clear(true), this.Editor.InlineToolbar.close();
          } }, { key: "render", value: function(t3) {
            return this.Editor.BlockManager.clear(), this.Editor.Renderer.render(t3.blocks);
          } }, { key: "renderFromHTML", value: function(t3) {
            return this.Editor.BlockManager.clear(), this.Editor.Paste.processText(t3, true);
          } }, { key: "stretchBlock", value: function(t3) {
            var e3 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
            c.deprecationAssert(true, "blocks.stretchBlock()", "BlockAPI");
            var n3 = this.Editor.BlockManager.getBlockByIndex(t3);
            n3 && (n3.stretched = e3);
          } }, { key: "insertNewBlock", value: function() {
            c.log("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.", "warn"), this.insert();
          } }, { key: "methods", get: function() {
            var t3 = this;
            return { clear: function() {
              return t3.clear();
            }, render: function(e3) {
              return t3.render(e3);
            }, renderFromHTML: function(e3) {
              return t3.renderFromHTML(e3);
            }, delete: function(e3) {
              return t3.delete(e3);
            }, swap: function(e3, n3) {
              return t3.swap(e3, n3);
            }, move: function(e3, n3) {
              return t3.move(e3, n3);
            }, getBlockByIndex: function(e3) {
              return t3.getBlockByIndex(e3);
            }, getById: function(e3) {
              return t3.getById(e3);
            }, getCurrentBlockIndex: function() {
              return t3.getCurrentBlockIndex();
            }, getBlocksCount: function() {
              return t3.getBlocksCount();
            }, stretchBlock: function(e3) {
              var n3 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
              return t3.stretchBlock(e3, n3);
            }, insertNewBlock: function() {
              return t3.insertNewBlock();
            }, insert: this.insert, update: this.update };
          } }]), o3;
        }((f = p(f)).default);
        o2.default = v, v.displayName = "BlocksAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9)], (i = typeof (o = function(o2, r2, i2, a, s, l, c) {
        var u = n(1);
        function f() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = u(r2), i2 = u(i2), a = u(a), s = u(s), l = u(l);
        var d = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (f()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            var t3;
            return (0, r2.default)(this, o3), (t3 = n2.apply(this, arguments)).setToFirstBlock = function() {
              var e3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : t3.Editor.Caret.positions.DEFAULT, n3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
              return !!t3.Editor.BlockManager.firstBlock && (t3.Editor.Caret.setToBlock(t3.Editor.BlockManager.firstBlock, e3, n3), true);
            }, t3.setToLastBlock = function() {
              var e3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : t3.Editor.Caret.positions.DEFAULT, n3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
              return !!t3.Editor.BlockManager.lastBlock && (t3.Editor.Caret.setToBlock(t3.Editor.BlockManager.lastBlock, e3, n3), true);
            }, t3.setToPreviousBlock = function() {
              var e3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : t3.Editor.Caret.positions.DEFAULT, n3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
              return !!t3.Editor.BlockManager.previousBlock && (t3.Editor.Caret.setToBlock(t3.Editor.BlockManager.previousBlock, e3, n3), true);
            }, t3.setToNextBlock = function() {
              var e3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : t3.Editor.Caret.positions.DEFAULT, n3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
              return !!t3.Editor.BlockManager.nextBlock && (t3.Editor.Caret.setToBlock(t3.Editor.BlockManager.nextBlock, e3, n3), true);
            }, t3.setToBlock = function(e3) {
              var n3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : t3.Editor.Caret.positions.DEFAULT, o4 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0;
              return !!t3.Editor.BlockManager.blocks[e3] && (t3.Editor.Caret.setToBlock(t3.Editor.BlockManager.blocks[e3], n3, o4), true);
            }, t3.focus = function() {
              var e3 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
              return e3 ? t3.setToLastBlock(t3.Editor.Caret.positions.END) : t3.setToFirstBlock(t3.Editor.Caret.positions.START);
            }, t3;
          }
          return (0, i2.default)(o3, [{ key: "methods", get: function() {
            return { setToFirstBlock: this.setToFirstBlock, setToLastBlock: this.setToLastBlock, setToPreviousBlock: this.setToPreviousBlock, setToNextBlock: this.setToNextBlock, setToBlock: this.setToBlock, focus: this.focus };
          } }]), o3;
        }((c = u(c)).default);
        o2.default = d, d.displayName = "CaretAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9)], (i = typeof (o = function(o2, r2, i2, a, s, l, c) {
        var u = n(1);
        function f() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = u(r2), i2 = u(i2), a = u(a), s = u(s), l = u(l);
        var d = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (f()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            return (0, r2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, i2.default)(o3, [{ key: "on", value: function(t3, e3) {
            this.eventsDispatcher.on(t3, e3);
          } }, { key: "emit", value: function(t3, e3) {
            this.eventsDispatcher.emit(t3, e3);
          } }, { key: "off", value: function(t3, e3) {
            this.eventsDispatcher.off(t3, e3);
          } }, { key: "methods", get: function() {
            var t3 = this;
            return { emit: function(e3, n3) {
              return t3.emit(e3, n3);
            }, off: function(e3, n3) {
              return t3.off(e3, n3);
            }, on: function(e3, n3) {
              return t3.on(e3, n3);
            } };
          } }]), o3;
        }((c = u(c)).default);
        o2.default = d, d.displayName = "EventsAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(59), n(7), n(9)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f) {
        var d = n(1);
        function p() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = d(r2), i2 = d(i2), a = d(a), s = d(s), l = d(l), c = d(c);
        var h = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (p()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            return (0, r2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, i2.default)(o3, [{ key: "getMethodsForTool", value: function(t3) {
            return Object.assign(this.methods, { t: function(e3) {
              return c.default.t(o3.getNamespace(t3), e3);
            } });
          } }, { key: "methods", get: function() {
            return { t: function() {
              (0, u.logLabeled)("I18n.t() method can be accessed only from Tools", "warn");
            } };
          } }], [{ key: "getNamespace", value: function(t3) {
            return t3.isTune() ? "blockTunes.".concat(t3.name) : "tools.".concat(t3.name);
          } }]), o3;
        }((f = d(f)).default);
        o2.default = h, h.displayName = "I18nAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9)], (i = typeof (o = function(o2, r2, i2, a, s, l, c) {
        var u = n(1);
        function f() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = u(r2), i2 = u(i2), a = u(a), s = u(s), l = u(l);
        var d = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (f()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            return (0, r2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, i2.default)(o3, [{ key: "open", value: function() {
            this.Editor.InlineToolbar.tryToShow();
          } }, { key: "close", value: function() {
            this.Editor.InlineToolbar.close();
          } }, { key: "methods", get: function() {
            var t3 = this;
            return { close: function() {
              return t3.close();
            }, open: function() {
              return t3.open();
            } };
          } }]), o3;
        }((c = u(c)).default);
        o2.default = d, d.displayName = "InlineToolbarAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9)], (i = typeof (o = function(o2, r2, i2, a, s, l, c) {
        var u = n(1);
        function f() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = u(r2), i2 = u(i2), a = u(a), s = u(s), l = u(l);
        var d = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (f()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            return (0, r2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, i2.default)(o3, [{ key: "on", value: function(t3, e3, n3, o4) {
            this.listeners.on(t3, e3, n3, o4);
          } }, { key: "off", value: function(t3, e3, n3, o4) {
            this.listeners.off(t3, e3, n3, o4);
          } }, { key: "methods", get: function() {
            var t3 = this;
            return { on: function(e3, n3, o4, r3) {
              return t3.on(e3, n3, o4, r3);
            }, off: function(e3, n3, o4, r3) {
              return t3.off(e3, n3, o4, r3);
            } };
          } }]), o3;
        }((c = u(c)).default);
        o2.default = d, d.displayName = "ListenersAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(376), n(9)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u) {
        var f = n(1);
        function d() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = f(r2), i2 = f(i2), a = f(a), s = f(s), l = f(l), c = f(c);
        var p = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (d()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3(t3) {
            var e3, i3 = t3.config, a2 = t3.eventsDispatcher;
            return (0, r2.default)(this, o3), (e3 = n2.call(this, { config: i3, eventsDispatcher: a2 })).notifier = new c.default(), e3;
          }
          return (0, i2.default)(o3, [{ key: "show", value: function(t3) {
            return this.notifier.show(t3);
          } }, { key: "methods", get: function() {
            var t3 = this;
            return { show: function(e3) {
              return t3.show(e3);
            } };
          } }]), o3;
        }((u = f(u)).default);
        o2.default = p, p.displayName = "NotifierAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9)], (i = typeof (o = function(o2, r2, i2, a, s, l, c) {
        var u = n(1);
        function f() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = u(r2), i2 = u(i2), a = u(a), s = u(s), l = u(l);
        var d = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (f()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            return (0, r2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, i2.default)(o3, [{ key: "toggle", value: function(t3) {
            return this.Editor.ReadOnly.toggle(t3);
          } }, { key: "methods", get: function() {
            var t3 = this;
            return { toggle: function(e3) {
              return t3.toggle(e3);
            }, isEnabled: this.isEnabled };
          } }, { key: "isEnabled", get: function() {
            return this.Editor.ReadOnly.isEnabled;
          } }]), o3;
        }((c = u(c)).default);
        o2.default = d, d.displayName = "ReadOnlyAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9), n(65)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u) {
        var f = n(1);
        function d() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = f(r2), i2 = f(i2), a = f(a), s = f(s), l = f(l);
        var p = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (d()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            return (0, r2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, i2.default)(o3, [{ key: "clean", value: function(t3, e3) {
            return (0, u.clean)(t3, e3);
          } }, { key: "methods", get: function() {
            var t3 = this;
            return { clean: function(e3, n3) {
              return t3.clean(e3, n3);
            } };
          } }]), o3;
        }((c = f(c)).default);
        o2.default = p, p.displayName = "SanitizerAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(7), n(9)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u) {
        var f = n(8), d = n(1);
        function p() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = d(r2), i2 = d(i2), a = d(a), s = d(s), l = d(l), c = f(c);
        var h = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (p()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            return (0, r2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, i2.default)(o3, [{ key: "save", value: function() {
            var t3 = "Editor's content can not be saved in read-only mode";
            return this.Editor.ReadOnly.isEnabled ? (c.logLabeled(t3, "warn"), Promise.reject(new Error(t3))) : this.Editor.Saver.save();
          } }, { key: "methods", get: function() {
            var t3 = this;
            return { save: function() {
              return t3.save();
            } };
          } }]), o3;
        }((u = d(u)).default);
        o2.default = h, h.displayName = "SaverAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(25), n(9)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u) {
        var f = n(1);
        function d() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = f(r2), i2 = f(i2), a = f(a), s = f(s), l = f(l), c = f(c);
        var p = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (d()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            return (0, r2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, i2.default)(o3, [{ key: "findParentTag", value: function(t3, e3) {
            return new c.default().findParentTag(t3, e3);
          } }, { key: "expandToTag", value: function(t3) {
            new c.default().expandToTag(t3);
          } }, { key: "methods", get: function() {
            var t3 = this;
            return { findParentTag: function(e3, n3) {
              return t3.findParentTag(e3, n3);
            }, expandToTag: function(e3) {
              return t3.expandToTag(e3);
            } };
          } }]), o3;
        }((u = f(u)).default);
        o2.default = p, p.displayName = "SelectionAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9)], (i = typeof (o = function(o2, r2, i2, a, s, l, c) {
        var u = n(1);
        function f() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = u(r2), i2 = u(i2), a = u(a), s = u(s), l = u(l);
        var d = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (f()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            return (0, r2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, i2.default)(o3, [{ key: "classes", get: function() {
            return { block: "cdx-block", inlineToolButton: "ce-inline-tool", inlineToolButtonActive: "ce-inline-tool--active", input: "cdx-input", loader: "cdx-loader", button: "cdx-button", settingsButton: "cdx-settings-button", settingsButtonActive: "cdx-settings-button--active" };
          } }]), o3;
        }((c = u(c)).default);
        o2.default = d, d.displayName = "StylesAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9), n(7)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u) {
        var f = n(8), d = n(1);
        function p() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = d(r2), i2 = d(i2), a = d(a), s = d(s), l = d(l), c = d(c), u = f(u);
        var h = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (p()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            return (0, r2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, i2.default)(o3, [{ key: "open", value: function() {
            this.Editor.Toolbar.open();
          } }, { key: "close", value: function() {
            this.Editor.Toolbar.close();
          } }, { key: "toggleBlockSettings", value: function(t3) {
            if (this.Editor.BlockManager.currentBlockIndex !== -1) {
              var e3 = t3 != null ? t3 : !this.Editor.BlockSettings.opened;
              t3 !== this.Editor.BlockSettings.opened && (e3 ? (this.Editor.Toolbar.opened || (this.Editor.Toolbar.open(true, false), this.Editor.Toolbar.plusButton.hide()), this.Editor.BlockSettings.open()) : this.Editor.BlockSettings.close());
            } else
              u.logLabeled("Could't toggle the Toolbar because there is no block selected ", "warn");
          } }, { key: "methods", get: function() {
            var t3 = this;
            return { close: function() {
              return t3.close();
            }, open: function() {
              return t3.open();
            }, toggleBlockSettings: function(e3) {
              return t3.toggleBlockSettings(e3);
            } };
          } }]), o3;
        }(c.default);
        o2.default = h, h.displayName = "ToolbarAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9), n(82)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u) {
        var f = n(1);
        function d() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = f(r2), i2 = f(i2), a = f(a), s = f(s), l = f(l), c = f(c), u = f(u);
        var p = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (d()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3(t3) {
            var e3, i3 = t3.config, a2 = t3.eventsDispatcher;
            return (0, r2.default)(this, o3), (e3 = n2.call(this, { config: i3, eventsDispatcher: a2 })).tooltip = new u.default(), e3;
          }
          return (0, i2.default)(o3, [{ key: "destroy", value: function() {
            this.tooltip.destroy();
          } }, { key: "show", value: function(t3, e3, n3) {
            this.tooltip.show(t3, e3, n3);
          } }, { key: "hide", value: function() {
            this.tooltip.hide();
          } }, { key: "onHover", value: function(t3, e3, n3) {
            this.tooltip.onHover(t3, e3, n3);
          } }, { key: "methods", get: function() {
            var t3 = this;
            return { show: function(e3, n3, o4) {
              return t3.show(e3, n3, o4);
            }, hide: function() {
              return t3.hide();
            }, onHover: function(e3, n3, o4) {
              return t3.onHover(e3, n3, o4);
            } };
          } }]), o3;
        }(c.default);
        o2.default = p, p.displayName = "TooltipAPI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9), n(7), n(25), n(60)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d) {
        var p = n(8), h = n(1);
        function v() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = h(r2), i2 = h(i2), a = h(a), s = h(s), l = h(l), c = h(c), u = p(u), f = h(f), d = h(d);
        var g = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (v()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            return (0, r2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, i2.default)(o3, [{ key: "keydown", value: function(t3) {
            switch (this.beforeKeydownProcessing(t3), t3.keyCode) {
              case u.keyCodes.BACKSPACE:
                this.backspace(t3);
                break;
              case u.keyCodes.ENTER:
                this.enter(t3);
                break;
              case u.keyCodes.DOWN:
              case u.keyCodes.RIGHT:
                this.arrowRightAndDown(t3);
                break;
              case u.keyCodes.UP:
              case u.keyCodes.LEFT:
                this.arrowLeftAndUp(t3);
                break;
              case u.keyCodes.TAB:
                this.tabPressed(t3);
            }
          } }, { key: "beforeKeydownProcessing", value: function(t3) {
            this.needToolbarClosing(t3) && u.isPrintableKey(t3.keyCode) && (this.Editor.Toolbar.close(), this.Editor.ConversionToolbar.close(), t3.ctrlKey || t3.metaKey || t3.altKey || t3.shiftKey || (this.Editor.BlockManager.clearFocused(), this.Editor.BlockSelection.clearSelection(t3)));
          } }, { key: "keyup", value: function(t3) {
            t3.shiftKey || this.Editor.UI.checkEmptiness();
          } }, { key: "tabPressed", value: function(t3) {
            this.Editor.BlockSelection.clearSelection(t3);
            var e3 = this.Editor, n3 = e3.BlockManager, o4 = e3.InlineToolbar, r3 = e3.ConversionToolbar, i3 = n3.currentBlock;
            if (i3) {
              var a2 = i3.tool.isDefault && i3.isEmpty, s2 = !i3.isEmpty && r3.opened, l2 = !i3.isEmpty && !f.default.isCollapsed && o4.opened;
              a2 ? this.activateToolbox() : s2 || l2 || this.activateBlockSettings();
            }
          } }, { key: "dragOver", value: function(t3) {
            this.Editor.BlockManager.getBlockByChildNode(t3.target).dropTarget = true;
          } }, { key: "dragLeave", value: function(t3) {
            this.Editor.BlockManager.getBlockByChildNode(t3.target).dropTarget = false;
          } }, { key: "handleCommandC", value: function(t3) {
            var e3 = this.Editor.BlockSelection;
            e3.anyBlockSelected && e3.copySelectedBlocks(t3);
          } }, { key: "handleCommandX", value: function(t3) {
            var e3 = this.Editor, n3 = e3.BlockSelection, o4 = e3.BlockManager, r3 = e3.Caret;
            n3.anyBlockSelected && n3.copySelectedBlocks(t3).then(function() {
              var e4 = o4.removeSelectedBlocks(), i3 = o4.insertDefaultBlockAtIndex(e4, true);
              r3.setToBlock(i3, r3.positions.START), n3.clearSelection(t3);
            });
          } }, { key: "enter", value: function(t3) {
            var e3 = this.Editor, n3 = e3.BlockManager, o4 = e3.UI;
            if (!n3.currentBlock.tool.isLineBreaksEnabled && !(o4.someToolbarOpened && o4.someFlipperButtonFocused || t3.shiftKey)) {
              var r3 = this.Editor.BlockManager.currentBlock;
              this.Editor.Caret.isAtStart && !this.Editor.BlockManager.currentBlock.hasMedia ? this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex) : r3 = this.Editor.BlockManager.split(), this.Editor.Caret.setToBlock(r3), r3.tool.isDefault && r3.isEmpty && (this.Editor.Toolbar.open(false), this.Editor.Toolbar.plusButton.show()), t3.preventDefault();
            }
          } }, { key: "backspace", value: function(t3) {
            var e3 = this.Editor, n3 = e3.BlockManager, o4 = e3.BlockSelection, r3 = e3.Caret, i3 = n3.currentBlock, a2 = i3.tool;
            if (i3.selected || i3.isEmpty && i3.currentInput === i3.firstInput) {
              t3.preventDefault();
              var s2 = n3.currentBlockIndex;
              return n3.previousBlock && n3.previousBlock.inputs.length === 0 ? n3.removeBlock(s2 - 1) : n3.removeBlock(), r3.setToBlock(n3.currentBlock, s2 ? r3.positions.END : r3.positions.START), this.Editor.Toolbar.close(), void o4.clearSelection(t3);
            }
            if (!a2.isLineBreaksEnabled || r3.isAtStart) {
              var l2 = n3.currentBlockIndex === 0;
              r3.isAtStart && f.default.isCollapsed && i3.currentInput === i3.firstInput && !l2 && (t3.preventDefault(), this.mergeBlocks());
            }
          } }, { key: "mergeBlocks", value: function() {
            var t3 = this.Editor, e3 = t3.BlockManager, n3 = t3.Caret, o4 = t3.Toolbar, r3 = e3.previousBlock, i3 = e3.currentBlock;
            if (i3.name !== r3.name || !r3.mergeable)
              return r3.inputs.length === 0 || r3.isEmpty ? (e3.removeBlock(e3.currentBlockIndex - 1), n3.setToBlock(e3.currentBlock), void o4.close()) : void (n3.navigatePrevious() && o4.close());
            n3.createShadow(r3.pluginsContent), e3.mergeBlocks(r3, i3).then(function() {
              n3.restoreCaret(r3.pluginsContent), r3.pluginsContent.normalize(), o4.close();
            });
          } }, { key: "arrowRightAndDown", value: function(t3) {
            var e3 = this, n3 = d.default.usedKeys.includes(t3.keyCode) && (!t3.shiftKey || t3.keyCode === u.keyCodes.TAB);
            if (!this.Editor.UI.someToolbarOpened || !n3) {
              this.Editor.BlockManager.clearFocused(), this.Editor.Toolbar.close();
              var o4 = this.Editor.Caret.isAtEnd || this.Editor.BlockSelection.anyBlockSelected;
              t3.shiftKey && t3.keyCode === u.keyCodes.DOWN && o4 ? this.Editor.CrossBlockSelection.toggleBlockSelectedState() : ((t3.keyCode === u.keyCodes.DOWN || t3.keyCode === u.keyCodes.RIGHT && !this.isRtl ? this.Editor.Caret.navigateNext() : this.Editor.Caret.navigatePrevious()) ? t3.preventDefault() : u.delay(function() {
                e3.Editor.BlockManager.currentBlock && e3.Editor.BlockManager.currentBlock.updateCurrentInput();
              }, 20)(), this.Editor.BlockSelection.clearSelection(t3));
            }
          } }, { key: "arrowLeftAndUp", value: function(t3) {
            var e3 = this;
            if (this.Editor.UI.someToolbarOpened) {
              if (d.default.usedKeys.includes(t3.keyCode) && (!t3.shiftKey || t3.keyCode === u.keyCodes.TAB))
                return;
              this.Editor.UI.closeAllToolbars();
            }
            this.Editor.BlockManager.clearFocused(), this.Editor.Toolbar.close();
            var n3 = this.Editor.Caret.isAtStart || this.Editor.BlockSelection.anyBlockSelected;
            t3.shiftKey && t3.keyCode === u.keyCodes.UP && n3 ? this.Editor.CrossBlockSelection.toggleBlockSelectedState(false) : ((t3.keyCode === u.keyCodes.UP || t3.keyCode === u.keyCodes.LEFT && !this.isRtl ? this.Editor.Caret.navigatePrevious() : this.Editor.Caret.navigateNext()) ? t3.preventDefault() : u.delay(function() {
              e3.Editor.BlockManager.currentBlock && e3.Editor.BlockManager.currentBlock.updateCurrentInput();
            }, 20)(), this.Editor.BlockSelection.clearSelection(t3));
          } }, { key: "needToolbarClosing", value: function(t3) {
            var e3 = t3.keyCode === u.keyCodes.ENTER && this.Editor.Toolbox.opened, n3 = t3.keyCode === u.keyCodes.ENTER && this.Editor.BlockSettings.opened, o4 = t3.keyCode === u.keyCodes.ENTER && this.Editor.InlineToolbar.opened, r3 = t3.keyCode === u.keyCodes.ENTER && this.Editor.ConversionToolbar.opened, i3 = t3.keyCode === u.keyCodes.TAB;
            return !(t3.shiftKey || i3 || e3 || n3 || o4 || r3);
          } }, { key: "activateToolbox", value: function() {
            this.Editor.Toolbar.opened || (this.Editor.Toolbar.open(false, false), this.Editor.Toolbar.plusButton.show()), this.Editor.Toolbox.open();
          } }, { key: "activateBlockSettings", value: function() {
            this.Editor.Toolbar.opened || (this.Editor.BlockManager.currentBlock.focused = true, this.Editor.Toolbar.open(true, false), this.Editor.Toolbar.plusButton.hide()), this.Editor.BlockSettings.opened || this.Editor.BlockSettings.open();
          } }]), o3;
        }(c.default);
        o2.default = g, g.displayName = "BlockEvents", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(23), n(24), n(2), n(3), n(5), n(6), n(4), n(66), n(9), n(15), n(7), n(382), n(111)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p, h, v, g) {
        var y = n(8), b = n(1);
        function m() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = b(r2), i2 = b(i2), a = b(a), s = b(s), l = b(l), c = b(c), u = b(u), f = y(f), d = b(d), p = b(p), h = y(h), v = b(v), g = b(g);
        var k = function(t2) {
          (0, l.default)(y2, t2);
          var e2, n2, o3, d2 = (e2 = y2, function() {
            var t3, n3 = (0, u.default)(e2);
            if (m()) {
              var o4 = (0, u.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, c.default)(this, t3);
          });
          function y2() {
            var t3;
            return (0, a.default)(this, y2), (t3 = d2.apply(this, arguments))._currentBlockIndex = -1, t3._blocks = null, t3;
          }
          return (0, s.default)(y2, [{ key: "prepare", value: function() {
            var t3 = this, e3 = new v.default(this.Editor.UI.nodes.redactor);
            this._blocks = new Proxy(e3, { set: v.default.set, get: v.default.get }), this.listeners.on(document, "copy", function(e4) {
              return t3.Editor.BlockEvents.handleCommandC(e4);
            });
          } }, { key: "toggleReadOnly", value: function(t3) {
            t3 ? this.disableModuleBindings() : this.enableModuleBindings();
          } }, { key: "composeBlock", value: function(t3) {
            var e3 = t3.tool, n3 = t3.data, o4 = n3 === void 0 ? {} : n3, r3 = t3.id, i3 = r3 === void 0 ? void 0 : r3, a2 = t3.tunes, s2 = a2 === void 0 ? {} : a2, l2 = this.Editor.ReadOnly.isEnabled, c2 = this.Editor.Tools.blockTools.get(e3), u2 = new f.default({ id: i3, data: o4, tool: c2, api: this.Editor.API, readOnly: l2, tunesData: s2 });
            return l2 || this.bindBlockEvents(u2), u2;
          } }, { key: "insert", value: function() {
            var t3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, e3 = t3.id, n3 = e3 === void 0 ? void 0 : e3, o4 = t3.tool, r3 = o4 === void 0 ? this.config.defaultBlock : o4, i3 = t3.data, a2 = i3 === void 0 ? {} : i3, s2 = t3.index, l2 = t3.needToFocus, c2 = l2 === void 0 || l2, u2 = t3.replace, f2 = u2 !== void 0 && u2, d3 = t3.tunes, p2 = d3 === void 0 ? {} : d3, h2 = s2;
            h2 === void 0 && (h2 = this.currentBlockIndex + (f2 ? 0 : 1));
            var v2 = this.composeBlock({ id: n3, tool: r3, data: a2, tunes: p2 });
            return this._blocks.insert(h2, v2, f2), this.blockDidMutated(v2), c2 ? this.currentBlockIndex = h2 : h2 <= this.currentBlockIndex && this.currentBlockIndex++, v2;
          } }, { key: "replace", value: function(t3) {
            var e3 = t3.tool, n3 = e3 === void 0 ? this.config.defaultBlock : e3, o4 = t3.data, r3 = o4 === void 0 ? {} : o4;
            return this.insert({ tool: n3, data: r3, index: this.currentBlockIndex, replace: true });
          } }, { key: "paste", value: function(t3, e3) {
            var n3 = arguments.length > 2 && arguments[2] !== void 0 && arguments[2], o4 = this.insert({ tool: t3, replace: n3 });
            try {
              o4.call(f.BlockToolAPI.ON_PASTE, e3);
            } catch (e4) {
              h.log("".concat(t3, ": onPaste callback call is failed"), "error", e4);
            }
            return o4;
          } }, { key: "insertDefaultBlockAtIndex", value: function(t3) {
            var e3 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], n3 = this.composeBlock({ tool: this.config.defaultBlock });
            return this._blocks[t3] = n3, this.blockDidMutated(n3), e3 ? this.currentBlockIndex = t3 : t3 <= this.currentBlockIndex && this.currentBlockIndex++, n3;
          } }, { key: "insertAtEnd", value: function() {
            return this.currentBlockIndex = this.blocks.length - 1, this.insert();
          } }, { key: "mergeBlocks", value: (o3 = (0, i2.default)(r2.default.mark(function t3(e3, n3) {
            var o4, i3;
            return r2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    if (o4 = this._blocks.indexOf(n3), !n3.isEmpty) {
                      t4.next = 3;
                      break;
                    }
                    return t4.abrupt("return");
                  case 3:
                    return t4.next = 5, n3.data;
                  case 5:
                    if (i3 = t4.sent, h.isEmpty(i3)) {
                      t4.next = 9;
                      break;
                    }
                    return t4.next = 9, e3.mergeWith(i3);
                  case 9:
                    this.removeBlock(o4), this.currentBlockIndex = this._blocks.indexOf(e3);
                  case 11:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function(t3, e3) {
            return o3.apply(this, arguments);
          }) }, { key: "removeBlock", value: function() {
            var t3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.currentBlockIndex;
            if (!this.validateIndex(t3))
              throw new Error("Can't find a Block to remove");
            var e3 = this._blocks[t3];
            e3.destroy(), this._blocks.remove(t3), this.blockDidMutated(e3), this.currentBlockIndex >= t3 && this.currentBlockIndex--, this.blocks.length ? t3 === 0 && (this.currentBlockIndex = 0) : (this.currentBlockIndex = -1, this.insert());
          } }, { key: "removeSelectedBlocks", value: function() {
            for (var t3, e3 = this.blocks.length - 1; e3 >= 0; e3--)
              this.blocks[e3].selected && (this.removeBlock(e3), t3 = e3);
            return t3;
          } }, { key: "removeAllBlocks", value: function() {
            for (var t3 = this.blocks.length - 1; t3 >= 0; t3--)
              this._blocks.remove(t3);
            this.currentBlockIndex = -1, this.insert(), this.currentBlock.firstInput.focus();
          } }, { key: "split", value: function() {
            var t3 = this.Editor.Caret.extractFragmentFromCaretPosition(), e3 = p.default.make("div");
            e3.appendChild(t3);
            var n3 = { text: p.default.isEmpty(e3) ? "" : e3.innerHTML };
            return this.insert({ data: n3 });
          } }, { key: "getBlockByIndex", value: function(t3) {
            return this._blocks[t3];
          } }, { key: "getBlockIndex", value: function(t3) {
            return this._blocks.indexOf(t3);
          } }, { key: "getBlockById", value: function(t3) {
            return this._blocks.array.find(function(e3) {
              return e3.id === t3;
            });
          } }, { key: "getBlock", value: function(t3) {
            p.default.isElement(t3) || (t3 = t3.parentNode);
            var e3 = this._blocks.nodes, n3 = t3.closest(".".concat(f.default.CSS.wrapper)), o4 = e3.indexOf(n3);
            if (o4 >= 0)
              return this._blocks[o4];
          } }, { key: "highlightCurrentNode", value: function() {
            this.clearFocused(), this.currentBlock.focused = true;
          } }, { key: "clearFocused", value: function() {
            this.blocks.forEach(function(t3) {
              t3.focused = false;
            });
          } }, { key: "setCurrentBlockByChildNode", value: function(t3) {
            p.default.isElement(t3) || (t3 = t3.parentNode);
            var e3 = t3.closest(".".concat(f.default.CSS.wrapper));
            if (e3) {
              var n3 = e3.closest(".".concat(this.Editor.UI.CSS.editorWrapper));
              if (n3 == null ? void 0 : n3.isEqualNode(this.Editor.UI.nodes.wrapper))
                return this.currentBlockIndex = this._blocks.nodes.indexOf(e3), this.currentBlock.updateCurrentInput(), this.currentBlock;
            }
          } }, { key: "getBlockByChildNode", value: function(t3) {
            p.default.isElement(t3) || (t3 = t3.parentNode);
            var e3 = t3.closest(".".concat(f.default.CSS.wrapper));
            return this.blocks.find(function(t4) {
              return t4.holder === e3;
            });
          } }, { key: "swap", value: function(t3, e3) {
            this._blocks.swap(t3, e3), this.currentBlockIndex = e3;
          } }, { key: "move", value: function(t3) {
            var e3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this.currentBlockIndex;
            isNaN(t3) || isNaN(e3) ? h.log("Warning during 'move' call: incorrect indices provided.", "warn") : this.validateIndex(t3) && this.validateIndex(e3) ? (this._blocks.move(t3, e3), this.currentBlockIndex = t3, this.blockDidMutated(this.currentBlock)) : h.log("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.", "warn");
          } }, { key: "dropPointer", value: function() {
            this.currentBlockIndex = -1, this.clearFocused();
          } }, { key: "clear", value: function() {
            var t3 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
            this._blocks.removeAll(), this.dropPointer(), t3 && this.insert(), this.Editor.UI.checkEmptiness();
          } }, { key: "destroy", value: (n2 = (0, i2.default)(r2.default.mark(function t3() {
            return r2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    return t4.next = 2, Promise.all(this.blocks.map(function(t5) {
                      return t5.destroy();
                    }));
                  case 2:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function() {
            return n2.apply(this, arguments);
          }) }, { key: "bindBlockEvents", value: function(t3) {
            var e3 = this, n3 = this.Editor.BlockEvents;
            this.readOnlyMutableListeners.on(t3.holder, "keydown", function(t4) {
              n3.keydown(t4);
            }), this.readOnlyMutableListeners.on(t3.holder, "keyup", function(t4) {
              n3.keyup(t4);
            }), this.readOnlyMutableListeners.on(t3.holder, "dragover", function(t4) {
              n3.dragOver(t4);
            }), this.readOnlyMutableListeners.on(t3.holder, "dragleave", function(t4) {
              n3.dragLeave(t4);
            }), t3.on("didMutated", function(t4) {
              return e3.blockDidMutated(t4);
            });
          } }, { key: "disableModuleBindings", value: function() {
            this.readOnlyMutableListeners.clearAll();
          } }, { key: "enableModuleBindings", value: function() {
            var t3 = this;
            this.readOnlyMutableListeners.on(document, "cut", function(e3) {
              return t3.Editor.BlockEvents.handleCommandX(e3);
            }), this.blocks.forEach(function(e3) {
              t3.bindBlockEvents(e3);
            });
          } }, { key: "validateIndex", value: function(t3) {
            return !(t3 < 0 || t3 >= this._blocks.length);
          } }, { key: "blockDidMutated", value: function(t3) {
            return this.Editor.ModificationsObserver.onChange(new g.default(t3)), t3;
          } }, { key: "currentBlockIndex", get: function() {
            return this._currentBlockIndex;
          }, set: function(t3) {
            this._blocks[this._currentBlockIndex] && this._blocks[this._currentBlockIndex].willUnselect(), this._blocks[t3] && this._blocks[t3].willSelect(), this._currentBlockIndex = t3;
          } }, { key: "firstBlock", get: function() {
            return this._blocks[0];
          } }, { key: "lastBlock", get: function() {
            return this._blocks[this._blocks.length - 1];
          } }, { key: "currentBlock", get: function() {
            return this._blocks[this.currentBlockIndex];
          } }, { key: "nextBlock", get: function() {
            return this.currentBlockIndex === this._blocks.length - 1 ? null : this._blocks[this.currentBlockIndex + 1];
          } }, { key: "nextContentfulBlock", get: function() {
            return this.blocks.slice(this.currentBlockIndex + 1).find(function(t3) {
              return !!t3.inputs.length;
            });
          } }, { key: "previousContentfulBlock", get: function() {
            return this.blocks.slice(0, this.currentBlockIndex).reverse().find(function(t3) {
              return !!t3.inputs.length;
            });
          } }, { key: "previousBlock", get: function() {
            return this.currentBlockIndex === 0 ? null : this._blocks[this.currentBlockIndex - 1];
          } }, { key: "blocks", get: function() {
            return this._blocks.array;
          } }, { key: "isEditorEmpty", get: function() {
            return this.blocks.every(function(t3) {
              return t3.isEmpty;
            });
          } }]), y2;
        }(d.default);
        o2.default = k, k.displayName = "BlockManager", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o = n(381);
      function r(e2, n2, i) {
        return typeof Reflect != "undefined" && Reflect.get ? t.exports = r = Reflect.get : t.exports = r = function(t2, e3, n3) {
          var r2 = o(t2, e3);
          if (r2) {
            var i2 = Object.getOwnPropertyDescriptor(r2, e3);
            return i2.get ? i2.get.call(n3) : i2.value;
          }
        }, r(e2, n2, i || e2);
      }
      t.exports = r;
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9), n(7), n(15), n(112), n(25), n(65)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p, h) {
        var v = n(8), g = n(1);
        function y() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = g(r2), i2 = g(i2), a = g(a), s = g(s), l = g(l), c = g(c), u = v(u), f = g(f), d = g(d), p = g(p);
        var b = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (y()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            var t3;
            return (0, r2.default)(this, o3), (t3 = n2.apply(this, arguments)).anyBlockSelectedCache = null, t3.needToSelectAll = false, t3.nativeInputSelected = false, t3.readyToBlockSelection = false, t3;
          }
          return (0, i2.default)(o3, [{ key: "prepare", value: function() {
            var t3 = this;
            this.selection = new p.default(), d.default.add({ name: "CMD+A", handler: function(e3) {
              var n3 = t3.Editor, o4 = n3.BlockManager;
              if (n3.ReadOnly.isEnabled)
                return e3.preventDefault(), void t3.selectAllBlocks();
              o4.currentBlock && t3.handleCommandA(e3);
            }, on: this.Editor.UI.nodes.redactor });
          } }, { key: "toggleReadOnly", value: function(t3) {
            p.default.get().removeAllRanges(), this.allBlocksSelected = false;
          } }, { key: "unSelectBlockByIndex", value: function(t3) {
            var e3 = this.Editor.BlockManager;
            (isNaN(t3) ? e3.currentBlock : e3.getBlockByIndex(t3)).selected = false, this.clearCache();
          } }, { key: "clearSelection", value: function(t3) {
            var e3 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], n3 = this.Editor, o4 = n3.BlockManager, r3 = n3.Caret, i3 = n3.RectangleSelection;
            this.needToSelectAll = false, this.nativeInputSelected = false, this.readyToBlockSelection = false;
            var a2 = t3 && t3 instanceof KeyboardEvent, s2 = a2 && u.isPrintableKey(t3.keyCode);
            if (this.anyBlockSelected && a2 && s2 && !p.default.isSelectionExists) {
              var l2 = o4.removeSelectedBlocks();
              o4.insertDefaultBlockAtIndex(l2, true), r3.setToBlock(o4.currentBlock), u.delay(function() {
                var e4 = t3.key;
                r3.insertContentAtCaretPosition(e4.length > 1 ? "" : e4);
              }, 20)();
            }
            this.Editor.CrossBlockSelection.clear(t3), this.anyBlockSelected && !i3.isRectActivated() ? (e3 && this.selection.restore(), this.allBlocksSelected = false) : this.Editor.RectangleSelection.clearSelection();
          } }, { key: "copySelectedBlocks", value: function(t3) {
            var e3 = this;
            t3.preventDefault();
            var n3 = f.default.make("div");
            this.selectedBlocks.forEach(function(t4) {
              var o5 = (0, h.clean)(t4.holder.innerHTML, e3.sanitizerConfig), r4 = f.default.make("p");
              r4.innerHTML = o5, n3.appendChild(r4);
            });
            var o4 = Array.from(n3.childNodes).map(function(t4) {
              return t4.textContent;
            }).join("\n\n"), r3 = n3.innerHTML;
            return t3.clipboardData.setData("text/plain", o4), t3.clipboardData.setData("text/html", r3), Promise.all(this.selectedBlocks.map(function(t4) {
              return t4.save();
            })).then(function(n4) {
              try {
                t3.clipboardData.setData(e3.Editor.Paste.MIME_TYPE, JSON.stringify(n4));
              } catch (t4) {
              }
            });
          } }, { key: "selectBlockByIndex", value: function(t3) {
            var e3, n3 = this.Editor.BlockManager;
            n3.clearFocused(), e3 = isNaN(t3) ? n3.currentBlock : n3.getBlockByIndex(t3), this.selection.save(), p.default.get().removeAllRanges(), e3.selected = true, this.clearCache(), this.Editor.InlineToolbar.close();
          } }, { key: "clearCache", value: function() {
            this.anyBlockSelectedCache = null;
          } }, { key: "destroy", value: function() {
            d.default.remove(this.Editor.UI.nodes.redactor, "CMD+A");
          } }, { key: "handleCommandA", value: function(t3) {
            if (this.Editor.RectangleSelection.clearSelection(), !f.default.isNativeInput(t3.target) || this.readyToBlockSelection) {
              var e3 = this.Editor.BlockManager.getBlock(t3.target).inputs;
              e3.length > 1 && !this.readyToBlockSelection ? this.readyToBlockSelection = true : e3.length !== 1 || this.needToSelectAll ? this.needToSelectAll ? (t3.preventDefault(), this.selectAllBlocks(), this.needToSelectAll = false, this.readyToBlockSelection = false, this.Editor.ConversionToolbar.close()) : this.readyToBlockSelection && (t3.preventDefault(), this.selectBlockByIndex(), this.needToSelectAll = true) : this.needToSelectAll = true;
            } else
              this.readyToBlockSelection = true;
          } }, { key: "selectAllBlocks", value: function() {
            this.selection.save(), p.default.get().removeAllRanges(), this.allBlocksSelected = true, this.Editor.InlineToolbar.close();
          } }, { key: "sanitizerConfig", get: function() {
            return { p: {}, h1: {}, h2: {}, h3: {}, h4: {}, h5: {}, h6: {}, ol: {}, ul: {}, li: {}, br: true, img: { src: true, width: true, height: true }, a: { href: true }, b: {}, i: {}, u: {} };
          } }, { key: "allBlocksSelected", get: function() {
            return this.Editor.BlockManager.blocks.every(function(t3) {
              return t3.selected === true;
            });
          }, set: function(t3) {
            this.Editor.BlockManager.blocks.forEach(function(e3) {
              e3.selected = t3;
            }), this.clearCache();
          } }, { key: "anyBlockSelected", get: function() {
            var t3 = this.Editor.BlockManager;
            return this.anyBlockSelectedCache === null && (this.anyBlockSelectedCache = t3.blocks.some(function(t4) {
              return t4.selected === true;
            })), this.anyBlockSelectedCache;
          } }, { key: "selectedBlocks", get: function() {
            return this.Editor.BlockManager.blocks.filter(function(t3) {
              return t3.selected;
            });
          } }]), o3;
        }(c.default);
        o2.default = b, b.displayName = "BlockSelection", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(25), n(9), n(15), n(7)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d) {
        var p = n(8), h = n(1);
        function v() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = h(r2), i2 = h(i2), a = h(a), s = h(s), l = h(l), c = h(c), u = h(u), f = h(f), d = p(d);
        var g = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (v()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            return (0, r2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, i2.default)(o3, [{ key: "setToBlock", value: function(t3) {
            var e3, n3 = this, o4 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this.positions.DEFAULT, r3 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0, i3 = this.Editor.BlockManager;
            switch (o4) {
              case this.positions.START:
                e3 = t3.firstInput;
                break;
              case this.positions.END:
                e3 = t3.lastInput;
                break;
              default:
                e3 = t3.currentInput;
            }
            if (e3) {
              var a2 = f.default.getDeepestNode(e3, o4 === this.positions.END), s2 = f.default.getContentLength(a2);
              switch (true) {
                case o4 === this.positions.START:
                  r3 = 0;
                  break;
                case o4 === this.positions.END:
                case r3 > s2:
                  r3 = s2;
              }
              d.delay(function() {
                n3.set(a2, r3);
              }, 20)(), i3.setCurrentBlockByChildNode(t3.holder), i3.currentBlock.currentInput = e3;
            }
          } }, { key: "setToInput", value: function(t3) {
            var e3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this.positions.DEFAULT, n3 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0, o4 = this.Editor.BlockManager.currentBlock, r3 = f.default.getDeepestNode(t3);
            switch (e3) {
              case this.positions.START:
                this.set(r3, 0);
                break;
              case this.positions.END:
                this.set(r3, f.default.getContentLength(r3));
                break;
              default:
                n3 && this.set(r3, n3);
            }
            o4.currentInput = t3;
          } }, { key: "set", value: function(t3) {
            var e3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, n3 = c.default.setCursor(t3, e3), o4 = n3.top, r3 = n3.bottom, i3 = window, a2 = i3.innerHeight;
            o4 < 0 && window.scrollBy(0, o4), r3 > a2 && window.scrollBy(0, r3 - a2);
          } }, { key: "setToTheLastBlock", value: function() {
            var t3 = this.Editor.BlockManager.lastBlock;
            if (t3)
              if (t3.tool.isDefault && t3.isEmpty)
                this.setToBlock(t3);
              else {
                var e3 = this.Editor.BlockManager.insertAtEnd();
                this.setToBlock(e3);
              }
          } }, { key: "extractFragmentFromCaretPosition", value: function() {
            var t3 = c.default.get();
            if (t3.rangeCount) {
              var e3 = t3.getRangeAt(0), n3 = this.Editor.BlockManager.currentBlock.currentInput;
              if (e3.deleteContents(), n3) {
                if (f.default.isNativeInput(n3)) {
                  var o4 = n3, r3 = document.createDocumentFragment(), i3 = o4.value.substring(0, o4.selectionStart), a2 = o4.value.substring(o4.selectionStart);
                  return r3.textContent = a2, o4.value = i3, r3;
                }
                var s2 = e3.cloneRange();
                return s2.selectNodeContents(n3), s2.setStart(e3.endContainer, e3.endOffset), s2.extractContents();
              }
            }
          } }, { key: "navigateNext", value: function() {
            var t3 = this.Editor.BlockManager, e3 = t3.currentBlock, n3 = t3.nextContentfulBlock, o4 = e3.nextInput, r3 = this.isAtEnd, i3 = n3;
            if (!i3 && !o4) {
              if (e3.tool.isDefault || !r3)
                return false;
              i3 = t3.insertAtEnd();
            }
            return !!r3 && (o4 ? this.setToInput(o4, this.positions.START) : this.setToBlock(i3, this.positions.START), true);
          } }, { key: "navigatePrevious", value: function() {
            var t3 = this.Editor.BlockManager, e3 = t3.currentBlock, n3 = t3.previousContentfulBlock;
            if (!e3)
              return false;
            var o4 = e3.previousInput;
            return !(!n3 && !o4 || !this.isAtStart || (o4 ? this.setToInput(o4, this.positions.END) : this.setToBlock(n3, this.positions.END), 0));
          } }, { key: "createShadow", value: function(t3) {
            var e3 = document.createElement("span");
            e3.classList.add(o3.CSS.shadowCaret), t3.insertAdjacentElement("beforeend", e3);
          } }, { key: "restoreCaret", value: function(t3) {
            var e3 = t3.querySelector(".".concat(o3.CSS.shadowCaret));
            e3 && (new c.default().expandToTag(e3), setTimeout(function() {
              var t4 = document.createRange();
              t4.selectNode(e3), t4.extractContents();
            }, 50));
          } }, { key: "insertContentAtCaretPosition", value: function(t3) {
            var e3 = document.createDocumentFragment(), n3 = document.createElement("div"), o4 = c.default.get(), r3 = c.default.range;
            n3.innerHTML = t3, Array.from(n3.childNodes).forEach(function(t4) {
              return e3.appendChild(t4);
            }), e3.childNodes.length === 0 && e3.appendChild(new Text());
            var i3 = e3.lastChild;
            r3.deleteContents(), r3.insertNode(e3);
            var a2 = document.createRange();
            a2.setStart(i3, i3.textContent.length), o4.removeAllRanges(), o4.addRange(a2);
          } }, { key: "getHigherLevelSiblings", value: function(t3, e3) {
            for (var n3 = t3, o4 = []; n3.parentNode && n3.parentNode.contentEditable !== "true"; )
              n3 = n3.parentNode;
            for (var r3 = e3 === "left" ? "previousSibling" : "nextSibling"; n3[r3]; )
              n3 = n3[r3], o4.push(n3);
            return o4;
          } }, { key: "positions", get: function() {
            return { START: "start", END: "end", DEFAULT: "default" };
          } }, { key: "isAtStart", get: function() {
            var t3 = c.default.get(), e3 = f.default.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput), n3 = t3.focusNode;
            if (f.default.isNativeInput(e3))
              return e3.selectionEnd === 0;
            if (!t3.anchorNode)
              return false;
            var o4 = n3.textContent.search(/\S/);
            o4 === -1 && (o4 = 0);
            var r3 = t3.focusOffset;
            return n3.nodeType !== Node.TEXT_NODE && n3.childNodes.length && (n3.childNodes[r3] ? (n3 = n3.childNodes[r3], r3 = 0) : r3 = (n3 = n3.childNodes[r3 - 1]).textContent.length), !(!f.default.isLineBreakTag(e3) && !f.default.isEmpty(e3) || !this.getHigherLevelSiblings(n3, "left").every(function(t4) {
              var e4 = f.default.isLineBreakTag(t4), n4 = t4.children.length === 1 && f.default.isLineBreakTag(t4.children[0]), o5 = e4 || n4;
              return f.default.isEmpty(t4) && !o5;
            }) || r3 !== o4) || (e3 === null || n3 === e3 && r3 <= o4);
          } }, { key: "isAtEnd", get: function() {
            var t3 = c.default.get(), e3 = t3.focusNode, n3 = f.default.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput, true);
            if (f.default.isNativeInput(n3))
              return n3.selectionEnd === n3.value.length;
            if (!t3.focusNode)
              return false;
            var o4 = t3.focusOffset;
            if (e3.nodeType !== Node.TEXT_NODE && e3.childNodes.length && (e3.childNodes[o4 - 1] ? o4 = (e3 = e3.childNodes[o4 - 1]).textContent.length : (e3 = e3.childNodes[0], o4 = 0)), f.default.isLineBreakTag(n3) || f.default.isEmpty(n3)) {
              var r3 = this.getHigherLevelSiblings(e3, "right");
              if (r3.every(function(t4, e4) {
                return e4 === r3.length - 1 && f.default.isLineBreakTag(t4) || f.default.isEmpty(t4) && !f.default.isLineBreakTag(t4);
              }) && o4 === e3.textContent.length)
                return true;
            }
            var i3 = n3.textContent.replace(/\s+$/, "");
            return e3 === n3 && o4 >= i3.length;
          } }], [{ key: "CSS", get: function() {
            return { shadowCaret: "cdx-shadow-caret" };
          } }]), o3;
        }(u.default);
        o2.default = g, g.displayName = "Caret", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(23), n(24), n(2), n(3), n(5), n(6), n(4), n(9), n(25), n(7)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p) {
        var h = n(8), v = n(1);
        function g() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = v(r2), i2 = v(i2), a = v(a), s = v(s), l = v(l), c = v(c), u = v(u), f = v(f), d = v(d), p = h(p);
        var y = function(t2) {
          (0, l.default)(f2, t2);
          var e2, n2, o3 = (e2 = f2, function() {
            var t3, n3 = (0, u.default)(e2);
            if (g()) {
              var o4 = (0, u.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, c.default)(this, t3);
          });
          function f2() {
            var t3;
            return (0, a.default)(this, f2), (t3 = o3.apply(this, arguments)).onMouseUp = function() {
              t3.listeners.off(document, "mouseover", t3.onMouseOver), t3.listeners.off(document, "mouseup", t3.onMouseUp);
            }, t3.onMouseOver = function(e3) {
              var n3 = t3.Editor, o4 = n3.BlockManager, r3 = n3.BlockSelection, i3 = o4.getBlockByChildNode(e3.relatedTarget) || t3.lastSelectedBlock, a2 = o4.getBlockByChildNode(e3.target);
              if (i3 && a2 && a2 !== i3) {
                if (i3 === t3.firstSelectedBlock)
                  return d.default.get().removeAllRanges(), i3.selected = true, a2.selected = true, void r3.clearCache();
                if (a2 === t3.firstSelectedBlock)
                  return i3.selected = false, a2.selected = false, void r3.clearCache();
                t3.Editor.InlineToolbar.close(), t3.toggleBlocksSelectedState(i3, a2), t3.lastSelectedBlock = a2;
              }
            }, t3;
          }
          return (0, s.default)(f2, [{ key: "prepare", value: (n2 = (0, i2.default)(r2.default.mark(function t3() {
            var e3 = this;
            return r2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    this.listeners.on(document, "mousedown", function(t5) {
                      e3.enableCrossBlockSelection(t5);
                    });
                  case 1:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function() {
            return n2.apply(this, arguments);
          }) }, { key: "watchSelection", value: function(t3) {
            if (t3.button === p.mouseButtons.LEFT) {
              var e3 = this.Editor.BlockManager;
              this.firstSelectedBlock = e3.getBlock(t3.target), this.lastSelectedBlock = this.firstSelectedBlock, this.listeners.on(document, "mouseover", this.onMouseOver), this.listeners.on(document, "mouseup", this.onMouseUp);
            }
          } }, { key: "toggleBlockSelectedState", value: function() {
            var t3 = !(arguments.length > 0 && arguments[0] !== void 0) || arguments[0], e3 = this.Editor, n3 = e3.BlockManager, o4 = e3.BlockSelection;
            this.lastSelectedBlock || (this.lastSelectedBlock = this.firstSelectedBlock = n3.currentBlock), this.firstSelectedBlock === this.lastSelectedBlock && (this.firstSelectedBlock.selected = true, o4.clearCache(), d.default.get().removeAllRanges());
            var r3 = n3.blocks.indexOf(this.lastSelectedBlock) + (t3 ? 1 : -1), i3 = n3.blocks[r3];
            i3 && (this.lastSelectedBlock.selected !== i3.selected ? (i3.selected = true, o4.clearCache()) : (this.lastSelectedBlock.selected = false, o4.clearCache()), this.lastSelectedBlock = i3, this.Editor.InlineToolbar.close(), i3.holder.scrollIntoView({ block: "nearest" }));
          } }, { key: "clear", value: function(t3) {
            var e3 = this.Editor, n3 = e3.BlockManager, o4 = e3.BlockSelection, r3 = e3.Caret, i3 = n3.blocks.indexOf(this.firstSelectedBlock), a2 = n3.blocks.indexOf(this.lastSelectedBlock);
            if (o4.anyBlockSelected && i3 > -1 && a2 > -1)
              if (t3 && t3 instanceof KeyboardEvent)
                switch (t3.keyCode) {
                  case p.keyCodes.DOWN:
                  case p.keyCodes.RIGHT:
                    r3.setToBlock(n3.blocks[Math.max(i3, a2)], r3.positions.END);
                    break;
                  case p.keyCodes.UP:
                  case p.keyCodes.LEFT:
                    r3.setToBlock(n3.blocks[Math.min(i3, a2)], r3.positions.START);
                    break;
                  default:
                    r3.setToBlock(n3.blocks[Math.max(i3, a2)], r3.positions.END);
                }
              else
                r3.setToBlock(n3.blocks[Math.max(i3, a2)], r3.positions.END);
            this.firstSelectedBlock = this.lastSelectedBlock = null;
          } }, { key: "enableCrossBlockSelection", value: function(t3) {
            var e3 = this.Editor.UI;
            d.default.isCollapsed || this.Editor.BlockSelection.clearSelection(t3), e3.nodes.redactor.contains(t3.target) ? this.watchSelection(t3) : this.Editor.BlockSelection.clearSelection(t3);
          } }, { key: "toggleBlocksSelectedState", value: function(t3, e3) {
            for (var n3 = this.Editor, o4 = n3.BlockManager, r3 = n3.BlockSelection, i3 = o4.blocks.indexOf(t3), a2 = o4.blocks.indexOf(e3), s2 = t3.selected !== e3.selected, l2 = Math.min(i3, a2); l2 <= Math.max(i3, a2); l2++) {
              var c2 = o4.blocks[l2];
              c2 !== this.firstSelectedBlock && c2 !== (s2 ? t3 : e3) && (o4.blocks[l2].selected = !o4.blocks[l2].selected, r3.clearCache());
            }
          } }, { key: "isCrossBlockSelectionStarted", get: function() {
            return !!this.firstSelectedBlock && !!this.lastSelectedBlock;
          } }]), f2;
        }(f.default);
        o2.default = y, y.displayName = "CrossBlockSelection", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(23), n(24), n(2), n(3), n(5), n(6), n(4), n(25), n(9)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d) {
        var p = n(1);
        function h() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = p(r2), i2 = p(i2), a = p(a), s = p(s), l = p(l), c = p(c), u = p(u), f = p(f);
        var v = function(t2) {
          (0, l.default)(d2, t2);
          var e2, n2, o3 = (e2 = d2, function() {
            var t3, n3 = (0, u.default)(e2);
            if (h()) {
              var o4 = (0, u.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, c.default)(this, t3);
          });
          function d2() {
            var t3;
            return (0, a.default)(this, d2), (t3 = o3.apply(this, arguments)).isStartedAtEditor = false, t3;
          }
          return (0, s.default)(d2, [{ key: "toggleReadOnly", value: function(t3) {
            t3 ? this.disableModuleBindings() : this.enableModuleBindings();
          } }, { key: "enableModuleBindings", value: function() {
            var t3 = this, e3 = this.Editor.UI;
            this.readOnlyMutableListeners.on(e3.nodes.holder, "drop", function() {
              var e4 = (0, i2.default)(r2.default.mark(function e5(n3) {
                return r2.default.wrap(function(e6) {
                  for (; ; )
                    switch (e6.prev = e6.next) {
                      case 0:
                        return e6.next = 2, t3.processDrop(n3);
                      case 2:
                      case "end":
                        return e6.stop();
                    }
                }, e5);
              }));
              return function(t4) {
                return e4.apply(this, arguments);
              };
            }(), true), this.readOnlyMutableListeners.on(e3.nodes.holder, "dragstart", function() {
              t3.processDragStart();
            }), this.readOnlyMutableListeners.on(e3.nodes.holder, "dragover", function(e4) {
              t3.processDragOver(e4);
            }, true);
          } }, { key: "disableModuleBindings", value: function() {
            this.readOnlyMutableListeners.clearAll();
          } }, { key: "processDrop", value: (n2 = (0, i2.default)(r2.default.mark(function t3(e3) {
            var n3, o4, i3, a2, s2, l2;
            return r2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    return n3 = this.Editor, o4 = n3.BlockManager, i3 = n3.Caret, a2 = n3.Paste, e3.preventDefault(), o4.blocks.forEach(function(t5) {
                      t5.dropTarget = false;
                    }), f.default.isAtEditor && !f.default.isCollapsed && this.isStartedAtEditor && document.execCommand("delete"), this.isStartedAtEditor = false, (s2 = o4.setCurrentBlockByChildNode(e3.target)) ? this.Editor.Caret.setToBlock(s2, i3.positions.END) : (l2 = o4.setCurrentBlockByChildNode(o4.lastBlock.holder), this.Editor.Caret.setToBlock(l2, i3.positions.END)), t4.next = 9, a2.processDataTransfer(e3.dataTransfer, true);
                  case 9:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function(t3) {
            return n2.apply(this, arguments);
          }) }, { key: "processDragStart", value: function() {
            f.default.isAtEditor && !f.default.isCollapsed && (this.isStartedAtEditor = true), this.Editor.InlineToolbar.close();
          } }, { key: "processDragOver", value: function(t3) {
            t3.preventDefault();
          } }]), d2;
        }((d = p(d)).default);
        o2.default = v, v.displayName = "DragNDrop", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9), n(7)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u) {
        var f = n(8), d = n(1);
        function p() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = d(r2), i2 = d(i2), a = d(a), s = d(s), l = d(l), c = d(c), u = f(u);
        var h = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (p()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            var t3;
            return (0, r2.default)(this, o3), (t3 = n2.apply(this, arguments)).disabled = false, t3;
          }
          return (0, i2.default)(o3, [{ key: "enable", value: function() {
            this.disabled = false;
          } }, { key: "disable", value: function() {
            this.disabled = true;
          } }, { key: "onChange", value: function(t3) {
            !this.disabled && u.isFunction(this.config.onChange) && this.config.onChange(this.Editor.API.methods, t3);
          } }]), o3;
        }(c.default);
        o2.default = h, h.displayName = "ModificationsObserver", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(42), n(30), n(23), n(24), n(2), n(3), n(5), n(6), n(4), n(9), n(15), n(7), n(65)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p, h, v, g) {
        var y = n(8), b = n(1);
        function m() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = b(r2), i2 = b(i2), a = b(a), s = b(s), l = b(l), c = b(c), u = b(u), f = b(f), d = b(d), p = b(p), h = b(h), v = y(v);
        var k = function(t2) {
          (0, u.default)(T, t2);
          var e2, n2, o3, p2, y2, b2, k2, x, w, S = (e2 = T, function() {
            var t3, n3 = (0, d.default)(e2);
            if (m()) {
              var o4 = (0, d.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, f.default)(this, t3);
          });
          function T() {
            var t3;
            return (0, l.default)(this, T), (t3 = S.apply(this, arguments)).MIME_TYPE = "application/x-editor-js", t3.toolsTags = {}, t3.tagsByTool = {}, t3.toolsPatterns = [], t3.toolsFiles = {}, t3.exceptionList = [], t3.processTool = function(e3) {
              try {
                var n3 = e3.create({}, {}, false);
                if (e3.pasteConfig === false)
                  return void t3.exceptionList.push(e3.name);
                if (!v.isFunction(n3.onPaste))
                  return;
                t3.getTagsConfig(e3), t3.getFilesConfig(e3), t3.getPatternsConfig(e3);
              } catch (t4) {
                v.log("Paste handling for \xAB".concat(e3.name, "\xBB Tool hasn't been set up because of the error"), "warn", t4);
              }
            }, t3.handlePasteEvent = function() {
              var e3 = (0, s.default)(a.default.mark(function e4(n3) {
                var o4, r3, i3;
                return a.default.wrap(function(e5) {
                  for (; ; )
                    switch (e5.prev = e5.next) {
                      case 0:
                        if (o4 = t3.Editor, r3 = o4.BlockManager, i3 = o4.Toolbar, r3.currentBlock && (!t3.isNativeBehaviour(n3.target) || n3.clipboardData.types.includes("Files"))) {
                          e5.next = 3;
                          break;
                        }
                        return e5.abrupt("return");
                      case 3:
                        if (!r3.currentBlock || !t3.exceptionList.includes(r3.currentBlock.name)) {
                          e5.next = 5;
                          break;
                        }
                        return e5.abrupt("return");
                      case 5:
                        n3.preventDefault(), t3.processDataTransfer(n3.clipboardData), r3.clearFocused(), i3.close();
                      case 9:
                      case "end":
                        return e5.stop();
                    }
                }, e4);
              }));
              return function(t4) {
                return e3.apply(this, arguments);
              };
            }(), t3;
          }
          return (0, c.default)(T, [{ key: "prepare", value: (w = (0, s.default)(a.default.mark(function t3() {
            return a.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    this.processTools();
                  case 1:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function() {
            return w.apply(this, arguments);
          }) }, { key: "toggleReadOnly", value: function(t3) {
            t3 ? this.unsetCallback() : this.setCallback();
          } }, { key: "processDataTransfer", value: (x = (0, s.default)(a.default.mark(function t3(e3) {
            var n3, o4, r3, i3, s2, l2, c2, u2, f2, d2 = arguments;
            return a.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    if (n3 = d2.length > 1 && d2[1] !== void 0 && d2[1], o4 = this.Editor.Tools, !((r3 = e3.types).includes ? r3.includes("Files") : r3.contains("Files"))) {
                      t4.next = 8;
                      break;
                    }
                    return t4.next = 7, this.processFiles(e3.files);
                  case 7:
                    return t4.abrupt("return");
                  case 8:
                    if (i3 = e3.getData(this.MIME_TYPE), s2 = e3.getData("text/plain"), l2 = e3.getData("text/html"), !i3) {
                      t4.next = 19;
                      break;
                    }
                    return t4.prev = 12, this.insertEditorJSData(JSON.parse(i3)), t4.abrupt("return");
                  case 17:
                    t4.prev = 17, t4.t0 = t4.catch(12);
                  case 19:
                    if (n3 && s2.trim() && l2.trim() && (l2 = "<p>" + (l2.trim() ? l2 : s2) + "</p>"), c2 = Object.keys(this.toolsTags).reduce(function(t5, e4) {
                      return t5[e4.toLowerCase()] = true, t5;
                    }, {}), u2 = Object.assign({}, c2, o4.getAllInlineToolsSanitizeConfig(), { br: {} }), (f2 = (0, g.clean)(l2, u2)).trim() && f2.trim() !== s2 && h.default.isHTMLString(f2)) {
                      t4.next = 28;
                      break;
                    }
                    return t4.next = 26, this.processText(s2);
                  case 26:
                    t4.next = 30;
                    break;
                  case 28:
                    return t4.next = 30, this.processText(f2, true);
                  case 30:
                  case "end":
                    return t4.stop();
                }
            }, t3, this, [[12, 17]]);
          })), function(t3) {
            return x.apply(this, arguments);
          }) }, { key: "processText", value: (k2 = (0, s.default)(a.default.mark(function t3(e3) {
            var n3, o4, r3, i3, l2, c2, u2, f2 = this, d2 = arguments;
            return a.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    if (n3 = d2.length > 1 && d2[1] !== void 0 && d2[1], o4 = this.Editor, r3 = o4.Caret, i3 = o4.BlockManager, (l2 = n3 ? this.processHTML(e3) : this.processPlain(e3)).length) {
                      t4.next = 5;
                      break;
                    }
                    return t4.abrupt("return");
                  case 5:
                    if (l2.length !== 1) {
                      t4.next = 8;
                      break;
                    }
                    return l2[0].isBlock ? this.processSingleBlock(l2.pop()) : this.processInlinePaste(l2.pop()), t4.abrupt("return");
                  case 8:
                    c2 = i3.currentBlock && i3.currentBlock.tool.isDefault, u2 = c2 && i3.currentBlock.isEmpty, l2.map(function() {
                      var t5 = (0, s.default)(a.default.mark(function t6(e4, n4) {
                        return a.default.wrap(function(t7) {
                          for (; ; )
                            switch (t7.prev = t7.next) {
                              case 0:
                                return t7.abrupt("return", f2.insertBlock(e4, n4 === 0 && u2));
                              case 1:
                              case "end":
                                return t7.stop();
                            }
                        }, t6);
                      }));
                      return function(e4, n4) {
                        return t5.apply(this, arguments);
                      };
                    }()), i3.currentBlock && r3.setToBlock(i3.currentBlock, r3.positions.END);
                  case 12:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function(t3) {
            return k2.apply(this, arguments);
          }) }, { key: "setCallback", value: function() {
            this.listeners.on(this.Editor.UI.nodes.holder, "paste", this.handlePasteEvent);
          } }, { key: "unsetCallback", value: function() {
            this.listeners.off(this.Editor.UI.nodes.holder, "paste", this.handlePasteEvent);
          } }, { key: "processTools", value: function() {
            var t3 = this.Editor.Tools.blockTools;
            Array.from(t3.values()).forEach(this.processTool);
          } }, { key: "getTagsConfig", value: function(t3) {
            var e3 = this, n3 = t3.pasteConfig.tags || [];
            n3.forEach(function(n4) {
              Object.prototype.hasOwnProperty.call(e3.toolsTags, n4) ? v.log("Paste handler for \xAB".concat(t3.name, "\xBB Tool on \xAB").concat(n4, "\xBB tag is skipped ") + "because it is already used by \xAB".concat(e3.toolsTags[n4].tool.name, "\xBB Tool."), "warn") : e3.toolsTags[n4.toUpperCase()] = { tool: t3 };
            }), this.tagsByTool[t3.name] = n3.map(function(t4) {
              return t4.toUpperCase();
            });
          } }, { key: "getFilesConfig", value: function(t3) {
            var e3 = t3.pasteConfig.files, n3 = e3 === void 0 ? {} : e3, o4 = n3.extensions, r3 = n3.mimeTypes;
            (o4 || r3) && (o4 && !Array.isArray(o4) && (v.log("\xABextensions\xBB property of the onDrop config for \xAB".concat(t3.name, "\xBB Tool should be an array")), o4 = []), r3 && !Array.isArray(r3) && (v.log("\xABmimeTypes\xBB property of the onDrop config for \xAB".concat(t3.name, "\xBB Tool should be an array")), r3 = []), r3 && (r3 = r3.filter(function(e4) {
              return !!v.isValidMimeType(e4) || (v.log("MIME type value \xAB".concat(e4, "\xBB for the \xAB").concat(t3.name, "\xBB Tool is not a valid MIME type"), "warn"), false);
            })), this.toolsFiles[t3.name] = { extensions: o4 || [], mimeTypes: r3 || [] });
          } }, { key: "getPatternsConfig", value: function(t3) {
            var e3 = this;
            t3.pasteConfig.patterns && !v.isEmpty(t3.pasteConfig.patterns) && Object.entries(t3.pasteConfig.patterns).forEach(function(n3) {
              var o4 = (0, i2.default)(n3, 2), r3 = o4[0], a2 = o4[1];
              a2 instanceof RegExp || v.log("Pattern ".concat(a2, " for \xAB").concat(t3.name, "\xBB Tool is skipped because it should be a Regexp instance."), "warn"), e3.toolsPatterns.push({ key: r3, pattern: a2, tool: t3 });
            });
          } }, { key: "isNativeBehaviour", value: function(t3) {
            return h.default.isNativeInput(t3);
          } }, { key: "processFiles", value: (b2 = (0, s.default)(a.default.mark(function t3(e3) {
            var n3, o4, r3, i3, s2 = this;
            return a.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    return n3 = this.Editor.BlockManager, t4.next = 3, Promise.all(Array.from(e3).map(function(t5) {
                      return s2.processFile(t5);
                    }));
                  case 3:
                    o4 = (o4 = t4.sent).filter(function(t5) {
                      return !!t5;
                    }), r3 = n3.currentBlock.tool.isDefault, i3 = r3 && n3.currentBlock.isEmpty, o4.forEach(function(t5, e4) {
                      n3.paste(t5.type, t5.event, e4 === 0 && i3);
                    });
                  case 8:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function(t3) {
            return b2.apply(this, arguments);
          }) }, { key: "processFile", value: (y2 = (0, s.default)(a.default.mark(function t3(e3) {
            var n3, o4, r3, s2, l2;
            return a.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    if (n3 = v.getFileExtension(e3), o4 = Object.entries(this.toolsFiles).find(function(t5) {
                      var o5 = (0, i2.default)(t5, 2), r4 = (o5[0], o5[1]), a2 = r4.mimeTypes, s3 = r4.extensions, l3 = e3.type.split("/"), c2 = (0, i2.default)(l3, 2), u2 = c2[0], f2 = c2[1], d2 = s3.find(function(t6) {
                        return t6.toLowerCase() === n3.toLowerCase();
                      }), p3 = a2.find(function(t6) {
                        var e4 = t6.split("/"), n4 = (0, i2.default)(e4, 2), o6 = n4[0], r5 = n4[1];
                        return o6 === u2 && (r5 === f2 || r5 === "*");
                      });
                      return !!d2 || !!p3;
                    })) {
                      t4.next = 4;
                      break;
                    }
                    return t4.abrupt("return");
                  case 4:
                    return r3 = (0, i2.default)(o4, 1), s2 = r3[0], l2 = this.composePasteEvent("file", { file: e3 }), t4.abrupt("return", { event: l2, type: s2 });
                  case 7:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function(t3) {
            return y2.apply(this, arguments);
          }) }, { key: "processHTML", value: function(t3) {
            var e3 = this, n3 = this.Editor.Tools, o4 = h.default.make("DIV");
            return o4.innerHTML = t3, this.getNodes(o4).map(function(t4) {
              var o5, r3 = n3.defaultTool, i3 = false;
              switch (t4.nodeType) {
                case Node.DOCUMENT_FRAGMENT_NODE:
                  (o5 = h.default.make("div")).appendChild(t4);
                  break;
                case Node.ELEMENT_NODE:
                  o5 = t4, i3 = true, e3.toolsTags[o5.tagName] && (r3 = e3.toolsTags[o5.tagName].tool);
              }
              var a2 = r3.pasteConfig.tags.reduce(function(t5, e4) {
                return t5[e4.toLowerCase()] = {}, t5;
              }, {}), s2 = Object.assign({}, a2, r3.baseSanitizeConfig);
              o5.innerHTML = (0, g.clean)(o5.innerHTML, s2);
              var l2 = e3.composePasteEvent("tag", { data: o5 });
              return { content: o5, isBlock: i3, tool: r3.name, event: l2 };
            }).filter(function(t4) {
              return !h.default.isNodeEmpty(t4.content) || h.default.isSingleTag(t4.content);
            });
          } }, { key: "processPlain", value: function(t3) {
            var e3 = this, n3 = this.config.defaultBlock;
            if (!t3)
              return [];
            var o4 = n3;
            return t3.split(/\r?\n/).filter(function(t4) {
              return t4.trim();
            }).map(function(t4) {
              var n4 = h.default.make("div");
              n4.textContent = t4;
              var r3 = e3.composePasteEvent("tag", { data: n4 });
              return { content: n4, tool: o4, isBlock: false, event: r3 };
            });
          } }, { key: "processSingleBlock", value: (p2 = (0, s.default)(a.default.mark(function t3(e3) {
            var n3, o4, r3, i3;
            return a.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    if (n3 = this.Editor, o4 = n3.Caret, r3 = n3.BlockManager, (i3 = r3.currentBlock) && e3.tool === i3.name && h.default.containsOnlyInlineElements(e3.content.innerHTML)) {
                      t4.next = 5;
                      break;
                    }
                    return this.insertBlock(e3, (i3 == null ? void 0 : i3.tool.isDefault) && i3.isEmpty), t4.abrupt("return");
                  case 5:
                    o4.insertContentAtCaretPosition(e3.content.innerHTML);
                  case 6:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function(t3) {
            return p2.apply(this, arguments);
          }) }, { key: "processInlinePaste", value: (o3 = (0, s.default)(a.default.mark(function t3(e3) {
            var n3, o4, r3, i3, s2, l2, c2, u2;
            return a.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    if (n3 = this.Editor, o4 = n3.BlockManager, r3 = n3.Caret, i3 = e3.content, !(o4.currentBlock && o4.currentBlock.tool.isDefault && i3.textContent.length < T.PATTERN_PROCESSING_MAX_LENGTH)) {
                      t4.next = 12;
                      break;
                    }
                    return t4.next = 6, this.processPattern(i3.textContent);
                  case 6:
                    if (!(s2 = t4.sent)) {
                      t4.next = 12;
                      break;
                    }
                    return l2 = o4.currentBlock && o4.currentBlock.tool.isDefault && o4.currentBlock.isEmpty, c2 = o4.paste(s2.tool, s2.event, l2), r3.setToBlock(c2, r3.positions.END), t4.abrupt("return");
                  case 12:
                    o4.currentBlock && o4.currentBlock.currentInput ? (u2 = o4.currentBlock.tool.sanitizeConfig, document.execCommand("insertHTML", false, (0, g.clean)(i3.innerHTML, u2))) : this.insertBlock(e3);
                  case 13:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function(t3) {
            return o3.apply(this, arguments);
          }) }, { key: "processPattern", value: (n2 = (0, s.default)(a.default.mark(function t3(e3) {
            var n3, o4;
            return a.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    if (n3 = this.toolsPatterns.find(function(t5) {
                      var n4 = t5.pattern.exec(e3);
                      return !!n4 && e3 === n4.shift();
                    })) {
                      t4.next = 3;
                      break;
                    }
                    return t4.abrupt("return");
                  case 3:
                    return o4 = this.composePasteEvent("pattern", { key: n3.key, data: e3 }), t4.abrupt("return", { event: o4, tool: n3.tool.name });
                  case 5:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function(t3) {
            return n2.apply(this, arguments);
          }) }, { key: "insertBlock", value: function(t3) {
            var e3, n3 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], o4 = this.Editor, r3 = o4.BlockManager, i3 = o4.Caret, a2 = r3.currentBlock;
            if (n3 && a2 && a2.isEmpty)
              return e3 = r3.paste(t3.tool, t3.event, true), void i3.setToBlock(e3, i3.positions.END);
            e3 = r3.paste(t3.tool, t3.event), i3.setToBlock(e3, i3.positions.END);
          } }, { key: "insertEditorJSData", value: function(t3) {
            var e3 = this.Editor, n3 = e3.BlockManager, o4 = e3.Caret, r3 = e3.Tools;
            (0, g.sanitizeBlocks)(t3, function(t4) {
              return r3.blockTools.get(t4).sanitizeConfig;
            }).forEach(function(t4, e4) {
              var r4 = t4.tool, i3 = t4.data, a2 = false;
              e4 === 0 && (a2 = n3.currentBlock && n3.currentBlock.tool.isDefault && n3.currentBlock.isEmpty);
              var s2 = n3.insert({ tool: r4, data: i3, replace: a2 });
              o4.setToBlock(s2, o4.positions.END);
            });
          } }, { key: "processElementNode", value: function(t3, e3, n3) {
            var o4 = Object.keys(this.toolsTags), i3 = t3, a2 = (this.toolsTags[i3.tagName] || {}).tool, s2 = this.tagsByTool[a2 == null ? void 0 : a2.name] || [], l2 = o4.includes(i3.tagName), c2 = h.default.blockElements.includes(i3.tagName.toLowerCase()), u2 = Array.from(i3.children).some(function(t4) {
              var e4 = t4.tagName;
              return o4.includes(e4) && !s2.includes(e4);
            }), f2 = Array.from(i3.children).some(function(t4) {
              var e4 = t4.tagName;
              return h.default.blockElements.includes(e4.toLowerCase());
            });
            return c2 || l2 || u2 ? l2 && !u2 || c2 && !f2 && !u2 ? [].concat((0, r2.default)(e3), [n3, i3]) : void 0 : (n3.appendChild(i3), [].concat((0, r2.default)(e3), [n3]));
          } }, { key: "getNodes", value: function(t3) {
            var e3, n3 = this;
            return Array.from(t3.childNodes).reduce(function t4(o4, i3) {
              if (h.default.isEmpty(i3) && !h.default.isSingleTag(i3))
                return o4;
              var a2 = o4[o4.length - 1], s2 = new DocumentFragment();
              switch (a2 && h.default.isFragment(a2) && (s2 = o4.pop()), i3.nodeType) {
                case Node.ELEMENT_NODE:
                  if (e3 = n3.processElementNode(i3, o4, s2))
                    return e3;
                  break;
                case Node.TEXT_NODE:
                  return s2.appendChild(i3), [].concat((0, r2.default)(o4), [s2]);
                default:
                  return [].concat((0, r2.default)(o4), [s2]);
              }
              return [].concat((0, r2.default)(o4), (0, r2.default)(Array.from(i3.childNodes).reduce(t4, [])));
            }, []);
          } }, { key: "composePasteEvent", value: function(t3, e3) {
            return new CustomEvent(t3, { detail: e3 });
          } }]), T;
        }(p.default);
        o2.default = k, k.displayName = "Paste", k.PATTERN_PROCESSING_MAX_LENGTH = 450, t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(23), n(30), n(24), n(2), n(3), n(5), n(6), n(4), n(9), n(148)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p) {
        var h = n(1);
        function v() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = h(r2), i2 = h(i2), a = h(a), s = h(s), l = h(l), c = h(c), u = h(u), f = h(f);
        var g = function(t2) {
          (0, c.default)(h2, t2);
          var e2, n2, o3, d2 = (e2 = h2, function() {
            var t3, n3 = (0, f.default)(e2);
            if (v()) {
              var o4 = (0, f.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, u.default)(this, t3);
          });
          function h2() {
            var t3;
            return (0, s.default)(this, h2), (t3 = d2.apply(this, arguments)).toolsDontSupportReadOnly = [], t3.readOnlyEnabled = false, t3;
          }
          return (0, l.default)(h2, [{ key: "prepare", value: (o3 = (0, a.default)(r2.default.mark(function t3() {
            var e3, n3, o4;
            return r2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    e3 = this.Editor.Tools, n3 = e3.blockTools, o4 = [], Array.from(n3.entries()).forEach(function(t5) {
                      var e4 = (0, i2.default)(t5, 2), n4 = e4[0];
                      e4[1].isReadOnlySupported || o4.push(n4);
                    }), this.toolsDontSupportReadOnly = o4, this.config.readOnly && o4.length > 0 && this.throwCriticalError(), this.toggle(this.config.readOnly);
                  case 7:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function() {
            return o3.apply(this, arguments);
          }) }, { key: "toggle", value: (n2 = (0, a.default)(r2.default.mark(function t3() {
            var e3, n3, o4, i3, a2 = arguments;
            return r2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    (e3 = a2.length > 0 && a2[0] !== void 0 ? a2[0] : !this.readOnlyEnabled) && this.toolsDontSupportReadOnly.length > 0 && this.throwCriticalError(), n3 = this.readOnlyEnabled, this.readOnlyEnabled = e3, t4.t0 = r2.default.keys(this.Editor);
                  case 5:
                    if ((t4.t1 = t4.t0()).done) {
                      t4.next = 12;
                      break;
                    }
                    if (o4 = t4.t1.value, this.Editor[o4].toggleReadOnly) {
                      t4.next = 9;
                      break;
                    }
                    return t4.abrupt("continue", 5);
                  case 9:
                    this.Editor[o4].toggleReadOnly(e3), t4.next = 5;
                    break;
                  case 12:
                    if (n3 !== e3) {
                      t4.next = 14;
                      break;
                    }
                    return t4.abrupt("return", this.readOnlyEnabled);
                  case 14:
                    return t4.next = 16, this.Editor.Saver.save();
                  case 16:
                    return i3 = t4.sent, t4.next = 19, this.Editor.BlockManager.clear();
                  case 19:
                    return t4.next = 21, this.Editor.Renderer.render(i3.blocks);
                  case 21:
                    return t4.abrupt("return", this.readOnlyEnabled);
                  case 22:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function() {
            return n2.apply(this, arguments);
          }) }, { key: "throwCriticalError", value: function() {
            throw new p.CriticalError("To enable read-only mode all connected tools should support it. Tools ".concat(this.toolsDontSupportReadOnly.join(", "), " don't support read-only mode."));
          } }, { key: "isEnabled", get: function() {
            return this.readOnlyEnabled;
          } }]), h2;
        }((d = h(d)).default);
        o2.default = g, g.displayName = "ReadOnly", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9), n(15), n(25), n(66)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d) {
        var p = n(1);
        function h(t2) {
          if (typeof Symbol == "undefined" || t2[Symbol.iterator] == null) {
            if (Array.isArray(t2) || (t2 = function(t3, e3) {
              if (t3) {
                if (typeof t3 == "string")
                  return v(t3, e3);
                var n3 = Object.prototype.toString.call(t3).slice(8, -1);
                return n3 === "Object" && t3.constructor && (n3 = t3.constructor.name), n3 === "Map" || n3 === "Set" ? Array.from(n3) : n3 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n3) ? v(t3, e3) : void 0;
              }
            }(t2))) {
              var e2 = 0, n2 = function() {
              };
              return { s: n2, n: function() {
                return e2 >= t2.length ? { done: true } : { done: false, value: t2[e2++] };
              }, e: function(t3) {
                throw t3;
              }, f: n2 };
            }
            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
          }
          var o3, r3, i3 = true, a2 = false;
          return { s: function() {
            o3 = t2[Symbol.iterator]();
          }, n: function() {
            var t3 = o3.next();
            return i3 = t3.done, t3;
          }, e: function(t3) {
            a2 = true, r3 = t3;
          }, f: function() {
            try {
              i3 || o3.return == null || o3.return();
            } finally {
              if (a2)
                throw r3;
            }
          } };
        }
        function v(t2, e2) {
          (e2 == null || e2 > t2.length) && (e2 = t2.length);
          for (var n2 = 0, o3 = new Array(e2); n2 < e2; n2++)
            o3[n2] = t2[n2];
          return o3;
        }
        function g() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = p(r2), i2 = p(i2), a = p(a), s = p(s), l = p(l), c = p(c), u = p(u), f = p(f), d = p(d);
        var y = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (g()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            var t3;
            return (0, r2.default)(this, o3), (t3 = n2.apply(this, arguments)).isRectSelectionActivated = false, t3.SCROLL_SPEED = 3, t3.HEIGHT_OF_SCROLL_ZONE = 40, t3.BOTTOM_SCROLL_ZONE = 1, t3.TOP_SCROLL_ZONE = 2, t3.MAIN_MOUSE_BUTTON = 0, t3.mousedown = false, t3.isScrolling = false, t3.inScrollZone = null, t3.startX = 0, t3.startY = 0, t3.mouseX = 0, t3.mouseY = 0, t3.stackOfSelected = [], t3.listenerIds = [], t3;
          }
          return (0, i2.default)(o3, [{ key: "prepare", value: function() {
            this.enableModuleBindings();
          } }, { key: "startSelection", value: function(t3, e3) {
            var n3 = document.elementFromPoint(t3 - window.pageXOffset, e3 - window.pageYOffset);
            n3.closest(".".concat(this.Editor.Toolbar.CSS.toolbar)) || (this.Editor.BlockSelection.allBlocksSelected = false, this.clearSelection(), this.stackOfSelected = []);
            var o4 = [".".concat(d.default.CSS.content), ".".concat(this.Editor.Toolbar.CSS.toolbar), ".".concat(this.Editor.InlineToolbar.CSS.inlineToolbar)], r3 = n3.closest("." + this.Editor.UI.CSS.editorWrapper), i3 = o4.some(function(t4) {
              return !!n3.closest(t4);
            });
            r3 && !i3 && (this.mousedown = true, this.startX = t3, this.startY = e3);
          } }, { key: "endSelection", value: function() {
            this.mousedown = false, this.startX = 0, this.startY = 0, this.overlayRectangle.style.display = "none";
          } }, { key: "isRectActivated", value: function() {
            return this.isRectSelectionActivated;
          } }, { key: "clearSelection", value: function() {
            this.isRectSelectionActivated = false;
          } }, { key: "enableModuleBindings", value: function() {
            var t3 = this, e3 = this.genHTML().container;
            this.listeners.on(e3, "mousedown", function(e4) {
              t3.processMouseDown(e4);
            }, false), this.listeners.on(document.body, "mousemove", function(e4) {
              t3.processMouseMove(e4);
            }, false), this.listeners.on(document.body, "mouseleave", function() {
              t3.processMouseLeave();
            }), this.listeners.on(window, "scroll", function(e4) {
              t3.processScroll(e4);
            }, false), this.listeners.on(document.body, "mouseup", function() {
              t3.processMouseUp();
            }, false);
          } }, { key: "processMouseDown", value: function(t3) {
            t3.button === this.MAIN_MOUSE_BUTTON && (t3.target.closest(u.default.allInputsSelector) !== null || this.startSelection(t3.pageX, t3.pageY));
          } }, { key: "processMouseMove", value: function(t3) {
            this.changingRectangle(t3), this.scrollByZones(t3.clientY);
          } }, { key: "processMouseLeave", value: function() {
            this.clearSelection(), this.endSelection();
          } }, { key: "processScroll", value: function(t3) {
            this.changingRectangle(t3);
          } }, { key: "processMouseUp", value: function() {
            this.endSelection();
          } }, { key: "scrollByZones", value: function(t3) {
            this.inScrollZone = null, t3 <= this.HEIGHT_OF_SCROLL_ZONE && (this.inScrollZone = this.TOP_SCROLL_ZONE), document.documentElement.clientHeight - t3 <= this.HEIGHT_OF_SCROLL_ZONE && (this.inScrollZone = this.BOTTOM_SCROLL_ZONE), this.inScrollZone ? this.isScrolling || (this.scrollVertical(this.inScrollZone === this.TOP_SCROLL_ZONE ? -this.SCROLL_SPEED : this.SCROLL_SPEED), this.isScrolling = true) : this.isScrolling = false;
          } }, { key: "genHTML", value: function() {
            var t3 = this.Editor.UI, e3 = t3.nodes.holder.querySelector("." + t3.CSS.editorWrapper), n3 = u.default.make("div", o3.CSS.overlay, {}), r3 = u.default.make("div", o3.CSS.overlayContainer, {}), i3 = u.default.make("div", o3.CSS.rect, {});
            return r3.appendChild(i3), n3.appendChild(r3), e3.appendChild(n3), this.overlayRectangle = i3, { container: e3, overlay: n3 };
          } }, { key: "scrollVertical", value: function(t3) {
            var e3 = this;
            if (this.inScrollZone && this.mousedown) {
              var n3 = window.pageYOffset;
              window.scrollBy(0, t3), this.mouseY += window.pageYOffset - n3, setTimeout(function() {
                e3.scrollVertical(t3);
              }, 0);
            }
          } }, { key: "changingRectangle", value: function(t3) {
            if (this.mousedown) {
              t3.pageY !== void 0 && (this.mouseX = t3.pageX, this.mouseY = t3.pageY);
              var e3 = this.genInfoForMouseSelection(), n3 = e3.rightPos, o4 = e3.leftPos, r3 = e3.index, i3 = this.startX > n3 && this.mouseX > n3, a2 = this.startX < o4 && this.mouseX < o4;
              this.rectCrossesBlocks = !(i3 || a2), this.isRectSelectionActivated || (this.rectCrossesBlocks = false, this.isRectSelectionActivated = true, this.shrinkRectangleToPoint(), this.overlayRectangle.style.display = "block"), this.updateRectangleSize(), r3 !== void 0 && (this.trySelectNextBlock(r3), this.inverseSelection(), f.default.get().removeAllRanges(), t3.preventDefault());
            }
          } }, { key: "shrinkRectangleToPoint", value: function() {
            this.overlayRectangle.style.left = "".concat(this.startX - window.pageXOffset, "px"), this.overlayRectangle.style.top = "".concat(this.startY - window.pageYOffset, "px"), this.overlayRectangle.style.bottom = "calc(100% - ".concat(this.startY - window.pageYOffset, "px"), this.overlayRectangle.style.right = "calc(100% - ".concat(this.startX - window.pageXOffset, "px");
          } }, { key: "inverseSelection", value: function() {
            var t3 = this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;
            if (this.rectCrossesBlocks && !t3) {
              var e3, n3 = h(this.stackOfSelected);
              try {
                for (n3.s(); !(e3 = n3.n()).done; ) {
                  var o4 = e3.value;
                  this.Editor.BlockSelection.selectBlockByIndex(o4);
                }
              } catch (t4) {
                n3.e(t4);
              } finally {
                n3.f();
              }
            }
            if (!this.rectCrossesBlocks && t3) {
              var r3, i3 = h(this.stackOfSelected);
              try {
                for (i3.s(); !(r3 = i3.n()).done; ) {
                  var a2 = r3.value;
                  this.Editor.BlockSelection.unSelectBlockByIndex(a2);
                }
              } catch (t4) {
                i3.e(t4);
              } finally {
                i3.f();
              }
            }
          } }, { key: "updateRectangleSize", value: function() {
            this.mouseY >= this.startY ? (this.overlayRectangle.style.top = "".concat(this.startY - window.pageYOffset, "px"), this.overlayRectangle.style.bottom = "calc(100% - ".concat(this.mouseY - window.pageYOffset, "px")) : (this.overlayRectangle.style.bottom = "calc(100% - ".concat(this.startY - window.pageYOffset, "px"), this.overlayRectangle.style.top = "".concat(this.mouseY - window.pageYOffset, "px")), this.mouseX >= this.startX ? (this.overlayRectangle.style.left = "".concat(this.startX - window.pageXOffset, "px"), this.overlayRectangle.style.right = "calc(100% - ".concat(this.mouseX - window.pageXOffset, "px")) : (this.overlayRectangle.style.right = "calc(100% - ".concat(this.startX - window.pageXOffset, "px"), this.overlayRectangle.style.left = "".concat(this.mouseX - window.pageXOffset, "px"));
          } }, { key: "genInfoForMouseSelection", value: function() {
            var t3, e3 = document.body.offsetWidth / 2, n3 = this.mouseY - window.pageYOffset, o4 = document.elementFromPoint(e3, n3), r3 = this.Editor.BlockManager.getBlockByChildNode(o4);
            r3 !== void 0 && (t3 = this.Editor.BlockManager.blocks.findIndex(function(t4) {
              return t4.holder === r3.holder;
            }));
            var i3 = this.Editor.BlockManager.lastBlock.holder.querySelector("." + d.default.CSS.content), a2 = Number.parseInt(window.getComputedStyle(i3).width, 10) / 2;
            return { index: t3, leftPos: e3 - a2, rightPos: e3 + a2 };
          } }, { key: "addBlockInSelection", value: function(t3) {
            this.rectCrossesBlocks && this.Editor.BlockSelection.selectBlockByIndex(t3), this.stackOfSelected.push(t3);
          } }, { key: "trySelectNextBlock", value: function(t3) {
            var e3 = this, n3 = this.stackOfSelected[this.stackOfSelected.length - 1] === t3, o4 = this.stackOfSelected.length;
            if (!n3) {
              var r3 = this.stackOfSelected[o4 - 1] - this.stackOfSelected[o4 - 2] > 0, i3 = 0;
              o4 > 1 && (i3 = r3 ? 1 : -1);
              var a2 = t3 > this.stackOfSelected[o4 - 1] && i3 === 1, s2 = t3 < this.stackOfSelected[o4 - 1] && i3 === -1, l2 = !(a2 || s2 || i3 === 0);
              if (l2 || !(t3 > this.stackOfSelected[o4 - 1] || this.stackOfSelected[o4 - 1] === void 0)) {
                if (!l2 && t3 < this.stackOfSelected[o4 - 1])
                  for (var c2 = this.stackOfSelected[o4 - 1] - 1; c2 >= t3; c2--)
                    this.addBlockInSelection(c2);
                else if (l2) {
                  var u2, f2 = o4 - 1;
                  for (u2 = t3 > this.stackOfSelected[o4 - 1] ? function() {
                    return t3 > e3.stackOfSelected[f2];
                  } : function() {
                    return t3 < e3.stackOfSelected[f2];
                  }; u2(); )
                    this.rectCrossesBlocks && this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[f2]), this.stackOfSelected.pop(), f2--;
                }
              } else
                for (var d2 = this.stackOfSelected[o4 - 1] + 1 || t3; d2 <= t3; d2++)
                  this.addBlockInSelection(d2);
            }
          } }], [{ key: "CSS", get: function() {
            return { overlay: "codex-editor-overlay", overlayContainer: "codex-editor-overlay__container", rect: "codex-editor-overlay__rectangle", topScrollZone: "codex-editor-overlay__scroll-zone--top", bottomScrollZone: "codex-editor-overlay__scroll-zone--bottom" };
          } }]), o3;
        }(c.default);
        o2.default = y, y.displayName = "RectangleSelection", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(23), n(24), n(2), n(3), n(5), n(6), n(4), n(9), n(7)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d) {
        var p = n(8), h = n(1);
        function v() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = h(r2), i2 = h(i2), a = h(a), s = h(s), l = h(l), c = h(c), u = h(u), f = h(f), d = p(d);
        var g = function(t2) {
          (0, l.default)(p2, t2);
          var e2, n2, o3, f2 = (e2 = p2, function() {
            var t3, n3 = (0, u.default)(e2);
            if (v()) {
              var o4 = (0, u.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, c.default)(this, t3);
          });
          function p2() {
            return (0, a.default)(this, p2), f2.apply(this, arguments);
          }
          return (0, s.default)(p2, [{ key: "render", value: (o3 = (0, i2.default)(r2.default.mark(function t3(e3) {
            var n3, o4, i3 = this;
            return r2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    return n3 = e3.map(function(t5) {
                      return { function: function() {
                        return i3.insertBlock(t5);
                      } };
                    }), this.Editor.ModificationsObserver.disable(), t4.next = 4, d.sequence(n3);
                  case 4:
                    return o4 = t4.sent, this.Editor.ModificationsObserver.enable(), this.Editor.UI.checkEmptiness(), t4.abrupt("return", o4);
                  case 8:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function(t3) {
            return o3.apply(this, arguments);
          }) }, { key: "insertBlock", value: (n2 = (0, i2.default)(r2.default.mark(function t3(e3) {
            var n3, o4, i3, a2, s2, l2, c2, u2, f3;
            return r2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    if (n3 = this.Editor, o4 = n3.Tools, i3 = n3.BlockManager, a2 = e3.type, s2 = e3.data, l2 = e3.tunes, c2 = e3.id, !o4.available.has(a2)) {
                      t4.next = 13;
                      break;
                    }
                    t4.prev = 3, i3.insert({ id: c2, tool: a2, data: s2, tunes: l2 }), t4.next = 11;
                    break;
                  case 7:
                    throw t4.prev = 7, t4.t0 = t4.catch(3), d.log("Block \xAB".concat(a2, "\xBB skipped because of plugins error"), "warn", s2), Error(t4.t0);
                  case 11:
                    t4.next = 18;
                    break;
                  case 13:
                    u2 = { savedData: { id: c2, type: a2, data: s2 }, title: a2 }, o4.unavailable.has(a2) && (f3 = o4.unavailable.get(a2).toolbox, u2.title = (f3 == null ? void 0 : f3.title) || u2.title), i3.insert({ id: c2, tool: o4.stubTool, data: u2 }).stretched = true, d.log("Tool \xAB".concat(a2, "\xBB is not found. Check 'tools' property at your initial Editor.js config."), "warn");
                  case 18:
                  case "end":
                    return t4.stop();
                }
            }, t3, this, [[3, 7]]);
          })), function(t3) {
            return n2.apply(this, arguments);
          }) }]), p2;
        }(f.default);
        o2.default = g, g.displayName = "Renderer", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(23), n(24), n(2), n(3), n(5), n(6), n(4), n(9), n(7), n(65)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p) {
        var h = n(8), v = n(1);
        function g() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = v(r2), i2 = v(i2), a = v(a), s = v(s), l = v(l), c = v(c), u = v(u), f = v(f), d = h(d);
        var y = function(t2) {
          (0, l.default)(h2, t2);
          var e2, n2, o3, f2 = (e2 = h2, function() {
            var t3, n3 = (0, u.default)(e2);
            if (g()) {
              var o4 = (0, u.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, c.default)(this, t3);
          });
          function h2() {
            return (0, a.default)(this, h2), f2.apply(this, arguments);
          }
          return (0, s.default)(h2, [{ key: "save", value: (o3 = (0, i2.default)(r2.default.mark(function t3() {
            var e3, n3, o4, i3, a2, s2, l2, c2, u2 = this;
            return r2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    return e3 = this.Editor, n3 = e3.BlockManager, o4 = e3.Tools, i3 = e3.ModificationsObserver, a2 = n3.blocks, s2 = [], t4.prev = 2, i3.disable(), a2.forEach(function(t5) {
                      s2.push(u2.getSavedData(t5));
                    }), t4.next = 7, Promise.all(s2);
                  case 7:
                    return l2 = t4.sent, t4.next = 10, (0, p.sanitizeBlocks)(l2, function(t5) {
                      return o4.blockTools.get(t5).sanitizeConfig;
                    });
                  case 10:
                    return c2 = t4.sent, t4.abrupt("return", this.makeOutput(c2));
                  case 14:
                    t4.prev = 14, t4.t0 = t4.catch(2), d.logLabeled("Saving failed due to the Error %o", "error", t4.t0);
                  case 17:
                    return t4.prev = 17, i3.enable(), t4.finish(17);
                  case 20:
                  case "end":
                    return t4.stop();
                }
            }, t3, this, [[2, 14, 17, 20]]);
          })), function() {
            return o3.apply(this, arguments);
          }) }, { key: "getSavedData", value: (n2 = (0, i2.default)(r2.default.mark(function t3(e3) {
            var n3, o4;
            return r2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    return t4.next = 2, e3.save();
                  case 2:
                    if (n3 = t4.sent, t4.t0 = n3, !t4.t0) {
                      t4.next = 8;
                      break;
                    }
                    return t4.next = 7, e3.validate(n3.data);
                  case 7:
                    t4.t0 = t4.sent;
                  case 8:
                    return o4 = t4.t0, t4.abrupt("return", Object.assign(Object.assign({}, n3), { isValid: o4 }));
                  case 10:
                  case "end":
                    return t4.stop();
                }
            }, t3);
          })), function(t3) {
            return n2.apply(this, arguments);
          }) }, { key: "makeOutput", value: function(t3) {
            var e3 = this, n3 = 0, o4 = [];
            return d.log("[Editor.js saving]:", "groupCollapsed"), t3.forEach(function(t4) {
              var r3 = t4.id, i3 = t4.tool, a2 = t4.data, s2 = t4.tunes, l2 = t4.time, c2 = t4.isValid;
              if (n3 += l2, d.log("".concat(i3.charAt(0).toUpperCase() + i3.slice(1)), "group"), !c2)
                return d.log("Block \xAB".concat(i3, "\xBB skipped because saved data is invalid")), void d.log(void 0, "groupEnd");
              if (d.log(a2), d.log(void 0, "groupEnd"), i3 !== e3.Editor.Tools.stubTool) {
                var u2 = Object.assign({ id: r3, type: i3, data: a2 }, !d.isEmpty(s2) && { tunes: s2 });
                o4.push(u2);
              } else
                o4.push(a2);
            }), d.log("Total", "log", n3), d.log(void 0, "groupEnd"), { time: +new Date(), blocks: o4, version: "2.22.2" };
          } }]), h2;
        }(f.default);
        o2.default = y, y.displayName = "Saver", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(30), n(2), n(3), n(5), n(6), n(4), n(9), n(15), n(60), n(7), n(25)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p, h) {
        var v = n(8), g = n(1);
        function y() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = g(r2), i2 = g(i2), a = g(a), s = g(s), l = g(l), c = g(c), u = g(u), f = g(f), d = g(d), p = v(p), h = g(h);
        var b = function(t2) {
          (0, s.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, c.default)(e2);
            if (y()) {
              var o4 = (0, c.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, l.default)(this, t3);
          });
          function o3() {
            var t3;
            return (0, i2.default)(this, o3), (t3 = n2.apply(this, arguments)).buttons = [], t3.flipper = null, t3.selection = new h.default(), t3;
          }
          return (0, a.default)(o3, [{ key: "make", value: function() {
            this.nodes.wrapper = f.default.make("div", this.CSS.wrapper), this.nodes.toolSettings = f.default.make("div", this.CSS.toolSettings), this.nodes.defaultSettings = f.default.make("div", this.CSS.defaultSettings), f.default.append(this.nodes.wrapper, [this.nodes.toolSettings, this.nodes.defaultSettings]), this.enableFlipper();
          } }, { key: "destroy", value: function() {
            this.flipper && (this.flipper.deactivate(), this.flipper = null), this.removeAllNodes();
          } }, { key: "open", value: function() {
            this.nodes.wrapper.classList.add(this.CSS.wrapperOpened), this.selection.save(), this.Editor.BlockManager.currentBlock.selected = true, this.Editor.BlockSelection.clearCache(), this.addToolSettings(), this.addTunes(), this.eventsDispatcher.emit(this.events.opened), this.flipper.activate(this.blockTunesButtons);
          } }, { key: "close", value: function() {
            this.nodes.wrapper.classList.remove(this.CSS.wrapperOpened), h.default.isAtEditor || this.selection.restore(), this.selection.clearSaved(), !this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted && this.Editor.BlockManager.currentBlock && (this.Editor.BlockManager.currentBlock.selected = false), this.nodes.toolSettings.innerHTML = "", this.nodes.defaultSettings.innerHTML = "", this.eventsDispatcher.emit(this.events.closed), this.buttons = [], this.flipper.deactivate();
          } }, { key: "addToolSettings", value: function() {
            var t3 = this.Editor.BlockManager.currentBlock.renderSettings();
            t3 && f.default.append(this.nodes.toolSettings, t3);
          } }, { key: "addTunes", value: function() {
            var t3 = this.Editor.BlockManager.currentBlock.renderTunes(), e3 = (0, r2.default)(t3, 2), n3 = e3[0], o4 = e3[1];
            f.default.append(this.nodes.toolSettings, n3), f.default.append(this.nodes.defaultSettings, o4);
          } }, { key: "enableFlipper", value: function() {
            var t3 = this;
            this.flipper = new d.default({ focusedItemClass: this.CSS.focusedButton, activateCallback: function(e3) {
              e3 && f.default.canSetCaret(e3) ? t3.close() : p.delay(function() {
                t3.Editor.Caret.setToBlock(t3.Editor.BlockManager.currentBlock);
              }, 50)();
            } });
          } }, { key: "events", get: function() {
            return { opened: "block-settings-opened", closed: "block-settings-closed" };
          } }, { key: "CSS", get: function() {
            return { wrapper: "ce-settings", wrapperOpened: "ce-settings--opened", toolSettings: "ce-settings__plugin-zone", defaultSettings: "ce-settings__default-zone", button: "ce-settings__button", focusedButton: "ce-settings__button--focused", focusedButtonAnimated: "ce-settings__button--focused-animated" };
          } }, { key: "opened", get: function() {
            return this.nodes.wrapper.classList.contains(this.CSS.wrapperOpened);
          } }, { key: "blockTunesButtons", get: function() {
            var t3 = this, e3 = this.Editor.StylesAPI;
            if (this.buttons.length !== 0)
              return this.buttons;
            var n3 = this.nodes.toolSettings.querySelectorAll(".".concat(e3.classes.settingsButton, ", ").concat(f.default.allInputsSelector)), o4 = this.nodes.defaultSettings.querySelectorAll(".".concat(this.CSS.button));
            return n3.forEach(function(e4) {
              t3.buttons.push(e4);
            }), o4.forEach(function(e4) {
              t3.buttons.push(e4);
            }), this.buttons;
          } }]), o3;
        }(u.default);
        o2.default = b, b.displayName = "BlockSettings", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(30), n(23), n(24), n(42), n(2), n(3), n(5), n(6), n(4), n(9), n(15), n(7), n(60), n(59), n(84), n(65)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p, h, v, g, y, b, m) {
        var k = n(8), x = n(1);
        function w() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = x(r2), i2 = x(i2), a = x(a), s = x(s), l = x(l), c = x(c), u = x(u), f = x(f), d = x(d), p = x(p), h = x(h), v = k(v), g = x(g), y = x(y);
        var S = function(t2) {
          (0, u.default)(p2, t2);
          var e2, n2, o3 = (e2 = p2, function() {
            var t3, n3 = (0, d.default)(e2);
            if (w()) {
              var o4 = (0, d.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, f.default)(this, t3);
          });
          function p2() {
            var t3;
            return (0, l.default)(this, p2), (t3 = o3.apply(this, arguments)).opened = false, t3.tools = {}, t3.flipper = null, t3.togglingCallback = null, t3;
          }
          return (0, c.default)(p2, [{ key: "make", value: function() {
            this.nodes.wrapper = h.default.make("div", [p2.CSS.conversionToolbarWrapper].concat((0, s.default)(this.isRtl ? [this.Editor.UI.CSS.editorRtlFix] : []))), this.nodes.tools = h.default.make("div", p2.CSS.conversionToolbarTools);
            var t3 = h.default.make("div", p2.CSS.conversionToolbarLabel, { textContent: y.default.ui(b.I18nInternalNS.ui.inlineToolbar.converter, "Convert to") });
            return this.addTools(), this.enableFlipper(), h.default.append(this.nodes.wrapper, t3), h.default.append(this.nodes.wrapper, this.nodes.tools), this.nodes.wrapper;
          } }, { key: "destroy", value: function() {
            this.flipper && (this.flipper.deactivate(), this.flipper = null), this.removeAllNodes();
          } }, { key: "toggle", value: function(t3) {
            this.opened ? this.close() : this.open(), v.isFunction(t3) && (this.togglingCallback = t3);
          } }, { key: "open", value: function() {
            var t3 = this;
            this.filterTools(), this.opened = true, this.nodes.wrapper.classList.add(p2.CSS.conversionToolbarShowed), setTimeout(function() {
              t3.flipper.activate(Object.values(t3.tools).filter(function(t4) {
                return !t4.classList.contains(p2.CSS.conversionToolHidden);
              })), t3.flipper.focusFirst(), v.isFunction(t3.togglingCallback) && t3.togglingCallback(true);
            }, 50);
          } }, { key: "close", value: function() {
            this.opened = false, this.flipper.deactivate(), this.nodes.wrapper.classList.remove(p2.CSS.conversionToolbarShowed), v.isFunction(this.togglingCallback) && this.togglingCallback(false);
          } }, { key: "hasTools", value: function() {
            var t3 = Object.keys(this.tools);
            return !(t3.length === 1 && t3.shift() === this.config.defaultBlock);
          } }, { key: "replaceWithBlock", value: (n2 = (0, a.default)(i2.default.mark(function t3(e3) {
            var n3, o4, r3, a2, s2, l2, c2, u2, f2, d2, p3 = this;
            return i2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    return n3 = this.Editor.BlockManager.currentBlock.tool, o4 = this.Editor.BlockManager.currentBlock.name, t4.next = 4, this.Editor.BlockManager.currentBlock.save();
                  case 4:
                    if (r3 = t4.sent, a2 = r3.data, o4 === e3 && (e3 = this.config.defaultBlock), s2 = this.Editor.Tools.blockTools.get(e3), l2 = "", c2 = n3.conversionConfig.export, !v.isFunction(c2)) {
                      t4.next = 14;
                      break;
                    }
                    l2 = c2(a2), t4.next = 20;
                    break;
                  case 14:
                    if (!v.isString(c2)) {
                      t4.next = 18;
                      break;
                    }
                    l2 = a2[c2], t4.next = 20;
                    break;
                  case 18:
                    return v.log("Conversion \xABexport\xBB property must be a string or function. String means key of saved data object to export. Function should export processed string to export."), t4.abrupt("return");
                  case 20:
                    if (u2 = (0, m.clean)(l2, s2.sanitizeConfig), f2 = {}, d2 = s2.conversionConfig.import, !v.isFunction(d2)) {
                      t4.next = 27;
                      break;
                    }
                    f2 = d2(u2), t4.next = 33;
                    break;
                  case 27:
                    if (!v.isString(d2)) {
                      t4.next = 31;
                      break;
                    }
                    f2[d2] = u2, t4.next = 33;
                    break;
                  case 31:
                    return v.log("Conversion \xABimport\xBB property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."), t4.abrupt("return");
                  case 33:
                    this.Editor.BlockManager.replace({ tool: e3, data: f2 }), this.Editor.BlockSelection.clearSelection(), this.close(), this.Editor.InlineToolbar.close(), v.delay(function() {
                      p3.Editor.Caret.setToBlock(p3.Editor.BlockManager.currentBlock);
                    }, 10)();
                  case 38:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function(t3) {
            return n2.apply(this, arguments);
          }) }, { key: "addTools", value: function() {
            var t3 = this, e3 = this.Editor.Tools.blockTools;
            Array.from(e3.entries()).forEach(function(e4) {
              var n3 = (0, r2.default)(e4, 2), o4 = n3[0], i3 = n3[1], a2 = i3.toolbox, s2 = i3.conversionConfig;
              !v.isEmpty(a2) && a2.icon && s2 && s2.import && t3.addTool(o4, a2.icon, a2.title);
            });
          } }, { key: "addTool", value: function(t3, e3, n3) {
            var o4 = this, r3 = h.default.make("div", [p2.CSS.conversionTool]), s2 = h.default.make("div", [p2.CSS.conversionToolIcon]);
            r3.dataset.tool = t3, s2.innerHTML = e3, h.default.append(r3, s2), h.default.append(r3, h.default.text(y.default.t(b.I18nInternalNS.toolNames, n3 || v.capitalize(t3)))), h.default.append(this.nodes.tools, r3), this.tools[t3] = r3, this.listeners.on(r3, "click", (0, a.default)(i2.default.mark(function e4() {
              return i2.default.wrap(function(e5) {
                for (; ; )
                  switch (e5.prev = e5.next) {
                    case 0:
                      return e5.next = 2, o4.replaceWithBlock(t3);
                    case 2:
                    case "end":
                      return e5.stop();
                  }
              }, e4);
            })));
          } }, { key: "filterTools", value: function() {
            var t3 = this.Editor.BlockManager.currentBlock;
            Object.entries(this.tools).forEach(function(e3) {
              var n3 = (0, r2.default)(e3, 2), o4 = n3[0], i3 = n3[1];
              i3.hidden = false, i3.classList.toggle(p2.CSS.conversionToolHidden, o4 === t3.name);
            });
          } }, { key: "enableFlipper", value: function() {
            this.flipper = new g.default({ focusedItemClass: p2.CSS.conversionToolFocused });
          } }], [{ key: "CSS", get: function() {
            return { conversionToolbarWrapper: "ce-conversion-toolbar", conversionToolbarShowed: "ce-conversion-toolbar--showed", conversionToolbarTools: "ce-conversion-toolbar__tools", conversionToolbarLabel: "ce-conversion-toolbar__label", conversionTool: "ce-conversion-tool", conversionToolHidden: "ce-conversion-tool--hidden", conversionToolIcon: "ce-conversion-tool__icon", conversionToolFocused: "ce-conversion-tool--focused", conversionToolActive: "ce-conversion-tool--active" };
          } }]), p2;
        }(p.default);
        o2.default = S, S.displayName = "ConversionToolbar", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(42), n(30), n(2), n(3), n(5), n(6), n(4), n(9), n(15), n(25), n(7), n(60), n(59), n(84), n(112), n(82), n(67)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p, h, v, g, y, b, m, k) {
        var x = n(8), w = n(1);
        function S() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = w(r2), i2 = w(i2), a = w(a), s = w(s), l = w(l), c = w(c), u = w(u), f = w(f), d = w(d), p = w(p), h = x(h), v = w(v), g = w(g), b = w(b), m = w(m);
        var T = function(t2) {
          (0, l.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, u.default)(e2);
            if (S()) {
              var o4 = (0, u.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, c.default)(this, t3);
          });
          function o3(t3) {
            var e3, r3 = t3.config, i3 = t3.eventsDispatcher;
            return (0, a.default)(this, o3), (e3 = n2.call(this, { config: r3, eventsDispatcher: i3 })).CSS = { inlineToolbar: "ce-inline-toolbar", inlineToolbarShowed: "ce-inline-toolbar--showed", inlineToolbarLeftOriented: "ce-inline-toolbar--left-oriented", inlineToolbarRightOriented: "ce-inline-toolbar--right-oriented", inlineToolbarShortcut: "ce-inline-toolbar__shortcut", buttonsWrapper: "ce-inline-toolbar__buttons", actionsWrapper: "ce-inline-toolbar__actions", inlineToolButton: "ce-inline-tool", inputField: "cdx-input", focusedButton: "ce-inline-tool--focused", conversionToggler: "ce-inline-toolbar__dropdown", conversionTogglerHidden: "ce-inline-toolbar__dropdown--hidden", conversionTogglerContent: "ce-inline-toolbar__dropdown-content", togglerAndButtonsWrapper: "ce-inline-toolbar__toggler-and-button-wrapper" }, e3.opened = false, e3.toolbarVerticalMargin = 5, e3.buttonsList = null, e3.width = 0, e3.flipper = null, e3.tooltip = new m.default(), e3;
          }
          return (0, s.default)(o3, [{ key: "toggleReadOnly", value: function(t3) {
            t3 ? (this.destroy(), this.Editor.ConversionToolbar.destroy()) : this.make();
          } }, { key: "tryToShow", value: function() {
            var t3 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0], e3 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
            this.allowedToShow() ? (this.move(), this.open(e3), this.Editor.Toolbar.close()) : t3 && this.close();
          } }, { key: "move", value: function() {
            var t3 = p.default.rect, e3 = this.Editor.UI.nodes.wrapper.getBoundingClientRect(), n3 = { x: t3.x - e3.left, y: t3.y + t3.height - e3.top + this.toolbarVerticalMargin };
            t3.width && (n3.x += Math.floor(t3.width / 2));
            var o4 = n3.x - this.width / 2, r3 = n3.x + this.width / 2;
            this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarLeftOriented, o4 < this.Editor.UI.contentRect.left), this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarRightOriented, r3 > this.Editor.UI.contentRect.right), this.nodes.wrapper.style.left = Math.floor(n3.x) + "px", this.nodes.wrapper.style.top = Math.floor(n3.y) + "px";
          } }, { key: "close", value: function() {
            var t3 = this;
            this.opened && (this.Editor.ReadOnly.isEnabled || (this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed), Array.from(this.toolsInstances.entries()).forEach(function(e3) {
              var n3 = (0, i2.default)(e3, 2), o4 = n3[0], r3 = n3[1], a2 = t3.getToolShortcut(o4);
              a2 && b.default.remove(t3.Editor.UI.nodes.redactor, a2), h.isFunction(r3.clear) && r3.clear();
            }), this.opened = false, this.flipper.deactivate(), this.Editor.ConversionToolbar.close()));
          } }, { key: "open", value: function() {
            var t3 = !(arguments.length > 0 && arguments[0] !== void 0) || arguments[0];
            if (!this.opened) {
              this.addToolsFiltered(), this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed), this.buttonsList = this.nodes.buttons.querySelectorAll(".".concat(this.CSS.inlineToolButton)), this.opened = true, t3 && this.Editor.ConversionToolbar.hasTools() ? this.setConversionTogglerContent() : this.nodes.conversionToggler.hidden = true;
              var e3 = Array.from(this.buttonsList);
              e3.unshift(this.nodes.conversionToggler), e3 = e3.filter(function(t4) {
                return !t4.hidden;
              }), this.flipper.activate(e3);
            }
          } }, { key: "containsNode", value: function(t3) {
            return this.nodes.wrapper.contains(t3);
          } }, { key: "destroy", value: function() {
            this.flipper && (this.flipper.deactivate(), this.flipper = null), this.removeAllNodes(), this.tooltip.destroy();
          } }, { key: "make", value: function() {
            var t3 = this;
            this.nodes.wrapper = d.default.make("div", [this.CSS.inlineToolbar].concat((0, r2.default)(this.isRtl ? [this.Editor.UI.CSS.editorRtlFix] : []))), this.nodes.togglerAndButtonsWrapper = d.default.make("div", this.CSS.togglerAndButtonsWrapper), this.nodes.buttons = d.default.make("div", this.CSS.buttonsWrapper), this.nodes.actions = d.default.make("div", this.CSS.actionsWrapper), this.listeners.on(this.nodes.wrapper, "mousedown", function(e3) {
              e3.target.closest(".".concat(t3.CSS.actionsWrapper)) || e3.preventDefault();
            }), d.default.append(this.nodes.wrapper, [this.nodes.togglerAndButtonsWrapper, this.nodes.actions]), d.default.append(this.Editor.UI.nodes.wrapper, this.nodes.wrapper), this.addConversionToggler(), d.default.append(this.nodes.togglerAndButtonsWrapper, this.nodes.buttons), this.prepareConversionToolbar(), this.recalculateWidth(), this.enableFlipper();
          } }, { key: "allowedToShow", value: function() {
            var t3 = p.default.get(), e3 = p.default.text;
            if (!t3 || !t3.anchorNode)
              return false;
            if (t3.isCollapsed || e3.length < 1)
              return false;
            var n3 = d.default.isElement(t3.anchorNode) ? t3.anchorNode : t3.anchorNode.parentElement;
            if (t3 && ["IMG", "INPUT"].includes(n3.tagName))
              return false;
            if (n3.closest('[contenteditable="true"]') === null)
              return false;
            var o4 = this.Editor.BlockManager.getBlock(t3.anchorNode);
            return !!o4 && o4.tool.inlineTools.size !== 0;
          } }, { key: "recalculateWidth", value: function() {
            this.width = this.nodes.wrapper.offsetWidth;
          } }, { key: "addConversionToggler", value: function() {
            var t3 = this;
            this.nodes.conversionToggler = d.default.make("div", this.CSS.conversionToggler), this.nodes.conversionTogglerContent = d.default.make("div", this.CSS.conversionTogglerContent);
            var e3 = d.default.svg("toggler-down", 13, 13);
            this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent), this.nodes.conversionToggler.appendChild(e3), this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler), this.listeners.on(this.nodes.conversionToggler, "click", function() {
              t3.Editor.ConversionToolbar.toggle(function(e4) {
                !e4 && t3.opened ? t3.flipper.activate() : t3.opened && t3.flipper.deactivate();
              });
            }), this.tooltip.onHover(this.nodes.conversionToggler, g.default.ui(y.I18nInternalNS.ui.inlineToolbar.converter, "Convert to"), { placement: "top", hidingDelay: 100 });
          } }, { key: "setConversionTogglerContent", value: function() {
            var t3 = this.Editor.BlockManager.currentBlock, e3 = t3.name, n3 = t3.tool.conversionConfig, o4 = n3 && n3.export;
            this.nodes.conversionToggler.hidden = !o4, this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden, !o4);
            var r3 = t3.tool.toolbox || {};
            this.nodes.conversionTogglerContent.innerHTML = r3.icon || r3.title || h.capitalize(e3);
          } }, { key: "prepareConversionToolbar", value: function() {
            var t3 = this.Editor.ConversionToolbar.make();
            d.default.append(this.nodes.wrapper, t3);
          } }, { key: "addToolsFiltered", value: function() {
            var t3 = this, e3 = p.default.get(), n3 = this.Editor.BlockManager.getBlock(e3.anchorNode);
            this.nodes.buttons.innerHTML = "", this.nodes.actions.innerHTML = "", this.toolsInstances = new Map(), Array.from(n3.tool.inlineTools.values()).forEach(function(e4) {
              t3.addTool(e4);
            }), this.recalculateWidth();
          } }, { key: "addTool", value: function(t3) {
            var e3 = this, n3 = t3.create(), o4 = n3.render();
            if (o4) {
              if (o4.dataset.tool = t3.name, this.nodes.buttons.appendChild(o4), this.toolsInstances.set(t3.name, n3), h.isFunction(n3.renderActions)) {
                var r3 = n3.renderActions();
                this.nodes.actions.appendChild(r3);
              }
              this.listeners.on(o4, "click", function(t4) {
                e3.toolClicked(n3), t4.preventDefault();
              });
              var i3 = this.getToolShortcut(t3.name);
              if (i3)
                try {
                  this.enableShortcuts(n3, i3);
                } catch (t4) {
                }
              var a2 = d.default.make("div"), s2 = g.default.t(y.I18nInternalNS.toolNames, t3.title || h.capitalize(t3.name));
              a2.appendChild(d.default.text(s2)), i3 && a2.appendChild(d.default.make("div", this.CSS.inlineToolbarShortcut, { textContent: h.beautifyShortcut(i3) })), this.tooltip.onHover(o4, a2, { placement: "top", hidingDelay: 100 }), n3.checkState(p.default.get());
            } else
              h.log("Render method must return an instance of Node", "warn", t3.name);
          } }, { key: "getToolShortcut", value: function(t3) {
            var e3 = this.Editor.Tools, n3 = e3.inlineTools.get(t3), o4 = e3.internal.inlineTools;
            return Array.from(o4.keys()).includes(t3) ? this.inlineTools[t3][k.CommonInternalSettings.Shortcut] : n3.shortcut;
          } }, { key: "enableShortcuts", value: function(t3, e3) {
            var n3 = this;
            b.default.add({ name: e3, handler: function(e4) {
              var o4 = n3.Editor.BlockManager.currentBlock;
              o4 && o4.tool.enabledInlineTools && (e4.preventDefault(), n3.toolClicked(t3));
            }, on: this.Editor.UI.nodes.redactor });
          } }, { key: "toolClicked", value: function(t3) {
            var e3 = p.default.range;
            t3.surround(e3), this.checkToolsState();
          } }, { key: "checkToolsState", value: function() {
            this.toolsInstances.forEach(function(t3) {
              t3.checkState(p.default.get());
            });
          } }, { key: "enableFlipper", value: function() {
            this.flipper = new v.default({ focusedItemClass: this.CSS.focusedButton, allowArrows: false });
          } }, { key: "inlineTools", get: function() {
            var t3 = {};
            return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(function(e3) {
              var n3 = (0, i2.default)(e3, 2), o4 = n3[0], r3 = n3[1];
              t3[o4] = r3.create();
            }), t3;
          } }]), o3;
        }(f.default);
        o2.default = T, T.displayName = "InlineToolbar", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(9), n(15), n(7), n(60), n(66), n(59), n(84), n(112), n(82)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p, h, v, g, y) {
        var b = n(8), m = n(1);
        function k() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = m(r2), i2 = m(i2), a = m(a), s = m(s), l = m(l), c = m(c), u = m(u), f = b(f), d = m(d), h = m(h), g = m(g), y = m(y);
        var x = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (k()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3(t3) {
            var e3, i3 = t3.config, a2 = t3.eventsDispatcher;
            return (0, r2.default)(this, o3), (e3 = n2.call(this, { config: i3, eventsDispatcher: a2 })).nodes = { toolbox: null, buttons: [] }, e3.opened = false, e3.displayedToolsCount = 0, e3.flipper = null, e3.tooltip = new y.default(), e3;
          }
          return (0, i2.default)(o3, [{ key: "make", value: function() {
            this.nodes.toolbox = u.default.make("div", this.CSS.toolbox), this.addTools(), this.enableFlipper();
          } }, { key: "destroy", value: function() {
            this.flipper && (this.flipper.deactivate(), this.flipper = null), this.removeAllNodes(), this.removeAllShortcuts(), this.tooltip.destroy();
          } }, { key: "toolButtonActivate", value: function(t3, e3) {
            this.insertNewBlock(e3);
          } }, { key: "open", value: function() {
            this.isEmpty || (this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolbarHolderModifier), this.nodes.toolbox.classList.add(this.CSS.toolboxOpened), this.opened = true, this.flipper.activate());
          } }, { key: "close", value: function() {
            this.nodes.toolbox.classList.remove(this.CSS.toolboxOpened), this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolbarHolderModifier), this.opened = false, this.flipper.deactivate();
          } }, { key: "toggle", value: function() {
            this.opened ? this.close() : this.open();
          } }, { key: "addTools", value: function() {
            var t3 = this, e3 = this.Editor.Tools.blockTools;
            Array.from(e3.values()).forEach(function(e4) {
              return t3.addTool(e4);
            });
          } }, { key: "addTool", value: function(t3) {
            var e3 = this, n3 = t3.toolbox;
            if (n3)
              if (!n3 || n3.icon) {
                var o4 = u.default.make("li", [this.CSS.toolboxButton]);
                o4.dataset.tool = t3.name, o4.innerHTML = n3.icon, u.default.append(this.nodes.toolbox, o4), this.nodes.toolbox.appendChild(o4), this.nodes.buttons.push(o4), this.listeners.on(o4, "click", function(n4) {
                  e3.toolButtonActivate(n4, t3.name);
                });
                var r3 = this.drawTooltip(t3);
                this.tooltip.onHover(o4, r3, { placement: "bottom", hidingDelay: 200 });
                var i3 = t3.shortcut;
                i3 && this.enableShortcut(t3.name, i3), this.displayedToolsCount++;
              } else
                f.log("Toolbar icon is missed. Tool %o skipped", "warn", t3.name);
          } }, { key: "drawTooltip", value: function(t3) {
            var e3 = t3.toolbox || {}, n3 = h.default.t(v.I18nInternalNS.toolNames, e3.title || t3.name), o4 = t3.shortcut, r3 = u.default.make("div", this.CSS.buttonTooltip), i3 = document.createTextNode(f.capitalize(n3));
            return r3.appendChild(i3), o4 && (o4 = f.beautifyShortcut(o4), r3.appendChild(u.default.make("div", this.CSS.buttonShortcut, { textContent: o4 }))), r3;
          } }, { key: "enableShortcut", value: function(t3, e3) {
            var n3 = this;
            g.default.add({ name: e3, handler: function(e4) {
              e4.preventDefault(), n3.insertNewBlock(t3);
            }, on: this.Editor.UI.nodes.redactor });
          } }, { key: "removeAllShortcuts", value: function() {
            var t3 = this, e3 = this.Editor.Tools.blockTools;
            Array.from(e3.values()).forEach(function(e4) {
              var n3 = e4.shortcut;
              n3 && g.default.remove(t3.Editor.UI.nodes.redactor, n3);
            });
          } }, { key: "enableFlipper", value: function() {
            var t3 = Array.from(this.nodes.toolbox.childNodes);
            this.flipper = new d.default({ items: t3, focusedItemClass: this.CSS.toolboxButtonActive });
          } }, { key: "insertNewBlock", value: function(t3) {
            var e3 = this.Editor, n3 = e3.BlockManager, o4 = e3.Caret, r3 = n3.currentBlock, i3 = n3.insert({ tool: t3, replace: r3.isEmpty });
            i3.call(p.BlockToolAPI.APPEND_CALLBACK), this.Editor.Caret.setToBlock(i3), i3.inputs.length === 0 && (i3 === n3.lastBlock ? (n3.insertAtEnd(), o4.setToBlock(n3.lastBlock)) : o4.setToBlock(n3.nextBlock)), this.Editor.Toolbar.close();
          } }, { key: "CSS", get: function() {
            return { toolbox: "ce-toolbox", toolboxButton: "ce-toolbox__button", toolboxButtonActive: "ce-toolbox__button--active", toolboxOpened: "ce-toolbox--opened", openedToolbarHolderModifier: "codex-editor--toolbox-opened", buttonTooltip: "ce-toolbox-button-tooltip", buttonShortcut: "ce-toolbox-button-tooltip__shortcut" };
          } }, { key: "isEmpty", get: function() {
            return this.displayedToolsCount === 0;
          } }]), o3;
        }(c.default);
        o2.default = x, x.displayName = "Toolbox", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(42), n(30), n(23), n(24), n(2), n(3), n(5), n(6), n(4), n(80), n(384), n(9), n(7), n(385), n(386), n(387), n(388), n(389), n(393), n(394), n(395), n(184)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p, h, v, g, y, b, m, k, x, w, S, T, E) {
        var B = n(8), C = n(1);
        function _() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = C(r2), i2 = C(i2), a = C(a), s = C(s), l = C(l), c = C(c), u = C(u), f = C(f), d = C(d), p = C(p), h = C(h), v = C(v), g = B(g), y = C(y), b = C(b), m = C(m), k = C(k), x = C(x), w = C(w), S = C(S), T = C(T), E = C(E);
        var O = function(t2, e2, n2, o3) {
          var r3, i3 = arguments.length, a2 = i3 < 3 ? e2 : o3 === null ? o3 = Object.getOwnPropertyDescriptor(e2, n2) : o3;
          if ((typeof Reflect == "undefined" ? "undefined" : (0, p.default)(Reflect)) === "object" && typeof Reflect.decorate == "function")
            a2 = Reflect.decorate(t2, e2, n2, o3);
          else
            for (var s2 = t2.length - 1; s2 >= 0; s2--)
              (r3 = t2[s2]) && (a2 = (i3 < 3 ? r3(a2) : i3 > 3 ? r3(e2, n2, a2) : r3(e2, n2)) || a2);
          return i3 > 3 && a2 && Object.defineProperty(e2, n2, a2), a2;
        }, I = function(t2) {
          (0, u.default)(p2, t2);
          var e2, n2, o3 = (e2 = p2, function() {
            var t3, n3 = (0, d.default)(e2);
            if (_()) {
              var o4 = (0, d.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, f.default)(this, t3);
          });
          function p2() {
            var t3;
            return (0, l.default)(this, p2), (t3 = o3.apply(this, arguments)).stubTool = "stub", t3.toolsAvailable = new E.default(), t3.toolsUnavailable = new E.default(), t3;
          }
          return (0, c.default)(p2, [{ key: "prepare", value: (n2 = (0, s.default)(a.default.mark(function t3() {
            var e3, n3, o4 = this;
            return a.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    if (this.validateTools(), this.config.tools = g.deepMerge({}, this.internalTools, this.config.tools), Object.prototype.hasOwnProperty.call(this.config, "tools") && Object.keys(this.config.tools).length !== 0) {
                      t4.next = 4;
                      break;
                    }
                    throw Error("Can't start without tools");
                  case 4:
                    if (e3 = this.prepareConfig(), this.factory = new x.default(e3, this.config, this.Editor.API), (n3 = this.getListOfPrepareFunctions(e3)).length !== 0) {
                      t4.next = 9;
                      break;
                    }
                    return t4.abrupt("return", Promise.resolve());
                  case 9:
                    return t4.next = 11, g.sequence(n3, function(t5) {
                      o4.toolPrepareMethodSuccess(t5);
                    }, function(t5) {
                      o4.toolPrepareMethodFallback(t5);
                    });
                  case 11:
                    this.prepareBlockTools();
                  case 12:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function() {
            return n2.apply(this, arguments);
          }) }, { key: "getAllInlineToolsSanitizeConfig", value: function() {
            var t3 = {};
            return Array.from(this.inlineTools.values()).forEach(function(e3) {
              Object.assign(t3, e3.sanitizeConfig);
            }), t3;
          } }, { key: "destroy", value: function() {
            Object.values(this.available).forEach(function() {
              var t3 = (0, s.default)(a.default.mark(function t4(e3) {
                return a.default.wrap(function(t5) {
                  for (; ; )
                    switch (t5.prev = t5.next) {
                      case 0:
                        if (!g.isFunction(e3.reset)) {
                          t5.next = 3;
                          break;
                        }
                        return t5.next = 3, e3.reset();
                      case 3:
                      case "end":
                        return t5.stop();
                    }
                }, t4);
              }));
              return function(e3) {
                return t3.apply(this, arguments);
              };
            }());
          } }, { key: "toolPrepareMethodSuccess", value: function(t3) {
            var e3 = this.factory.get(t3.toolName);
            if (e3.isInline()) {
              var n3 = ["render", "surround", "checkState"].filter(function(t4) {
                return !e3.create()[t4];
              });
              if (n3.length)
                return g.log("Incorrect Inline Tool: ".concat(e3.name, ". Some of required methods is not implemented %o"), "warn", n3), void this.toolsUnavailable.set(e3.name, e3);
            }
            this.toolsAvailable.set(e3.name, e3);
          } }, { key: "toolPrepareMethodFallback", value: function(t3) {
            this.toolsUnavailable.set(t3.toolName, this.factory.get(t3.toolName));
          } }, { key: "getListOfPrepareFunctions", value: function(t3) {
            var e3 = [];
            return Object.entries(t3).forEach(function(t4) {
              var n3 = (0, i2.default)(t4, 2), o4 = n3[0], r3 = n3[1];
              e3.push({ function: g.isFunction(r3.class.prepare) ? r3.class.prepare : function() {
              }, data: { toolName: o4 } });
            }), e3;
          } }, { key: "prepareBlockTools", value: function() {
            var t3 = this;
            Array.from(this.blockTools.values()).forEach(function(e3) {
              t3.assignInlineToolsToBlockTool(e3), t3.assignBlockTunesToBlockTool(e3);
            });
          } }, { key: "assignInlineToolsToBlockTool", value: function(t3) {
            var e3 = this;
            this.config.inlineToolbar !== false && (t3.enabledInlineTools !== true ? Array.isArray(t3.enabledInlineTools) && (t3.inlineTools = new E.default(t3.enabledInlineTools.map(function(t4) {
              return [t4, e3.inlineTools.get(t4)];
            }))) : t3.inlineTools = new E.default(Array.isArray(this.config.inlineToolbar) ? this.config.inlineToolbar.map(function(t4) {
              return [t4, e3.inlineTools.get(t4)];
            }) : Array.from(this.inlineTools.entries())));
          } }, { key: "assignBlockTunesToBlockTool", value: function(t3) {
            var e3 = this;
            if (t3.enabledBlockTunes !== false)
              if (Array.isArray(t3.enabledBlockTunes)) {
                var n3 = new E.default(t3.enabledBlockTunes.map(function(t4) {
                  return [t4, e3.blockTunes.get(t4)];
                }));
                t3.tunes = new E.default([].concat((0, r2.default)(n3), (0, r2.default)(this.blockTunes.internalTools)));
              } else if (Array.isArray(this.config.tunes)) {
                var o4 = new E.default(this.config.tunes.map(function(t4) {
                  return [t4, e3.blockTunes.get(t4)];
                }));
                t3.tunes = new E.default([].concat((0, r2.default)(o4), (0, r2.default)(this.blockTunes.internalTools)));
              } else
                t3.tunes = this.blockTunes.internalTools;
          } }, { key: "validateTools", value: function() {
            for (var t3 in this.config.tools)
              if (Object.prototype.hasOwnProperty.call(this.config.tools, t3)) {
                if (t3 in this.internalTools)
                  return;
                var e3 = this.config.tools[t3];
                if (!g.isFunction(e3) && !g.isFunction(e3.class))
                  throw Error("Tool \xAB".concat(t3, "\xBB must be a constructor function or an object with function in the \xABclass\xBB property"));
              }
          } }, { key: "prepareConfig", value: function() {
            var t3 = {};
            for (var e3 in this.config.tools)
              g.isObject(this.config.tools[e3]) ? t3[e3] = this.config.tools[e3] : t3[e3] = { class: this.config.tools[e3] };
            return t3;
          } }, { key: "available", get: function() {
            return this.toolsAvailable;
          } }, { key: "unavailable", get: function() {
            return this.toolsUnavailable;
          } }, { key: "inlineTools", get: function() {
            return this.available.inlineTools;
          } }, { key: "blockTools", get: function() {
            return this.available.blockTools;
          } }, { key: "blockTunes", get: function() {
            return this.available.blockTunes;
          } }, { key: "defaultTool", get: function() {
            return this.blockTools.get(this.config.defaultBlock);
          } }, { key: "internal", get: function() {
            return this.available.internalTools;
          } }, { key: "internalTools", get: function() {
            return { bold: { class: y.default, isInternal: true }, italic: { class: b.default, isInternal: true }, link: { class: m.default, isInternal: true }, paragraph: { class: h.default, inlineToolbar: true, isInternal: true }, stub: { class: k.default, isInternal: true }, moveUp: { class: T.default, isInternal: true }, delete: { class: S.default, isInternal: true }, moveDown: { class: w.default, isInternal: true } };
          } }]), p2;
        }(v.default);
        o2.default = I, I.displayName = "Tools", O([g.cacheable], I.prototype, "getAllInlineToolsSanitizeConfig", null), t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(30), n(2), n(3), n(5), n(6), n(4), n(150)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u) {
        var f = n(1);
        function d() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = f(r2), i2 = f(i2), a = f(a), s = f(s), l = f(l), c = f(c);
        var p = function(t2) {
          (0, s.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, c.default)(e2);
            if (d()) {
              var o4 = (0, c.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, l.default)(this, t3);
          });
          function o3() {
            return (0, i2.default)(this, o3), n2.apply(this, arguments);
          }
          return (0, a.default)(o3, [{ key: "blockTools", get: function() {
            return new o3(Array.from(this.entries()).filter(function(t3) {
              return (0, r2.default)(t3, 2)[1].isBlock();
            }));
          } }, { key: "inlineTools", get: function() {
            return new o3(Array.from(this.entries()).filter(function(t3) {
              return (0, r2.default)(t3, 2)[1].isInline();
            }));
          } }, { key: "blockTunes", get: function() {
            return new o3(Array.from(this.entries()).filter(function(t3) {
              return (0, r2.default)(t3, 2)[1].isTune();
            }));
          } }, { key: "internalTools", get: function() {
            return new o3(Array.from(this.entries()).filter(function(t3) {
              return (0, r2.default)(t3, 2)[1].isInternal;
            }));
          } }, { key: "externalTools", get: function() {
            return new o3(Array.from(this.entries()).filter(function(t3) {
              return !(0, r2.default)(t3, 2)[1].isInternal;
            }));
          } }]), o3;
        }((0, (u = f(u)).default)(Map));
        o2.default = p, p.displayName = "ToolsCollection", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(30), n(42), n(23), n(24), n(2), n(3), n(5), n(6), n(4), n(396), n(9), n(15), n(7), n(25), n(66), n(60)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p, h, v, g, y, b, m) {
        var k = n(8), x = n(1);
        function w() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = x(r2), i2 = x(i2), a = x(a), s = x(s), l = x(l), c = x(c), u = x(u), f = x(f), d = x(d), p = x(p), h = x(h), v = x(v), g = k(g), y = x(y), b = x(b), m = x(m);
        var S = function(t2) {
          (0, u.default)(k2, t2);
          var e2, o3, h2 = (e2 = k2, function() {
            var t3, n2 = (0, d.default)(e2);
            if (w()) {
              var o4 = (0, d.default)(this).constructor;
              t3 = Reflect.construct(n2, arguments, o4);
            } else
              t3 = n2.apply(this, arguments);
            return (0, f.default)(this, t3);
          });
          function k2() {
            var t3;
            return (0, l.default)(this, k2), (t3 = h2.apply(this, arguments)).isMobile = false, t3.contentRectCache = void 0, t3.resizeDebouncer = g.debounce(function() {
              t3.windowResize();
            }, 200), t3;
          }
          return (0, c.default)(k2, [{ key: "addLoader", value: function() {
            this.nodes.loader = v.default.make("div", this.CSS.editorLoader), this.nodes.wrapper.prepend(this.nodes.loader), this.nodes.redactor.classList.add(this.CSS.editorZoneHidden);
          } }, { key: "removeLoader", value: function() {
            this.nodes.loader.remove(), this.nodes.redactor.classList.remove(this.CSS.editorZoneHidden);
          } }, { key: "prepare", value: (o3 = (0, s.default)(a.default.mark(function t3() {
            return a.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    this.checkIsMobile(), this.make(), this.addLoader(), this.appendSVGSprite(), this.loadStyles();
                  case 5:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function() {
            return o3.apply(this, arguments);
          }) }, { key: "toggleReadOnly", value: function(t3) {
            t3 ? this.disableModuleBindings() : this.enableModuleBindings();
          } }, { key: "checkEmptiness", value: function() {
            var t3 = this.Editor.BlockManager;
            this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty, t3.isEditorEmpty);
          } }, { key: "destroy", value: function() {
            this.nodes.holder.innerHTML = "";
          } }, { key: "closeAllToolbars", value: function() {
            var t3 = this.Editor, e3 = t3.Toolbox, n2 = t3.BlockSettings, o4 = t3.InlineToolbar, r3 = t3.ConversionToolbar;
            n2.close(), o4.close(), r3.close(), e3.close();
          } }, { key: "checkIsMobile", value: function() {
            this.isMobile = window.innerWidth < 650;
          } }, { key: "make", value: function() {
            this.nodes.holder = v.default.getHolder(this.config.holder), this.nodes.wrapper = v.default.make("div", [this.CSS.editorWrapper].concat((0, i2.default)(this.isRtl ? [this.CSS.editorRtlFix] : []))), this.nodes.redactor = v.default.make("div", this.CSS.editorZone), this.nodes.holder.offsetWidth < this.contentRect.width && this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow), this.nodes.redactor.style.paddingBottom = this.config.minHeight + "px", this.nodes.wrapper.appendChild(this.nodes.redactor), this.nodes.holder.appendChild(this.nodes.wrapper);
          } }, { key: "loadStyles", value: function() {
            var t3 = n(397);
            if (!v.default.get("editor-js-styles")) {
              var e3 = v.default.make("style", null, { id: "editor-js-styles", textContent: t3.toString() });
              v.default.prepend(document.head, e3);
            }
          } }, { key: "enableModuleBindings", value: function() {
            var t3 = this;
            this.readOnlyMutableListeners.on(this.nodes.redactor, "click", function(e3) {
              t3.redactorClicked(e3);
            }, false), this.readOnlyMutableListeners.on(this.nodes.redactor, "mousedown", function(e3) {
              t3.documentTouched(e3);
            }, true), this.readOnlyMutableListeners.on(this.nodes.redactor, "touchstart", function(e3) {
              t3.documentTouched(e3);
            }, true), this.readOnlyMutableListeners.on(document, "keydown", function(e3) {
              t3.documentKeydown(e3);
            }, true), this.readOnlyMutableListeners.on(document, "mousedown", function(e3) {
              t3.documentClicked(e3);
            }, true), this.readOnlyMutableListeners.on(document, "selectionchange", function(e3) {
              t3.selectionChanged(e3);
            }, true), this.readOnlyMutableListeners.on(window, "resize", function() {
              t3.resizeDebouncer();
            }, { passive: true });
          } }, { key: "disableModuleBindings", value: function() {
            this.readOnlyMutableListeners.clearAll();
          } }, { key: "windowResize", value: function() {
            this.contentRectCache = null, this.checkIsMobile();
          } }, { key: "documentKeydown", value: function(t3) {
            switch (t3.keyCode) {
              case g.keyCodes.ENTER:
                this.enterPressed(t3);
                break;
              case g.keyCodes.BACKSPACE:
                this.backspacePressed(t3);
                break;
              case g.keyCodes.ESC:
                this.escapePressed(t3);
                break;
              default:
                this.defaultBehaviour(t3);
            }
          } }, { key: "defaultBehaviour", value: function(t3) {
            var e3 = this.Editor.BlockManager.currentBlock, n2 = t3.target.closest(".".concat(this.CSS.editorWrapper)), o4 = t3.altKey || t3.ctrlKey || t3.metaKey || t3.shiftKey;
            e3 === void 0 || n2 !== null ? n2 || e3 && o4 || (this.Editor.BlockManager.dropPointer(), this.Editor.Toolbar.close()) : this.Editor.BlockEvents.keydown(t3);
          } }, { key: "backspacePressed", value: function(t3) {
            var e3 = this.Editor, n2 = e3.BlockManager, o4 = e3.BlockSelection, r3 = e3.Caret;
            if (o4.anyBlockSelected && !y.default.isSelectionExists) {
              var i3 = n2.removeSelectedBlocks();
              r3.setToBlock(n2.insertDefaultBlockAtIndex(i3, true), r3.positions.START), o4.clearSelection(t3), t3.preventDefault(), t3.stopPropagation(), t3.stopImmediatePropagation();
            }
          } }, { key: "escapePressed", value: function(t3) {
            this.Editor.BlockSelection.clearSelection(t3), this.Editor.Toolbox.opened ? this.Editor.Toolbox.close() : this.Editor.BlockSettings.opened ? this.Editor.BlockSettings.close() : this.Editor.ConversionToolbar.opened ? this.Editor.ConversionToolbar.close() : this.Editor.InlineToolbar.opened ? this.Editor.InlineToolbar.close() : this.Editor.Toolbar.close();
          } }, { key: "enterPressed", value: function(t3) {
            var e3 = this.Editor, n2 = e3.BlockManager, o4 = e3.BlockSelection, r3 = n2.currentBlockIndex >= 0;
            if (o4.anyBlockSelected && !y.default.isSelectionExists)
              return o4.clearSelection(t3), t3.preventDefault(), t3.stopImmediatePropagation(), void t3.stopPropagation();
            if (!this.someToolbarOpened && r3 && t3.target.tagName === "BODY") {
              var i3 = this.Editor.BlockManager.insert();
              this.Editor.Caret.setToBlock(i3), this.Editor.BlockManager.highlightCurrentNode(), this.Editor.Toolbar.move(), this.Editor.Toolbar.plusButton.show();
            }
            this.Editor.BlockSelection.clearSelection(t3);
          } }, { key: "documentClicked", value: function(t3) {
            if (t3.isTrusted) {
              var e3 = t3.target;
              this.nodes.holder.contains(e3) || y.default.isAtEditor || (this.Editor.BlockManager.dropPointer(), this.Editor.InlineToolbar.close(), this.Editor.Toolbar.close(), this.Editor.ConversionToolbar.close()), this.Editor.BlockSelection.clearSelection(t3);
            }
          } }, { key: "documentTouched", value: function(t3) {
            var e3 = t3.target;
            if (e3 === this.nodes.redactor) {
              var n2 = t3 instanceof MouseEvent ? t3.clientX : t3.touches[0].clientX, o4 = t3 instanceof MouseEvent ? t3.clientY : t3.touches[0].clientY;
              e3 = document.elementFromPoint(n2, o4);
            }
            try {
              this.Editor.BlockManager.setCurrentBlockByChildNode(e3), this.Editor.BlockManager.highlightCurrentNode();
            } catch (t4) {
              this.Editor.RectangleSelection.isRectActivated() || this.Editor.Caret.setToTheLastBlock();
            }
            this.Editor.Toolbar.open(), this.Editor.Toolbar.plusButton.hide();
          } }, { key: "redactorClicked", value: function(t3) {
            var e3 = this.Editor.BlockSelection;
            if (y.default.isCollapsed) {
              var n2 = function() {
                t3.stopImmediatePropagation(), t3.stopPropagation();
              }, o4 = t3.target, r3 = t3.metaKey || t3.ctrlKey;
              if (v.default.isAnchor(o4) && r3) {
                n2();
                var i3 = o4.getAttribute("href"), a2 = g.getValidUrl(i3);
                g.openTab(a2);
              } else {
                if (t3.target instanceof Element && t3.target.isEqualNode(this.nodes.redactor) && !e3.anyBlockSelected) {
                  n2();
                  var s2 = this.Editor, l2 = s2.BlockManager, c2 = s2.Caret, u2 = s2.Toolbar;
                  l2.lastBlock.tool.isDefault && l2.lastBlock.isEmpty || l2.insertAtEnd(), c2.setToTheLastBlock(), u2.move();
                }
                this.Editor.BlockManager.currentBlock.tool.isDefault && (n2(), this.Editor.BlockManager.currentBlock.isEmpty && this.Editor.Toolbar.plusButton.show());
              }
            }
          } }, { key: "selectionChanged", value: function(t3) {
            var e3 = this.Editor, n2 = e3.CrossBlockSelection, o4 = e3.BlockSelection, r3 = y.default.anchorElement;
            if (n2.isCrossBlockSelectionStarted && o4.anyBlockSelected && y.default.get().removeAllRanges(), r3) {
              var i3 = r3.closest(".".concat(b.default.CSS.content)) === null;
              if (i3 && (this.Editor.InlineToolbar.containsNode(r3) || this.Editor.InlineToolbar.close(), r3.dataset.inlineToolbar !== "true"))
                return;
              this.Editor.BlockManager.currentBlock || this.Editor.BlockManager.setCurrentBlockByChildNode(r3);
              var a2 = i3 !== true;
              this.Editor.InlineToolbar.tryToShow(true, a2);
            } else
              y.default.range || this.Editor.InlineToolbar.close();
          } }, { key: "appendSVGSprite", value: function() {
            var t3 = v.default.make("div");
            t3.hidden = true, t3.style.display = "none", t3.innerHTML = p.default, v.default.append(this.nodes.wrapper, t3);
          } }, { key: "CSS", get: function() {
            return { editorWrapper: "codex-editor", editorWrapperNarrow: "codex-editor--narrow", editorZone: "codex-editor__redactor", editorZoneHidden: "codex-editor__redactor--hidden", editorLoader: "codex-editor__loader", editorEmpty: "codex-editor--empty", editorRtlFix: "codex-editor--rtl" };
          } }, { key: "contentRect", get: function() {
            if (this.contentRectCache)
              return this.contentRectCache;
            var t3 = this.nodes.wrapper.querySelector(".".concat(b.default.CSS.content));
            return t3 ? (this.contentRectCache = t3.getBoundingClientRect(), this.contentRectCache) : { width: 650, left: 0, right: 0 };
          } }, { key: "someToolbarOpened", get: function() {
            var t3 = this.Editor, e3 = t3.Toolbox, n2 = t3.BlockSettings, o4 = t3.InlineToolbar, r3 = t3.ConversionToolbar;
            return n2.opened || o4.opened || r3.opened || e3.opened;
          } }, { key: "someFlipperButtonFocused", get: function() {
            return Object.entries(this.Editor).filter(function(t3) {
              var e3 = (0, r2.default)(t3, 2);
              return e3[0], e3[1].flipper instanceof m.default;
            }).some(function(t3) {
              var e3 = (0, r2.default)(t3, 2);
              return e3[0], e3[1].flipper.currentItem;
            });
          } }]), k2;
        }(h.default);
        o2.default = S, S.displayName = "UI", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      n(187), t.exports = n(359);
    }, function(t, e, n) {
      n(188);
    }, function(t, e, n) {
      n(189), n(332), n(334), n(337), n(339), n(341), n(343), n(345), n(347), n(349), n(351), n(353), n(355), n(144);
    }, function(t, e, n) {
      n(190), n(193), n(194), n(195), n(196), n(197), n(198), n(199), n(200), n(201), n(202), n(203), n(204), n(205), n(206), n(207), n(208), n(209), n(210), n(211), n(212), n(213), n(214), n(215), n(216), n(217), n(218), n(219), n(220), n(221), n(222), n(223), n(224), n(225), n(226), n(227), n(228), n(229), n(230), n(231), n(232), n(233), n(234), n(236), n(237), n(238), n(239), n(240), n(241), n(242), n(243), n(244), n(245), n(246), n(247), n(248), n(249), n(250), n(251), n(252), n(253), n(254), n(255), n(256), n(257), n(258), n(259), n(260), n(261), n(262), n(263), n(264), n(265), n(266), n(267), n(268), n(269), n(271), n(272), n(274), n(275), n(276), n(277), n(278), n(279), n(280), n(282), n(283), n(284), n(285), n(286), n(287), n(288), n(289), n(290), n(291), n(292), n(293), n(294), n(105), n(295), n(133), n(296), n(134), n(297), n(298), n(299), n(300), n(135), n(303), n(304), n(305), n(306), n(307), n(308), n(309), n(310), n(311), n(312), n(313), n(314), n(315), n(316), n(317), n(318), n(319), n(320), n(321), n(322), n(323), n(324), n(325), n(326), n(327), n(328), n(329), n(330), n(331), t.exports = n(17);
    }, function(t, e, n) {
      var o = n(10), r = n(26), i = n(18), a = n(0), s = n(21), l = n(41).KEY, c = n(11), u = n(68), f = n(53), d = n(44), p = n(14), h = n(86), v = n(114), g = n(192), y = n(71), b = n(12), m = n(13), k = n(20), x = n(28), w = n(40), S = n(43), T = n(48), E = n(117), B = n(34), C = n(70), _ = n(19), O = n(46), I = B.f, M = _.f, R = E.f, A = o.Symbol, N = o.JSON, P = N && N.stringify, L = p("_hidden"), D = p("toPrimitive"), j = {}.propertyIsEnumerable, F = u("symbol-registry"), U = u("symbols"), H = u("op-symbols"), z = Object.prototype, W = typeof A == "function" && !!C.f, Y = o.QObject, V = !Y || !Y.prototype || !Y.prototype.findChild, X = i && c(function() {
        return T(M({}, "a", { get: function() {
          return M(this, "a", { value: 7 }).a;
        } })).a != 7;
      }) ? function(t2, e2, n2) {
        var o2 = I(z, e2);
        o2 && delete z[e2], M(t2, e2, n2), o2 && t2 !== z && M(z, e2, o2);
      } : M, G = function(t2) {
        var e2 = U[t2] = T(A.prototype);
        return e2._k = t2, e2;
      }, K = W && typeof A.iterator == "symbol" ? function(t2) {
        return typeof t2 == "symbol";
      } : function(t2) {
        return t2 instanceof A;
      }, Z = function(t2, e2, n2) {
        return t2 === z && Z(H, e2, n2), b(t2), e2 = w(e2, true), b(n2), r(U, e2) ? (n2.enumerable ? (r(t2, L) && t2[L][e2] && (t2[L][e2] = false), n2 = T(n2, { enumerable: S(0, false) })) : (r(t2, L) || M(t2, L, S(1, {})), t2[L][e2] = true), X(t2, e2, n2)) : M(t2, e2, n2);
      }, q = function(t2, e2) {
        b(t2);
        for (var n2, o2 = g(e2 = x(e2)), r2 = 0, i2 = o2.length; i2 > r2; )
          Z(t2, n2 = o2[r2++], e2[n2]);
        return t2;
      }, J = function(t2) {
        var e2 = j.call(this, t2 = w(t2, true));
        return !(this === z && r(U, t2) && !r(H, t2)) && (!(e2 || !r(this, t2) || !r(U, t2) || r(this, L) && this[L][t2]) || e2);
      }, $ = function(t2, e2) {
        if (t2 = x(t2), e2 = w(e2, true), t2 !== z || !r(U, e2) || r(H, e2)) {
          var n2 = I(t2, e2);
          return !n2 || !r(U, e2) || r(t2, L) && t2[L][e2] || (n2.enumerable = true), n2;
        }
      }, Q = function(t2) {
        for (var e2, n2 = R(x(t2)), o2 = [], i2 = 0; n2.length > i2; )
          r(U, e2 = n2[i2++]) || e2 == L || e2 == l || o2.push(e2);
        return o2;
      }, tt = function(t2) {
        for (var e2, n2 = t2 === z, o2 = R(n2 ? H : x(t2)), i2 = [], a2 = 0; o2.length > a2; )
          !r(U, e2 = o2[a2++]) || n2 && !r(z, e2) || i2.push(U[e2]);
        return i2;
      };
      W || (s((A = function() {
        if (this instanceof A)
          throw TypeError("Symbol is not a constructor!");
        var t2 = d(arguments.length > 0 ? arguments[0] : void 0), e2 = function(n2) {
          this === z && e2.call(H, n2), r(this, L) && r(this[L], t2) && (this[L][t2] = false), X(this, t2, S(1, n2));
        };
        return i && V && X(z, t2, { configurable: true, set: e2 }), G(t2);
      }).prototype, "toString", function() {
        return this._k;
      }), B.f = $, _.f = Z, n(49).f = E.f = Q, n(62).f = J, C.f = tt, i && !n(45) && s(z, "propertyIsEnumerable", J, true), h.f = function(t2) {
        return G(p(t2));
      }), a(a.G + a.W + a.F * !W, { Symbol: A });
      for (var et = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), nt = 0; et.length > nt; )
        p(et[nt++]);
      for (var ot = O(p.store), rt = 0; ot.length > rt; )
        v(ot[rt++]);
      a(a.S + a.F * !W, "Symbol", { for: function(t2) {
        return r(F, t2 += "") ? F[t2] : F[t2] = A(t2);
      }, keyFor: function(t2) {
        if (!K(t2))
          throw TypeError(t2 + " is not a symbol!");
        for (var e2 in F)
          if (F[e2] === t2)
            return e2;
      }, useSetter: function() {
        V = true;
      }, useSimple: function() {
        V = false;
      } }), a(a.S + a.F * !W, "Object", { create: function(t2, e2) {
        return e2 === void 0 ? T(t2) : q(T(t2), e2);
      }, defineProperty: Z, defineProperties: q, getOwnPropertyDescriptor: $, getOwnPropertyNames: Q, getOwnPropertySymbols: tt });
      var it = c(function() {
        C.f(1);
      });
      a(a.S + a.F * it, "Object", { getOwnPropertySymbols: function(t2) {
        return C.f(k(t2));
      } }), N && a(a.S + a.F * (!W || c(function() {
        var t2 = A();
        return P([t2]) != "[null]" || P({ a: t2 }) != "{}" || P(Object(t2)) != "{}";
      })), "JSON", { stringify: function(t2) {
        for (var e2, n2, o2 = [t2], r2 = 1; arguments.length > r2; )
          o2.push(arguments[r2++]);
        if (n2 = e2 = o2[1], (m(e2) || t2 !== void 0) && !K(t2))
          return y(e2) || (e2 = function(t3, e3) {
            if (typeof n2 == "function" && (e3 = n2.call(this, t3, e3)), !K(e3))
              return e3;
          }), o2[1] = e2, P.apply(N, o2);
      } }), A.prototype[D] || n(27)(A.prototype, D, A.prototype.valueOf), f(A, "Symbol"), f(Math, "Math", true), f(o.JSON, "JSON", true);
    }, function(t, e, n) {
      t.exports = n(68)("native-function-to-string", Function.toString);
    }, function(t, e, n) {
      var o = n(46), r = n(70), i = n(62);
      t.exports = function(t2) {
        var e2 = o(t2), n2 = r.f;
        if (n2)
          for (var a, s = n2(t2), l = i.f, c = 0; s.length > c; )
            l.call(t2, a = s[c++]) && e2.push(a);
        return e2;
      };
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Object", { create: n(48) });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S + o.F * !n(18), "Object", { defineProperty: n(19).f });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S + o.F * !n(18), "Object", { defineProperties: n(116) });
    }, function(t, e, n) {
      var o = n(28), r = n(34).f;
      n(35)("getOwnPropertyDescriptor", function() {
        return function(t2, e2) {
          return r(o(t2), e2);
        };
      });
    }, function(t, e, n) {
      var o = n(20), r = n(50);
      n(35)("getPrototypeOf", function() {
        return function(t2) {
          return r(o(t2));
        };
      });
    }, function(t, e, n) {
      var o = n(20), r = n(46);
      n(35)("keys", function() {
        return function(t2) {
          return r(o(t2));
        };
      });
    }, function(t, e, n) {
      n(35)("getOwnPropertyNames", function() {
        return n(117).f;
      });
    }, function(t, e, n) {
      var o = n(13), r = n(41).onFreeze;
      n(35)("freeze", function(t2) {
        return function(e2) {
          return t2 && o(e2) ? t2(r(e2)) : e2;
        };
      });
    }, function(t, e, n) {
      var o = n(13), r = n(41).onFreeze;
      n(35)("seal", function(t2) {
        return function(e2) {
          return t2 && o(e2) ? t2(r(e2)) : e2;
        };
      });
    }, function(t, e, n) {
      var o = n(13), r = n(41).onFreeze;
      n(35)("preventExtensions", function(t2) {
        return function(e2) {
          return t2 && o(e2) ? t2(r(e2)) : e2;
        };
      });
    }, function(t, e, n) {
      var o = n(13);
      n(35)("isFrozen", function(t2) {
        return function(e2) {
          return !o(e2) || !!t2 && t2(e2);
        };
      });
    }, function(t, e, n) {
      var o = n(13);
      n(35)("isSealed", function(t2) {
        return function(e2) {
          return !o(e2) || !!t2 && t2(e2);
        };
      });
    }, function(t, e, n) {
      var o = n(13);
      n(35)("isExtensible", function(t2) {
        return function(e2) {
          return !!o(e2) && (!t2 || t2(e2));
        };
      });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S + o.F, "Object", { assign: n(118) });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Object", { is: n(119) });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Object", { setPrototypeOf: n(90).set });
    }, function(t, e, n) {
      var o = n(63), r = {};
      r[n(14)("toStringTag")] = "z", r + "" != "[object z]" && n(21)(Object.prototype, "toString", function() {
        return "[object " + o(this) + "]";
      }, true);
    }, function(t, e, n) {
      var o = n(0);
      o(o.P, "Function", { bind: n(120) });
    }, function(t, e, n) {
      var o = n(19).f, r = Function.prototype, i = /^\s*function ([^ (]*)/;
      "name" in r || n(18) && o(r, "name", { configurable: true, get: function() {
        try {
          return ("" + this).match(i)[1];
        } catch (t2) {
          return "";
        }
      } });
    }, function(t, e, n) {
      var o = n(13), r = n(50), i = n(14)("hasInstance"), a = Function.prototype;
      i in a || n(19).f(a, i, { value: function(t2) {
        if (typeof this != "function" || !o(t2))
          return false;
        if (!o(this.prototype))
          return t2 instanceof this;
        for (; t2 = r(t2); )
          if (this.prototype === t2)
            return true;
        return false;
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(122);
      o(o.G + o.F * (parseInt != r), { parseInt: r });
    }, function(t, e, n) {
      var o = n(0), r = n(123);
      o(o.G + o.F * (parseFloat != r), { parseFloat: r });
    }, function(t, e, n) {
      var o = n(10), r = n(26), i = n(37), a = n(92), s = n(40), l = n(11), c = n(49).f, u = n(34).f, f = n(19).f, d = n(54).trim, p = o.Number, h = p, v = p.prototype, g = i(n(48)(v)) == "Number", y = "trim" in String.prototype, b = function(t2) {
        var e2 = s(t2, false);
        if (typeof e2 == "string" && e2.length > 2) {
          var n2, o2, r2, i2 = (e2 = y ? e2.trim() : d(e2, 3)).charCodeAt(0);
          if (i2 === 43 || i2 === 45) {
            if ((n2 = e2.charCodeAt(2)) === 88 || n2 === 120)
              return NaN;
          } else if (i2 === 48) {
            switch (e2.charCodeAt(1)) {
              case 66:
              case 98:
                o2 = 2, r2 = 49;
                break;
              case 79:
              case 111:
                o2 = 8, r2 = 55;
                break;
              default:
                return +e2;
            }
            for (var a2, l2 = e2.slice(2), c2 = 0, u2 = l2.length; c2 < u2; c2++)
              if ((a2 = l2.charCodeAt(c2)) < 48 || a2 > r2)
                return NaN;
            return parseInt(l2, o2);
          }
        }
        return +e2;
      };
      if (!p(" 0o1") || !p("0b1") || p("+0x1")) {
        p = function(t2) {
          var e2 = arguments.length < 1 ? 0 : t2, n2 = this;
          return n2 instanceof p && (g ? l(function() {
            v.valueOf.call(n2);
          }) : i(n2) != "Number") ? a(new h(b(e2)), n2, p) : b(e2);
        };
        for (var m, k = n(18) ? c(h) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","), x = 0; k.length > x; x++)
          r(h, m = k[x]) && !r(p, m) && f(p, m, u(h, m));
        p.prototype = v, v.constructor = p, n(21)(o, "Number", p);
      }
    }, function(t, e, n) {
      var o = n(0), r = n(33), i = n(124), a = n(93), s = 1 .toFixed, l = Math.floor, c = [0, 0, 0, 0, 0, 0], u = "Number.toFixed: incorrect invocation!", f = function(t2, e2) {
        for (var n2 = -1, o2 = e2; ++n2 < 6; )
          o2 += t2 * c[n2], c[n2] = o2 % 1e7, o2 = l(o2 / 1e7);
      }, d = function(t2) {
        for (var e2 = 6, n2 = 0; --e2 >= 0; )
          n2 += c[e2], c[e2] = l(n2 / t2), n2 = n2 % t2 * 1e7;
      }, p = function() {
        for (var t2 = 6, e2 = ""; --t2 >= 0; )
          if (e2 !== "" || t2 === 0 || c[t2] !== 0) {
            var n2 = String(c[t2]);
            e2 = e2 === "" ? n2 : e2 + a.call("0", 7 - n2.length) + n2;
          }
        return e2;
      }, h = function(t2, e2, n2) {
        return e2 === 0 ? n2 : e2 % 2 == 1 ? h(t2, e2 - 1, n2 * t2) : h(t2 * t2, e2 / 2, n2);
      };
      o(o.P + o.F * (!!s && (8e-5 .toFixed(3) !== "0.000" || 0.9 .toFixed(0) !== "1" || 1.255 .toFixed(2) !== "1.25" || 1000000000000000100 .toFixed(0) !== "1000000000000000128") || !n(11)(function() {
        s.call({});
      })), "Number", { toFixed: function(t2) {
        var e2, n2, o2, s2, l2 = i(this, u), c2 = r(t2), v = "", g = "0";
        if (c2 < 0 || c2 > 20)
          throw RangeError(u);
        if (l2 != l2)
          return "NaN";
        if (l2 <= -1e21 || l2 >= 1e21)
          return String(l2);
        if (l2 < 0 && (v = "-", l2 = -l2), l2 > 1e-21)
          if (n2 = (e2 = function(t3) {
            for (var e3 = 0, n3 = t3; n3 >= 4096; )
              e3 += 12, n3 /= 4096;
            for (; n3 >= 2; )
              e3 += 1, n3 /= 2;
            return e3;
          }(l2 * h(2, 69, 1)) - 69) < 0 ? l2 * h(2, -e2, 1) : l2 / h(2, e2, 1), n2 *= 4503599627370496, (e2 = 52 - e2) > 0) {
            for (f(0, n2), o2 = c2; o2 >= 7; )
              f(1e7, 0), o2 -= 7;
            for (f(h(10, o2, 1), 0), o2 = e2 - 1; o2 >= 23; )
              d(1 << 23), o2 -= 23;
            d(1 << o2), f(1, 1), d(2), g = p();
          } else
            f(0, n2), f(1 << -e2, 0), g = p() + a.call("0", c2);
        return g = c2 > 0 ? v + ((s2 = g.length) <= c2 ? "0." + a.call("0", c2 - s2) + g : g.slice(0, s2 - c2) + "." + g.slice(s2 - c2)) : v + g;
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(11), i = n(124), a = 1 .toPrecision;
      o(o.P + o.F * (r(function() {
        return a.call(1, void 0) !== "1";
      }) || !r(function() {
        a.call({});
      })), "Number", { toPrecision: function(t2) {
        var e2 = i(this, "Number#toPrecision: incorrect invocation!");
        return t2 === void 0 ? a.call(e2) : a.call(e2, t2);
      } });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Number", { EPSILON: Math.pow(2, -52) });
    }, function(t, e, n) {
      var o = n(0), r = n(10).isFinite;
      o(o.S, "Number", { isFinite: function(t2) {
        return typeof t2 == "number" && r(t2);
      } });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Number", { isInteger: n(125) });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Number", { isNaN: function(t2) {
        return t2 != t2;
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(125), i = Math.abs;
      o(o.S, "Number", { isSafeInteger: function(t2) {
        return r(t2) && i(t2) <= 9007199254740991;
      } });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Number", { MAX_SAFE_INTEGER: 9007199254740991 });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Number", { MIN_SAFE_INTEGER: -9007199254740991 });
    }, function(t, e, n) {
      var o = n(0), r = n(123);
      o(o.S + o.F * (Number.parseFloat != r), "Number", { parseFloat: r });
    }, function(t, e, n) {
      var o = n(0), r = n(122);
      o(o.S + o.F * (Number.parseInt != r), "Number", { parseInt: r });
    }, function(t, e, n) {
      var o = n(0), r = n(126), i = Math.sqrt, a = Math.acosh;
      o(o.S + o.F * !(a && Math.floor(a(Number.MAX_VALUE)) == 710 && a(1 / 0) == 1 / 0), "Math", { acosh: function(t2) {
        return (t2 = +t2) < 1 ? NaN : t2 > 9490626562425156e-8 ? Math.log(t2) + Math.LN2 : r(t2 - 1 + i(t2 - 1) * i(t2 + 1));
      } });
    }, function(t, e, n) {
      var o = n(0), r = Math.asinh;
      o(o.S + o.F * !(r && 1 / r(0) > 0), "Math", { asinh: function t2(e2) {
        return isFinite(e2 = +e2) && e2 != 0 ? e2 < 0 ? -t2(-e2) : Math.log(e2 + Math.sqrt(e2 * e2 + 1)) : e2;
      } });
    }, function(t, e, n) {
      var o = n(0), r = Math.atanh;
      o(o.S + o.F * !(r && 1 / r(-0) < 0), "Math", { atanh: function(t2) {
        return (t2 = +t2) == 0 ? t2 : Math.log((1 + t2) / (1 - t2)) / 2;
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(94);
      o(o.S, "Math", { cbrt: function(t2) {
        return r(t2 = +t2) * Math.pow(Math.abs(t2), 1 / 3);
      } });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Math", { clz32: function(t2) {
        return (t2 >>>= 0) ? 31 - Math.floor(Math.log(t2 + 0.5) * Math.LOG2E) : 32;
      } });
    }, function(t, e, n) {
      var o = n(0), r = Math.exp;
      o(o.S, "Math", { cosh: function(t2) {
        return (r(t2 = +t2) + r(-t2)) / 2;
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(95);
      o(o.S + o.F * (r != Math.expm1), "Math", { expm1: r });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Math", { fround: n(235) });
    }, function(t, e, n) {
      var o = n(94), r = Math.pow, i = r(2, -52), a = r(2, -23), s = r(2, 127) * (2 - a), l = r(2, -126);
      t.exports = Math.fround || function(t2) {
        var e2, n2, r2 = Math.abs(t2), c = o(t2);
        return r2 < l ? c * (r2 / l / a + 1 / i - 1 / i) * l * a : (n2 = (e2 = (1 + a / i) * r2) - (e2 - r2)) > s || n2 != n2 ? c * (1 / 0) : c * n2;
      };
    }, function(t, e, n) {
      var o = n(0), r = Math.abs;
      o(o.S, "Math", { hypot: function(t2, e2) {
        for (var n2, o2, i = 0, a = 0, s = arguments.length, l = 0; a < s; )
          l < (n2 = r(arguments[a++])) ? (i = i * (o2 = l / n2) * o2 + 1, l = n2) : i += n2 > 0 ? (o2 = n2 / l) * o2 : n2;
        return l === 1 / 0 ? 1 / 0 : l * Math.sqrt(i);
      } });
    }, function(t, e, n) {
      var o = n(0), r = Math.imul;
      o(o.S + o.F * n(11)(function() {
        return r(4294967295, 5) != -5 || r.length != 2;
      }), "Math", { imul: function(t2, e2) {
        var n2 = +t2, o2 = +e2, r2 = 65535 & n2, i = 65535 & o2;
        return 0 | r2 * i + ((65535 & n2 >>> 16) * i + r2 * (65535 & o2 >>> 16) << 16 >>> 0);
      } });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Math", { log10: function(t2) {
        return Math.log(t2) * Math.LOG10E;
      } });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Math", { log1p: n(126) });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Math", { log2: function(t2) {
        return Math.log(t2) / Math.LN2;
      } });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Math", { sign: n(94) });
    }, function(t, e, n) {
      var o = n(0), r = n(95), i = Math.exp;
      o(o.S + o.F * n(11)(function() {
        return !Math.sinh(-2e-17) != -2e-17;
      }), "Math", { sinh: function(t2) {
        return Math.abs(t2 = +t2) < 1 ? (r(t2) - r(-t2)) / 2 : (i(t2 - 1) - i(-t2 - 1)) * (Math.E / 2);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(95), i = Math.exp;
      o(o.S, "Math", { tanh: function(t2) {
        var e2 = r(t2 = +t2), n2 = r(-t2);
        return e2 == 1 / 0 ? 1 : n2 == 1 / 0 ? -1 : (e2 - n2) / (i(t2) + i(-t2));
      } });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Math", { trunc: function(t2) {
        return (t2 > 0 ? Math.floor : Math.ceil)(t2);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(47), i = String.fromCharCode, a = String.fromCodePoint;
      o(o.S + o.F * (!!a && a.length != 1), "String", { fromCodePoint: function(t2) {
        for (var e2, n2 = [], o2 = arguments.length, a2 = 0; o2 > a2; ) {
          if (e2 = +arguments[a2++], r(e2, 1114111) !== e2)
            throw RangeError(e2 + " is not a valid code point");
          n2.push(e2 < 65536 ? i(e2) : i(55296 + ((e2 -= 65536) >> 10), e2 % 1024 + 56320));
        }
        return n2.join("");
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(28), i = n(16);
      o(o.S, "String", { raw: function(t2) {
        for (var e2 = r(t2.raw), n2 = i(e2.length), o2 = arguments.length, a = [], s = 0; n2 > s; )
          a.push(String(e2[s++])), s < o2 && a.push(String(arguments[s]));
        return a.join("");
      } });
    }, function(t, e, n) {
      n(54)("trim", function(t2) {
        return function() {
          return t2(this, 3);
        };
      });
    }, function(t, e, n) {
      var o = n(96)(true);
      n(97)(String, "String", function(t2) {
        this._t = String(t2), this._i = 0;
      }, function() {
        var t2, e2 = this._t, n2 = this._i;
        return n2 >= e2.length ? { value: void 0, done: true } : (t2 = o(e2, n2), this._i += t2.length, { value: t2, done: false });
      });
    }, function(t, e, n) {
      var o = n(0), r = n(96)(false);
      o(o.P, "String", { codePointAt: function(t2) {
        return r(this, t2);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(16), i = n(98), a = "".endsWith;
      o(o.P + o.F * n(100)("endsWith"), "String", { endsWith: function(t2) {
        var e2 = i(this, t2, "endsWith"), n2 = arguments.length > 1 ? arguments[1] : void 0, o2 = r(e2.length), s = n2 === void 0 ? o2 : Math.min(r(n2), o2), l = String(t2);
        return a ? a.call(e2, l, s) : e2.slice(s - l.length, s) === l;
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(98);
      o(o.P + o.F * n(100)("includes"), "String", { includes: function(t2) {
        return !!~r(this, t2, "includes").indexOf(t2, arguments.length > 1 ? arguments[1] : void 0);
      } });
    }, function(t, e, n) {
      var o = n(0);
      o(o.P, "String", { repeat: n(93) });
    }, function(t, e, n) {
      var o = n(0), r = n(16), i = n(98), a = "".startsWith;
      o(o.P + o.F * n(100)("startsWith"), "String", { startsWith: function(t2) {
        var e2 = i(this, t2, "startsWith"), n2 = r(Math.min(arguments.length > 1 ? arguments[1] : void 0, e2.length)), o2 = String(t2);
        return a ? a.call(e2, o2, n2) : e2.slice(n2, n2 + o2.length) === o2;
      } });
    }, function(t, e, n) {
      n(22)("anchor", function(t2) {
        return function(e2) {
          return t2(this, "a", "name", e2);
        };
      });
    }, function(t, e, n) {
      n(22)("big", function(t2) {
        return function() {
          return t2(this, "big", "", "");
        };
      });
    }, function(t, e, n) {
      n(22)("blink", function(t2) {
        return function() {
          return t2(this, "blink", "", "");
        };
      });
    }, function(t, e, n) {
      n(22)("bold", function(t2) {
        return function() {
          return t2(this, "b", "", "");
        };
      });
    }, function(t, e, n) {
      n(22)("fixed", function(t2) {
        return function() {
          return t2(this, "tt", "", "");
        };
      });
    }, function(t, e, n) {
      n(22)("fontcolor", function(t2) {
        return function(e2) {
          return t2(this, "font", "color", e2);
        };
      });
    }, function(t, e, n) {
      n(22)("fontsize", function(t2) {
        return function(e2) {
          return t2(this, "font", "size", e2);
        };
      });
    }, function(t, e, n) {
      n(22)("italics", function(t2) {
        return function() {
          return t2(this, "i", "", "");
        };
      });
    }, function(t, e, n) {
      n(22)("link", function(t2) {
        return function(e2) {
          return t2(this, "a", "href", e2);
        };
      });
    }, function(t, e, n) {
      n(22)("small", function(t2) {
        return function() {
          return t2(this, "small", "", "");
        };
      });
    }, function(t, e, n) {
      n(22)("strike", function(t2) {
        return function() {
          return t2(this, "strike", "", "");
        };
      });
    }, function(t, e, n) {
      n(22)("sub", function(t2) {
        return function() {
          return t2(this, "sub", "", "");
        };
      });
    }, function(t, e, n) {
      n(22)("sup", function(t2) {
        return function() {
          return t2(this, "sup", "", "");
        };
      });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Date", { now: function() {
        return new Date().getTime();
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(20), i = n(40);
      o(o.P + o.F * n(11)(function() {
        return new Date(NaN).toJSON() !== null || Date.prototype.toJSON.call({ toISOString: function() {
          return 1;
        } }) !== 1;
      }), "Date", { toJSON: function(t2) {
        var e2 = r(this), n2 = i(e2);
        return typeof n2 != "number" || isFinite(n2) ? e2.toISOString() : null;
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(270);
      o(o.P + o.F * (Date.prototype.toISOString !== r), "Date", { toISOString: r });
    }, function(t, e, n) {
      var o = n(11), r = Date.prototype.getTime, i = Date.prototype.toISOString, a = function(t2) {
        return t2 > 9 ? t2 : "0" + t2;
      };
      t.exports = o(function() {
        return i.call(new Date(-50000000000001)) != "0385-07-25T07:06:39.999Z";
      }) || !o(function() {
        i.call(new Date(NaN));
      }) ? function() {
        if (!isFinite(r.call(this)))
          throw RangeError("Invalid time value");
        var t2 = this, e2 = t2.getUTCFullYear(), n2 = t2.getUTCMilliseconds(), o2 = e2 < 0 ? "-" : e2 > 9999 ? "+" : "";
        return o2 + ("00000" + Math.abs(e2)).slice(o2 ? -6 : -4) + "-" + a(t2.getUTCMonth() + 1) + "-" + a(t2.getUTCDate()) + "T" + a(t2.getUTCHours()) + ":" + a(t2.getUTCMinutes()) + ":" + a(t2.getUTCSeconds()) + "." + (n2 > 99 ? n2 : "0" + a(n2)) + "Z";
      } : i;
    }, function(t, e, n) {
      var o = Date.prototype, r = o.toString, i = o.getTime;
      new Date(NaN) + "" != "Invalid Date" && n(21)(o, "toString", function() {
        var t2 = i.call(this);
        return t2 == t2 ? r.call(this) : "Invalid Date";
      });
    }, function(t, e, n) {
      var o = n(14)("toPrimitive"), r = Date.prototype;
      o in r || n(27)(r, o, n(273));
    }, function(t, e, n) {
      var o = n(12), r = n(40);
      t.exports = function(t2) {
        if (t2 !== "string" && t2 !== "number" && t2 !== "default")
          throw TypeError("Incorrect hint");
        return r(o(this), t2 != "number");
      };
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Array", { isArray: n(71) });
    }, function(t, e, n) {
      var o = n(31), r = n(0), i = n(20), a = n(128), s = n(101), l = n(16), c = n(102), u = n(103);
      r(r.S + r.F * !n(72)(function(t2) {
        Array.from(t2);
      }), "Array", { from: function(t2) {
        var e2, n2, r2, f, d = i(t2), p = typeof this == "function" ? this : Array, h = arguments.length, v = h > 1 ? arguments[1] : void 0, g = v !== void 0, y = 0, b = u(d);
        if (g && (v = o(v, h > 2 ? arguments[2] : void 0, 2)), b == null || p == Array && s(b))
          for (n2 = new p(e2 = l(d.length)); e2 > y; y++)
            c(n2, y, g ? v(d[y], y) : d[y]);
        else
          for (f = b.call(d), n2 = new p(); !(r2 = f.next()).done; y++)
            c(n2, y, g ? a(f, v, [r2.value, y], true) : r2.value);
        return n2.length = y, n2;
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(102);
      o(o.S + o.F * n(11)(function() {
        function t2() {
        }
        return !(Array.of.call(t2) instanceof t2);
      }), "Array", { of: function() {
        for (var t2 = 0, e2 = arguments.length, n2 = new (typeof this == "function" ? this : Array)(e2); e2 > t2; )
          r(n2, t2, arguments[t2++]);
        return n2.length = e2, n2;
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(28), i = [].join;
      o(o.P + o.F * (n(61) != Object || !n(29)(i)), "Array", { join: function(t2) {
        return i.call(r(this), t2 === void 0 ? "," : t2);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(89), i = n(37), a = n(47), s = n(16), l = [].slice;
      o(o.P + o.F * n(11)(function() {
        r && l.call(r);
      }), "Array", { slice: function(t2, e2) {
        var n2 = s(this.length), o2 = i(this);
        if (e2 = e2 === void 0 ? n2 : e2, o2 == "Array")
          return l.call(this, t2, e2);
        for (var r2 = a(t2, n2), c = a(e2, n2), u = s(c - r2), f = new Array(u), d = 0; d < u; d++)
          f[d] = o2 == "String" ? this.charAt(r2 + d) : this[r2 + d];
        return f;
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(32), i = n(20), a = n(11), s = [].sort, l = [1, 2, 3];
      o(o.P + o.F * (a(function() {
        l.sort(void 0);
      }) || !a(function() {
        l.sort(null);
      }) || !n(29)(s)), "Array", { sort: function(t2) {
        return t2 === void 0 ? s.call(i(this)) : s.call(i(this), r(t2));
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(36)(0), i = n(29)([].forEach, true);
      o(o.P + o.F * !i, "Array", { forEach: function(t2) {
        return r(this, t2, arguments[1]);
      } });
    }, function(t, e, n) {
      var o = n(13), r = n(71), i = n(14)("species");
      t.exports = function(t2) {
        var e2;
        return r(t2) && (typeof (e2 = t2.constructor) != "function" || e2 !== Array && !r(e2.prototype) || (e2 = void 0), o(e2) && (e2 = e2[i]) === null && (e2 = void 0)), e2 === void 0 ? Array : e2;
      };
    }, function(t, e, n) {
      var o = n(0), r = n(36)(1);
      o(o.P + o.F * !n(29)([].map, true), "Array", { map: function(t2) {
        return r(this, t2, arguments[1]);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(36)(2);
      o(o.P + o.F * !n(29)([].filter, true), "Array", { filter: function(t2) {
        return r(this, t2, arguments[1]);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(36)(3);
      o(o.P + o.F * !n(29)([].some, true), "Array", { some: function(t2) {
        return r(this, t2, arguments[1]);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(36)(4);
      o(o.P + o.F * !n(29)([].every, true), "Array", { every: function(t2) {
        return r(this, t2, arguments[1]);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(130);
      o(o.P + o.F * !n(29)([].reduce, true), "Array", { reduce: function(t2) {
        return r(this, t2, arguments.length, arguments[1], false);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(130);
      o(o.P + o.F * !n(29)([].reduceRight, true), "Array", { reduceRight: function(t2) {
        return r(this, t2, arguments.length, arguments[1], true);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(69)(false), i = [].indexOf, a = !!i && 1 / [1].indexOf(1, -0) < 0;
      o(o.P + o.F * (a || !n(29)(i)), "Array", { indexOf: function(t2) {
        return a ? i.apply(this, arguments) || 0 : r(this, t2, arguments[1]);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(28), i = n(33), a = n(16), s = [].lastIndexOf, l = !!s && 1 / [1].lastIndexOf(1, -0) < 0;
      o(o.P + o.F * (l || !n(29)(s)), "Array", { lastIndexOf: function(t2) {
        if (l)
          return s.apply(this, arguments) || 0;
        var e2 = r(this), n2 = a(e2.length), o2 = n2 - 1;
        for (arguments.length > 1 && (o2 = Math.min(o2, i(arguments[1]))), o2 < 0 && (o2 = n2 + o2); o2 >= 0; o2--)
          if (o2 in e2 && e2[o2] === t2)
            return o2 || 0;
        return -1;
      } });
    }, function(t, e, n) {
      var o = n(0);
      o(o.P, "Array", { copyWithin: n(131) }), n(51)("copyWithin");
    }, function(t, e, n) {
      var o = n(0);
      o(o.P, "Array", { fill: n(104) }), n(51)("fill");
    }, function(t, e, n) {
      var o = n(0), r = n(36)(5), i = true;
      "find" in [] && Array(1).find(function() {
        i = false;
      }), o(o.P + o.F * i, "Array", { find: function(t2) {
        return r(this, t2, arguments.length > 1 ? arguments[1] : void 0);
      } }), n(51)("find");
    }, function(t, e, n) {
      var o = n(0), r = n(36)(6), i = "findIndex", a = true;
      i in [] && Array(1)[i](function() {
        a = false;
      }), o(o.P + o.F * a, "Array", { findIndex: function(t2) {
        return r(this, t2, arguments.length > 1 ? arguments[1] : void 0);
      } }), n(51)(i);
    }, function(t, e, n) {
      n(56)("Array");
    }, function(t, e, n) {
      var o = n(10), r = n(92), i = n(19).f, a = n(49).f, s = n(99), l = n(73), c = o.RegExp, u = c, f = c.prototype, d = /a/g, p = /a/g, h = new c(d) !== d;
      if (n(18) && (!h || n(11)(function() {
        return p[n(14)("match")] = false, c(d) != d || c(p) == p || c(d, "i") != "/a/i";
      }))) {
        c = function(t2, e2) {
          var n2 = this instanceof c, o2 = s(t2), i2 = e2 === void 0;
          return !n2 && o2 && t2.constructor === c && i2 ? t2 : r(h ? new u(o2 && !i2 ? t2.source : t2, e2) : u((o2 = t2 instanceof c) ? t2.source : t2, o2 && i2 ? l.call(t2) : e2), n2 ? this : f, c);
        };
        for (var v = function(t2) {
          t2 in c || i(c, t2, { configurable: true, get: function() {
            return u[t2];
          }, set: function(e2) {
            u[t2] = e2;
          } });
        }, g = a(u), y = 0; g.length > y; )
          v(g[y++]);
        f.constructor = c, c.prototype = f, n(21)(o, "RegExp", c);
      }
      n(56)("RegExp");
    }, function(t, e, n) {
      n(134);
      var o = n(12), r = n(73), i = n(18), a = /./.toString, s = function(t2) {
        n(21)(RegExp.prototype, "toString", t2, true);
      };
      n(11)(function() {
        return a.call({ source: "a", flags: "b" }) != "/a/b";
      }) ? s(function() {
        var t2 = o(this);
        return "/".concat(t2.source, "/", "flags" in t2 ? t2.flags : !i && t2 instanceof RegExp ? r.call(t2) : void 0);
      }) : a.name != "toString" && s(function() {
        return a.call(this);
      });
    }, function(t, e, n) {
      var o = n(12), r = n(16), i = n(107), a = n(74);
      n(75)("match", 1, function(t2, e2, n2, s) {
        return [function(n3) {
          var o2 = t2(this), r2 = n3 == null ? void 0 : n3[e2];
          return r2 !== void 0 ? r2.call(n3, o2) : new RegExp(n3)[e2](String(o2));
        }, function(t3) {
          var e3 = s(n2, t3, this);
          if (e3.done)
            return e3.value;
          var l = o(t3), c = String(this);
          if (!l.global)
            return a(l, c);
          var u = l.unicode;
          l.lastIndex = 0;
          for (var f, d = [], p = 0; (f = a(l, c)) !== null; ) {
            var h = String(f[0]);
            d[p] = h, h === "" && (l.lastIndex = i(c, r(l.lastIndex), u)), p++;
          }
          return p === 0 ? null : d;
        }];
      });
    }, function(t, e, n) {
      var o = n(12), r = n(20), i = n(16), a = n(33), s = n(107), l = n(74), c = Math.max, u = Math.min, f = Math.floor, d = /\$([$&`']|\d\d?|<[^>]*>)/g, p = /\$([$&`']|\d\d?)/g;
      n(75)("replace", 2, function(t2, e2, n2, h) {
        return [function(o2, r2) {
          var i2 = t2(this), a2 = o2 == null ? void 0 : o2[e2];
          return a2 !== void 0 ? a2.call(o2, i2, r2) : n2.call(String(i2), o2, r2);
        }, function(t3, e3) {
          var r2 = h(n2, t3, this, e3);
          if (r2.done)
            return r2.value;
          var f2 = o(t3), d2 = String(this), p2 = typeof e3 == "function";
          p2 || (e3 = String(e3));
          var g = f2.global;
          if (g) {
            var y = f2.unicode;
            f2.lastIndex = 0;
          }
          for (var b = []; ; ) {
            var m = l(f2, d2);
            if (m === null)
              break;
            if (b.push(m), !g)
              break;
            String(m[0]) === "" && (f2.lastIndex = s(d2, i(f2.lastIndex), y));
          }
          for (var k, x = "", w = 0, S = 0; S < b.length; S++) {
            m = b[S];
            for (var T = String(m[0]), E = c(u(a(m.index), d2.length), 0), B = [], C = 1; C < m.length; C++)
              B.push((k = m[C]) === void 0 ? k : String(k));
            var _ = m.groups;
            if (p2) {
              var O = [T].concat(B, E, d2);
              _ !== void 0 && O.push(_);
              var I = String(e3.apply(void 0, O));
            } else
              I = v(T, d2, E, B, _, e3);
            E >= w && (x += d2.slice(w, E) + I, w = E + T.length);
          }
          return x + d2.slice(w);
        }];
        function v(t3, e3, o2, i2, a2, s2) {
          var l2 = o2 + t3.length, c2 = i2.length, u2 = p;
          return a2 !== void 0 && (a2 = r(a2), u2 = d), n2.call(s2, u2, function(n3, r2) {
            var s3;
            switch (r2.charAt(0)) {
              case "$":
                return "$";
              case "&":
                return t3;
              case "`":
                return e3.slice(0, o2);
              case "'":
                return e3.slice(l2);
              case "<":
                s3 = a2[r2.slice(1, -1)];
                break;
              default:
                var u3 = +r2;
                if (u3 === 0)
                  return n3;
                if (u3 > c2) {
                  var d2 = f(u3 / 10);
                  return d2 === 0 ? n3 : d2 <= c2 ? i2[d2 - 1] === void 0 ? r2.charAt(1) : i2[d2 - 1] + r2.charAt(1) : n3;
                }
                s3 = i2[u3 - 1];
            }
            return s3 === void 0 ? "" : s3;
          });
        }
      });
    }, function(t, e, n) {
      var o = n(12), r = n(119), i = n(74);
      n(75)("search", 1, function(t2, e2, n2, a) {
        return [function(n3) {
          var o2 = t2(this), r2 = n3 == null ? void 0 : n3[e2];
          return r2 !== void 0 ? r2.call(n3, o2) : new RegExp(n3)[e2](String(o2));
        }, function(t3) {
          var e3 = a(n2, t3, this);
          if (e3.done)
            return e3.value;
          var s = o(t3), l = String(this), c = s.lastIndex;
          r(c, 0) || (s.lastIndex = 0);
          var u = i(s, l);
          return r(s.lastIndex, c) || (s.lastIndex = c), u === null ? -1 : u.index;
        }];
      });
    }, function(t, e, n) {
      var o = n(99), r = n(12), i = n(64), a = n(107), s = n(16), l = n(74), c = n(106), u = n(11), f = Math.min, d = [].push, p = "length", h = !u(function() {
      });
      n(75)("split", 2, function(t2, e2, n2, u2) {
        var v;
        return v = "abbc".split(/(b)*/)[1] == "c" || "test".split(/(?:)/, -1)[p] != 4 || "ab".split(/(?:ab)*/)[p] != 2 || ".".split(/(.?)(.?)/)[p] != 4 || ".".split(/()()/)[p] > 1 || "".split(/.?/)[p] ? function(t3, e3) {
          var r2 = String(this);
          if (t3 === void 0 && e3 === 0)
            return [];
          if (!o(t3))
            return n2.call(r2, t3, e3);
          for (var i2, a2, s2, l2 = [], u3 = (t3.ignoreCase ? "i" : "") + (t3.multiline ? "m" : "") + (t3.unicode ? "u" : "") + (t3.sticky ? "y" : ""), f2 = 0, h2 = e3 === void 0 ? 4294967295 : e3 >>> 0, v2 = new RegExp(t3.source, u3 + "g"); (i2 = c.call(v2, r2)) && !((a2 = v2.lastIndex) > f2 && (l2.push(r2.slice(f2, i2.index)), i2[p] > 1 && i2.index < r2[p] && d.apply(l2, i2.slice(1)), s2 = i2[0][p], f2 = a2, l2[p] >= h2)); )
            v2.lastIndex === i2.index && v2.lastIndex++;
          return f2 === r2[p] ? !s2 && v2.test("") || l2.push("") : l2.push(r2.slice(f2)), l2[p] > h2 ? l2.slice(0, h2) : l2;
        } : "0".split(void 0, 0)[p] ? function(t3, e3) {
          return t3 === void 0 && e3 === 0 ? [] : n2.call(this, t3, e3);
        } : n2, [function(n3, o2) {
          var r2 = t2(this), i2 = n3 == null ? void 0 : n3[e2];
          return i2 !== void 0 ? i2.call(n3, r2, o2) : v.call(String(r2), n3, o2);
        }, function(t3, e3) {
          var o2 = u2(v, t3, this, e3, v !== n2);
          if (o2.done)
            return o2.value;
          var c2 = r(t3), d2 = String(this), p2 = i(c2, RegExp), g = c2.unicode, y = (c2.ignoreCase ? "i" : "") + (c2.multiline ? "m" : "") + (c2.unicode ? "u" : "") + (h ? "y" : "g"), b = new p2(h ? c2 : "^(?:" + c2.source + ")", y), m = e3 === void 0 ? 4294967295 : e3 >>> 0;
          if (m === 0)
            return [];
          if (d2.length === 0)
            return l(b, d2) === null ? [d2] : [];
          for (var k = 0, x = 0, w = []; x < d2.length; ) {
            b.lastIndex = h ? x : 0;
            var S, T = l(b, h ? d2 : d2.slice(x));
            if (T === null || (S = f(s(b.lastIndex + (h ? 0 : x)), d2.length)) === k)
              x = a(d2, x, g);
            else {
              if (w.push(d2.slice(k, x)), w.length === m)
                return w;
              for (var E = 1; E <= T.length - 1; E++)
                if (w.push(T[E]), w.length === m)
                  return w;
              x = k = S;
            }
          }
          return w.push(d2.slice(k)), w;
        }];
      });
    }, function(t, e, n) {
      var o = n(10), r = n(108).set, i = o.MutationObserver || o.WebKitMutationObserver, a = o.process, s = o.Promise, l = n(37)(a) == "process";
      t.exports = function() {
        var t2, e2, n2, c = function() {
          var o2, r2;
          for (l && (o2 = a.domain) && o2.exit(); t2; ) {
            r2 = t2.fn, t2 = t2.next;
            try {
              r2();
            } catch (o3) {
              throw t2 ? n2() : e2 = void 0, o3;
            }
          }
          e2 = void 0, o2 && o2.enter();
        };
        if (l)
          n2 = function() {
            a.nextTick(c);
          };
        else if (!i || o.navigator && o.navigator.standalone)
          if (s && s.resolve) {
            var u = s.resolve(void 0);
            n2 = function() {
              u.then(c);
            };
          } else
            n2 = function() {
              r.call(o, c);
            };
        else {
          var f = true, d = document.createTextNode("");
          new i(c).observe(d, { characterData: true }), n2 = function() {
            d.data = f = !f;
          };
        }
        return function(o2) {
          var r2 = { fn: o2, next: void 0 };
          e2 && (e2.next = r2), t2 || (t2 = r2, n2()), e2 = r2;
        };
      };
    }, function(t, e) {
      t.exports = function(t2) {
        try {
          return { e: false, v: t2() };
        } catch (t3) {
          return { e: true, v: t3 };
        }
      };
    }, function(t, e, n) {
      var o = n(138), r = n(52);
      t.exports = n(78)("Map", function(t2) {
        return function() {
          return t2(this, arguments.length > 0 ? arguments[0] : void 0);
        };
      }, { get: function(t2) {
        var e2 = o.getEntry(r(this, "Map"), t2);
        return e2 && e2.v;
      }, set: function(t2, e2) {
        return o.def(r(this, "Map"), t2 === 0 ? 0 : t2, e2);
      } }, o, true);
    }, function(t, e, n) {
      var o = n(138), r = n(52);
      t.exports = n(78)("Set", function(t2) {
        return function() {
          return t2(this, arguments.length > 0 ? arguments[0] : void 0);
        };
      }, { add: function(t2) {
        return o.def(r(this, "Set"), t2 = t2 === 0 ? 0 : t2, t2);
      } }, o);
    }, function(t, e, n) {
      var o, r = n(10), i = n(36)(0), a = n(21), s = n(41), l = n(118), c = n(139), u = n(13), f = n(52), d = n(52), p = !r.ActiveXObject && "ActiveXObject" in r, h = s.getWeak, v = Object.isExtensible, g = c.ufstore, y = function(t2) {
        return function() {
          return t2(this, arguments.length > 0 ? arguments[0] : void 0);
        };
      }, b = { get: function(t2) {
        if (u(t2)) {
          var e2 = h(t2);
          return e2 === true ? g(f(this, "WeakMap")).get(t2) : e2 ? e2[this._i] : void 0;
        }
      }, set: function(t2, e2) {
        return c.def(f(this, "WeakMap"), t2, e2);
      } }, m = t.exports = n(78)("WeakMap", y, b, c, true, true);
      d && p && (l((o = c.getConstructor(y, "WeakMap")).prototype, b), s.NEED = true, i(["delete", "has", "get", "set"], function(t2) {
        var e2 = m.prototype, n2 = e2[t2];
        a(e2, t2, function(e3, r2) {
          if (u(e3) && !v(e3)) {
            this._f || (this._f = new o());
            var i2 = this._f[t2](e3, r2);
            return t2 == "set" ? this : i2;
          }
          return n2.call(this, e3, r2);
        });
      }));
    }, function(t, e, n) {
      var o = n(139), r = n(52);
      n(78)("WeakSet", function(t2) {
        return function() {
          return t2(this, arguments.length > 0 ? arguments[0] : void 0);
        };
      }, { add: function(t2) {
        return o.def(r(this, "WeakSet"), t2, true);
      } }, o, false, true);
    }, function(t, e, n) {
      var o = n(0), r = n(79), i = n(109), a = n(12), s = n(47), l = n(16), c = n(13), u = n(10).ArrayBuffer, f = n(64), d = i.ArrayBuffer, p = i.DataView, h = r.ABV && u.isView, v = d.prototype.slice, g = r.VIEW;
      o(o.G + o.W + o.F * (u !== d), { ArrayBuffer: d }), o(o.S + o.F * !r.CONSTR, "ArrayBuffer", { isView: function(t2) {
        return h && h(t2) || c(t2) && g in t2;
      } }), o(o.P + o.U + o.F * n(11)(function() {
        return !new d(2).slice(1, void 0).byteLength;
      }), "ArrayBuffer", { slice: function(t2, e2) {
        if (v !== void 0 && e2 === void 0)
          return v.call(a(this), t2);
        for (var n2 = a(this).byteLength, o2 = s(t2, n2), r2 = s(e2 === void 0 ? n2 : e2, n2), i2 = new (f(this, d))(l(r2 - o2)), c2 = new p(this), u2 = new p(i2), h2 = 0; o2 < r2; )
          u2.setUint8(h2++, c2.getUint8(o2++));
        return i2;
      } }), n(56)("ArrayBuffer");
    }, function(t, e, n) {
      var o = n(0);
      o(o.G + o.W + o.F * !n(79).ABV, { DataView: n(109).DataView });
    }, function(t, e, n) {
      n(39)("Int8", 1, function(t2) {
        return function(e2, n2, o) {
          return t2(this, e2, n2, o);
        };
      });
    }, function(t, e, n) {
      n(39)("Uint8", 1, function(t2) {
        return function(e2, n2, o) {
          return t2(this, e2, n2, o);
        };
      });
    }, function(t, e, n) {
      n(39)("Uint8", 1, function(t2) {
        return function(e2, n2, o) {
          return t2(this, e2, n2, o);
        };
      }, true);
    }, function(t, e, n) {
      n(39)("Int16", 2, function(t2) {
        return function(e2, n2, o) {
          return t2(this, e2, n2, o);
        };
      });
    }, function(t, e, n) {
      n(39)("Uint16", 2, function(t2) {
        return function(e2, n2, o) {
          return t2(this, e2, n2, o);
        };
      });
    }, function(t, e, n) {
      n(39)("Int32", 4, function(t2) {
        return function(e2, n2, o) {
          return t2(this, e2, n2, o);
        };
      });
    }, function(t, e, n) {
      n(39)("Uint32", 4, function(t2) {
        return function(e2, n2, o) {
          return t2(this, e2, n2, o);
        };
      });
    }, function(t, e, n) {
      n(39)("Float32", 4, function(t2) {
        return function(e2, n2, o) {
          return t2(this, e2, n2, o);
        };
      });
    }, function(t, e, n) {
      n(39)("Float64", 8, function(t2) {
        return function(e2, n2, o) {
          return t2(this, e2, n2, o);
        };
      });
    }, function(t, e, n) {
      var o = n(0), r = n(32), i = n(12), a = (n(10).Reflect || {}).apply, s = Function.apply;
      o(o.S + o.F * !n(11)(function() {
        a(function() {
        });
      }), "Reflect", { apply: function(t2, e2, n2) {
        var o2 = r(t2), l = i(n2);
        return a ? a(o2, e2, l) : s.call(o2, e2, l);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(48), i = n(32), a = n(12), s = n(13), l = n(11), c = n(120), u = (n(10).Reflect || {}).construct, f = l(function() {
        function t2() {
        }
        return !(u(function() {
        }, [], t2) instanceof t2);
      }), d = !l(function() {
        u(function() {
        });
      });
      o(o.S + o.F * (f || d), "Reflect", { construct: function(t2, e2) {
        i(t2), a(e2);
        var n2 = arguments.length < 3 ? t2 : i(arguments[2]);
        if (d && !f)
          return u(t2, e2, n2);
        if (t2 == n2) {
          switch (e2.length) {
            case 0:
              return new t2();
            case 1:
              return new t2(e2[0]);
            case 2:
              return new t2(e2[0], e2[1]);
            case 3:
              return new t2(e2[0], e2[1], e2[2]);
            case 4:
              return new t2(e2[0], e2[1], e2[2], e2[3]);
          }
          var o2 = [null];
          return o2.push.apply(o2, e2), new (c.apply(t2, o2))();
        }
        var l2 = n2.prototype, p = r(s(l2) ? l2 : Object.prototype), h = Function.apply.call(t2, p, e2);
        return s(h) ? h : p;
      } });
    }, function(t, e, n) {
      var o = n(19), r = n(0), i = n(12), a = n(40);
      r(r.S + r.F * n(11)(function() {
        Reflect.defineProperty(o.f({}, 1, { value: 1 }), 1, { value: 2 });
      }), "Reflect", { defineProperty: function(t2, e2, n2) {
        i(t2), e2 = a(e2, true), i(n2);
        try {
          return o.f(t2, e2, n2), true;
        } catch (t3) {
          return false;
        }
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(34).f, i = n(12);
      o(o.S, "Reflect", { deleteProperty: function(t2, e2) {
        var n2 = r(i(t2), e2);
        return !(n2 && !n2.configurable) && delete t2[e2];
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(12), i = function(t2) {
        this._t = r(t2), this._i = 0;
        var e2, n2 = this._k = [];
        for (e2 in t2)
          n2.push(e2);
      };
      n(127)(i, "Object", function() {
        var t2, e2 = this._k;
        do {
          if (this._i >= e2.length)
            return { value: void 0, done: true };
        } while (!((t2 = e2[this._i++]) in this._t));
        return { value: t2, done: false };
      }), o(o.S, "Reflect", { enumerate: function(t2) {
        return new i(t2);
      } });
    }, function(t, e, n) {
      var o = n(34), r = n(50), i = n(26), a = n(0), s = n(13), l = n(12);
      a(a.S, "Reflect", { get: function t2(e2, n2) {
        var a2, c, u = arguments.length < 3 ? e2 : arguments[2];
        return l(e2) === u ? e2[n2] : (a2 = o.f(e2, n2)) ? i(a2, "value") ? a2.value : a2.get !== void 0 ? a2.get.call(u) : void 0 : s(c = r(e2)) ? t2(c, n2, u) : void 0;
      } });
    }, function(t, e, n) {
      var o = n(34), r = n(0), i = n(12);
      r(r.S, "Reflect", { getOwnPropertyDescriptor: function(t2, e2) {
        return o.f(i(t2), e2);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(50), i = n(12);
      o(o.S, "Reflect", { getPrototypeOf: function(t2) {
        return r(i(t2));
      } });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Reflect", { has: function(t2, e2) {
        return e2 in t2;
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(12), i = Object.isExtensible;
      o(o.S, "Reflect", { isExtensible: function(t2) {
        return r(t2), !i || i(t2);
      } });
    }, function(t, e, n) {
      var o = n(0);
      o(o.S, "Reflect", { ownKeys: n(141) });
    }, function(t, e, n) {
      var o = n(0), r = n(12), i = Object.preventExtensions;
      o(o.S, "Reflect", { preventExtensions: function(t2) {
        r(t2);
        try {
          return i && i(t2), true;
        } catch (t3) {
          return false;
        }
      } });
    }, function(t, e, n) {
      var o = n(19), r = n(34), i = n(50), a = n(26), s = n(0), l = n(43), c = n(12), u = n(13);
      s(s.S, "Reflect", { set: function t2(e2, n2, s2) {
        var f, d, p = arguments.length < 4 ? e2 : arguments[3], h = r.f(c(e2), n2);
        if (!h) {
          if (u(d = i(e2)))
            return t2(d, n2, s2, p);
          h = l(0);
        }
        if (a(h, "value")) {
          if (h.writable === false || !u(p))
            return false;
          if (f = r.f(p, n2)) {
            if (f.get || f.set || f.writable === false)
              return false;
            f.value = s2, o.f(p, n2, f);
          } else
            o.f(p, n2, l(0, s2));
          return true;
        }
        return h.set !== void 0 && (h.set.call(p, s2), true);
      } });
    }, function(t, e, n) {
      var o = n(0), r = n(90);
      r && o(o.S, "Reflect", { setPrototypeOf: function(t2, e2) {
        r.check(t2, e2);
        try {
          return r.set(t2, e2), true;
        } catch (t3) {
          return false;
        }
      } });
    }, function(t, e, n) {
      n(333), t.exports = n(17).Array.includes;
    }, function(t, e, n) {
      var o = n(0), r = n(69)(true);
      o(o.P, "Array", { includes: function(t2) {
        return r(this, t2, arguments.length > 1 ? arguments[1] : void 0);
      } }), n(51)("includes");
    }, function(t, e, n) {
      n(335), t.exports = n(17).Array.flatMap;
    }, function(t, e, n) {
      var o = n(0), r = n(336), i = n(20), a = n(16), s = n(32), l = n(129);
      o(o.P, "Array", { flatMap: function(t2) {
        var e2, n2, o2 = i(this);
        return s(t2), e2 = a(o2.length), n2 = l(o2, 0), r(n2, o2, o2, e2, 0, 1, t2, arguments[1]), n2;
      } }), n(51)("flatMap");
    }, function(t, e, n) {
      var o = n(71), r = n(13), i = n(16), a = n(31), s = n(14)("isConcatSpreadable");
      t.exports = function t2(e2, n2, l, c, u, f, d, p) {
        for (var h, v, g = u, y = 0, b = !!d && a(d, p, 3); y < c; ) {
          if (y in l) {
            if (h = b ? b(l[y], y, n2) : l[y], v = false, r(h) && (v = (v = h[s]) !== void 0 ? !!v : o(h)), v && f > 0)
              g = t2(e2, n2, h, i(h.length), g, f - 1) - 1;
            else {
              if (g >= 9007199254740991)
                throw TypeError();
              e2[g] = h;
            }
            g++;
          }
          y++;
        }
        return g;
      };
    }, function(t, e, n) {
      n(338), t.exports = n(17).String.padStart;
    }, function(t, e, n) {
      var o = n(0), r = n(142), i = n(77), a = /Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);
      o(o.P + o.F * a, "String", { padStart: function(t2) {
        return r(this, t2, arguments.length > 1 ? arguments[1] : void 0, true);
      } });
    }, function(t, e, n) {
      n(340), t.exports = n(17).String.padEnd;
    }, function(t, e, n) {
      var o = n(0), r = n(142), i = n(77), a = /Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);
      o(o.P + o.F * a, "String", { padEnd: function(t2) {
        return r(this, t2, arguments.length > 1 ? arguments[1] : void 0, false);
      } });
    }, function(t, e, n) {
      n(342), t.exports = n(17).String.trimLeft;
    }, function(t, e, n) {
      n(54)("trimLeft", function(t2) {
        return function() {
          return t2(this, 1);
        };
      }, "trimStart");
    }, function(t, e, n) {
      n(344), t.exports = n(17).String.trimRight;
    }, function(t, e, n) {
      n(54)("trimRight", function(t2) {
        return function() {
          return t2(this, 2);
        };
      }, "trimEnd");
    }, function(t, e, n) {
      n(346), t.exports = n(86).f("asyncIterator");
    }, function(t, e, n) {
      n(114)("asyncIterator");
    }, function(t, e, n) {
      n(348), t.exports = n(17).Object.getOwnPropertyDescriptors;
    }, function(t, e, n) {
      var o = n(0), r = n(141), i = n(28), a = n(34), s = n(102);
      o(o.S, "Object", { getOwnPropertyDescriptors: function(t2) {
        for (var e2, n2, o2 = i(t2), l = a.f, c = r(o2), u = {}, f = 0; c.length > f; )
          (n2 = l(o2, e2 = c[f++])) !== void 0 && s(u, e2, n2);
        return u;
      } });
    }, function(t, e, n) {
      n(350), t.exports = n(17).Object.values;
    }, function(t, e, n) {
      var o = n(0), r = n(143)(false);
      o(o.S, "Object", { values: function(t2) {
        return r(t2);
      } });
    }, function(t, e, n) {
      n(352), t.exports = n(17).Object.entries;
    }, function(t, e, n) {
      var o = n(0), r = n(143)(true);
      o(o.S, "Object", { entries: function(t2) {
        return r(t2);
      } });
    }, function(t, e, n) {
      n(135), n(354), t.exports = n(17).Promise.finally;
    }, function(t, e, n) {
      var o = n(0), r = n(17), i = n(10), a = n(64), s = n(137);
      o(o.P + o.R, "Promise", { finally: function(t2) {
        var e2 = a(this, r.Promise || i.Promise), n2 = typeof t2 == "function";
        return this.then(n2 ? function(n3) {
          return s(e2, t2()).then(function() {
            return n3;
          });
        } : t2, n2 ? function(n3) {
          return s(e2, t2()).then(function() {
            throw n3;
          });
        } : t2);
      } });
    }, function(t, e, n) {
      n(356), n(357), n(358), t.exports = n(17);
    }, function(t, e, n) {
      var o = n(10), r = n(0), i = n(77), a = [].slice, s = /MSIE .\./.test(i), l = function(t2) {
        return function(e2, n2) {
          var o2 = arguments.length > 2, r2 = !!o2 && a.call(arguments, 2);
          return t2(o2 ? function() {
            (typeof e2 == "function" ? e2 : Function(e2)).apply(this, r2);
          } : e2, n2);
        };
      };
      r(r.G + r.B + r.F * s, { setTimeout: l(o.setTimeout), setInterval: l(o.setInterval) });
    }, function(t, e, n) {
      var o = n(0), r = n(108);
      o(o.G + o.B, { setImmediate: r.set, clearImmediate: r.clear });
    }, function(t, e, n) {
      for (var o = n(105), r = n(46), i = n(21), a = n(10), s = n(27), l = n(55), c = n(14), u = c("iterator"), f = c("toStringTag"), d = l.Array, p = { CSSRuleList: true, CSSStyleDeclaration: false, CSSValueList: false, ClientRectList: false, DOMRectList: false, DOMStringList: false, DOMTokenList: true, DataTransferItemList: false, FileList: false, HTMLAllCollection: false, HTMLCollection: false, HTMLFormElement: false, HTMLSelectElement: false, MediaList: true, MimeTypeArray: false, NamedNodeMap: false, NodeList: true, PaintRequestList: false, Plugin: false, PluginArray: false, SVGLengthList: false, SVGNumberList: false, SVGPathSegList: false, SVGPointList: false, SVGStringList: false, SVGTransformList: false, SourceBufferList: false, StyleSheetList: true, TextTrackCueList: false, TextTrackList: false, TouchList: false }, h = r(p), v = 0; v < h.length; v++) {
        var g, y = h[v], b = p[y], m = a[y], k = m && m.prototype;
        if (k && (k[u] || s(k, u, d), k[f] || s(k, f, y), l[y] = d, b))
          for (g in o)
            k[g] || i(k, g, o[g], true);
      }
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(30), n(2), n(3), n(363), n(365), n(366), n(7)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u) {
        var f = n(8), d = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = d(r2), i2 = d(i2), a = d(a), c = d(c), u = f(u);
        var p = function() {
          function t2(e2) {
            var n2 = this;
            (0, i2.default)(this, t2);
            var o3 = function() {
            };
            u.isObject(e2) && u.isFunction(e2.onReady) && (o3 = e2.onReady);
            var r3 = new c.default(e2);
            this.isReady = r3.isReady.then(function() {
              n2.exportAPI(r3), o3();
            });
          }
          return (0, a.default)(t2, [{ key: "exportAPI", value: function(t3) {
            var e2 = this;
            ["configuration"].forEach(function(n2) {
              e2[n2] = t3[n2];
            }), this.destroy = function() {
              for (var n2 in Object.values(t3.moduleInstances).forEach(function(t4) {
                u.isFunction(t4.destroy) && t4.destroy(), t4.listeners.removeAll();
              }), t3 = null, e2)
                Object.prototype.hasOwnProperty.call(e2, n2) && delete e2[n2];
              Object.setPrototypeOf(e2, null);
            }, Object.setPrototypeOf(this, t3.moduleInstances.API.methods), delete this.exportAPI, Object.entries({ blocks: { clear: "clear", render: "render" }, caret: { focus: "focus" }, events: { on: "on", off: "off", emit: "emit" }, saver: { save: "save" } }).forEach(function(n2) {
              var o3 = (0, r2.default)(n2, 2), i3 = o3[0], a2 = o3[1];
              Object.entries(a2).forEach(function(n3) {
                var o4 = (0, r2.default)(n3, 2), a3 = o4[0], s2 = o4[1];
                e2[s2] = t3.moduleInstances.API.methods[i3][a3];
              });
            });
          } }], [{ key: "version", get: function() {
            return "2.22.2";
          } }]), t2;
        }();
        o2.default = p, p.displayName = "EditorJS", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e) {
      t.exports = function(t2) {
        if (Array.isArray(t2))
          return t2;
      };
    }, function(t, e) {
      t.exports = function(t2, e2) {
        if (typeof Symbol != "undefined" && Symbol.iterator in Object(t2)) {
          var n = [], o = true, r = false, i = void 0;
          try {
            for (var a, s = t2[Symbol.iterator](); !(o = (a = s.next()).done) && (n.push(a.value), !e2 || n.length !== e2); o = true)
              ;
          } catch (t3) {
            r = true, i = t3;
          } finally {
            try {
              o || s.return == null || s.return();
            } finally {
              if (r)
                throw i;
            }
          }
          return n;
        }
      };
    }, function(t, e) {
      t.exports = function() {
        throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
      };
    }, function(t, e, n) {
      (e = t.exports = function(...t2) {
        return r(...t2);
      }).__esModule = true;
      const o = n(364), r = o.default;
      Object.assign(e, o);
    }, function(t, e, n) {
      Object.defineProperty(e, "__esModule", { value: true }), e.default = function() {
      }, e.revert = function() {
      };
    }, function(t, e, n) {
      var o, r, i;
      r = [], (i = typeof (o = function() {
        Element.prototype.matches || (Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector || function(t2) {
          for (var e2 = (this.document || this.ownerDocument).querySelectorAll(t2), n2 = e2.length; --n2 >= 0 && e2.item(n2) !== this; )
            ;
          return n2 > -1;
        }), Element.prototype.closest || (Element.prototype.closest = function(t2) {
          var e2 = this;
          if (!document.documentElement.contains(e2))
            return null;
          do {
            if (e2.matches(t2))
              return e2;
            e2 = e2.parentElement || e2.parentNode;
          } while (e2 !== null);
          return null;
        }), Element.prototype.prepend || (Element.prototype.prepend = function(t2) {
          var e2 = document.createDocumentFragment();
          Array.isArray(t2) || (t2 = [t2]), t2.forEach(function(t3) {
            var n2 = t3 instanceof Node;
            e2.appendChild(n2 ? t3 : document.createTextNode(t3));
          }), this.insertBefore(e2, this.firstChild);
        });
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(23), n(24), n(2), n(3), n(15), n(7), n(59), n(148), n(151)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d) {
        var p = n(8), h = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = h(r2), i2 = h(i2), a = h(a), s = h(s), l = h(l), c = p(c), u = h(u), d = h(d);
        var v = n(374), g = [];
        v.keys().forEach(function(t2) {
          t2.match(/^\.\/[^_][\w/]*\.([tj])s$/) && g.push(v(t2));
        });
        var y = function() {
          function t2(e3) {
            var n3, o3, s2 = this;
            (0, a.default)(this, t2), this.moduleInstances = {}, this.eventsDispatcher = new d.default(), this.isReady = new Promise(function(t3, e4) {
              n3 = t3, o3 = e4;
            }), Promise.resolve().then((0, i2.default)(r2.default.mark(function t3() {
              return r2.default.wrap(function(t4) {
                for (; ; )
                  switch (t4.prev = t4.next) {
                    case 0:
                      return s2.configuration = e3, t4.next = 3, s2.validate();
                    case 3:
                      return t4.next = 5, s2.init();
                    case 5:
                      return t4.next = 7, s2.start();
                    case 7:
                      c.logLabeled("I'm ready! (\uFF89\u25D5\u30EE\u25D5)\uFF89*:\uFF65\uFF9F\u2727", "log", "", "color: #E24A75"), setTimeout((0, i2.default)(r2.default.mark(function t5() {
                        var e4, o4, i3;
                        return r2.default.wrap(function(t6) {
                          for (; ; )
                            switch (t6.prev = t6.next) {
                              case 0:
                                return t6.next = 2, s2.render();
                              case 2:
                                s2.configuration.autofocus && (e4 = s2.moduleInstances, o4 = e4.BlockManager, (i3 = e4.Caret).setToBlock(o4.blocks[0], i3.positions.START), o4.highlightCurrentNode()), s2.moduleInstances.UI.removeLoader(), n3();
                              case 5:
                              case "end":
                                return t6.stop();
                            }
                        }, t5);
                      })), 500);
                    case 9:
                    case "end":
                      return t4.stop();
                  }
              }, t3);
            }))).catch(function(t3) {
              c.log("Editor.js is not ready because of ".concat(t3), "error"), o3(t3);
            });
          }
          var e2, n2;
          return (0, s.default)(t2, [{ key: "validate", value: (n2 = (0, i2.default)(r2.default.mark(function t3() {
            var e3, n3, o3;
            return r2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    if (e3 = this.config, n3 = e3.holderId, o3 = e3.holder, !n3 || !o3) {
                      t4.next = 3;
                      break;
                    }
                    throw Error("\xABholderId\xBB and \xABholder\xBB param can't assign at the same time.");
                  case 3:
                    if (!c.isString(o3) || l.default.get(o3)) {
                      t4.next = 5;
                      break;
                    }
                    throw Error("element with ID \xAB".concat(o3, "\xBB is missing. Pass correct holder's ID."));
                  case 5:
                    if (!o3 || !c.isObject(o3) || l.default.isElement(o3)) {
                      t4.next = 7;
                      break;
                    }
                    throw Error("\xABholder\xBB value must be an Element node");
                  case 7:
                  case "end":
                    return t4.stop();
                }
            }, t3, this);
          })), function() {
            return n2.apply(this, arguments);
          }) }, { key: "init", value: function() {
            this.constructModules(), this.configureModules();
          } }, { key: "start", value: (e2 = (0, i2.default)(r2.default.mark(function t3() {
            var e3, n3 = this;
            return r2.default.wrap(function(t4) {
              for (; ; )
                switch (t4.prev = t4.next) {
                  case 0:
                    return e3 = ["Tools", "UI", "BlockManager", "Paste", "BlockSelection", "RectangleSelection", "CrossBlockSelection", "ReadOnly"], t4.next = 3, e3.reduce(function(t5, e4) {
                      return t5.then((0, i2.default)(r2.default.mark(function t6() {
                        return r2.default.wrap(function(t7) {
                          for (; ; )
                            switch (t7.prev = t7.next) {
                              case 0:
                                return t7.prev = 0, t7.next = 3, n3.moduleInstances[e4].prepare();
                              case 3:
                                t7.next = 10;
                                break;
                              case 5:
                                if (t7.prev = 5, t7.t0 = t7.catch(0), !(t7.t0 instanceof f.CriticalError)) {
                                  t7.next = 9;
                                  break;
                                }
                                throw new Error(t7.t0.message);
                              case 9:
                                c.log("Module ".concat(e4, " was skipped because of %o"), "warn", t7.t0);
                              case 10:
                              case "end":
                                return t7.stop();
                            }
                        }, t6, null, [[0, 5]]);
                      })));
                    }, Promise.resolve());
                  case 3:
                  case "end":
                    return t4.stop();
                }
            }, t3);
          })), function() {
            return e2.apply(this, arguments);
          }) }, { key: "render", value: function() {
            return this.moduleInstances.Renderer.render(this.config.data.blocks);
          } }, { key: "constructModules", value: function() {
            var t3 = this;
            g.forEach(function(e3) {
              var n3 = c.isFunction(e3) ? e3 : e3.default;
              try {
                t3.moduleInstances[n3.displayName] = new n3({ config: t3.configuration, eventsDispatcher: t3.eventsDispatcher });
              } catch (t4) {
                c.log("Module ".concat(n3.displayName, " skipped because"), "warn", t4);
              }
            });
          } }, { key: "configureModules", value: function() {
            for (var t3 in this.moduleInstances)
              Object.prototype.hasOwnProperty.call(this.moduleInstances, t3) && (this.moduleInstances[t3].state = this.getModulesDiff(t3));
          } }, { key: "getModulesDiff", value: function(t3) {
            var e3 = {};
            for (var n3 in this.moduleInstances)
              n3 !== t3 && (e3[n3] = this.moduleInstances[n3]);
            return e3;
          } }, { key: "configuration", set: function(t3) {
            var e3, n3;
            c.isObject(t3) ? this.config = Object.assign({}, t3) : this.config = { holder: t3 }, c.deprecationAssert(!!this.config.holderId, "config.holderId", "config.holder"), this.config.holderId && !this.config.holder && (this.config.holder = this.config.holderId, this.config.holderId = null), this.config.holder == null && (this.config.holder = "editorjs"), this.config.logLevel || (this.config.logLevel = c.LogLevels.VERBOSE), c.setLogLevel(this.config.logLevel), c.deprecationAssert(Boolean(this.config.initialBlock), "config.initialBlock", "config.defaultBlock"), this.config.defaultBlock = this.config.defaultBlock || this.config.initialBlock || "paragraph", this.config.minHeight = this.config.minHeight !== void 0 ? this.config.minHeight : 300;
            var o3 = { type: this.config.defaultBlock, data: {} };
            this.config.placeholder = this.config.placeholder || false, this.config.sanitizer = this.config.sanitizer || { p: true, b: true, a: true }, this.config.hideToolbar = !!this.config.hideToolbar && this.config.hideToolbar, this.config.tools = this.config.tools || {}, this.config.i18n = this.config.i18n || {}, this.config.data = this.config.data || { blocks: [] }, this.config.onReady = this.config.onReady || function() {
            }, this.config.onChange = this.config.onChange || function() {
            }, this.config.inlineToolbar = this.config.inlineToolbar === void 0 || this.config.inlineToolbar, !c.isEmpty(this.config.data) && this.config.data.blocks && this.config.data.blocks.length !== 0 || (this.config.data = { blocks: [o3] }), this.config.readOnly = this.config.readOnly || false, ((e3 = this.config.i18n) === null || e3 === void 0 ? void 0 : e3.messages) && u.default.setDictionary(this.config.i18n.messages), this.config.i18n.direction = ((n3 = this.config.i18n) === null || n3 === void 0 ? void 0 : n3.direction) || "ltr";
          }, get: function() {
            return this.config;
          } }]), t2;
        }();
        o2.default = y, y.displayName = "Core", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o = n(146);
      t.exports = function(t2) {
        if (Array.isArray(t2))
          return o(t2);
      };
    }, function(t, e) {
      t.exports = function(t2) {
        if (typeof Symbol != "undefined" && Symbol.iterator in Object(t2))
          return Array.from(t2);
      };
    }, function(t, e) {
      t.exports = function() {
        throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
      };
    }, function(t, e) {
      t.exports = function(t2, e2, n) {
        return e2 in t2 ? Object.defineProperty(t2, e2, { value: n, enumerable: true, configurable: true, writable: true }) : t2[e2] = n, t2;
      };
    }, function(t, e) {
      t.exports = function(t2) {
        return Function.toString.call(t2).indexOf("[native code]") !== -1;
      };
    }, function(t, e, n) {
      var o = n(110), r = n(373);
      function i(e2, n2, a) {
        return r() ? t.exports = i = Reflect.construct : t.exports = i = function(t2, e3, n3) {
          var r2 = [null];
          r2.push.apply(r2, e3);
          var i2 = new (Function.bind.apply(t2, r2))();
          return n3 && o(i2, n3.prototype), i2;
        }, i.apply(null, arguments);
      }
      t.exports = i;
    }, function(t, e) {
      t.exports = function() {
        if (typeof Reflect == "undefined" || !Reflect.construct)
          return false;
        if (Reflect.construct.sham)
          return false;
        if (typeof Proxy == "function")
          return true;
        try {
          return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
          })), true;
        } catch (t2) {
          return false;
        }
      };
    }, function(t, e, n) {
      var o = { "./api": 81, "./api/": 81, "./api/blocks": 152, "./api/blocks.ts": 152, "./api/caret": 153, "./api/caret.ts": 153, "./api/events": 154, "./api/events.ts": 154, "./api/i18n": 155, "./api/i18n.ts": 155, "./api/index": 81, "./api/index.ts": 81, "./api/inlineToolbar": 156, "./api/inlineToolbar.ts": 156, "./api/listeners": 157, "./api/listeners.ts": 157, "./api/notifier": 158, "./api/notifier.ts": 158, "./api/readonly": 159, "./api/readonly.ts": 159, "./api/sanitizer": 160, "./api/sanitizer.ts": 160, "./api/saver": 161, "./api/saver.ts": 161, "./api/selection": 162, "./api/selection.ts": 162, "./api/styles": 163, "./api/styles.ts": 163, "./api/toolbar": 164, "./api/toolbar.ts": 164, "./api/tooltip": 165, "./api/tooltip.ts": 165, "./blockEvents": 166, "./blockEvents.ts": 166, "./blockManager": 167, "./blockManager.ts": 167, "./blockSelection": 169, "./blockSelection.ts": 169, "./caret": 170, "./caret.ts": 170, "./crossBlockSelection": 171, "./crossBlockSelection.ts": 171, "./dragNDrop": 172, "./dragNDrop.ts": 172, "./modificationsObserver": 173, "./modificationsObserver.ts": 173, "./paste": 174, "./paste.ts": 174, "./readonly": 175, "./readonly.ts": 175, "./rectangleSelection": 176, "./rectangleSelection.ts": 176, "./renderer": 177, "./renderer.ts": 177, "./saver": 178, "./saver.ts": 178, "./toolbar": 83, "./toolbar/": 83, "./toolbar/blockSettings": 179, "./toolbar/blockSettings.ts": 179, "./toolbar/conversion": 180, "./toolbar/conversion.ts": 180, "./toolbar/index": 83, "./toolbar/index.ts": 83, "./toolbar/inline": 181, "./toolbar/inline.ts": 181, "./toolbar/toolbox": 182, "./toolbar/toolbox.ts": 182, "./tools": 183, "./tools.ts": 183, "./ui": 185, "./ui.ts": 185 };
      function r(t2) {
        var e2 = i(t2);
        return n(e2);
      }
      function i(t2) {
        if (!n.o(o, t2)) {
          var e2 = new Error("Cannot find module '" + t2 + "'");
          throw e2.code = "MODULE_NOT_FOUND", e2;
        }
        return o[t2];
      }
      r.keys = function() {
        return Object.keys(o);
      }, r.resolve = i, t.exports = r, r.id = 374;
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(7)], (i = typeof (o = function(o2, r2, i2, a) {
        var s = n(8), l = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = l(r2), i2 = l(i2), a = s(a);
        var c = function() {
          function t2() {
            (0, r2.default)(this, t2), this.allListeners = [];
          }
          return (0, i2.default)(t2, [{ key: "on", value: function(t3, e2, n2) {
            var o3 = arguments.length > 3 && arguments[3] !== void 0 && arguments[3], r3 = a.generateId("l"), i3 = { id: r3, element: t3, eventType: e2, handler: n2, options: o3 }, s2 = this.findOne(t3, e2, n2);
            if (!s2)
              return this.allListeners.push(i3), t3.addEventListener(e2, n2, o3), r3;
          } }, { key: "off", value: function(t3, e2, n2, o3) {
            var r3 = this, i3 = this.findAll(t3, e2, n2);
            i3.forEach(function(t4, e3) {
              var n3 = r3.allListeners.indexOf(i3[e3]);
              n3 > -1 && (r3.allListeners.splice(n3, 1), t4.element.removeEventListener(t4.eventType, t4.handler, t4.options));
            });
          } }, { key: "offById", value: function(t3) {
            var e2 = this.findById(t3);
            e2 && e2.element.removeEventListener(e2.eventType, e2.handler, e2.options);
          } }, { key: "findOne", value: function(t3, e2, n2) {
            var o3 = this.findAll(t3, e2, n2);
            return o3.length > 0 ? o3[0] : null;
          } }, { key: "findAll", value: function(t3, e2, n2) {
            var o3 = t3 ? this.findByEventTarget(t3) : [];
            return t3 && e2 && n2 ? o3.filter(function(t4) {
              return t4.eventType === e2 && t4.handler === n2;
            }) : t3 && e2 ? o3.filter(function(t4) {
              return t4.eventType === e2;
            }) : o3;
          } }, { key: "removeAll", value: function() {
            this.allListeners.map(function(t3) {
              t3.element.removeEventListener(t3.eventType, t3.handler, t3.options);
            }), this.allListeners = [];
          } }, { key: "destroy", value: function() {
            this.removeAll();
          } }, { key: "findByEventTarget", value: function(t3) {
            return this.allListeners.filter(function(e2) {
              if (e2.element === t3)
                return e2;
            });
          } }, { key: "findByType", value: function(t3) {
            return this.allListeners.filter(function(e2) {
              if (e2.eventType === t3)
                return e2;
            });
          } }, { key: "findByHandler", value: function(t3) {
            return this.allListeners.filter(function(e2) {
              if (e2.handler === t3)
                return e2;
            });
          } }, { key: "findById", value: function(t3) {
            return this.allListeners.find(function(e2) {
              return e2.id === t3;
            });
          } }]), t2;
        }();
        o2.default = c, c.displayName = "Listeners", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(377)], (i = typeof (o = function(o2, r2, i2, a) {
        var s = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = s(r2), i2 = s(i2), a = s(a);
        var l = function() {
          function t2() {
            (0, r2.default)(this, t2);
          }
          return (0, i2.default)(t2, [{ key: "show", value: function(t3) {
            a.default.show(t3);
          } }]), t2;
        }();
        o2.default = l, l.displayName = "Notifier", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      t.exports = function(t2) {
        var e2 = {};
        function n2(o) {
          if (e2[o])
            return e2[o].exports;
          var r = e2[o] = { i: o, l: false, exports: {} };
          return t2[o].call(r.exports, r, r.exports, n2), r.l = true, r.exports;
        }
        return n2.m = t2, n2.c = e2, n2.d = function(t3, e3, o) {
          n2.o(t3, e3) || Object.defineProperty(t3, e3, { enumerable: true, get: o });
        }, n2.r = function(t3) {
          typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(t3, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t3, "__esModule", { value: true });
        }, n2.t = function(t3, e3) {
          if (1 & e3 && (t3 = n2(t3)), 8 & e3)
            return t3;
          if (4 & e3 && typeof t3 == "object" && t3 && t3.__esModule)
            return t3;
          var o = Object.create(null);
          if (n2.r(o), Object.defineProperty(o, "default", { enumerable: true, value: t3 }), 2 & e3 && typeof t3 != "string")
            for (var r in t3)
              n2.d(o, r, function(e4) {
                return t3[e4];
              }.bind(null, r));
          return o;
        }, n2.n = function(t3) {
          var e3 = t3 && t3.__esModule ? function() {
            return t3.default;
          } : function() {
            return t3;
          };
          return n2.d(e3, "a", e3), e3;
        }, n2.o = function(t3, e3) {
          return Object.prototype.hasOwnProperty.call(t3, e3);
        }, n2.p = "/", n2(n2.s = 0);
      }([function(t2, e2, n2) {
        n2(1), t2.exports = function() {
          var t3 = n2(6), e3 = null;
          return { show: function(n3) {
            if (n3.message) {
              !function() {
                if (e3)
                  return true;
                e3 = t3.getWrapper(), document.body.appendChild(e3);
              }();
              var o = null, r = n3.time || 8e3;
              switch (n3.type) {
                case "confirm":
                  o = t3.confirm(n3);
                  break;
                case "prompt":
                  o = t3.prompt(n3);
                  break;
                default:
                  o = t3.alert(n3), window.setTimeout(function() {
                    o.remove();
                  }, r);
              }
              e3.appendChild(o), o.classList.add("cdx-notify--bounce-in");
            }
          } };
        }();
      }, function(t2, e2, n2) {
        var o = n2(2);
        typeof o == "string" && (o = [[t2.i, o, ""]]), n2(4)(o, { hmr: true, transform: void 0, insertInto: void 0 }), o.locals && (t2.exports = o.locals);
      }, function(t2, e2, n2) {
        (t2.exports = n2(3)(false)).push([t2.i, `.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`, ""]);
      }, function(t2, e2) {
        t2.exports = function(t3) {
          var e3 = [];
          return e3.toString = function() {
            return this.map(function(e4) {
              var n2 = function(t4, e5) {
                var n3, o = t4[1] || "", r = t4[3];
                if (!r)
                  return o;
                if (e5 && typeof btoa == "function") {
                  var i = (n3 = r, "/*# sourceMappingURL=data:application/json;charset=utf-8;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(n3)))) + " */"), a = r.sources.map(function(t5) {
                    return "/*# sourceURL=" + r.sourceRoot + t5 + " */";
                  });
                  return [o].concat(a).concat([i]).join("\n");
                }
                return [o].join("\n");
              }(e4, t3);
              return e4[2] ? "@media " + e4[2] + "{" + n2 + "}" : n2;
            }).join("");
          }, e3.i = function(t4, n2) {
            typeof t4 == "string" && (t4 = [[null, t4, ""]]);
            for (var o = {}, r = 0; r < this.length; r++) {
              var i = this[r][0];
              typeof i == "number" && (o[i] = true);
            }
            for (r = 0; r < t4.length; r++) {
              var a = t4[r];
              typeof a[0] == "number" && o[a[0]] || (n2 && !a[2] ? a[2] = n2 : n2 && (a[2] = "(" + a[2] + ") and (" + n2 + ")"), e3.push(a));
            }
          }, e3;
        };
      }, function(t2, e2, n2) {
        var o, r, i = {}, a = (o = function() {
          return window && document && document.all && !window.atob;
        }, function() {
          return r === void 0 && (r = o.apply(this, arguments)), r;
        }), s = function(t3) {
          var e3 = {};
          return function(t4) {
            if (typeof t4 == "function")
              return t4();
            if (e3[t4] === void 0) {
              var n3 = function(t5) {
                return document.querySelector(t5);
              }.call(this, t4);
              if (window.HTMLIFrameElement && n3 instanceof window.HTMLIFrameElement)
                try {
                  n3 = n3.contentDocument.head;
                } catch (t5) {
                  n3 = null;
                }
              e3[t4] = n3;
            }
            return e3[t4];
          };
        }(), l = null, c = 0, u = [], f = n2(5);
        function d(t3, e3) {
          for (var n3 = 0; n3 < t3.length; n3++) {
            var o2 = t3[n3], r2 = i[o2.id];
            if (r2) {
              r2.refs++;
              for (var a2 = 0; a2 < r2.parts.length; a2++)
                r2.parts[a2](o2.parts[a2]);
              for (; a2 < o2.parts.length; a2++)
                r2.parts.push(b(o2.parts[a2], e3));
            } else {
              var s2 = [];
              for (a2 = 0; a2 < o2.parts.length; a2++)
                s2.push(b(o2.parts[a2], e3));
              i[o2.id] = { id: o2.id, refs: 1, parts: s2 };
            }
          }
        }
        function p(t3, e3) {
          for (var n3 = [], o2 = {}, r2 = 0; r2 < t3.length; r2++) {
            var i2 = t3[r2], a2 = e3.base ? i2[0] + e3.base : i2[0], s2 = { css: i2[1], media: i2[2], sourceMap: i2[3] };
            o2[a2] ? o2[a2].parts.push(s2) : n3.push(o2[a2] = { id: a2, parts: [s2] });
          }
          return n3;
        }
        function h(t3, e3) {
          var n3 = s(t3.insertInto);
          if (!n3)
            throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");
          var o2 = u[u.length - 1];
          if (t3.insertAt === "top")
            o2 ? o2.nextSibling ? n3.insertBefore(e3, o2.nextSibling) : n3.appendChild(e3) : n3.insertBefore(e3, n3.firstChild), u.push(e3);
          else if (t3.insertAt === "bottom")
            n3.appendChild(e3);
          else {
            if (typeof t3.insertAt != "object" || !t3.insertAt.before)
              throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");
            var r2 = s(t3.insertInto + " " + t3.insertAt.before);
            n3.insertBefore(e3, r2);
          }
        }
        function v(t3) {
          if (t3.parentNode === null)
            return false;
          t3.parentNode.removeChild(t3);
          var e3 = u.indexOf(t3);
          e3 >= 0 && u.splice(e3, 1);
        }
        function g(t3) {
          var e3 = document.createElement("style");
          return t3.attrs.type === void 0 && (t3.attrs.type = "text/css"), y(e3, t3.attrs), h(t3, e3), e3;
        }
        function y(t3, e3) {
          Object.keys(e3).forEach(function(n3) {
            t3.setAttribute(n3, e3[n3]);
          });
        }
        function b(t3, e3) {
          var n3, o2, r2, i2;
          if (e3.transform && t3.css) {
            if (!(i2 = e3.transform(t3.css)))
              return function() {
              };
            t3.css = i2;
          }
          if (e3.singleton) {
            var a2 = c++;
            n3 = l || (l = g(e3)), o2 = x.bind(null, n3, a2, false), r2 = x.bind(null, n3, a2, true);
          } else
            t3.sourceMap && typeof URL == "function" && typeof URL.createObjectURL == "function" && typeof URL.revokeObjectURL == "function" && typeof Blob == "function" && typeof btoa == "function" ? (n3 = function(t4) {
              var e4 = document.createElement("link");
              return t4.attrs.type === void 0 && (t4.attrs.type = "text/css"), t4.attrs.rel = "stylesheet", y(e4, t4.attrs), h(t4, e4), e4;
            }(e3), o2 = function(t4, e4, n4) {
              var o3 = n4.css, r3 = n4.sourceMap, i3 = e4.convertToAbsoluteUrls === void 0 && r3;
              (e4.convertToAbsoluteUrls || i3) && (o3 = f(o3)), r3 && (o3 += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(r3)))) + " */");
              var a3 = new Blob([o3], { type: "text/css" }), s2 = t4.href;
              t4.href = URL.createObjectURL(a3), s2 && URL.revokeObjectURL(s2);
            }.bind(null, n3, e3), r2 = function() {
              v(n3), n3.href && URL.revokeObjectURL(n3.href);
            }) : (n3 = g(e3), o2 = function(t4, e4) {
              var n4 = e4.css, o3 = e4.media;
              if (o3 && t4.setAttribute("media", o3), t4.styleSheet)
                t4.styleSheet.cssText = n4;
              else {
                for (; t4.firstChild; )
                  t4.removeChild(t4.firstChild);
                t4.appendChild(document.createTextNode(n4));
              }
            }.bind(null, n3), r2 = function() {
              v(n3);
            });
          return o2(t3), function(e4) {
            if (e4) {
              if (e4.css === t3.css && e4.media === t3.media && e4.sourceMap === t3.sourceMap)
                return;
              o2(t3 = e4);
            } else
              r2();
          };
        }
        t2.exports = function(t3, e3) {
          if (typeof DEBUG != "undefined" && DEBUG && typeof document != "object")
            throw new Error("The style-loader cannot be used in a non-browser environment");
          (e3 = e3 || {}).attrs = typeof e3.attrs == "object" ? e3.attrs : {}, e3.singleton || typeof e3.singleton == "boolean" || (e3.singleton = a()), e3.insertInto || (e3.insertInto = "head"), e3.insertAt || (e3.insertAt = "bottom");
          var n3 = p(t3, e3);
          return d(n3, e3), function(t4) {
            for (var o2 = [], r2 = 0; r2 < n3.length; r2++) {
              var a2 = n3[r2];
              (s2 = i[a2.id]).refs--, o2.push(s2);
            }
            for (t4 && d(p(t4, e3), e3), r2 = 0; r2 < o2.length; r2++) {
              var s2;
              if ((s2 = o2[r2]).refs === 0) {
                for (var l2 = 0; l2 < s2.parts.length; l2++)
                  s2.parts[l2]();
                delete i[s2.id];
              }
            }
          };
        };
        var m, k = (m = [], function(t3, e3) {
          return m[t3] = e3, m.filter(Boolean).join("\n");
        });
        function x(t3, e3, n3, o2) {
          var r2 = n3 ? "" : o2.css;
          if (t3.styleSheet)
            t3.styleSheet.cssText = k(e3, r2);
          else {
            var i2 = document.createTextNode(r2), a2 = t3.childNodes;
            a2[e3] && t3.removeChild(a2[e3]), a2.length ? t3.insertBefore(i2, a2[e3]) : t3.appendChild(i2);
          }
        }
      }, function(t2, e2) {
        t2.exports = function(t3) {
          var e3 = typeof window != "undefined" && window.location;
          if (!e3)
            throw new Error("fixUrls requires window.location");
          if (!t3 || typeof t3 != "string")
            return t3;
          var n2 = e3.protocol + "//" + e3.host, o = n2 + e3.pathname.replace(/\/[^\/]*$/, "/");
          return t3.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function(t4, e4) {
            var r, i = e4.trim().replace(/^"(.*)"$/, function(t5, e5) {
              return e5;
            }).replace(/^'(.*)'$/, function(t5, e5) {
              return e5;
            });
            return /^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i) ? t4 : (r = i.indexOf("//") === 0 ? i : i.indexOf("/") === 0 ? n2 + i : o + i.replace(/^\.\//, ""), "url(" + JSON.stringify(r) + ")");
          });
        };
      }, function(t2, e2, n2) {
        var o, r, i, a, s, l;
        t2.exports = (o = "cdx-notify", r = "cdx-notify__cross", i = "cdx-notify__button--confirm", a = "cdx-notify__button", s = "cdx-notify__btns-wrapper", { alert: l = function(t3) {
          var e3 = document.createElement("DIV"), n3 = document.createElement("DIV"), i2 = t3.message, a2 = t3.style;
          return e3.classList.add(o), a2 && e3.classList.add(o + "--" + a2), e3.innerHTML = i2, n3.classList.add(r), n3.addEventListener("click", e3.remove.bind(e3)), e3.appendChild(n3), e3;
        }, confirm: function(t3) {
          var e3 = l(t3), n3 = document.createElement("div"), o2 = document.createElement("button"), c = document.createElement("button"), u = e3.querySelector("." + r), f = t3.cancelHandler, d = t3.okHandler;
          return n3.classList.add(s), o2.innerHTML = t3.okText || "Confirm", c.innerHTML = t3.cancelText || "Cancel", o2.classList.add(a), c.classList.add(a), o2.classList.add(i), c.classList.add("cdx-notify__button--cancel"), f && typeof f == "function" && (c.addEventListener("click", f), u.addEventListener("click", f)), d && typeof d == "function" && o2.addEventListener("click", d), o2.addEventListener("click", e3.remove.bind(e3)), c.addEventListener("click", e3.remove.bind(e3)), n3.appendChild(o2), n3.appendChild(c), e3.appendChild(n3), e3;
        }, prompt: function(t3) {
          var e3 = l(t3), n3 = document.createElement("div"), o2 = document.createElement("button"), c = document.createElement("input"), u = e3.querySelector("." + r), f = t3.cancelHandler, d = t3.okHandler;
          return n3.classList.add(s), o2.innerHTML = t3.okText || "Ok", o2.classList.add(a), o2.classList.add(i), c.classList.add("cdx-notify__input"), t3.placeholder && c.setAttribute("placeholder", t3.placeholder), t3.default && (c.value = t3.default), t3.inputType && (c.type = t3.inputType), f && typeof f == "function" && u.addEventListener("click", f), d && typeof d == "function" && o2.addEventListener("click", function() {
            d(c.value);
          }), o2.addEventListener("click", e3.remove.bind(e3)), n3.appendChild(c), n3.appendChild(o2), e3.appendChild(n3), e3;
        }, getWrapper: function() {
          var t3 = document.createElement("DIV");
          return t3.classList.add("cdx-notifies"), t3;
        } });
      }]);
    }, function(t, e, n) {
      var o, r;
      (r = typeof (o = function() {
        function t2(t3) {
          var e3 = t3.tags;
          if (!Object.keys(e3).map(function(t4) {
            return typeof e3[t4];
          }).every(function(t4) {
            return t4 === "object" || t4 === "boolean" || t4 === "function";
          }))
            throw new Error("The configuration was invalid");
          this.config = t3;
        }
        var e2 = ["P", "LI", "TD", "TH", "DIV", "H1", "H2", "H3", "H4", "H5", "H6", "PRE"];
        function n2(t3) {
          return e2.indexOf(t3.nodeName) !== -1;
        }
        var o2 = ["A", "B", "STRONG", "I", "EM", "SUB", "SUP", "U", "STRIKE"];
        function r2(t3) {
          return o2.indexOf(t3.nodeName) !== -1;
        }
        function i(t3, e3, n3) {
          return typeof t3.tags[e3] == "function" ? t3.tags[e3](n3) : t3.tags[e3];
        }
        function a(t3, e3) {
          return e3 === void 0 || typeof e3 == "boolean" && !e3;
        }
        function s(t3, e3, n3) {
          var o3 = t3.name.toLowerCase();
          return e3 !== true && (typeof e3[o3] == "function" ? !e3[o3](t3.value, n3) : e3[o3] === void 0 || e3[o3] === false || typeof e3[o3] == "string" && e3[o3] !== t3.value);
        }
        return t2.prototype.clean = function(t3) {
          const e3 = document.implementation.createHTMLDocument(), n3 = e3.createElement("div");
          return n3.innerHTML = t3, this._sanitize(e3, n3), n3.innerHTML;
        }, t2.prototype._sanitize = function(t3, e3) {
          var o3 = function(t4, e4) {
            return t4.createTreeWalker(e4, NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT, null, false);
          }(t3, e3), l = o3.firstChild();
          if (l)
            do {
              if (l.nodeType !== Node.TEXT_NODE) {
                if (l.nodeType === Node.COMMENT_NODE) {
                  e3.removeChild(l), this._sanitize(t3, e3);
                  break;
                }
                var c, u = r2(l);
                u && (c = Array.prototype.some.call(l.childNodes, n2));
                var f = !!e3.parentNode, d = n2(e3) && n2(l) && f, p = l.nodeName.toLowerCase(), h = i(this.config, p, l);
                if (u && c || a(0, h) || !this.config.keepNestedBlockElements && d) {
                  if (l.nodeName !== "SCRIPT" && l.nodeName !== "STYLE")
                    for (; l.childNodes.length > 0; )
                      e3.insertBefore(l.childNodes[0], l);
                  e3.removeChild(l), this._sanitize(t3, e3);
                  break;
                }
                for (var v = 0; v < l.attributes.length; v += 1) {
                  var g = l.attributes[v];
                  s(g, h, l) && (l.removeAttribute(g.name), v -= 1);
                }
                this._sanitize(t3, l);
              } else if (l.data.trim() === "" && (l.previousElementSibling && n2(l.previousElementSibling) || l.nextElementSibling && n2(l.nextElementSibling))) {
                e3.removeChild(l), this._sanitize(t3, e3);
                break;
              }
            } while (l = o3.nextSibling());
        }, t2;
      }) == "function" ? o.call(e, n, e, t) : o) === void 0 || (t.exports = r);
    }, function(t, e, n) {
      t.exports = function(t2) {
        var e2 = {};
        function n2(o) {
          if (e2[o])
            return e2[o].exports;
          var r = e2[o] = { i: o, l: false, exports: {} };
          return t2[o].call(r.exports, r, r.exports, n2), r.l = true, r.exports;
        }
        return n2.m = t2, n2.c = e2, n2.d = function(t3, e3, o) {
          n2.o(t3, e3) || Object.defineProperty(t3, e3, { enumerable: true, get: o });
        }, n2.r = function(t3) {
          typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(t3, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t3, "__esModule", { value: true });
        }, n2.t = function(t3, e3) {
          if (1 & e3 && (t3 = n2(t3)), 8 & e3)
            return t3;
          if (4 & e3 && typeof t3 == "object" && t3 && t3.__esModule)
            return t3;
          var o = Object.create(null);
          if (n2.r(o), Object.defineProperty(o, "default", { enumerable: true, value: t3 }), 2 & e3 && typeof t3 != "string")
            for (var r in t3)
              n2.d(o, r, function(e4) {
                return t3[e4];
              }.bind(null, r));
          return o;
        }, n2.n = function(t3) {
          var e3 = t3 && t3.__esModule ? function() {
            return t3.default;
          } : function() {
            return t3;
          };
          return n2.d(e3, "a", e3), e3;
        }, n2.o = function(t3, e3) {
          return Object.prototype.hasOwnProperty.call(t3, e3);
        }, n2.p = "", n2(n2.s = 0);
      }([function(t2, e2, n2) {
        t2.exports = n2(1);
      }, function(t2, e2, n2) {
        n2.r(e2), n2.d(e2, "default", function() {
          return o;
        });
        class o {
          constructor() {
            this.nodes = { wrapper: null, content: null }, this.showed = false, this.offsetTop = 10, this.offsetLeft = 10, this.offsetRight = 10, this.hidingDelay = 0, this.handleWindowScroll = () => {
              this.showed && this.hide(true);
            }, this.loadStyles(), this.prepare(), window.addEventListener("scroll", this.handleWindowScroll, { passive: true });
          }
          get CSS() {
            return { tooltip: "ct", tooltipContent: "ct__content", tooltipShown: "ct--shown", placement: { left: "ct--left", bottom: "ct--bottom", right: "ct--right", top: "ct--top" } };
          }
          show(t3, e3, n3) {
            this.nodes.wrapper || this.prepare(), this.hidingTimeout && clearTimeout(this.hidingTimeout);
            const o2 = Object.assign({ placement: "bottom", marginTop: 0, marginLeft: 0, marginRight: 0, marginBottom: 0, delay: 70, hidingDelay: 0 }, n3);
            if (o2.hidingDelay && (this.hidingDelay = o2.hidingDelay), this.nodes.content.innerHTML = "", typeof e3 == "string")
              this.nodes.content.appendChild(document.createTextNode(e3));
            else {
              if (!(e3 instanceof Node))
                throw Error("[CodeX Tooltip] Wrong type of \xABcontent\xBB passed. It should be an instance of Node or String. But " + typeof e3 + " given.");
              this.nodes.content.appendChild(e3);
            }
            switch (this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)), o2.placement) {
              case "top":
                this.placeTop(t3, o2);
                break;
              case "left":
                this.placeLeft(t3, o2);
                break;
              case "right":
                this.placeRight(t3, o2);
                break;
              case "bottom":
              default:
                this.placeBottom(t3, o2);
            }
            o2 && o2.delay ? this.showingTimeout = setTimeout(() => {
              this.nodes.wrapper.classList.add(this.CSS.tooltipShown), this.showed = true;
            }, o2.delay) : (this.nodes.wrapper.classList.add(this.CSS.tooltipShown), this.showed = true);
          }
          hide(t3 = false) {
            if (this.hidingDelay && !t3)
              return this.hidingTimeout && clearTimeout(this.hidingTimeout), void (this.hidingTimeout = setTimeout(() => {
                this.hide(true);
              }, this.hidingDelay));
            this.nodes.wrapper.classList.remove(this.CSS.tooltipShown), this.showed = false, this.showingTimeout && clearTimeout(this.showingTimeout);
          }
          onHover(t3, e3, n3) {
            t3.addEventListener("mouseenter", () => {
              this.show(t3, e3, n3);
            }), t3.addEventListener("mouseleave", () => {
              this.hide();
            });
          }
          destroy() {
            this.nodes.wrapper.remove(), window.removeEventListener("scroll", this.handleWindowScroll);
          }
          prepare() {
            this.nodes.wrapper = this.make("div", this.CSS.tooltip), this.nodes.content = this.make("div", this.CSS.tooltipContent), this.append(this.nodes.wrapper, this.nodes.content), this.append(document.body, this.nodes.wrapper);
          }
          loadStyles() {
            const t3 = "codex-tooltips-style";
            if (document.getElementById(t3))
              return;
            const e3 = n2(2), o2 = this.make("style", null, { textContent: e3.toString(), id: t3 });
            this.prepend(document.head, o2);
          }
          placeBottom(t3, e3) {
            const n3 = t3.getBoundingClientRect(), o2 = n3.left + t3.clientWidth / 2 - this.nodes.wrapper.offsetWidth / 2, r = n3.bottom + window.pageYOffset + this.offsetTop + e3.marginTop;
            this.applyPlacement("bottom", o2, r);
          }
          placeTop(t3, e3) {
            const n3 = t3.getBoundingClientRect(), o2 = n3.left + t3.clientWidth / 2 - this.nodes.wrapper.offsetWidth / 2, r = n3.top + window.pageYOffset - this.nodes.wrapper.clientHeight - this.offsetTop;
            this.applyPlacement("top", o2, r);
          }
          placeLeft(t3, e3) {
            const n3 = t3.getBoundingClientRect(), o2 = n3.left - this.nodes.wrapper.offsetWidth - this.offsetLeft - e3.marginLeft, r = n3.top + window.pageYOffset + t3.clientHeight / 2 - this.nodes.wrapper.offsetHeight / 2;
            this.applyPlacement("left", o2, r);
          }
          placeRight(t3, e3) {
            const n3 = t3.getBoundingClientRect(), o2 = n3.right + this.offsetRight + e3.marginRight, r = n3.top + window.pageYOffset + t3.clientHeight / 2 - this.nodes.wrapper.offsetHeight / 2;
            this.applyPlacement("right", o2, r);
          }
          applyPlacement(t3, e3, n3) {
            this.nodes.wrapper.classList.add(this.CSS.placement[t3]), this.nodes.wrapper.style.left = e3 + "px", this.nodes.wrapper.style.top = n3 + "px";
          }
          make(t3, e3 = null, n3 = {}) {
            const o2 = document.createElement(t3);
            Array.isArray(e3) ? o2.classList.add(...e3) : e3 && o2.classList.add(e3);
            for (const t4 in n3)
              n3.hasOwnProperty(t4) && (o2[t4] = n3[t4]);
            return o2;
          }
          append(t3, e3) {
            Array.isArray(e3) ? e3.forEach((e4) => t3.appendChild(e4)) : t3.appendChild(e3);
          }
          prepend(t3, e3) {
            Array.isArray(e3) ? (e3 = e3.reverse()).forEach((e4) => t3.prepend(e4)) : t3.prepend(e3);
          }
        }
      }, function(t2, e2) {
        t2.exports = `.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`;
      }]).default;
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(15), n(7), n(25)], (i = typeof (o = function(o2, r2, i2, a, s, l) {
        var c = n(8), u = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = u(r2), i2 = u(i2), a = u(a), s = c(s), l = u(l);
        var f = function() {
          function t2(e2, n2) {
            (0, r2.default)(this, t2), this.cursor = -1, this.items = [], this.items = e2 || [], this.focusedCssClass = n2;
          }
          return (0, i2.default)(t2, [{ key: "setItems", value: function(t3) {
            this.items = t3;
          } }, { key: "next", value: function() {
            this.cursor = this.leafNodesAndReturnIndex(t2.directions.RIGHT);
          } }, { key: "previous", value: function() {
            this.cursor = this.leafNodesAndReturnIndex(t2.directions.LEFT);
          } }, { key: "dropCursor", value: function() {
            this.cursor !== -1 && (this.items[this.cursor].classList.remove(this.focusedCssClass), this.cursor = -1);
          } }, { key: "leafNodesAndReturnIndex", value: function(e2) {
            var n2 = this;
            if (this.items.length === 0)
              return this.cursor;
            var o3 = this.cursor;
            return o3 === -1 ? o3 = e2 === t2.directions.RIGHT ? -1 : 0 : this.items[o3].classList.remove(this.focusedCssClass), o3 = e2 === t2.directions.RIGHT ? (o3 + 1) % this.items.length : (this.items.length + o3 - 1) % this.items.length, a.default.canSetCaret(this.items[o3]) && s.delay(function() {
              return l.default.setCursor(n2.items[o3]);
            }, 50)(), this.items[o3].classList.add(this.focusedCssClass), o3;
          } }, { key: "currentItem", get: function() {
            return this.cursor === -1 ? null : this.items[this.cursor];
          } }]), t2;
        }();
        o2.default = f, f.displayName = "DomIterator", f.directions = { RIGHT: "right", LEFT: "left" }, t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o = n(4);
      t.exports = function(t2, e2) {
        for (; !Object.prototype.hasOwnProperty.call(t2, e2) && (t2 = o(t2)) !== null; )
          ;
        return t2;
      };
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(7), n(15), n(66)], (i = typeof (o = function(o2, r2, i2, a, s, l) {
        var c = n(8), u = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = u(r2), i2 = u(i2), a = c(a), s = u(s);
        var f = function() {
          function t2(e2) {
            (0, r2.default)(this, t2), this.blocks = [], this.workingArea = e2;
          }
          return (0, i2.default)(t2, [{ key: "push", value: function(t3) {
            this.blocks.push(t3), this.insertToDOM(t3);
          } }, { key: "swap", value: function(t3, e2) {
            var n2 = this.blocks[e2];
            s.default.swap(this.blocks[t3].holder, n2.holder), this.blocks[e2] = this.blocks[t3], this.blocks[t3] = n2;
          } }, { key: "move", value: function(t3, e2) {
            var n2 = this.blocks.splice(e2, 1)[0], o3 = t3 - 1, r3 = Math.max(0, o3), i3 = this.blocks[r3];
            t3 > 0 ? this.insertToDOM(n2, "afterend", i3) : this.insertToDOM(n2, "beforebegin", i3), this.blocks.splice(t3, 0, n2);
            var a2 = this.composeBlockEvent("move", { fromIndex: e2, toIndex: t3 });
            n2.call(l.BlockToolAPI.MOVED, a2);
          } }, { key: "insert", value: function(t3, e2) {
            var n2 = arguments.length > 2 && arguments[2] !== void 0 && arguments[2];
            if (this.length) {
              t3 > this.length && (t3 = this.length), n2 && (this.blocks[t3].holder.remove(), this.blocks[t3].call(l.BlockToolAPI.REMOVED));
              var o3 = n2 ? 1 : 0;
              if (this.blocks.splice(t3, o3, e2), t3 > 0) {
                var r3 = this.blocks[t3 - 1];
                this.insertToDOM(e2, "afterend", r3);
              } else {
                var i3 = this.blocks[t3 + 1];
                i3 ? this.insertToDOM(e2, "beforebegin", i3) : this.insertToDOM(e2);
              }
            } else
              this.push(e2);
          } }, { key: "remove", value: function(t3) {
            isNaN(t3) && (t3 = this.length - 1), this.blocks[t3].holder.remove(), this.blocks[t3].call(l.BlockToolAPI.REMOVED), this.blocks.splice(t3, 1);
          } }, { key: "removeAll", value: function() {
            this.workingArea.innerHTML = "", this.blocks.forEach(function(t3) {
              return t3.call(l.BlockToolAPI.REMOVED);
            }), this.blocks.length = 0;
          } }, { key: "insertAfter", value: function(t3, e2) {
            var n2 = this.blocks.indexOf(t3);
            this.insert(n2 + 1, e2);
          } }, { key: "get", value: function(t3) {
            return this.blocks[t3];
          } }, { key: "indexOf", value: function(t3) {
            return this.blocks.indexOf(t3);
          } }, { key: "insertToDOM", value: function(t3, e2, n2) {
            e2 ? n2.holder.insertAdjacentElement(e2, t3.holder) : this.workingArea.appendChild(t3.holder), t3.call(l.BlockToolAPI.RENDERED);
          } }, { key: "composeBlockEvent", value: function(t3, e2) {
            return new CustomEvent(t3, { detail: e2 });
          } }, { key: "length", get: function() {
            return this.blocks.length;
          } }, { key: "array", get: function() {
            return this.blocks;
          } }, { key: "nodes", get: function() {
            return a.array(this.workingArea.children);
          } }], [{ key: "set", value: function(t3, e2, n2) {
            return isNaN(Number(e2)) ? (Reflect.set(t3, e2, n2), true) : (t3.insert(+e2, n2), true);
          } }, { key: "get", value: function(t3, e2) {
            return isNaN(Number(e2)) ? Reflect.get(t3, e2) : t3.get(+e2);
          } }]), t2;
        }();
        o2.default = f, f.displayName = "Blocks", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      t.exports = function(t2) {
        var e2 = {};
        function n2(o) {
          if (e2[o])
            return e2[o].exports;
          var r = e2[o] = { i: o, l: false, exports: {} };
          return t2[o].call(r.exports, r, r.exports, n2), r.l = true, r.exports;
        }
        return n2.m = t2, n2.c = e2, n2.d = function(t3, e3, o) {
          n2.o(t3, e3) || Object.defineProperty(t3, e3, { enumerable: true, get: o });
        }, n2.r = function(t3) {
          typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(t3, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t3, "__esModule", { value: true });
        }, n2.t = function(t3, e3) {
          if (1 & e3 && (t3 = n2(t3)), 8 & e3)
            return t3;
          if (4 & e3 && typeof t3 == "object" && t3 && t3.__esModule)
            return t3;
          var o = Object.create(null);
          if (n2.r(o), Object.defineProperty(o, "default", { enumerable: true, value: t3 }), 2 & e3 && typeof t3 != "string")
            for (var r in t3)
              n2.d(o, r, function(e4) {
                return t3[e4];
              }.bind(null, r));
          return o;
        }, n2.n = function(t3) {
          var e3 = t3 && t3.__esModule ? function() {
            return t3.default;
          } : function() {
            return t3;
          };
          return n2.d(e3, "a", e3), e3;
        }, n2.o = function(t3, e3) {
          return Object.prototype.hasOwnProperty.call(t3, e3);
        }, n2.p = "", n2(n2.s = 0);
      }([function(t2, e2, n2) {
        function o(t3, e3) {
          for (var n3 = 0; n3 < e3.length; n3++) {
            var o2 = e3[n3];
            o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(t3, o2.key, o2);
          }
        }
        function r(t3, e3, n3) {
          return e3 && o(t3.prototype, e3), n3 && o(t3, n3), t3;
        }
        n2.r(e2);
        var i = function() {
          function t3(e3) {
            var n3 = this;
            !function(t4, e4) {
              if (!(t4 instanceof e4))
                throw new TypeError("Cannot call a class as a function");
            }(this, t3), this.commands = {}, this.keys = {}, this.name = e3.name, this.parseShortcutName(e3.name), this.element = e3.on, this.callback = e3.callback, this.executeShortcut = function(t4) {
              n3.execute(t4);
            }, this.element.addEventListener("keydown", this.executeShortcut, false);
          }
          return r(t3, null, [{ key: "supportedCommands", get: function() {
            return { SHIFT: ["SHIFT"], CMD: ["CMD", "CONTROL", "COMMAND", "WINDOWS", "CTRL"], ALT: ["ALT", "OPTION"] };
          } }, { key: "keyCodes", get: function() {
            return { 0: 48, 1: 49, 2: 50, 3: 51, 4: 52, 5: 53, 6: 54, 7: 55, 8: 56, 9: 57, A: 65, B: 66, C: 67, D: 68, E: 69, F: 70, G: 71, H: 72, I: 73, J: 74, K: 75, L: 76, M: 77, N: 78, O: 79, P: 80, Q: 81, R: 82, S: 83, T: 84, U: 85, V: 86, W: 87, X: 88, Y: 89, Z: 90, BACKSPACE: 8, ENTER: 13, ESCAPE: 27, LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40, INSERT: 45, DELETE: 46 };
          } }]), r(t3, [{ key: "parseShortcutName", value: function(e3) {
            e3 = e3.split("+");
            for (var n3 = 0; n3 < e3.length; n3++) {
              e3[n3] = e3[n3].toUpperCase();
              var o2 = false;
              for (var r2 in t3.supportedCommands)
                if (t3.supportedCommands[r2].includes(e3[n3])) {
                  o2 = this.commands[r2] = true;
                  break;
                }
              o2 || (this.keys[e3[n3]] = true);
            }
            for (var i2 in t3.supportedCommands)
              this.commands[i2] || (this.commands[i2] = false);
          } }, { key: "execute", value: function(e3) {
            var n3, o2 = { CMD: e3.ctrlKey || e3.metaKey, SHIFT: e3.shiftKey, ALT: e3.altKey }, r2 = true;
            for (n3 in this.commands)
              this.commands[n3] !== o2[n3] && (r2 = false);
            var i2, a = true;
            for (i2 in this.keys)
              a = a && e3.keyCode === t3.keyCodes[i2];
            r2 && a && this.callback(e3);
          } }, { key: "remove", value: function() {
            this.element.removeEventListener("keydown", this.executeShortcut);
          } }]), t3;
        }();
        e2.default = i;
      }]).default;
    }, function(t, e, n) {
      t.exports = function(t2) {
        var e2 = {};
        function n2(o) {
          if (e2[o])
            return e2[o].exports;
          var r = e2[o] = { i: o, l: false, exports: {} };
          return t2[o].call(r.exports, r, r.exports, n2), r.l = true, r.exports;
        }
        return n2.m = t2, n2.c = e2, n2.d = function(t3, e3, o) {
          n2.o(t3, e3) || Object.defineProperty(t3, e3, { enumerable: true, get: o });
        }, n2.r = function(t3) {
          typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(t3, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t3, "__esModule", { value: true });
        }, n2.t = function(t3, e3) {
          if (1 & e3 && (t3 = n2(t3)), 8 & e3)
            return t3;
          if (4 & e3 && typeof t3 == "object" && t3 && t3.__esModule)
            return t3;
          var o = Object.create(null);
          if (n2.r(o), Object.defineProperty(o, "default", { enumerable: true, value: t3 }), 2 & e3 && typeof t3 != "string")
            for (var r in t3)
              n2.d(o, r, function(e4) {
                return t3[e4];
              }.bind(null, r));
          return o;
        }, n2.n = function(t3) {
          var e3 = t3 && t3.__esModule ? function() {
            return t3.default;
          } : function() {
            return t3;
          };
          return n2.d(e3, "a", e3), e3;
        }, n2.o = function(t3, e3) {
          return Object.prototype.hasOwnProperty.call(t3, e3);
        }, n2.p = "/", n2(n2.s = 0);
      }([function(t2, e2, n2) {
        function o(t3, e3) {
          for (var n3 = 0; n3 < e3.length; n3++) {
            var o2 = e3[n3];
            o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(t3, o2.key, o2);
          }
        }
        function r(t3, e3, n3) {
          return e3 && o(t3.prototype, e3), n3 && o(t3, n3), t3;
        }
        n2(1).toString();
        var i = function() {
          function t3(e3) {
            var n3 = e3.data, o2 = e3.config, r2 = e3.api, i2 = e3.readOnly;
            !function(t4, e4) {
              if (!(t4 instanceof e4))
                throw new TypeError("Cannot call a class as a function");
            }(this, t3), this.api = r2, this.readOnly = i2, this._CSS = { block: this.api.styles.block, wrapper: "ce-paragraph" }, this.readOnly || (this.onKeyUp = this.onKeyUp.bind(this)), this._placeholder = o2.placeholder ? o2.placeholder : t3.DEFAULT_PLACEHOLDER, this._data = {}, this._element = this.drawView(), this._preserveBlank = o2.preserveBlank !== void 0 && o2.preserveBlank, this.data = n3;
          }
          return r(t3, null, [{ key: "DEFAULT_PLACEHOLDER", get: function() {
            return "";
          } }]), r(t3, [{ key: "onKeyUp", value: function(t4) {
            t4.code !== "Backspace" && t4.code !== "Delete" || this._element.textContent === "" && (this._element.innerHTML = "");
          } }, { key: "drawView", value: function() {
            var t4 = document.createElement("DIV");
            return t4.classList.add(this._CSS.wrapper, this._CSS.block), t4.contentEditable = false, t4.dataset.placeholder = this.api.i18n.t(this._placeholder), this.readOnly || (t4.contentEditable = true, t4.addEventListener("keyup", this.onKeyUp)), t4;
          } }, { key: "render", value: function() {
            return this._element;
          } }, { key: "merge", value: function(t4) {
            var e3 = { text: this.data.text + t4.text };
            this.data = e3;
          } }, { key: "validate", value: function(t4) {
            return !(t4.text.trim() === "" && !this._preserveBlank);
          } }, { key: "save", value: function(t4) {
            return { text: t4.innerHTML };
          } }, { key: "onPaste", value: function(t4) {
            var e3 = { text: t4.detail.data.innerHTML };
            this.data = e3;
          } }, { key: "data", get: function() {
            var t4 = this._element.innerHTML;
            return this._data.text = t4, this._data;
          }, set: function(t4) {
            this._data = t4 || {}, this._element.innerHTML = this._data.text || "";
          } }], [{ key: "conversionConfig", get: function() {
            return { export: "text", import: "text" };
          } }, { key: "sanitize", get: function() {
            return { text: { br: true } };
          } }, { key: "isReadOnlySupported", get: function() {
            return true;
          } }, { key: "pasteConfig", get: function() {
            return { tags: ["P"] };
          } }, { key: "toolbox", get: function() {
            return { icon: n2(5).default, title: "Text" };
          } }]), t3;
        }();
        t2.exports = i;
      }, function(t2, e2, n2) {
        var o = n2(2), r = n2(3);
        typeof (r = r.__esModule ? r.default : r) == "string" && (r = [[t2.i, r, ""]]), o(r, { insert: "head", singleton: false }), t2.exports = r.locals || {};
      }, function(t2, e2, n2) {
        var o, r = function() {
          var t3 = {};
          return function(e3) {
            if (t3[e3] === void 0) {
              var n3 = document.querySelector(e3);
              if (window.HTMLIFrameElement && n3 instanceof window.HTMLIFrameElement)
                try {
                  n3 = n3.contentDocument.head;
                } catch (t4) {
                  n3 = null;
                }
              t3[e3] = n3;
            }
            return t3[e3];
          };
        }(), i = [];
        function a(t3) {
          for (var e3 = -1, n3 = 0; n3 < i.length; n3++)
            if (i[n3].identifier === t3) {
              e3 = n3;
              break;
            }
          return e3;
        }
        function s(t3, e3) {
          for (var n3 = {}, o2 = [], r2 = 0; r2 < t3.length; r2++) {
            var s2 = t3[r2], l2 = e3.base ? s2[0] + e3.base : s2[0], c2 = n3[l2] || 0, u2 = "".concat(l2, " ").concat(c2);
            n3[l2] = c2 + 1;
            var f2 = a(u2), d2 = { css: s2[1], media: s2[2], sourceMap: s2[3] };
            f2 !== -1 ? (i[f2].references++, i[f2].updater(d2)) : i.push({ identifier: u2, updater: v(d2, e3), references: 1 }), o2.push(u2);
          }
          return o2;
        }
        function l(t3) {
          var e3 = document.createElement("style"), o2 = t3.attributes || {};
          if (o2.nonce === void 0) {
            var i2 = n2.nc;
            i2 && (o2.nonce = i2);
          }
          if (Object.keys(o2).forEach(function(t4) {
            e3.setAttribute(t4, o2[t4]);
          }), typeof t3.insert == "function")
            t3.insert(e3);
          else {
            var a2 = r(t3.insert || "head");
            if (!a2)
              throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
            a2.appendChild(e3);
          }
          return e3;
        }
        var c, u = (c = [], function(t3, e3) {
          return c[t3] = e3, c.filter(Boolean).join("\n");
        });
        function f(t3, e3, n3, o2) {
          var r2 = n3 ? "" : o2.media ? "@media ".concat(o2.media, " {").concat(o2.css, "}") : o2.css;
          if (t3.styleSheet)
            t3.styleSheet.cssText = u(e3, r2);
          else {
            var i2 = document.createTextNode(r2), a2 = t3.childNodes;
            a2[e3] && t3.removeChild(a2[e3]), a2.length ? t3.insertBefore(i2, a2[e3]) : t3.appendChild(i2);
          }
        }
        function d(t3, e3, n3) {
          var o2 = n3.css, r2 = n3.media, i2 = n3.sourceMap;
          if (r2 ? t3.setAttribute("media", r2) : t3.removeAttribute("media"), i2 && btoa && (o2 += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i2)))), " */")), t3.styleSheet)
            t3.styleSheet.cssText = o2;
          else {
            for (; t3.firstChild; )
              t3.removeChild(t3.firstChild);
            t3.appendChild(document.createTextNode(o2));
          }
        }
        var p = null, h = 0;
        function v(t3, e3) {
          var n3, o2, r2;
          if (e3.singleton) {
            var i2 = h++;
            n3 = p || (p = l(e3)), o2 = f.bind(null, n3, i2, false), r2 = f.bind(null, n3, i2, true);
          } else
            n3 = l(e3), o2 = d.bind(null, n3, e3), r2 = function() {
              !function(t4) {
                if (t4.parentNode === null)
                  return false;
                t4.parentNode.removeChild(t4);
              }(n3);
            };
          return o2(t3), function(e4) {
            if (e4) {
              if (e4.css === t3.css && e4.media === t3.media && e4.sourceMap === t3.sourceMap)
                return;
              o2(t3 = e4);
            } else
              r2();
          };
        }
        t2.exports = function(t3, e3) {
          (e3 = e3 || {}).singleton || typeof e3.singleton == "boolean" || (e3.singleton = (o === void 0 && (o = Boolean(window && document && document.all && !window.atob)), o));
          var n3 = s(t3 = t3 || [], e3);
          return function(t4) {
            if (t4 = t4 || [], Object.prototype.toString.call(t4) === "[object Array]") {
              for (var o2 = 0; o2 < n3.length; o2++) {
                var r2 = a(n3[o2]);
                i[r2].references--;
              }
              for (var l2 = s(t4, e3), c2 = 0; c2 < n3.length; c2++) {
                var u2 = a(n3[c2]);
                i[u2].references === 0 && (i[u2].updater(), i.splice(u2, 1));
              }
              n3 = l2;
            }
          };
        };
      }, function(t2, e2, n2) {
        (e2 = n2(4)(false)).push([t2.i, ".ce-paragraph {\n    line-height: 1.6em;\n    outline: none;\n}\n\n.ce-paragraph[data-placeholder]:empty::before{\n  content: attr(data-placeholder);\n  color: #707684;\n  font-weight: normal;\n  opacity: 0;\n}\n\n/** Show placeholder at the first paragraph if Editor is empty */\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {\n  opacity: 1;\n}\n\n.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {\n  opacity: 0;\n}\n\n.ce-paragraph p:first-of-type{\n    margin-top: 0;\n}\n\n.ce-paragraph p:last-of-type{\n    margin-bottom: 0;\n}\n", ""]), t2.exports = e2;
      }, function(t2, e2, n2) {
        t2.exports = function(t3) {
          var e3 = [];
          return e3.toString = function() {
            return this.map(function(e4) {
              var n3 = function(t4, e5) {
                var n4, o, r, i = t4[1] || "", a = t4[3];
                if (!a)
                  return i;
                if (e5 && typeof btoa == "function") {
                  var s = (n4 = a, o = btoa(unescape(encodeURIComponent(JSON.stringify(n4)))), r = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o), "/*# ".concat(r, " */")), l = a.sources.map(function(t5) {
                    return "/*# sourceURL=".concat(a.sourceRoot || "").concat(t5, " */");
                  });
                  return [i].concat(l).concat([s]).join("\n");
                }
                return [i].join("\n");
              }(e4, t3);
              return e4[2] ? "@media ".concat(e4[2], " {").concat(n3, "}") : n3;
            }).join("");
          }, e3.i = function(t4, n3, o) {
            typeof t4 == "string" && (t4 = [[null, t4, ""]]);
            var r = {};
            if (o)
              for (var i = 0; i < this.length; i++) {
                var a = this[i][0];
                a != null && (r[a] = true);
              }
            for (var s = 0; s < t4.length; s++) {
              var l = [].concat(t4[s]);
              o && r[l[0]] || (n3 && (l[2] ? l[2] = "".concat(n3, " and ").concat(l[2]) : l[2] = n3), e3.push(l));
            }
          }, e3;
        };
      }, function(t2, e2, n2) {
        n2.r(e2), e2.default = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.2 -0.3 9 11.4" width="12" height="14">\n  <path d="M0 2.77V.92A1 1 0 01.2.28C.35.1.56 0 .83 0h7.66c.28.01.48.1.63.28.14.17.21.38.21.64v1.85c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26a1 1 0 01-.21-.66V1.69H5.6v7.58h.5c.25 0 .45.08.6.23.17.16.25.35.25.6s-.08.45-.24.6a.87.87 0 01-.62.22H3.21a.87.87 0 01-.61-.22.78.78 0 01-.24-.6c0-.25.08-.44.24-.6a.85.85 0 01.61-.23h.5V1.7H1.73v1.08c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26A1 1 0 010 2.77z"/>\n</svg>\n';
      }]);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(15)], (i = typeof (o = function(o2, r2, i2, a) {
        var s = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = s(r2), i2 = s(i2), a = s(a);
        var l = function() {
          function t2() {
            (0, r2.default)(this, t2), this.commandName = "bold", this.CSS = { button: "ce-inline-tool", buttonActive: "ce-inline-tool--active", buttonModifier: "ce-inline-tool--bold" }, this.nodes = { button: void 0 };
          }
          return (0, i2.default)(t2, [{ key: "render", value: function() {
            return this.nodes.button = document.createElement("button"), this.nodes.button.type = "button", this.nodes.button.classList.add(this.CSS.button, this.CSS.buttonModifier), this.nodes.button.appendChild(a.default.svg("bold", 12, 14)), this.nodes.button;
          } }, { key: "surround", value: function(t3) {
            document.execCommand(this.commandName);
          } }, { key: "checkState", value: function(t3) {
            var e2 = document.queryCommandState(this.commandName);
            return this.nodes.button.classList.toggle(this.CSS.buttonActive, e2), e2;
          } }, { key: "shortcut", get: function() {
            return "CMD+B";
          } }], [{ key: "sanitize", get: function() {
            return { b: {} };
          } }]), t2;
        }();
        o2.default = l, l.displayName = "BoldInlineTool", l.isInline = true, l.title = "Bold", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(15)], (i = typeof (o = function(o2, r2, i2, a) {
        var s = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = s(r2), i2 = s(i2), a = s(a);
        var l = function() {
          function t2() {
            (0, r2.default)(this, t2), this.commandName = "italic", this.CSS = { button: "ce-inline-tool", buttonActive: "ce-inline-tool--active", buttonModifier: "ce-inline-tool--italic" }, this.nodes = { button: null };
          }
          return (0, i2.default)(t2, [{ key: "render", value: function() {
            return this.nodes.button = document.createElement("button"), this.nodes.button.type = "button", this.nodes.button.classList.add(this.CSS.button, this.CSS.buttonModifier), this.nodes.button.appendChild(a.default.svg("italic", 4, 11)), this.nodes.button;
          } }, { key: "surround", value: function(t3) {
            document.execCommand(this.commandName);
          } }, { key: "checkState", value: function(t3) {
            var e2 = document.queryCommandState(this.commandName);
            return this.nodes.button.classList.toggle(this.CSS.buttonActive, e2), e2;
          } }, { key: "shortcut", get: function() {
            return "CMD+I";
          } }], [{ key: "sanitize", get: function() {
            return { i: {} };
          } }]), t2;
        }();
        o2.default = l, l.displayName = "ItalicInlineTool", l.isInline = true, l.title = "Italic", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(25), n(15), n(7)], (i = typeof (o = function(o2, r2, i2, a, s, l) {
        var c = n(8), u = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = u(r2), i2 = u(i2), a = u(a), s = u(s), l = c(l);
        var f = function() {
          function t2(e2) {
            var n2 = e2.api;
            (0, r2.default)(this, t2), this.commandLink = "createLink", this.commandUnlink = "unlink", this.ENTER_KEY = 13, this.CSS = { button: "ce-inline-tool", buttonActive: "ce-inline-tool--active", buttonModifier: "ce-inline-tool--link", buttonUnlink: "ce-inline-tool--unlink", input: "ce-inline-tool-input", inputShowed: "ce-inline-tool-input--showed" }, this.nodes = { button: null, input: null }, this.inputOpened = false, this.toolbar = n2.toolbar, this.inlineToolbar = n2.inlineToolbar, this.notifier = n2.notifier, this.i18n = n2.i18n, this.selection = new a.default();
          }
          return (0, i2.default)(t2, [{ key: "render", value: function() {
            return this.nodes.button = document.createElement("button"), this.nodes.button.type = "button", this.nodes.button.classList.add(this.CSS.button, this.CSS.buttonModifier), this.nodes.button.appendChild(s.default.svg("link", 14, 10)), this.nodes.button.appendChild(s.default.svg("unlink", 15, 11)), this.nodes.button;
          } }, { key: "renderActions", value: function() {
            var t3 = this;
            return this.nodes.input = document.createElement("input"), this.nodes.input.placeholder = this.i18n.t("Add a link"), this.nodes.input.classList.add(this.CSS.input), this.nodes.input.addEventListener("keydown", function(e2) {
              e2.keyCode === t3.ENTER_KEY && t3.enterPressed(e2);
            }), this.nodes.input;
          } }, { key: "surround", value: function(t3) {
            if (t3) {
              this.inputOpened ? (this.selection.restore(), this.selection.removeFakeBackground()) : (this.selection.setFakeBackground(), this.selection.save());
              var e2 = this.selection.findParentTag("A");
              if (e2)
                return this.selection.expandToTag(e2), this.unlink(), this.closeActions(), this.checkState(), void this.toolbar.close();
            }
            this.toggleActions();
          } }, { key: "checkState", value: function(t3) {
            var e2 = this.selection.findParentTag("A");
            if (e2) {
              this.nodes.button.classList.add(this.CSS.buttonUnlink), this.nodes.button.classList.add(this.CSS.buttonActive), this.openActions();
              var n2 = e2.getAttribute("href");
              this.nodes.input.value = n2 !== "null" ? n2 : "", this.selection.save();
            } else
              this.nodes.button.classList.remove(this.CSS.buttonUnlink), this.nodes.button.classList.remove(this.CSS.buttonActive);
            return !!e2;
          } }, { key: "clear", value: function() {
            this.closeActions();
          } }, { key: "toggleActions", value: function() {
            this.inputOpened ? this.closeActions(false) : this.openActions(true);
          } }, { key: "openActions", value: function() {
            var t3 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
            this.nodes.input.classList.add(this.CSS.inputShowed), t3 && this.nodes.input.focus(), this.inputOpened = true;
          } }, { key: "closeActions", value: function() {
            var t3 = !(arguments.length > 0 && arguments[0] !== void 0) || arguments[0];
            if (this.selection.isFakeBackgroundEnabled) {
              var e2 = new a.default();
              e2.save(), this.selection.restore(), this.selection.removeFakeBackground(), e2.restore();
            }
            this.nodes.input.classList.remove(this.CSS.inputShowed), this.nodes.input.value = "", t3 && this.selection.clearSaved(), this.inputOpened = false;
          } }, { key: "enterPressed", value: function(t3) {
            var e2 = this.nodes.input.value || "";
            return e2.trim() ? this.validateURL(e2) ? (e2 = this.prepareLink(e2), this.selection.restore(), this.selection.removeFakeBackground(), this.insertLink(e2), t3.preventDefault(), t3.stopPropagation(), t3.stopImmediatePropagation(), this.selection.collapseToEnd(), void this.inlineToolbar.close()) : (this.notifier.show({ message: "Pasted link is not valid.", style: "error" }), void l.log("Incorrect Link pasted", "warn", e2)) : (this.selection.restore(), this.unlink(), t3.preventDefault(), void this.closeActions());
          } }, { key: "validateURL", value: function(t3) {
            return !/\s/.test(t3);
          } }, { key: "prepareLink", value: function(t3) {
            return t3 = t3.trim(), t3 = this.addProtocol(t3);
          } }, { key: "addProtocol", value: function(t3) {
            if (/^(\w+):(\/\/)?/.test(t3))
              return t3;
            var e2 = /^\/[^/\s]/.test(t3), n2 = t3.substring(0, 1) === "#", o3 = /^\/\/[^/\s]/.test(t3);
            return e2 || n2 || o3 || (t3 = "http://" + t3), t3;
          } }, { key: "insertLink", value: function(t3) {
            var e2 = this.selection.findParentTag("A");
            e2 && this.selection.expandToTag(e2), document.execCommand(this.commandLink, false, t3);
          } }, { key: "unlink", value: function() {
            document.execCommand(this.commandUnlink);
          } }, { key: "shortcut", get: function() {
            return "CMD+K";
          } }], [{ key: "sanitize", get: function() {
            return { a: { href: true, target: "_blank", rel: "nofollow" } };
          } }]), t2;
        }();
        o2.default = f, f.displayName = "LinkInlineTool", f.isInline = true, f.title = "Link", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(15)], (i = typeof (o = function(o2, r2, i2, a) {
        var s = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = s(r2), i2 = s(i2), a = s(a);
        var l = function() {
          function t2(e2) {
            var n2 = e2.data, o3 = e2.api;
            (0, r2.default)(this, t2), this.CSS = { wrapper: "ce-stub", info: "ce-stub__info", title: "ce-stub__title", subtitle: "ce-stub__subtitle" }, this.api = o3, this.title = n2.title || this.api.i18n.t("Error"), this.subtitle = this.api.i18n.t("The block can not be displayed correctly."), this.savedData = n2.savedData, this.wrapper = this.make();
          }
          return (0, i2.default)(t2, [{ key: "render", value: function() {
            return this.wrapper;
          } }, { key: "save", value: function() {
            return this.savedData;
          } }, { key: "make", value: function() {
            var t3 = a.default.make("div", this.CSS.wrapper), e2 = a.default.svg("sad-face", 52, 52), n2 = a.default.make("div", this.CSS.info), o3 = a.default.make("div", this.CSS.title, { textContent: this.title }), r3 = a.default.make("div", this.CSS.subtitle, { textContent: this.subtitle });
            return t3.appendChild(e2), n2.appendChild(o3), n2.appendChild(r3), t3.appendChild(n2), t3;
          } }]), t2;
        }();
        o2.default = l, l.displayName = "Stub", l.isReadOnlySupported = true, t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(67), n(390), n(391), n(392)], (i = typeof (o = function(o2, r2, i2, a, s, l, c) {
        var u = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = u(r2), i2 = u(i2), s = u(s), l = u(l), c = u(c);
        var f = function(t2, e2) {
          var n2 = {};
          for (var o3 in t2)
            Object.prototype.hasOwnProperty.call(t2, o3) && e2.indexOf(o3) < 0 && (n2[o3] = t2[o3]);
          if (t2 != null && typeof Object.getOwnPropertySymbols == "function") {
            var r3 = 0;
            for (o3 = Object.getOwnPropertySymbols(t2); r3 < o3.length; r3++)
              e2.indexOf(o3[r3]) < 0 && Object.prototype.propertyIsEnumerable.call(t2, o3[r3]) && (n2[o3[r3]] = t2[o3[r3]]);
          }
          return n2;
        }, d = function() {
          function t2(e2, n2, o3) {
            (0, r2.default)(this, t2), this.api = o3, this.config = e2, this.editorConfig = n2;
          }
          return (0, i2.default)(t2, [{ key: "get", value: function(t3) {
            var e2 = this.config[t3], n2 = e2.class, o3 = e2.isInternal, r3 = o3 !== void 0 && o3, i3 = f(e2, ["class", "isInternal"]);
            return new (this.getConstructor(n2))({ name: t3, constructable: n2, config: i3, api: this.api, isDefault: t3 === this.editorConfig.defaultBlock, defaultPlaceholder: this.editorConfig.placeholder, isInternal: r3 });
          } }, { key: "getConstructor", value: function(t3) {
            switch (true) {
              case t3[a.InternalInlineToolSettings.IsInline]:
                return s.default;
              case t3[a.InternalTuneSettings.IsTune]:
                return l.default;
              default:
                return c.default;
            }
          } }]), t2;
        }();
        o2.default = d, d.displayName = "ToolsFactory", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(67)], (i = typeof (o = function(o2, r2, i2, a, s, l, c) {
        var u = n(8), f = n(1);
        function d() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = f(r2), i2 = f(i2), a = f(a), s = f(s), l = f(l);
        var p = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (d()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            var t3;
            return (0, r2.default)(this, o3), (t3 = n2.apply(this, arguments)).type = c.ToolType.Inline, t3;
          }
          return (0, i2.default)(o3, [{ key: "create", value: function() {
            return new this.constructable({ api: this.api.getMethodsForTool(this), config: this.settings });
          } }, { key: "title", get: function() {
            return this.constructable[c.InternalInlineToolSettings.Title];
          } }]), o3;
        }((c = u(c)).default);
        o2.default = p, p.displayName = "InlineTool", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(5), n(6), n(4), n(67)], (i = typeof (o = function(o2, r2, i2, a, s, l, c) {
        var u = n(8), f = n(1);
        function d() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = f(r2), i2 = f(i2), a = f(a), s = f(s), l = f(l);
        var p = function(t2) {
          (0, a.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, l.default)(e2);
            if (d()) {
              var o4 = (0, l.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, s.default)(this, t3);
          });
          function o3() {
            var t3;
            return (0, r2.default)(this, o3), (t3 = n2.apply(this, arguments)).type = c.ToolType.Tune, t3;
          }
          return (0, i2.default)(o3, [{ key: "create", value: function(t3, e3) {
            return new this.constructable({ api: this.api.getMethodsForTool(this), config: this.settings, block: e3, data: t3 });
          } }]), o3;
        }((c = u(c)).default);
        o2.default = p, p.displayName = "BlockTune", t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(168), n(5), n(6), n(4), n(80), n(67), n(7), n(184)], (i = typeof (o = function(o2, r2, i2, a, s, l, c, u, f, d, p) {
        var h = n(8), v = n(1);
        function g() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (t2) {
            return false;
          }
        }
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = v(r2), i2 = v(i2), a = v(a), s = v(s), l = v(l), c = v(c), u = v(u), f = h(f), d = h(d), p = v(p);
        var y = function(t2, e2, n2, o3) {
          var r3, i3 = arguments.length, a2 = i3 < 3 ? e2 : o3 === null ? o3 = Object.getOwnPropertyDescriptor(e2, n2) : o3;
          if ((typeof Reflect == "undefined" ? "undefined" : (0, u.default)(Reflect)) === "object" && typeof Reflect.decorate == "function")
            a2 = Reflect.decorate(t2, e2, n2, o3);
          else
            for (var s2 = t2.length - 1; s2 >= 0; s2--)
              (r3 = t2[s2]) && (a2 = (i3 < 3 ? r3(a2) : i3 > 3 ? r3(e2, n2, a2) : r3(e2, n2)) || a2);
          return i3 > 3 && a2 && Object.defineProperty(e2, n2, a2), a2;
        }, b = function(t2) {
          (0, s.default)(o3, t2);
          var e2, n2 = (e2 = o3, function() {
            var t3, n3 = (0, c.default)(e2);
            if (g()) {
              var o4 = (0, c.default)(this).constructor;
              t3 = Reflect.construct(n3, arguments, o4);
            } else
              t3 = n3.apply(this, arguments);
            return (0, l.default)(this, t3);
          });
          function o3() {
            var t3;
            return (0, r2.default)(this, o3), (t3 = n2.apply(this, arguments)).type = f.ToolType.Block, t3.inlineTools = new p.default(), t3.tunes = new p.default(), t3;
          }
          return (0, i2.default)(o3, [{ key: "create", value: function(t3, e3, n3) {
            return new this.constructable({ data: t3, block: e3, readOnly: n3, api: this.api.getMethodsForTool(this), config: this.settings });
          } }, { key: "isReadOnlySupported", get: function() {
            return this.constructable[f.InternalBlockToolSettings.IsReadOnlySupported] === true;
          } }, { key: "isLineBreaksEnabled", get: function() {
            return this.constructable[f.InternalBlockToolSettings.IsEnabledLineBreaks];
          } }, { key: "toolbox", get: function() {
            var t3 = this.constructable[f.InternalBlockToolSettings.Toolbox], e3 = this.config[f.UserSettings.Toolbox];
            if (!d.isEmpty(t3) && (e3 != null ? e3 : t3) !== false)
              return Object.assign({}, t3, e3);
          } }, { key: "conversionConfig", get: function() {
            return this.constructable[f.InternalBlockToolSettings.ConversionConfig];
          } }, { key: "enabledInlineTools", get: function() {
            return this.config[f.UserSettings.EnabledInlineTools] || false;
          } }, { key: "enabledBlockTunes", get: function() {
            return this.config[f.UserSettings.EnabledBlockTunes];
          } }, { key: "pasteConfig", get: function() {
            return this.constructable[f.InternalBlockToolSettings.PasteConfig] || {};
          } }, { key: "sanitizeConfig", get: function() {
            var t3 = (0, a.default)((0, c.default)(o3.prototype), "sanitizeConfig", this), e3 = this.baseSanitizeConfig;
            if (d.isEmpty(t3))
              return e3;
            var n3 = {};
            for (var r3 in t3)
              if (Object.prototype.hasOwnProperty.call(t3, r3)) {
                var i3 = t3[r3];
                d.isObject(i3) ? n3[r3] = Object.assign({}, e3, i3) : n3[r3] = i3;
              }
            return n3;
          } }, { key: "baseSanitizeConfig", get: function() {
            var t3 = {};
            return Array.from(this.inlineTools.values()).forEach(function(e3) {
              return Object.assign(t3, e3.sanitizeConfig);
            }), Array.from(this.tunes.values()).forEach(function(e3) {
              return Object.assign(t3, e3.sanitizeConfig);
            }), t3;
          } }]), o3;
        }(f.default);
        o2.default = b, b.displayName = "BlockTool", y([d.cacheable], b.prototype, "sanitizeConfig", null), y([d.cacheable], b.prototype, "baseSanitizeConfig", null), t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(15)], (i = typeof (o = function(o2, r2, i2, a) {
        var s = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = s(r2), i2 = s(i2), a = s(a);
        var l = function() {
          function t2(e2) {
            var n2 = e2.api;
            (0, r2.default)(this, t2), this.CSS = { button: "ce-settings__button", wrapper: "ce-tune-move-down", animation: "wobble" }, this.api = n2;
          }
          return (0, i2.default)(t2, [{ key: "render", value: function() {
            var t3 = this, e2 = a.default.make("div", [this.CSS.button, this.CSS.wrapper], {});
            return e2.appendChild(a.default.svg("arrow-down", 14, 14)), this.api.listeners.on(e2, "click", function(n2) {
              return t3.handleClick(n2, e2);
            }, false), this.api.tooltip.onHover(e2, this.api.i18n.t("Move down"), { hidingDelay: 300 }), e2;
          } }, { key: "handleClick", value: function(t3, e2) {
            var n2 = this, o3 = this.api.blocks.getCurrentBlockIndex(), r3 = this.api.blocks.getBlockByIndex(o3 + 1);
            if (!r3)
              return e2.classList.add(this.CSS.animation), void window.setTimeout(function() {
                e2.classList.remove(n2.CSS.animation);
              }, 500);
            var i3 = r3.holder, a2 = i3.getBoundingClientRect(), s2 = Math.abs(window.innerHeight - i3.offsetHeight);
            a2.top < window.innerHeight && (s2 = window.scrollY + i3.offsetHeight), window.scrollTo(0, s2), this.api.blocks.move(o3 + 1), this.api.tooltip.hide();
          } }]), t2;
        }();
        o2.default = l, l.displayName = "MoveDownTune", l.isTune = true, t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(15)], (i = typeof (o = function(o2, r2, i2, a) {
        var s = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = s(r2), i2 = s(i2), a = s(a);
        var l = function() {
          function t2(e2) {
            var n2 = this, o3 = e2.api;
            (0, r2.default)(this, t2), this.CSS = { button: "ce-settings__button", buttonDelete: "ce-settings__button--delete", buttonConfirm: "ce-settings__button--confirm" }, this.nodes = { button: null }, this.api = o3, this.resetConfirmation = function() {
              n2.setConfirmation(false);
            };
          }
          return (0, i2.default)(t2, [{ key: "render", value: function() {
            var t3 = this;
            return this.nodes.button = a.default.make("div", [this.CSS.button, this.CSS.buttonDelete], {}), this.nodes.button.appendChild(a.default.svg("cross", 12, 12)), this.api.listeners.on(this.nodes.button, "click", function(e2) {
              return t3.handleClick(e2);
            }, false), this.api.tooltip.onHover(this.nodes.button, this.api.i18n.t("Delete"), { hidingDelay: 300 }), this.nodes.button;
          } }, { key: "handleClick", value: function(t3) {
            this.needConfirmation ? (this.api.events.off("block-settings-closed", this.resetConfirmation), this.api.blocks.delete(), this.api.toolbar.close(), this.api.tooltip.hide(), t3.stopPropagation()) : (this.setConfirmation(true), this.api.events.on("block-settings-closed", this.resetConfirmation));
          } }, { key: "setConfirmation", value: function(t3) {
            this.needConfirmation = t3, this.nodes.button.classList.add(this.CSS.buttonConfirm);
          } }]), t2;
        }();
        o2.default = l, l.displayName = "DeleteTune", l.isTune = true, t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      var o, r, i;
      r = [e, n(2), n(3), n(15)], (i = typeof (o = function(o2, r2, i2, a) {
        var s = n(1);
        Object.defineProperty(o2, "__esModule", { value: true }), o2.default = void 0, r2 = s(r2), i2 = s(i2), a = s(a);
        var l = function() {
          function t2(e2) {
            var n2 = e2.api;
            (0, r2.default)(this, t2), this.CSS = { button: "ce-settings__button", wrapper: "ce-tune-move-up", animation: "wobble" }, this.api = n2;
          }
          return (0, i2.default)(t2, [{ key: "render", value: function() {
            var t3 = this, e2 = a.default.make("div", [this.CSS.button, this.CSS.wrapper], {});
            return e2.appendChild(a.default.svg("arrow-up", 14, 14)), this.api.listeners.on(e2, "click", function(n2) {
              return t3.handleClick(n2, e2);
            }, false), this.api.tooltip.onHover(e2, this.api.i18n.t("Move up"), { hidingDelay: 300 }), e2;
          } }, { key: "handleClick", value: function(t3, e2) {
            var n2 = this, o3 = this.api.blocks.getCurrentBlockIndex(), r3 = this.api.blocks.getBlockByIndex(o3), i3 = this.api.blocks.getBlockByIndex(o3 - 1);
            if (o3 === 0 || !r3 || !i3)
              return e2.classList.add(this.CSS.animation), void window.setTimeout(function() {
                e2.classList.remove(n2.CSS.animation);
              }, 500);
            var a2, s2 = r3.holder, l2 = i3.holder, c = s2.getBoundingClientRect(), u = l2.getBoundingClientRect();
            a2 = u.top > 0 ? Math.abs(c.top) - Math.abs(u.top) : window.innerHeight - Math.abs(c.top) + Math.abs(u.top), window.scrollBy(0, -1 * a2), this.api.blocks.move(o3 - 1), this.api.tooltip.hide();
          } }]), t2;
        }();
        o2.default = l, l.displayName = "MoveUpTune", l.isTune = true, t.exports = e.default;
      }) == "function" ? o.apply(e, r) : o) === void 0 || (t.exports = i);
    }, function(t, e, n) {
      n.r(e), e.default = '<?xml version="1.0" encoding="utf-8"?>\n<svg xmlns="http://www.w3.org/2000/svg">\n<symbol id="arrow-down" viewBox="0 0 14 14">\n  <path transform="matrix(1 0 0 -1 0 14)" d="M8.024 4.1v8.6a1.125 1.125 0 0 1-2.25 0V4.1L2.18 7.695A1.125 1.125 0 1 1 .59 6.104L6.103.588c.44-.439 1.151-.439 1.59 0l5.516 5.516a1.125 1.125 0 0 1-1.59 1.59L8.023 4.1z"/>\n\n</symbol>\n<symbol id="arrow-up" viewBox="0 0 14 14">\n    <path d="M8.024 4.1v8.6a1.125 1.125 0 0 1-2.25 0V4.1L2.18 7.695A1.125 1.125 0 1 1 .59 6.104L6.103.588c.44-.439 1.151-.439 1.59 0l5.516 5.516a1.125 1.125 0 0 1-1.59 1.59L8.023 4.1z"/>\n\n</symbol>\n<symbol id="bold" viewBox="0 0 12 14"><path d="M5.997 14H1.72c-.618 0-1.058-.138-1.323-.415C.132 13.308 0 12.867 0 12.262V1.738C0 1.121.135.676.406.406.676.136 1.114 0 1.719 0h4.536c.669 0 1.248.041 1.738.124.49.083.93.242 1.318.478a3.458 3.458 0 0 1 1.461 1.752c.134.366.2.753.2 1.16 0 1.401-.7 2.426-2.1 3.075 1.84.586 2.76 1.726 2.76 3.42 0 .782-.2 1.487-.602 2.114a3.61 3.61 0 0 1-1.623 1.39 5.772 5.772 0 0 1-1.471.377c-.554.073-1.2.11-1.939.11zm-.21-6.217h-2.95v4.087h3.046c1.916 0 2.874-.69 2.874-2.072 0-.707-.248-1.22-.745-1.537-.496-.319-1.238-.478-2.225-.478zM2.837 2.13v3.619h2.597c.707 0 1.252-.067 1.638-.2.385-.134.68-.389.883-.765.16-.267.239-.566.239-.897 0-.707-.252-1.176-.755-1.409-.503-.232-1.27-.348-2.301-.348H2.836z"/>\n</symbol>\n<symbol id="cross" viewBox="0 0 237 237">\n  <path transform="rotate(45 280.675 51.325)" d="M191 191V73c0-5.523 4.477-10 10-10h25c5.523 0 10 4.477 10 10v118h118c5.523 0 10 4.477 10 10v25c0 5.523-4.477 10-10 10H236v118c0 5.523-4.477 10-10 10h-25c-5.523 0-10-4.477-10-10V236H73c-5.523 0-10-4.477-10-10v-25c0-5.523 4.477-10 10-10h118z"/>\n\n</symbol>\n<symbol id="dots" viewBox="0 0 8 8">\n  <circle cx="6.5" cy="1.5" r="1.5"/>\n  <circle cx="6.5" cy="6.5" r="1.5"/>\n  <circle cx="1.5" cy="1.5" r="1.5"/>\n  <circle cx="1.5" cy="6.5" r="1.5"/>\n\n</symbol>\n<symbol id="italic" viewBox="0 0 4 11">\n    <path d="M3.289 4.17L2.164 9.713c-.078.384-.238.674-.48.87-.243.198-.52.296-.831.296-.312 0-.545-.1-.699-.302-.153-.202-.192-.49-.116-.864L1.15 4.225c.077-.38.232-.665.466-.857a1.25 1.25 0 01.818-.288c.312 0 .55.096.713.288.163.192.21.46.141.801zm-.667-2.09c-.295 0-.53-.09-.706-.273-.176-.181-.233-.439-.173-.77.055-.302.207-.55.457-.745C2.45.097 2.716 0 3 0c.273 0 .5.088.68.265.179.176.238.434.177.771-.06.327-.21.583-.45.767-.24.185-.502.277-.785.277z"/>\n\n</symbol>\n<symbol id="link" viewBox="0 0 14 10">\n  <path d="M6 0v2H5a3 3 0 000 6h1v2H5A5 5 0 115 0h1zm2 0h1a5 5 0 110 10H8V8h1a3 3 0 000-6H8V0zM5 4h4a1 1 0 110 2H5a1 1 0 110-2z"/>\n\n</symbol>\n<symbol id="plus" viewBox="0 0 14 14">\n    <path d="M8.05 5.8h4.625a1.125 1.125 0 0 1 0 2.25H8.05v4.625a1.125 1.125 0 0 1-2.25 0V8.05H1.125a1.125 1.125 0 0 1 0-2.25H5.8V1.125a1.125 1.125 0 0 1 2.25 0V5.8z"/>\n\n</symbol>\n<symbol id="sad-face" viewBox="0 0 52 52">\n    <path fill="#D76B6B" fill-rule="nonzero" d="M26 52C11.64 52 0 40.36 0 26S11.64 0 26 0s26 11.64 26 26-11.64 26-26 26zm0-3.25c12.564 0 22.75-10.186 22.75-22.75S38.564 3.25 26 3.25 3.25 13.436 3.25 26 13.436 48.75 26 48.75zM15.708 33.042a2.167 2.167 0 1 1 0-4.334 2.167 2.167 0 0 1 0 4.334zm23.834 0a2.167 2.167 0 1 1 0-4.334 2.167 2.167 0 0 1 0 4.334zm-15.875 5.452a1.083 1.083 0 1 1-1.834-1.155c1.331-2.114 3.49-3.179 6.334-3.179 2.844 0 5.002 1.065 6.333 3.18a1.083 1.083 0 1 1-1.833 1.154c-.913-1.45-2.366-2.167-4.5-2.167s-3.587.717-4.5 2.167z"/>\n\n</symbol>\n<symbol id="toggler-down">\n  <path d="M6.5 9.294a.792.792 0 01-.562-.232L2.233 5.356a.794.794 0 011.123-1.123L6.5 7.377l3.144-3.144a.794.794 0 011.123 1.123L7.062 9.062a.792.792 0 01-.562.232z"/>\n\n</symbol>\n<symbol id="unlink" viewBox="0 0 15 11">\n  <path d="M13.073 2.099l-1.448 1.448A3 3 0 009 2H8V0h1c1.68 0 3.166.828 4.073 2.099zM6.929 4l-.879.879L7.172 6H5a1 1 0 110-2h1.929zM6 0v2H5a3 3 0 100 6h1v2H5A5 5 0 115 0h1zm6.414 7l2.122 2.121-1.415 1.415L11 8.414l-2.121 2.122L7.464 9.12 9.586 7 7.464 4.879 8.88 3.464 11 5.586l2.121-2.122 1.415 1.415L12.414 7z"/>\n\n</symbol></svg>';
    }, function(t, e) {
      t.exports = '.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide,.codex-editor__redactor--hidden{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff "}@media (min-width:651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width:651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor__loader{position:relative;height:30vh}.codex-editor__loader:before{content:"";position:absolute;left:50%;top:50%;width:30px;height:30px;margin-top:-15px;margin-left:-15px;border-radius:50%;border:2px solid rgba(201,201,204,.48);border-top-color:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-animation:editor-loader-spin .8s linear infinite;animation:editor-loader-spin .8s linear infinite;will-change:transform}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:rgba(46,170,220,.2);border:1px solid transparent}.codex-editor svg{fill:currentColor;vertical-align:middle;max-height:100%}::-moz-selection{background-color:#d4ecff}::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}@-webkit-keyframes editor-loader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes editor-loader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,transform;display:none}@media (max-width:650px){.ce-toolbar{position:absolute;background-color:#fff;border:1px solid #eaeaea;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:4px;z-index:2}}@media (max-width:650px) and (max-width:650px){.ce-toolbar{-webkit-box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);border-bottom-color:#d5d7db}}@media (max-width:650px){.ce-toolbar{padding:3px;margin-top:5px}.ce-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar--opened{display:block}@media (max-width:650px){.ce-toolbar--opened{display:-webkit-box;display:-ms-flexbox;display:flex}}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}@media (max-width:650px){.ce-toolbar__content{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-line-pack:center;align-content:center;margin:0;max-width:calc(100% - 35px)}}.ce-toolbar__plus{color:#707684;cursor:pointer;width:34px;height:34px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;left:-34px;-ms-flex-negative:0;flex-shrink:0}.ce-toolbar__plus--active,.ce-toolbar__plus:hover{color:#388ae5}.ce-toolbar__plus--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}.ce-toolbar__plus--hidden{display:none}@media (max-width:650px){.ce-toolbar__plus{display:-webkit-inline-box!important;display:-ms-inline-flexbox!important;display:inline-flex!important;position:static;-webkit-transform:none!important;transform:none!important}}.ce-toolbar .ce-toolbox,.ce-toolbar__plus{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.ce-toolbar__actions{position:absolute;right:-30px;top:5px;opacity:0}@media (max-width:650px){.ce-toolbar__actions{position:absolute;right:-28px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}}.ce-toolbar__actions--opened{opacity:1}.ce-toolbar__actions-buttons{text-align:right}.ce-toolbar__settings-btn{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:18px;height:18px;color:#707684;cursor:pointer;background:#eff2f5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-toolbar__settings-btn:hover{color:#1d202b}@media (max-width:650px){.ce-toolbar__settings-btn{background:transparent}}@media (min-width:651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}.ce-toolbox{position:absolute;visibility:hidden;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}@media (max-width:650px){.ce-toolbox{position:static;-webkit-transform:none!important;transform:none!important;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow-x:auto}}.ce-toolbox--opened{opacity:1;visibility:visible}.ce-toolbox__button{color:#707684;cursor:pointer;width:34px;height:34px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-negative:0;flex-shrink:0}.ce-toolbox__button--active,.ce-toolbox__button:hover{color:#388ae5}.ce-toolbox__button--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbox-button-tooltip__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}@media (min-width:651px){.codex-editor--narrow .ce-toolbox{background:#fff;z-index:2}}.ce-inline-toolbar{position:absolute;background-color:#fff;border:1px solid #eaeaea;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:4px;z-index:2}@media (max-width:650px){.ce-inline-toolbar{-webkit-box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);border-bottom-color:#d5d7db}}.ce-inline-toolbar{-webkit-transform:translateX(-50%) translateY(8px) scale(.9);transform:translateX(-50%) translateY(8px) scale(.9);opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease,-webkit-transform .15s ease;transition:opacity .25s ease,-webkit-transform .15s ease;transition:transform .15s ease,opacity .25s ease;transition:transform .15s ease,opacity .25s ease,-webkit-transform .15s ease;will-change:transform,opacity;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.ce-inline-toolbar--left-oriented{-webkit-transform:translateX(-23px) translateY(8px) scale(.9);transform:translateX(-23px) translateY(8px) scale(.9)}.ce-inline-toolbar--left-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-23px);transform:translateX(-23px)}.ce-inline-toolbar--right-oriented{-webkit-transform:translateX(-100%) translateY(8px) scale(.9);transform:translateX(-100%) translateY(8px) scale(.9);margin-left:23px}.ce-inline-toolbar--right-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{width:100%;padding:0 6px}.ce-inline-toolbar__buttons,.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;height:34px;padding:0 9px 0 10px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48)}.ce-inline-toolbar__dropdown:hover{background:#eff2f5}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content{display:-webkit-box;display:-ms-flexbox;display:flex;font-weight:500;font-size:14px}.ce-inline-toolbar__dropdown-content svg{height:12px}.ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:4px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:34px;height:34px;line-height:34px;padding:0!important;text-align:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:#000;margin:0}.ce-inline-tool:hover{background-color:#eff2f5}.ce-inline-tool{border-radius:0;line-height:normal;width:auto;padding:0 5px!important;min-width:24px}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool:not(:last-of-type){margin-right:2px}.ce-inline-tool .icon{height:12px}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48)}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #eaeaea;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:4px;z-index:2}@media (max-width:650px){.ce-conversion-toolbar{-webkit-box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);border-bottom-color:#d5d7db}}.ce-conversion-toolbar{opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:150px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:20px;height:20px;border:1px solid rgba(201,201,204,.48);border-radius:3px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px;background:#fff}.ce-conversion-tool__icon svg{width:11px;height:11px}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-settings{position:absolute;background-color:#fff;border:1px solid #eaeaea;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:4px;z-index:2}@media (max-width:650px){.ce-settings{-webkit-box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);border-bottom-color:#d5d7db}}.ce-settings{right:-1px;top:30px;min-width:114px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-settings--left-oriented:before{left:15px;margin-left:0}.ce-settings--right-oriented:before{left:auto;right:15px;margin-left:0}@media (max-width:650px){.ce-settings{bottom:40px;right:-11px;top:auto}}.ce-settings:before{left:auto;right:12px}@media (max-width:650px){.ce-settings:before{bottom:-5px;top:auto}}.ce-settings{display:none}.ce-settings--opened{display:block;-webkit-animation-duration:.1s;animation-duration:.1s;-webkit-animation-name:panelShowing;animation-name:panelShowing}.ce-settings__plugin-zone:not(:empty){padding:3px 3px 0}.ce-settings__default-zone:not(:empty){padding:3px}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:34px;height:34px;line-height:34px;padding:0!important;text-align:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:#000;margin:0}.ce-settings__button:hover{background-color:#eff2f5}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button{line-height:32px}.ce-settings__button--disabled{cursor:not-allowed!important;opacity:.3}.ce-settings__button--selected{color:#388ae5}.ce-settings__button--delete{-webkit-transition:background-color .3s ease;transition:background-color .3s ease;will-change:background-color}.ce-settings__button--delete .icon{-webkit-transition:-webkit-transform .2s ease-out;transition:-webkit-transform .2s ease-out;transition:transform .2s ease-out;transition:transform .2s ease-out,-webkit-transform .2s ease-out;will-change:transform}.ce-settings__button--confirm{background-color:#e24a4a!important;color:#fff}.ce-settings__button--confirm:hover{background-color:#d54a4a!important}.ce-settings__button--confirm .icon{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content .ce-stub,.ce-block--selected .ce-block__content img{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388ae5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388ae5,#388ae5 1px,#fff 0,#fff 6px)}.ce-block a{cursor:pointer;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@media (min-width:651px){.codex-editor--narrow .ce-block--focused{margin-right:-50px;padding-right:50px}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-5%,0,0) rotate(-5deg);transform:translate3d(-5%,0,0) rotate(-5deg)}30%{-webkit-transform:translate3d(2%,0,0) rotate(3deg);transform:translate3d(2%,0,0) rotate(3deg)}45%{-webkit-transform:translate3d(-3%,0,0) rotate(-3deg);transform:translate3d(-3%,0,0) rotate(-3deg)}60%{-webkit-transform:translate3d(2%,0,0) rotate(2deg);transform:translate3d(2%,0,0) rotate(2deg)}75%{-webkit-transform:translate3d(-1%,0,0) rotate(-1deg);transform:translate3d(-1%,0,0) rotate(-1deg)}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-5%,0,0) rotate(-5deg);transform:translate3d(-5%,0,0) rotate(-5deg)}30%{-webkit-transform:translate3d(2%,0,0) rotate(3deg);transform:translate3d(2%,0,0) rotate(3deg)}45%{-webkit-transform:translate3d(-3%,0,0) rotate(-3deg);transform:translate3d(-3%,0,0) rotate(-3deg)}60%{-webkit-transform:translate3d(2%,0,0) rotate(2deg);transform:translate3d(2%,0,0) rotate(2deg)}75%{-webkit-transform:translate3d(-1%,0,0) rotate(-1deg);transform:translate3d(-1%,0,0) rotate(-1deg)}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.cdx-block{padding:.4em 0}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important;display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:34px;height:34px;line-height:34px;padding:0!important;text-align:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:#000;margin:0}.cdx-settings-button:hover{background-color:#eff2f5}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button:not(:nth-child(3n+3)){margin-right:3px}.cdx-settings-button:nth-child(n+4){margin-top:3px}.cdx-settings-button--active{color:#388ae5}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s linear infinite;animation:cdxRotation 1.2s linear infinite}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px 0 rgba(18,30,57,.04);color:#707684;text-align:center;cursor:pointer}.cdx-button:hover{background:#fbfcfe;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px 0 rgba(18,30,57,.08)}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;padding:3.5em 0;margin:17px 0;border-radius:3px;background:#fcf7f7;color:#b46262}.ce-stub__info{margin-left:20px}.ce-stub__title{margin-bottom:3px;font-weight:600;font-size:18px;text-transform:capitalize}.ce-stub__subtitle{font-size:16px}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-34px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-34px}@media (max-width:650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0 solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0;right:5px}}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}';
    }, function(t, e, n) {
      n.r(e), n.d(e, "nanoid", function() {
        return s;
      }), n.d(e, "customAlphabet", function() {
        return a;
      }), n.d(e, "customRandom", function() {
        return i;
      }), n.d(e, "urlAlphabet", function() {
        return o;
      }), n.d(e, "random", function() {
        return r;
      });
      let o = "ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW";
      let r = (t2) => crypto.getRandomValues(new Uint8Array(t2)), i = (t2, e2, n2) => {
        let o2 = (2 << Math.log(t2.length - 1) / Math.LN2) - 1, r2 = -~(1.6 * o2 * e2 / t2.length);
        return () => {
          let i2 = "";
          for (; ; ) {
            let a2 = n2(r2), s2 = r2;
            for (; s2--; )
              if (i2 += t2[a2[s2] & o2] || "", i2.length === e2)
                return i2;
          }
        };
      }, a = (t2, e2) => i(t2, e2, r), s = (t2 = 21) => {
        let e2 = "", n2 = crypto.getRandomValues(new Uint8Array(t2));
        for (; t2--; ) {
          let o2 = 63 & n2[t2];
          e2 += o2 < 36 ? o2.toString(36) : o2 < 62 ? (o2 - 26).toString(36).toUpperCase() : o2 < 63 ? "_" : "-";
        }
        return e2;
      };
    }]);
  });
})(editor);
var Editorjs$1 = /* @__PURE__ */ getDefaultExportFromCjs(editor.exports);
var Editorjs = "";
var tuiImageEditor$1 = "";
var DEFAULT_ICON_CONFIGS$6 = {
  size: "1em",
  strokeWidth: 4,
  strokeLinecap: "round",
  strokeLinejoin: "round",
  theme: "outline",
  colors: {
    outline: {
      fill: "#333",
      background: "transparent"
    },
    filled: {
      fill: "#333",
      background: "#FFF"
    },
    twoTone: {
      fill: "#333",
      twoTone: "#2F88FF"
    },
    multiColor: {
      outStrokeColor: "#333",
      outFillColor: "#2F88FF",
      innerStrokeColor: "#FFF",
      innerFillColor: "#43CCF8"
    }
  },
  prefix: "i"
};
function guid$6() {
  return "icon-" + ((1 + Math.random()) * 4294967296 | 0).toString(16).substring(1);
}
function IconConverter$6(id, icon, config) {
  var fill = typeof icon.fill === "string" ? [icon.fill] : icon.fill || [];
  var colors = [];
  var theme = icon.theme || config.theme;
  switch (theme) {
    case "outline":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      break;
    case "filled":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("#FFF");
      colors.push("#FFF");
      break;
    case "two-tone":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      break;
    case "multi-color":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.multiColor.outFillColor);
      colors.push(typeof fill[2] === "string" ? fill[2] : config.colors.multiColor.innerStrokeColor);
      colors.push(typeof fill[3] === "string" ? fill[3] : config.colors.multiColor.innerFillColor);
      break;
  }
  return {
    size: icon.size || config.size,
    strokeWidth: icon.strokeWidth || config.strokeWidth,
    strokeLinecap: icon.strokeLinecap || config.strokeLinecap,
    strokeLinejoin: icon.strokeLinejoin || config.strokeLinejoin,
    colors,
    id
  };
}
var currentConfig$6 = DEFAULT_ICON_CONFIGS$6;
function getConfig$6() {
  return currentConfig$6;
}
function IconWrapper$6(name, render2) {
  return function(props) {
    var config = getConfig$6();
    var svgProps = IconConverter$6(guid$6(), props, config);
    return render2(svgProps);
  };
}
var LeftOne_default = IconWrapper$6("left-one", function(props) {
  return '<?xml version="1.0" encoding="UTF-8"?><svg width="' + props.size + '" height="' + props.size + '" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01"/><path d="M30 36L18 24L30 12L30 36Z" fill="' + props.colors[1] + '" stroke="' + props.colors[0] + '" stroke-width="' + props.strokeWidth + '" stroke-linejoin="' + props.strokeLinejoin + '"/></svg>';
});
function IconPark$6(_a) {
  var _b = _a, { wrapper, size, unit, theme, fill, strokeLinecap, strokeLinejoin, strokeWidth } = _b, rest = __objRest(_b, ["wrapper", "size", "unit", "theme", "fill", "strokeLinecap", "strokeLinejoin", "strokeWidth"]);
  const iconStr = atomComputed(() => ({
    __html: LeftOne_default({
      theme: theme.value,
      size: `${size.value}${unit.value}`,
      fill: fill.value,
      strokeLinecap: strokeLinecap.value,
      strokeLinejoin: strokeLinejoin.value,
      strokeWidth: strokeWidth.value
    })
  }));
  return createElement(wrapper.value, __spreadProps(__spreadValues({ dangerouslySetInnerHTML: iconStr }, rest), { inline: true, "inline-line-height-1": true }));
}
IconPark$6.propTypes = {
  size: propTypes.number.default(() => atom(1)),
  unit: propTypes.string.default(() => atom("em")),
  theme: propTypes.string.default(() => atom("outline")),
  fill: propTypes.string.default(() => atom("#333")),
  strokeLinecap: propTypes.string.default(() => atom("round")),
  strokeLinejoin: propTypes.string.default(() => atom("round")),
  strokeWidth: propTypes.number.default(() => atom(4)),
  wrapper: propTypes.string.default(() => atom("iconWrapper"))
};
var DEFAULT_ICON_CONFIGS$5 = {
  size: "1em",
  strokeWidth: 4,
  strokeLinecap: "round",
  strokeLinejoin: "round",
  theme: "outline",
  colors: {
    outline: {
      fill: "#333",
      background: "transparent"
    },
    filled: {
      fill: "#333",
      background: "#FFF"
    },
    twoTone: {
      fill: "#333",
      twoTone: "#2F88FF"
    },
    multiColor: {
      outStrokeColor: "#333",
      outFillColor: "#2F88FF",
      innerStrokeColor: "#FFF",
      innerFillColor: "#43CCF8"
    }
  },
  prefix: "i"
};
function guid$5() {
  return "icon-" + ((1 + Math.random()) * 4294967296 | 0).toString(16).substring(1);
}
function IconConverter$5(id, icon, config) {
  var fill = typeof icon.fill === "string" ? [icon.fill] : icon.fill || [];
  var colors = [];
  var theme = icon.theme || config.theme;
  switch (theme) {
    case "outline":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      break;
    case "filled":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("#FFF");
      colors.push("#FFF");
      break;
    case "two-tone":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      break;
    case "multi-color":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.multiColor.outFillColor);
      colors.push(typeof fill[2] === "string" ? fill[2] : config.colors.multiColor.innerStrokeColor);
      colors.push(typeof fill[3] === "string" ? fill[3] : config.colors.multiColor.innerFillColor);
      break;
  }
  return {
    size: icon.size || config.size,
    strokeWidth: icon.strokeWidth || config.strokeWidth,
    strokeLinecap: icon.strokeLinecap || config.strokeLinecap,
    strokeLinejoin: icon.strokeLinejoin || config.strokeLinejoin,
    colors,
    id
  };
}
var currentConfig$5 = DEFAULT_ICON_CONFIGS$5;
function getConfig$5() {
  return currentConfig$5;
}
function IconWrapper$5(name, render2) {
  return function(props) {
    var config = getConfig$5();
    var svgProps = IconConverter$5(guid$5(), props, config);
    return render2(svgProps);
  };
}
var RightOne_default = IconWrapper$5("right-one", function(props) {
  return '<?xml version="1.0" encoding="UTF-8"?><svg width="' + props.size + '" height="' + props.size + '" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01"/><path d="M20 12L32 24L20 36V12Z" fill="' + props.colors[1] + '" stroke="' + props.colors[0] + '" stroke-width="' + props.strokeWidth + '" stroke-linejoin="' + props.strokeLinejoin + '"/></svg>';
});
function IconPark$5(_c) {
  var _d = _c, { wrapper, size, unit, theme, fill, strokeLinecap, strokeLinejoin, strokeWidth } = _d, rest = __objRest(_d, ["wrapper", "size", "unit", "theme", "fill", "strokeLinecap", "strokeLinejoin", "strokeWidth"]);
  const iconStr = atomComputed(() => ({
    __html: RightOne_default({
      theme: theme.value,
      size: `${size.value}${unit.value}`,
      fill: fill.value,
      strokeLinecap: strokeLinecap.value,
      strokeLinejoin: strokeLinejoin.value,
      strokeWidth: strokeWidth.value
    })
  }));
  return createElement(wrapper.value, __spreadProps(__spreadValues({ dangerouslySetInnerHTML: iconStr }, rest), { inline: true, "inline-line-height-1": true }));
}
IconPark$5.propTypes = {
  size: propTypes.number.default(() => atom(1)),
  unit: propTypes.string.default(() => atom("em")),
  theme: propTypes.string.default(() => atom("outline")),
  fill: propTypes.string.default(() => atom("#333")),
  strokeLinecap: propTypes.string.default(() => atom("round")),
  strokeLinejoin: propTypes.string.default(() => atom("round")),
  strokeWidth: propTypes.number.default(() => atom(4)),
  wrapper: propTypes.string.default(() => atom("iconWrapper"))
};
var DEFAULT_ICON_CONFIGS$4 = {
  size: "1em",
  strokeWidth: 4,
  strokeLinecap: "round",
  strokeLinejoin: "round",
  theme: "outline",
  colors: {
    outline: {
      fill: "#333",
      background: "transparent"
    },
    filled: {
      fill: "#333",
      background: "#FFF"
    },
    twoTone: {
      fill: "#333",
      twoTone: "#2F88FF"
    },
    multiColor: {
      outStrokeColor: "#333",
      outFillColor: "#2F88FF",
      innerStrokeColor: "#FFF",
      innerFillColor: "#43CCF8"
    }
  },
  prefix: "i"
};
function guid$4() {
  return "icon-" + ((1 + Math.random()) * 4294967296 | 0).toString(16).substring(1);
}
function IconConverter$4(id, icon, config) {
  var fill = typeof icon.fill === "string" ? [icon.fill] : icon.fill || [];
  var colors = [];
  var theme = icon.theme || config.theme;
  switch (theme) {
    case "outline":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      break;
    case "filled":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("#FFF");
      colors.push("#FFF");
      break;
    case "two-tone":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      break;
    case "multi-color":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.multiColor.outFillColor);
      colors.push(typeof fill[2] === "string" ? fill[2] : config.colors.multiColor.innerStrokeColor);
      colors.push(typeof fill[3] === "string" ? fill[3] : config.colors.multiColor.innerFillColor);
      break;
  }
  return {
    size: icon.size || config.size,
    strokeWidth: icon.strokeWidth || config.strokeWidth,
    strokeLinecap: icon.strokeLinecap || config.strokeLinecap,
    strokeLinejoin: icon.strokeLinejoin || config.strokeLinejoin,
    colors,
    id
  };
}
var currentConfig$4 = DEFAULT_ICON_CONFIGS$4;
function getConfig$4() {
  return currentConfig$4;
}
function IconWrapper$4(name, render2) {
  return function(props) {
    var config = getConfig$4();
    var svgProps = IconConverter$4(guid$4(), props, config);
    return render2(svgProps);
  };
}
var Pic_default = IconWrapper$4("pic", function(props) {
  return '<?xml version="1.0" encoding="UTF-8"?><svg width="' + props.size + '" height="' + props.size + '" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g><rect width="48" height="48" fill="white" fill-opacity="0.01" stroke-linejoin="' + props.strokeLinejoin + '" stroke-width="' + props.strokeWidth + '" stroke="none" fill-rule="evenodd"/><g transform="translate(5.000000, 8.000000)"><path d="M2,0 L36,0 C37.1045695,-2.02906125e-16 38,0.8954305 38,2 L38,30 C38,31.1045695 37.1045695,32 36,32 L2,32 C0.8954305,32 1.3527075e-16,31.1045695 0,30 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 Z" stroke-width="' + props.strokeWidth + '" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '" stroke="' + props.colors[0] + '" fill="none" fill-rule="evenodd"/><circle stroke-width="' + props.strokeWidth + '" stroke-linecap="' + props.strokeLinecap + '" cx="9.5" cy="8.5" r="1.5" stroke-linejoin="' + props.strokeLinejoin + '" stroke="' + props.colors[0] + '" fill="none" fill-rule="evenodd"/><path d="M10,16 L15,20 L21,13 L38,26 L38,30 C38,31.1045695 37.1045695,32 36,32 L2,32 C0.8954305,32 2.27508946e-13,31.1045695 2.27373675e-13,30 L2.27373675e-13,26 L10,16 Z" stroke-width="' + props.strokeWidth + '" fill="' + props.colors[1] + '" fill-rule="nonzero" stroke-linejoin="' + props.strokeLinejoin + '" stroke="' + props.colors[0] + '"/></g></g></svg>';
});
function IconPark$4(_e) {
  var _f = _e, { wrapper, size, unit, theme, fill, strokeLinecap, strokeLinejoin, strokeWidth } = _f, rest = __objRest(_f, ["wrapper", "size", "unit", "theme", "fill", "strokeLinecap", "strokeLinejoin", "strokeWidth"]);
  const iconStr = atomComputed(() => ({
    __html: Pic_default({
      theme: theme.value,
      size: `${size.value}${unit.value}`,
      fill: fill.value,
      strokeLinecap: strokeLinecap.value,
      strokeLinejoin: strokeLinejoin.value,
      strokeWidth: strokeWidth.value
    })
  }));
  return createElement(wrapper.value, __spreadProps(__spreadValues({ dangerouslySetInnerHTML: iconStr }, rest), { inline: true, "inline-line-height-1": true }));
}
IconPark$4.propTypes = {
  size: propTypes.number.default(() => atom(1)),
  unit: propTypes.string.default(() => atom("em")),
  theme: propTypes.string.default(() => atom("outline")),
  fill: propTypes.string.default(() => atom("#333")),
  strokeLinecap: propTypes.string.default(() => atom("round")),
  strokeLinejoin: propTypes.string.default(() => atom("round")),
  strokeWidth: propTypes.number.default(() => atom(4)),
  wrapper: propTypes.string.default(() => atom("iconWrapper"))
};
var DEFAULT_ICON_CONFIGS$3 = {
  size: "1em",
  strokeWidth: 4,
  strokeLinecap: "round",
  strokeLinejoin: "round",
  theme: "outline",
  colors: {
    outline: {
      fill: "#333",
      background: "transparent"
    },
    filled: {
      fill: "#333",
      background: "#FFF"
    },
    twoTone: {
      fill: "#333",
      twoTone: "#2F88FF"
    },
    multiColor: {
      outStrokeColor: "#333",
      outFillColor: "#2F88FF",
      innerStrokeColor: "#FFF",
      innerFillColor: "#43CCF8"
    }
  },
  prefix: "i"
};
function guid$3() {
  return "icon-" + ((1 + Math.random()) * 4294967296 | 0).toString(16).substring(1);
}
function IconConverter$3(id, icon, config) {
  var fill = typeof icon.fill === "string" ? [icon.fill] : icon.fill || [];
  var colors = [];
  var theme = icon.theme || config.theme;
  switch (theme) {
    case "outline":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      break;
    case "filled":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("#FFF");
      colors.push("#FFF");
      break;
    case "two-tone":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      break;
    case "multi-color":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.multiColor.outFillColor);
      colors.push(typeof fill[2] === "string" ? fill[2] : config.colors.multiColor.innerStrokeColor);
      colors.push(typeof fill[3] === "string" ? fill[3] : config.colors.multiColor.innerFillColor);
      break;
  }
  return {
    size: icon.size || config.size,
    strokeWidth: icon.strokeWidth || config.strokeWidth,
    strokeLinecap: icon.strokeLinecap || config.strokeLinecap,
    strokeLinejoin: icon.strokeLinejoin || config.strokeLinejoin,
    colors,
    id
  };
}
var currentConfig$3 = DEFAULT_ICON_CONFIGS$3;
function getConfig$3() {
  return currentConfig$3;
}
function IconWrapper$3(name, render2) {
  return function(props) {
    var config = getConfig$3();
    var svgProps = IconConverter$3(guid$3(), props, config);
    return render2(svgProps);
  };
}
var CloseSmall_default = IconWrapper$3("close-small", function(props) {
  return '<?xml version="1.0" encoding="UTF-8"?><svg width="' + props.size + '" height="' + props.size + '" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01"/><path d="M14 14L34 34" stroke="' + props.colors[0] + '" stroke-width="' + props.strokeWidth + '" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '"/><path d="M14 34L34 14" stroke="' + props.colors[0] + '" stroke-width="' + props.strokeWidth + '" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '"/></svg>';
});
function IconPark$3(_g) {
  var _h = _g, { wrapper, size, unit, theme, fill, strokeLinecap, strokeLinejoin, strokeWidth } = _h, rest = __objRest(_h, ["wrapper", "size", "unit", "theme", "fill", "strokeLinecap", "strokeLinejoin", "strokeWidth"]);
  const iconStr = atomComputed(() => ({
    __html: CloseSmall_default({
      theme: theme.value,
      size: `${size.value}${unit.value}`,
      fill: fill.value,
      strokeLinecap: strokeLinecap.value,
      strokeLinejoin: strokeLinejoin.value,
      strokeWidth: strokeWidth.value
    })
  }));
  return createElement(wrapper.value, __spreadProps(__spreadValues({ dangerouslySetInnerHTML: iconStr }, rest), { inline: true, "inline-line-height-1": true }));
}
IconPark$3.propTypes = {
  size: propTypes.number.default(() => atom(1)),
  unit: propTypes.string.default(() => atom("em")),
  theme: propTypes.string.default(() => atom("outline")),
  fill: propTypes.string.default(() => atom("#333")),
  strokeLinecap: propTypes.string.default(() => atom("round")),
  strokeLinejoin: propTypes.string.default(() => atom("round")),
  strokeWidth: propTypes.number.default(() => atom(4)),
  wrapper: propTypes.string.default(() => atom("iconWrapper"))
};
var DEFAULT_ICON_CONFIGS$2 = {
  size: "1em",
  strokeWidth: 4,
  strokeLinecap: "round",
  strokeLinejoin: "round",
  theme: "outline",
  colors: {
    outline: {
      fill: "#333",
      background: "transparent"
    },
    filled: {
      fill: "#333",
      background: "#FFF"
    },
    twoTone: {
      fill: "#333",
      twoTone: "#2F88FF"
    },
    multiColor: {
      outStrokeColor: "#333",
      outFillColor: "#2F88FF",
      innerStrokeColor: "#FFF",
      innerFillColor: "#43CCF8"
    }
  },
  prefix: "i"
};
function guid$2() {
  return "icon-" + ((1 + Math.random()) * 4294967296 | 0).toString(16).substring(1);
}
function IconConverter$2(id, icon, config) {
  var fill = typeof icon.fill === "string" ? [icon.fill] : icon.fill || [];
  var colors = [];
  var theme = icon.theme || config.theme;
  switch (theme) {
    case "outline":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      break;
    case "filled":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("#FFF");
      colors.push("#FFF");
      break;
    case "two-tone":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      break;
    case "multi-color":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.multiColor.outFillColor);
      colors.push(typeof fill[2] === "string" ? fill[2] : config.colors.multiColor.innerStrokeColor);
      colors.push(typeof fill[3] === "string" ? fill[3] : config.colors.multiColor.innerFillColor);
      break;
  }
  return {
    size: icon.size || config.size,
    strokeWidth: icon.strokeWidth || config.strokeWidth,
    strokeLinecap: icon.strokeLinecap || config.strokeLinecap,
    strokeLinejoin: icon.strokeLinejoin || config.strokeLinejoin,
    colors,
    id
  };
}
var currentConfig$2 = DEFAULT_ICON_CONFIGS$2;
function getConfig$2() {
  return currentConfig$2;
}
function IconWrapper$2(name, render2) {
  return function(props) {
    var config = getConfig$2();
    var svgProps = IconConverter$2(guid$2(), props, config);
    return render2(svgProps);
  };
}
var CheckSmall_default = IconWrapper$2("check-small", function(props) {
  return '<?xml version="1.0" encoding="UTF-8"?><svg width="' + props.size + '" height="' + props.size + '" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01"/><path d="M10 24L20 34L40 14" stroke="' + props.colors[0] + '" stroke-width="' + props.strokeWidth + '" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '"/></svg>';
});
function IconPark$2(_i) {
  var _j = _i, { wrapper, size, unit, theme, fill, strokeLinecap, strokeLinejoin, strokeWidth } = _j, rest = __objRest(_j, ["wrapper", "size", "unit", "theme", "fill", "strokeLinecap", "strokeLinejoin", "strokeWidth"]);
  const iconStr = atomComputed(() => ({
    __html: CheckSmall_default({
      theme: theme.value,
      size: `${size.value}${unit.value}`,
      fill: fill.value,
      strokeLinecap: strokeLinecap.value,
      strokeLinejoin: strokeLinejoin.value,
      strokeWidth: strokeWidth.value
    })
  }));
  return createElement(wrapper.value, __spreadProps(__spreadValues({ dangerouslySetInnerHTML: iconStr }, rest), { inline: true, "inline-line-height-1": true }));
}
IconPark$2.propTypes = {
  size: propTypes.number.default(() => atom(1)),
  unit: propTypes.string.default(() => atom("em")),
  theme: propTypes.string.default(() => atom("outline")),
  fill: propTypes.string.default(() => atom("#333")),
  strokeLinecap: propTypes.string.default(() => atom("round")),
  strokeLinejoin: propTypes.string.default(() => atom("round")),
  strokeWidth: propTypes.number.default(() => atom(4)),
  wrapper: propTypes.string.default(() => atom("iconWrapper"))
};
var DEFAULT_ICON_CONFIGS$1 = {
  size: "1em",
  strokeWidth: 4,
  strokeLinecap: "round",
  strokeLinejoin: "round",
  theme: "outline",
  colors: {
    outline: {
      fill: "#333",
      background: "transparent"
    },
    filled: {
      fill: "#333",
      background: "#FFF"
    },
    twoTone: {
      fill: "#333",
      twoTone: "#2F88FF"
    },
    multiColor: {
      outStrokeColor: "#333",
      outFillColor: "#2F88FF",
      innerStrokeColor: "#FFF",
      innerFillColor: "#43CCF8"
    }
  },
  prefix: "i"
};
function guid$1() {
  return "icon-" + ((1 + Math.random()) * 4294967296 | 0).toString(16).substring(1);
}
function IconConverter$1(id, icon, config) {
  var fill = typeof icon.fill === "string" ? [icon.fill] : icon.fill || [];
  var colors = [];
  var theme = icon.theme || config.theme;
  switch (theme) {
    case "outline":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      break;
    case "filled":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("#FFF");
      colors.push("#FFF");
      break;
    case "two-tone":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      break;
    case "multi-color":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.multiColor.outFillColor);
      colors.push(typeof fill[2] === "string" ? fill[2] : config.colors.multiColor.innerStrokeColor);
      colors.push(typeof fill[3] === "string" ? fill[3] : config.colors.multiColor.innerFillColor);
      break;
  }
  return {
    size: icon.size || config.size,
    strokeWidth: icon.strokeWidth || config.strokeWidth,
    strokeLinecap: icon.strokeLinecap || config.strokeLinecap,
    strokeLinejoin: icon.strokeLinejoin || config.strokeLinejoin,
    colors,
    id
  };
}
var currentConfig$1 = DEFAULT_ICON_CONFIGS$1;
function getConfig$1() {
  return currentConfig$1;
}
function IconWrapper$1(name, render2) {
  return function(props) {
    var config = getConfig$1();
    var svgProps = IconConverter$1(guid$1(), props, config);
    return render2(svgProps);
  };
}
var Cutting_default = IconWrapper$1("cutting", function(props) {
  return '<?xml version="1.0" encoding="UTF-8"?><svg width="' + props.size + '" height="' + props.size + '" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g><rect width="48" height="48" fill="white" fill-opacity="0.01" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '" stroke-width="' + props.strokeWidth + '" stroke="none" fill-rule="evenodd"/><g transform="translate(6.000000, 5.000000)"><g transform="translate(0.000000, 0.021632)"><polyline points="0 4.97836848 32 4.97836848 32 36.9783685" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '" stroke-width="' + props.strokeWidth + '" stroke="' + props.colors[0] + '" fill="none" fill-rule="evenodd"/><path d="M20.4664367,-6 L20.4664367,39.0238636" transform="translate(20.466437, 16.511932) rotate(-135.000000) translate(-20.466437, -16.511932) " stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '" stroke-width="' + props.strokeWidth + '" stroke="' + props.colors[0] + '" fill="none" fill-rule="evenodd"/><polyline transform="translate(20.000000, 16.978368) scale(-1, -1) translate(-20.000000, -16.978368) " points="4 0.978368479 36 0.978368479 36 32.9783685" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '" stroke-width="' + props.strokeWidth + '" stroke="' + props.colors[0] + '" fill="none" fill-rule="evenodd"/></g></g></g></svg>';
});
function IconPark$1(_k) {
  var _l = _k, { wrapper, size, unit, theme, fill, strokeLinecap, strokeLinejoin, strokeWidth } = _l, rest = __objRest(_l, ["wrapper", "size", "unit", "theme", "fill", "strokeLinecap", "strokeLinejoin", "strokeWidth"]);
  const iconStr = atomComputed(() => ({
    __html: Cutting_default({
      theme: theme.value,
      size: `${size.value}${unit.value}`,
      fill: fill.value,
      strokeLinecap: strokeLinecap.value,
      strokeLinejoin: strokeLinejoin.value,
      strokeWidth: strokeWidth.value
    })
  }));
  return createElement(wrapper.value, __spreadProps(__spreadValues({ dangerouslySetInnerHTML: iconStr }, rest), { inline: true, "inline-line-height-1": true }));
}
IconPark$1.propTypes = {
  size: propTypes.number.default(() => atom(1)),
  unit: propTypes.string.default(() => atom("em")),
  theme: propTypes.string.default(() => atom("outline")),
  fill: propTypes.string.default(() => atom("#333")),
  strokeLinecap: propTypes.string.default(() => atom("round")),
  strokeLinejoin: propTypes.string.default(() => atom("round")),
  strokeWidth: propTypes.number.default(() => atom(4)),
  wrapper: propTypes.string.default(() => atom("iconWrapper"))
};
var DEFAULT_ICON_CONFIGS = {
  size: "1em",
  strokeWidth: 4,
  strokeLinecap: "round",
  strokeLinejoin: "round",
  theme: "outline",
  colors: {
    outline: {
      fill: "#333",
      background: "transparent"
    },
    filled: {
      fill: "#333",
      background: "#FFF"
    },
    twoTone: {
      fill: "#333",
      twoTone: "#2F88FF"
    },
    multiColor: {
      outStrokeColor: "#333",
      outFillColor: "#2F88FF",
      innerStrokeColor: "#FFF",
      innerFillColor: "#43CCF8"
    }
  },
  prefix: "i"
};
function guid() {
  return "icon-" + ((1 + Math.random()) * 4294967296 | 0).toString(16).substring(1);
}
function IconConverter(id, icon, config) {
  var fill = typeof icon.fill === "string" ? [icon.fill] : icon.fill || [];
  var colors = [];
  var theme = icon.theme || config.theme;
  switch (theme) {
    case "outline":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("none");
      break;
    case "filled":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push("#FFF");
      colors.push("#FFF");
      break;
    case "two-tone":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.twoTone.twoTone);
      break;
    case "multi-color":
      colors.push(typeof fill[0] === "string" ? fill[0] : "currentColor");
      colors.push(typeof fill[1] === "string" ? fill[1] : config.colors.multiColor.outFillColor);
      colors.push(typeof fill[2] === "string" ? fill[2] : config.colors.multiColor.innerStrokeColor);
      colors.push(typeof fill[3] === "string" ? fill[3] : config.colors.multiColor.innerFillColor);
      break;
  }
  return {
    size: icon.size || config.size,
    strokeWidth: icon.strokeWidth || config.strokeWidth,
    strokeLinecap: icon.strokeLinecap || config.strokeLinecap,
    strokeLinejoin: icon.strokeLinejoin || config.strokeLinejoin,
    colors,
    id
  };
}
var currentConfig = DEFAULT_ICON_CONFIGS;
function getConfig() {
  return currentConfig;
}
function IconWrapper(name, render2) {
  return function(props) {
    var config = getConfig();
    var svgProps = IconConverter(guid(), props, config);
    return render2(svgProps);
  };
}
var RotatingForward_default = IconWrapper("rotating-forward", function(props) {
  return '<?xml version="1.0" encoding="UTF-8"?><svg width="' + props.size + '" height="' + props.size + '" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 14.0001V6.67578H6.67564" stroke="' + props.colors[0] + '" stroke-width="' + props.strokeWidth + '" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '"/><path d="M14 6.67578C8.02198 10.1339 4 16.5973 4 24.0001" stroke="' + props.colors[0] + '" stroke-width="' + props.strokeWidth + '" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '"/><path d="M14 34H6.67564V41.3244" stroke="' + props.colors[0] + '" stroke-width="' + props.strokeWidth + '" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '"/><path d="M6.67564 34C10.1337 39.978 16.5972 44 24 44" stroke="' + props.colors[0] + '" stroke-width="' + props.strokeWidth + '" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '"/><path d="M33.9999 34V41.3244H41.3242" stroke="' + props.colors[0] + '" stroke-width="' + props.strokeWidth + '" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '"/><path d="M34 41.3244C39.978 37.8663 44 31.4028 44 24" stroke="' + props.colors[0] + '" stroke-width="' + props.strokeWidth + '" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '"/><path d="M33.9999 14H41.3242V6.67564" stroke="' + props.colors[0] + '" stroke-width="' + props.strokeWidth + '" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '"/><path d="M41.3242 14C37.8661 8.02199 31.4027 4 23.9999 4" stroke="' + props.colors[0] + '" stroke-width="' + props.strokeWidth + '" stroke-linecap="' + props.strokeLinecap + '" stroke-linejoin="' + props.strokeLinejoin + '"/></svg>';
});
function IconPark(_m) {
  var _n = _m, { wrapper, size, unit, theme, fill, strokeLinecap, strokeLinejoin, strokeWidth } = _n, rest = __objRest(_n, ["wrapper", "size", "unit", "theme", "fill", "strokeLinecap", "strokeLinejoin", "strokeWidth"]);
  const iconStr = atomComputed(() => ({
    __html: RotatingForward_default({
      theme: theme.value,
      size: `${size.value}${unit.value}`,
      fill: fill.value,
      strokeLinecap: strokeLinecap.value,
      strokeLinejoin: strokeLinejoin.value,
      strokeWidth: strokeWidth.value
    })
  }));
  return createElement(wrapper.value, __spreadProps(__spreadValues({ dangerouslySetInnerHTML: iconStr }, rest), { inline: true, "inline-line-height-1": true }));
}
IconPark.propTypes = {
  size: propTypes.number.default(() => atom(1)),
  unit: propTypes.string.default(() => atom("em")),
  theme: propTypes.string.default(() => atom("outline")),
  fill: propTypes.string.default(() => atom("#333")),
  strokeLinecap: propTypes.string.default(() => atom("round")),
  strokeLinejoin: propTypes.string.default(() => atom("round")),
  strokeWidth: propTypes.number.default(() => atom(4)),
  wrapper: propTypes.string.default(() => atom("iconWrapper"))
};
var tuiImageEditor = { exports: {} };
var tuiCodeSnippet = { exports: {} };
/*!
 * tui-code-snippet.js
 * @version 1.5.2
 * @author NHN. FE Development Lab <dl_javascript@nhn.com>
 * @license MIT
 */
(function(module, exports) {
  (function webpackUniversalModuleDefinition(root, factory) {
    module.exports = factory();
  })(commonjsGlobal, function() {
    return function(modules) {
      var installedModules = {};
      function __webpack_require__(moduleId) {
        if (installedModules[moduleId])
          return installedModules[moduleId].exports;
        var module2 = installedModules[moduleId] = {
          exports: {},
          id: moduleId,
          loaded: false
        };
        modules[moduleId].call(module2.exports, module2, module2.exports, __webpack_require__);
        module2.loaded = true;
        return module2.exports;
      }
      __webpack_require__.m = modules;
      __webpack_require__.c = installedModules;
      __webpack_require__.p = "dist";
      return __webpack_require__(0);
    }([
      function(module2, exports2, __webpack_require__) {
        var util = {};
        var object = __webpack_require__(1);
        var extend = object.extend;
        extend(util, object);
        extend(util, __webpack_require__(3));
        extend(util, __webpack_require__(2));
        extend(util, __webpack_require__(4));
        extend(util, __webpack_require__(5));
        extend(util, __webpack_require__(6));
        extend(util, __webpack_require__(7));
        extend(util, __webpack_require__(8));
        extend(util, __webpack_require__(9));
        util.browser = __webpack_require__(10);
        util.popup = __webpack_require__(11);
        util.formatDate = __webpack_require__(12);
        util.defineClass = __webpack_require__(13);
        util.defineModule = __webpack_require__(14);
        util.defineNamespace = __webpack_require__(15);
        util.CustomEvents = __webpack_require__(16);
        util.Enum = __webpack_require__(17);
        util.ExMap = __webpack_require__(18);
        util.HashMap = __webpack_require__(20);
        util.Map = __webpack_require__(19);
        module2.exports = util;
      },
      function(module2, exports2, __webpack_require__) {
        var type = __webpack_require__(2);
        var array = __webpack_require__(3);
        var lastId = 0;
        function extend(target, objects) {
          var hasOwnProp = Object.prototype.hasOwnProperty;
          var source, prop, i, len;
          for (i = 1, len = arguments.length; i < len; i += 1) {
            source = arguments[i];
            for (prop in source) {
              if (hasOwnProp.call(source, prop)) {
                target[prop] = source[prop];
              }
            }
          }
          return target;
        }
        function stamp(obj) {
          if (!obj.__fe_id) {
            lastId += 1;
            obj.__fe_id = lastId;
          }
          return obj.__fe_id;
        }
        function hasStamp(obj) {
          return type.isExisty(pick(obj, "__fe_id"));
        }
        function resetLastId() {
          lastId = 0;
        }
        function keys(obj) {
          var keyArray = [];
          var key;
          for (key in obj) {
            if (obj.hasOwnProperty(key)) {
              keyArray.push(key);
            }
          }
          return keyArray;
        }
        function compareJSON(object) {
          var argsLen = arguments.length;
          var i = 1;
          if (argsLen < 1) {
            return true;
          }
          for (; i < argsLen; i += 1) {
            if (!isSameObject(object, arguments[i])) {
              return false;
            }
          }
          return true;
        }
        function isSameObject(x, y) {
          var leftChain = [];
          var rightChain = [];
          var p;
          if (isNaN(x) && isNaN(y) && type.isNumber(x) && type.isNumber(y)) {
            return true;
          }
          if (x === y) {
            return true;
          }
          if (type.isFunction(x) && type.isFunction(y) || x instanceof Date && y instanceof Date || x instanceof RegExp && y instanceof RegExp || x instanceof String && y instanceof String || x instanceof Number && y instanceof Number) {
            return x.toString() === y.toString();
          }
          if (!(x instanceof Object && y instanceof Object)) {
            return false;
          }
          if (x.isPrototypeOf(y) || y.isPrototypeOf(x) || x.constructor !== y.constructor || x.prototype !== y.prototype) {
            return false;
          }
          if (array.inArray(x, leftChain) > -1 || array.inArray(y, rightChain) > -1) {
            return false;
          }
          for (p in y) {
            if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {
              return false;
            } else if (typeof y[p] !== typeof x[p]) {
              return false;
            }
          }
          for (p in x) {
            if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {
              return false;
            } else if (typeof y[p] !== typeof x[p]) {
              return false;
            }
            if (typeof x[p] === "object" || typeof x[p] === "function") {
              leftChain.push(x);
              rightChain.push(y);
              if (!isSameObject(x[p], y[p])) {
                return false;
              }
              leftChain.pop();
              rightChain.pop();
            } else if (x[p] !== y[p]) {
              return false;
            }
          }
          return true;
        }
        function pick(obj, paths) {
          var args = arguments;
          var target = args[0];
          var i = 1;
          var length = args.length;
          for (; i < length; i += 1) {
            if (type.isUndefined(target) || type.isNull(target)) {
              return;
            }
            target = target[args[i]];
          }
          return target;
        }
        module2.exports = {
          extend,
          stamp,
          hasStamp,
          resetLastId,
          keys: Object.prototype.keys || keys,
          compareJSON,
          pick
        };
      },
      function(module2, exports2) {
        var toString = Object.prototype.toString;
        function isExisty(param) {
          return !isUndefined(param) && !isNull(param);
        }
        function isUndefined(obj) {
          return obj === void 0;
        }
        function isNull(obj) {
          return obj === null;
        }
        function isTruthy(obj) {
          return isExisty(obj) && obj !== false;
        }
        function isFalsy(obj) {
          return !isTruthy(obj);
        }
        function isArguments(obj) {
          var result = isExisty(obj) && (toString.call(obj) === "[object Arguments]" || !!obj.callee);
          return result;
        }
        function isArray(obj) {
          return obj instanceof Array;
        }
        function isObject(obj) {
          return obj === Object(obj);
        }
        function isFunction(obj) {
          return obj instanceof Function;
        }
        function isNumber(obj) {
          return typeof obj === "number" || obj instanceof Number;
        }
        function isString(obj) {
          return typeof obj === "string" || obj instanceof String;
        }
        function isBoolean(obj) {
          return typeof obj === "boolean" || obj instanceof Boolean;
        }
        function isArraySafe(obj) {
          return toString.call(obj) === "[object Array]";
        }
        function isFunctionSafe(obj) {
          return toString.call(obj) === "[object Function]";
        }
        function isNumberSafe(obj) {
          return toString.call(obj) === "[object Number]";
        }
        function isStringSafe(obj) {
          return toString.call(obj) === "[object String]";
        }
        function isBooleanSafe(obj) {
          return toString.call(obj) === "[object Boolean]";
        }
        function isHTMLNode(html) {
          if (typeof HTMLElement === "object") {
            return html && (html instanceof HTMLElement || !!html.nodeType);
          }
          return !!(html && html.nodeType);
        }
        function isHTMLTag(html) {
          if (typeof HTMLElement === "object") {
            return html && html instanceof HTMLElement;
          }
          return !!(html && html.nodeType && html.nodeType === 1);
        }
        function isEmpty(obj) {
          if (!isExisty(obj) || _isEmptyString(obj)) {
            return true;
          }
          if (isArray(obj) || isArguments(obj)) {
            return obj.length === 0;
          }
          if (isObject(obj) && !isFunction(obj)) {
            return !_hasOwnProperty(obj);
          }
          return true;
        }
        function _isEmptyString(obj) {
          return isString(obj) && obj === "";
        }
        function _hasOwnProperty(obj) {
          var key;
          for (key in obj) {
            if (obj.hasOwnProperty(key)) {
              return true;
            }
          }
          return false;
        }
        function isNotEmpty(obj) {
          return !isEmpty(obj);
        }
        function isDate(obj) {
          return obj instanceof Date;
        }
        function isDateSafe(obj) {
          return toString.call(obj) === "[object Date]";
        }
        module2.exports = {
          isExisty,
          isUndefined,
          isNull,
          isTruthy,
          isFalsy,
          isArguments,
          isArray,
          isArraySafe,
          isObject,
          isFunction,
          isFunctionSafe,
          isNumber,
          isNumberSafe,
          isDate,
          isDateSafe,
          isString,
          isStringSafe,
          isBoolean,
          isBooleanSafe,
          isHTMLNode,
          isHTMLTag,
          isEmpty,
          isNotEmpty
        };
      },
      function(module2, exports2, __webpack_require__) {
        var collection = __webpack_require__(4);
        var type = __webpack_require__(2);
        var aps = Array.prototype.slice;
        var util;
        var range = function(start, stop, step) {
          var arr = [];
          var flag;
          if (type.isUndefined(stop)) {
            stop = start || 0;
            start = 0;
          }
          step = step || 1;
          flag = step < 0 ? -1 : 1;
          stop *= flag;
          for (; start * flag < stop; start += step) {
            arr.push(start);
          }
          return arr;
        };
        var zip = function() {
          var arr2d = aps.call(arguments);
          var result = [];
          collection.forEach(arr2d, function(arr) {
            collection.forEach(arr, function(value, index) {
              if (!result[index]) {
                result[index] = [];
              }
              result[index].push(value);
            });
          });
          return result;
        };
        var inArray = function(searchElement, array, startIndex) {
          var i;
          var length;
          startIndex = startIndex || 0;
          if (!type.isArray(array)) {
            return -1;
          }
          if (Array.prototype.indexOf) {
            return Array.prototype.indexOf.call(array, searchElement, startIndex);
          }
          length = array.length;
          for (i = startIndex; startIndex >= 0 && i < length; i += 1) {
            if (array[i] === searchElement) {
              return i;
            }
          }
          return -1;
        };
        util = {
          inArray,
          range,
          zip
        };
        module2.exports = util;
      },
      function(module2, exports2, __webpack_require__) {
        var type = __webpack_require__(2);
        var object = __webpack_require__(1);
        function forEachArray(arr, iteratee, context) {
          var index = 0;
          var len = arr.length;
          context = context || null;
          for (; index < len; index += 1) {
            if (iteratee.call(context, arr[index], index, arr) === false) {
              break;
            }
          }
        }
        function forEachOwnProperties(obj, iteratee, context) {
          var key;
          context = context || null;
          for (key in obj) {
            if (obj.hasOwnProperty(key)) {
              if (iteratee.call(context, obj[key], key, obj) === false) {
                break;
              }
            }
          }
        }
        function forEach(obj, iteratee, context) {
          if (type.isArray(obj)) {
            forEachArray(obj, iteratee, context);
          } else {
            forEachOwnProperties(obj, iteratee, context);
          }
        }
        function map(obj, iteratee, context) {
          var resultArray = [];
          context = context || null;
          forEach(obj, function() {
            resultArray.push(iteratee.apply(context, arguments));
          });
          return resultArray;
        }
        function reduce(obj, iteratee, context) {
          var index = 0;
          var keys, length, store;
          context = context || null;
          if (!type.isArray(obj)) {
            keys = object.keys(obj);
            length = keys.length;
            store = obj[keys[index += 1]];
          } else {
            length = obj.length;
            store = obj[index];
          }
          index += 1;
          for (; index < length; index += 1) {
            store = iteratee.call(context, store, obj[keys ? keys[index] : index]);
          }
          return store;
        }
        function toArray(arrayLike) {
          var arr;
          try {
            arr = Array.prototype.slice.call(arrayLike);
          } catch (e) {
            arr = [];
            forEachArray(arrayLike, function(value) {
              arr.push(value);
            });
          }
          return arr;
        }
        function filter(obj, iteratee, context) {
          var result, add;
          context = context || null;
          if (!type.isObject(obj) || !type.isFunction(iteratee)) {
            throw new Error("wrong parameter");
          }
          if (type.isArray(obj)) {
            result = [];
            add = function(subResult, args) {
              subResult.push(args[0]);
            };
          } else {
            result = {};
            add = function(subResult, args) {
              subResult[args[1]] = args[0];
            };
          }
          forEach(obj, function() {
            if (iteratee.apply(context, arguments)) {
              add(result, arguments);
            }
          }, context);
          return result;
        }
        function pluck(arr, property) {
          var result = map(arr, function(item) {
            return item[property];
          });
          return result;
        }
        module2.exports = {
          forEachOwnProperties,
          forEachArray,
          forEach,
          toArray,
          map,
          reduce,
          filter,
          pluck
        };
      },
      function(module2, exports2) {
        function bind(fn, obj) {
          var slice = Array.prototype.slice;
          var args;
          if (fn.bind) {
            return fn.bind.apply(fn, slice.call(arguments, 1));
          }
          args = slice.call(arguments, 2);
          return function() {
            return fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);
          };
        }
        module2.exports = {
          bind
        };
      },
      function(module2, exports2) {
        function createObject(obj) {
          function F() {
          }
          F.prototype = obj;
          return new F();
        }
        function inherit(subType, superType) {
          var prototype = createObject(superType.prototype);
          prototype.constructor = subType;
          subType.prototype = prototype;
        }
        module2.exports = {
          createObject,
          inherit
        };
      },
      function(module2, exports2, __webpack_require__) {
        var collection = __webpack_require__(4);
        var object = __webpack_require__(1);
        function decodeHTMLEntity(htmlEntity) {
          var entities = {
            "&quot;": '"',
            "&amp;": "&",
            "&lt;": "<",
            "&gt;": ">",
            "&#39;": "'",
            "&nbsp;": " "
          };
          return htmlEntity.replace(/&amp;|&lt;|&gt;|&quot;|&#39;|&nbsp;/g, function(m0) {
            return entities[m0] ? entities[m0] : m0;
          });
        }
        function encodeHTMLEntity(html) {
          var entities = {
            '"': "quot",
            "&": "amp",
            "<": "lt",
            ">": "gt",
            "'": "#39"
          };
          return html.replace(/[<>&"']/g, function(m0) {
            return entities[m0] ? "&" + entities[m0] + ";" : m0;
          });
        }
        function hasEncodableString(string) {
          return /[<>&"']/.test(string);
        }
        function getDuplicatedChar(operandStr1, operandStr2) {
          var i = 0;
          var len = operandStr1.length;
          var pool = {};
          var dupl, key;
          for (; i < len; i += 1) {
            key = operandStr1.charAt(i);
            pool[key] = 1;
          }
          for (i = 0, len = operandStr2.length; i < len; i += 1) {
            key = operandStr2.charAt(i);
            if (pool[key]) {
              pool[key] += 1;
            }
          }
          pool = collection.filter(pool, function(item) {
            return item > 1;
          });
          pool = object.keys(pool).sort();
          dupl = pool.join("");
          return dupl;
        }
        module2.exports = {
          decodeHTMLEntity,
          encodeHTMLEntity,
          hasEncodableString,
          getDuplicatedChar
        };
      },
      function(module2, exports2) {
        var tricks = {};
        var aps = Array.prototype.slice;
        function debounce(fn, delay) {
          var timer, args;
          delay = delay || 0;
          function debounced() {
            args = aps.call(arguments);
            window.clearTimeout(timer);
            timer = window.setTimeout(function() {
              fn.apply(null, args);
            }, delay);
          }
          return debounced;
        }
        function timestamp() {
          return Number(new Date());
        }
        function throttle(fn, interval) {
          var base;
          var isLeading = true;
          var tick = function(_args) {
            fn.apply(null, _args);
            base = null;
          };
          var debounced, stamp, args;
          interval = interval || 0;
          debounced = tricks.debounce(tick, interval);
          function throttled() {
            args = aps.call(arguments);
            if (isLeading) {
              tick(args);
              isLeading = false;
              return;
            }
            stamp = tricks.timestamp();
            base = base || stamp;
            debounced(args);
            if (stamp - base >= interval) {
              tick(args);
            }
          }
          function reset() {
            isLeading = true;
            base = null;
          }
          throttled.reset = reset;
          return throttled;
        }
        tricks.timestamp = timestamp;
        tricks.debounce = debounce;
        tricks.throttle = throttle;
        module2.exports = tricks;
      },
      function(module2, exports2, __webpack_require__) {
        var object = __webpack_require__(1);
        var collection = __webpack_require__(4);
        var type = __webpack_require__(2);
        var ms7days = 7 * 24 * 60 * 60 * 1e3;
        function isExpired(date) {
          var now = new Date().getTime();
          return now - date > ms7days;
        }
        function sendHostname(appName, trackingId) {
          var url = "https://www.google-analytics.com/collect";
          var hostname = location.hostname;
          var hitType = "event";
          var eventCategory = "use";
          var applicationKeyForStorage = "TOAST UI " + appName + " for " + hostname + ": Statistics";
          var date = window.localStorage.getItem(applicationKeyForStorage);
          if (!type.isUndefined(window.tui) && window.tui.usageStatistics === false) {
            return;
          }
          if (date && !isExpired(date)) {
            return;
          }
          window.localStorage.setItem(applicationKeyForStorage, new Date().getTime());
          setTimeout(function() {
            if (document.readyState === "interactive" || document.readyState === "complete") {
              imagePing(url, {
                v: 1,
                t: hitType,
                tid: trackingId,
                cid: hostname,
                dp: hostname,
                dh: appName,
                el: appName,
                ec: eventCategory
              });
            }
          }, 1e3);
        }
        function imagePing(url, trackingInfo) {
          var queryString = collection.map(object.keys(trackingInfo), function(key, index) {
            var startWith = index === 0 ? "" : "&";
            return startWith + key + "=" + trackingInfo[key];
          }).join("");
          var trackingElement = document.createElement("img");
          trackingElement.src = url + "?" + queryString;
          trackingElement.style.display = "none";
          document.body.appendChild(trackingElement);
          document.body.removeChild(trackingElement);
          return trackingElement;
        }
        module2.exports = {
          imagePing,
          sendHostname
        };
      },
      function(module2, exports2) {
        var browser = {
          chrome: false,
          firefox: false,
          safari: false,
          msie: false,
          edge: false,
          others: false,
          version: 0
        };
        if (window && window.navigator) {
          detectBrowser();
        }
        function detectBrowser() {
          var nav = window.navigator;
          var appName = nav.appName.replace(/\s/g, "_");
          var userAgent = nav.userAgent;
          var rIE = /MSIE\s([0-9]+[.0-9]*)/;
          var rIE11 = /Trident.*rv:11\./;
          var rEdge = /Edge\/(\d+)\./;
          var versionRegex = {
            firefox: /Firefox\/(\d+)\./,
            chrome: /Chrome\/(\d+)\./,
            safari: /Version\/([\d.]+).*Safari\/(\d+)/
          };
          var key, tmp;
          var detector = {
            Microsoft_Internet_Explorer: function() {
              var detectedVersion = userAgent.match(rIE);
              if (detectedVersion) {
                browser.msie = true;
                browser.version = parseFloat(detectedVersion[1]);
              } else {
                browser.others = true;
              }
            },
            Netscape: function() {
              var detected = false;
              if (rIE11.exec(userAgent)) {
                browser.msie = true;
                browser.version = 11;
                detected = true;
              } else if (rEdge.exec(userAgent)) {
                browser.edge = true;
                browser.version = userAgent.match(rEdge)[1];
                detected = true;
              } else {
                for (key in versionRegex) {
                  if (versionRegex.hasOwnProperty(key)) {
                    tmp = userAgent.match(versionRegex[key]);
                    if (tmp && tmp.length > 1) {
                      browser[key] = detected = true;
                      browser.version = parseFloat(tmp[1] || 0);
                      break;
                    }
                  }
                }
              }
              if (!detected) {
                browser.others = true;
              }
            }
          };
          var fn = detector[appName];
          if (fn) {
            detector[appName]();
          }
        }
        module2.exports = browser;
      },
      function(module2, exports2, __webpack_require__) {
        var collection = __webpack_require__(4);
        var type = __webpack_require__(2);
        var func = __webpack_require__(5);
        var browser = __webpack_require__(10);
        var object = __webpack_require__(1);
        var popupId = 0;
        function Popup() {
          this.openedPopup = {};
          this.closeWithParentPopup = {};
          this.postBridgeUrl = "";
        }
        Popup.prototype.getPopupList = function(key) {
          var target;
          if (type.isExisty(key)) {
            target = this.openedPopup[key];
          } else {
            target = this.openedPopup;
          }
          return target;
        };
        Popup.prototype.openPopup = function(url, options) {
          var popup, formElement, useIEPostBridge;
          options = object.extend({
            popupName: "popup_" + popupId + "_" + Number(new Date()),
            popupOptionStr: "",
            useReload: true,
            closeWithParent: true,
            method: "get",
            param: {}
          }, options || {});
          options.method = options.method.toUpperCase();
          this.postBridgeUrl = options.postBridgeUrl || this.postBridgeUrl;
          useIEPostBridge = options.method === "POST" && options.param && browser.msie && browser.version === 11;
          if (!type.isExisty(url)) {
            throw new Error("Popup#open() need popup url.");
          }
          popupId += 1;
          if (options.param) {
            if (options.method === "GET") {
              url = url + (/\?/.test(url) ? "&" : "?") + this._parameterize(options.param);
            } else if (options.method === "POST") {
              if (!useIEPostBridge) {
                formElement = this.createForm(url, options.param, options.method, options.popupName);
                url = "about:blank";
              }
            }
          }
          popup = this.openedPopup[options.popupName];
          if (!type.isExisty(popup)) {
            this.openedPopup[options.popupName] = popup = this._open(useIEPostBridge, options.param, url, options.popupName, options.popupOptionStr);
          } else if (popup.closed) {
            this.openedPopup[options.popupName] = popup = this._open(useIEPostBridge, options.param, url, options.popupName, options.popupOptionStr);
          } else {
            if (options.useReload) {
              popup.location.replace(url);
            }
            popup.focus();
          }
          this.closeWithParentPopup[options.popupName] = options.closeWithParent;
          if (!popup || popup.closed || type.isUndefined(popup.closed)) {
            alert("please enable popup windows for this website");
          }
          if (options.param && options.method === "POST" && !useIEPostBridge) {
            if (popup) {
              formElement.submit();
            }
            if (formElement.parentNode) {
              formElement.parentNode.removeChild(formElement);
            }
          }
          window.onunload = func.bind(this.closeAllPopup, this);
        };
        Popup.prototype.close = function(skipBeforeUnload, popup) {
          var target = popup || window;
          skipBeforeUnload = type.isExisty(skipBeforeUnload) ? skipBeforeUnload : false;
          if (skipBeforeUnload) {
            window.onunload = null;
          }
          if (!target.closed) {
            target.opener = window.location.href;
            target.close();
          }
        };
        Popup.prototype.closeAllPopup = function(closeWithParent) {
          var hasArg = type.isExisty(closeWithParent);
          collection.forEachOwnProperties(this.openedPopup, function(popup, key) {
            if (hasArg && this.closeWithParentPopup[key] || !hasArg) {
              this.close(false, popup);
            }
          }, this);
        };
        Popup.prototype.focus = function(popupName) {
          this.getPopupList(popupName).focus();
        };
        Popup.prototype.parseQuery = function() {
          var param = {};
          var search, pair;
          search = window.location.search.substr(1);
          collection.forEachArray(search.split("&"), function(part) {
            pair = part.split("=");
            param[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
          });
          return param;
        };
        Popup.prototype.createForm = function(action, data, method, target, container) {
          var form = document.createElement("form"), input;
          container = container || document.body;
          form.method = method || "POST";
          form.action = action || "";
          form.target = target || "";
          form.style.display = "none";
          collection.forEachOwnProperties(data, function(value, key) {
            input = document.createElement("input");
            input.name = key;
            input.type = "hidden";
            input.value = value;
            form.appendChild(input);
          });
          container.appendChild(form);
          return form;
        };
        Popup.prototype._parameterize = function(obj) {
          var query = [];
          collection.forEachOwnProperties(obj, function(value, key) {
            query.push(encodeURIComponent(key) + "=" + encodeURIComponent(value));
          });
          return query.join("&");
        };
        Popup.prototype._open = function(useIEPostBridge, param, url, popupName, optionStr) {
          var popup;
          if (useIEPostBridge) {
            popup = window.open(this.postBridgeUrl, popupName, optionStr);
            setTimeout(function() {
              popup.redirect(url, param);
            }, 100);
          } else {
            popup = window.open(url, popupName, optionStr);
          }
          return popup;
        };
        module2.exports = new Popup();
      },
      function(module2, exports2, __webpack_require__) {
        var type = __webpack_require__(2);
        var object = __webpack_require__(1);
        var tokens = /[\\]*YYYY|[\\]*YY|[\\]*MMMM|[\\]*MMM|[\\]*MM|[\\]*M|[\\]*DD|[\\]*D|[\\]*HH|[\\]*H|[\\]*A/gi;
        var MONTH_STR = [
          "Invalid month",
          "January",
          "February",
          "March",
          "April",
          "May",
          "June",
          "July",
          "August",
          "September",
          "October",
          "November",
          "December"
        ];
        var MONTH_DAYS = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        var replaceMap = {
          M: function(date) {
            return Number(date.month);
          },
          MM: function(date) {
            var month = date.month;
            return Number(month) < 10 ? "0" + month : month;
          },
          MMM: function(date) {
            return MONTH_STR[Number(date.month)].substr(0, 3);
          },
          MMMM: function(date) {
            return MONTH_STR[Number(date.month)];
          },
          D: function(date) {
            return Number(date.date);
          },
          d: function(date) {
            return replaceMap.D(date);
          },
          DD: function(date) {
            var dayInMonth = date.date;
            return Number(dayInMonth) < 10 ? "0" + dayInMonth : dayInMonth;
          },
          dd: function(date) {
            return replaceMap.DD(date);
          },
          YY: function(date) {
            return Number(date.year) % 100;
          },
          yy: function(date) {
            return replaceMap.YY(date);
          },
          YYYY: function(date) {
            var prefix = "20", year = date.year;
            if (year > 69 && year < 100) {
              prefix = "19";
            }
            return Number(year) < 100 ? prefix + String(year) : year;
          },
          yyyy: function(date) {
            return replaceMap.YYYY(date);
          },
          A: function(date) {
            return date.meridiem;
          },
          a: function(date) {
            return date.meridiem;
          },
          hh: function(date) {
            var hour = date.hour;
            return Number(hour) < 10 ? "0" + hour : hour;
          },
          HH: function(date) {
            return replaceMap.hh(date);
          },
          h: function(date) {
            return String(Number(date.hour));
          },
          H: function(date) {
            return replaceMap.h(date);
          },
          m: function(date) {
            return String(Number(date.minute));
          },
          mm: function(date) {
            var minute = date.minute;
            return Number(minute) < 10 ? "0" + minute : minute;
          }
        };
        function isValidDate(year, month, date) {
          var isValidYear, isValidMonth, isValid, lastDayInMonth;
          year = Number(year);
          month = Number(month);
          date = Number(date);
          isValidYear = year > -1 && year < 100 || year > 1969 && year < 2070;
          isValidMonth = month > 0 && month < 13;
          if (!isValidYear || !isValidMonth) {
            return false;
          }
          lastDayInMonth = MONTH_DAYS[month];
          if (month === 2 && year % 4 === 0) {
            if (year % 100 !== 0 || year % 400 === 0) {
              lastDayInMonth = 29;
            }
          }
          isValid = date > 0 && date <= lastDayInMonth;
          return isValid;
        }
        function formatDate(form, date, option) {
          var am = object.pick(option, "meridiemSet", "AM") || "AM";
          var pm = object.pick(option, "meridiemSet", "PM") || "PM";
          var meridiem, nDate, resultStr;
          if (type.isDate(date)) {
            nDate = {
              year: date.getFullYear(),
              month: date.getMonth() + 1,
              date: date.getDate(),
              hour: date.getHours(),
              minute: date.getMinutes()
            };
          } else {
            nDate = {
              year: date.year,
              month: date.month,
              date: date.date,
              hour: date.hour,
              minute: date.minute
            };
          }
          if (!isValidDate(nDate.year, nDate.month, nDate.date)) {
            return false;
          }
          nDate.meridiem = "";
          if (/([^\\]|^)[aA]\b/.test(form)) {
            meridiem = nDate.hour > 11 ? pm : am;
            if (nDate.hour > 12) {
              nDate.hour %= 12;
            }
            if (nDate.hour === 0) {
              nDate.hour = 12;
            }
            nDate.meridiem = meridiem;
          }
          resultStr = form.replace(tokens, function(key) {
            if (key.indexOf("\\") > -1) {
              return key.replace(/\\/, "");
            }
            return replaceMap[key](nDate) || "";
          });
          return resultStr;
        }
        module2.exports = formatDate;
      },
      function(module2, exports2, __webpack_require__) {
        var inherit = __webpack_require__(6).inherit;
        var extend = __webpack_require__(1).extend;
        function defineClass(parent, props) {
          var obj;
          if (!props) {
            props = parent;
            parent = null;
          }
          obj = props.init || function() {
          };
          if (parent) {
            inherit(obj, parent);
          }
          if (props.hasOwnProperty("static")) {
            extend(obj, props["static"]);
            delete props["static"];
          }
          extend(obj.prototype, props);
          return obj;
        }
        module2.exports = defineClass;
      },
      function(module2, exports2, __webpack_require__) {
        var defineNamespace = __webpack_require__(15);
        var type = __webpack_require__(2);
        var INITIALIZATION_METHOD_NAME = "initialize";
        function defineModule(namespace, moduleDefinition) {
          var base = moduleDefinition || {};
          if (type.isFunction(base[INITIALIZATION_METHOD_NAME])) {
            base[INITIALIZATION_METHOD_NAME]();
          }
          return defineNamespace(namespace, base);
        }
        module2.exports = defineModule;
      },
      function(module2, exports2, __webpack_require__) {
        var collection = __webpack_require__(4);
        var object = __webpack_require__(1);
        function defineNamespace(namespace, props, isOverride) {
          var names, result, prevLast, last;
          names = namespace.split(".");
          names.unshift(window);
          result = collection.reduce(names, function(obj, name) {
            obj[name] = obj[name] || {};
            return obj[name];
          });
          if (isOverride) {
            last = names.pop();
            prevLast = object.pick.apply(null, names);
            result = prevLast[last] = props;
          } else {
            object.extend(result, props);
          }
          return result;
        }
        module2.exports = defineNamespace;
      },
      function(module2, exports2, __webpack_require__) {
        var collection = __webpack_require__(4);
        var type = __webpack_require__(2);
        var object = __webpack_require__(1);
        var R_EVENTNAME_SPLIT = /\s+/g;
        function CustomEvents() {
          this.events = null;
          this.contexts = null;
        }
        CustomEvents.mixin = function(func) {
          object.extend(func.prototype, CustomEvents.prototype);
        };
        CustomEvents.prototype._getHandlerItem = function(handler, context) {
          var item = { handler };
          if (context) {
            item.context = context;
          }
          return item;
        };
        CustomEvents.prototype._safeEvent = function(eventName) {
          var events = this.events;
          var byName;
          if (!events) {
            events = this.events = {};
          }
          if (eventName) {
            byName = events[eventName];
            if (!byName) {
              byName = [];
              events[eventName] = byName;
            }
            events = byName;
          }
          return events;
        };
        CustomEvents.prototype._safeContext = function() {
          var context = this.contexts;
          if (!context) {
            context = this.contexts = [];
          }
          return context;
        };
        CustomEvents.prototype._indexOfContext = function(ctx) {
          var context = this._safeContext();
          var index = 0;
          while (context[index]) {
            if (ctx === context[index][0]) {
              return index;
            }
            index += 1;
          }
          return -1;
        };
        CustomEvents.prototype._memorizeContext = function(ctx) {
          var context, index;
          if (!type.isExisty(ctx)) {
            return;
          }
          context = this._safeContext();
          index = this._indexOfContext(ctx);
          if (index > -1) {
            context[index][1] += 1;
          } else {
            context.push([ctx, 1]);
          }
        };
        CustomEvents.prototype._forgetContext = function(ctx) {
          var context, contextIndex;
          if (!type.isExisty(ctx)) {
            return;
          }
          context = this._safeContext();
          contextIndex = this._indexOfContext(ctx);
          if (contextIndex > -1) {
            context[contextIndex][1] -= 1;
            if (context[contextIndex][1] <= 0) {
              context.splice(contextIndex, 1);
            }
          }
        };
        CustomEvents.prototype._bindEvent = function(eventName, handler, context) {
          var events = this._safeEvent(eventName);
          this._memorizeContext(context);
          events.push(this._getHandlerItem(handler, context));
        };
        CustomEvents.prototype.on = function(eventName, handler, context) {
          var self2 = this;
          if (type.isString(eventName)) {
            eventName = eventName.split(R_EVENTNAME_SPLIT);
            collection.forEach(eventName, function(name) {
              self2._bindEvent(name, handler, context);
            });
          } else if (type.isObject(eventName)) {
            context = handler;
            collection.forEach(eventName, function(func, name) {
              self2.on(name, func, context);
            });
          }
        };
        CustomEvents.prototype.once = function(eventName, handler, context) {
          var self2 = this;
          if (type.isObject(eventName)) {
            context = handler;
            collection.forEach(eventName, function(func, name) {
              self2.once(name, func, context);
            });
            return;
          }
          function onceHandler() {
            handler.apply(context, arguments);
            self2.off(eventName, onceHandler, context);
          }
          this.on(eventName, onceHandler, context);
        };
        CustomEvents.prototype._spliceMatches = function(arr, predicate) {
          var i = 0;
          var len;
          if (!type.isArray(arr)) {
            return;
          }
          for (len = arr.length; i < len; i += 1) {
            if (predicate(arr[i]) === true) {
              arr.splice(i, 1);
              len -= 1;
              i -= 1;
            }
          }
        };
        CustomEvents.prototype._matchHandler = function(handler) {
          var self2 = this;
          return function(item) {
            var needRemove = handler === item.handler;
            if (needRemove) {
              self2._forgetContext(item.context);
            }
            return needRemove;
          };
        };
        CustomEvents.prototype._matchContext = function(context) {
          var self2 = this;
          return function(item) {
            var needRemove = context === item.context;
            if (needRemove) {
              self2._forgetContext(item.context);
            }
            return needRemove;
          };
        };
        CustomEvents.prototype._matchHandlerAndContext = function(handler, context) {
          var self2 = this;
          return function(item) {
            var matchHandler = handler === item.handler;
            var matchContext = context === item.context;
            var needRemove = matchHandler && matchContext;
            if (needRemove) {
              self2._forgetContext(item.context);
            }
            return needRemove;
          };
        };
        CustomEvents.prototype._offByEventName = function(eventName, handler) {
          var self2 = this;
          var forEach = collection.forEachArray;
          var andByHandler = type.isFunction(handler);
          var matchHandler = self2._matchHandler(handler);
          eventName = eventName.split(R_EVENTNAME_SPLIT);
          forEach(eventName, function(name) {
            var handlerItems = self2._safeEvent(name);
            if (andByHandler) {
              self2._spliceMatches(handlerItems, matchHandler);
            } else {
              forEach(handlerItems, function(item) {
                self2._forgetContext(item.context);
              });
              self2.events[name] = [];
            }
          });
        };
        CustomEvents.prototype._offByHandler = function(handler) {
          var self2 = this;
          var matchHandler = this._matchHandler(handler);
          collection.forEach(this._safeEvent(), function(handlerItems) {
            self2._spliceMatches(handlerItems, matchHandler);
          });
        };
        CustomEvents.prototype._offByObject = function(obj, handler) {
          var self2 = this;
          var matchFunc;
          if (this._indexOfContext(obj) < 0) {
            collection.forEach(obj, function(func, name) {
              self2.off(name, func);
            });
          } else if (type.isString(handler)) {
            matchFunc = this._matchContext(obj);
            self2._spliceMatches(this._safeEvent(handler), matchFunc);
          } else if (type.isFunction(handler)) {
            matchFunc = this._matchHandlerAndContext(handler, obj);
            collection.forEach(this._safeEvent(), function(handlerItems) {
              self2._spliceMatches(handlerItems, matchFunc);
            });
          } else {
            matchFunc = this._matchContext(obj);
            collection.forEach(this._safeEvent(), function(handlerItems) {
              self2._spliceMatches(handlerItems, matchFunc);
            });
          }
        };
        CustomEvents.prototype.off = function(eventName, handler) {
          if (type.isString(eventName)) {
            this._offByEventName(eventName, handler);
          } else if (!arguments.length) {
            this.events = {};
            this.contexts = [];
          } else if (type.isFunction(eventName)) {
            this._offByHandler(eventName);
          } else if (type.isObject(eventName)) {
            this._offByObject(eventName, handler);
          }
        };
        CustomEvents.prototype.fire = function(eventName) {
          this.invoke.apply(this, arguments);
        };
        CustomEvents.prototype.invoke = function(eventName) {
          var events, args, index, item;
          if (!this.hasListener(eventName)) {
            return true;
          }
          events = this._safeEvent(eventName);
          args = Array.prototype.slice.call(arguments, 1);
          index = 0;
          while (events[index]) {
            item = events[index];
            if (item.handler.apply(item.context, args) === false) {
              return false;
            }
            index += 1;
          }
          return true;
        };
        CustomEvents.prototype.hasListener = function(eventName) {
          return this.getListenerLength(eventName) > 0;
        };
        CustomEvents.prototype.getListenerLength = function(eventName) {
          var events = this._safeEvent(eventName);
          return events.length;
        };
        module2.exports = CustomEvents;
      },
      function(module2, exports2, __webpack_require__) {
        var collection = __webpack_require__(4);
        var type = __webpack_require__(2);
        var isSupportDefinedProperty = function() {
          try {
            Object.defineProperty({}, "x", {});
            return true;
          } catch (e) {
            return false;
          }
        }();
        var enumValue = 0;
        function Enum(itemList) {
          if (itemList) {
            this.set.apply(this, arguments);
          }
        }
        Enum.prototype.set = function(itemList) {
          var self2 = this;
          if (!type.isArray(itemList)) {
            itemList = collection.toArray(arguments);
          }
          collection.forEach(itemList, function itemListIteratee(item) {
            self2._addItem(item);
          });
        };
        Enum.prototype.getName = function(value) {
          var self2 = this;
          var foundedKey;
          collection.forEach(this, function(itemValue, key) {
            if (self2._isEnumItem(key) && value === itemValue) {
              foundedKey = key;
              return false;
            }
          });
          return foundedKey;
        };
        Enum.prototype._addItem = function(name) {
          var value;
          if (!this.hasOwnProperty(name)) {
            value = this._makeEnumValue();
            if (isSupportDefinedProperty) {
              Object.defineProperty(this, name, {
                enumerable: true,
                configurable: false,
                writable: false,
                value
              });
            } else {
              this[name] = value;
            }
          }
        };
        Enum.prototype._makeEnumValue = function() {
          var value;
          value = enumValue;
          enumValue += 1;
          return value;
        };
        Enum.prototype._isEnumItem = function(key) {
          return type.isNumber(this[key]);
        };
        module2.exports = Enum;
      },
      function(module2, exports2, __webpack_require__) {
        var collection = __webpack_require__(4);
        var Map2 = __webpack_require__(19);
        var mapAPIsForRead = ["get", "has", "forEach", "keys", "values", "entries"];
        var mapAPIsForDelete = ["delete", "clear"];
        function ExMap(initData) {
          this._map = new Map2(initData);
          this.size = this._map.size;
        }
        collection.forEachArray(mapAPIsForRead, function(name) {
          ExMap.prototype[name] = function() {
            return this._map[name].apply(this._map, arguments);
          };
        });
        collection.forEachArray(mapAPIsForDelete, function(name) {
          ExMap.prototype[name] = function() {
            var result = this._map[name].apply(this._map, arguments);
            this.size = this._map.size;
            return result;
          };
        });
        ExMap.prototype.set = function() {
          this._map.set.apply(this._map, arguments);
          this.size = this._map.size;
          return this;
        };
        ExMap.prototype.setObject = function(object) {
          collection.forEachOwnProperties(object, function(value, key) {
            this.set(key, value);
          }, this);
        };
        ExMap.prototype.deleteByKeys = function(keys) {
          collection.forEachArray(keys, function(key) {
            this["delete"](key);
          }, this);
        };
        ExMap.prototype.merge = function(map) {
          map.forEach(function(value, key) {
            this.set(key, value);
          }, this);
        };
        ExMap.prototype.filter = function(predicate) {
          var filtered = new ExMap();
          this.forEach(function(value, key) {
            if (predicate(value, key)) {
              filtered.set(key, value);
            }
          });
          return filtered;
        };
        module2.exports = ExMap;
      },
      function(module2, exports2, __webpack_require__) {
        var collection = __webpack_require__(4);
        var type = __webpack_require__(2);
        var array = __webpack_require__(3);
        var browser = __webpack_require__(10);
        var func = __webpack_require__(5);
        var _KEY_FOR_UNDEFINED = {};
        var _KEY_FOR_NAN = {};
        function MapIterator(keys, valueGetter) {
          this._keys = keys;
          this._valueGetter = valueGetter;
          this._length = this._keys.length;
          this._index = -1;
          this._done = false;
        }
        MapIterator.prototype.next = function() {
          var data = {};
          do {
            this._index += 1;
          } while (type.isUndefined(this._keys[this._index]) && this._index < this._length);
          if (this._index >= this._length) {
            data.done = true;
          } else {
            data.done = false;
            data.value = this._valueGetter(this._keys[this._index], this._index);
          }
          return data;
        };
        function Map2(initData) {
          this._valuesForString = {};
          this._valuesForIndex = {};
          this._keys = [];
          if (initData) {
            this._setInitData(initData);
          }
          this.size = 0;
        }
        Map2.prototype._setInitData = function(initData) {
          if (!type.isArray(initData)) {
            throw new Error("Only Array is supported.");
          }
          collection.forEachArray(initData, function(pair) {
            this.set(pair[0], pair[1]);
          }, this);
        };
        Map2.prototype._isNaN = function(value) {
          return typeof value === "number" && value !== value;
        };
        Map2.prototype._getKeyIndex = function(key) {
          var result = -1;
          var value;
          if (type.isString(key)) {
            value = this._valuesForString[key];
            if (value) {
              result = value.keyIndex;
            }
          } else {
            result = array.inArray(key, this._keys);
          }
          return result;
        };
        Map2.prototype._getOriginKey = function(key) {
          var originKey = key;
          if (key === _KEY_FOR_UNDEFINED) {
            originKey = void 0;
          } else if (key === _KEY_FOR_NAN) {
            originKey = NaN;
          }
          return originKey;
        };
        Map2.prototype._getUniqueKey = function(key) {
          var uniqueKey = key;
          if (type.isUndefined(key)) {
            uniqueKey = _KEY_FOR_UNDEFINED;
          } else if (this._isNaN(key)) {
            uniqueKey = _KEY_FOR_NAN;
          }
          return uniqueKey;
        };
        Map2.prototype._getValueObject = function(key, keyIndex) {
          if (type.isString(key)) {
            return this._valuesForString[key];
          }
          if (type.isUndefined(keyIndex)) {
            keyIndex = this._getKeyIndex(key);
          }
          if (keyIndex >= 0) {
            return this._valuesForIndex[keyIndex];
          }
        };
        Map2.prototype._getOriginValue = function(key, keyIndex) {
          return this._getValueObject(key, keyIndex).origin;
        };
        Map2.prototype._getKeyValuePair = function(key, keyIndex) {
          return [this._getOriginKey(key), this._getOriginValue(key, keyIndex)];
        };
        Map2.prototype._createValueObject = function(origin, keyIndex) {
          return {
            keyIndex,
            origin
          };
        };
        Map2.prototype.set = function(key, value) {
          var uniqueKey = this._getUniqueKey(key);
          var keyIndex = this._getKeyIndex(uniqueKey);
          var valueObject;
          if (keyIndex < 0) {
            keyIndex = this._keys.push(uniqueKey) - 1;
            this.size += 1;
          }
          valueObject = this._createValueObject(value, keyIndex);
          if (type.isString(key)) {
            this._valuesForString[key] = valueObject;
          } else {
            this._valuesForIndex[keyIndex] = valueObject;
          }
          return this;
        };
        Map2.prototype.get = function(key) {
          var uniqueKey = this._getUniqueKey(key);
          var value = this._getValueObject(uniqueKey);
          return value && value.origin;
        };
        Map2.prototype.keys = function() {
          return new MapIterator(this._keys, func.bind(this._getOriginKey, this));
        };
        Map2.prototype.values = function() {
          return new MapIterator(this._keys, func.bind(this._getOriginValue, this));
        };
        Map2.prototype.entries = function() {
          return new MapIterator(this._keys, func.bind(this._getKeyValuePair, this));
        };
        Map2.prototype.has = function(key) {
          return !!this._getValueObject(key);
        };
        Map2.prototype["delete"] = function(key) {
          var keyIndex;
          if (type.isString(key)) {
            if (this._valuesForString[key]) {
              keyIndex = this._valuesForString[key].keyIndex;
              delete this._valuesForString[key];
            }
          } else {
            keyIndex = this._getKeyIndex(key);
            if (keyIndex >= 0) {
              delete this._valuesForIndex[keyIndex];
            }
          }
          if (keyIndex >= 0) {
            delete this._keys[keyIndex];
            this.size -= 1;
          }
        };
        Map2.prototype.forEach = function(callback, thisArg) {
          thisArg = thisArg || this;
          collection.forEachArray(this._keys, function(key) {
            if (!type.isUndefined(key)) {
              callback.call(thisArg, this._getValueObject(key).origin, key, this);
            }
          }, this);
        };
        Map2.prototype.clear = function() {
          Map2.call(this);
        };
        (function() {
          if (window.Map && (browser.firefox && browser.version >= 37 || browser.chrome && browser.version >= 42)) {
            Map2 = window.Map;
          }
        })();
        module2.exports = Map2;
      },
      function(module2, exports2, __webpack_require__) {
        var collection = __webpack_require__(4);
        var type = __webpack_require__(2);
        var _MAPDATAPREFIX = "\xE5";
        function HashMap(obj) {
          this.length = 0;
          if (obj) {
            this.setObject(obj);
          }
        }
        HashMap.prototype.set = function(key, value) {
          if (arguments.length === 2) {
            this.setKeyValue(key, value);
          } else {
            this.setObject(key);
          }
        };
        HashMap.prototype.setKeyValue = function(key, value) {
          if (!this.has(key)) {
            this.length += 1;
          }
          this[this.encodeKey(key)] = value;
        };
        HashMap.prototype.setObject = function(obj) {
          var self2 = this;
          collection.forEachOwnProperties(obj, function(value, key) {
            self2.setKeyValue(key, value);
          });
        };
        HashMap.prototype.merge = function(hashMap) {
          var self2 = this;
          hashMap.each(function(value, key) {
            self2.setKeyValue(key, value);
          });
        };
        HashMap.prototype.encodeKey = function(key) {
          return _MAPDATAPREFIX + key;
        };
        HashMap.prototype.decodeKey = function(key) {
          var decodedKey = key.split(_MAPDATAPREFIX);
          return decodedKey[decodedKey.length - 1];
        };
        HashMap.prototype.get = function(key) {
          return this[this.encodeKey(key)];
        };
        HashMap.prototype.has = function(key) {
          return this.hasOwnProperty(this.encodeKey(key));
        };
        HashMap.prototype.remove = function(key) {
          if (arguments.length > 1) {
            key = collection.toArray(arguments);
          }
          return type.isArray(key) ? this.removeByKeyArray(key) : this.removeByKey(key);
        };
        HashMap.prototype.removeByKey = function(key) {
          var data = this.has(key) ? this.get(key) : null;
          if (data !== null) {
            delete this[this.encodeKey(key)];
            this.length -= 1;
          }
          return data;
        };
        HashMap.prototype.removeByKeyArray = function(keyArray) {
          var data = [];
          var self2 = this;
          collection.forEach(keyArray, function(key) {
            data.push(self2.removeByKey(key));
          });
          return data;
        };
        HashMap.prototype.removeAll = function() {
          var self2 = this;
          this.each(function(value, key) {
            self2.remove(key);
          });
        };
        HashMap.prototype.each = function(iteratee) {
          var self2 = this;
          var flag;
          collection.forEachOwnProperties(this, function(value, key) {
            if (key.charAt(0) === _MAPDATAPREFIX) {
              flag = iteratee(value, self2.decodeKey(key));
            }
            if (flag === false) {
              return flag;
            }
          });
        };
        HashMap.prototype.keys = function() {
          var keys = [];
          var self2 = this;
          this.each(function(value, key) {
            keys.push(self2.decodeKey(key));
          });
          return keys;
        };
        HashMap.prototype.find = function(condition) {
          var founds = [];
          this.each(function(value, key) {
            if (condition(value, key)) {
              founds.push(value);
            }
          });
          return founds;
        };
        HashMap.prototype.toArray = function() {
          var result = [];
          this.each(function(v) {
            result.push(v);
          });
          return result;
        };
        module2.exports = HashMap;
      }
    ]);
  });
})(tuiCodeSnippet);
var tuiColorPicker = { exports: {} };
/*!
 * TOAST UI Color Picker
 * @version 2.2.7
 * @author NHN FE Development Team <dl_javascript@nhn.com>
 * @license MIT
 */
(function(module, exports) {
  (function webpackUniversalModuleDefinition(root, factory) {
    module.exports = factory();
  })(window, function() {
    return function(modules) {
      var installedModules = {};
      function __webpack_require__(moduleId) {
        if (installedModules[moduleId]) {
          return installedModules[moduleId].exports;
        }
        var module2 = installedModules[moduleId] = {
          i: moduleId,
          l: false,
          exports: {}
        };
        modules[moduleId].call(module2.exports, module2, module2.exports, __webpack_require__);
        module2.l = true;
        return module2.exports;
      }
      __webpack_require__.m = modules;
      __webpack_require__.c = installedModules;
      __webpack_require__.d = function(exports2, name, getter) {
        if (!__webpack_require__.o(exports2, name)) {
          Object.defineProperty(exports2, name, { enumerable: true, get: getter });
        }
      };
      __webpack_require__.r = function(exports2) {
        if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
          Object.defineProperty(exports2, Symbol.toStringTag, { value: "Module" });
        }
        Object.defineProperty(exports2, "__esModule", { value: true });
      };
      __webpack_require__.t = function(value, mode) {
        if (mode & 1)
          value = __webpack_require__(value);
        if (mode & 8)
          return value;
        if (mode & 4 && typeof value === "object" && value && value.__esModule)
          return value;
        var ns = Object.create(null);
        __webpack_require__.r(ns);
        Object.defineProperty(ns, "default", { enumerable: true, value });
        if (mode & 2 && typeof value != "string")
          for (var key in value)
            __webpack_require__.d(ns, key, function(key2) {
              return value[key2];
            }.bind(null, key));
        return ns;
      };
      __webpack_require__.n = function(module2) {
        var getter = module2 && module2.__esModule ? function getDefault() {
          return module2["default"];
        } : function getModuleExports() {
          return module2;
        };
        __webpack_require__.d(getter, "a", getter);
        return getter;
      };
      __webpack_require__.o = function(object, property) {
        return Object.prototype.hasOwnProperty.call(object, property);
      };
      __webpack_require__.p = "dist";
      return __webpack_require__(__webpack_require__.s = 33);
    }([
      function(module2, exports2, __webpack_require__) {
        function extend(target, objects) {
          var hasOwnProp = Object.prototype.hasOwnProperty;
          var source, prop, i, len;
          for (i = 1, len = arguments.length; i < len; i += 1) {
            source = arguments[i];
            for (prop in source) {
              if (hasOwnProp.call(source, prop)) {
                target[prop] = source[prop];
              }
            }
          }
          return target;
        }
        module2.exports = extend;
      },
      function(module2, exports2, __webpack_require__) {
        function isArray(obj) {
          return obj instanceof Array;
        }
        module2.exports = isArray;
      },
      function(module2, exports2, __webpack_require__) {
        var isArray = __webpack_require__(1);
        var forEachArray = __webpack_require__(6);
        var forEachOwnProperties = __webpack_require__(7);
        function forEach(obj, iteratee, context) {
          if (isArray(obj)) {
            forEachArray(obj, iteratee, context);
          } else {
            forEachOwnProperties(obj, iteratee, context);
          }
        }
        module2.exports = forEach;
      },
      function(module2, exports2, __webpack_require__) {
        function isUndefined(obj) {
          return obj === void 0;
        }
        module2.exports = isUndefined;
      },
      function(module2, exports2, __webpack_require__) {
        var browser = __webpack_require__(22);
        var forEach = __webpack_require__(2);
        var forEachArray = __webpack_require__(6);
        var forEachOwnProperties = __webpack_require__(7);
        var sendHostname = __webpack_require__(37);
        var currentId = 0;
        var utils = {
          getLength: function(obj) {
            var length = 0;
            forEachOwnProperties(obj, function() {
              length += 1;
            });
            return length;
          },
          map: function(obj, iteratee, context) {
            var result = [];
            forEach(obj, function() {
              result.push(iteratee.apply(context || null, arguments));
            });
            return result;
          },
          filter: function(arr, iteratee, context) {
            var result = [];
            forEachArray(arr, function(elem) {
              if (iteratee.apply(context || null, arguments)) {
                result.push(elem);
              }
            });
            return result;
          },
          generateId: function() {
            currentId += 1;
            return currentId;
          },
          isOldBrowser: function() {
            return browser.msie && browser.version < 9;
          }(),
          sendHostName: function() {
            sendHostname("color-picker", "UA-129987462-1");
          }
        };
        module2.exports = utils;
      },
      function(module2, exports2, __webpack_require__) {
        var isArray = __webpack_require__(1);
        function inArray(searchElement, array, startIndex) {
          var i;
          var length;
          startIndex = startIndex || 0;
          if (!isArray(array)) {
            return -1;
          }
          if (Array.prototype.indexOf) {
            return Array.prototype.indexOf.call(array, searchElement, startIndex);
          }
          length = array.length;
          for (i = startIndex; startIndex >= 0 && i < length; i += 1) {
            if (array[i] === searchElement) {
              return i;
            }
          }
          return -1;
        }
        module2.exports = inArray;
      },
      function(module2, exports2, __webpack_require__) {
        function forEachArray(arr, iteratee, context) {
          var index = 0;
          var len = arr.length;
          context = context || null;
          for (; index < len; index += 1) {
            if (iteratee.call(context, arr[index], index, arr) === false) {
              break;
            }
          }
        }
        module2.exports = forEachArray;
      },
      function(module2, exports2, __webpack_require__) {
        function forEachOwnProperties(obj, iteratee, context) {
          var key;
          context = context || null;
          for (key in obj) {
            if (obj.hasOwnProperty(key)) {
              if (iteratee.call(context, obj[key], key, obj) === false) {
                break;
              }
            }
          }
        }
        module2.exports = forEachOwnProperties;
      },
      function(module2, exports2, __webpack_require__) {
        var addClass = __webpack_require__(39);
        var isFunction = __webpack_require__(13);
        var isNumber = __webpack_require__(41);
        var isUndefined = __webpack_require__(3);
        var domUtil = __webpack_require__(9);
        var Collection = __webpack_require__(19);
        var util = __webpack_require__(4);
        function View(options, container) {
          var id = util.generateId();
          if (isUndefined(container)) {
            container = domUtil.appendHTMLElement("div");
          }
          addClass(container, "tui-view-" + id);
          this.id = id;
          this.container = container;
          this.childs = new Collection(function(view) {
            return view.id;
          });
          this.parent = null;
        }
        View.prototype.addChild = function(view, fn) {
          if (fn) {
            fn.call(view, this);
          }
          view.parent = this;
          this.childs.add(view);
        };
        View.prototype.removeChild = function(id, fn) {
          var view = isNumber(id) ? this.childs.items[id] : id;
          if (fn) {
            fn.call(view, this);
          }
          this.childs.remove(view.id);
        };
        View.prototype.render = function() {
          this.childs.each(function(childView) {
            childView.render();
          });
        };
        View.prototype.recursive = function(fn, skipThis) {
          if (!isFunction(fn)) {
            return;
          }
          if (!skipThis) {
            fn(this);
          }
          this.childs.each(function(childView) {
            childView.recursive(fn);
          });
        };
        View.prototype.resize = function() {
          var args = Array.prototype.slice.call(arguments);
          var parent = this.parent;
          while (parent) {
            if (isFunction(parent._onResize)) {
              parent._onResize.apply(parent, args);
            }
            parent = parent.parent;
          }
        };
        View.prototype._beforeDestroy = function() {
        };
        View.prototype._destroy = function() {
          this._beforeDestroy();
          this.container.innerHTML = "";
          this.id = this.parent = this.childs = this.container = null;
        };
        View.prototype.destroy = function(isChildView) {
          if (this.childs) {
            this.childs.each(function(childView) {
              childView.destroy(true);
              childView._destroy();
            });
            this.childs.clear();
          }
          if (isChildView) {
            return;
          }
          this._destroy();
        };
        View.prototype.getViewBound = function() {
          var bound = this.container.getBoundingClientRect();
          return {
            x: bound.left,
            y: bound.top,
            width: bound.right - bound.left,
            height: bound.bottom - bound.top
          };
        };
        module2.exports = View;
      },
      function(module2, exports2, __webpack_require__) {
        var domUtil = {
          appendHTMLElement: function(tagName, container, className) {
            var el = document.createElement(tagName);
            el.className = className || "";
            if (container) {
              container.appendChild(el);
            } else {
              document.body.appendChild(el);
            }
            return el;
          }
        };
        module2.exports = domUtil;
      },
      function(module2, exports2, __webpack_require__) {
        var extend = __webpack_require__(0);
        var isExisty = __webpack_require__(20);
        var isString = __webpack_require__(11);
        var isObject = __webpack_require__(21);
        var isArray = __webpack_require__(1);
        var isFunction = __webpack_require__(13);
        var forEach = __webpack_require__(2);
        var R_EVENTNAME_SPLIT = /\s+/g;
        function CustomEvents() {
          this.events = null;
          this.contexts = null;
        }
        CustomEvents.mixin = function(func) {
          extend(func.prototype, CustomEvents.prototype);
        };
        CustomEvents.prototype._getHandlerItem = function(handler, context) {
          var item = { handler };
          if (context) {
            item.context = context;
          }
          return item;
        };
        CustomEvents.prototype._safeEvent = function(eventName) {
          var events = this.events;
          var byName;
          if (!events) {
            events = this.events = {};
          }
          if (eventName) {
            byName = events[eventName];
            if (!byName) {
              byName = [];
              events[eventName] = byName;
            }
            events = byName;
          }
          return events;
        };
        CustomEvents.prototype._safeContext = function() {
          var context = this.contexts;
          if (!context) {
            context = this.contexts = [];
          }
          return context;
        };
        CustomEvents.prototype._indexOfContext = function(ctx) {
          var context = this._safeContext();
          var index = 0;
          while (context[index]) {
            if (ctx === context[index][0]) {
              return index;
            }
            index += 1;
          }
          return -1;
        };
        CustomEvents.prototype._memorizeContext = function(ctx) {
          var context, index;
          if (!isExisty(ctx)) {
            return;
          }
          context = this._safeContext();
          index = this._indexOfContext(ctx);
          if (index > -1) {
            context[index][1] += 1;
          } else {
            context.push([ctx, 1]);
          }
        };
        CustomEvents.prototype._forgetContext = function(ctx) {
          var context, contextIndex;
          if (!isExisty(ctx)) {
            return;
          }
          context = this._safeContext();
          contextIndex = this._indexOfContext(ctx);
          if (contextIndex > -1) {
            context[contextIndex][1] -= 1;
            if (context[contextIndex][1] <= 0) {
              context.splice(contextIndex, 1);
            }
          }
        };
        CustomEvents.prototype._bindEvent = function(eventName, handler, context) {
          var events = this._safeEvent(eventName);
          this._memorizeContext(context);
          events.push(this._getHandlerItem(handler, context));
        };
        CustomEvents.prototype.on = function(eventName, handler, context) {
          var self2 = this;
          if (isString(eventName)) {
            eventName = eventName.split(R_EVENTNAME_SPLIT);
            forEach(eventName, function(name) {
              self2._bindEvent(name, handler, context);
            });
          } else if (isObject(eventName)) {
            context = handler;
            forEach(eventName, function(func, name) {
              self2.on(name, func, context);
            });
          }
        };
        CustomEvents.prototype.once = function(eventName, handler, context) {
          var self2 = this;
          if (isObject(eventName)) {
            context = handler;
            forEach(eventName, function(func, name) {
              self2.once(name, func, context);
            });
            return;
          }
          function onceHandler() {
            handler.apply(context, arguments);
            self2.off(eventName, onceHandler, context);
          }
          this.on(eventName, onceHandler, context);
        };
        CustomEvents.prototype._spliceMatches = function(arr, predicate) {
          var i = 0;
          var len;
          if (!isArray(arr)) {
            return;
          }
          for (len = arr.length; i < len; i += 1) {
            if (predicate(arr[i]) === true) {
              arr.splice(i, 1);
              len -= 1;
              i -= 1;
            }
          }
        };
        CustomEvents.prototype._matchHandler = function(handler) {
          var self2 = this;
          return function(item) {
            var needRemove = handler === item.handler;
            if (needRemove) {
              self2._forgetContext(item.context);
            }
            return needRemove;
          };
        };
        CustomEvents.prototype._matchContext = function(context) {
          var self2 = this;
          return function(item) {
            var needRemove = context === item.context;
            if (needRemove) {
              self2._forgetContext(item.context);
            }
            return needRemove;
          };
        };
        CustomEvents.prototype._matchHandlerAndContext = function(handler, context) {
          var self2 = this;
          return function(item) {
            var matchHandler = handler === item.handler;
            var matchContext = context === item.context;
            var needRemove = matchHandler && matchContext;
            if (needRemove) {
              self2._forgetContext(item.context);
            }
            return needRemove;
          };
        };
        CustomEvents.prototype._offByEventName = function(eventName, handler) {
          var self2 = this;
          var andByHandler = isFunction(handler);
          var matchHandler = self2._matchHandler(handler);
          eventName = eventName.split(R_EVENTNAME_SPLIT);
          forEach(eventName, function(name) {
            var handlerItems = self2._safeEvent(name);
            if (andByHandler) {
              self2._spliceMatches(handlerItems, matchHandler);
            } else {
              forEach(handlerItems, function(item) {
                self2._forgetContext(item.context);
              });
              self2.events[name] = [];
            }
          });
        };
        CustomEvents.prototype._offByHandler = function(handler) {
          var self2 = this;
          var matchHandler = this._matchHandler(handler);
          forEach(this._safeEvent(), function(handlerItems) {
            self2._spliceMatches(handlerItems, matchHandler);
          });
        };
        CustomEvents.prototype._offByObject = function(obj, handler) {
          var self2 = this;
          var matchFunc;
          if (this._indexOfContext(obj) < 0) {
            forEach(obj, function(func, name) {
              self2.off(name, func);
            });
          } else if (isString(handler)) {
            matchFunc = this._matchContext(obj);
            self2._spliceMatches(this._safeEvent(handler), matchFunc);
          } else if (isFunction(handler)) {
            matchFunc = this._matchHandlerAndContext(handler, obj);
            forEach(this._safeEvent(), function(handlerItems) {
              self2._spliceMatches(handlerItems, matchFunc);
            });
          } else {
            matchFunc = this._matchContext(obj);
            forEach(this._safeEvent(), function(handlerItems) {
              self2._spliceMatches(handlerItems, matchFunc);
            });
          }
        };
        CustomEvents.prototype.off = function(eventName, handler) {
          if (isString(eventName)) {
            this._offByEventName(eventName, handler);
          } else if (!arguments.length) {
            this.events = {};
            this.contexts = [];
          } else if (isFunction(eventName)) {
            this._offByHandler(eventName);
          } else if (isObject(eventName)) {
            this._offByObject(eventName, handler);
          }
        };
        CustomEvents.prototype.fire = function(eventName) {
          this.invoke.apply(this, arguments);
        };
        CustomEvents.prototype.invoke = function(eventName) {
          var events, args, index, item;
          if (!this.hasListener(eventName)) {
            return true;
          }
          events = this._safeEvent(eventName);
          args = Array.prototype.slice.call(arguments, 1);
          index = 0;
          while (events[index]) {
            item = events[index];
            if (item.handler.apply(item.context, args) === false) {
              return false;
            }
            index += 1;
          }
          return true;
        };
        CustomEvents.prototype.hasListener = function(eventName) {
          return this.getListenerLength(eventName) > 0;
        };
        CustomEvents.prototype.getListenerLength = function(eventName) {
          var events = this._safeEvent(eventName);
          return events.length;
        };
        module2.exports = CustomEvents;
      },
      function(module2, exports2, __webpack_require__) {
        function isString(obj) {
          return typeof obj === "string" || obj instanceof String;
        }
        module2.exports = isString;
      },
      function(module2, exports2, __webpack_require__) {
        var hexRX = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;
        var colorUtil = {
          leadingZero: function(number, length) {
            var zero = "";
            var i = 0;
            if ((number + "").length > length) {
              return number + "";
            }
            for (; i < length - 1; i += 1) {
              zero += "0";
            }
            return (zero + number).slice(length * -1);
          },
          isValidRGB: function(str) {
            return hexRX.test(str);
          },
          hexToRGB: function(hexStr) {
            var r, g, b;
            if (!colorUtil.isValidRGB(hexStr)) {
              return false;
            }
            hexStr = hexStr.substring(1);
            r = parseInt(hexStr.substr(0, 2), 16);
            g = parseInt(hexStr.substr(2, 2), 16);
            b = parseInt(hexStr.substr(4, 2), 16);
            return [r, g, b];
          },
          rgbToHEX: function(r, g, b) {
            var hexStr = "#" + colorUtil.leadingZero(r.toString(16), 2) + colorUtil.leadingZero(g.toString(16), 2) + colorUtil.leadingZero(b.toString(16), 2);
            if (colorUtil.isValidRGB(hexStr)) {
              return hexStr;
            }
            return false;
          },
          rgbToHSV: function(r, g, b) {
            var max, min, h, s, v, d;
            r /= 255;
            g /= 255;
            b /= 255;
            max = Math.max(r, g, b);
            min = Math.min(r, g, b);
            v = max;
            d = max - min;
            s = max === 0 ? 0 : d / max;
            if (max === min) {
              h = 0;
            } else {
              switch (max) {
                case r:
                  h = (g - b) / d + (g < b ? 6 : 0);
                  break;
                case g:
                  h = (b - r) / d + 2;
                  break;
                case b:
                  h = (r - g) / d + 4;
                  break;
              }
              h /= 6;
            }
            return [Math.round(h * 360), Math.round(s * 100), Math.round(v * 100)];
          },
          hsvToRGB: function(h, s, v) {
            var r, g, b;
            var i;
            var f, p, q, t;
            h = Math.max(0, Math.min(360, h));
            s = Math.max(0, Math.min(100, s));
            v = Math.max(0, Math.min(100, v));
            s /= 100;
            v /= 100;
            if (s === 0) {
              r = g = b = v;
              return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
            }
            h /= 60;
            i = Math.floor(h);
            f = h - i;
            p = v * (1 - s);
            q = v * (1 - s * f);
            t = v * (1 - s * (1 - f));
            switch (i) {
              case 0:
                r = v;
                g = t;
                b = p;
                break;
              case 1:
                r = q;
                g = v;
                b = p;
                break;
              case 2:
                r = p;
                g = v;
                b = t;
                break;
              case 3:
                r = p;
                g = q;
                b = v;
                break;
              case 4:
                r = t;
                g = p;
                b = v;
                break;
              default:
                r = v;
                g = p;
                b = q;
                break;
            }
            return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
          }
        };
        module2.exports = colorUtil;
      },
      function(module2, exports2, __webpack_require__) {
        function isFunction(obj) {
          return obj instanceof Function;
        }
        module2.exports = isFunction;
      },
      function(module2, exports2, __webpack_require__) {
        var isString = __webpack_require__(11);
        var forEach = __webpack_require__(2);
        var safeEvent = __webpack_require__(26);
        function on(element, types, handler, context) {
          if (isString(types)) {
            forEach(types.split(/\s+/g), function(type) {
              bindEvent(element, type, handler, context);
            });
            return;
          }
          forEach(types, function(func, type) {
            bindEvent(element, type, func, handler);
          });
        }
        function bindEvent(element, type, handler, context) {
          function eventHandler(e) {
            handler.call(context || element, e || window.event);
          }
          if ("addEventListener" in element) {
            element.addEventListener(type, eventHandler);
          } else if ("attachEvent" in element) {
            element.attachEvent("on" + type, eventHandler);
          }
          memorizeHandler(element, type, handler, eventHandler);
        }
        function memorizeHandler(element, type, handler, wrappedHandler) {
          var events = safeEvent(element, type);
          var existInEvents = false;
          forEach(events, function(obj) {
            if (obj.handler === handler) {
              existInEvents = true;
              return false;
            }
            return true;
          });
          if (!existInEvents) {
            events.push({
              handler,
              wrappedHandler
            });
          }
        }
        module2.exports = on;
      },
      function(module2, exports2, __webpack_require__) {
        function preventDefault(e) {
          if (e.preventDefault) {
            e.preventDefault();
            return;
          }
          e.returnValue = false;
        }
        module2.exports = preventDefault;
      },
      function(module2, exports2, __webpack_require__) {
        function convertToKebabCase(key) {
          return key.replace(/([A-Z])/g, function(match) {
            return "-" + match.toLowerCase();
          });
        }
        module2.exports = convertToKebabCase;
      },
      function(module2, exports2, __webpack_require__) {
        var isString = __webpack_require__(11);
        var forEach = __webpack_require__(2);
        var safeEvent = __webpack_require__(26);
        function off(element, types, handler) {
          if (isString(types)) {
            forEach(types.split(/\s+/g), function(type) {
              unbindEvent(element, type, handler);
            });
            return;
          }
          forEach(types, function(func, type) {
            unbindEvent(element, type, func);
          });
        }
        function unbindEvent(element, type, handler) {
          var events = safeEvent(element, type);
          var index;
          if (!handler) {
            forEach(events, function(item) {
              removeHandler(element, type, item.wrappedHandler);
            });
            events.splice(0, events.length);
          } else {
            forEach(events, function(item, idx) {
              if (handler === item.handler) {
                removeHandler(element, type, item.wrappedHandler);
                index = idx;
                return false;
              }
              return true;
            });
            events.splice(index, 1);
          }
        }
        function removeHandler(element, type, handler) {
          if ("removeEventListener" in element) {
            element.removeEventListener(type, handler);
          } else if ("detachEvent" in element) {
            element.detachEvent("on" + type, handler);
          }
        }
        module2.exports = off;
      },
      function(module2, exports2, __webpack_require__) {
        var createObject = __webpack_require__(50);
        function inherit(subType, superType) {
          var prototype = createObject(superType.prototype);
          prototype.constructor = subType;
          subType.prototype = prototype;
        }
        module2.exports = inherit;
      },
      function(module2, exports2, __webpack_require__) {
        var forEachArray = __webpack_require__(6);
        var forEachOwnProperties = __webpack_require__(7);
        var extend = __webpack_require__(0);
        var isArray = __webpack_require__(1);
        var isExisty = __webpack_require__(20);
        var isFunction = __webpack_require__(13);
        var isObject = __webpack_require__(21);
        var util = __webpack_require__(4);
        var slice = Array.prototype.slice;
        function Collection(getItemIDFn) {
          this.items = {};
          this.length = 0;
          if (isFunction(getItemIDFn)) {
            this.getItemID = getItemIDFn;
          }
        }
        Collection.and = function(filters) {
          var cnt;
          filters = slice.call(arguments);
          cnt = filters.length;
          return function(item) {
            var i = 0;
            for (; i < cnt; i += 1) {
              if (!filters[i].call(null, item)) {
                return false;
              }
            }
            return true;
          };
        };
        Collection.or = function(filters) {
          var cnt;
          filters = slice.call(arguments);
          cnt = filters.length;
          return function(item) {
            var i = 1;
            var result = filters[0].call(null, item);
            for (; i < cnt; i += 1) {
              result = result || filters[i].call(null, item);
            }
            return result;
          };
        };
        Collection.merge = function(firstCollection) {
          var newItems = {};
          var merged = new Collection(firstCollection.getItemID);
          forEachArray(arguments, function(col) {
            extend(newItems, col.items);
          });
          merged.items = newItems;
          merged.length = util.getLength(merged.items);
          return merged;
        };
        Collection.prototype.getItemID = function(item) {
          return item._id + "";
        };
        Collection.prototype.add = function(item) {
          var id, ownItems;
          if (arguments.length > 1) {
            forEachArray(slice.call(arguments), function(o) {
              this.add(o);
            }, this);
            return;
          }
          id = this.getItemID(item);
          ownItems = this.items;
          if (!ownItems[id]) {
            this.length += 1;
          }
          ownItems[id] = item;
        };
        Collection.prototype.remove = function(id) {
          var removed = [];
          var ownItems, itemToRemove;
          if (!this.length) {
            return removed;
          }
          if (arguments.length > 1) {
            removed = util.map(slice.call(arguments), function(id2) {
              return this.remove(id2);
            }, this);
            return removed;
          }
          ownItems = this.items;
          if (isObject(id)) {
            id = this.getItemID(id);
          }
          if (!ownItems[id]) {
            return removed;
          }
          this.length -= 1;
          itemToRemove = ownItems[id];
          delete ownItems[id];
          return itemToRemove;
        };
        Collection.prototype.clear = function() {
          this.items = {};
          this.length = 0;
        };
        Collection.prototype.has = function(id) {
          var isFilter, has;
          if (!this.length) {
            return false;
          }
          isFilter = isFunction(id);
          has = false;
          if (isFilter) {
            this.each(function(item) {
              if (id(item) === true) {
                has = true;
                return false;
              }
              return true;
            });
          } else {
            id = isObject(id) ? this.getItemID(id) : id;
            has = isExisty(this.items[id]);
          }
          return has;
        };
        Collection.prototype.doWhenHas = function(id, fn, context) {
          var item = this.items[id];
          if (!isExisty(item)) {
            return;
          }
          fn.call(context || this, item);
        };
        Collection.prototype.find = function(filter) {
          var result = new Collection();
          if (this.hasOwnProperty("getItemID")) {
            result.getItemID = this.getItemID;
          }
          this.each(function(item) {
            if (filter(item) === true) {
              result.add(item);
            }
          });
          return result;
        };
        Collection.prototype.groupBy = function(key, groupFunc) {
          var result = {};
          var keyIsFunc = isFunction(key);
          var getItemIDFn = this.getItemID;
          var collection, baseValue;
          if (isArray(key)) {
            forEachArray(key, function(k) {
              result[k + ""] = new Collection(getItemIDFn);
            });
            if (!groupFunc) {
              return result;
            }
            key = groupFunc;
            keyIsFunc = true;
          }
          this.each(function(item) {
            if (keyIsFunc) {
              baseValue = key(item);
            } else {
              baseValue = item[key];
              if (isFunction(baseValue)) {
                baseValue = baseValue.apply(item);
              }
            }
            collection = result[baseValue];
            if (!collection) {
              collection = result[baseValue] = new Collection(getItemIDFn);
            }
            collection.add(item);
          });
          return result;
        };
        Collection.prototype.single = function() {
          var result;
          this.each(function(item) {
            result = item;
            return false;
          }, this);
          return result;
        };
        Collection.prototype.sort = function(compareFunction) {
          var arr = [];
          this.each(function(item) {
            arr.push(item);
          });
          if (isFunction(compareFunction)) {
            arr = arr.sort(compareFunction);
          }
          return arr;
        };
        Collection.prototype.each = function(iteratee, context) {
          forEachOwnProperties(this.items, iteratee, context || this);
        };
        Collection.prototype.toArray = function() {
          if (!this.length) {
            return [];
          }
          return util.map(this.items, function(item) {
            return item;
          });
        };
        module2.exports = Collection;
      },
      function(module2, exports2, __webpack_require__) {
        var isUndefined = __webpack_require__(3);
        var isNull = __webpack_require__(36);
        function isExisty(param) {
          return !isUndefined(param) && !isNull(param);
        }
        module2.exports = isExisty;
      },
      function(module2, exports2, __webpack_require__) {
        function isObject(obj) {
          return obj === Object(obj);
        }
        module2.exports = isObject;
      },
      function(module2, exports2, __webpack_require__) {
        var browser = {
          chrome: false,
          firefox: false,
          safari: false,
          msie: false,
          edge: false,
          others: false,
          version: 0
        };
        if (typeof window !== "undefined" && window.navigator) {
          detectBrowser();
        }
        function detectBrowser() {
          var nav = window.navigator;
          var appName = nav.appName.replace(/\s/g, "_");
          var userAgent = nav.userAgent;
          var rIE = /MSIE\s([0-9]+[.0-9]*)/;
          var rIE11 = /Trident.*rv:11\./;
          var rEdge = /Edge\/(\d+)\./;
          var versionRegex = {
            firefox: /Firefox\/(\d+)\./,
            chrome: /Chrome\/(\d+)\./,
            safari: /Version\/([\d.]+).*Safari\/(\d+)/
          };
          var key, tmp;
          var detector = {
            Microsoft_Internet_Explorer: function() {
              var detectedVersion = userAgent.match(rIE);
              if (detectedVersion) {
                browser.msie = true;
                browser.version = parseFloat(detectedVersion[1]);
              } else {
                browser.others = true;
              }
            },
            Netscape: function() {
              var detected = false;
              if (rIE11.exec(userAgent)) {
                browser.msie = true;
                browser.version = 11;
                detected = true;
              } else if (rEdge.exec(userAgent)) {
                browser.edge = true;
                browser.version = userAgent.match(rEdge)[1];
                detected = true;
              } else {
                for (key in versionRegex) {
                  if (versionRegex.hasOwnProperty(key)) {
                    tmp = userAgent.match(versionRegex[key]);
                    if (tmp && tmp.length > 1) {
                      browser[key] = detected = true;
                      browser.version = parseFloat(tmp[1] || 0);
                      break;
                    }
                  }
                }
              }
              if (!detected) {
                browser.others = true;
              }
            }
          };
          var fn = detector[appName];
          if (fn) {
            detector[appName]();
          }
        }
        module2.exports = browser;
      },
      function(module2, exports2, __webpack_require__) {
        var isUndefined = __webpack_require__(3);
        function getClass(element) {
          if (!element || !element.className) {
            return "";
          }
          if (isUndefined(element.className.baseVal)) {
            return element.className;
          }
          return element.className.baseVal;
        }
        module2.exports = getClass;
      },
      function(module2, exports2, __webpack_require__) {
        (function(global2) {
          var CustomEvents = __webpack_require__(10);
          var disableTextSelection = __webpack_require__(42);
          var enableTextSelection = __webpack_require__(44);
          var getMouseButton = __webpack_require__(47);
          var getTarget = __webpack_require__(28);
          var off = __webpack_require__(17);
          var on = __webpack_require__(14);
          var preventDefault = __webpack_require__(15);
          var extend = __webpack_require__(0);
          function Drag(options, container) {
            on(container, "mousedown", this._onMouseDown, this);
            this.options = extend({
              distance: 10
            }, options);
            this.container = container;
            this._isMoved = false;
            this._distance = 0;
            this._dragStartFired = false;
            this._dragStartEventData = null;
          }
          Drag.prototype.destroy = function() {
            off(this.container, "mousedown", this._onMouseDown);
            this.options = this.container = this._isMoved = this._distance = this._dragStartFired = this._dragStartEventData = null;
          };
          Drag.prototype._toggleDragEvent = function(toBind) {
            var container = this.container;
            if (toBind) {
              disableTextSelection(container);
              on(window, "dragstart", preventDefault);
              on(global2.document, {
                mousemove: this._onMouseMove,
                mouseup: this._onMouseUp
              }, this);
            } else {
              enableTextSelection(container);
              off(window, "dragstart", preventDefault);
              off(global2.document, {
                mousemove: this._onMouseMove,
                mouseup: this._onMouseUp
              });
            }
          };
          Drag.prototype._getEventData = function(mouseEvent) {
            return {
              target: getTarget(mouseEvent),
              originEvent: mouseEvent
            };
          };
          Drag.prototype._onMouseDown = function(mouseDownEvent) {
            if (getMouseButton(mouseDownEvent) !== 0) {
              return;
            }
            this._distance = 0;
            this._dragStartFired = false;
            this._dragStartEventData = this._getEventData(mouseDownEvent);
            this._toggleDragEvent(true);
          };
          Drag.prototype._onMouseMove = function(mouseMoveEvent) {
            var distance = this.options.distance;
            preventDefault(mouseMoveEvent);
            this._isMoved = true;
            if (this._distance < distance) {
              this._distance += 1;
              return;
            }
            if (!this._dragStartFired) {
              this._dragStartFired = true;
              if (!this.invoke("dragStart", this._dragStartEventData)) {
                this._toggleDragEvent(false);
                return;
              }
            }
            this.fire("drag", this._getEventData(mouseMoveEvent));
          };
          Drag.prototype._onMouseUp = function(mouseUpEvent) {
            this._toggleDragEvent(false);
            if (this._isMoved) {
              this._isMoved = false;
              this.fire("dragEnd", this._getEventData(mouseUpEvent));
              return;
            }
            this.fire("click", this._getEventData(mouseUpEvent));
          };
          CustomEvents.mixin(Drag);
          module2.exports = Drag;
        }).call(this, __webpack_require__(25));
      },
      function(module2, exports2) {
        var g;
        g = function() {
          return this;
        }();
        try {
          g = g || new Function("return this")();
        } catch (e) {
          if (typeof window === "object")
            g = window;
        }
        module2.exports = g;
      },
      function(module2, exports2, __webpack_require__) {
        var EVENT_KEY = "_feEventKey";
        function safeEvent(element, type) {
          var events = element[EVENT_KEY];
          var handlers;
          if (!events) {
            events = element[EVENT_KEY] = {};
          }
          handlers = events[type];
          if (!handlers) {
            handlers = events[type] = [];
          }
          return handlers;
        }
        module2.exports = safeEvent;
      },
      function(module2, exports2, __webpack_require__) {
        function testCSSProp(props) {
          var style = document.documentElement.style;
          var i, len;
          for (i = 0, len = props.length; i < len; i += 1) {
            if (props[i] in style) {
              return props[i];
            }
          }
          return false;
        }
        module2.exports = testCSSProp;
      },
      function(module2, exports2, __webpack_require__) {
        function getTarget(e) {
          return e.target || e.srcElement;
        }
        module2.exports = getTarget;
      },
      function(module2, exports2, __webpack_require__) {
        var CustomEvents = __webpack_require__(10);
        var getTarget = __webpack_require__(28);
        var off = __webpack_require__(17);
        var on = __webpack_require__(14);
        var hasClass = __webpack_require__(30);
        var extend = __webpack_require__(0);
        var inherit = __webpack_require__(18);
        var domUtil = __webpack_require__(9);
        var colorUtil = __webpack_require__(12);
        var View = __webpack_require__(8);
        var tmpl = __webpack_require__(51);
        function Palette(options, container) {
          this.options = extend({
            cssPrefix: "tui-colorpicker-",
            preset: ["#181818", "#282828", "#383838", "#585858", "#B8B8B8", "#D8D8D8", "#E8E8E8", "#F8F8F8", "#AB4642", "#DC9656", "#F7CA88", "#A1B56C", "#86C1B9", "#7CAFC2", "#BA8BAF", "#A16946"],
            detailTxt: "Detail"
          }, options);
          container = domUtil.appendHTMLElement("div", container, this.options.cssPrefix + "palette-container");
          View.call(this, options, container);
        }
        inherit(Palette, View);
        Palette.prototype._onClick = function(clickEvent) {
          var options = this.options;
          var target = getTarget(clickEvent);
          var eventData = {};
          if (hasClass(target, options.cssPrefix + "palette-button")) {
            eventData.color = target.value;
            this.fire("_selectColor", eventData);
            return;
          }
          if (hasClass(target, options.cssPrefix + "palette-toggle-slider")) {
            this.fire("_toggleSlider");
          }
        };
        Palette.prototype._onChange = function(changeEvent) {
          var options = this.options;
          var target = getTarget(changeEvent);
          var eventData = {};
          if (hasClass(target, options.cssPrefix + "palette-hex")) {
            eventData.color = target.value;
            this.fire("_selectColor", eventData);
          }
        };
        Palette.prototype._beforeDestroy = function() {
          this._toggleEvent(false);
        };
        Palette.prototype._toggleEvent = function(toBind) {
          var options = this.options;
          var container = this.container;
          var handleEvent = toBind ? on : off;
          var hexTextBox;
          handleEvent(container, "click", this._onClick, this);
          hexTextBox = container.querySelector("." + options.cssPrefix + "palette-hex", container);
          if (hexTextBox) {
            handleEvent(hexTextBox, "change", this._onChange, this);
          }
        };
        Palette.prototype.render = function(color) {
          var options = this.options;
          var html = "";
          this._toggleEvent(false);
          html = tmpl({
            cssPrefix: options.cssPrefix,
            preset: options.preset,
            detailTxt: options.detailTxt,
            color,
            isValidRGB: colorUtil.isValidRGB,
            getItemClass: function(itemColor) {
              return !itemColor ? " " + options.cssPrefix + "color-transparent" : "";
            },
            isSelected: function(itemColor) {
              return itemColor === color ? " " + options.cssPrefix + "selected" : "";
            }
          });
          this.container.innerHTML = html;
          this._toggleEvent(true);
        };
        CustomEvents.mixin(Palette);
        module2.exports = Palette;
      },
      function(module2, exports2, __webpack_require__) {
        var inArray = __webpack_require__(5);
        var getClass = __webpack_require__(23);
        function hasClass(element, cssClass) {
          var origin;
          if (element.classList) {
            return element.classList.contains(cssClass);
          }
          origin = getClass(element).split(/\s+/);
          return inArray(cssClass, origin) > -1;
        }
        module2.exports = hasClass;
      },
      function(module2, exports2, __webpack_require__) {
        var CustomEvents = __webpack_require__(10);
        var getMousePosition = __webpack_require__(53);
        var closest = __webpack_require__(54);
        var hasClass = __webpack_require__(30);
        var extend = __webpack_require__(0);
        var inherit = __webpack_require__(18);
        var domUtil = __webpack_require__(9);
        var svgvml = __webpack_require__(32);
        var colorUtil = __webpack_require__(12);
        var View = __webpack_require__(8);
        var Drag = __webpack_require__(24);
        var tmpl = __webpack_require__(57);
        var COLORSLIDER_POS_LIMIT_RANGE = [-7, 112];
        var HUEBAR_POS_LIMIT_RANGE = [-3, 115];
        var HUE_WHEEL_MAX = 359.99;
        function Slider(options, container) {
          container = domUtil.appendHTMLElement("div", container, options.cssPrefix + "slider-container");
          container.style.display = "none";
          View.call(this, options, container);
          this.options = extend({
            color: "#f8f8f8",
            cssPrefix: "tui-colorpicker-"
          }, options);
          this._dragDataCache = {};
          this.sliderHandleElement = null;
          this.huebarHandleElement = null;
          this.baseColorElement = null;
          this.drag = new Drag({
            distance: 0
          }, container);
          this.drag.on({
            dragStart: this._onDragStart,
            drag: this._onDrag,
            dragEnd: this._onDragEnd,
            click: this._onClick
          }, this);
        }
        inherit(Slider, View);
        Slider.prototype._beforeDestroy = function() {
          this.drag.off();
          this.drag = this.options = this._dragDataCache = this.sliderHandleElement = this.huebarHandleElement = this.baseColorElement = null;
        };
        Slider.prototype.toggle = function(onOff) {
          this.container.style.display = !!onOff ? "block" : "none";
        };
        Slider.prototype.isVisible = function() {
          return this.container.style.display === "block";
        };
        Slider.prototype.render = function(colorStr) {
          var container = this.container;
          var options = this.options;
          var html = tmpl.layout;
          var rgb, hsv;
          if (!colorUtil.isValidRGB(colorStr)) {
            return;
          }
          html = html.replace(/{{slider}}/, tmpl.slider);
          html = html.replace(/{{huebar}}/, tmpl.huebar);
          html = html.replace(/{{cssPrefix}}/g, options.cssPrefix);
          html = html.replace(/{{id}}/g, options.id);
          this.container.innerHTML = html;
          this.sliderHandleElement = container.querySelector("." + options.cssPrefix + "slider-handle");
          this.huebarHandleElement = container.querySelector("." + options.cssPrefix + "huebar-handle");
          this.baseColorElement = container.querySelector("." + options.cssPrefix + "slider-basecolor");
          rgb = colorUtil.hexToRGB(colorStr);
          hsv = colorUtil.rgbToHSV.apply(null, rgb);
          this.moveHue(hsv[0], true);
          this.moveSaturationAndValue(hsv[1], hsv[2], true);
        };
        Slider.prototype._moveColorSliderHandle = function(newLeft, newTop, silent) {
          var handle = this.sliderHandleElement;
          var handleColor;
          newTop = Math.max(COLORSLIDER_POS_LIMIT_RANGE[0], newTop);
          newTop = Math.min(COLORSLIDER_POS_LIMIT_RANGE[1], newTop);
          newLeft = Math.max(COLORSLIDER_POS_LIMIT_RANGE[0], newLeft);
          newLeft = Math.min(COLORSLIDER_POS_LIMIT_RANGE[1], newLeft);
          svgvml.setTranslateXY(handle, newLeft, newTop);
          handleColor = newTop > 50 ? "white" : "black";
          svgvml.setStrokeColor(handle, handleColor);
          if (!silent) {
            this.fire("_selectColor", {
              color: colorUtil.rgbToHEX.apply(null, this.getRGB())
            });
          }
        };
        Slider.prototype.moveSaturationAndValue = function(saturation, value, silent) {
          var absMin, maxValue, newLeft, newTop;
          saturation = saturation || 0;
          value = value || 0;
          absMin = Math.abs(COLORSLIDER_POS_LIMIT_RANGE[0]);
          maxValue = COLORSLIDER_POS_LIMIT_RANGE[1];
          newLeft = saturation * maxValue / 100 - absMin;
          newTop = maxValue - value * maxValue / 100 - absMin;
          this._moveColorSliderHandle(newLeft, newTop, silent);
        };
        Slider.prototype._moveColorSliderByPosition = function(x, y) {
          var offset = COLORSLIDER_POS_LIMIT_RANGE[0];
          this._moveColorSliderHandle(x + offset, y + offset);
        };
        Slider.prototype.getSaturationAndValue = function() {
          var absMin = Math.abs(COLORSLIDER_POS_LIMIT_RANGE[0]);
          var maxValue = absMin + COLORSLIDER_POS_LIMIT_RANGE[1];
          var position = svgvml.getTranslateXY(this.sliderHandleElement);
          var saturation, value;
          saturation = (position[1] + absMin) / maxValue * 100;
          value = 100 - (position[0] + absMin) / maxValue * 100;
          return [saturation, value];
        };
        Slider.prototype._moveHueHandle = function(newTop, silent) {
          var hueHandleElement = this.huebarHandleElement;
          var baseColorElement = this.baseColorElement;
          var newGradientColor, hexStr;
          newTop = Math.max(HUEBAR_POS_LIMIT_RANGE[0], newTop);
          newTop = Math.min(HUEBAR_POS_LIMIT_RANGE[1], newTop);
          svgvml.setTranslateY(hueHandleElement, newTop);
          newGradientColor = colorUtil.hsvToRGB(this.getHue(), 100, 100);
          hexStr = colorUtil.rgbToHEX.apply(null, newGradientColor);
          svgvml.setGradientColorStop(baseColorElement, hexStr);
          if (!silent) {
            this.fire("_selectColor", {
              color: colorUtil.rgbToHEX.apply(null, this.getRGB())
            });
          }
        };
        Slider.prototype.moveHue = function(degree, silent) {
          var newTop = 0;
          var absMin, maxValue;
          absMin = Math.abs(HUEBAR_POS_LIMIT_RANGE[0]);
          maxValue = absMin + HUEBAR_POS_LIMIT_RANGE[1];
          degree = degree || 0;
          newTop = maxValue * degree / HUE_WHEEL_MAX - absMin;
          this._moveHueHandle(newTop, silent);
        };
        Slider.prototype._moveHueByPosition = function(y) {
          var offset = HUEBAR_POS_LIMIT_RANGE[0];
          this._moveHueHandle(y + offset);
        };
        Slider.prototype.getHue = function() {
          var handle = this.huebarHandleElement;
          var position = svgvml.getTranslateXY(handle);
          var absMin, maxValue;
          absMin = Math.abs(HUEBAR_POS_LIMIT_RANGE[0]);
          maxValue = absMin + HUEBAR_POS_LIMIT_RANGE[1];
          return (position[0] + absMin) * HUE_WHEEL_MAX / maxValue;
        };
        Slider.prototype.getHSV = function() {
          var sv = this.getSaturationAndValue();
          var h = this.getHue();
          return [h].concat(sv);
        };
        Slider.prototype.getRGB = function() {
          return colorUtil.hsvToRGB.apply(null, this.getHSV());
        };
        Slider.prototype._prepareColorSliderForMouseEvent = function(event) {
          var options = this.options;
          var sliderPart = closest(event.target, "." + options.cssPrefix + "slider-part");
          var cache;
          cache = this._dragDataCache = {
            isColorSlider: hasClass(sliderPart, options.cssPrefix + "slider-left"),
            parentElement: sliderPart
          };
          return cache;
        };
        Slider.prototype._onClick = function(clickEvent) {
          var cache = this._prepareColorSliderForMouseEvent(clickEvent);
          var mousePos = getMousePosition(clickEvent.originEvent, cache.parentElement);
          if (cache.isColorSlider) {
            this._moveColorSliderByPosition(mousePos[0], mousePos[1]);
          } else {
            this._moveHueByPosition(mousePos[1]);
          }
          this._dragDataCache = null;
        };
        Slider.prototype._onDragStart = function(dragStartEvent) {
          this._prepareColorSliderForMouseEvent(dragStartEvent);
        };
        Slider.prototype._onDrag = function(dragEvent) {
          var cache = this._dragDataCache;
          var mousePos = getMousePosition(dragEvent.originEvent, cache.parentElement);
          if (cache.isColorSlider) {
            this._moveColorSliderByPosition(mousePos[0], mousePos[1]);
          } else {
            this._moveHueByPosition(mousePos[1]);
          }
        };
        Slider.prototype._onDragEnd = function() {
          this._dragDataCache = null;
        };
        CustomEvents.mixin(Slider);
        module2.exports = Slider;
      },
      function(module2, exports2, __webpack_require__) {
        var isOldBrowser = __webpack_require__(4).isOldBrowser;
        var PARSE_TRANSLATE_NUM_REGEX = /[\.\-0-9]+/g;
        var SVG_HUE_HANDLE_RIGHT_POS = -6;
        var svgvml = {
          getTranslateXY: function(obj) {
            var temp;
            if (isOldBrowser) {
              temp = obj.style;
              return [parseFloat(temp.top), parseFloat(temp.left)];
            }
            temp = obj.getAttribute("transform");
            if (!temp) {
              return [0, 0];
            }
            temp = temp.match(PARSE_TRANSLATE_NUM_REGEX);
            return [parseFloat(temp[1]), parseFloat(temp[0])];
          },
          setTranslateXY: function(obj, x, y) {
            if (isOldBrowser) {
              obj.style.left = x + "px";
              obj.style.top = y + "px";
            } else {
              obj.setAttribute("transform", "translate(" + x + "," + y + ")");
            }
          },
          setTranslateY: function(obj, y) {
            if (isOldBrowser) {
              obj.style.top = y + "px";
            } else {
              obj.setAttribute("transform", "translate(" + SVG_HUE_HANDLE_RIGHT_POS + "," + y + ")");
            }
          },
          setStrokeColor: function(obj, colorStr) {
            if (isOldBrowser) {
              obj.strokecolor = colorStr;
            } else {
              obj.setAttribute("stroke", colorStr);
            }
          },
          setGradientColorStop: function(obj, colorStr) {
            if (isOldBrowser) {
              obj.color = colorStr;
            } else {
              obj.setAttribute("stop-color", colorStr);
            }
          }
        };
        module2.exports = svgvml;
      },
      function(module2, exports2, __webpack_require__) {
        __webpack_require__(34);
        module2.exports = __webpack_require__(35);
      },
      function(module2, exports2, __webpack_require__) {
      },
      function(module2, exports2, __webpack_require__) {
        var Collection = __webpack_require__(19);
        var View = __webpack_require__(8);
        var Drag = __webpack_require__(24);
        var create = __webpack_require__(48);
        var Palette = __webpack_require__(29);
        var Slider = __webpack_require__(31);
        var colorUtil = __webpack_require__(12);
        var svgvml = __webpack_require__(32);
        var colorPicker = {
          Collection,
          View,
          Drag,
          create,
          Palette,
          Slider,
          colorutil: colorUtil,
          svgvml
        };
        module2.exports = colorPicker;
      },
      function(module2, exports2, __webpack_require__) {
        function isNull(obj) {
          return obj === null;
        }
        module2.exports = isNull;
      },
      function(module2, exports2, __webpack_require__) {
        var isUndefined = __webpack_require__(3);
        var imagePing = __webpack_require__(38);
        var ms7days = 7 * 24 * 60 * 60 * 1e3;
        function isExpired(date) {
          var now = new Date().getTime();
          return now - date > ms7days;
        }
        function sendHostname(appName, trackingId) {
          var url = "https://www.google-analytics.com/collect";
          var hostname = location.hostname;
          var hitType = "event";
          var eventCategory = "use";
          var applicationKeyForStorage = "TOAST UI " + appName + " for " + hostname + ": Statistics";
          var date = window.localStorage.getItem(applicationKeyForStorage);
          if (!isUndefined(window.tui) && window.tui.usageStatistics === false) {
            return;
          }
          if (date && !isExpired(date)) {
            return;
          }
          window.localStorage.setItem(applicationKeyForStorage, new Date().getTime());
          setTimeout(function() {
            if (document.readyState === "interactive" || document.readyState === "complete") {
              imagePing(url, {
                v: 1,
                t: hitType,
                tid: trackingId,
                cid: hostname,
                dp: hostname,
                dh: appName,
                el: appName,
                ec: eventCategory
              });
            }
          }, 1e3);
        }
        module2.exports = sendHostname;
      },
      function(module2, exports2, __webpack_require__) {
        var forEachOwnProperties = __webpack_require__(7);
        function imagePing(url, trackingInfo) {
          var trackingElement = document.createElement("img");
          var queryString = "";
          forEachOwnProperties(trackingInfo, function(value, key) {
            queryString += "&" + key + "=" + value;
          });
          queryString = queryString.substring(1);
          trackingElement.src = url + "?" + queryString;
          trackingElement.style.display = "none";
          document.body.appendChild(trackingElement);
          document.body.removeChild(trackingElement);
          return trackingElement;
        }
        module2.exports = imagePing;
      },
      function(module2, exports2, __webpack_require__) {
        var forEach = __webpack_require__(2);
        var inArray = __webpack_require__(5);
        var getClass = __webpack_require__(23);
        var setClassName = __webpack_require__(40);
        function addClass(element) {
          var cssClass = Array.prototype.slice.call(arguments, 1);
          var classList = element.classList;
          var newClass = [];
          var origin;
          if (classList) {
            forEach(cssClass, function(name) {
              element.classList.add(name);
            });
            return;
          }
          origin = getClass(element);
          if (origin) {
            cssClass = [].concat(origin.split(/\s+/), cssClass);
          }
          forEach(cssClass, function(cls) {
            if (inArray(cls, newClass) < 0) {
              newClass.push(cls);
            }
          });
          setClassName(element, newClass);
        }
        module2.exports = addClass;
      },
      function(module2, exports2, __webpack_require__) {
        var isArray = __webpack_require__(1);
        var isUndefined = __webpack_require__(3);
        function setClassName(element, cssClass) {
          cssClass = isArray(cssClass) ? cssClass.join(" ") : cssClass;
          cssClass = cssClass.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
          if (isUndefined(element.className.baseVal)) {
            element.className = cssClass;
            return;
          }
          element.className.baseVal = cssClass;
        }
        module2.exports = setClassName;
      },
      function(module2, exports2, __webpack_require__) {
        function isNumber(obj) {
          return typeof obj === "number" || obj instanceof Number;
        }
        module2.exports = isNumber;
      },
      function(module2, exports2, __webpack_require__) {
        var on = __webpack_require__(14);
        var preventDefault = __webpack_require__(15);
        var setData = __webpack_require__(43);
        var testCSSProp = __webpack_require__(27);
        var SUPPORT_SELECTSTART = "onselectstart" in document;
        var KEY_PREVIOUS_USER_SELECT = "prevUserSelect";
        var userSelectProperty = testCSSProp([
          "userSelect",
          "WebkitUserSelect",
          "OUserSelect",
          "MozUserSelect",
          "msUserSelect"
        ]);
        function disableTextSelection(el) {
          if (!el) {
            el = document;
          }
          if (SUPPORT_SELECTSTART) {
            on(el, "selectstart", preventDefault);
          } else {
            el = el === document ? document.documentElement : el;
            setData(el, KEY_PREVIOUS_USER_SELECT, el.style[userSelectProperty]);
            el.style[userSelectProperty] = "none";
          }
        }
        module2.exports = disableTextSelection;
      },
      function(module2, exports2, __webpack_require__) {
        var convertToKebabCase = __webpack_require__(16);
        function setData(element, key, value) {
          if (element.dataset) {
            element.dataset[key] = value;
            return;
          }
          element.setAttribute("data-" + convertToKebabCase(key), value);
        }
        module2.exports = setData;
      },
      function(module2, exports2, __webpack_require__) {
        var off = __webpack_require__(17);
        var preventDefault = __webpack_require__(15);
        var getData = __webpack_require__(45);
        var removeData = __webpack_require__(46);
        var testCSSProp = __webpack_require__(27);
        var SUPPORT_SELECTSTART = "onselectstart" in document;
        var KEY_PREVIOUS_USER_SELECT = "prevUserSelect";
        var userSelectProperty = testCSSProp([
          "userSelect",
          "WebkitUserSelect",
          "OUserSelect",
          "MozUserSelect",
          "msUserSelect"
        ]);
        function enableTextSelection(el) {
          if (!el) {
            el = document;
          }
          if (SUPPORT_SELECTSTART) {
            off(el, "selectstart", preventDefault);
          } else {
            el = el === document ? document.documentElement : el;
            el.style[userSelectProperty] = getData(el, KEY_PREVIOUS_USER_SELECT) || "auto";
            removeData(el, KEY_PREVIOUS_USER_SELECT);
          }
        }
        module2.exports = enableTextSelection;
      },
      function(module2, exports2, __webpack_require__) {
        var convertToKebabCase = __webpack_require__(16);
        function getData(element, key) {
          if (element.dataset) {
            return element.dataset[key];
          }
          return element.getAttribute("data-" + convertToKebabCase(key));
        }
        module2.exports = getData;
      },
      function(module2, exports2, __webpack_require__) {
        var convertToKebabCase = __webpack_require__(16);
        function removeData(element, key) {
          if (element.dataset) {
            delete element.dataset[key];
            return;
          }
          element.removeAttribute("data-" + convertToKebabCase(key));
        }
        module2.exports = removeData;
      },
      function(module2, exports2, __webpack_require__) {
        var browser = __webpack_require__(22);
        var inArray = __webpack_require__(5);
        var primaryButton = ["0", "1", "3", "5", "7"];
        var secondaryButton = ["2", "6"];
        var wheelButton = ["4"];
        function getMouseButton(mouseEvent) {
          if (browser.msie && browser.version <= 8) {
            return getMouseButtonIE8AndEarlier(mouseEvent);
          }
          return mouseEvent.button;
        }
        function getMouseButtonIE8AndEarlier(mouseEvent) {
          var button = String(mouseEvent.button);
          if (inArray(button, primaryButton) > -1) {
            return 0;
          }
          if (inArray(button, secondaryButton) > -1) {
            return 2;
          }
          if (inArray(button, wheelButton) > -1) {
            return 1;
          }
          return null;
        }
        module2.exports = getMouseButton;
      },
      function(module2, exports2, __webpack_require__) {
        var CustomEvents = __webpack_require__(10);
        var extend = __webpack_require__(0);
        var util = __webpack_require__(4);
        var colorUtil = __webpack_require__(12);
        var Layout = __webpack_require__(49);
        var Palette = __webpack_require__(29);
        var Slider = __webpack_require__(31);
        var currentId = 0;
        function generateId() {
          currentId += 1;
          return currentId;
        }
        function ColorPicker(options) {
          var layout;
          if (!(this instanceof ColorPicker)) {
            return new ColorPicker(options);
          }
          options = this.options = extend({
            container: null,
            color: "#f8f8f8",
            preset: ["#181818", "#282828", "#383838", "#585858", "#b8b8b8", "#d8d8d8", "#e8e8e8", "#f8f8f8", "#ab4642", "#dc9656", "#f7ca88", "#a1b56c", "#86c1b9", "#7cafc2", "#ba8baf", "#a16946"],
            cssPrefix: "tui-colorpicker-",
            detailTxt: "Detail",
            id: generateId(),
            usageStatistics: true
          }, options);
          if (!options.container) {
            throw new Error("ColorPicker(): need container option.");
          }
          layout = this.layout = new Layout(options, options.container);
          this.palette = new Palette(options, layout.container);
          this.palette.on({
            _selectColor: this._onSelectColorInPalette,
            _toggleSlider: this._onToggleSlider
          }, this);
          this.slider = new Slider(options, layout.container);
          this.slider.on("_selectColor", this._onSelectColorInSlider, this);
          layout.addChild(this.palette);
          layout.addChild(this.slider);
          this.render(options.color);
          if (options.usageStatistics) {
            util.sendHostName();
          }
        }
        ColorPicker.prototype._onSelectColorInPalette = function(selectColorEventData) {
          var color = selectColorEventData.color;
          var opt = this.options;
          if (!colorUtil.isValidRGB(color) && color !== "") {
            this.render();
            return;
          }
          this.fire("selectColor", {
            color,
            origin: "palette"
          });
          if (opt.color === color) {
            return;
          }
          opt.color = color;
          this.render(color);
        };
        ColorPicker.prototype._onToggleSlider = function() {
          this.slider.toggle(!this.slider.isVisible());
        };
        ColorPicker.prototype._onSelectColorInSlider = function(selectColorEventData) {
          var color = selectColorEventData.color;
          var opt = this.options;
          this.fire("selectColor", {
            color,
            origin: "slider"
          });
          if (opt.color === color) {
            return;
          }
          opt.color = color;
          this.palette.render(color);
        };
        ColorPicker.prototype.setColor = function(hexStr) {
          if (!colorUtil.isValidRGB(hexStr)) {
            throw new Error("ColorPicker#setColor(): need valid hex string color value");
          }
          this.options.color = hexStr;
          this.render(hexStr);
        };
        ColorPicker.prototype.getColor = function() {
          return this.options.color;
        };
        ColorPicker.prototype.toggle = function(isShow) {
          this.layout.container.style.display = !!isShow ? "block" : "none";
        };
        ColorPicker.prototype.render = function(color) {
          this.layout.render(color || this.options.color);
        };
        ColorPicker.prototype.destroy = function() {
          this.layout.destroy();
          this.options.container.innerHTML = "";
          this.layout = this.slider = this.palette = this.options = null;
        };
        CustomEvents.mixin(ColorPicker);
        module2.exports = ColorPicker;
      },
      function(module2, exports2, __webpack_require__) {
        var extend = __webpack_require__(0);
        var inherit = __webpack_require__(18);
        var domUtil = __webpack_require__(9);
        var View = __webpack_require__(8);
        function Layout(options, container) {
          this.options = extend({
            cssPrefix: "tui-colorpicker-"
          }, options);
          container = domUtil.appendHTMLElement("div", container, this.options.cssPrefix + "container");
          View.call(this, options, container);
          this.render();
        }
        inherit(Layout, View);
        Layout.prototype.render = function(color) {
          this.recursive(function(view) {
            view.render(color);
          }, true);
        };
        module2.exports = Layout;
      },
      function(module2, exports2, __webpack_require__) {
        function createObject(obj) {
          function F() {
          }
          F.prototype = obj;
          return new F();
        }
        module2.exports = createObject;
      },
      function(module2, exports2, __webpack_require__) {
        var template = __webpack_require__(52);
        module2.exports = function(context) {
          var item = ['<li><input class="{{cssPrefix}}palette-button{{isSelected @this}}{{getItemClass @this}}" type="button"', "{{if isValidRGB @this}}", ' style="background-color:{{@this}};color:{{@this}}"', "{{/if}}", ' title="{{@this}}" value="{{@this}}" /></li>'].join("");
          var layout = ['<ul class="{{cssPrefix}}clearfix">', "{{each preset}}", item, "{{/each}}", "</ul>", '<div class="{{cssPrefix}}clearfix" style="overflow:hidden">', '<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />', '<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />', '<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>', "</div>"].join("\n");
          return template(layout, context);
        };
      },
      function(module2, exports2, __webpack_require__) {
        var inArray = __webpack_require__(5);
        var forEach = __webpack_require__(2);
        var isArray = __webpack_require__(1);
        var isString = __webpack_require__(11);
        var extend = __webpack_require__(0);
        var EXPRESSION_REGEXP = /{{\s?|\s?}}/g;
        var BRACKET_NOTATION_REGEXP = /^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/;
        var BRACKET_REGEXP = /\[\s?|\s?\]/;
        var DOT_NOTATION_REGEXP = /^[a-zA-Z_]+\.[a-zA-Z_]+$/;
        var DOT_REGEXP = /\./;
        var STRING_NOTATION_REGEXP = /^["']\w+["']$/;
        var STRING_REGEXP = /"|'/g;
        var NUMBER_REGEXP = /^-?\d+\.?\d*$/;
        var EXPRESSION_INTERVAL = 2;
        var BLOCK_HELPERS = {
          "if": handleIf,
          "each": handleEach,
          "with": handleWith
        };
        var isValidSplit = "a".split(/a/).length === 3;
        var splitByRegExp = function() {
          if (isValidSplit) {
            return function(text, regexp) {
              return text.split(regexp);
            };
          }
          return function(text, regexp) {
            var result = [];
            var prevIndex = 0;
            var match, index;
            if (!regexp.global) {
              regexp = new RegExp(regexp, "g");
            }
            match = regexp.exec(text);
            while (match !== null) {
              index = match.index;
              result.push(text.slice(prevIndex, index));
              prevIndex = index + match[0].length;
              match = regexp.exec(text);
            }
            result.push(text.slice(prevIndex));
            return result;
          };
        }();
        function getValueFromContext(exp, context) {
          var splitedExps;
          var value = context[exp];
          if (exp === "true") {
            value = true;
          } else if (exp === "false") {
            value = false;
          } else if (STRING_NOTATION_REGEXP.test(exp)) {
            value = exp.replace(STRING_REGEXP, "");
          } else if (BRACKET_NOTATION_REGEXP.test(exp)) {
            splitedExps = exp.split(BRACKET_REGEXP);
            value = getValueFromContext(splitedExps[0], context)[getValueFromContext(splitedExps[1], context)];
          } else if (DOT_NOTATION_REGEXP.test(exp)) {
            splitedExps = exp.split(DOT_REGEXP);
            value = getValueFromContext(splitedExps[0], context)[splitedExps[1]];
          } else if (NUMBER_REGEXP.test(exp)) {
            value = parseFloat(exp);
          }
          return value;
        }
        function extractElseif(ifExps, sourcesInsideBlock) {
          var exps = [ifExps];
          var sourcesInsideIf = [];
          var otherIfCount = 0;
          var start = 0;
          forEach(sourcesInsideBlock, function(source, index) {
            if (source.indexOf("if") === 0) {
              otherIfCount += 1;
            } else if (source === "/if") {
              otherIfCount -= 1;
            } else if (!otherIfCount && (source.indexOf("elseif") === 0 || source === "else")) {
              exps.push(source === "else" ? ["true"] : source.split(" ").slice(1));
              sourcesInsideIf.push(sourcesInsideBlock.slice(start, index));
              start = index + 1;
            }
          });
          sourcesInsideIf.push(sourcesInsideBlock.slice(start));
          return {
            exps,
            sourcesInsideIf
          };
        }
        function handleIf(exps, sourcesInsideBlock, context) {
          var analyzed = extractElseif(exps, sourcesInsideBlock);
          var result = false;
          var compiledSource = "";
          forEach(analyzed.exps, function(exp, index) {
            result = handleExpression(exp, context);
            if (result) {
              compiledSource = compile(analyzed.sourcesInsideIf[index], context);
            }
            return !result;
          });
          return compiledSource;
        }
        function handleEach(exps, sourcesInsideBlock, context) {
          var collection = handleExpression(exps, context);
          var additionalKey = isArray(collection) ? "@index" : "@key";
          var additionalContext = {};
          var result = "";
          forEach(collection, function(item, key) {
            additionalContext[additionalKey] = key;
            additionalContext["@this"] = item;
            extend(context, additionalContext);
            result += compile(sourcesInsideBlock.slice(), context);
          });
          return result;
        }
        function handleWith(exps, sourcesInsideBlock, context) {
          var asIndex = inArray("as", exps);
          var alias = exps[asIndex + 1];
          var result = handleExpression(exps.slice(0, asIndex), context);
          var additionalContext = {};
          additionalContext[alias] = result;
          return compile(sourcesInsideBlock, extend(context, additionalContext)) || "";
        }
        function extractSourcesInsideBlock(sources, start, end) {
          var sourcesInsideBlock = sources.splice(start + 1, end - start);
          sourcesInsideBlock.pop();
          return sourcesInsideBlock;
        }
        function handleBlockHelper(helperKeyword, sourcesToEnd, context) {
          var executeBlockHelper = BLOCK_HELPERS[helperKeyword];
          var helperCount = 1;
          var startBlockIndex = 0;
          var endBlockIndex;
          var index = startBlockIndex + EXPRESSION_INTERVAL;
          var expression = sourcesToEnd[index];
          while (helperCount && isString(expression)) {
            if (expression.indexOf(helperKeyword) === 0) {
              helperCount += 1;
            } else if (expression.indexOf("/" + helperKeyword) === 0) {
              helperCount -= 1;
              endBlockIndex = index;
            }
            index += EXPRESSION_INTERVAL;
            expression = sourcesToEnd[index];
          }
          if (helperCount) {
            throw Error(helperKeyword + " needs {{/" + helperKeyword + "}} expression.");
          }
          sourcesToEnd[startBlockIndex] = executeBlockHelper(sourcesToEnd[startBlockIndex].split(" ").slice(1), extractSourcesInsideBlock(sourcesToEnd, startBlockIndex, endBlockIndex), context);
          return sourcesToEnd;
        }
        function handleExpression(exps, context) {
          var result = getValueFromContext(exps[0], context);
          if (result instanceof Function) {
            return executeFunction(result, exps.slice(1), context);
          }
          return result;
        }
        function executeFunction(helper, argExps, context) {
          var args = [];
          forEach(argExps, function(exp) {
            args.push(getValueFromContext(exp, context));
          });
          return helper.apply(null, args);
        }
        function compile(sources, context) {
          var index = 1;
          var expression = sources[index];
          var exps, firstExp, result;
          while (isString(expression)) {
            exps = expression.split(" ");
            firstExp = exps[0];
            if (BLOCK_HELPERS[firstExp]) {
              result = handleBlockHelper(firstExp, sources.splice(index, sources.length - index), context);
              sources = sources.concat(result);
            } else {
              sources[index] = handleExpression(exps, context);
            }
            index += EXPRESSION_INTERVAL;
            expression = sources[index];
          }
          return sources.join("");
        }
        function template(text, context) {
          return compile(splitByRegExp(text, EXPRESSION_REGEXP), context);
        }
        module2.exports = template;
      },
      function(module2, exports2, __webpack_require__) {
        var isArray = __webpack_require__(1);
        function getMousePosition(position, relativeElement) {
          var positionArray = isArray(position);
          var clientX = positionArray ? position[0] : position.clientX;
          var clientY = positionArray ? position[1] : position.clientY;
          var rect;
          if (!relativeElement) {
            return [clientX, clientY];
          }
          rect = relativeElement.getBoundingClientRect();
          return [
            clientX - rect.left - relativeElement.clientLeft,
            clientY - rect.top - relativeElement.clientTop
          ];
        }
        module2.exports = getMousePosition;
      },
      function(module2, exports2, __webpack_require__) {
        var matches = __webpack_require__(55);
        function closest(element, selector) {
          var parent = element.parentNode;
          if (matches(element, selector)) {
            return element;
          }
          while (parent && parent !== document) {
            if (matches(parent, selector)) {
              return parent;
            }
            parent = parent.parentNode;
          }
          return null;
        }
        module2.exports = closest;
      },
      function(module2, exports2, __webpack_require__) {
        var inArray = __webpack_require__(5);
        var toArray = __webpack_require__(56);
        var elProto = Element.prototype;
        var matchSelector = elProto.matches || elProto.webkitMatchesSelector || elProto.mozMatchesSelector || elProto.msMatchesSelector || function(selector) {
          var doc = this.document || this.ownerDocument;
          return inArray(this, toArray(doc.querySelectorAll(selector))) > -1;
        };
        function matches(element, selector) {
          return matchSelector.call(element, selector);
        }
        module2.exports = matches;
      },
      function(module2, exports2, __webpack_require__) {
        var forEachArray = __webpack_require__(6);
        function toArray(arrayLike) {
          var arr;
          try {
            arr = Array.prototype.slice.call(arrayLike);
          } catch (e) {
            arr = [];
            forEachArray(arrayLike, function(value) {
              arr.push(value);
            });
          }
          return arr;
        }
        module2.exports = toArray;
      },
      function(module2, exports2, __webpack_require__) {
        (function(global2) {
          var isOldBrowser = __webpack_require__(4).isOldBrowser;
          var layout = ['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>', '<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join("\n");
          var SVGSlider = ['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">', "<defs>", '<linearGradient id="{{cssPrefix}}svg-fill-color-{{id}}" x1="0%" y1="0%" x2="100%" y2="0%">', '<stop offset="0%" stop-color="rgb(255,255,255)" />', '<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />', "</linearGradient>", '<linearGradient id="{{cssPrefix}}svn-fill-black-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">', '<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />', '<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />', "</linearGradient>", "</defs>", '<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color-{{id}})"></rect>', '<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black-{{id}})"></rect>', '<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />', "</svg>"].join("\n");
          var VMLSlider = ['<div class="{{cssPrefix}}vml-slider">', '<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">', '<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />', "</v:rect>", '<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">', '<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />', "</v:rect>", '<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />', "</div>"].join("\n");
          var SVGHuebar = ['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">', "<defs>", '<linearGradient id="g-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">', '<stop offset="0%" stop-color="rgb(255,0,0)" />', '<stop offset="16.666%" stop-color="rgb(255,255,0)" />', '<stop offset="33.333%" stop-color="rgb(0,255,0)" />', '<stop offset="50%" stop-color="rgb(0,255,255)" />', '<stop offset="66.666%" stop-color="rgb(0,0,255)" />', '<stop offset="83.333%" stop-color="rgb(255,0,255)" />', '<stop offset="100%" stop-color="rgb(255,0,0)" />', "</linearGradient>", "</defs>", '<rect width="18px" height="100%" fill="url(#g-{{id}})"></rect>', '<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />', "</svg>"].join("\n");
          var VMLHuebar = ['<div class="{{cssPrefix}}vml-huebar">', '<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">', '<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />', "</v:rect>", '<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />', "</div>"].join("\n");
          if (isOldBrowser) {
            global2.document.namespaces.add("v", "urn:schemas-microsoft-com:vml");
          }
          module2.exports = {
            layout,
            slider: isOldBrowser ? VMLSlider : SVGSlider,
            huebar: isOldBrowser ? VMLHuebar : SVGHuebar
          };
        }).call(this, __webpack_require__(25));
      }
    ]);
  });
})(tuiColorPicker);
/*!
 * TOAST UI ImageEditor
 * @version 3.15.2
 * @author NHN. FE Development Team <dl_javascript@nhn.com>
 * @license MIT
 */
(function(module, exports) {
  (function webpackUniversalModuleDefinition(root, factory) {
    module.exports = factory(tuiCodeSnippet.exports, tuiColorPicker.exports);
  })(self, function(__WEBPACK_EXTERNAL_MODULE__624__, __WEBPACK_EXTERNAL_MODULE__4858__) {
    return function() {
      var __webpack_modules__ = {
        2777: function(__unused_webpack_module, exports2, __webpack_require__2) {
          /*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */
          var fabric = fabric || { version: "4.6.0" };
          {
            exports2.fabric = fabric;
          }
          if (typeof document !== "undefined" && typeof window !== "undefined") {
            if (document instanceof (typeof HTMLDocument !== "undefined" ? HTMLDocument : Document)) {
              fabric.document = document;
            } else {
              fabric.document = document.implementation.createHTMLDocument("");
            }
            fabric.window = window;
          } else {
            var jsdom = __webpack_require__2(4960);
            var virtualWindow = new jsdom.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"), {
              features: {
                FetchExternalResources: ["img"]
              },
              resources: "usable"
            }).window;
            fabric.document = virtualWindow.document;
            fabric.jsdomImplForWrapper = __webpack_require__2(6759).implForWrapper;
            fabric.nodeCanvas = __webpack_require__2(6272).Canvas;
            fabric.window = virtualWindow;
            DOMParser = fabric.window.DOMParser;
          }
          fabric.isTouchSupported = "ontouchstart" in fabric.window || "ontouchstart" in fabric.document || fabric.window && fabric.window.navigator && fabric.window.navigator.maxTouchPoints > 0;
          fabric.isLikelyNode = typeof Buffer !== "undefined" && typeof window === "undefined";
          fabric.SHARED_ATTRIBUTES = [
            "display",
            "transform",
            "fill",
            "fill-opacity",
            "fill-rule",
            "opacity",
            "stroke",
            "stroke-dasharray",
            "stroke-linecap",
            "stroke-dashoffset",
            "stroke-linejoin",
            "stroke-miterlimit",
            "stroke-opacity",
            "stroke-width",
            "id",
            "paint-order",
            "vector-effect",
            "instantiated_by_use",
            "clip-path"
          ];
          fabric.DPI = 96;
          fabric.reNum = "(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)";
          fabric.commaWsp = "(?:\\s+,?\\s*|,\\s*)";
          fabric.rePathCommand = /([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig;
          fabric.reNonWord = /[ \n\.,;!\?\-]/;
          fabric.fontPaths = {};
          fabric.iMatrix = [1, 0, 0, 1, 0, 0];
          fabric.svgNS = "http://www.w3.org/2000/svg";
          fabric.perfLimitSizeTotal = 2097152;
          fabric.maxCacheSideLimit = 4096;
          fabric.minCacheSideLimit = 256;
          fabric.charWidthsCache = {};
          fabric.textureSize = 2048;
          fabric.disableStyleCopyPaste = false;
          fabric.enableGLFiltering = true;
          fabric.devicePixelRatio = fabric.window.devicePixelRatio || fabric.window.webkitDevicePixelRatio || fabric.window.mozDevicePixelRatio || 1;
          fabric.browserShadowBlurConstant = 1;
          fabric.arcToSegmentsCache = {};
          fabric.boundsOfCurveCache = {};
          fabric.cachesBoundsOfCurve = true;
          fabric.forceGLPutImageData = false;
          fabric.initFilterBackend = function() {
            if (fabric.enableGLFiltering && fabric.isWebglSupported && fabric.isWebglSupported(fabric.textureSize)) {
              console.log("max texture size: " + fabric.maxTextureSize);
              return new fabric.WebglFilterBackend({ tileSize: fabric.textureSize });
            } else if (fabric.Canvas2dFilterBackend) {
              return new fabric.Canvas2dFilterBackend();
            }
          };
          if (typeof document !== "undefined" && typeof window !== "undefined") {
            window.fabric = fabric;
          }
          (function() {
            function _removeEventListener(eventName, handler) {
              if (!this.__eventListeners[eventName]) {
                return;
              }
              var eventListener = this.__eventListeners[eventName];
              if (handler) {
                eventListener[eventListener.indexOf(handler)] = false;
              } else {
                fabric.util.array.fill(eventListener, false);
              }
            }
            function on(eventName, handler) {
              if (!this.__eventListeners) {
                this.__eventListeners = {};
              }
              if (arguments.length === 1) {
                for (var prop in eventName) {
                  this.on(prop, eventName[prop]);
                }
              } else {
                if (!this.__eventListeners[eventName]) {
                  this.__eventListeners[eventName] = [];
                }
                this.__eventListeners[eventName].push(handler);
              }
              return this;
            }
            function _once(eventName, handler) {
              var _handler = function() {
                handler.apply(this, arguments);
                this.off(eventName, _handler);
              }.bind(this);
              this.on(eventName, _handler);
            }
            function once(eventName, handler) {
              if (arguments.length === 1) {
                for (var prop in eventName) {
                  _once.call(this, prop, eventName[prop]);
                }
              } else {
                _once.call(this, eventName, handler);
              }
              return this;
            }
            function off(eventName, handler) {
              if (!this.__eventListeners) {
                return this;
              }
              if (arguments.length === 0) {
                for (eventName in this.__eventListeners) {
                  _removeEventListener.call(this, eventName);
                }
              } else if (arguments.length === 1 && typeof arguments[0] === "object") {
                for (var prop in eventName) {
                  _removeEventListener.call(this, prop, eventName[prop]);
                }
              } else {
                _removeEventListener.call(this, eventName, handler);
              }
              return this;
            }
            function fire(eventName, options) {
              if (!this.__eventListeners) {
                return this;
              }
              var listenersForEvent = this.__eventListeners[eventName];
              if (!listenersForEvent) {
                return this;
              }
              for (var i = 0, len = listenersForEvent.length; i < len; i++) {
                listenersForEvent[i] && listenersForEvent[i].call(this, options || {});
              }
              this.__eventListeners[eventName] = listenersForEvent.filter(function(value) {
                return value !== false;
              });
              return this;
            }
            fabric.Observable = {
              fire,
              on,
              once,
              off
            };
          })();
          fabric.Collection = {
            _objects: [],
            add: function() {
              this._objects.push.apply(this._objects, arguments);
              if (this._onObjectAdded) {
                for (var i = 0, length = arguments.length; i < length; i++) {
                  this._onObjectAdded(arguments[i]);
                }
              }
              this.renderOnAddRemove && this.requestRenderAll();
              return this;
            },
            insertAt: function(object, index, nonSplicing) {
              var objects = this._objects;
              if (nonSplicing) {
                objects[index] = object;
              } else {
                objects.splice(index, 0, object);
              }
              this._onObjectAdded && this._onObjectAdded(object);
              this.renderOnAddRemove && this.requestRenderAll();
              return this;
            },
            remove: function() {
              var objects = this._objects, index, somethingRemoved = false;
              for (var i = 0, length = arguments.length; i < length; i++) {
                index = objects.indexOf(arguments[i]);
                if (index !== -1) {
                  somethingRemoved = true;
                  objects.splice(index, 1);
                  this._onObjectRemoved && this._onObjectRemoved(arguments[i]);
                }
              }
              this.renderOnAddRemove && somethingRemoved && this.requestRenderAll();
              return this;
            },
            forEachObject: function(callback, context) {
              var objects = this.getObjects();
              for (var i = 0, len = objects.length; i < len; i++) {
                callback.call(context, objects[i], i, objects);
              }
              return this;
            },
            getObjects: function(type) {
              if (typeof type === "undefined") {
                return this._objects.concat();
              }
              return this._objects.filter(function(o) {
                return o.type === type;
              });
            },
            item: function(index) {
              return this._objects[index];
            },
            isEmpty: function() {
              return this._objects.length === 0;
            },
            size: function() {
              return this._objects.length;
            },
            contains: function(object, deep) {
              if (this._objects.indexOf(object) > -1) {
                return true;
              } else if (deep) {
                return this._objects.some(function(obj) {
                  return typeof obj.contains === "function" && obj.contains(object, true);
                });
              }
              return false;
            },
            complexity: function() {
              return this._objects.reduce(function(memo, current) {
                memo += current.complexity ? current.complexity() : 0;
                return memo;
              }, 0);
            }
          };
          fabric.CommonMethods = {
            _setOptions: function(options) {
              for (var prop in options) {
                this.set(prop, options[prop]);
              }
            },
            _initGradient: function(filler, property) {
              if (filler && filler.colorStops && !(filler instanceof fabric.Gradient)) {
                this.set(property, new fabric.Gradient(filler));
              }
            },
            _initPattern: function(filler, property, callback) {
              if (filler && filler.source && !(filler instanceof fabric.Pattern)) {
                this.set(property, new fabric.Pattern(filler, callback));
              } else {
                callback && callback();
              }
            },
            _setObject: function(obj) {
              for (var prop in obj) {
                this._set(prop, obj[prop]);
              }
            },
            set: function(key, value) {
              if (typeof key === "object") {
                this._setObject(key);
              } else {
                this._set(key, value);
              }
              return this;
            },
            _set: function(key, value) {
              this[key] = value;
            },
            toggle: function(property) {
              var value = this.get(property);
              if (typeof value === "boolean") {
                this.set(property, !value);
              }
              return this;
            },
            get: function(property) {
              return this[property];
            }
          };
          (function(global2) {
            var sqrt = Math.sqrt, atan2 = Math.atan2, pow = Math.pow, PiBy180 = Math.PI / 180, PiBy2 = Math.PI / 2;
            fabric.util = {
              cos: function(angle) {
                if (angle === 0) {
                  return 1;
                }
                if (angle < 0) {
                  angle = -angle;
                }
                var angleSlice = angle / PiBy2;
                switch (angleSlice) {
                  case 1:
                  case 3:
                    return 0;
                  case 2:
                    return -1;
                }
                return Math.cos(angle);
              },
              sin: function(angle) {
                if (angle === 0) {
                  return 0;
                }
                var angleSlice = angle / PiBy2, sign = 1;
                if (angle < 0) {
                  sign = -1;
                }
                switch (angleSlice) {
                  case 1:
                    return sign;
                  case 2:
                    return 0;
                  case 3:
                    return -sign;
                }
                return Math.sin(angle);
              },
              removeFromArray: function(array, value) {
                var idx = array.indexOf(value);
                if (idx !== -1) {
                  array.splice(idx, 1);
                }
                return array;
              },
              getRandomInt: function(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
              },
              degreesToRadians: function(degrees) {
                return degrees * PiBy180;
              },
              radiansToDegrees: function(radians) {
                return radians / PiBy180;
              },
              rotatePoint: function(point, origin, radians) {
                var newPoint = new fabric.Point(point.x - origin.x, point.y - origin.y), v = fabric.util.rotateVector(newPoint, radians);
                return new fabric.Point(v.x, v.y).addEquals(origin);
              },
              rotateVector: function(vector, radians) {
                var sin = fabric.util.sin(radians), cos = fabric.util.cos(radians), rx = vector.x * cos - vector.y * sin, ry = vector.x * sin + vector.y * cos;
                return {
                  x: rx,
                  y: ry
                };
              },
              transformPoint: function(p, t, ignoreOffset) {
                if (ignoreOffset) {
                  return new fabric.Point(t[0] * p.x + t[2] * p.y, t[1] * p.x + t[3] * p.y);
                }
                return new fabric.Point(t[0] * p.x + t[2] * p.y + t[4], t[1] * p.x + t[3] * p.y + t[5]);
              },
              makeBoundingBoxFromPoints: function(points, transform) {
                if (transform) {
                  for (var i = 0; i < points.length; i++) {
                    points[i] = fabric.util.transformPoint(points[i], transform);
                  }
                }
                var xPoints = [points[0].x, points[1].x, points[2].x, points[3].x], minX = fabric.util.array.min(xPoints), maxX = fabric.util.array.max(xPoints), width = maxX - minX, yPoints = [points[0].y, points[1].y, points[2].y, points[3].y], minY = fabric.util.array.min(yPoints), maxY = fabric.util.array.max(yPoints), height = maxY - minY;
                return {
                  left: minX,
                  top: minY,
                  width,
                  height
                };
              },
              invertTransform: function(t) {
                var a = 1 / (t[0] * t[3] - t[1] * t[2]), r = [a * t[3], -a * t[1], -a * t[2], a * t[0]], o = fabric.util.transformPoint({ x: t[4], y: t[5] }, r, true);
                r[4] = -o.x;
                r[5] = -o.y;
                return r;
              },
              toFixed: function(number, fractionDigits) {
                return parseFloat(Number(number).toFixed(fractionDigits));
              },
              parseUnit: function(value, fontSize) {
                var unit = /\D{0,2}$/.exec(value), number = parseFloat(value);
                if (!fontSize) {
                  fontSize = fabric.Text.DEFAULT_SVG_FONT_SIZE;
                }
                switch (unit[0]) {
                  case "mm":
                    return number * fabric.DPI / 25.4;
                  case "cm":
                    return number * fabric.DPI / 2.54;
                  case "in":
                    return number * fabric.DPI;
                  case "pt":
                    return number * fabric.DPI / 72;
                  case "pc":
                    return number * fabric.DPI / 72 * 12;
                  case "em":
                    return number * fontSize;
                  default:
                    return number;
                }
              },
              falseFunction: function() {
                return false;
              },
              getKlass: function(type, namespace) {
                type = fabric.util.string.camelize(type.charAt(0).toUpperCase() + type.slice(1));
                return fabric.util.resolveNamespace(namespace)[type];
              },
              getSvgAttributes: function(type) {
                var attributes = [
                  "instantiated_by_use",
                  "style",
                  "id",
                  "class"
                ];
                switch (type) {
                  case "linearGradient":
                    attributes = attributes.concat(["x1", "y1", "x2", "y2", "gradientUnits", "gradientTransform"]);
                    break;
                  case "radialGradient":
                    attributes = attributes.concat(["gradientUnits", "gradientTransform", "cx", "cy", "r", "fx", "fy", "fr"]);
                    break;
                  case "stop":
                    attributes = attributes.concat(["offset", "stop-color", "stop-opacity"]);
                    break;
                }
                return attributes;
              },
              resolveNamespace: function(namespace) {
                if (!namespace) {
                  return fabric;
                }
                var parts = namespace.split("."), len = parts.length, i, obj = global2 || fabric.window;
                for (i = 0; i < len; ++i) {
                  obj = obj[parts[i]];
                }
                return obj;
              },
              loadImage: function(url, callback, context, crossOrigin) {
                if (!url) {
                  callback && callback.call(context, url);
                  return;
                }
                var img = fabric.util.createImage();
                var onLoadCallback = function() {
                  callback && callback.call(context, img, false);
                  img = img.onload = img.onerror = null;
                };
                img.onload = onLoadCallback;
                img.onerror = function() {
                  fabric.log("Error loading " + img.src);
                  callback && callback.call(context, null, true);
                  img = img.onload = img.onerror = null;
                };
                if (url.indexOf("data") !== 0 && crossOrigin !== void 0 && crossOrigin !== null) {
                  img.crossOrigin = crossOrigin;
                }
                if (url.substring(0, 14) === "data:image/svg") {
                  img.onload = null;
                  fabric.util.loadImageInDom(img, onLoadCallback);
                }
                img.src = url;
              },
              loadImageInDom: function(img, onLoadCallback) {
                var div = fabric.document.createElement("div");
                div.style.width = div.style.height = "1px";
                div.style.left = div.style.top = "-100%";
                div.style.position = "absolute";
                div.appendChild(img);
                fabric.document.querySelector("body").appendChild(div);
                img.onload = function() {
                  onLoadCallback();
                  div.parentNode.removeChild(div);
                  div = null;
                };
              },
              enlivenObjects: function(objects, callback, namespace, reviver) {
                objects = objects || [];
                var enlivenedObjects = [], numLoadedObjects = 0, numTotalObjects = objects.length;
                function onLoaded() {
                  if (++numLoadedObjects === numTotalObjects) {
                    callback && callback(enlivenedObjects.filter(function(obj) {
                      return obj;
                    }));
                  }
                }
                if (!numTotalObjects) {
                  callback && callback(enlivenedObjects);
                  return;
                }
                objects.forEach(function(o, index) {
                  if (!o || !o.type) {
                    onLoaded();
                    return;
                  }
                  var klass = fabric.util.getKlass(o.type, namespace);
                  klass.fromObject(o, function(obj, error) {
                    error || (enlivenedObjects[index] = obj);
                    reviver && reviver(o, obj, error);
                    onLoaded();
                  });
                });
              },
              enlivenPatterns: function(patterns, callback) {
                patterns = patterns || [];
                function onLoaded() {
                  if (++numLoadedPatterns === numPatterns) {
                    callback && callback(enlivenedPatterns);
                  }
                }
                var enlivenedPatterns = [], numLoadedPatterns = 0, numPatterns = patterns.length;
                if (!numPatterns) {
                  callback && callback(enlivenedPatterns);
                  return;
                }
                patterns.forEach(function(p, index) {
                  if (p && p.source) {
                    new fabric.Pattern(p, function(pattern) {
                      enlivenedPatterns[index] = pattern;
                      onLoaded();
                    });
                  } else {
                    enlivenedPatterns[index] = p;
                    onLoaded();
                  }
                });
              },
              groupSVGElements: function(elements, options, path) {
                var object;
                if (elements && elements.length === 1) {
                  return elements[0];
                }
                if (options) {
                  if (options.width && options.height) {
                    options.centerPoint = {
                      x: options.width / 2,
                      y: options.height / 2
                    };
                  } else {
                    delete options.width;
                    delete options.height;
                  }
                }
                object = new fabric.Group(elements, options);
                if (typeof path !== "undefined") {
                  object.sourcePath = path;
                }
                return object;
              },
              populateWithProperties: function(source, destination, properties) {
                if (properties && Object.prototype.toString.call(properties) === "[object Array]") {
                  for (var i = 0, len = properties.length; i < len; i++) {
                    if (properties[i] in source) {
                      destination[properties[i]] = source[properties[i]];
                    }
                  }
                }
              },
              drawDashedLine: function(ctx, x, y, x2, y2, da) {
                var dx = x2 - x, dy = y2 - y, len = sqrt(dx * dx + dy * dy), rot = atan2(dy, dx), dc = da.length, di = 0, draw = true;
                ctx.save();
                ctx.translate(x, y);
                ctx.moveTo(0, 0);
                ctx.rotate(rot);
                x = 0;
                while (len > x) {
                  x += da[di++ % dc];
                  if (x > len) {
                    x = len;
                  }
                  ctx[draw ? "lineTo" : "moveTo"](x, 0);
                  draw = !draw;
                }
                ctx.restore();
              },
              createCanvasElement: function() {
                return fabric.document.createElement("canvas");
              },
              copyCanvasElement: function(canvas) {
                var newCanvas = fabric.util.createCanvasElement();
                newCanvas.width = canvas.width;
                newCanvas.height = canvas.height;
                newCanvas.getContext("2d").drawImage(canvas, 0, 0);
                return newCanvas;
              },
              toDataURL: function(canvasEl, format, quality) {
                return canvasEl.toDataURL("image/" + format, quality);
              },
              createImage: function() {
                return fabric.document.createElement("img");
              },
              multiplyTransformMatrices: function(a, b, is2x2) {
                return [
                  a[0] * b[0] + a[2] * b[1],
                  a[1] * b[0] + a[3] * b[1],
                  a[0] * b[2] + a[2] * b[3],
                  a[1] * b[2] + a[3] * b[3],
                  is2x2 ? 0 : a[0] * b[4] + a[2] * b[5] + a[4],
                  is2x2 ? 0 : a[1] * b[4] + a[3] * b[5] + a[5]
                ];
              },
              qrDecompose: function(a) {
                var angle = atan2(a[1], a[0]), denom = pow(a[0], 2) + pow(a[1], 2), scaleX = sqrt(denom), scaleY = (a[0] * a[3] - a[2] * a[1]) / scaleX, skewX = atan2(a[0] * a[2] + a[1] * a[3], denom);
                return {
                  angle: angle / PiBy180,
                  scaleX,
                  scaleY,
                  skewX: skewX / PiBy180,
                  skewY: 0,
                  translateX: a[4],
                  translateY: a[5]
                };
              },
              calcRotateMatrix: function(options) {
                if (!options.angle) {
                  return fabric.iMatrix.concat();
                }
                var theta = fabric.util.degreesToRadians(options.angle), cos = fabric.util.cos(theta), sin = fabric.util.sin(theta);
                return [cos, sin, -sin, cos, 0, 0];
              },
              calcDimensionsMatrix: function(options) {
                var scaleX = typeof options.scaleX === "undefined" ? 1 : options.scaleX, scaleY = typeof options.scaleY === "undefined" ? 1 : options.scaleY, scaleMatrix = [
                  options.flipX ? -scaleX : scaleX,
                  0,
                  0,
                  options.flipY ? -scaleY : scaleY,
                  0,
                  0
                ], multiply = fabric.util.multiplyTransformMatrices, degreesToRadians = fabric.util.degreesToRadians;
                if (options.skewX) {
                  scaleMatrix = multiply(scaleMatrix, [1, 0, Math.tan(degreesToRadians(options.skewX)), 1], true);
                }
                if (options.skewY) {
                  scaleMatrix = multiply(scaleMatrix, [1, Math.tan(degreesToRadians(options.skewY)), 0, 1], true);
                }
                return scaleMatrix;
              },
              composeMatrix: function(options) {
                var matrix = [1, 0, 0, 1, options.translateX || 0, options.translateY || 0], multiply = fabric.util.multiplyTransformMatrices;
                if (options.angle) {
                  matrix = multiply(matrix, fabric.util.calcRotateMatrix(options));
                }
                if (options.scaleX !== 1 || options.scaleY !== 1 || options.skewX || options.skewY || options.flipX || options.flipY) {
                  matrix = multiply(matrix, fabric.util.calcDimensionsMatrix(options));
                }
                return matrix;
              },
              resetObjectTransform: function(target) {
                target.scaleX = 1;
                target.scaleY = 1;
                target.skewX = 0;
                target.skewY = 0;
                target.flipX = false;
                target.flipY = false;
                target.rotate(0);
              },
              saveObjectTransform: function(target) {
                return {
                  scaleX: target.scaleX,
                  scaleY: target.scaleY,
                  skewX: target.skewX,
                  skewY: target.skewY,
                  angle: target.angle,
                  left: target.left,
                  flipX: target.flipX,
                  flipY: target.flipY,
                  top: target.top
                };
              },
              isTransparent: function(ctx, x, y, tolerance) {
                if (tolerance > 0) {
                  if (x > tolerance) {
                    x -= tolerance;
                  } else {
                    x = 0;
                  }
                  if (y > tolerance) {
                    y -= tolerance;
                  } else {
                    y = 0;
                  }
                }
                var _isTransparent = true, i, temp, imageData = ctx.getImageData(x, y, tolerance * 2 || 1, tolerance * 2 || 1), l = imageData.data.length;
                for (i = 3; i < l; i += 4) {
                  temp = imageData.data[i];
                  _isTransparent = temp <= 0;
                  if (_isTransparent === false) {
                    break;
                  }
                }
                imageData = null;
                return _isTransparent;
              },
              parsePreserveAspectRatioAttribute: function(attribute) {
                var meetOrSlice = "meet", alignX = "Mid", alignY = "Mid", aspectRatioAttrs = attribute.split(" "), align;
                if (aspectRatioAttrs && aspectRatioAttrs.length) {
                  meetOrSlice = aspectRatioAttrs.pop();
                  if (meetOrSlice !== "meet" && meetOrSlice !== "slice") {
                    align = meetOrSlice;
                    meetOrSlice = "meet";
                  } else if (aspectRatioAttrs.length) {
                    align = aspectRatioAttrs.pop();
                  }
                }
                alignX = align !== "none" ? align.slice(1, 4) : "none";
                alignY = align !== "none" ? align.slice(5, 8) : "none";
                return {
                  meetOrSlice,
                  alignX,
                  alignY
                };
              },
              clearFabricFontCache: function(fontFamily) {
                fontFamily = (fontFamily || "").toLowerCase();
                if (!fontFamily) {
                  fabric.charWidthsCache = {};
                } else if (fabric.charWidthsCache[fontFamily]) {
                  delete fabric.charWidthsCache[fontFamily];
                }
              },
              limitDimsByArea: function(ar, maximumArea) {
                var roughWidth = Math.sqrt(maximumArea * ar), perfLimitSizeY = Math.floor(maximumArea / roughWidth);
                return { x: Math.floor(roughWidth), y: perfLimitSizeY };
              },
              capValue: function(min, value, max) {
                return Math.max(min, Math.min(value, max));
              },
              findScaleToFit: function(source, destination) {
                return Math.min(destination.width / source.width, destination.height / source.height);
              },
              findScaleToCover: function(source, destination) {
                return Math.max(destination.width / source.width, destination.height / source.height);
              },
              matrixToSVG: function(transform) {
                return "matrix(" + transform.map(function(value) {
                  return fabric.util.toFixed(value, fabric.Object.NUM_FRACTION_DIGITS);
                }).join(" ") + ")";
              },
              removeTransformFromObject: function(object, transform) {
                var inverted = fabric.util.invertTransform(transform), finalTransform = fabric.util.multiplyTransformMatrices(inverted, object.calcOwnMatrix());
                fabric.util.applyTransformToObject(object, finalTransform);
              },
              addTransformToObject: function(object, transform) {
                fabric.util.applyTransformToObject(object, fabric.util.multiplyTransformMatrices(transform, object.calcOwnMatrix()));
              },
              applyTransformToObject: function(object, transform) {
                var options = fabric.util.qrDecompose(transform), center = new fabric.Point(options.translateX, options.translateY);
                object.flipX = false;
                object.flipY = false;
                object.set("scaleX", options.scaleX);
                object.set("scaleY", options.scaleY);
                object.skewX = options.skewX;
                object.skewY = options.skewY;
                object.angle = options.angle;
                object.setPositionByOrigin(center, "center", "center");
              },
              sizeAfterTransform: function(width, height, options) {
                var dimX = width / 2, dimY = height / 2, points = [
                  {
                    x: -dimX,
                    y: -dimY
                  },
                  {
                    x: dimX,
                    y: -dimY
                  },
                  {
                    x: -dimX,
                    y: dimY
                  },
                  {
                    x: dimX,
                    y: dimY
                  }
                ], transformMatrix = fabric.util.calcDimensionsMatrix(options), bbox = fabric.util.makeBoundingBoxFromPoints(points, transformMatrix);
                return {
                  x: bbox.width,
                  y: bbox.height
                };
              }
            };
          })(exports2);
          (function() {
            var _join = Array.prototype.join, commandLengths = {
              m: 2,
              l: 2,
              h: 1,
              v: 1,
              c: 6,
              s: 4,
              q: 4,
              t: 2,
              a: 7
            }, repeatedCommands = {
              m: "l",
              M: "L"
            };
            function segmentToBezier(th2, th3, cosTh, sinTh, rx, ry, cx1, cy1, mT, fromX, fromY) {
              var costh2 = fabric.util.cos(th2), sinth2 = fabric.util.sin(th2), costh3 = fabric.util.cos(th3), sinth3 = fabric.util.sin(th3), toX = cosTh * rx * costh3 - sinTh * ry * sinth3 + cx1, toY = sinTh * rx * costh3 + cosTh * ry * sinth3 + cy1, cp1X = fromX + mT * (-cosTh * rx * sinth2 - sinTh * ry * costh2), cp1Y = fromY + mT * (-sinTh * rx * sinth2 + cosTh * ry * costh2), cp2X = toX + mT * (cosTh * rx * sinth3 + sinTh * ry * costh3), cp2Y = toY + mT * (sinTh * rx * sinth3 - cosTh * ry * costh3);
              return [
                "C",
                cp1X,
                cp1Y,
                cp2X,
                cp2Y,
                toX,
                toY
              ];
            }
            function arcToSegments(toX, toY, rx, ry, large, sweep, rotateX) {
              var PI = Math.PI, th = rotateX * PI / 180, sinTh = fabric.util.sin(th), cosTh = fabric.util.cos(th), fromX = 0, fromY = 0;
              rx = Math.abs(rx);
              ry = Math.abs(ry);
              var px = -cosTh * toX * 0.5 - sinTh * toY * 0.5, py = -cosTh * toY * 0.5 + sinTh * toX * 0.5, rx2 = rx * rx, ry2 = ry * ry, py2 = py * py, px2 = px * px, pl = rx2 * ry2 - rx2 * py2 - ry2 * px2, root = 0;
              if (pl < 0) {
                var s = Math.sqrt(1 - pl / (rx2 * ry2));
                rx *= s;
                ry *= s;
              } else {
                root = (large === sweep ? -1 : 1) * Math.sqrt(pl / (rx2 * py2 + ry2 * px2));
              }
              var cx = root * rx * py / ry, cy = -root * ry * px / rx, cx1 = cosTh * cx - sinTh * cy + toX * 0.5, cy1 = sinTh * cx + cosTh * cy + toY * 0.5, mTheta = calcVectorAngle(1, 0, (px - cx) / rx, (py - cy) / ry), dtheta = calcVectorAngle((px - cx) / rx, (py - cy) / ry, (-px - cx) / rx, (-py - cy) / ry);
              if (sweep === 0 && dtheta > 0) {
                dtheta -= 2 * PI;
              } else if (sweep === 1 && dtheta < 0) {
                dtheta += 2 * PI;
              }
              var segments = Math.ceil(Math.abs(dtheta / PI * 2)), result = [], mDelta = dtheta / segments, mT = 8 / 3 * Math.sin(mDelta / 4) * Math.sin(mDelta / 4) / Math.sin(mDelta / 2), th3 = mTheta + mDelta;
              for (var i = 0; i < segments; i++) {
                result[i] = segmentToBezier(mTheta, th3, cosTh, sinTh, rx, ry, cx1, cy1, mT, fromX, fromY);
                fromX = result[i][5];
                fromY = result[i][6];
                mTheta = th3;
                th3 += mDelta;
              }
              return result;
            }
            function calcVectorAngle(ux, uy, vx, vy) {
              var ta = Math.atan2(uy, ux), tb = Math.atan2(vy, vx);
              if (tb >= ta) {
                return tb - ta;
              } else {
                return 2 * Math.PI - (ta - tb);
              }
            }
            function getBoundsOfCurve(x0, y0, x1, y1, x2, y2, x3, y3) {
              var argsString;
              if (fabric.cachesBoundsOfCurve) {
                argsString = _join.call(arguments);
                if (fabric.boundsOfCurveCache[argsString]) {
                  return fabric.boundsOfCurveCache[argsString];
                }
              }
              var sqrt = Math.sqrt, min = Math.min, max = Math.max, abs = Math.abs, tvalues = [], bounds = [[], []], a, b, c, t, t1, t2, b2ac, sqrtb2ac;
              b = 6 * x0 - 12 * x1 + 6 * x2;
              a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;
              c = 3 * x1 - 3 * x0;
              for (var i = 0; i < 2; ++i) {
                if (i > 0) {
                  b = 6 * y0 - 12 * y1 + 6 * y2;
                  a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;
                  c = 3 * y1 - 3 * y0;
                }
                if (abs(a) < 1e-12) {
                  if (abs(b) < 1e-12) {
                    continue;
                  }
                  t = -c / b;
                  if (0 < t && t < 1) {
                    tvalues.push(t);
                  }
                  continue;
                }
                b2ac = b * b - 4 * c * a;
                if (b2ac < 0) {
                  continue;
                }
                sqrtb2ac = sqrt(b2ac);
                t1 = (-b + sqrtb2ac) / (2 * a);
                if (0 < t1 && t1 < 1) {
                  tvalues.push(t1);
                }
                t2 = (-b - sqrtb2ac) / (2 * a);
                if (0 < t2 && t2 < 1) {
                  tvalues.push(t2);
                }
              }
              var x, y, j = tvalues.length, jlen = j, mt;
              while (j--) {
                t = tvalues[j];
                mt = 1 - t;
                x = mt * mt * mt * x0 + 3 * mt * mt * t * x1 + 3 * mt * t * t * x2 + t * t * t * x3;
                bounds[0][j] = x;
                y = mt * mt * mt * y0 + 3 * mt * mt * t * y1 + 3 * mt * t * t * y2 + t * t * t * y3;
                bounds[1][j] = y;
              }
              bounds[0][jlen] = x0;
              bounds[1][jlen] = y0;
              bounds[0][jlen + 1] = x3;
              bounds[1][jlen + 1] = y3;
              var result = [
                {
                  x: min.apply(null, bounds[0]),
                  y: min.apply(null, bounds[1])
                },
                {
                  x: max.apply(null, bounds[0]),
                  y: max.apply(null, bounds[1])
                }
              ];
              if (fabric.cachesBoundsOfCurve) {
                fabric.boundsOfCurveCache[argsString] = result;
              }
              return result;
            }
            function fromArcToBeziers(fx, fy, coords) {
              var rx = coords[1], ry = coords[2], rot = coords[3], large = coords[4], sweep = coords[5], tx = coords[6], ty = coords[7], segsNorm = arcToSegments(tx - fx, ty - fy, rx, ry, large, sweep, rot);
              for (var i = 0, len = segsNorm.length; i < len; i++) {
                segsNorm[i][1] += fx;
                segsNorm[i][2] += fy;
                segsNorm[i][3] += fx;
                segsNorm[i][4] += fy;
                segsNorm[i][5] += fx;
                segsNorm[i][6] += fy;
              }
              return segsNorm;
            }
            function makePathSimpler(path) {
              var x = 0, y = 0, len = path.length, x1 = 0, y1 = 0, current, i, converted, destinationPath = [], previous, controlX, controlY;
              for (i = 0; i < len; ++i) {
                converted = false;
                current = path[i].slice(0);
                switch (current[0]) {
                  case "l":
                    current[0] = "L";
                    current[1] += x;
                    current[2] += y;
                  case "L":
                    x = current[1];
                    y = current[2];
                    break;
                  case "h":
                    current[1] += x;
                  case "H":
                    current[0] = "L";
                    current[2] = y;
                    x = current[1];
                    break;
                  case "v":
                    current[1] += y;
                  case "V":
                    current[0] = "L";
                    y = current[1];
                    current[1] = x;
                    current[2] = y;
                    break;
                  case "m":
                    current[0] = "M";
                    current[1] += x;
                    current[2] += y;
                  case "M":
                    x = current[1];
                    y = current[2];
                    x1 = current[1];
                    y1 = current[2];
                    break;
                  case "c":
                    current[0] = "C";
                    current[1] += x;
                    current[2] += y;
                    current[3] += x;
                    current[4] += y;
                    current[5] += x;
                    current[6] += y;
                  case "C":
                    controlX = current[3];
                    controlY = current[4];
                    x = current[5];
                    y = current[6];
                    break;
                  case "s":
                    current[0] = "S";
                    current[1] += x;
                    current[2] += y;
                    current[3] += x;
                    current[4] += y;
                  case "S":
                    if (previous === "C") {
                      controlX = 2 * x - controlX;
                      controlY = 2 * y - controlY;
                    } else {
                      controlX = x;
                      controlY = y;
                    }
                    x = current[3];
                    y = current[4];
                    current[0] = "C";
                    current[5] = current[3];
                    current[6] = current[4];
                    current[3] = current[1];
                    current[4] = current[2];
                    current[1] = controlX;
                    current[2] = controlY;
                    controlX = current[3];
                    controlY = current[4];
                    break;
                  case "q":
                    current[0] = "Q";
                    current[1] += x;
                    current[2] += y;
                    current[3] += x;
                    current[4] += y;
                  case "Q":
                    controlX = current[1];
                    controlY = current[2];
                    x = current[3];
                    y = current[4];
                    break;
                  case "t":
                    current[0] = "T";
                    current[1] += x;
                    current[2] += y;
                  case "T":
                    if (previous === "Q") {
                      controlX = 2 * x - controlX;
                      controlY = 2 * y - controlY;
                    } else {
                      controlX = x;
                      controlY = y;
                    }
                    current[0] = "Q";
                    x = current[1];
                    y = current[2];
                    current[1] = controlX;
                    current[2] = controlY;
                    current[3] = x;
                    current[4] = y;
                    break;
                  case "a":
                    current[0] = "A";
                    current[6] += x;
                    current[7] += y;
                  case "A":
                    converted = true;
                    destinationPath = destinationPath.concat(fromArcToBeziers(x, y, current));
                    x = current[6];
                    y = current[7];
                    break;
                  case "z":
                  case "Z":
                    x = x1;
                    y = y1;
                    break;
                }
                if (!converted) {
                  destinationPath.push(current);
                }
                previous = current[0];
              }
              return destinationPath;
            }
            function calcLineLength(x1, y1, x2, y2) {
              return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));
            }
            function CB1(t) {
              return t * t * t;
            }
            function CB2(t) {
              return 3 * t * t * (1 - t);
            }
            function CB3(t) {
              return 3 * t * (1 - t) * (1 - t);
            }
            function CB4(t) {
              return (1 - t) * (1 - t) * (1 - t);
            }
            function getPointOnCubicBezierIterator(p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {
              return function(pct) {
                var c1 = CB1(pct), c2 = CB2(pct), c3 = CB3(pct), c4 = CB4(pct);
                return {
                  x: p4x * c1 + p3x * c2 + p2x * c3 + p1x * c4,
                  y: p4y * c1 + p3y * c2 + p2y * c3 + p1y * c4
                };
              };
            }
            function getTangentCubicIterator(p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {
              return function(pct) {
                var invT = 1 - pct, tangentX = 3 * invT * invT * (p2x - p1x) + 6 * invT * pct * (p3x - p2x) + 3 * pct * pct * (p4x - p3x), tangentY = 3 * invT * invT * (p2y - p1y) + 6 * invT * pct * (p3y - p2y) + 3 * pct * pct * (p4y - p3y);
                return Math.atan2(tangentY, tangentX);
              };
            }
            function QB1(t) {
              return t * t;
            }
            function QB2(t) {
              return 2 * t * (1 - t);
            }
            function QB3(t) {
              return (1 - t) * (1 - t);
            }
            function getPointOnQuadraticBezierIterator(p1x, p1y, p2x, p2y, p3x, p3y) {
              return function(pct) {
                var c1 = QB1(pct), c2 = QB2(pct), c3 = QB3(pct);
                return {
                  x: p3x * c1 + p2x * c2 + p1x * c3,
                  y: p3y * c1 + p2y * c2 + p1y * c3
                };
              };
            }
            function getTangentQuadraticIterator(p1x, p1y, p2x, p2y, p3x, p3y) {
              return function(pct) {
                var invT = 1 - pct, tangentX = 2 * invT * (p2x - p1x) + 2 * pct * (p3x - p2x), tangentY = 2 * invT * (p2y - p1y) + 2 * pct * (p3y - p2y);
                return Math.atan2(tangentY, tangentX);
              };
            }
            function pathIterator(iterator, x1, y1) {
              var tempP = { x: x1, y: y1 }, p, tmpLen = 0, perc;
              for (perc = 1; perc <= 100; perc += 1) {
                p = iterator(perc / 100);
                tmpLen += calcLineLength(tempP.x, tempP.y, p.x, p.y);
                tempP = p;
              }
              return tmpLen;
            }
            function findPercentageForDistance(segInfo, distance) {
              var perc = 0, tmpLen = 0, iterator = segInfo.iterator, tempP = { x: segInfo.x, y: segInfo.y }, p, nextLen, nextStep = 0.01, angleFinder = segInfo.angleFinder, lastPerc;
              while (tmpLen < distance && perc <= 1 && nextStep > 1e-4) {
                p = iterator(perc);
                lastPerc = perc;
                nextLen = calcLineLength(tempP.x, tempP.y, p.x, p.y);
                if (nextLen + tmpLen > distance) {
                  nextStep /= 2;
                  perc -= nextStep;
                } else {
                  tempP = p;
                  perc += nextStep;
                  tmpLen += nextLen;
                }
              }
              p.angle = angleFinder(lastPerc);
              return p;
            }
            function getPathSegmentsInfo(path) {
              var totalLength = 0, len = path.length, current, x1 = 0, y1 = 0, x2 = 0, y2 = 0, info = [], iterator, tempInfo, angleFinder;
              for (var i = 0; i < len; i++) {
                current = path[i];
                tempInfo = {
                  x: x1,
                  y: y1,
                  command: current[0]
                };
                switch (current[0]) {
                  case "M":
                    tempInfo.length = 0;
                    x2 = x1 = current[1];
                    y2 = y1 = current[2];
                    break;
                  case "L":
                    tempInfo.length = calcLineLength(x1, y1, current[1], current[2]);
                    x1 = current[1];
                    y1 = current[2];
                    break;
                  case "C":
                    iterator = getPointOnCubicBezierIterator(x1, y1, current[1], current[2], current[3], current[4], current[5], current[6]);
                    angleFinder = getTangentCubicIterator(x1, y1, current[1], current[2], current[3], current[4], current[5], current[6]);
                    tempInfo.iterator = iterator;
                    tempInfo.angleFinder = angleFinder;
                    tempInfo.length = pathIterator(iterator, x1, y1);
                    x1 = current[5];
                    y1 = current[6];
                    break;
                  case "Q":
                    iterator = getPointOnQuadraticBezierIterator(x1, y1, current[1], current[2], current[3], current[4]);
                    angleFinder = getTangentQuadraticIterator(x1, y1, current[1], current[2], current[3], current[4]);
                    tempInfo.iterator = iterator;
                    tempInfo.angleFinder = angleFinder;
                    tempInfo.length = pathIterator(iterator, x1, y1);
                    x1 = current[3];
                    y1 = current[4];
                    break;
                  case "Z":
                  case "z":
                    tempInfo.destX = x2;
                    tempInfo.destY = y2;
                    tempInfo.length = calcLineLength(x1, y1, x2, y2);
                    x1 = x2;
                    y1 = y2;
                    break;
                }
                totalLength += tempInfo.length;
                info.push(tempInfo);
              }
              info.push({ length: totalLength, x: x1, y: y1 });
              return info;
            }
            function getPointOnPath(path, distance, infos) {
              if (!infos) {
                infos = getPathSegmentsInfo(path);
              }
              var i = 0;
              while (distance - infos[i].length > 0 && i < infos.length - 2) {
                distance -= infos[i].length;
                i++;
              }
              var segInfo = infos[i], segPercent = distance / segInfo.length, command = segInfo.command, segment = path[i], info;
              switch (command) {
                case "M":
                  return { x: segInfo.x, y: segInfo.y, angle: 0 };
                case "Z":
                case "z":
                  info = new fabric.Point(segInfo.x, segInfo.y).lerp(new fabric.Point(segInfo.destX, segInfo.destY), segPercent);
                  info.angle = Math.atan2(segInfo.destY - segInfo.y, segInfo.destX - segInfo.x);
                  return info;
                case "L":
                  info = new fabric.Point(segInfo.x, segInfo.y).lerp(new fabric.Point(segment[1], segment[2]), segPercent);
                  info.angle = Math.atan2(segment[2] - segInfo.y, segment[1] - segInfo.x);
                  return info;
                case "C":
                  return findPercentageForDistance(segInfo, distance);
                case "Q":
                  return findPercentageForDistance(segInfo, distance);
              }
            }
            function parsePath(pathString) {
              var result = [], coords = [], currentPath, parsed, re = fabric.rePathCommand, rNumber = "[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*", rNumberCommaWsp = "(" + rNumber + ")" + fabric.commaWsp, rFlagCommaWsp = "([01])" + fabric.commaWsp + "?", rArcSeq = rNumberCommaWsp + "?" + rNumberCommaWsp + "?" + rNumberCommaWsp + rFlagCommaWsp + rFlagCommaWsp + rNumberCommaWsp + "?(" + rNumber + ")", regArcArgumentSequence = new RegExp(rArcSeq, "g"), match, coordsStr, path;
              if (!pathString || !pathString.match) {
                return result;
              }
              path = pathString.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);
              for (var i = 0, coordsParsed, len = path.length; i < len; i++) {
                currentPath = path[i];
                coordsStr = currentPath.slice(1).trim();
                coords.length = 0;
                var command = currentPath.charAt(0);
                coordsParsed = [command];
                if (command.toLowerCase() === "a") {
                  for (var args; args = regArcArgumentSequence.exec(coordsStr); ) {
                    for (var j = 1; j < args.length; j++) {
                      coords.push(args[j]);
                    }
                  }
                } else {
                  while (match = re.exec(coordsStr)) {
                    coords.push(match[0]);
                  }
                }
                for (var j = 0, jlen = coords.length; j < jlen; j++) {
                  parsed = parseFloat(coords[j]);
                  if (!isNaN(parsed)) {
                    coordsParsed.push(parsed);
                  }
                }
                var commandLength = commandLengths[command.toLowerCase()], repeatedCommand = repeatedCommands[command] || command;
                if (coordsParsed.length - 1 > commandLength) {
                  for (var k = 1, klen = coordsParsed.length; k < klen; k += commandLength) {
                    result.push([command].concat(coordsParsed.slice(k, k + commandLength)));
                    command = repeatedCommand;
                  }
                } else {
                  result.push(coordsParsed);
                }
              }
              return result;
            }
            function getSmoothPathFromPoints(points, correction) {
              var path = [], i, p1 = new fabric.Point(points[0].x, points[0].y), p2 = new fabric.Point(points[1].x, points[1].y), len = points.length, multSignX = 1, multSignY = 0, manyPoints = len > 2;
              correction = correction || 0;
              if (manyPoints) {
                multSignX = points[2].x < p2.x ? -1 : points[2].x === p2.x ? 0 : 1;
                multSignY = points[2].y < p2.y ? -1 : points[2].y === p2.y ? 0 : 1;
              }
              path.push(["M", p1.x - multSignX * correction, p1.y - multSignY * correction]);
              for (i = 1; i < len; i++) {
                if (!p1.eq(p2)) {
                  var midPoint = p1.midPointFrom(p2);
                  path.push(["Q", p1.x, p1.y, midPoint.x, midPoint.y]);
                }
                p1 = points[i];
                if (i + 1 < points.length) {
                  p2 = points[i + 1];
                }
              }
              if (manyPoints) {
                multSignX = p1.x > points[i - 2].x ? 1 : p1.x === points[i - 2].x ? 0 : -1;
                multSignY = p1.y > points[i - 2].y ? 1 : p1.y === points[i - 2].y ? 0 : -1;
              }
              path.push(["L", p1.x + multSignX * correction, p1.y + multSignY * correction]);
              return path;
            }
            function transformPath(path, transform, pathOffset) {
              if (pathOffset) {
                transform = fabric.util.multiplyTransformMatrices(transform, [1, 0, 0, 1, -pathOffset.x, -pathOffset.y]);
              }
              return path.map(function(pathSegment) {
                var newSegment = pathSegment.slice(0), point = {};
                for (var i = 1; i < pathSegment.length - 1; i += 2) {
                  point.x = pathSegment[i];
                  point.y = pathSegment[i + 1];
                  point = fabric.util.transformPoint(point, transform);
                  newSegment[i] = point.x;
                  newSegment[i + 1] = point.y;
                }
                return newSegment;
              });
            }
            function getBoundsOfArc(fx, fy, rx, ry, rot, large, sweep, tx, ty) {
              var fromX = 0, fromY = 0, bound, bounds = [], segs = arcToSegments(tx - fx, ty - fy, rx, ry, large, sweep, rot);
              for (var i = 0, len = segs.length; i < len; i++) {
                bound = getBoundsOfCurve(fromX, fromY, segs[i][1], segs[i][2], segs[i][3], segs[i][4], segs[i][5], segs[i][6]);
                bounds.push({ x: bound[0].x + fx, y: bound[0].y + fy });
                bounds.push({ x: bound[1].x + fx, y: bound[1].y + fy });
                fromX = segs[i][5];
                fromY = segs[i][6];
              }
              return bounds;
            }
            function drawArc(ctx, fx, fy, coords) {
              coords = coords.slice(0).unshift("X");
              var beziers = fromArcToBeziers(fx, fy, coords);
              beziers.forEach(function(bezier) {
                ctx.bezierCurveTo.apply(ctx, bezier.slice(1));
              });
            }
            fabric.util.joinPath = function(pathData) {
              return pathData.map(function(segment) {
                return segment.join(" ");
              }).join(" ");
            };
            fabric.util.parsePath = parsePath;
            fabric.util.makePathSimpler = makePathSimpler;
            fabric.util.getSmoothPathFromPoints = getSmoothPathFromPoints;
            fabric.util.getPathSegmentsInfo = getPathSegmentsInfo;
            fabric.util.getBoundsOfCurve = getBoundsOfCurve;
            fabric.util.getPointOnPath = getPointOnPath;
            fabric.util.transformPath = transformPath;
            fabric.util.fromArcToBeizers = fromArcToBeziers;
            fabric.util.getBoundsOfArc = getBoundsOfArc;
            fabric.util.drawArc = drawArc;
          })();
          (function() {
            var slice = Array.prototype.slice;
            function invoke(array, method) {
              var args = slice.call(arguments, 2), result = [];
              for (var i = 0, len = array.length; i < len; i++) {
                result[i] = args.length ? array[i][method].apply(array[i], args) : array[i][method].call(array[i]);
              }
              return result;
            }
            function max(array, byProperty) {
              return find(array, byProperty, function(value1, value2) {
                return value1 >= value2;
              });
            }
            function min(array, byProperty) {
              return find(array, byProperty, function(value1, value2) {
                return value1 < value2;
              });
            }
            function fill(array, value) {
              var k = array.length;
              while (k--) {
                array[k] = value;
              }
              return array;
            }
            function find(array, byProperty, condition) {
              if (!array || array.length === 0) {
                return;
              }
              var i = array.length - 1, result = byProperty ? array[i][byProperty] : array[i];
              if (byProperty) {
                while (i--) {
                  if (condition(array[i][byProperty], result)) {
                    result = array[i][byProperty];
                  }
                }
              } else {
                while (i--) {
                  if (condition(array[i], result)) {
                    result = array[i];
                  }
                }
              }
              return result;
            }
            fabric.util.array = {
              fill,
              invoke,
              min,
              max
            };
          })();
          (function() {
            function extend(destination, source, deep) {
              if (deep) {
                if (!fabric.isLikelyNode && source instanceof Element) {
                  destination = source;
                } else if (source instanceof Array) {
                  destination = [];
                  for (var i = 0, len = source.length; i < len; i++) {
                    destination[i] = extend({}, source[i], deep);
                  }
                } else if (source && typeof source === "object") {
                  for (var property in source) {
                    if (property === "canvas" || property === "group") {
                      destination[property] = null;
                    } else if (source.hasOwnProperty(property)) {
                      destination[property] = extend({}, source[property], deep);
                    }
                  }
                } else {
                  destination = source;
                }
              } else {
                for (var property in source) {
                  destination[property] = source[property];
                }
              }
              return destination;
            }
            function clone(object, deep) {
              return extend({}, object, deep);
            }
            fabric.util.object = {
              extend,
              clone
            };
            fabric.util.object.extend(fabric.util, fabric.Observable);
          })();
          (function() {
            function camelize(string) {
              return string.replace(/-+(.)?/g, function(match, character) {
                return character ? character.toUpperCase() : "";
              });
            }
            function capitalize(string, firstLetterOnly) {
              return string.charAt(0).toUpperCase() + (firstLetterOnly ? string.slice(1) : string.slice(1).toLowerCase());
            }
            function escapeXml(string) {
              return string.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&apos;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
            }
            function graphemeSplit(textstring) {
              var i = 0, chr, graphemes = [];
              for (i = 0, chr; i < textstring.length; i++) {
                if ((chr = getWholeChar(textstring, i)) === false) {
                  continue;
                }
                graphemes.push(chr);
              }
              return graphemes;
            }
            function getWholeChar(str, i) {
              var code = str.charCodeAt(i);
              if (isNaN(code)) {
                return "";
              }
              if (code < 55296 || code > 57343) {
                return str.charAt(i);
              }
              if (55296 <= code && code <= 56319) {
                if (str.length <= i + 1) {
                  throw "High surrogate without following low surrogate";
                }
                var next = str.charCodeAt(i + 1);
                if (56320 > next || next > 57343) {
                  throw "High surrogate without following low surrogate";
                }
                return str.charAt(i) + str.charAt(i + 1);
              }
              if (i === 0) {
                throw "Low surrogate without preceding high surrogate";
              }
              var prev = str.charCodeAt(i - 1);
              if (55296 > prev || prev > 56319) {
                throw "Low surrogate without preceding high surrogate";
              }
              return false;
            }
            fabric.util.string = {
              camelize,
              capitalize,
              escapeXml,
              graphemeSplit
            };
          })();
          (function() {
            var slice = Array.prototype.slice, emptyFunction = function() {
            }, IS_DONTENUM_BUGGY = function() {
              for (var p in { toString: 1 }) {
                if (p === "toString") {
                  return false;
                }
              }
              return true;
            }(), addMethods = function(klass, source, parent) {
              for (var property in source) {
                if (property in klass.prototype && typeof klass.prototype[property] === "function" && (source[property] + "").indexOf("callSuper") > -1) {
                  klass.prototype[property] = function(property2) {
                    return function() {
                      var superclass = this.constructor.superclass;
                      this.constructor.superclass = parent;
                      var returnValue = source[property2].apply(this, arguments);
                      this.constructor.superclass = superclass;
                      if (property2 !== "initialize") {
                        return returnValue;
                      }
                    };
                  }(property);
                } else {
                  klass.prototype[property] = source[property];
                }
                if (IS_DONTENUM_BUGGY) {
                  if (source.toString !== Object.prototype.toString) {
                    klass.prototype.toString = source.toString;
                  }
                  if (source.valueOf !== Object.prototype.valueOf) {
                    klass.prototype.valueOf = source.valueOf;
                  }
                }
              }
            };
            function Subclass() {
            }
            function callSuper(methodName) {
              var parentMethod = null, _this = this;
              while (_this.constructor.superclass) {
                var superClassMethod = _this.constructor.superclass.prototype[methodName];
                if (_this[methodName] !== superClassMethod) {
                  parentMethod = superClassMethod;
                  break;
                }
                _this = _this.constructor.superclass.prototype;
              }
              if (!parentMethod) {
                return console.log("tried to callSuper " + methodName + ", method not found in prototype chain", this);
              }
              return arguments.length > 1 ? parentMethod.apply(this, slice.call(arguments, 1)) : parentMethod.call(this);
            }
            function createClass() {
              var parent = null, properties = slice.call(arguments, 0);
              if (typeof properties[0] === "function") {
                parent = properties.shift();
              }
              function klass() {
                this.initialize.apply(this, arguments);
              }
              klass.superclass = parent;
              klass.subclasses = [];
              if (parent) {
                Subclass.prototype = parent.prototype;
                klass.prototype = new Subclass();
                parent.subclasses.push(klass);
              }
              for (var i = 0, length = properties.length; i < length; i++) {
                addMethods(klass, properties[i], parent);
              }
              if (!klass.prototype.initialize) {
                klass.prototype.initialize = emptyFunction;
              }
              klass.prototype.constructor = klass;
              klass.prototype.callSuper = callSuper;
              return klass;
            }
            fabric.util.createClass = createClass;
          })();
          (function() {
            var couldUseAttachEvent = !!fabric.document.createElement("div").attachEvent, touchEvents = ["touchstart", "touchmove", "touchend"];
            fabric.util.addListener = function(element, eventName, handler, options) {
              element && element.addEventListener(eventName, handler, couldUseAttachEvent ? false : options);
            };
            fabric.util.removeListener = function(element, eventName, handler, options) {
              element && element.removeEventListener(eventName, handler, couldUseAttachEvent ? false : options);
            };
            function getTouchInfo(event) {
              var touchProp = event.changedTouches;
              if (touchProp && touchProp[0]) {
                return touchProp[0];
              }
              return event;
            }
            fabric.util.getPointer = function(event) {
              var element = event.target, scroll = fabric.util.getScrollLeftTop(element), _evt = getTouchInfo(event);
              return {
                x: _evt.clientX + scroll.left,
                y: _evt.clientY + scroll.top
              };
            };
            fabric.util.isTouchEvent = function(event) {
              return touchEvents.indexOf(event.type) > -1 || event.pointerType === "touch";
            };
          })();
          (function() {
            function setStyle(element, styles) {
              var elementStyle = element.style;
              if (!elementStyle) {
                return element;
              }
              if (typeof styles === "string") {
                element.style.cssText += ";" + styles;
                return styles.indexOf("opacity") > -1 ? setOpacity(element, styles.match(/opacity:\s*(\d?\.?\d*)/)[1]) : element;
              }
              for (var property in styles) {
                if (property === "opacity") {
                  setOpacity(element, styles[property]);
                } else {
                  var normalizedProperty = property === "float" || property === "cssFloat" ? typeof elementStyle.styleFloat === "undefined" ? "cssFloat" : "styleFloat" : property;
                  elementStyle[normalizedProperty] = styles[property];
                }
              }
              return element;
            }
            var parseEl = fabric.document.createElement("div"), supportsOpacity = typeof parseEl.style.opacity === "string", supportsFilters = typeof parseEl.style.filter === "string", reOpacity = /alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/, setOpacity = function(element) {
              return element;
            };
            if (supportsOpacity) {
              setOpacity = function(element, value) {
                element.style.opacity = value;
                return element;
              };
            } else if (supportsFilters) {
              setOpacity = function(element, value) {
                var es = element.style;
                if (element.currentStyle && !element.currentStyle.hasLayout) {
                  es.zoom = 1;
                }
                if (reOpacity.test(es.filter)) {
                  value = value >= 0.9999 ? "" : "alpha(opacity=" + value * 100 + ")";
                  es.filter = es.filter.replace(reOpacity, value);
                } else {
                  es.filter += " alpha(opacity=" + value * 100 + ")";
                }
                return element;
              };
            }
            fabric.util.setStyle = setStyle;
          })();
          (function() {
            var _slice = Array.prototype.slice;
            function getById(id) {
              return typeof id === "string" ? fabric.document.getElementById(id) : id;
            }
            var sliceCanConvertNodelists, toArray = function(arrayLike) {
              return _slice.call(arrayLike, 0);
            };
            try {
              sliceCanConvertNodelists = toArray(fabric.document.childNodes) instanceof Array;
            } catch (err) {
            }
            if (!sliceCanConvertNodelists) {
              toArray = function(arrayLike) {
                var arr = new Array(arrayLike.length), i = arrayLike.length;
                while (i--) {
                  arr[i] = arrayLike[i];
                }
                return arr;
              };
            }
            function makeElement(tagName, attributes) {
              var el = fabric.document.createElement(tagName);
              for (var prop in attributes) {
                if (prop === "class") {
                  el.className = attributes[prop];
                } else if (prop === "for") {
                  el.htmlFor = attributes[prop];
                } else {
                  el.setAttribute(prop, attributes[prop]);
                }
              }
              return el;
            }
            function addClass(element, className) {
              if (element && (" " + element.className + " ").indexOf(" " + className + " ") === -1) {
                element.className += (element.className ? " " : "") + className;
              }
            }
            function wrapElement(element, wrapper, attributes) {
              if (typeof wrapper === "string") {
                wrapper = makeElement(wrapper, attributes);
              }
              if (element.parentNode) {
                element.parentNode.replaceChild(wrapper, element);
              }
              wrapper.appendChild(element);
              return wrapper;
            }
            function getScrollLeftTop(element) {
              var left = 0, top = 0, docElement = fabric.document.documentElement, body = fabric.document.body || {
                scrollLeft: 0,
                scrollTop: 0
              };
              while (element && (element.parentNode || element.host)) {
                element = element.parentNode || element.host;
                if (element === fabric.document) {
                  left = body.scrollLeft || docElement.scrollLeft || 0;
                  top = body.scrollTop || docElement.scrollTop || 0;
                } else {
                  left += element.scrollLeft || 0;
                  top += element.scrollTop || 0;
                }
                if (element.nodeType === 1 && element.style.position === "fixed") {
                  break;
                }
              }
              return { left, top };
            }
            function getElementOffset(element) {
              var docElem, doc = element && element.ownerDocument, box = { left: 0, top: 0 }, offset = { left: 0, top: 0 }, scrollLeftTop, offsetAttributes = {
                borderLeftWidth: "left",
                borderTopWidth: "top",
                paddingLeft: "left",
                paddingTop: "top"
              };
              if (!doc) {
                return offset;
              }
              for (var attr in offsetAttributes) {
                offset[offsetAttributes[attr]] += parseInt(getElementStyle(element, attr), 10) || 0;
              }
              docElem = doc.documentElement;
              if (typeof element.getBoundingClientRect !== "undefined") {
                box = element.getBoundingClientRect();
              }
              scrollLeftTop = getScrollLeftTop(element);
              return {
                left: box.left + scrollLeftTop.left - (docElem.clientLeft || 0) + offset.left,
                top: box.top + scrollLeftTop.top - (docElem.clientTop || 0) + offset.top
              };
            }
            var getElementStyle;
            if (fabric.document.defaultView && fabric.document.defaultView.getComputedStyle) {
              getElementStyle = function(element, attr) {
                var style = fabric.document.defaultView.getComputedStyle(element, null);
                return style ? style[attr] : void 0;
              };
            } else {
              getElementStyle = function(element, attr) {
                var value = element.style[attr];
                if (!value && element.currentStyle) {
                  value = element.currentStyle[attr];
                }
                return value;
              };
            }
            (function() {
              var style = fabric.document.documentElement.style, selectProp = "userSelect" in style ? "userSelect" : "MozUserSelect" in style ? "MozUserSelect" : "WebkitUserSelect" in style ? "WebkitUserSelect" : "KhtmlUserSelect" in style ? "KhtmlUserSelect" : "";
              function makeElementUnselectable(element) {
                if (typeof element.onselectstart !== "undefined") {
                  element.onselectstart = fabric.util.falseFunction;
                }
                if (selectProp) {
                  element.style[selectProp] = "none";
                } else if (typeof element.unselectable === "string") {
                  element.unselectable = "on";
                }
                return element;
              }
              function makeElementSelectable(element) {
                if (typeof element.onselectstart !== "undefined") {
                  element.onselectstart = null;
                }
                if (selectProp) {
                  element.style[selectProp] = "";
                } else if (typeof element.unselectable === "string") {
                  element.unselectable = "";
                }
                return element;
              }
              fabric.util.makeElementUnselectable = makeElementUnselectable;
              fabric.util.makeElementSelectable = makeElementSelectable;
            })();
            function getNodeCanvas(element) {
              var impl = fabric.jsdomImplForWrapper(element);
              return impl._canvas || impl._image;
            }
            function cleanUpJsdomNode(element) {
              if (!fabric.isLikelyNode) {
                return;
              }
              var impl = fabric.jsdomImplForWrapper(element);
              if (impl) {
                impl._image = null;
                impl._canvas = null;
                impl._currentSrc = null;
                impl._attributes = null;
                impl._classList = null;
              }
            }
            function setImageSmoothing(ctx, value) {
              ctx.imageSmoothingEnabled = ctx.imageSmoothingEnabled || ctx.webkitImageSmoothingEnabled || ctx.mozImageSmoothingEnabled || ctx.msImageSmoothingEnabled || ctx.oImageSmoothingEnabled;
              ctx.imageSmoothingEnabled = value;
            }
            fabric.util.setImageSmoothing = setImageSmoothing;
            fabric.util.getById = getById;
            fabric.util.toArray = toArray;
            fabric.util.addClass = addClass;
            fabric.util.makeElement = makeElement;
            fabric.util.wrapElement = wrapElement;
            fabric.util.getScrollLeftTop = getScrollLeftTop;
            fabric.util.getElementOffset = getElementOffset;
            fabric.util.getNodeCanvas = getNodeCanvas;
            fabric.util.cleanUpJsdomNode = cleanUpJsdomNode;
          })();
          (function() {
            function addParamToUrl(url, param) {
              return url + (/\?/.test(url) ? "&" : "?") + param;
            }
            function emptyFn() {
            }
            function request(url, options) {
              options || (options = {});
              var method = options.method ? options.method.toUpperCase() : "GET", onComplete = options.onComplete || function() {
              }, xhr = new fabric.window.XMLHttpRequest(), body = options.body || options.parameters;
              xhr.onreadystatechange = function() {
                if (xhr.readyState === 4) {
                  onComplete(xhr);
                  xhr.onreadystatechange = emptyFn;
                }
              };
              if (method === "GET") {
                body = null;
                if (typeof options.parameters === "string") {
                  url = addParamToUrl(url, options.parameters);
                }
              }
              xhr.open(method, url, true);
              if (method === "POST" || method === "PUT") {
                xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
              }
              xhr.send(body);
              return xhr;
            }
            fabric.util.request = request;
          })();
          fabric.log = console.log;
          fabric.warn = console.warn;
          (function() {
            function noop() {
              return false;
            }
            function defaultEasing(t, b, c, d) {
              return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;
            }
            function animate(options) {
              var cancel = false;
              requestAnimFrame(function(timestamp) {
                options || (options = {});
                var start = timestamp || +new Date(), duration = options.duration || 500, finish = start + duration, time, onChange = options.onChange || noop, abort = options.abort || noop, onComplete = options.onComplete || noop, easing = options.easing || defaultEasing, startValue = "startValue" in options ? options.startValue : 0, endValue = "endValue" in options ? options.endValue : 100, byValue = options.byValue || endValue - startValue;
                options.onStart && options.onStart();
                (function tick(ticktime) {
                  time = ticktime || +new Date();
                  var currentTime = time > finish ? duration : time - start, timePerc = currentTime / duration, current = easing(currentTime, startValue, byValue, duration), valuePerc = Math.abs((current - startValue) / byValue);
                  if (cancel) {
                    return;
                  }
                  if (abort(current, valuePerc, timePerc)) {
                    onComplete(endValue, 1, 1);
                    return;
                  }
                  if (time > finish) {
                    onChange(endValue, 1, 1);
                    onComplete(endValue, 1, 1);
                    return;
                  } else {
                    onChange(current, valuePerc, timePerc);
                    requestAnimFrame(tick);
                  }
                })(start);
              });
              return function() {
                cancel = true;
              };
            }
            var _requestAnimFrame = fabric.window.requestAnimationFrame || fabric.window.webkitRequestAnimationFrame || fabric.window.mozRequestAnimationFrame || fabric.window.oRequestAnimationFrame || fabric.window.msRequestAnimationFrame || function(callback) {
              return fabric.window.setTimeout(callback, 1e3 / 60);
            };
            var _cancelAnimFrame = fabric.window.cancelAnimationFrame || fabric.window.clearTimeout;
            function requestAnimFrame() {
              return _requestAnimFrame.apply(fabric.window, arguments);
            }
            function cancelAnimFrame() {
              return _cancelAnimFrame.apply(fabric.window, arguments);
            }
            fabric.util.animate = animate;
            fabric.util.requestAnimFrame = requestAnimFrame;
            fabric.util.cancelAnimFrame = cancelAnimFrame;
          })();
          (function() {
            function calculateColor(begin, end, pos) {
              var color = "rgba(" + parseInt(begin[0] + pos * (end[0] - begin[0]), 10) + "," + parseInt(begin[1] + pos * (end[1] - begin[1]), 10) + "," + parseInt(begin[2] + pos * (end[2] - begin[2]), 10);
              color += "," + (begin && end ? parseFloat(begin[3] + pos * (end[3] - begin[3])) : 1);
              color += ")";
              return color;
            }
            function animateColor(fromColor, toColor, duration, options) {
              var startColor = new fabric.Color(fromColor).getSource(), endColor = new fabric.Color(toColor).getSource(), originalOnComplete = options.onComplete, originalOnChange = options.onChange;
              options = options || {};
              return fabric.util.animate(fabric.util.object.extend(options, {
                duration: duration || 500,
                startValue: startColor,
                endValue: endColor,
                byValue: endColor,
                easing: function(currentTime, startValue, byValue, duration2) {
                  var posValue = options.colorEasing ? options.colorEasing(currentTime, duration2) : 1 - Math.cos(currentTime / duration2 * (Math.PI / 2));
                  return calculateColor(startValue, byValue, posValue);
                },
                onComplete: function(current, valuePerc, timePerc) {
                  if (originalOnComplete) {
                    return originalOnComplete(calculateColor(endColor, endColor, 0), valuePerc, timePerc);
                  }
                },
                onChange: function(current, valuePerc, timePerc) {
                  if (originalOnChange) {
                    if (Array.isArray(current)) {
                      return originalOnChange(calculateColor(current, current, 0), valuePerc, timePerc);
                    }
                    originalOnChange(current, valuePerc, timePerc);
                  }
                }
              }));
            }
            fabric.util.animateColor = animateColor;
          })();
          (function() {
            function normalize(a, c, p, s) {
              if (a < Math.abs(c)) {
                a = c;
                s = p / 4;
              } else {
                if (c === 0 && a === 0) {
                  s = p / (2 * Math.PI) * Math.asin(1);
                } else {
                  s = p / (2 * Math.PI) * Math.asin(c / a);
                }
              }
              return { a, c, p, s };
            }
            function elastic(opts, t, d) {
              return opts.a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - opts.s) * (2 * Math.PI) / opts.p);
            }
            function easeOutCubic(t, b, c, d) {
              return c * ((t = t / d - 1) * t * t + 1) + b;
            }
            function easeInOutCubic(t, b, c, d) {
              t /= d / 2;
              if (t < 1) {
                return c / 2 * t * t * t + b;
              }
              return c / 2 * ((t -= 2) * t * t + 2) + b;
            }
            function easeInQuart(t, b, c, d) {
              return c * (t /= d) * t * t * t + b;
            }
            function easeOutQuart(t, b, c, d) {
              return -c * ((t = t / d - 1) * t * t * t - 1) + b;
            }
            function easeInOutQuart(t, b, c, d) {
              t /= d / 2;
              if (t < 1) {
                return c / 2 * t * t * t * t + b;
              }
              return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
            }
            function easeInQuint(t, b, c, d) {
              return c * (t /= d) * t * t * t * t + b;
            }
            function easeOutQuint(t, b, c, d) {
              return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
            }
            function easeInOutQuint(t, b, c, d) {
              t /= d / 2;
              if (t < 1) {
                return c / 2 * t * t * t * t * t + b;
              }
              return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
            }
            function easeInSine(t, b, c, d) {
              return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;
            }
            function easeOutSine(t, b, c, d) {
              return c * Math.sin(t / d * (Math.PI / 2)) + b;
            }
            function easeInOutSine(t, b, c, d) {
              return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;
            }
            function easeInExpo(t, b, c, d) {
              return t === 0 ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;
            }
            function easeOutExpo(t, b, c, d) {
              return t === d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;
            }
            function easeInOutExpo(t, b, c, d) {
              if (t === 0) {
                return b;
              }
              if (t === d) {
                return b + c;
              }
              t /= d / 2;
              if (t < 1) {
                return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
              }
              return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;
            }
            function easeInCirc(t, b, c, d) {
              return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
            }
            function easeOutCirc(t, b, c, d) {
              return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
            }
            function easeInOutCirc(t, b, c, d) {
              t /= d / 2;
              if (t < 1) {
                return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
              }
              return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
            }
            function easeInElastic(t, b, c, d) {
              var s = 1.70158, p = 0, a = c;
              if (t === 0) {
                return b;
              }
              t /= d;
              if (t === 1) {
                return b + c;
              }
              if (!p) {
                p = d * 0.3;
              }
              var opts = normalize(a, c, p, s);
              return -elastic(opts, t, d) + b;
            }
            function easeOutElastic(t, b, c, d) {
              var s = 1.70158, p = 0, a = c;
              if (t === 0) {
                return b;
              }
              t /= d;
              if (t === 1) {
                return b + c;
              }
              if (!p) {
                p = d * 0.3;
              }
              var opts = normalize(a, c, p, s);
              return opts.a * Math.pow(2, -10 * t) * Math.sin((t * d - opts.s) * (2 * Math.PI) / opts.p) + opts.c + b;
            }
            function easeInOutElastic(t, b, c, d) {
              var s = 1.70158, p = 0, a = c;
              if (t === 0) {
                return b;
              }
              t /= d / 2;
              if (t === 2) {
                return b + c;
              }
              if (!p) {
                p = d * (0.3 * 1.5);
              }
              var opts = normalize(a, c, p, s);
              if (t < 1) {
                return -0.5 * elastic(opts, t, d) + b;
              }
              return opts.a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - opts.s) * (2 * Math.PI) / opts.p) * 0.5 + opts.c + b;
            }
            function easeInBack(t, b, c, d, s) {
              if (s === void 0) {
                s = 1.70158;
              }
              return c * (t /= d) * t * ((s + 1) * t - s) + b;
            }
            function easeOutBack(t, b, c, d, s) {
              if (s === void 0) {
                s = 1.70158;
              }
              return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
            }
            function easeInOutBack(t, b, c, d, s) {
              if (s === void 0) {
                s = 1.70158;
              }
              t /= d / 2;
              if (t < 1) {
                return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;
              }
              return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;
            }
            function easeInBounce(t, b, c, d) {
              return c - easeOutBounce(d - t, 0, c, d) + b;
            }
            function easeOutBounce(t, b, c, d) {
              if ((t /= d) < 1 / 2.75) {
                return c * (7.5625 * t * t) + b;
              } else if (t < 2 / 2.75) {
                return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;
              } else if (t < 2.5 / 2.75) {
                return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;
              } else {
                return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;
              }
            }
            function easeInOutBounce(t, b, c, d) {
              if (t < d / 2) {
                return easeInBounce(t * 2, 0, c, d) * 0.5 + b;
              }
              return easeOutBounce(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;
            }
            fabric.util.ease = {
              easeInQuad: function(t, b, c, d) {
                return c * (t /= d) * t + b;
              },
              easeOutQuad: function(t, b, c, d) {
                return -c * (t /= d) * (t - 2) + b;
              },
              easeInOutQuad: function(t, b, c, d) {
                t /= d / 2;
                if (t < 1) {
                  return c / 2 * t * t + b;
                }
                return -c / 2 * (--t * (t - 2) - 1) + b;
              },
              easeInCubic: function(t, b, c, d) {
                return c * (t /= d) * t * t + b;
              },
              easeOutCubic,
              easeInOutCubic,
              easeInQuart,
              easeOutQuart,
              easeInOutQuart,
              easeInQuint,
              easeOutQuint,
              easeInOutQuint,
              easeInSine,
              easeOutSine,
              easeInOutSine,
              easeInExpo,
              easeOutExpo,
              easeInOutExpo,
              easeInCirc,
              easeOutCirc,
              easeInOutCirc,
              easeInElastic,
              easeOutElastic,
              easeInOutElastic,
              easeInBack,
              easeOutBack,
              easeInOutBack,
              easeInBounce,
              easeOutBounce,
              easeInOutBounce
            };
          })();
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), extend = fabric2.util.object.extend, clone = fabric2.util.object.clone, toFixed = fabric2.util.toFixed, parseUnit = fabric2.util.parseUnit, multiplyTransformMatrices = fabric2.util.multiplyTransformMatrices, svgValidTagNames = [
              "path",
              "circle",
              "polygon",
              "polyline",
              "ellipse",
              "rect",
              "line",
              "image",
              "text"
            ], svgViewBoxElements = ["symbol", "image", "marker", "pattern", "view", "svg"], svgInvalidAncestors = ["pattern", "defs", "symbol", "metadata", "clipPath", "mask", "desc"], svgValidParents = ["symbol", "g", "a", "svg", "clipPath", "defs"], attributesMap = {
              cx: "left",
              x: "left",
              r: "radius",
              cy: "top",
              y: "top",
              display: "visible",
              visibility: "visible",
              transform: "transformMatrix",
              "fill-opacity": "fillOpacity",
              "fill-rule": "fillRule",
              "font-family": "fontFamily",
              "font-size": "fontSize",
              "font-style": "fontStyle",
              "font-weight": "fontWeight",
              "letter-spacing": "charSpacing",
              "paint-order": "paintFirst",
              "stroke-dasharray": "strokeDashArray",
              "stroke-dashoffset": "strokeDashOffset",
              "stroke-linecap": "strokeLineCap",
              "stroke-linejoin": "strokeLineJoin",
              "stroke-miterlimit": "strokeMiterLimit",
              "stroke-opacity": "strokeOpacity",
              "stroke-width": "strokeWidth",
              "text-decoration": "textDecoration",
              "text-anchor": "textAnchor",
              opacity: "opacity",
              "clip-path": "clipPath",
              "clip-rule": "clipRule",
              "vector-effect": "strokeUniform",
              "image-rendering": "imageSmoothing"
            }, colorAttributes = {
              stroke: "strokeOpacity",
              fill: "fillOpacity"
            }, fSize = "font-size", cPath = "clip-path";
            fabric2.svgValidTagNamesRegEx = getSvgRegex(svgValidTagNames);
            fabric2.svgViewBoxElementsRegEx = getSvgRegex(svgViewBoxElements);
            fabric2.svgInvalidAncestorsRegEx = getSvgRegex(svgInvalidAncestors);
            fabric2.svgValidParentsRegEx = getSvgRegex(svgValidParents);
            fabric2.cssRules = {};
            fabric2.gradientDefs = {};
            fabric2.clipPaths = {};
            function normalizeAttr(attr) {
              if (attr in attributesMap) {
                return attributesMap[attr];
              }
              return attr;
            }
            function normalizeValue(attr, value, parentAttributes, fontSize) {
              var isArray = Object.prototype.toString.call(value) === "[object Array]", parsed;
              if ((attr === "fill" || attr === "stroke") && value === "none") {
                value = "";
              } else if (attr === "strokeUniform") {
                return value === "non-scaling-stroke";
              } else if (attr === "strokeDashArray") {
                if (value === "none") {
                  value = null;
                } else {
                  value = value.replace(/,/g, " ").split(/\s+/).map(parseFloat);
                }
              } else if (attr === "transformMatrix") {
                if (parentAttributes && parentAttributes.transformMatrix) {
                  value = multiplyTransformMatrices(parentAttributes.transformMatrix, fabric2.parseTransformAttribute(value));
                } else {
                  value = fabric2.parseTransformAttribute(value);
                }
              } else if (attr === "visible") {
                value = value !== "none" && value !== "hidden";
                if (parentAttributes && parentAttributes.visible === false) {
                  value = false;
                }
              } else if (attr === "opacity") {
                value = parseFloat(value);
                if (parentAttributes && typeof parentAttributes.opacity !== "undefined") {
                  value *= parentAttributes.opacity;
                }
              } else if (attr === "textAnchor") {
                value = value === "start" ? "left" : value === "end" ? "right" : "center";
              } else if (attr === "charSpacing") {
                parsed = parseUnit(value, fontSize) / fontSize * 1e3;
              } else if (attr === "paintFirst") {
                var fillIndex = value.indexOf("fill");
                var strokeIndex = value.indexOf("stroke");
                var value = "fill";
                if (fillIndex > -1 && strokeIndex > -1 && strokeIndex < fillIndex) {
                  value = "stroke";
                } else if (fillIndex === -1 && strokeIndex > -1) {
                  value = "stroke";
                }
              } else if (attr === "href" || attr === "xlink:href" || attr === "font") {
                return value;
              } else if (attr === "imageSmoothing") {
                return value === "optimizeQuality";
              } else {
                parsed = isArray ? value.map(parseUnit) : parseUnit(value, fontSize);
              }
              return !isArray && isNaN(parsed) ? value : parsed;
            }
            function getSvgRegex(arr) {
              return new RegExp("^(" + arr.join("|") + ")\\b", "i");
            }
            function _setStrokeFillOpacity(attributes) {
              for (var attr in colorAttributes) {
                if (typeof attributes[colorAttributes[attr]] === "undefined" || attributes[attr] === "") {
                  continue;
                }
                if (typeof attributes[attr] === "undefined") {
                  if (!fabric2.Object.prototype[attr]) {
                    continue;
                  }
                  attributes[attr] = fabric2.Object.prototype[attr];
                }
                if (attributes[attr].indexOf("url(") === 0) {
                  continue;
                }
                var color = new fabric2.Color(attributes[attr]);
                attributes[attr] = color.setAlpha(toFixed(color.getAlpha() * attributes[colorAttributes[attr]], 2)).toRgba();
              }
              return attributes;
            }
            function _getMultipleNodes(doc, nodeNames) {
              var nodeName, nodeArray = [], nodeList, i, len;
              for (i = 0, len = nodeNames.length; i < len; i++) {
                nodeName = nodeNames[i];
                nodeList = doc.getElementsByTagName(nodeName);
                nodeArray = nodeArray.concat(Array.prototype.slice.call(nodeList));
              }
              return nodeArray;
            }
            fabric2.parseTransformAttribute = function() {
              function rotateMatrix(matrix2, args) {
                var cos = fabric2.util.cos(args[0]), sin = fabric2.util.sin(args[0]), x = 0, y = 0;
                if (args.length === 3) {
                  x = args[1];
                  y = args[2];
                }
                matrix2[0] = cos;
                matrix2[1] = sin;
                matrix2[2] = -sin;
                matrix2[3] = cos;
                matrix2[4] = x - (cos * x - sin * y);
                matrix2[5] = y - (sin * x + cos * y);
              }
              function scaleMatrix(matrix2, args) {
                var multiplierX = args[0], multiplierY = args.length === 2 ? args[1] : args[0];
                matrix2[0] = multiplierX;
                matrix2[3] = multiplierY;
              }
              function skewMatrix(matrix2, args, pos) {
                matrix2[pos] = Math.tan(fabric2.util.degreesToRadians(args[0]));
              }
              function translateMatrix(matrix2, args) {
                matrix2[4] = args[0];
                if (args.length === 2) {
                  matrix2[5] = args[1];
                }
              }
              var iMatrix = fabric2.iMatrix, number = fabric2.reNum, commaWsp = fabric2.commaWsp, skewX = "(?:(skewX)\\s*\\(\\s*(" + number + ")\\s*\\))", skewY = "(?:(skewY)\\s*\\(\\s*(" + number + ")\\s*\\))", rotate = "(?:(rotate)\\s*\\(\\s*(" + number + ")(?:" + commaWsp + "(" + number + ")" + commaWsp + "(" + number + "))?\\s*\\))", scale = "(?:(scale)\\s*\\(\\s*(" + number + ")(?:" + commaWsp + "(" + number + "))?\\s*\\))", translate = "(?:(translate)\\s*\\(\\s*(" + number + ")(?:" + commaWsp + "(" + number + "))?\\s*\\))", matrix = "(?:(matrix)\\s*\\(\\s*(" + number + ")" + commaWsp + "(" + number + ")" + commaWsp + "(" + number + ")" + commaWsp + "(" + number + ")" + commaWsp + "(" + number + ")" + commaWsp + "(" + number + ")\\s*\\))", transform = "(?:" + matrix + "|" + translate + "|" + scale + "|" + rotate + "|" + skewX + "|" + skewY + ")", transforms = "(?:" + transform + "(?:" + commaWsp + "*" + transform + ")*)", transformList = "^\\s*(?:" + transforms + "?)\\s*$", reTransformList = new RegExp(transformList), reTransform = new RegExp(transform, "g");
              return function(attributeValue) {
                var matrix2 = iMatrix.concat(), matrices = [];
                if (!attributeValue || attributeValue && !reTransformList.test(attributeValue)) {
                  return matrix2;
                }
                attributeValue.replace(reTransform, function(match) {
                  var m = new RegExp(transform).exec(match).filter(function(match2) {
                    return !!match2;
                  }), operation = m[1], args = m.slice(2).map(parseFloat);
                  switch (operation) {
                    case "translate":
                      translateMatrix(matrix2, args);
                      break;
                    case "rotate":
                      args[0] = fabric2.util.degreesToRadians(args[0]);
                      rotateMatrix(matrix2, args);
                      break;
                    case "scale":
                      scaleMatrix(matrix2, args);
                      break;
                    case "skewX":
                      skewMatrix(matrix2, args, 2);
                      break;
                    case "skewY":
                      skewMatrix(matrix2, args, 1);
                      break;
                    case "matrix":
                      matrix2 = args;
                      break;
                  }
                  matrices.push(matrix2.concat());
                  matrix2 = iMatrix.concat();
                });
                var combinedMatrix = matrices[0];
                while (matrices.length > 1) {
                  matrices.shift();
                  combinedMatrix = fabric2.util.multiplyTransformMatrices(combinedMatrix, matrices[0]);
                }
                return combinedMatrix;
              };
            }();
            function parseStyleString(style, oStyle) {
              var attr, value;
              style.replace(/;\s*$/, "").split(";").forEach(function(chunk) {
                var pair = chunk.split(":");
                attr = pair[0].trim().toLowerCase();
                value = pair[1].trim();
                oStyle[attr] = value;
              });
            }
            function parseStyleObject(style, oStyle) {
              var attr, value;
              for (var prop in style) {
                if (typeof style[prop] === "undefined") {
                  continue;
                }
                attr = prop.toLowerCase();
                value = style[prop];
                oStyle[attr] = value;
              }
            }
            function getGlobalStylesForElement(element, svgUid) {
              var styles = {};
              for (var rule in fabric2.cssRules[svgUid]) {
                if (elementMatchesRule(element, rule.split(" "))) {
                  for (var property in fabric2.cssRules[svgUid][rule]) {
                    styles[property] = fabric2.cssRules[svgUid][rule][property];
                  }
                }
              }
              return styles;
            }
            function elementMatchesRule(element, selectors) {
              var firstMatching, parentMatching = true;
              firstMatching = selectorMatches(element, selectors.pop());
              if (firstMatching && selectors.length) {
                parentMatching = doesSomeParentMatch(element, selectors);
              }
              return firstMatching && parentMatching && selectors.length === 0;
            }
            function doesSomeParentMatch(element, selectors) {
              var selector, parentMatching = true;
              while (element.parentNode && element.parentNode.nodeType === 1 && selectors.length) {
                if (parentMatching) {
                  selector = selectors.pop();
                }
                element = element.parentNode;
                parentMatching = selectorMatches(element, selector);
              }
              return selectors.length === 0;
            }
            function selectorMatches(element, selector) {
              var nodeName = element.nodeName, classNames = element.getAttribute("class"), id = element.getAttribute("id"), matcher, i;
              matcher = new RegExp("^" + nodeName, "i");
              selector = selector.replace(matcher, "");
              if (id && selector.length) {
                matcher = new RegExp("#" + id + "(?![a-zA-Z\\-]+)", "i");
                selector = selector.replace(matcher, "");
              }
              if (classNames && selector.length) {
                classNames = classNames.split(" ");
                for (i = classNames.length; i--; ) {
                  matcher = new RegExp("\\." + classNames[i] + "(?![a-zA-Z\\-]+)", "i");
                  selector = selector.replace(matcher, "");
                }
              }
              return selector.length === 0;
            }
            function elementById(doc, id) {
              var el;
              doc.getElementById && (el = doc.getElementById(id));
              if (el) {
                return el;
              }
              var node, i, len, nodelist = doc.getElementsByTagName("*");
              for (i = 0, len = nodelist.length; i < len; i++) {
                node = nodelist[i];
                if (id === node.getAttribute("id")) {
                  return node;
                }
              }
            }
            function parseUseDirectives(doc) {
              var nodelist = _getMultipleNodes(doc, ["use", "svg:use"]), i = 0;
              while (nodelist.length && i < nodelist.length) {
                var el = nodelist[i], xlinkAttribute = el.getAttribute("xlink:href") || el.getAttribute("href");
                if (xlinkAttribute === null) {
                  return;
                }
                var xlink = xlinkAttribute.substr(1), x = el.getAttribute("x") || 0, y = el.getAttribute("y") || 0, el2 = elementById(doc, xlink).cloneNode(true), currentTrans = (el2.getAttribute("transform") || "") + " translate(" + x + ", " + y + ")", parentNode, oldLength = nodelist.length, attr, j, attrs, len, namespace = fabric2.svgNS;
                applyViewboxTransform(el2);
                if (/^svg$/i.test(el2.nodeName)) {
                  var el3 = el2.ownerDocument.createElementNS(namespace, "g");
                  for (j = 0, attrs = el2.attributes, len = attrs.length; j < len; j++) {
                    attr = attrs.item(j);
                    el3.setAttributeNS(namespace, attr.nodeName, attr.nodeValue);
                  }
                  while (el2.firstChild) {
                    el3.appendChild(el2.firstChild);
                  }
                  el2 = el3;
                }
                for (j = 0, attrs = el.attributes, len = attrs.length; j < len; j++) {
                  attr = attrs.item(j);
                  if (attr.nodeName === "x" || attr.nodeName === "y" || attr.nodeName === "xlink:href" || attr.nodeName === "href") {
                    continue;
                  }
                  if (attr.nodeName === "transform") {
                    currentTrans = attr.nodeValue + " " + currentTrans;
                  } else {
                    el2.setAttribute(attr.nodeName, attr.nodeValue);
                  }
                }
                el2.setAttribute("transform", currentTrans);
                el2.setAttribute("instantiated_by_use", "1");
                el2.removeAttribute("id");
                parentNode = el.parentNode;
                parentNode.replaceChild(el2, el);
                if (nodelist.length === oldLength) {
                  i++;
                }
              }
            }
            var reViewBoxAttrValue = new RegExp("^\\s*(" + fabric2.reNum + "+)\\s*,?\\s*(" + fabric2.reNum + "+)\\s*,?\\s*(" + fabric2.reNum + "+)\\s*,?\\s*(" + fabric2.reNum + "+)\\s*$");
            function applyViewboxTransform(element) {
              if (!fabric2.svgViewBoxElementsRegEx.test(element.nodeName)) {
                return {};
              }
              var viewBoxAttr = element.getAttribute("viewBox"), scaleX = 1, scaleY = 1, minX = 0, minY = 0, viewBoxWidth, viewBoxHeight, matrix, el, widthAttr = element.getAttribute("width"), heightAttr = element.getAttribute("height"), x = element.getAttribute("x") || 0, y = element.getAttribute("y") || 0, preserveAspectRatio = element.getAttribute("preserveAspectRatio") || "", missingViewBox = !viewBoxAttr || !(viewBoxAttr = viewBoxAttr.match(reViewBoxAttrValue)), missingDimAttr = !widthAttr || !heightAttr || widthAttr === "100%" || heightAttr === "100%", toBeParsed = missingViewBox && missingDimAttr, parsedDim = {}, translateMatrix = "", widthDiff = 0, heightDiff = 0;
              parsedDim.width = 0;
              parsedDim.height = 0;
              parsedDim.toBeParsed = toBeParsed;
              if (missingViewBox) {
                if ((x || y) && element.parentNode && element.parentNode.nodeName !== "#document") {
                  translateMatrix = " translate(" + parseUnit(x) + " " + parseUnit(y) + ") ";
                  matrix = (element.getAttribute("transform") || "") + translateMatrix;
                  element.setAttribute("transform", matrix);
                  element.removeAttribute("x");
                  element.removeAttribute("y");
                }
              }
              if (toBeParsed) {
                return parsedDim;
              }
              if (missingViewBox) {
                parsedDim.width = parseUnit(widthAttr);
                parsedDim.height = parseUnit(heightAttr);
                return parsedDim;
              }
              minX = -parseFloat(viewBoxAttr[1]);
              minY = -parseFloat(viewBoxAttr[2]);
              viewBoxWidth = parseFloat(viewBoxAttr[3]);
              viewBoxHeight = parseFloat(viewBoxAttr[4]);
              parsedDim.minX = minX;
              parsedDim.minY = minY;
              parsedDim.viewBoxWidth = viewBoxWidth;
              parsedDim.viewBoxHeight = viewBoxHeight;
              if (!missingDimAttr) {
                parsedDim.width = parseUnit(widthAttr);
                parsedDim.height = parseUnit(heightAttr);
                scaleX = parsedDim.width / viewBoxWidth;
                scaleY = parsedDim.height / viewBoxHeight;
              } else {
                parsedDim.width = viewBoxWidth;
                parsedDim.height = viewBoxHeight;
              }
              preserveAspectRatio = fabric2.util.parsePreserveAspectRatioAttribute(preserveAspectRatio);
              if (preserveAspectRatio.alignX !== "none") {
                if (preserveAspectRatio.meetOrSlice === "meet") {
                  scaleY = scaleX = scaleX > scaleY ? scaleY : scaleX;
                }
                if (preserveAspectRatio.meetOrSlice === "slice") {
                  scaleY = scaleX = scaleX > scaleY ? scaleX : scaleY;
                }
                widthDiff = parsedDim.width - viewBoxWidth * scaleX;
                heightDiff = parsedDim.height - viewBoxHeight * scaleX;
                if (preserveAspectRatio.alignX === "Mid") {
                  widthDiff /= 2;
                }
                if (preserveAspectRatio.alignY === "Mid") {
                  heightDiff /= 2;
                }
                if (preserveAspectRatio.alignX === "Min") {
                  widthDiff = 0;
                }
                if (preserveAspectRatio.alignY === "Min") {
                  heightDiff = 0;
                }
              }
              if (scaleX === 1 && scaleY === 1 && minX === 0 && minY === 0 && x === 0 && y === 0) {
                return parsedDim;
              }
              if ((x || y) && element.parentNode.nodeName !== "#document") {
                translateMatrix = " translate(" + parseUnit(x) + " " + parseUnit(y) + ") ";
              }
              matrix = translateMatrix + " matrix(" + scaleX + " 0 0 " + scaleY + " " + (minX * scaleX + widthDiff) + " " + (minY * scaleY + heightDiff) + ") ";
              if (element.nodeName === "svg") {
                el = element.ownerDocument.createElementNS(fabric2.svgNS, "g");
                while (element.firstChild) {
                  el.appendChild(element.firstChild);
                }
                element.appendChild(el);
              } else {
                el = element;
                el.removeAttribute("x");
                el.removeAttribute("y");
                matrix = el.getAttribute("transform") + matrix;
              }
              el.setAttribute("transform", matrix);
              return parsedDim;
            }
            function hasAncestorWithNodeName(element, nodeName) {
              while (element && (element = element.parentNode)) {
                if (element.nodeName && nodeName.test(element.nodeName.replace("svg:", "")) && !element.getAttribute("instantiated_by_use")) {
                  return true;
                }
              }
              return false;
            }
            fabric2.parseSVGDocument = function(doc, callback, reviver, parsingOptions) {
              if (!doc) {
                return;
              }
              parseUseDirectives(doc);
              var svgUid = fabric2.Object.__uid++, i, len, options = applyViewboxTransform(doc), descendants = fabric2.util.toArray(doc.getElementsByTagName("*"));
              options.crossOrigin = parsingOptions && parsingOptions.crossOrigin;
              options.svgUid = svgUid;
              if (descendants.length === 0 && fabric2.isLikelyNode) {
                descendants = doc.selectNodes('//*[name(.)!="svg"]');
                var arr = [];
                for (i = 0, len = descendants.length; i < len; i++) {
                  arr[i] = descendants[i];
                }
                descendants = arr;
              }
              var elements = descendants.filter(function(el) {
                applyViewboxTransform(el);
                return fabric2.svgValidTagNamesRegEx.test(el.nodeName.replace("svg:", "")) && !hasAncestorWithNodeName(el, fabric2.svgInvalidAncestorsRegEx);
              });
              if (!elements || elements && !elements.length) {
                callback && callback([], {});
                return;
              }
              var clipPaths = {};
              descendants.filter(function(el) {
                return el.nodeName.replace("svg:", "") === "clipPath";
              }).forEach(function(el) {
                var id = el.getAttribute("id");
                clipPaths[id] = fabric2.util.toArray(el.getElementsByTagName("*")).filter(function(el2) {
                  return fabric2.svgValidTagNamesRegEx.test(el2.nodeName.replace("svg:", ""));
                });
              });
              fabric2.gradientDefs[svgUid] = fabric2.getGradientDefs(doc);
              fabric2.cssRules[svgUid] = fabric2.getCSSRules(doc);
              fabric2.clipPaths[svgUid] = clipPaths;
              fabric2.parseElements(elements, function(instances, elements2) {
                if (callback) {
                  callback(instances, options, elements2, descendants);
                  delete fabric2.gradientDefs[svgUid];
                  delete fabric2.cssRules[svgUid];
                  delete fabric2.clipPaths[svgUid];
                }
              }, clone(options), reviver, parsingOptions);
            };
            function recursivelyParseGradientsXlink(doc, gradient) {
              var gradientsAttrs = ["gradientTransform", "x1", "x2", "y1", "y2", "gradientUnits", "cx", "cy", "r", "fx", "fy"], xlinkAttr = "xlink:href", xLink = gradient.getAttribute(xlinkAttr).substr(1), referencedGradient = elementById(doc, xLink);
              if (referencedGradient && referencedGradient.getAttribute(xlinkAttr)) {
                recursivelyParseGradientsXlink(doc, referencedGradient);
              }
              gradientsAttrs.forEach(function(attr) {
                if (referencedGradient && !gradient.hasAttribute(attr) && referencedGradient.hasAttribute(attr)) {
                  gradient.setAttribute(attr, referencedGradient.getAttribute(attr));
                }
              });
              if (!gradient.children.length) {
                var referenceClone = referencedGradient.cloneNode(true);
                while (referenceClone.firstChild) {
                  gradient.appendChild(referenceClone.firstChild);
                }
              }
              gradient.removeAttribute(xlinkAttr);
            }
            var reFontDeclaration = new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*(" + fabric2.reNum + "(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|" + fabric2.reNum + "))?\\s+(.*)");
            extend(fabric2, {
              parseFontDeclaration: function(value, oStyle) {
                var match = value.match(reFontDeclaration);
                if (!match) {
                  return;
                }
                var fontStyle = match[1], fontWeight = match[3], fontSize = match[4], lineHeight = match[5], fontFamily = match[6];
                if (fontStyle) {
                  oStyle.fontStyle = fontStyle;
                }
                if (fontWeight) {
                  oStyle.fontWeight = isNaN(parseFloat(fontWeight)) ? fontWeight : parseFloat(fontWeight);
                }
                if (fontSize) {
                  oStyle.fontSize = parseUnit(fontSize);
                }
                if (fontFamily) {
                  oStyle.fontFamily = fontFamily;
                }
                if (lineHeight) {
                  oStyle.lineHeight = lineHeight === "normal" ? 1 : lineHeight;
                }
              },
              getGradientDefs: function(doc) {
                var tagArray = [
                  "linearGradient",
                  "radialGradient",
                  "svg:linearGradient",
                  "svg:radialGradient"
                ], elList = _getMultipleNodes(doc, tagArray), el, j = 0, gradientDefs = {};
                j = elList.length;
                while (j--) {
                  el = elList[j];
                  if (el.getAttribute("xlink:href")) {
                    recursivelyParseGradientsXlink(doc, el);
                  }
                  gradientDefs[el.getAttribute("id")] = el;
                }
                return gradientDefs;
              },
              parseAttributes: function(element, attributes, svgUid) {
                if (!element) {
                  return;
                }
                var value, parentAttributes = {}, fontSize, parentFontSize;
                if (typeof svgUid === "undefined") {
                  svgUid = element.getAttribute("svgUid");
                }
                if (element.parentNode && fabric2.svgValidParentsRegEx.test(element.parentNode.nodeName)) {
                  parentAttributes = fabric2.parseAttributes(element.parentNode, attributes, svgUid);
                }
                var ownAttributes = attributes.reduce(function(memo, attr2) {
                  value = element.getAttribute(attr2);
                  if (value) {
                    memo[attr2] = value;
                  }
                  return memo;
                }, {});
                var cssAttrs = extend(getGlobalStylesForElement(element, svgUid), fabric2.parseStyleAttribute(element));
                ownAttributes = extend(ownAttributes, cssAttrs);
                if (cssAttrs[cPath]) {
                  element.setAttribute(cPath, cssAttrs[cPath]);
                }
                fontSize = parentFontSize = parentAttributes.fontSize || fabric2.Text.DEFAULT_SVG_FONT_SIZE;
                if (ownAttributes[fSize]) {
                  ownAttributes[fSize] = fontSize = parseUnit(ownAttributes[fSize], parentFontSize);
                }
                var normalizedAttr, normalizedValue, normalizedStyle = {};
                for (var attr in ownAttributes) {
                  normalizedAttr = normalizeAttr(attr);
                  normalizedValue = normalizeValue(normalizedAttr, ownAttributes[attr], parentAttributes, fontSize);
                  normalizedStyle[normalizedAttr] = normalizedValue;
                }
                if (normalizedStyle && normalizedStyle.font) {
                  fabric2.parseFontDeclaration(normalizedStyle.font, normalizedStyle);
                }
                var mergedAttrs = extend(parentAttributes, normalizedStyle);
                return fabric2.svgValidParentsRegEx.test(element.nodeName) ? mergedAttrs : _setStrokeFillOpacity(mergedAttrs);
              },
              parseElements: function(elements, callback, options, reviver, parsingOptions) {
                new fabric2.ElementsParser(elements, callback, options, reviver, parsingOptions).parse();
              },
              parseStyleAttribute: function(element) {
                var oStyle = {}, style = element.getAttribute("style");
                if (!style) {
                  return oStyle;
                }
                if (typeof style === "string") {
                  parseStyleString(style, oStyle);
                } else {
                  parseStyleObject(style, oStyle);
                }
                return oStyle;
              },
              parsePointsAttribute: function(points) {
                if (!points) {
                  return null;
                }
                points = points.replace(/,/g, " ").trim();
                points = points.split(/\s+/);
                var parsedPoints = [], i, len;
                for (i = 0, len = points.length; i < len; i += 2) {
                  parsedPoints.push({
                    x: parseFloat(points[i]),
                    y: parseFloat(points[i + 1])
                  });
                }
                return parsedPoints;
              },
              getCSSRules: function(doc) {
                var styles = doc.getElementsByTagName("style"), i, len, allRules = {}, rules;
                for (i = 0, len = styles.length; i < len; i++) {
                  var styleContents = styles[i].textContent;
                  styleContents = styleContents.replace(/\/\*[\s\S]*?\*\//g, "");
                  if (styleContents.trim() === "") {
                    continue;
                  }
                  rules = styleContents.match(/[^{]*\{[\s\S]*?\}/g);
                  rules = rules.map(function(rule) {
                    return rule.trim();
                  });
                  rules.forEach(function(rule) {
                    var match = rule.match(/([\s\S]*?)\s*\{([^}]*)\}/), ruleObj = {}, declaration = match[2].trim(), propertyValuePairs = declaration.replace(/;$/, "").split(/\s*;\s*/);
                    for (i = 0, len = propertyValuePairs.length; i < len; i++) {
                      var pair = propertyValuePairs[i].split(/\s*:\s*/), property = pair[0], value = pair[1];
                      ruleObj[property] = value;
                    }
                    rule = match[1];
                    rule.split(",").forEach(function(_rule) {
                      _rule = _rule.replace(/^svg/i, "").trim();
                      if (_rule === "") {
                        return;
                      }
                      if (allRules[_rule]) {
                        fabric2.util.object.extend(allRules[_rule], ruleObj);
                      } else {
                        allRules[_rule] = fabric2.util.object.clone(ruleObj);
                      }
                    });
                  });
                }
                return allRules;
              },
              loadSVGFromURL: function(url, callback, reviver, options) {
                url = url.replace(/^\n\s*/, "").trim();
                new fabric2.util.request(url, {
                  method: "get",
                  onComplete
                });
                function onComplete(r) {
                  var xml = r.responseXML;
                  if (!xml || !xml.documentElement) {
                    callback && callback(null);
                    return false;
                  }
                  fabric2.parseSVGDocument(xml.documentElement, function(results, _options, elements, allElements) {
                    callback && callback(results, _options, elements, allElements);
                  }, reviver, options);
                }
              },
              loadSVGFromString: function(string, callback, reviver, options) {
                var parser = new fabric2.window.DOMParser(), doc = parser.parseFromString(string.trim(), "text/xml");
                fabric2.parseSVGDocument(doc.documentElement, function(results, _options, elements, allElements) {
                  callback(results, _options, elements, allElements);
                }, reviver, options);
              }
            });
          })(exports2);
          fabric.ElementsParser = function(elements, callback, options, reviver, parsingOptions, doc) {
            this.elements = elements;
            this.callback = callback;
            this.options = options;
            this.reviver = reviver;
            this.svgUid = options && options.svgUid || 0;
            this.parsingOptions = parsingOptions;
            this.regexUrl = /^url\(['"]?#([^'"]+)['"]?\)/g;
            this.doc = doc;
          };
          (function(proto) {
            proto.parse = function() {
              this.instances = new Array(this.elements.length);
              this.numElements = this.elements.length;
              this.createObjects();
            };
            proto.createObjects = function() {
              var _this = this;
              this.elements.forEach(function(element, i) {
                element.setAttribute("svgUid", _this.svgUid);
                _this.createObject(element, i);
              });
            };
            proto.findTag = function(el) {
              return fabric[fabric.util.string.capitalize(el.tagName.replace("svg:", ""))];
            };
            proto.createObject = function(el, index) {
              var klass = this.findTag(el);
              if (klass && klass.fromElement) {
                try {
                  klass.fromElement(el, this.createCallback(index, el), this.options);
                } catch (err) {
                  fabric.log(err);
                }
              } else {
                this.checkIfDone();
              }
            };
            proto.createCallback = function(index, el) {
              var _this = this;
              return function(obj) {
                var _options;
                _this.resolveGradient(obj, el, "fill");
                _this.resolveGradient(obj, el, "stroke");
                if (obj instanceof fabric.Image && obj._originalElement) {
                  _options = obj.parsePreserveAspectRatioAttribute(el);
                }
                obj._removeTransformMatrix(_options);
                _this.resolveClipPath(obj, el);
                _this.reviver && _this.reviver(el, obj);
                _this.instances[index] = obj;
                _this.checkIfDone();
              };
            };
            proto.extractPropertyDefinition = function(obj, property, storage) {
              var value = obj[property], regex = this.regexUrl;
              if (!regex.test(value)) {
                return;
              }
              regex.lastIndex = 0;
              var id = regex.exec(value)[1];
              regex.lastIndex = 0;
              return fabric[storage][this.svgUid][id];
            };
            proto.resolveGradient = function(obj, el, property) {
              var gradientDef = this.extractPropertyDefinition(obj, property, "gradientDefs");
              if (gradientDef) {
                var opacityAttr = el.getAttribute(property + "-opacity");
                var gradient = fabric.Gradient.fromElement(gradientDef, obj, opacityAttr, this.options);
                obj.set(property, gradient);
              }
            };
            proto.createClipPathCallback = function(obj, container) {
              return function(_newObj) {
                _newObj._removeTransformMatrix();
                _newObj.fillRule = _newObj.clipRule;
                container.push(_newObj);
              };
            };
            proto.resolveClipPath = function(obj, usingElement) {
              var clipPath = this.extractPropertyDefinition(obj, "clipPath", "clipPaths"), element, klass, objTransformInv, container, gTransform, options;
              if (clipPath) {
                container = [];
                objTransformInv = fabric.util.invertTransform(obj.calcTransformMatrix());
                var clipPathTag = clipPath[0].parentNode;
                var clipPathOwner = usingElement;
                while (clipPathOwner.parentNode && clipPathOwner.getAttribute("clip-path") !== obj.clipPath) {
                  clipPathOwner = clipPathOwner.parentNode;
                }
                clipPathOwner.parentNode.appendChild(clipPathTag);
                for (var i = 0; i < clipPath.length; i++) {
                  element = clipPath[i];
                  klass = this.findTag(element);
                  klass.fromElement(element, this.createClipPathCallback(obj, container), this.options);
                }
                if (container.length === 1) {
                  clipPath = container[0];
                } else {
                  clipPath = new fabric.Group(container);
                }
                gTransform = fabric.util.multiplyTransformMatrices(objTransformInv, clipPath.calcTransformMatrix());
                if (clipPath.clipPath) {
                  this.resolveClipPath(clipPath, clipPathOwner);
                }
                var options = fabric.util.qrDecompose(gTransform);
                clipPath.flipX = false;
                clipPath.flipY = false;
                clipPath.set("scaleX", options.scaleX);
                clipPath.set("scaleY", options.scaleY);
                clipPath.angle = options.angle;
                clipPath.skewX = options.skewX;
                clipPath.skewY = 0;
                clipPath.setPositionByOrigin({ x: options.translateX, y: options.translateY }, "center", "center");
                obj.clipPath = clipPath;
              } else {
                delete obj.clipPath;
              }
            };
            proto.checkIfDone = function() {
              if (--this.numElements === 0) {
                this.instances = this.instances.filter(function(el) {
                  return el != null;
                });
                this.callback(this.instances, this.elements);
              }
            };
          })(fabric.ElementsParser.prototype);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {});
            if (fabric2.Point) {
              fabric2.warn("fabric.Point is already defined");
              return;
            }
            fabric2.Point = Point;
            function Point(x, y) {
              this.x = x;
              this.y = y;
            }
            Point.prototype = {
              type: "point",
              constructor: Point,
              add: function(that) {
                return new Point(this.x + that.x, this.y + that.y);
              },
              addEquals: function(that) {
                this.x += that.x;
                this.y += that.y;
                return this;
              },
              scalarAdd: function(scalar) {
                return new Point(this.x + scalar, this.y + scalar);
              },
              scalarAddEquals: function(scalar) {
                this.x += scalar;
                this.y += scalar;
                return this;
              },
              subtract: function(that) {
                return new Point(this.x - that.x, this.y - that.y);
              },
              subtractEquals: function(that) {
                this.x -= that.x;
                this.y -= that.y;
                return this;
              },
              scalarSubtract: function(scalar) {
                return new Point(this.x - scalar, this.y - scalar);
              },
              scalarSubtractEquals: function(scalar) {
                this.x -= scalar;
                this.y -= scalar;
                return this;
              },
              multiply: function(scalar) {
                return new Point(this.x * scalar, this.y * scalar);
              },
              multiplyEquals: function(scalar) {
                this.x *= scalar;
                this.y *= scalar;
                return this;
              },
              divide: function(scalar) {
                return new Point(this.x / scalar, this.y / scalar);
              },
              divideEquals: function(scalar) {
                this.x /= scalar;
                this.y /= scalar;
                return this;
              },
              eq: function(that) {
                return this.x === that.x && this.y === that.y;
              },
              lt: function(that) {
                return this.x < that.x && this.y < that.y;
              },
              lte: function(that) {
                return this.x <= that.x && this.y <= that.y;
              },
              gt: function(that) {
                return this.x > that.x && this.y > that.y;
              },
              gte: function(that) {
                return this.x >= that.x && this.y >= that.y;
              },
              lerp: function(that, t) {
                if (typeof t === "undefined") {
                  t = 0.5;
                }
                t = Math.max(Math.min(1, t), 0);
                return new Point(this.x + (that.x - this.x) * t, this.y + (that.y - this.y) * t);
              },
              distanceFrom: function(that) {
                var dx = this.x - that.x, dy = this.y - that.y;
                return Math.sqrt(dx * dx + dy * dy);
              },
              midPointFrom: function(that) {
                return this.lerp(that);
              },
              min: function(that) {
                return new Point(Math.min(this.x, that.x), Math.min(this.y, that.y));
              },
              max: function(that) {
                return new Point(Math.max(this.x, that.x), Math.max(this.y, that.y));
              },
              toString: function() {
                return this.x + "," + this.y;
              },
              setXY: function(x, y) {
                this.x = x;
                this.y = y;
                return this;
              },
              setX: function(x) {
                this.x = x;
                return this;
              },
              setY: function(y) {
                this.y = y;
                return this;
              },
              setFromPoint: function(that) {
                this.x = that.x;
                this.y = that.y;
                return this;
              },
              swap: function(that) {
                var x = this.x, y = this.y;
                this.x = that.x;
                this.y = that.y;
                that.x = x;
                that.y = y;
              },
              clone: function() {
                return new Point(this.x, this.y);
              }
            };
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {});
            if (fabric2.Intersection) {
              fabric2.warn("fabric.Intersection is already defined");
              return;
            }
            function Intersection(status) {
              this.status = status;
              this.points = [];
            }
            fabric2.Intersection = Intersection;
            fabric2.Intersection.prototype = {
              constructor: Intersection,
              appendPoint: function(point) {
                this.points.push(point);
                return this;
              },
              appendPoints: function(points) {
                this.points = this.points.concat(points);
                return this;
              }
            };
            fabric2.Intersection.intersectLineLine = function(a1, a2, b1, b2) {
              var result, uaT = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x), ubT = (a2.x - a1.x) * (a1.y - b1.y) - (a2.y - a1.y) * (a1.x - b1.x), uB = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);
              if (uB !== 0) {
                var ua = uaT / uB, ub = ubT / uB;
                if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {
                  result = new Intersection("Intersection");
                  result.appendPoint(new fabric2.Point(a1.x + ua * (a2.x - a1.x), a1.y + ua * (a2.y - a1.y)));
                } else {
                  result = new Intersection();
                }
              } else {
                if (uaT === 0 || ubT === 0) {
                  result = new Intersection("Coincident");
                } else {
                  result = new Intersection("Parallel");
                }
              }
              return result;
            };
            fabric2.Intersection.intersectLinePolygon = function(a1, a2, points) {
              var result = new Intersection(), length = points.length, b1, b2, inter, i;
              for (i = 0; i < length; i++) {
                b1 = points[i];
                b2 = points[(i + 1) % length];
                inter = Intersection.intersectLineLine(a1, a2, b1, b2);
                result.appendPoints(inter.points);
              }
              if (result.points.length > 0) {
                result.status = "Intersection";
              }
              return result;
            };
            fabric2.Intersection.intersectPolygonPolygon = function(points1, points2) {
              var result = new Intersection(), length = points1.length, i;
              for (i = 0; i < length; i++) {
                var a1 = points1[i], a2 = points1[(i + 1) % length], inter = Intersection.intersectLinePolygon(a1, a2, points2);
                result.appendPoints(inter.points);
              }
              if (result.points.length > 0) {
                result.status = "Intersection";
              }
              return result;
            };
            fabric2.Intersection.intersectPolygonRectangle = function(points, r1, r2) {
              var min = r1.min(r2), max = r1.max(r2), topRight = new fabric2.Point(max.x, min.y), bottomLeft = new fabric2.Point(min.x, max.y), inter1 = Intersection.intersectLinePolygon(min, topRight, points), inter2 = Intersection.intersectLinePolygon(topRight, max, points), inter3 = Intersection.intersectLinePolygon(max, bottomLeft, points), inter4 = Intersection.intersectLinePolygon(bottomLeft, min, points), result = new Intersection();
              result.appendPoints(inter1.points);
              result.appendPoints(inter2.points);
              result.appendPoints(inter3.points);
              result.appendPoints(inter4.points);
              if (result.points.length > 0) {
                result.status = "Intersection";
              }
              return result;
            };
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {});
            if (fabric2.Color) {
              fabric2.warn("fabric.Color is already defined.");
              return;
            }
            function Color(color) {
              if (!color) {
                this.setSource([0, 0, 0, 1]);
              } else {
                this._tryParsingColor(color);
              }
            }
            fabric2.Color = Color;
            fabric2.Color.prototype = {
              _tryParsingColor: function(color) {
                var source;
                if (color in Color.colorNameMap) {
                  color = Color.colorNameMap[color];
                }
                if (color === "transparent") {
                  source = [255, 255, 255, 0];
                }
                if (!source) {
                  source = Color.sourceFromHex(color);
                }
                if (!source) {
                  source = Color.sourceFromRgb(color);
                }
                if (!source) {
                  source = Color.sourceFromHsl(color);
                }
                if (!source) {
                  source = [0, 0, 0, 1];
                }
                if (source) {
                  this.setSource(source);
                }
              },
              _rgbToHsl: function(r, g, b) {
                r /= 255;
                g /= 255;
                b /= 255;
                var h, s, l, max = fabric2.util.array.max([r, g, b]), min = fabric2.util.array.min([r, g, b]);
                l = (max + min) / 2;
                if (max === min) {
                  h = s = 0;
                } else {
                  var d = max - min;
                  s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                  switch (max) {
                    case r:
                      h = (g - b) / d + (g < b ? 6 : 0);
                      break;
                    case g:
                      h = (b - r) / d + 2;
                      break;
                    case b:
                      h = (r - g) / d + 4;
                      break;
                  }
                  h /= 6;
                }
                return [
                  Math.round(h * 360),
                  Math.round(s * 100),
                  Math.round(l * 100)
                ];
              },
              getSource: function() {
                return this._source;
              },
              setSource: function(source) {
                this._source = source;
              },
              toRgb: function() {
                var source = this.getSource();
                return "rgb(" + source[0] + "," + source[1] + "," + source[2] + ")";
              },
              toRgba: function() {
                var source = this.getSource();
                return "rgba(" + source[0] + "," + source[1] + "," + source[2] + "," + source[3] + ")";
              },
              toHsl: function() {
                var source = this.getSource(), hsl = this._rgbToHsl(source[0], source[1], source[2]);
                return "hsl(" + hsl[0] + "," + hsl[1] + "%," + hsl[2] + "%)";
              },
              toHsla: function() {
                var source = this.getSource(), hsl = this._rgbToHsl(source[0], source[1], source[2]);
                return "hsla(" + hsl[0] + "," + hsl[1] + "%," + hsl[2] + "%," + source[3] + ")";
              },
              toHex: function() {
                var source = this.getSource(), r, g, b;
                r = source[0].toString(16);
                r = r.length === 1 ? "0" + r : r;
                g = source[1].toString(16);
                g = g.length === 1 ? "0" + g : g;
                b = source[2].toString(16);
                b = b.length === 1 ? "0" + b : b;
                return r.toUpperCase() + g.toUpperCase() + b.toUpperCase();
              },
              toHexa: function() {
                var source = this.getSource(), a;
                a = Math.round(source[3] * 255);
                a = a.toString(16);
                a = a.length === 1 ? "0" + a : a;
                return this.toHex() + a.toUpperCase();
              },
              getAlpha: function() {
                return this.getSource()[3];
              },
              setAlpha: function(alpha) {
                var source = this.getSource();
                source[3] = alpha;
                this.setSource(source);
                return this;
              },
              toGrayscale: function() {
                var source = this.getSource(), average = parseInt((source[0] * 0.3 + source[1] * 0.59 + source[2] * 0.11).toFixed(0), 10), currentAlpha = source[3];
                this.setSource([average, average, average, currentAlpha]);
                return this;
              },
              toBlackWhite: function(threshold) {
                var source = this.getSource(), average = (source[0] * 0.3 + source[1] * 0.59 + source[2] * 0.11).toFixed(0), currentAlpha = source[3];
                threshold = threshold || 127;
                average = Number(average) < Number(threshold) ? 0 : 255;
                this.setSource([average, average, average, currentAlpha]);
                return this;
              },
              overlayWith: function(otherColor) {
                if (!(otherColor instanceof Color)) {
                  otherColor = new Color(otherColor);
                }
                var result = [], alpha = this.getAlpha(), otherAlpha = 0.5, source = this.getSource(), otherSource = otherColor.getSource(), i;
                for (i = 0; i < 3; i++) {
                  result.push(Math.round(source[i] * (1 - otherAlpha) + otherSource[i] * otherAlpha));
                }
                result[3] = alpha;
                this.setSource(result);
                return this;
              }
            };
            fabric2.Color.reRGBa = /^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i;
            fabric2.Color.reHSLa = /^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i;
            fabric2.Color.reHex = /^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i;
            fabric2.Color.colorNameMap = {
              aliceblue: "#F0F8FF",
              antiquewhite: "#FAEBD7",
              aqua: "#00FFFF",
              aquamarine: "#7FFFD4",
              azure: "#F0FFFF",
              beige: "#F5F5DC",
              bisque: "#FFE4C4",
              black: "#000000",
              blanchedalmond: "#FFEBCD",
              blue: "#0000FF",
              blueviolet: "#8A2BE2",
              brown: "#A52A2A",
              burlywood: "#DEB887",
              cadetblue: "#5F9EA0",
              chartreuse: "#7FFF00",
              chocolate: "#D2691E",
              coral: "#FF7F50",
              cornflowerblue: "#6495ED",
              cornsilk: "#FFF8DC",
              crimson: "#DC143C",
              cyan: "#00FFFF",
              darkblue: "#00008B",
              darkcyan: "#008B8B",
              darkgoldenrod: "#B8860B",
              darkgray: "#A9A9A9",
              darkgrey: "#A9A9A9",
              darkgreen: "#006400",
              darkkhaki: "#BDB76B",
              darkmagenta: "#8B008B",
              darkolivegreen: "#556B2F",
              darkorange: "#FF8C00",
              darkorchid: "#9932CC",
              darkred: "#8B0000",
              darksalmon: "#E9967A",
              darkseagreen: "#8FBC8F",
              darkslateblue: "#483D8B",
              darkslategray: "#2F4F4F",
              darkslategrey: "#2F4F4F",
              darkturquoise: "#00CED1",
              darkviolet: "#9400D3",
              deeppink: "#FF1493",
              deepskyblue: "#00BFFF",
              dimgray: "#696969",
              dimgrey: "#696969",
              dodgerblue: "#1E90FF",
              firebrick: "#B22222",
              floralwhite: "#FFFAF0",
              forestgreen: "#228B22",
              fuchsia: "#FF00FF",
              gainsboro: "#DCDCDC",
              ghostwhite: "#F8F8FF",
              gold: "#FFD700",
              goldenrod: "#DAA520",
              gray: "#808080",
              grey: "#808080",
              green: "#008000",
              greenyellow: "#ADFF2F",
              honeydew: "#F0FFF0",
              hotpink: "#FF69B4",
              indianred: "#CD5C5C",
              indigo: "#4B0082",
              ivory: "#FFFFF0",
              khaki: "#F0E68C",
              lavender: "#E6E6FA",
              lavenderblush: "#FFF0F5",
              lawngreen: "#7CFC00",
              lemonchiffon: "#FFFACD",
              lightblue: "#ADD8E6",
              lightcoral: "#F08080",
              lightcyan: "#E0FFFF",
              lightgoldenrodyellow: "#FAFAD2",
              lightgray: "#D3D3D3",
              lightgrey: "#D3D3D3",
              lightgreen: "#90EE90",
              lightpink: "#FFB6C1",
              lightsalmon: "#FFA07A",
              lightseagreen: "#20B2AA",
              lightskyblue: "#87CEFA",
              lightslategray: "#778899",
              lightslategrey: "#778899",
              lightsteelblue: "#B0C4DE",
              lightyellow: "#FFFFE0",
              lime: "#00FF00",
              limegreen: "#32CD32",
              linen: "#FAF0E6",
              magenta: "#FF00FF",
              maroon: "#800000",
              mediumaquamarine: "#66CDAA",
              mediumblue: "#0000CD",
              mediumorchid: "#BA55D3",
              mediumpurple: "#9370DB",
              mediumseagreen: "#3CB371",
              mediumslateblue: "#7B68EE",
              mediumspringgreen: "#00FA9A",
              mediumturquoise: "#48D1CC",
              mediumvioletred: "#C71585",
              midnightblue: "#191970",
              mintcream: "#F5FFFA",
              mistyrose: "#FFE4E1",
              moccasin: "#FFE4B5",
              navajowhite: "#FFDEAD",
              navy: "#000080",
              oldlace: "#FDF5E6",
              olive: "#808000",
              olivedrab: "#6B8E23",
              orange: "#FFA500",
              orangered: "#FF4500",
              orchid: "#DA70D6",
              palegoldenrod: "#EEE8AA",
              palegreen: "#98FB98",
              paleturquoise: "#AFEEEE",
              palevioletred: "#DB7093",
              papayawhip: "#FFEFD5",
              peachpuff: "#FFDAB9",
              peru: "#CD853F",
              pink: "#FFC0CB",
              plum: "#DDA0DD",
              powderblue: "#B0E0E6",
              purple: "#800080",
              rebeccapurple: "#663399",
              red: "#FF0000",
              rosybrown: "#BC8F8F",
              royalblue: "#4169E1",
              saddlebrown: "#8B4513",
              salmon: "#FA8072",
              sandybrown: "#F4A460",
              seagreen: "#2E8B57",
              seashell: "#FFF5EE",
              sienna: "#A0522D",
              silver: "#C0C0C0",
              skyblue: "#87CEEB",
              slateblue: "#6A5ACD",
              slategray: "#708090",
              slategrey: "#708090",
              snow: "#FFFAFA",
              springgreen: "#00FF7F",
              steelblue: "#4682B4",
              tan: "#D2B48C",
              teal: "#008080",
              thistle: "#D8BFD8",
              tomato: "#FF6347",
              turquoise: "#40E0D0",
              violet: "#EE82EE",
              wheat: "#F5DEB3",
              white: "#FFFFFF",
              whitesmoke: "#F5F5F5",
              yellow: "#FFFF00",
              yellowgreen: "#9ACD32"
            };
            function hue2rgb(p, q, t) {
              if (t < 0) {
                t += 1;
              }
              if (t > 1) {
                t -= 1;
              }
              if (t < 1 / 6) {
                return p + (q - p) * 6 * t;
              }
              if (t < 1 / 2) {
                return q;
              }
              if (t < 2 / 3) {
                return p + (q - p) * (2 / 3 - t) * 6;
              }
              return p;
            }
            fabric2.Color.fromRgb = function(color) {
              return Color.fromSource(Color.sourceFromRgb(color));
            };
            fabric2.Color.sourceFromRgb = function(color) {
              var match = color.match(Color.reRGBa);
              if (match) {
                var r = parseInt(match[1], 10) / (/%$/.test(match[1]) ? 100 : 1) * (/%$/.test(match[1]) ? 255 : 1), g = parseInt(match[2], 10) / (/%$/.test(match[2]) ? 100 : 1) * (/%$/.test(match[2]) ? 255 : 1), b = parseInt(match[3], 10) / (/%$/.test(match[3]) ? 100 : 1) * (/%$/.test(match[3]) ? 255 : 1);
                return [
                  parseInt(r, 10),
                  parseInt(g, 10),
                  parseInt(b, 10),
                  match[4] ? parseFloat(match[4]) : 1
                ];
              }
            };
            fabric2.Color.fromRgba = Color.fromRgb;
            fabric2.Color.fromHsl = function(color) {
              return Color.fromSource(Color.sourceFromHsl(color));
            };
            fabric2.Color.sourceFromHsl = function(color) {
              var match = color.match(Color.reHSLa);
              if (!match) {
                return;
              }
              var h = (parseFloat(match[1]) % 360 + 360) % 360 / 360, s = parseFloat(match[2]) / (/%$/.test(match[2]) ? 100 : 1), l = parseFloat(match[3]) / (/%$/.test(match[3]) ? 100 : 1), r, g, b;
              if (s === 0) {
                r = g = b = l;
              } else {
                var q = l <= 0.5 ? l * (s + 1) : l + s - l * s, p = l * 2 - q;
                r = hue2rgb(p, q, h + 1 / 3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1 / 3);
              }
              return [
                Math.round(r * 255),
                Math.round(g * 255),
                Math.round(b * 255),
                match[4] ? parseFloat(match[4]) : 1
              ];
            };
            fabric2.Color.fromHsla = Color.fromHsl;
            fabric2.Color.fromHex = function(color) {
              return Color.fromSource(Color.sourceFromHex(color));
            };
            fabric2.Color.sourceFromHex = function(color) {
              if (color.match(Color.reHex)) {
                var value = color.slice(color.indexOf("#") + 1), isShortNotation = value.length === 3 || value.length === 4, isRGBa = value.length === 8 || value.length === 4, r = isShortNotation ? value.charAt(0) + value.charAt(0) : value.substring(0, 2), g = isShortNotation ? value.charAt(1) + value.charAt(1) : value.substring(2, 4), b = isShortNotation ? value.charAt(2) + value.charAt(2) : value.substring(4, 6), a = isRGBa ? isShortNotation ? value.charAt(3) + value.charAt(3) : value.substring(6, 8) : "FF";
                return [
                  parseInt(r, 16),
                  parseInt(g, 16),
                  parseInt(b, 16),
                  parseFloat((parseInt(a, 16) / 255).toFixed(2))
                ];
              }
            };
            fabric2.Color.fromSource = function(source) {
              var oColor = new Color();
              oColor.setSource(source);
              return oColor;
            };
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), scaleMap = ["e", "se", "s", "sw", "w", "nw", "n", "ne", "e"], skewMap = ["ns", "nesw", "ew", "nwse"], controls = {}, LEFT = "left", TOP = "top", RIGHT = "right", BOTTOM = "bottom", CENTER = "center", opposite = {
              top: BOTTOM,
              bottom: TOP,
              left: RIGHT,
              right: LEFT,
              center: CENTER
            }, radiansToDegrees = fabric2.util.radiansToDegrees, sign = Math.sign || function(x) {
              return (x > 0) - (x < 0) || +x;
            };
            function findCornerQuadrant(fabricObject, control) {
              var cornerAngle = fabricObject.angle + radiansToDegrees(Math.atan2(control.y, control.x)) + 360;
              return Math.round(cornerAngle % 360 / 45);
            }
            function fireEvent(eventName, options) {
              var target = options.transform.target, canvas = target.canvas, canvasOptions = fabric2.util.object.clone(options);
              canvasOptions.target = target;
              canvas && canvas.fire("object:" + eventName, canvasOptions);
              target.fire(eventName, options);
            }
            function scaleIsProportional(eventData, fabricObject) {
              var canvas = fabricObject.canvas, uniScaleKey = canvas.uniScaleKey, uniformIsToggled = eventData[uniScaleKey];
              return canvas.uniformScaling && !uniformIsToggled || !canvas.uniformScaling && uniformIsToggled;
            }
            function isTransformCentered(transform) {
              return transform.originX === CENTER && transform.originY === CENTER;
            }
            function scalingIsForbidden(fabricObject, by, scaleProportionally) {
              var lockX = fabricObject.lockScalingX, lockY = fabricObject.lockScalingY;
              if (lockX && lockY) {
                return true;
              }
              if (!by && (lockX || lockY) && scaleProportionally) {
                return true;
              }
              if (lockX && by === "x") {
                return true;
              }
              if (lockY && by === "y") {
                return true;
              }
              return false;
            }
            function scaleCursorStyleHandler(eventData, control, fabricObject) {
              var notAllowed = "not-allowed", scaleProportionally = scaleIsProportional(eventData, fabricObject), by = "";
              if (control.x !== 0 && control.y === 0) {
                by = "x";
              } else if (control.x === 0 && control.y !== 0) {
                by = "y";
              }
              if (scalingIsForbidden(fabricObject, by, scaleProportionally)) {
                return notAllowed;
              }
              var n = findCornerQuadrant(fabricObject, control);
              return scaleMap[n] + "-resize";
            }
            function skewCursorStyleHandler(eventData, control, fabricObject) {
              var notAllowed = "not-allowed";
              if (control.x !== 0 && fabricObject.lockSkewingY) {
                return notAllowed;
              }
              if (control.y !== 0 && fabricObject.lockSkewingX) {
                return notAllowed;
              }
              var n = findCornerQuadrant(fabricObject, control) % 4;
              return skewMap[n] + "-resize";
            }
            function scaleSkewCursorStyleHandler(eventData, control, fabricObject) {
              if (eventData[fabricObject.canvas.altActionKey]) {
                return controls.skewCursorStyleHandler(eventData, control, fabricObject);
              }
              return controls.scaleCursorStyleHandler(eventData, control, fabricObject);
            }
            function scaleOrSkewActionName(eventData, control, fabricObject) {
              var isAlternative = eventData[fabricObject.canvas.altActionKey];
              if (control.x === 0) {
                return isAlternative ? "skewX" : "scaleY";
              }
              if (control.y === 0) {
                return isAlternative ? "skewY" : "scaleX";
              }
            }
            function rotationStyleHandler(eventData, control, fabricObject) {
              if (fabricObject.lockRotation) {
                return "not-allowed";
              }
              return control.cursorStyle;
            }
            function commonEventInfo(eventData, transform, x, y) {
              return {
                e: eventData,
                transform,
                pointer: {
                  x,
                  y
                }
              };
            }
            function wrapWithFixedAnchor(actionHandler) {
              return function(eventData, transform, x, y) {
                var target = transform.target, centerPoint = target.getCenterPoint(), constraint = target.translateToOriginPoint(centerPoint, transform.originX, transform.originY), actionPerformed = actionHandler(eventData, transform, x, y);
                target.setPositionByOrigin(constraint, transform.originX, transform.originY);
                return actionPerformed;
              };
            }
            function wrapWithFireEvent(eventName, actionHandler) {
              return function(eventData, transform, x, y) {
                var actionPerformed = actionHandler(eventData, transform, x, y);
                if (actionPerformed) {
                  fireEvent(eventName, commonEventInfo(eventData, transform, x, y));
                }
                return actionPerformed;
              };
            }
            function getLocalPoint(transform, originX, originY, x, y) {
              var target = transform.target, control = target.controls[transform.corner], zoom = target.canvas.getZoom(), padding = target.padding / zoom, localPoint = target.toLocalPoint(new fabric2.Point(x, y), originX, originY);
              if (localPoint.x >= padding) {
                localPoint.x -= padding;
              }
              if (localPoint.x <= -padding) {
                localPoint.x += padding;
              }
              if (localPoint.y >= padding) {
                localPoint.y -= padding;
              }
              if (localPoint.y <= padding) {
                localPoint.y += padding;
              }
              localPoint.x -= control.offsetX;
              localPoint.y -= control.offsetY;
              return localPoint;
            }
            function targetHasOneFlip(target) {
              return target.flipX !== target.flipY;
            }
            function compensateScaleForSkew(target, oppositeSkew, scaleToCompensate, axis, reference) {
              if (target[oppositeSkew] !== 0) {
                var newDim = target._getTransformedDimensions()[axis];
                var newValue = reference / newDim * target[scaleToCompensate];
                target.set(scaleToCompensate, newValue);
              }
            }
            function skewObjectX(eventData, transform, x, y) {
              var target = transform.target, dimNoSkew = target._getTransformedDimensions(0, target.skewY), localPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y), totalSkewSize = Math.abs(localPoint.x * 2) - dimNoSkew.x, currentSkew = target.skewX, newSkew;
              if (totalSkewSize < 2) {
                newSkew = 0;
              } else {
                newSkew = radiansToDegrees(Math.atan2(totalSkewSize / target.scaleX, dimNoSkew.y / target.scaleY));
                if (transform.originX === LEFT && transform.originY === BOTTOM) {
                  newSkew = -newSkew;
                }
                if (transform.originX === RIGHT && transform.originY === TOP) {
                  newSkew = -newSkew;
                }
                if (targetHasOneFlip(target)) {
                  newSkew = -newSkew;
                }
              }
              var hasSkewed = currentSkew !== newSkew;
              if (hasSkewed) {
                var dimBeforeSkewing = target._getTransformedDimensions().y;
                target.set("skewX", newSkew);
                compensateScaleForSkew(target, "skewY", "scaleY", "y", dimBeforeSkewing);
              }
              return hasSkewed;
            }
            function skewObjectY(eventData, transform, x, y) {
              var target = transform.target, dimNoSkew = target._getTransformedDimensions(target.skewX, 0), localPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y), totalSkewSize = Math.abs(localPoint.y * 2) - dimNoSkew.y, currentSkew = target.skewY, newSkew;
              if (totalSkewSize < 2) {
                newSkew = 0;
              } else {
                newSkew = radiansToDegrees(Math.atan2(totalSkewSize / target.scaleY, dimNoSkew.x / target.scaleX));
                if (transform.originX === LEFT && transform.originY === BOTTOM) {
                  newSkew = -newSkew;
                }
                if (transform.originX === RIGHT && transform.originY === TOP) {
                  newSkew = -newSkew;
                }
                if (targetHasOneFlip(target)) {
                  newSkew = -newSkew;
                }
              }
              var hasSkewed = currentSkew !== newSkew;
              if (hasSkewed) {
                var dimBeforeSkewing = target._getTransformedDimensions().x;
                target.set("skewY", newSkew);
                compensateScaleForSkew(target, "skewX", "scaleX", "x", dimBeforeSkewing);
              }
              return hasSkewed;
            }
            function skewHandlerX(eventData, transform, x, y) {
              var target = transform.target, currentSkew = target.skewX, originX, originY = transform.originY;
              if (target.lockSkewingX) {
                return false;
              }
              if (currentSkew === 0) {
                var localPointFromCenter = getLocalPoint(transform, CENTER, CENTER, x, y);
                if (localPointFromCenter.x > 0) {
                  originX = LEFT;
                } else {
                  originX = RIGHT;
                }
              } else {
                if (currentSkew > 0) {
                  originX = originY === TOP ? LEFT : RIGHT;
                }
                if (currentSkew < 0) {
                  originX = originY === TOP ? RIGHT : LEFT;
                }
                if (targetHasOneFlip(target)) {
                  originX = originX === LEFT ? RIGHT : LEFT;
                }
              }
              transform.originX = originX;
              var finalHandler = wrapWithFireEvent("skewing", wrapWithFixedAnchor(skewObjectX));
              return finalHandler(eventData, transform, x, y);
            }
            function skewHandlerY(eventData, transform, x, y) {
              var target = transform.target, currentSkew = target.skewY, originY, originX = transform.originX;
              if (target.lockSkewingY) {
                return false;
              }
              if (currentSkew === 0) {
                var localPointFromCenter = getLocalPoint(transform, CENTER, CENTER, x, y);
                if (localPointFromCenter.y > 0) {
                  originY = TOP;
                } else {
                  originY = BOTTOM;
                }
              } else {
                if (currentSkew > 0) {
                  originY = originX === LEFT ? TOP : BOTTOM;
                }
                if (currentSkew < 0) {
                  originY = originX === LEFT ? BOTTOM : TOP;
                }
                if (targetHasOneFlip(target)) {
                  originY = originY === TOP ? BOTTOM : TOP;
                }
              }
              transform.originY = originY;
              var finalHandler = wrapWithFireEvent("skewing", wrapWithFixedAnchor(skewObjectY));
              return finalHandler(eventData, transform, x, y);
            }
            function rotationWithSnapping(eventData, transform, x, y) {
              var t = transform, target = t.target, pivotPoint = target.translateToOriginPoint(target.getCenterPoint(), t.originX, t.originY);
              if (target.lockRotation) {
                return false;
              }
              var lastAngle = Math.atan2(t.ey - pivotPoint.y, t.ex - pivotPoint.x), curAngle = Math.atan2(y - pivotPoint.y, x - pivotPoint.x), angle = radiansToDegrees(curAngle - lastAngle + t.theta), hasRotated = true;
              if (target.snapAngle > 0) {
                var snapAngle = target.snapAngle, snapThreshold = target.snapThreshold || snapAngle, rightAngleLocked = Math.ceil(angle / snapAngle) * snapAngle, leftAngleLocked = Math.floor(angle / snapAngle) * snapAngle;
                if (Math.abs(angle - leftAngleLocked) < snapThreshold) {
                  angle = leftAngleLocked;
                } else if (Math.abs(angle - rightAngleLocked) < snapThreshold) {
                  angle = rightAngleLocked;
                }
              }
              if (angle < 0) {
                angle = 360 + angle;
              }
              angle %= 360;
              hasRotated = target.angle !== angle;
              target.angle = angle;
              return hasRotated;
            }
            function scaleObject(eventData, transform, x, y, options) {
              options = options || {};
              var target = transform.target, lockScalingX = target.lockScalingX, lockScalingY = target.lockScalingY, by = options.by, newPoint, scaleX, scaleY, dim, scaleProportionally = scaleIsProportional(eventData, target), forbidScaling = scalingIsForbidden(target, by, scaleProportionally), signX, signY, gestureScale = transform.gestureScale;
              if (forbidScaling) {
                return false;
              }
              if (gestureScale) {
                scaleX = transform.scaleX * gestureScale;
                scaleY = transform.scaleY * gestureScale;
              } else {
                newPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y);
                signX = by !== "y" ? sign(newPoint.x) : 1;
                signY = by !== "x" ? sign(newPoint.y) : 1;
                if (!transform.signX) {
                  transform.signX = signX;
                }
                if (!transform.signY) {
                  transform.signY = signY;
                }
                if (target.lockScalingFlip && (transform.signX !== signX || transform.signY !== signY)) {
                  return false;
                }
                dim = target._getTransformedDimensions();
                if (scaleProportionally && !by) {
                  var distance = Math.abs(newPoint.x) + Math.abs(newPoint.y), original = transform.original, originalDistance = Math.abs(dim.x * original.scaleX / target.scaleX) + Math.abs(dim.y * original.scaleY / target.scaleY), scale = distance / originalDistance;
                  scaleX = original.scaleX * scale;
                  scaleY = original.scaleY * scale;
                } else {
                  scaleX = Math.abs(newPoint.x * target.scaleX / dim.x);
                  scaleY = Math.abs(newPoint.y * target.scaleY / dim.y);
                }
                if (isTransformCentered(transform)) {
                  scaleX *= 2;
                  scaleY *= 2;
                }
                if (transform.signX !== signX && by !== "y") {
                  transform.originX = opposite[transform.originX];
                  scaleX *= -1;
                  transform.signX = signX;
                }
                if (transform.signY !== signY && by !== "x") {
                  transform.originY = opposite[transform.originY];
                  scaleY *= -1;
                  transform.signY = signY;
                }
              }
              var oldScaleX = target.scaleX, oldScaleY = target.scaleY;
              if (!by) {
                !lockScalingX && target.set("scaleX", scaleX);
                !lockScalingY && target.set("scaleY", scaleY);
              } else {
                by === "x" && target.set("scaleX", scaleX);
                by === "y" && target.set("scaleY", scaleY);
              }
              return oldScaleX !== target.scaleX || oldScaleY !== target.scaleY;
            }
            function scaleObjectFromCorner(eventData, transform, x, y) {
              return scaleObject(eventData, transform, x, y);
            }
            function scaleObjectX(eventData, transform, x, y) {
              return scaleObject(eventData, transform, x, y, { by: "x" });
            }
            function scaleObjectY(eventData, transform, x, y) {
              return scaleObject(eventData, transform, x, y, { by: "y" });
            }
            function scalingYOrSkewingX(eventData, transform, x, y) {
              if (eventData[transform.target.canvas.altActionKey]) {
                return controls.skewHandlerX(eventData, transform, x, y);
              }
              return controls.scalingY(eventData, transform, x, y);
            }
            function scalingXOrSkewingY(eventData, transform, x, y) {
              if (eventData[transform.target.canvas.altActionKey]) {
                return controls.skewHandlerY(eventData, transform, x, y);
              }
              return controls.scalingX(eventData, transform, x, y);
            }
            function changeWidth(eventData, transform, x, y) {
              var target = transform.target, localPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y), strokePadding = target.strokeWidth / (target.strokeUniform ? target.scaleX : 1), multiplier = isTransformCentered(transform) ? 2 : 1, oldWidth = target.width, newWidth = Math.abs(localPoint.x * multiplier / target.scaleX) - strokePadding;
              target.set("width", Math.max(newWidth, 0));
              return oldWidth !== newWidth;
            }
            function dragHandler(eventData, transform, x, y) {
              var target = transform.target, newLeft = x - transform.offsetX, newTop = y - transform.offsetY, moveX = !target.get("lockMovementX") && target.left !== newLeft, moveY = !target.get("lockMovementY") && target.top !== newTop;
              moveX && target.set("left", newLeft);
              moveY && target.set("top", newTop);
              if (moveX || moveY) {
                fireEvent("moving", commonEventInfo(eventData, transform, x, y));
              }
              return moveX || moveY;
            }
            controls.scaleCursorStyleHandler = scaleCursorStyleHandler;
            controls.skewCursorStyleHandler = skewCursorStyleHandler;
            controls.scaleSkewCursorStyleHandler = scaleSkewCursorStyleHandler;
            controls.rotationWithSnapping = wrapWithFireEvent("rotating", wrapWithFixedAnchor(rotationWithSnapping));
            controls.scalingEqually = wrapWithFireEvent("scaling", wrapWithFixedAnchor(scaleObjectFromCorner));
            controls.scalingX = wrapWithFireEvent("scaling", wrapWithFixedAnchor(scaleObjectX));
            controls.scalingY = wrapWithFireEvent("scaling", wrapWithFixedAnchor(scaleObjectY));
            controls.scalingYOrSkewingX = scalingYOrSkewingX;
            controls.scalingXOrSkewingY = scalingXOrSkewingY;
            controls.changeWidth = wrapWithFireEvent("resizing", wrapWithFixedAnchor(changeWidth));
            controls.skewHandlerX = skewHandlerX;
            controls.skewHandlerY = skewHandlerY;
            controls.dragHandler = dragHandler;
            controls.scaleOrSkewActionName = scaleOrSkewActionName;
            controls.rotationStyleHandler = rotationStyleHandler;
            controls.fireEvent = fireEvent;
            controls.wrapWithFixedAnchor = wrapWithFixedAnchor;
            controls.wrapWithFireEvent = wrapWithFireEvent;
            controls.getLocalPoint = getLocalPoint;
            fabric2.controlsUtils = controls;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), degreesToRadians = fabric2.util.degreesToRadians, controls = fabric2.controlsUtils;
            function renderCircleControl(ctx, left, top, styleOverride, fabricObject) {
              styleOverride = styleOverride || {};
              var xSize = this.sizeX || styleOverride.cornerSize || fabricObject.cornerSize, ySize = this.sizeY || styleOverride.cornerSize || fabricObject.cornerSize, transparentCorners = typeof styleOverride.transparentCorners !== "undefined" ? styleOverride.transparentCorners : fabricObject.transparentCorners, methodName = transparentCorners ? "stroke" : "fill", stroke = !transparentCorners && (styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor), myLeft = left, myTop = top, size;
              ctx.save();
              ctx.fillStyle = styleOverride.cornerColor || fabricObject.cornerColor;
              ctx.strokeStyle = styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor;
              if (xSize > ySize) {
                size = xSize;
                ctx.scale(1, ySize / xSize);
                myTop = top * xSize / ySize;
              } else if (ySize > xSize) {
                size = ySize;
                ctx.scale(xSize / ySize, 1);
                myLeft = left * ySize / xSize;
              } else {
                size = xSize;
              }
              ctx.lineWidth = 1;
              ctx.beginPath();
              ctx.arc(myLeft, myTop, size / 2, 0, 2 * Math.PI, false);
              ctx[methodName]();
              if (stroke) {
                ctx.stroke();
              }
              ctx.restore();
            }
            function renderSquareControl(ctx, left, top, styleOverride, fabricObject) {
              styleOverride = styleOverride || {};
              var xSize = this.sizeX || styleOverride.cornerSize || fabricObject.cornerSize, ySize = this.sizeY || styleOverride.cornerSize || fabricObject.cornerSize, transparentCorners = typeof styleOverride.transparentCorners !== "undefined" ? styleOverride.transparentCorners : fabricObject.transparentCorners, methodName = transparentCorners ? "stroke" : "fill", stroke = !transparentCorners && (styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor), xSizeBy2 = xSize / 2, ySizeBy2 = ySize / 2;
              ctx.save();
              ctx.fillStyle = styleOverride.cornerColor || fabricObject.cornerColor;
              ctx.strokeStyle = styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor;
              ctx.lineWidth = 1;
              ctx.translate(left, top);
              ctx.rotate(degreesToRadians(fabricObject.angle));
              ctx[methodName + "Rect"](-xSizeBy2, -ySizeBy2, xSize, ySize);
              if (stroke) {
                ctx.strokeRect(-xSizeBy2, -ySizeBy2, xSize, ySize);
              }
              ctx.restore();
            }
            controls.renderCircleControl = renderCircleControl;
            controls.renderSquareControl = renderSquareControl;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {});
            function Control(options) {
              for (var i in options) {
                this[i] = options[i];
              }
            }
            fabric2.Control = Control;
            fabric2.Control.prototype = {
              visible: true,
              actionName: "scale",
              angle: 0,
              x: 0,
              y: 0,
              offsetX: 0,
              offsetY: 0,
              sizeX: null,
              sizeY: null,
              touchSizeX: null,
              touchSizeY: null,
              cursorStyle: "crosshair",
              withConnection: false,
              actionHandler: function() {
              },
              mouseDownHandler: function() {
              },
              mouseUpHandler: function() {
              },
              getActionHandler: function() {
                return this.actionHandler;
              },
              getMouseDownHandler: function() {
                return this.mouseDownHandler;
              },
              getMouseUpHandler: function() {
                return this.mouseUpHandler;
              },
              cursorStyleHandler: function(eventData, control) {
                return control.cursorStyle;
              },
              getActionName: function(eventData, control) {
                return control.actionName;
              },
              getVisibility: function(fabricObject, controlKey) {
                var objectVisibility = fabricObject._controlsVisibility;
                if (objectVisibility && typeof objectVisibility[controlKey] !== "undefined") {
                  return objectVisibility[controlKey];
                }
                return this.visible;
              },
              setVisibility: function(visibility) {
                this.visible = visibility;
              },
              positionHandler: function(dim, finalMatrix) {
                var point = fabric2.util.transformPoint({
                  x: this.x * dim.x + this.offsetX,
                  y: this.y * dim.y + this.offsetY
                }, finalMatrix);
                return point;
              },
              calcCornerCoords: function(objectAngle, objectCornerSize, centerX, centerY, isTouch) {
                var cosHalfOffset, sinHalfOffset, cosHalfOffsetComp, sinHalfOffsetComp, xSize = isTouch ? this.touchSizeX : this.sizeX, ySize = isTouch ? this.touchSizeY : this.sizeY;
                if (xSize && ySize && xSize !== ySize) {
                  var controlTriangleAngle = Math.atan2(ySize, xSize);
                  var cornerHypotenuse = Math.sqrt(xSize * xSize + ySize * ySize) / 2;
                  var newTheta = controlTriangleAngle - fabric2.util.degreesToRadians(objectAngle);
                  var newThetaComp = Math.PI / 2 - controlTriangleAngle - fabric2.util.degreesToRadians(objectAngle);
                  cosHalfOffset = cornerHypotenuse * fabric2.util.cos(newTheta);
                  sinHalfOffset = cornerHypotenuse * fabric2.util.sin(newTheta);
                  cosHalfOffsetComp = cornerHypotenuse * fabric2.util.cos(newThetaComp);
                  sinHalfOffsetComp = cornerHypotenuse * fabric2.util.sin(newThetaComp);
                } else {
                  var cornerSize = xSize && ySize ? xSize : objectCornerSize;
                  cornerHypotenuse = cornerSize * 0.7071067812;
                  var newTheta = fabric2.util.degreesToRadians(45 - objectAngle);
                  cosHalfOffset = cosHalfOffsetComp = cornerHypotenuse * fabric2.util.cos(newTheta);
                  sinHalfOffset = sinHalfOffsetComp = cornerHypotenuse * fabric2.util.sin(newTheta);
                }
                return {
                  tl: {
                    x: centerX - sinHalfOffsetComp,
                    y: centerY - cosHalfOffsetComp
                  },
                  tr: {
                    x: centerX + cosHalfOffset,
                    y: centerY - sinHalfOffset
                  },
                  bl: {
                    x: centerX - cosHalfOffset,
                    y: centerY + sinHalfOffset
                  },
                  br: {
                    x: centerX + sinHalfOffsetComp,
                    y: centerY + cosHalfOffsetComp
                  }
                };
              },
              render: function(ctx, left, top, styleOverride, fabricObject) {
                styleOverride = styleOverride || {};
                switch (styleOverride.cornerStyle || fabricObject.cornerStyle) {
                  case "circle":
                    fabric2.controlsUtils.renderCircleControl.call(this, ctx, left, top, styleOverride, fabricObject);
                    break;
                  default:
                    fabric2.controlsUtils.renderSquareControl.call(this, ctx, left, top, styleOverride, fabricObject);
                }
              }
            };
          })(exports2);
          (function() {
            function getColorStop(el, multiplier) {
              var style = el.getAttribute("style"), offset = el.getAttribute("offset") || 0, color, colorAlpha, opacity, i;
              offset = parseFloat(offset) / (/%$/.test(offset) ? 100 : 1);
              offset = offset < 0 ? 0 : offset > 1 ? 1 : offset;
              if (style) {
                var keyValuePairs = style.split(/\s*;\s*/);
                if (keyValuePairs[keyValuePairs.length - 1] === "") {
                  keyValuePairs.pop();
                }
                for (i = keyValuePairs.length; i--; ) {
                  var split = keyValuePairs[i].split(/\s*:\s*/), key = split[0].trim(), value = split[1].trim();
                  if (key === "stop-color") {
                    color = value;
                  } else if (key === "stop-opacity") {
                    opacity = value;
                  }
                }
              }
              if (!color) {
                color = el.getAttribute("stop-color") || "rgb(0,0,0)";
              }
              if (!opacity) {
                opacity = el.getAttribute("stop-opacity");
              }
              color = new fabric.Color(color);
              colorAlpha = color.getAlpha();
              opacity = isNaN(parseFloat(opacity)) ? 1 : parseFloat(opacity);
              opacity *= colorAlpha * multiplier;
              return {
                offset,
                color: color.toRgb(),
                opacity
              };
            }
            function getLinearCoords(el) {
              return {
                x1: el.getAttribute("x1") || 0,
                y1: el.getAttribute("y1") || 0,
                x2: el.getAttribute("x2") || "100%",
                y2: el.getAttribute("y2") || 0
              };
            }
            function getRadialCoords(el) {
              return {
                x1: el.getAttribute("fx") || el.getAttribute("cx") || "50%",
                y1: el.getAttribute("fy") || el.getAttribute("cy") || "50%",
                r1: 0,
                x2: el.getAttribute("cx") || "50%",
                y2: el.getAttribute("cy") || "50%",
                r2: el.getAttribute("r") || "50%"
              };
            }
            var clone = fabric.util.object.clone;
            fabric.Gradient = fabric.util.createClass({
              offsetX: 0,
              offsetY: 0,
              gradientTransform: null,
              gradientUnits: "pixels",
              type: "linear",
              initialize: function(options) {
                options || (options = {});
                options.coords || (options.coords = {});
                var coords, _this = this;
                Object.keys(options).forEach(function(option) {
                  _this[option] = options[option];
                });
                if (this.id) {
                  this.id += "_" + fabric.Object.__uid++;
                } else {
                  this.id = fabric.Object.__uid++;
                }
                coords = {
                  x1: options.coords.x1 || 0,
                  y1: options.coords.y1 || 0,
                  x2: options.coords.x2 || 0,
                  y2: options.coords.y2 || 0
                };
                if (this.type === "radial") {
                  coords.r1 = options.coords.r1 || 0;
                  coords.r2 = options.coords.r2 || 0;
                }
                this.coords = coords;
                this.colorStops = options.colorStops.slice();
              },
              addColorStop: function(colorStops) {
                for (var position in colorStops) {
                  var color = new fabric.Color(colorStops[position]);
                  this.colorStops.push({
                    offset: parseFloat(position),
                    color: color.toRgb(),
                    opacity: color.getAlpha()
                  });
                }
                return this;
              },
              toObject: function(propertiesToInclude) {
                var object = {
                  type: this.type,
                  coords: this.coords,
                  colorStops: this.colorStops,
                  offsetX: this.offsetX,
                  offsetY: this.offsetY,
                  gradientUnits: this.gradientUnits,
                  gradientTransform: this.gradientTransform ? this.gradientTransform.concat() : this.gradientTransform
                };
                fabric.util.populateWithProperties(this, object, propertiesToInclude);
                return object;
              },
              toSVG: function(object, options) {
                var coords = clone(this.coords, true), i, len, options = options || {}, markup, commonAttributes, colorStops = clone(this.colorStops, true), needsSwap = coords.r1 > coords.r2, transform = this.gradientTransform ? this.gradientTransform.concat() : fabric.iMatrix.concat(), offsetX = -this.offsetX, offsetY = -this.offsetY, withViewport = !!options.additionalTransform, gradientUnits = this.gradientUnits === "pixels" ? "userSpaceOnUse" : "objectBoundingBox";
                colorStops.sort(function(a, b) {
                  return a.offset - b.offset;
                });
                if (gradientUnits === "objectBoundingBox") {
                  offsetX /= object.width;
                  offsetY /= object.height;
                } else {
                  offsetX += object.width / 2;
                  offsetY += object.height / 2;
                }
                if (object.type === "path" && this.gradientUnits !== "percentage") {
                  offsetX -= object.pathOffset.x;
                  offsetY -= object.pathOffset.y;
                }
                transform[4] -= offsetX;
                transform[5] -= offsetY;
                commonAttributes = 'id="SVGID_' + this.id + '" gradientUnits="' + gradientUnits + '"';
                commonAttributes += ' gradientTransform="' + (withViewport ? options.additionalTransform + " " : "") + fabric.util.matrixToSVG(transform) + '" ';
                if (this.type === "linear") {
                  markup = [
                    "<linearGradient ",
                    commonAttributes,
                    ' x1="',
                    coords.x1,
                    '" y1="',
                    coords.y1,
                    '" x2="',
                    coords.x2,
                    '" y2="',
                    coords.y2,
                    '">\n'
                  ];
                } else if (this.type === "radial") {
                  markup = [
                    "<radialGradient ",
                    commonAttributes,
                    ' cx="',
                    needsSwap ? coords.x1 : coords.x2,
                    '" cy="',
                    needsSwap ? coords.y1 : coords.y2,
                    '" r="',
                    needsSwap ? coords.r1 : coords.r2,
                    '" fx="',
                    needsSwap ? coords.x2 : coords.x1,
                    '" fy="',
                    needsSwap ? coords.y2 : coords.y1,
                    '">\n'
                  ];
                }
                if (this.type === "radial") {
                  if (needsSwap) {
                    colorStops = colorStops.concat();
                    colorStops.reverse();
                    for (i = 0, len = colorStops.length; i < len; i++) {
                      colorStops[i].offset = 1 - colorStops[i].offset;
                    }
                  }
                  var minRadius = Math.min(coords.r1, coords.r2);
                  if (minRadius > 0) {
                    var maxRadius = Math.max(coords.r1, coords.r2), percentageShift = minRadius / maxRadius;
                    for (i = 0, len = colorStops.length; i < len; i++) {
                      colorStops[i].offset += percentageShift * (1 - colorStops[i].offset);
                    }
                  }
                }
                for (i = 0, len = colorStops.length; i < len; i++) {
                  var colorStop = colorStops[i];
                  markup.push("<stop ", 'offset="', colorStop.offset * 100 + "%", '" style="stop-color:', colorStop.color, typeof colorStop.opacity !== "undefined" ? ";stop-opacity: " + colorStop.opacity : ";", '"/>\n');
                }
                markup.push(this.type === "linear" ? "</linearGradient>\n" : "</radialGradient>\n");
                return markup.join("");
              },
              toLive: function(ctx) {
                var gradient, coords = fabric.util.object.clone(this.coords), i, len;
                if (!this.type) {
                  return;
                }
                if (this.type === "linear") {
                  gradient = ctx.createLinearGradient(coords.x1, coords.y1, coords.x2, coords.y2);
                } else if (this.type === "radial") {
                  gradient = ctx.createRadialGradient(coords.x1, coords.y1, coords.r1, coords.x2, coords.y2, coords.r2);
                }
                for (i = 0, len = this.colorStops.length; i < len; i++) {
                  var color = this.colorStops[i].color, opacity = this.colorStops[i].opacity, offset = this.colorStops[i].offset;
                  if (typeof opacity !== "undefined") {
                    color = new fabric.Color(color).setAlpha(opacity).toRgba();
                  }
                  gradient.addColorStop(offset, color);
                }
                return gradient;
              }
            });
            fabric.util.object.extend(fabric.Gradient, {
              fromElement: function(el, instance, opacityAttr, svgOptions) {
                var multiplier = parseFloat(opacityAttr) / (/%$/.test(opacityAttr) ? 100 : 1);
                multiplier = multiplier < 0 ? 0 : multiplier > 1 ? 1 : multiplier;
                if (isNaN(multiplier)) {
                  multiplier = 1;
                }
                var colorStopEls = el.getElementsByTagName("stop"), type, gradientUnits = el.getAttribute("gradientUnits") === "userSpaceOnUse" ? "pixels" : "percentage", gradientTransform = el.getAttribute("gradientTransform") || "", colorStops = [], coords, i, offsetX = 0, offsetY = 0, transformMatrix;
                if (el.nodeName === "linearGradient" || el.nodeName === "LINEARGRADIENT") {
                  type = "linear";
                  coords = getLinearCoords(el);
                } else {
                  type = "radial";
                  coords = getRadialCoords(el);
                }
                for (i = colorStopEls.length; i--; ) {
                  colorStops.push(getColorStop(colorStopEls[i], multiplier));
                }
                transformMatrix = fabric.parseTransformAttribute(gradientTransform);
                __convertPercentUnitsToValues(instance, coords, svgOptions, gradientUnits);
                if (gradientUnits === "pixels") {
                  offsetX = -instance.left;
                  offsetY = -instance.top;
                }
                var gradient = new fabric.Gradient({
                  id: el.getAttribute("id"),
                  type,
                  coords,
                  colorStops,
                  gradientUnits,
                  gradientTransform: transformMatrix,
                  offsetX,
                  offsetY
                });
                return gradient;
              }
            });
            function __convertPercentUnitsToValues(instance, options, svgOptions, gradientUnits) {
              var propValue, finalValue;
              Object.keys(options).forEach(function(prop) {
                propValue = options[prop];
                if (propValue === "Infinity") {
                  finalValue = 1;
                } else if (propValue === "-Infinity") {
                  finalValue = 0;
                } else {
                  finalValue = parseFloat(options[prop], 10);
                  if (typeof propValue === "string" && /^(\d+\.\d+)%|(\d+)%$/.test(propValue)) {
                    finalValue *= 0.01;
                    if (gradientUnits === "pixels") {
                      if (prop === "x1" || prop === "x2" || prop === "r2") {
                        finalValue *= svgOptions.viewBoxWidth || svgOptions.width;
                      }
                      if (prop === "y1" || prop === "y2") {
                        finalValue *= svgOptions.viewBoxHeight || svgOptions.height;
                      }
                    }
                  }
                }
                options[prop] = finalValue;
              });
            }
          })();
          (function() {
            var toFixed = fabric.util.toFixed;
            fabric.Pattern = fabric.util.createClass({
              repeat: "repeat",
              offsetX: 0,
              offsetY: 0,
              crossOrigin: "",
              patternTransform: null,
              initialize: function(options, callback) {
                options || (options = {});
                this.id = fabric.Object.__uid++;
                this.setOptions(options);
                if (!options.source || options.source && typeof options.source !== "string") {
                  callback && callback(this);
                  return;
                } else {
                  var _this = this;
                  this.source = fabric.util.createImage();
                  fabric.util.loadImage(options.source, function(img, isError) {
                    _this.source = img;
                    callback && callback(_this, isError);
                  }, null, this.crossOrigin);
                }
              },
              toObject: function(propertiesToInclude) {
                var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS, source, object;
                if (typeof this.source.src === "string") {
                  source = this.source.src;
                } else if (typeof this.source === "object" && this.source.toDataURL) {
                  source = this.source.toDataURL();
                }
                object = {
                  type: "pattern",
                  source,
                  repeat: this.repeat,
                  crossOrigin: this.crossOrigin,
                  offsetX: toFixed(this.offsetX, NUM_FRACTION_DIGITS),
                  offsetY: toFixed(this.offsetY, NUM_FRACTION_DIGITS),
                  patternTransform: this.patternTransform ? this.patternTransform.concat() : null
                };
                fabric.util.populateWithProperties(this, object, propertiesToInclude);
                return object;
              },
              toSVG: function(object) {
                var patternSource = typeof this.source === "function" ? this.source() : this.source, patternWidth = patternSource.width / object.width, patternHeight = patternSource.height / object.height, patternOffsetX = this.offsetX / object.width, patternOffsetY = this.offsetY / object.height, patternImgSrc = "";
                if (this.repeat === "repeat-x" || this.repeat === "no-repeat") {
                  patternHeight = 1;
                  if (patternOffsetY) {
                    patternHeight += Math.abs(patternOffsetY);
                  }
                }
                if (this.repeat === "repeat-y" || this.repeat === "no-repeat") {
                  patternWidth = 1;
                  if (patternOffsetX) {
                    patternWidth += Math.abs(patternOffsetX);
                  }
                }
                if (patternSource.src) {
                  patternImgSrc = patternSource.src;
                } else if (patternSource.toDataURL) {
                  patternImgSrc = patternSource.toDataURL();
                }
                return '<pattern id="SVGID_' + this.id + '" x="' + patternOffsetX + '" y="' + patternOffsetY + '" width="' + patternWidth + '" height="' + patternHeight + '">\n<image x="0" y="0" width="' + patternSource.width + '" height="' + patternSource.height + '" xlink:href="' + patternImgSrc + '"></image>\n</pattern>\n';
              },
              setOptions: function(options) {
                for (var prop in options) {
                  this[prop] = options[prop];
                }
              },
              toLive: function(ctx) {
                var source = this.source;
                if (!source) {
                  return "";
                }
                if (typeof source.src !== "undefined") {
                  if (!source.complete) {
                    return "";
                  }
                  if (source.naturalWidth === 0 || source.naturalHeight === 0) {
                    return "";
                  }
                }
                return ctx.createPattern(source, this.repeat);
              }
            });
          })();
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), toFixed = fabric2.util.toFixed;
            if (fabric2.Shadow) {
              fabric2.warn("fabric.Shadow is already defined.");
              return;
            }
            fabric2.Shadow = fabric2.util.createClass({
              color: "rgb(0,0,0)",
              blur: 0,
              offsetX: 0,
              offsetY: 0,
              affectStroke: false,
              includeDefaultValues: true,
              nonScaling: false,
              initialize: function(options) {
                if (typeof options === "string") {
                  options = this._parseShadow(options);
                }
                for (var prop in options) {
                  this[prop] = options[prop];
                }
                this.id = fabric2.Object.__uid++;
              },
              _parseShadow: function(shadow) {
                var shadowStr = shadow.trim(), offsetsAndBlur = fabric2.Shadow.reOffsetsAndBlur.exec(shadowStr) || [], color = shadowStr.replace(fabric2.Shadow.reOffsetsAndBlur, "") || "rgb(0,0,0)";
                return {
                  color: color.trim(),
                  offsetX: parseFloat(offsetsAndBlur[1], 10) || 0,
                  offsetY: parseFloat(offsetsAndBlur[2], 10) || 0,
                  blur: parseFloat(offsetsAndBlur[3], 10) || 0
                };
              },
              toString: function() {
                return [this.offsetX, this.offsetY, this.blur, this.color].join("px ");
              },
              toSVG: function(object) {
                var fBoxX = 40, fBoxY = 40, NUM_FRACTION_DIGITS = fabric2.Object.NUM_FRACTION_DIGITS, offset = fabric2.util.rotateVector({ x: this.offsetX, y: this.offsetY }, fabric2.util.degreesToRadians(-object.angle)), BLUR_BOX = 20, color = new fabric2.Color(this.color);
                if (object.width && object.height) {
                  fBoxX = toFixed((Math.abs(offset.x) + this.blur) / object.width, NUM_FRACTION_DIGITS) * 100 + BLUR_BOX;
                  fBoxY = toFixed((Math.abs(offset.y) + this.blur) / object.height, NUM_FRACTION_DIGITS) * 100 + BLUR_BOX;
                }
                if (object.flipX) {
                  offset.x *= -1;
                }
                if (object.flipY) {
                  offset.y *= -1;
                }
                return '<filter id="SVGID_' + this.id + '" y="-' + fBoxY + '%" height="' + (100 + 2 * fBoxY) + '%" x="-' + fBoxX + '%" width="' + (100 + 2 * fBoxX) + '%" >\n	<feGaussianBlur in="SourceAlpha" stdDeviation="' + toFixed(this.blur ? this.blur / 2 : 0, NUM_FRACTION_DIGITS) + '"></feGaussianBlur>\n	<feOffset dx="' + toFixed(offset.x, NUM_FRACTION_DIGITS) + '" dy="' + toFixed(offset.y, NUM_FRACTION_DIGITS) + '" result="oBlur" ></feOffset>\n	<feFlood flood-color="' + color.toRgb() + '" flood-opacity="' + color.getAlpha() + '"/>\n	<feComposite in2="oBlur" operator="in" />\n	<feMerge>\n		<feMergeNode></feMergeNode>\n		<feMergeNode in="SourceGraphic"></feMergeNode>\n	</feMerge>\n</filter>\n';
              },
              toObject: function() {
                if (this.includeDefaultValues) {
                  return {
                    color: this.color,
                    blur: this.blur,
                    offsetX: this.offsetX,
                    offsetY: this.offsetY,
                    affectStroke: this.affectStroke,
                    nonScaling: this.nonScaling
                  };
                }
                var obj = {}, proto = fabric2.Shadow.prototype;
                ["color", "blur", "offsetX", "offsetY", "affectStroke", "nonScaling"].forEach(function(prop) {
                  if (this[prop] !== proto[prop]) {
                    obj[prop] = this[prop];
                  }
                }, this);
                return obj;
              }
            });
            fabric2.Shadow.reOffsetsAndBlur = /(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/;
          })(exports2);
          (function() {
            if (fabric.StaticCanvas) {
              fabric.warn("fabric.StaticCanvas is already defined.");
              return;
            }
            var extend = fabric.util.object.extend, getElementOffset = fabric.util.getElementOffset, removeFromArray = fabric.util.removeFromArray, toFixed = fabric.util.toFixed, transformPoint = fabric.util.transformPoint, invertTransform = fabric.util.invertTransform, getNodeCanvas = fabric.util.getNodeCanvas, createCanvasElement = fabric.util.createCanvasElement, CANVAS_INIT_ERROR = new Error("Could not initialize `canvas` element");
            fabric.StaticCanvas = fabric.util.createClass(fabric.CommonMethods, {
              initialize: function(el, options) {
                options || (options = {});
                this.renderAndResetBound = this.renderAndReset.bind(this);
                this.requestRenderAllBound = this.requestRenderAll.bind(this);
                this._initStatic(el, options);
              },
              backgroundColor: "",
              backgroundImage: null,
              overlayColor: "",
              overlayImage: null,
              includeDefaultValues: true,
              stateful: false,
              renderOnAddRemove: true,
              controlsAboveOverlay: false,
              allowTouchScrolling: false,
              imageSmoothingEnabled: true,
              viewportTransform: fabric.iMatrix.concat(),
              backgroundVpt: true,
              overlayVpt: true,
              enableRetinaScaling: true,
              vptCoords: {},
              skipOffscreen: true,
              clipPath: void 0,
              _initStatic: function(el, options) {
                var cb = this.requestRenderAllBound;
                this._objects = [];
                this._createLowerCanvas(el);
                this._initOptions(options);
                if (!this.interactive) {
                  this._initRetinaScaling();
                }
                if (options.overlayImage) {
                  this.setOverlayImage(options.overlayImage, cb);
                }
                if (options.backgroundImage) {
                  this.setBackgroundImage(options.backgroundImage, cb);
                }
                if (options.backgroundColor) {
                  this.setBackgroundColor(options.backgroundColor, cb);
                }
                if (options.overlayColor) {
                  this.setOverlayColor(options.overlayColor, cb);
                }
                this.calcOffset();
              },
              _isRetinaScaling: function() {
                return fabric.devicePixelRatio !== 1 && this.enableRetinaScaling;
              },
              getRetinaScaling: function() {
                return this._isRetinaScaling() ? fabric.devicePixelRatio : 1;
              },
              _initRetinaScaling: function() {
                if (!this._isRetinaScaling()) {
                  return;
                }
                var scaleRatio = fabric.devicePixelRatio;
                this.__initRetinaScaling(scaleRatio, this.lowerCanvasEl, this.contextContainer);
                if (this.upperCanvasEl) {
                  this.__initRetinaScaling(scaleRatio, this.upperCanvasEl, this.contextTop);
                }
              },
              __initRetinaScaling: function(scaleRatio, canvas, context) {
                canvas.setAttribute("width", this.width * scaleRatio);
                canvas.setAttribute("height", this.height * scaleRatio);
                context.scale(scaleRatio, scaleRatio);
              },
              calcOffset: function() {
                this._offset = getElementOffset(this.lowerCanvasEl);
                return this;
              },
              setOverlayImage: function(image, callback, options) {
                return this.__setBgOverlayImage("overlayImage", image, callback, options);
              },
              setBackgroundImage: function(image, callback, options) {
                return this.__setBgOverlayImage("backgroundImage", image, callback, options);
              },
              setOverlayColor: function(overlayColor, callback) {
                return this.__setBgOverlayColor("overlayColor", overlayColor, callback);
              },
              setBackgroundColor: function(backgroundColor, callback) {
                return this.__setBgOverlayColor("backgroundColor", backgroundColor, callback);
              },
              __setBgOverlayImage: function(property, image, callback, options) {
                if (typeof image === "string") {
                  fabric.util.loadImage(image, function(img, isError) {
                    if (img) {
                      var instance = new fabric.Image(img, options);
                      this[property] = instance;
                      instance.canvas = this;
                    }
                    callback && callback(img, isError);
                  }, this, options && options.crossOrigin);
                } else {
                  options && image.setOptions(options);
                  this[property] = image;
                  image && (image.canvas = this);
                  callback && callback(image, false);
                }
                return this;
              },
              __setBgOverlayColor: function(property, color, callback) {
                this[property] = color;
                this._initGradient(color, property);
                this._initPattern(color, property, callback);
                return this;
              },
              _createCanvasElement: function() {
                var element = createCanvasElement();
                if (!element) {
                  throw CANVAS_INIT_ERROR;
                }
                if (!element.style) {
                  element.style = {};
                }
                if (typeof element.getContext === "undefined") {
                  throw CANVAS_INIT_ERROR;
                }
                return element;
              },
              _initOptions: function(options) {
                var lowerCanvasEl = this.lowerCanvasEl;
                this._setOptions(options);
                this.width = this.width || parseInt(lowerCanvasEl.width, 10) || 0;
                this.height = this.height || parseInt(lowerCanvasEl.height, 10) || 0;
                if (!this.lowerCanvasEl.style) {
                  return;
                }
                lowerCanvasEl.width = this.width;
                lowerCanvasEl.height = this.height;
                lowerCanvasEl.style.width = this.width + "px";
                lowerCanvasEl.style.height = this.height + "px";
                this.viewportTransform = this.viewportTransform.slice();
              },
              _createLowerCanvas: function(canvasEl) {
                if (canvasEl && canvasEl.getContext) {
                  this.lowerCanvasEl = canvasEl;
                } else {
                  this.lowerCanvasEl = fabric.util.getById(canvasEl) || this._createCanvasElement();
                }
                fabric.util.addClass(this.lowerCanvasEl, "lower-canvas");
                this._originalCanvasStyle = this.lowerCanvasEl.style;
                if (this.interactive) {
                  this._applyCanvasStyle(this.lowerCanvasEl);
                }
                this.contextContainer = this.lowerCanvasEl.getContext("2d");
              },
              getWidth: function() {
                return this.width;
              },
              getHeight: function() {
                return this.height;
              },
              setWidth: function(value, options) {
                return this.setDimensions({ width: value }, options);
              },
              setHeight: function(value, options) {
                return this.setDimensions({ height: value }, options);
              },
              setDimensions: function(dimensions, options) {
                var cssValue;
                options = options || {};
                for (var prop in dimensions) {
                  cssValue = dimensions[prop];
                  if (!options.cssOnly) {
                    this._setBackstoreDimension(prop, dimensions[prop]);
                    cssValue += "px";
                    this.hasLostContext = true;
                  }
                  if (!options.backstoreOnly) {
                    this._setCssDimension(prop, cssValue);
                  }
                }
                if (this._isCurrentlyDrawing) {
                  this.freeDrawingBrush && this.freeDrawingBrush._setBrushStyles();
                }
                this._initRetinaScaling();
                this.calcOffset();
                if (!options.cssOnly) {
                  this.requestRenderAll();
                }
                return this;
              },
              _setBackstoreDimension: function(prop, value) {
                this.lowerCanvasEl[prop] = value;
                if (this.upperCanvasEl) {
                  this.upperCanvasEl[prop] = value;
                }
                if (this.cacheCanvasEl) {
                  this.cacheCanvasEl[prop] = value;
                }
                this[prop] = value;
                return this;
              },
              _setCssDimension: function(prop, value) {
                this.lowerCanvasEl.style[prop] = value;
                if (this.upperCanvasEl) {
                  this.upperCanvasEl.style[prop] = value;
                }
                if (this.wrapperEl) {
                  this.wrapperEl.style[prop] = value;
                }
                return this;
              },
              getZoom: function() {
                return this.viewportTransform[0];
              },
              setViewportTransform: function(vpt) {
                var activeObject = this._activeObject, backgroundObject = this.backgroundImage, overlayObject = this.overlayImage, object, i, len;
                this.viewportTransform = vpt;
                for (i = 0, len = this._objects.length; i < len; i++) {
                  object = this._objects[i];
                  object.group || object.setCoords(true);
                }
                if (activeObject) {
                  activeObject.setCoords();
                }
                if (backgroundObject) {
                  backgroundObject.setCoords(true);
                }
                if (overlayObject) {
                  overlayObject.setCoords(true);
                }
                this.calcViewportBoundaries();
                this.renderOnAddRemove && this.requestRenderAll();
                return this;
              },
              zoomToPoint: function(point, value) {
                var before = point, vpt = this.viewportTransform.slice(0);
                point = transformPoint(point, invertTransform(this.viewportTransform));
                vpt[0] = value;
                vpt[3] = value;
                var after = transformPoint(point, vpt);
                vpt[4] += before.x - after.x;
                vpt[5] += before.y - after.y;
                return this.setViewportTransform(vpt);
              },
              setZoom: function(value) {
                this.zoomToPoint(new fabric.Point(0, 0), value);
                return this;
              },
              absolutePan: function(point) {
                var vpt = this.viewportTransform.slice(0);
                vpt[4] = -point.x;
                vpt[5] = -point.y;
                return this.setViewportTransform(vpt);
              },
              relativePan: function(point) {
                return this.absolutePan(new fabric.Point(-point.x - this.viewportTransform[4], -point.y - this.viewportTransform[5]));
              },
              getElement: function() {
                return this.lowerCanvasEl;
              },
              _onObjectAdded: function(obj) {
                this.stateful && obj.setupState();
                obj._set("canvas", this);
                obj.setCoords();
                this.fire("object:added", { target: obj });
                obj.fire("added");
              },
              _onObjectRemoved: function(obj) {
                this.fire("object:removed", { target: obj });
                obj.fire("removed");
                delete obj.canvas;
              },
              clearContext: function(ctx) {
                ctx.clearRect(0, 0, this.width, this.height);
                return this;
              },
              getContext: function() {
                return this.contextContainer;
              },
              clear: function() {
                this.remove.apply(this, this.getObjects());
                this.backgroundImage = null;
                this.overlayImage = null;
                this.backgroundColor = "";
                this.overlayColor = "";
                if (this._hasITextHandlers) {
                  this.off("mouse:up", this._mouseUpITextHandler);
                  this._iTextInstances = null;
                  this._hasITextHandlers = false;
                }
                this.clearContext(this.contextContainer);
                this.fire("canvas:cleared");
                this.renderOnAddRemove && this.requestRenderAll();
                return this;
              },
              renderAll: function() {
                var canvasToDrawOn = this.contextContainer;
                this.renderCanvas(canvasToDrawOn, this._objects);
                return this;
              },
              renderAndReset: function() {
                this.isRendering = 0;
                this.renderAll();
              },
              requestRenderAll: function() {
                if (!this.isRendering) {
                  this.isRendering = fabric.util.requestAnimFrame(this.renderAndResetBound);
                }
                return this;
              },
              calcViewportBoundaries: function() {
                var points = {}, width = this.width, height = this.height, iVpt = invertTransform(this.viewportTransform);
                points.tl = transformPoint({ x: 0, y: 0 }, iVpt);
                points.br = transformPoint({ x: width, y: height }, iVpt);
                points.tr = new fabric.Point(points.br.x, points.tl.y);
                points.bl = new fabric.Point(points.tl.x, points.br.y);
                this.vptCoords = points;
                return points;
              },
              cancelRequestedRender: function() {
                if (this.isRendering) {
                  fabric.util.cancelAnimFrame(this.isRendering);
                  this.isRendering = 0;
                }
              },
              renderCanvas: function(ctx, objects) {
                var v = this.viewportTransform, path = this.clipPath;
                this.cancelRequestedRender();
                this.calcViewportBoundaries();
                this.clearContext(ctx);
                fabric.util.setImageSmoothing(ctx, this.imageSmoothingEnabled);
                this.fire("before:render", { ctx });
                this._renderBackground(ctx);
                ctx.save();
                ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);
                this._renderObjects(ctx, objects);
                ctx.restore();
                if (!this.controlsAboveOverlay && this.interactive) {
                  this.drawControls(ctx);
                }
                if (path) {
                  path.canvas = this;
                  path.shouldCache();
                  path._transformDone = true;
                  path.renderCache({ forClipping: true });
                  this.drawClipPathOnCanvas(ctx);
                }
                this._renderOverlay(ctx);
                if (this.controlsAboveOverlay && this.interactive) {
                  this.drawControls(ctx);
                }
                this.fire("after:render", { ctx });
              },
              drawClipPathOnCanvas: function(ctx) {
                var v = this.viewportTransform, path = this.clipPath;
                ctx.save();
                ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);
                ctx.globalCompositeOperation = "destination-in";
                path.transform(ctx);
                ctx.scale(1 / path.zoomX, 1 / path.zoomY);
                ctx.drawImage(path._cacheCanvas, -path.cacheTranslationX, -path.cacheTranslationY);
                ctx.restore();
              },
              _renderObjects: function(ctx, objects) {
                var i, len;
                for (i = 0, len = objects.length; i < len; ++i) {
                  objects[i] && objects[i].render(ctx);
                }
              },
              _renderBackgroundOrOverlay: function(ctx, property) {
                var fill = this[property + "Color"], object = this[property + "Image"], v = this.viewportTransform, needsVpt = this[property + "Vpt"];
                if (!fill && !object) {
                  return;
                }
                if (fill) {
                  ctx.save();
                  ctx.beginPath();
                  ctx.moveTo(0, 0);
                  ctx.lineTo(this.width, 0);
                  ctx.lineTo(this.width, this.height);
                  ctx.lineTo(0, this.height);
                  ctx.closePath();
                  ctx.fillStyle = fill.toLive ? fill.toLive(ctx, this) : fill;
                  if (needsVpt) {
                    ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);
                  }
                  ctx.transform(1, 0, 0, 1, fill.offsetX || 0, fill.offsetY || 0);
                  var m = fill.gradientTransform || fill.patternTransform;
                  m && ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);
                  ctx.fill();
                  ctx.restore();
                }
                if (object) {
                  ctx.save();
                  if (needsVpt) {
                    ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);
                  }
                  object.render(ctx);
                  ctx.restore();
                }
              },
              _renderBackground: function(ctx) {
                this._renderBackgroundOrOverlay(ctx, "background");
              },
              _renderOverlay: function(ctx) {
                this._renderBackgroundOrOverlay(ctx, "overlay");
              },
              getCenter: function() {
                return {
                  top: this.height / 2,
                  left: this.width / 2
                };
              },
              centerObjectH: function(object) {
                return this._centerObject(object, new fabric.Point(this.getCenter().left, object.getCenterPoint().y));
              },
              centerObjectV: function(object) {
                return this._centerObject(object, new fabric.Point(object.getCenterPoint().x, this.getCenter().top));
              },
              centerObject: function(object) {
                var center = this.getCenter();
                return this._centerObject(object, new fabric.Point(center.left, center.top));
              },
              viewportCenterObject: function(object) {
                var vpCenter = this.getVpCenter();
                return this._centerObject(object, vpCenter);
              },
              viewportCenterObjectH: function(object) {
                var vpCenter = this.getVpCenter();
                this._centerObject(object, new fabric.Point(vpCenter.x, object.getCenterPoint().y));
                return this;
              },
              viewportCenterObjectV: function(object) {
                var vpCenter = this.getVpCenter();
                return this._centerObject(object, new fabric.Point(object.getCenterPoint().x, vpCenter.y));
              },
              getVpCenter: function() {
                var center = this.getCenter(), iVpt = invertTransform(this.viewportTransform);
                return transformPoint({ x: center.left, y: center.top }, iVpt);
              },
              _centerObject: function(object, center) {
                object.setPositionByOrigin(center, "center", "center");
                object.setCoords();
                this.renderOnAddRemove && this.requestRenderAll();
                return this;
              },
              toDatalessJSON: function(propertiesToInclude) {
                return this.toDatalessObject(propertiesToInclude);
              },
              toObject: function(propertiesToInclude) {
                return this._toObjectMethod("toObject", propertiesToInclude);
              },
              toDatalessObject: function(propertiesToInclude) {
                return this._toObjectMethod("toDatalessObject", propertiesToInclude);
              },
              _toObjectMethod: function(methodName, propertiesToInclude) {
                var clipPath = this.clipPath, data = {
                  version: fabric.version,
                  objects: this._toObjects(methodName, propertiesToInclude)
                };
                if (clipPath && !clipPath.excludeFromExport) {
                  data.clipPath = this._toObject(this.clipPath, methodName, propertiesToInclude);
                }
                extend(data, this.__serializeBgOverlay(methodName, propertiesToInclude));
                fabric.util.populateWithProperties(this, data, propertiesToInclude);
                return data;
              },
              _toObjects: function(methodName, propertiesToInclude) {
                return this._objects.filter(function(object) {
                  return !object.excludeFromExport;
                }).map(function(instance) {
                  return this._toObject(instance, methodName, propertiesToInclude);
                }, this);
              },
              _toObject: function(instance, methodName, propertiesToInclude) {
                var originalValue;
                if (!this.includeDefaultValues) {
                  originalValue = instance.includeDefaultValues;
                  instance.includeDefaultValues = false;
                }
                var object = instance[methodName](propertiesToInclude);
                if (!this.includeDefaultValues) {
                  instance.includeDefaultValues = originalValue;
                }
                return object;
              },
              __serializeBgOverlay: function(methodName, propertiesToInclude) {
                var data = {}, bgImage = this.backgroundImage, overlayImage = this.overlayImage, bgColor = this.backgroundColor, overlayColor = this.overlayColor;
                if (bgColor && bgColor.toObject) {
                  if (!bgColor.excludeFromExport) {
                    data.background = bgColor.toObject(propertiesToInclude);
                  }
                } else if (bgColor) {
                  data.background = bgColor;
                }
                if (overlayColor && overlayColor.toObject) {
                  if (!overlayColor.excludeFromExport) {
                    data.overlay = overlayColor.toObject(propertiesToInclude);
                  }
                } else if (overlayColor) {
                  data.overlay = overlayColor;
                }
                if (bgImage && !bgImage.excludeFromExport) {
                  data.backgroundImage = this._toObject(bgImage, methodName, propertiesToInclude);
                }
                if (overlayImage && !overlayImage.excludeFromExport) {
                  data.overlayImage = this._toObject(overlayImage, methodName, propertiesToInclude);
                }
                return data;
              },
              svgViewportTransformation: true,
              toSVG: function(options, reviver) {
                options || (options = {});
                options.reviver = reviver;
                var markup = [];
                this._setSVGPreamble(markup, options);
                this._setSVGHeader(markup, options);
                if (this.clipPath) {
                  markup.push('<g clip-path="url(#' + this.clipPath.clipPathId + ')" >\n');
                }
                this._setSVGBgOverlayColor(markup, "background");
                this._setSVGBgOverlayImage(markup, "backgroundImage", reviver);
                this._setSVGObjects(markup, reviver);
                if (this.clipPath) {
                  markup.push("</g>\n");
                }
                this._setSVGBgOverlayColor(markup, "overlay");
                this._setSVGBgOverlayImage(markup, "overlayImage", reviver);
                markup.push("</svg>");
                return markup.join("");
              },
              _setSVGPreamble: function(markup, options) {
                if (options.suppressPreamble) {
                  return;
                }
                markup.push('<?xml version="1.0" encoding="', options.encoding || "UTF-8", '" standalone="no" ?>\n', '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ', '"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n');
              },
              _setSVGHeader: function(markup, options) {
                var width = options.width || this.width, height = options.height || this.height, vpt, viewBox = 'viewBox="0 0 ' + this.width + " " + this.height + '" ', NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;
                if (options.viewBox) {
                  viewBox = 'viewBox="' + options.viewBox.x + " " + options.viewBox.y + " " + options.viewBox.width + " " + options.viewBox.height + '" ';
                } else {
                  if (this.svgViewportTransformation) {
                    vpt = this.viewportTransform;
                    viewBox = 'viewBox="' + toFixed(-vpt[4] / vpt[0], NUM_FRACTION_DIGITS) + " " + toFixed(-vpt[5] / vpt[3], NUM_FRACTION_DIGITS) + " " + toFixed(this.width / vpt[0], NUM_FRACTION_DIGITS) + " " + toFixed(this.height / vpt[3], NUM_FRACTION_DIGITS) + '" ';
                  }
                }
                markup.push("<svg ", 'xmlns="http://www.w3.org/2000/svg" ', 'xmlns:xlink="http://www.w3.org/1999/xlink" ', 'version="1.1" ', 'width="', width, '" ', 'height="', height, '" ', viewBox, 'xml:space="preserve">\n', "<desc>Created with Fabric.js ", fabric.version, "</desc>\n", "<defs>\n", this.createSVGFontFacesMarkup(), this.createSVGRefElementsMarkup(), this.createSVGClipPathMarkup(options), "</defs>\n");
              },
              createSVGClipPathMarkup: function(options) {
                var clipPath = this.clipPath;
                if (clipPath) {
                  clipPath.clipPathId = "CLIPPATH_" + fabric.Object.__uid++;
                  return '<clipPath id="' + clipPath.clipPathId + '" >\n' + this.clipPath.toClipPathSVG(options.reviver) + "</clipPath>\n";
                }
                return "";
              },
              createSVGRefElementsMarkup: function() {
                var _this = this, markup = ["background", "overlay"].map(function(prop) {
                  var fill = _this[prop + "Color"];
                  if (fill && fill.toLive) {
                    var shouldTransform = _this[prop + "Vpt"], vpt = _this.viewportTransform, object = {
                      width: _this.width / (shouldTransform ? vpt[0] : 1),
                      height: _this.height / (shouldTransform ? vpt[3] : 1)
                    };
                    return fill.toSVG(object, { additionalTransform: shouldTransform ? fabric.util.matrixToSVG(vpt) : "" });
                  }
                });
                return markup.join("");
              },
              createSVGFontFacesMarkup: function() {
                var markup = "", fontList = {}, obj, fontFamily, style, row, rowIndex, _char, charIndex, i, len, fontPaths = fabric.fontPaths, objects = [];
                this._objects.forEach(function add(object) {
                  objects.push(object);
                  if (object._objects) {
                    object._objects.forEach(add);
                  }
                });
                for (i = 0, len = objects.length; i < len; i++) {
                  obj = objects[i];
                  fontFamily = obj.fontFamily;
                  if (obj.type.indexOf("text") === -1 || fontList[fontFamily] || !fontPaths[fontFamily]) {
                    continue;
                  }
                  fontList[fontFamily] = true;
                  if (!obj.styles) {
                    continue;
                  }
                  style = obj.styles;
                  for (rowIndex in style) {
                    row = style[rowIndex];
                    for (charIndex in row) {
                      _char = row[charIndex];
                      fontFamily = _char.fontFamily;
                      if (!fontList[fontFamily] && fontPaths[fontFamily]) {
                        fontList[fontFamily] = true;
                      }
                    }
                  }
                }
                for (var j in fontList) {
                  markup += [
                    "		@font-face {\n",
                    "			font-family: '",
                    j,
                    "';\n",
                    "			src: url('",
                    fontPaths[j],
                    "');\n",
                    "		}\n"
                  ].join("");
                }
                if (markup) {
                  markup = [
                    '	<style type="text/css">',
                    "<![CDATA[\n",
                    markup,
                    "]]>",
                    "</style>\n"
                  ].join("");
                }
                return markup;
              },
              _setSVGObjects: function(markup, reviver) {
                var instance, i, len, objects = this._objects;
                for (i = 0, len = objects.length; i < len; i++) {
                  instance = objects[i];
                  if (instance.excludeFromExport) {
                    continue;
                  }
                  this._setSVGObject(markup, instance, reviver);
                }
              },
              _setSVGObject: function(markup, instance, reviver) {
                markup.push(instance.toSVG(reviver));
              },
              _setSVGBgOverlayImage: function(markup, property, reviver) {
                if (this[property] && !this[property].excludeFromExport && this[property].toSVG) {
                  markup.push(this[property].toSVG(reviver));
                }
              },
              _setSVGBgOverlayColor: function(markup, property) {
                var filler = this[property + "Color"], vpt = this.viewportTransform, finalWidth = this.width, finalHeight = this.height;
                if (!filler) {
                  return;
                }
                if (filler.toLive) {
                  var repeat = filler.repeat, iVpt = fabric.util.invertTransform(vpt), shouldInvert = this[property + "Vpt"], additionalTransform = shouldInvert ? fabric.util.matrixToSVG(iVpt) : "";
                  markup.push('<rect transform="' + additionalTransform + " translate(", finalWidth / 2, ",", finalHeight / 2, ')"', ' x="', filler.offsetX - finalWidth / 2, '" y="', filler.offsetY - finalHeight / 2, '" ', 'width="', repeat === "repeat-y" || repeat === "no-repeat" ? filler.source.width : finalWidth, '" height="', repeat === "repeat-x" || repeat === "no-repeat" ? filler.source.height : finalHeight, '" fill="url(#SVGID_' + filler.id + ')"', "></rect>\n");
                } else {
                  markup.push('<rect x="0" y="0" width="100%" height="100%" ', 'fill="', filler, '"', "></rect>\n");
                }
              },
              sendToBack: function(object) {
                if (!object) {
                  return this;
                }
                var activeSelection = this._activeObject, i, obj, objs;
                if (object === activeSelection && object.type === "activeSelection") {
                  objs = activeSelection._objects;
                  for (i = objs.length; i--; ) {
                    obj = objs[i];
                    removeFromArray(this._objects, obj);
                    this._objects.unshift(obj);
                  }
                } else {
                  removeFromArray(this._objects, object);
                  this._objects.unshift(object);
                }
                this.renderOnAddRemove && this.requestRenderAll();
                return this;
              },
              bringToFront: function(object) {
                if (!object) {
                  return this;
                }
                var activeSelection = this._activeObject, i, obj, objs;
                if (object === activeSelection && object.type === "activeSelection") {
                  objs = activeSelection._objects;
                  for (i = 0; i < objs.length; i++) {
                    obj = objs[i];
                    removeFromArray(this._objects, obj);
                    this._objects.push(obj);
                  }
                } else {
                  removeFromArray(this._objects, object);
                  this._objects.push(object);
                }
                this.renderOnAddRemove && this.requestRenderAll();
                return this;
              },
              sendBackwards: function(object, intersecting) {
                if (!object) {
                  return this;
                }
                var activeSelection = this._activeObject, i, obj, idx, newIdx, objs, objsMoved = 0;
                if (object === activeSelection && object.type === "activeSelection") {
                  objs = activeSelection._objects;
                  for (i = 0; i < objs.length; i++) {
                    obj = objs[i];
                    idx = this._objects.indexOf(obj);
                    if (idx > 0 + objsMoved) {
                      newIdx = idx - 1;
                      removeFromArray(this._objects, obj);
                      this._objects.splice(newIdx, 0, obj);
                    }
                    objsMoved++;
                  }
                } else {
                  idx = this._objects.indexOf(object);
                  if (idx !== 0) {
                    newIdx = this._findNewLowerIndex(object, idx, intersecting);
                    removeFromArray(this._objects, object);
                    this._objects.splice(newIdx, 0, object);
                  }
                }
                this.renderOnAddRemove && this.requestRenderAll();
                return this;
              },
              _findNewLowerIndex: function(object, idx, intersecting) {
                var newIdx, i;
                if (intersecting) {
                  newIdx = idx;
                  for (i = idx - 1; i >= 0; --i) {
                    var isIntersecting = object.intersectsWithObject(this._objects[i]) || object.isContainedWithinObject(this._objects[i]) || this._objects[i].isContainedWithinObject(object);
                    if (isIntersecting) {
                      newIdx = i;
                      break;
                    }
                  }
                } else {
                  newIdx = idx - 1;
                }
                return newIdx;
              },
              bringForward: function(object, intersecting) {
                if (!object) {
                  return this;
                }
                var activeSelection = this._activeObject, i, obj, idx, newIdx, objs, objsMoved = 0;
                if (object === activeSelection && object.type === "activeSelection") {
                  objs = activeSelection._objects;
                  for (i = objs.length; i--; ) {
                    obj = objs[i];
                    idx = this._objects.indexOf(obj);
                    if (idx < this._objects.length - 1 - objsMoved) {
                      newIdx = idx + 1;
                      removeFromArray(this._objects, obj);
                      this._objects.splice(newIdx, 0, obj);
                    }
                    objsMoved++;
                  }
                } else {
                  idx = this._objects.indexOf(object);
                  if (idx !== this._objects.length - 1) {
                    newIdx = this._findNewUpperIndex(object, idx, intersecting);
                    removeFromArray(this._objects, object);
                    this._objects.splice(newIdx, 0, object);
                  }
                }
                this.renderOnAddRemove && this.requestRenderAll();
                return this;
              },
              _findNewUpperIndex: function(object, idx, intersecting) {
                var newIdx, i, len;
                if (intersecting) {
                  newIdx = idx;
                  for (i = idx + 1, len = this._objects.length; i < len; ++i) {
                    var isIntersecting = object.intersectsWithObject(this._objects[i]) || object.isContainedWithinObject(this._objects[i]) || this._objects[i].isContainedWithinObject(object);
                    if (isIntersecting) {
                      newIdx = i;
                      break;
                    }
                  }
                } else {
                  newIdx = idx + 1;
                }
                return newIdx;
              },
              moveTo: function(object, index) {
                removeFromArray(this._objects, object);
                this._objects.splice(index, 0, object);
                return this.renderOnAddRemove && this.requestRenderAll();
              },
              dispose: function() {
                if (this.isRendering) {
                  fabric.util.cancelAnimFrame(this.isRendering);
                  this.isRendering = 0;
                }
                this.forEachObject(function(object) {
                  object.dispose && object.dispose();
                });
                this._objects = [];
                if (this.backgroundImage && this.backgroundImage.dispose) {
                  this.backgroundImage.dispose();
                }
                this.backgroundImage = null;
                if (this.overlayImage && this.overlayImage.dispose) {
                  this.overlayImage.dispose();
                }
                this.overlayImage = null;
                this._iTextInstances = null;
                this.contextContainer = null;
                this.lowerCanvasEl.classList.remove("lower-canvas");
                this.lowerCanvasEl.style = this._originalCanvasStyle;
                delete this._originalCanvasStyle;
                this.lowerCanvasEl.setAttribute("width", this.width);
                this.lowerCanvasEl.setAttribute("height", this.height);
                fabric.util.cleanUpJsdomNode(this.lowerCanvasEl);
                this.lowerCanvasEl = void 0;
                return this;
              },
              toString: function() {
                return "#<fabric.Canvas (" + this.complexity() + "): { objects: " + this._objects.length + " }>";
              }
            });
            extend(fabric.StaticCanvas.prototype, fabric.Observable);
            extend(fabric.StaticCanvas.prototype, fabric.Collection);
            extend(fabric.StaticCanvas.prototype, fabric.DataURLExporter);
            extend(fabric.StaticCanvas, {
              EMPTY_JSON: '{"objects": [], "background": "white"}',
              supports: function(methodName) {
                var el = createCanvasElement();
                if (!el || !el.getContext) {
                  return null;
                }
                var ctx = el.getContext("2d");
                if (!ctx) {
                  return null;
                }
                switch (methodName) {
                  case "setLineDash":
                    return typeof ctx.setLineDash !== "undefined";
                  default:
                    return null;
                }
              }
            });
            fabric.StaticCanvas.prototype.toJSON = fabric.StaticCanvas.prototype.toObject;
            if (fabric.isLikelyNode) {
              fabric.StaticCanvas.prototype.createPNGStream = function() {
                var impl = getNodeCanvas(this.lowerCanvasEl);
                return impl && impl.createPNGStream();
              };
              fabric.StaticCanvas.prototype.createJPEGStream = function(opts) {
                var impl = getNodeCanvas(this.lowerCanvasEl);
                return impl && impl.createJPEGStream(opts);
              };
            }
          })();
          fabric.BaseBrush = fabric.util.createClass({
            color: "rgb(0, 0, 0)",
            width: 1,
            shadow: null,
            strokeLineCap: "round",
            strokeLineJoin: "round",
            strokeMiterLimit: 10,
            strokeDashArray: null,
            limitedToCanvasSize: false,
            _setBrushStyles: function() {
              var ctx = this.canvas.contextTop;
              ctx.strokeStyle = this.color;
              ctx.lineWidth = this.width;
              ctx.lineCap = this.strokeLineCap;
              ctx.miterLimit = this.strokeMiterLimit;
              ctx.lineJoin = this.strokeLineJoin;
              ctx.setLineDash(this.strokeDashArray || []);
            },
            _saveAndTransform: function(ctx) {
              var v = this.canvas.viewportTransform;
              ctx.save();
              ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);
            },
            _setShadow: function() {
              if (!this.shadow) {
                return;
              }
              var canvas = this.canvas, shadow = this.shadow, ctx = canvas.contextTop, zoom = canvas.getZoom();
              if (canvas && canvas._isRetinaScaling()) {
                zoom *= fabric.devicePixelRatio;
              }
              ctx.shadowColor = shadow.color;
              ctx.shadowBlur = shadow.blur * zoom;
              ctx.shadowOffsetX = shadow.offsetX * zoom;
              ctx.shadowOffsetY = shadow.offsetY * zoom;
            },
            needsFullRender: function() {
              var color = new fabric.Color(this.color);
              return color.getAlpha() < 1 || !!this.shadow;
            },
            _resetShadow: function() {
              var ctx = this.canvas.contextTop;
              ctx.shadowColor = "";
              ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;
            },
            _isOutSideCanvas: function(pointer) {
              return pointer.x < 0 || pointer.x > this.canvas.getWidth() || pointer.y < 0 || pointer.y > this.canvas.getHeight();
            }
          });
          (function() {
            fabric.PencilBrush = fabric.util.createClass(fabric.BaseBrush, {
              decimate: 0.4,
              initialize: function(canvas) {
                this.canvas = canvas;
                this._points = [];
              },
              _drawSegment: function(ctx, p1, p2) {
                var midPoint = p1.midPointFrom(p2);
                ctx.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);
                return midPoint;
              },
              onMouseDown: function(pointer, options) {
                if (!this.canvas._isMainEvent(options.e)) {
                  return;
                }
                this._prepareForDrawing(pointer);
                this._captureDrawingPath(pointer);
                this._render();
              },
              onMouseMove: function(pointer, options) {
                if (!this.canvas._isMainEvent(options.e)) {
                  return;
                }
                if (this.limitedToCanvasSize === true && this._isOutSideCanvas(pointer)) {
                  return;
                }
                if (this._captureDrawingPath(pointer) && this._points.length > 1) {
                  if (this.needsFullRender()) {
                    this.canvas.clearContext(this.canvas.contextTop);
                    this._render();
                  } else {
                    var points = this._points, length = points.length, ctx = this.canvas.contextTop;
                    this._saveAndTransform(ctx);
                    if (this.oldEnd) {
                      ctx.beginPath();
                      ctx.moveTo(this.oldEnd.x, this.oldEnd.y);
                    }
                    this.oldEnd = this._drawSegment(ctx, points[length - 2], points[length - 1], true);
                    ctx.stroke();
                    ctx.restore();
                  }
                }
              },
              onMouseUp: function(options) {
                if (!this.canvas._isMainEvent(options.e)) {
                  return true;
                }
                this.oldEnd = void 0;
                this._finalizeAndAddPath();
                return false;
              },
              _prepareForDrawing: function(pointer) {
                var p = new fabric.Point(pointer.x, pointer.y);
                this._reset();
                this._addPoint(p);
                this.canvas.contextTop.moveTo(p.x, p.y);
              },
              _addPoint: function(point) {
                if (this._points.length > 1 && point.eq(this._points[this._points.length - 1])) {
                  return false;
                }
                this._points.push(point);
                return true;
              },
              _reset: function() {
                this._points = [];
                this._setBrushStyles();
                this._setShadow();
              },
              _captureDrawingPath: function(pointer) {
                var pointerPoint = new fabric.Point(pointer.x, pointer.y);
                return this._addPoint(pointerPoint);
              },
              _render: function() {
                var ctx = this.canvas.contextTop, i, len, p1 = this._points[0], p2 = this._points[1];
                this._saveAndTransform(ctx);
                ctx.beginPath();
                if (this._points.length === 2 && p1.x === p2.x && p1.y === p2.y) {
                  var width = this.width / 1e3;
                  p1 = new fabric.Point(p1.x, p1.y);
                  p2 = new fabric.Point(p2.x, p2.y);
                  p1.x -= width;
                  p2.x += width;
                }
                ctx.moveTo(p1.x, p1.y);
                for (i = 1, len = this._points.length; i < len; i++) {
                  this._drawSegment(ctx, p1, p2);
                  p1 = this._points[i];
                  p2 = this._points[i + 1];
                }
                ctx.lineTo(p1.x, p1.y);
                ctx.stroke();
                ctx.restore();
              },
              convertPointsToSVGPath: function(points) {
                var correction = this.width / 1e3;
                return fabric.util.getSmoothPathFromPoints(points, correction);
              },
              _isEmptySVGPath: function(pathData) {
                var pathString = fabric.util.joinPath(pathData);
                return pathString === "M 0 0 Q 0 0 0 0 L 0 0";
              },
              createPath: function(pathData) {
                var path = new fabric.Path(pathData, {
                  fill: null,
                  stroke: this.color,
                  strokeWidth: this.width,
                  strokeLineCap: this.strokeLineCap,
                  strokeMiterLimit: this.strokeMiterLimit,
                  strokeLineJoin: this.strokeLineJoin,
                  strokeDashArray: this.strokeDashArray
                });
                if (this.shadow) {
                  this.shadow.affectStroke = true;
                  path.shadow = new fabric.Shadow(this.shadow);
                }
                return path;
              },
              decimatePoints: function(points, distance) {
                if (points.length <= 2) {
                  return points;
                }
                var zoom = this.canvas.getZoom(), adjustedDistance = Math.pow(distance / zoom, 2), i, l = points.length - 1, lastPoint = points[0], newPoints = [lastPoint], cDistance;
                for (i = 1; i < l - 1; i++) {
                  cDistance = Math.pow(lastPoint.x - points[i].x, 2) + Math.pow(lastPoint.y - points[i].y, 2);
                  if (cDistance >= adjustedDistance) {
                    lastPoint = points[i];
                    newPoints.push(lastPoint);
                  }
                }
                newPoints.push(points[l]);
                return newPoints;
              },
              _finalizeAndAddPath: function() {
                var ctx = this.canvas.contextTop;
                ctx.closePath();
                if (this.decimate) {
                  this._points = this.decimatePoints(this._points, this.decimate);
                }
                var pathData = this.convertPointsToSVGPath(this._points);
                if (this._isEmptySVGPath(pathData)) {
                  this.canvas.requestRenderAll();
                  return;
                }
                var path = this.createPath(pathData);
                this.canvas.clearContext(this.canvas.contextTop);
                this.canvas.fire("before:path:created", { path });
                this.canvas.add(path);
                this.canvas.requestRenderAll();
                path.setCoords();
                this._resetShadow();
                this.canvas.fire("path:created", { path });
              }
            });
          })();
          fabric.CircleBrush = fabric.util.createClass(fabric.BaseBrush, {
            width: 10,
            initialize: function(canvas) {
              this.canvas = canvas;
              this.points = [];
            },
            drawDot: function(pointer) {
              var point = this.addPoint(pointer), ctx = this.canvas.contextTop;
              this._saveAndTransform(ctx);
              this.dot(ctx, point);
              ctx.restore();
            },
            dot: function(ctx, point) {
              ctx.fillStyle = point.fill;
              ctx.beginPath();
              ctx.arc(point.x, point.y, point.radius, 0, Math.PI * 2, false);
              ctx.closePath();
              ctx.fill();
            },
            onMouseDown: function(pointer) {
              this.points.length = 0;
              this.canvas.clearContext(this.canvas.contextTop);
              this._setShadow();
              this.drawDot(pointer);
            },
            _render: function() {
              var ctx = this.canvas.contextTop, i, len, points = this.points;
              this._saveAndTransform(ctx);
              for (i = 0, len = points.length; i < len; i++) {
                this.dot(ctx, points[i]);
              }
              ctx.restore();
            },
            onMouseMove: function(pointer) {
              if (this.limitedToCanvasSize === true && this._isOutSideCanvas(pointer)) {
                return;
              }
              if (this.needsFullRender()) {
                this.canvas.clearContext(this.canvas.contextTop);
                this.addPoint(pointer);
                this._render();
              } else {
                this.drawDot(pointer);
              }
            },
            onMouseUp: function() {
              var originalRenderOnAddRemove = this.canvas.renderOnAddRemove, i, len;
              this.canvas.renderOnAddRemove = false;
              var circles = [];
              for (i = 0, len = this.points.length; i < len; i++) {
                var point = this.points[i], circle = new fabric.Circle({
                  radius: point.radius,
                  left: point.x,
                  top: point.y,
                  originX: "center",
                  originY: "center",
                  fill: point.fill
                });
                this.shadow && (circle.shadow = new fabric.Shadow(this.shadow));
                circles.push(circle);
              }
              var group = new fabric.Group(circles);
              group.canvas = this.canvas;
              this.canvas.fire("before:path:created", { path: group });
              this.canvas.add(group);
              this.canvas.fire("path:created", { path: group });
              this.canvas.clearContext(this.canvas.contextTop);
              this._resetShadow();
              this.canvas.renderOnAddRemove = originalRenderOnAddRemove;
              this.canvas.requestRenderAll();
            },
            addPoint: function(pointer) {
              var pointerPoint = new fabric.Point(pointer.x, pointer.y), circleRadius = fabric.util.getRandomInt(Math.max(0, this.width - 20), this.width + 20) / 2, circleColor = new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0, 100) / 100).toRgba();
              pointerPoint.radius = circleRadius;
              pointerPoint.fill = circleColor;
              this.points.push(pointerPoint);
              return pointerPoint;
            }
          });
          fabric.SprayBrush = fabric.util.createClass(fabric.BaseBrush, {
            width: 10,
            density: 20,
            dotWidth: 1,
            dotWidthVariance: 1,
            randomOpacity: false,
            optimizeOverlapping: true,
            initialize: function(canvas) {
              this.canvas = canvas;
              this.sprayChunks = [];
            },
            onMouseDown: function(pointer) {
              this.sprayChunks.length = 0;
              this.canvas.clearContext(this.canvas.contextTop);
              this._setShadow();
              this.addSprayChunk(pointer);
              this.render(this.sprayChunkPoints);
            },
            onMouseMove: function(pointer) {
              if (this.limitedToCanvasSize === true && this._isOutSideCanvas(pointer)) {
                return;
              }
              this.addSprayChunk(pointer);
              this.render(this.sprayChunkPoints);
            },
            onMouseUp: function() {
              var originalRenderOnAddRemove = this.canvas.renderOnAddRemove;
              this.canvas.renderOnAddRemove = false;
              var rects = [];
              for (var i = 0, ilen = this.sprayChunks.length; i < ilen; i++) {
                var sprayChunk = this.sprayChunks[i];
                for (var j = 0, jlen = sprayChunk.length; j < jlen; j++) {
                  var rect = new fabric.Rect({
                    width: sprayChunk[j].width,
                    height: sprayChunk[j].width,
                    left: sprayChunk[j].x + 1,
                    top: sprayChunk[j].y + 1,
                    originX: "center",
                    originY: "center",
                    fill: this.color
                  });
                  rects.push(rect);
                }
              }
              if (this.optimizeOverlapping) {
                rects = this._getOptimizedRects(rects);
              }
              var group = new fabric.Group(rects);
              this.shadow && group.set("shadow", new fabric.Shadow(this.shadow));
              this.canvas.fire("before:path:created", { path: group });
              this.canvas.add(group);
              this.canvas.fire("path:created", { path: group });
              this.canvas.clearContext(this.canvas.contextTop);
              this._resetShadow();
              this.canvas.renderOnAddRemove = originalRenderOnAddRemove;
              this.canvas.requestRenderAll();
            },
            _getOptimizedRects: function(rects) {
              var uniqueRects = {}, key, i, len;
              for (i = 0, len = rects.length; i < len; i++) {
                key = rects[i].left + "" + rects[i].top;
                if (!uniqueRects[key]) {
                  uniqueRects[key] = rects[i];
                }
              }
              var uniqueRectsArray = [];
              for (key in uniqueRects) {
                uniqueRectsArray.push(uniqueRects[key]);
              }
              return uniqueRectsArray;
            },
            render: function(sprayChunk) {
              var ctx = this.canvas.contextTop, i, len;
              ctx.fillStyle = this.color;
              this._saveAndTransform(ctx);
              for (i = 0, len = sprayChunk.length; i < len; i++) {
                var point = sprayChunk[i];
                if (typeof point.opacity !== "undefined") {
                  ctx.globalAlpha = point.opacity;
                }
                ctx.fillRect(point.x, point.y, point.width, point.width);
              }
              ctx.restore();
            },
            _render: function() {
              var ctx = this.canvas.contextTop, i, ilen;
              ctx.fillStyle = this.color;
              this._saveAndTransform(ctx);
              for (i = 0, ilen = this.sprayChunks.length; i < ilen; i++) {
                this.render(this.sprayChunks[i]);
              }
              ctx.restore();
            },
            addSprayChunk: function(pointer) {
              this.sprayChunkPoints = [];
              var x, y, width, radius = this.width / 2, i;
              for (i = 0; i < this.density; i++) {
                x = fabric.util.getRandomInt(pointer.x - radius, pointer.x + radius);
                y = fabric.util.getRandomInt(pointer.y - radius, pointer.y + radius);
                if (this.dotWidthVariance) {
                  width = fabric.util.getRandomInt(Math.max(1, this.dotWidth - this.dotWidthVariance), this.dotWidth + this.dotWidthVariance);
                } else {
                  width = this.dotWidth;
                }
                var point = new fabric.Point(x, y);
                point.width = width;
                if (this.randomOpacity) {
                  point.opacity = fabric.util.getRandomInt(0, 100) / 100;
                }
                this.sprayChunkPoints.push(point);
              }
              this.sprayChunks.push(this.sprayChunkPoints);
            }
          });
          fabric.PatternBrush = fabric.util.createClass(fabric.PencilBrush, {
            getPatternSrc: function() {
              var dotWidth = 20, dotDistance = 5, patternCanvas = fabric.util.createCanvasElement(), patternCtx = patternCanvas.getContext("2d");
              patternCanvas.width = patternCanvas.height = dotWidth + dotDistance;
              patternCtx.fillStyle = this.color;
              patternCtx.beginPath();
              patternCtx.arc(dotWidth / 2, dotWidth / 2, dotWidth / 2, 0, Math.PI * 2, false);
              patternCtx.closePath();
              patternCtx.fill();
              return patternCanvas;
            },
            getPatternSrcFunction: function() {
              return String(this.getPatternSrc).replace("this.color", '"' + this.color + '"');
            },
            getPattern: function() {
              return this.canvas.contextTop.createPattern(this.source || this.getPatternSrc(), "repeat");
            },
            _setBrushStyles: function() {
              this.callSuper("_setBrushStyles");
              this.canvas.contextTop.strokeStyle = this.getPattern();
            },
            createPath: function(pathData) {
              var path = this.callSuper("createPath", pathData), topLeft = path._getLeftTopCoords().scalarAdd(path.strokeWidth / 2);
              path.stroke = new fabric.Pattern({
                source: this.source || this.getPatternSrcFunction(),
                offsetX: -topLeft.x,
                offsetY: -topLeft.y
              });
              return path;
            }
          });
          (function() {
            var getPointer = fabric.util.getPointer, degreesToRadians = fabric.util.degreesToRadians, isTouchEvent = fabric.util.isTouchEvent;
            fabric.Canvas = fabric.util.createClass(fabric.StaticCanvas, {
              initialize: function(el, options) {
                options || (options = {});
                this.renderAndResetBound = this.renderAndReset.bind(this);
                this.requestRenderAllBound = this.requestRenderAll.bind(this);
                this._initStatic(el, options);
                this._initInteractive();
                this._createCacheCanvas();
              },
              uniformScaling: true,
              uniScaleKey: "shiftKey",
              centeredScaling: false,
              centeredRotation: false,
              centeredKey: "altKey",
              altActionKey: "shiftKey",
              interactive: true,
              selection: true,
              selectionKey: "shiftKey",
              altSelectionKey: null,
              selectionColor: "rgba(100, 100, 255, 0.3)",
              selectionDashArray: [],
              selectionBorderColor: "rgba(255, 255, 255, 0.3)",
              selectionLineWidth: 1,
              selectionFullyContained: false,
              hoverCursor: "move",
              moveCursor: "move",
              defaultCursor: "default",
              freeDrawingCursor: "crosshair",
              rotationCursor: "crosshair",
              notAllowedCursor: "not-allowed",
              containerClass: "canvas-container",
              perPixelTargetFind: false,
              targetFindTolerance: 0,
              skipTargetFind: false,
              isDrawingMode: false,
              preserveObjectStacking: false,
              snapAngle: 0,
              snapThreshold: null,
              stopContextMenu: false,
              fireRightClick: false,
              fireMiddleClick: false,
              targets: [],
              _hoveredTarget: null,
              _hoveredTargets: [],
              _initInteractive: function() {
                this._currentTransform = null;
                this._groupSelector = null;
                this._initWrapperElement();
                this._createUpperCanvas();
                this._initEventListeners();
                this._initRetinaScaling();
                this.freeDrawingBrush = fabric.PencilBrush && new fabric.PencilBrush(this);
                this.calcOffset();
              },
              _chooseObjectsToRender: function() {
                var activeObjects = this.getActiveObjects(), object, objsToRender, activeGroupObjects;
                if (activeObjects.length > 0 && !this.preserveObjectStacking) {
                  objsToRender = [];
                  activeGroupObjects = [];
                  for (var i = 0, length = this._objects.length; i < length; i++) {
                    object = this._objects[i];
                    if (activeObjects.indexOf(object) === -1) {
                      objsToRender.push(object);
                    } else {
                      activeGroupObjects.push(object);
                    }
                  }
                  if (activeObjects.length > 1) {
                    this._activeObject._objects = activeGroupObjects;
                  }
                  objsToRender.push.apply(objsToRender, activeGroupObjects);
                } else {
                  objsToRender = this._objects;
                }
                return objsToRender;
              },
              renderAll: function() {
                if (this.contextTopDirty && !this._groupSelector && !this.isDrawingMode) {
                  this.clearContext(this.contextTop);
                  this.contextTopDirty = false;
                }
                if (this.hasLostContext) {
                  this.renderTopLayer(this.contextTop);
                }
                var canvasToDrawOn = this.contextContainer;
                this.renderCanvas(canvasToDrawOn, this._chooseObjectsToRender());
                return this;
              },
              renderTopLayer: function(ctx) {
                ctx.save();
                if (this.isDrawingMode && this._isCurrentlyDrawing) {
                  this.freeDrawingBrush && this.freeDrawingBrush._render();
                  this.contextTopDirty = true;
                }
                if (this.selection && this._groupSelector) {
                  this._drawSelection(ctx);
                  this.contextTopDirty = true;
                }
                ctx.restore();
              },
              renderTop: function() {
                var ctx = this.contextTop;
                this.clearContext(ctx);
                this.renderTopLayer(ctx);
                this.fire("after:render");
                return this;
              },
              _normalizePointer: function(object, pointer) {
                var m = object.calcTransformMatrix(), invertedM = fabric.util.invertTransform(m), vptPointer = this.restorePointerVpt(pointer);
                return fabric.util.transformPoint(vptPointer, invertedM);
              },
              isTargetTransparent: function(target, x, y) {
                if (target.shouldCache() && target._cacheCanvas && target !== this._activeObject) {
                  var normalizedPointer = this._normalizePointer(target, { x, y }), targetRelativeX = Math.max(target.cacheTranslationX + normalizedPointer.x * target.zoomX, 0), targetRelativeY = Math.max(target.cacheTranslationY + normalizedPointer.y * target.zoomY, 0);
                  var isTransparent = fabric.util.isTransparent(target._cacheContext, Math.round(targetRelativeX), Math.round(targetRelativeY), this.targetFindTolerance);
                  return isTransparent;
                }
                var ctx = this.contextCache, originalColor = target.selectionBackgroundColor, v = this.viewportTransform;
                target.selectionBackgroundColor = "";
                this.clearContext(ctx);
                ctx.save();
                ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);
                target.render(ctx);
                ctx.restore();
                target.selectionBackgroundColor = originalColor;
                var isTransparent = fabric.util.isTransparent(ctx, x, y, this.targetFindTolerance);
                return isTransparent;
              },
              _isSelectionKeyPressed: function(e) {
                var selectionKeyPressed = false;
                if (Object.prototype.toString.call(this.selectionKey) === "[object Array]") {
                  selectionKeyPressed = !!this.selectionKey.find(function(key) {
                    return e[key] === true;
                  });
                } else {
                  selectionKeyPressed = e[this.selectionKey];
                }
                return selectionKeyPressed;
              },
              _shouldClearSelection: function(e, target) {
                var activeObjects = this.getActiveObjects(), activeObject = this._activeObject;
                return !target || target && activeObject && activeObjects.length > 1 && activeObjects.indexOf(target) === -1 && activeObject !== target && !this._isSelectionKeyPressed(e) || target && !target.evented || target && !target.selectable && activeObject && activeObject !== target;
              },
              _shouldCenterTransform: function(target, action, altKey) {
                if (!target) {
                  return;
                }
                var centerTransform;
                if (action === "scale" || action === "scaleX" || action === "scaleY" || action === "resizing") {
                  centerTransform = this.centeredScaling || target.centeredScaling;
                } else if (action === "rotate") {
                  centerTransform = this.centeredRotation || target.centeredRotation;
                }
                return centerTransform ? !altKey : altKey;
              },
              _getOriginFromCorner: function(target, corner) {
                var origin = {
                  x: target.originX,
                  y: target.originY
                };
                if (corner === "ml" || corner === "tl" || corner === "bl") {
                  origin.x = "right";
                } else if (corner === "mr" || corner === "tr" || corner === "br") {
                  origin.x = "left";
                }
                if (corner === "tl" || corner === "mt" || corner === "tr") {
                  origin.y = "bottom";
                } else if (corner === "bl" || corner === "mb" || corner === "br") {
                  origin.y = "top";
                }
                return origin;
              },
              _getActionFromCorner: function(alreadySelected, corner, e, target) {
                if (!corner || !alreadySelected) {
                  return "drag";
                }
                var control = target.controls[corner];
                return control.getActionName(e, control, target);
              },
              _setupCurrentTransform: function(e, target, alreadySelected) {
                if (!target) {
                  return;
                }
                var pointer = this.getPointer(e), corner = target.__corner, control = target.controls[corner], actionHandler = alreadySelected && corner ? control.getActionHandler(e, target, control) : fabric.controlsUtils.dragHandler, action = this._getActionFromCorner(alreadySelected, corner, e, target), origin = this._getOriginFromCorner(target, corner), altKey = e[this.centeredKey], transform = {
                  target,
                  action,
                  actionHandler,
                  corner,
                  scaleX: target.scaleX,
                  scaleY: target.scaleY,
                  skewX: target.skewX,
                  skewY: target.skewY,
                  offsetX: pointer.x - target.left,
                  offsetY: pointer.y - target.top,
                  originX: origin.x,
                  originY: origin.y,
                  ex: pointer.x,
                  ey: pointer.y,
                  lastX: pointer.x,
                  lastY: pointer.y,
                  theta: degreesToRadians(target.angle),
                  width: target.width * target.scaleX,
                  shiftKey: e.shiftKey,
                  altKey,
                  original: fabric.util.saveObjectTransform(target)
                };
                if (this._shouldCenterTransform(target, action, altKey)) {
                  transform.originX = "center";
                  transform.originY = "center";
                }
                transform.original.originX = origin.x;
                transform.original.originY = origin.y;
                this._currentTransform = transform;
                this._beforeTransform(e);
              },
              setCursor: function(value) {
                this.upperCanvasEl.style.cursor = value;
              },
              _drawSelection: function(ctx) {
                var selector = this._groupSelector, viewportStart = new fabric.Point(selector.ex, selector.ey), start = fabric.util.transformPoint(viewportStart, this.viewportTransform), viewportExtent = new fabric.Point(selector.ex + selector.left, selector.ey + selector.top), extent = fabric.util.transformPoint(viewportExtent, this.viewportTransform), minX = Math.min(start.x, extent.x), minY = Math.min(start.y, extent.y), maxX = Math.max(start.x, extent.x), maxY = Math.max(start.y, extent.y), strokeOffset = this.selectionLineWidth / 2;
                if (this.selectionColor) {
                  ctx.fillStyle = this.selectionColor;
                  ctx.fillRect(minX, minY, maxX - minX, maxY - minY);
                }
                if (!this.selectionLineWidth || !this.selectionBorderColor) {
                  return;
                }
                ctx.lineWidth = this.selectionLineWidth;
                ctx.strokeStyle = this.selectionBorderColor;
                minX += strokeOffset;
                minY += strokeOffset;
                maxX -= strokeOffset;
                maxY -= strokeOffset;
                fabric.Object.prototype._setLineDash.call(this, ctx, this.selectionDashArray);
                ctx.strokeRect(minX, minY, maxX - minX, maxY - minY);
              },
              findTarget: function(e, skipGroup) {
                if (this.skipTargetFind) {
                  return;
                }
                var ignoreZoom = true, pointer = this.getPointer(e, ignoreZoom), activeObject = this._activeObject, aObjects = this.getActiveObjects(), activeTarget, activeTargetSubs, isTouch = isTouchEvent(e), shouldLookForActive = aObjects.length > 1 && !skipGroup || aObjects.length === 1;
                this.targets = [];
                if (shouldLookForActive && activeObject._findTargetCorner(pointer, isTouch)) {
                  return activeObject;
                }
                if (aObjects.length > 1 && !skipGroup && activeObject === this._searchPossibleTargets([activeObject], pointer)) {
                  return activeObject;
                }
                if (aObjects.length === 1 && activeObject === this._searchPossibleTargets([activeObject], pointer)) {
                  if (!this.preserveObjectStacking) {
                    return activeObject;
                  } else {
                    activeTarget = activeObject;
                    activeTargetSubs = this.targets;
                    this.targets = [];
                  }
                }
                var target = this._searchPossibleTargets(this._objects, pointer);
                if (e[this.altSelectionKey] && target && activeTarget && target !== activeTarget) {
                  target = activeTarget;
                  this.targets = activeTargetSubs;
                }
                return target;
              },
              _checkTarget: function(pointer, obj, globalPointer) {
                if (obj && obj.visible && obj.evented && obj.containsPoint(pointer)) {
                  if ((this.perPixelTargetFind || obj.perPixelTargetFind) && !obj.isEditing) {
                    var isTransparent = this.isTargetTransparent(obj, globalPointer.x, globalPointer.y);
                    if (!isTransparent) {
                      return true;
                    }
                  } else {
                    return true;
                  }
                }
              },
              _searchPossibleTargets: function(objects, pointer) {
                var target, i = objects.length, subTarget;
                while (i--) {
                  var objToCheck = objects[i];
                  var pointerToUse = objToCheck.group ? this._normalizePointer(objToCheck.group, pointer) : pointer;
                  if (this._checkTarget(pointerToUse, objToCheck, pointer)) {
                    target = objects[i];
                    if (target.subTargetCheck && target instanceof fabric.Group) {
                      subTarget = this._searchPossibleTargets(target._objects, pointer);
                      subTarget && this.targets.push(subTarget);
                    }
                    break;
                  }
                }
                return target;
              },
              restorePointerVpt: function(pointer) {
                return fabric.util.transformPoint(pointer, fabric.util.invertTransform(this.viewportTransform));
              },
              getPointer: function(e, ignoreZoom) {
                if (this._absolutePointer && !ignoreZoom) {
                  return this._absolutePointer;
                }
                if (this._pointer && ignoreZoom) {
                  return this._pointer;
                }
                var pointer = getPointer(e), upperCanvasEl = this.upperCanvasEl, bounds = upperCanvasEl.getBoundingClientRect(), boundsWidth = bounds.width || 0, boundsHeight = bounds.height || 0, cssScale;
                if (!boundsWidth || !boundsHeight) {
                  if ("top" in bounds && "bottom" in bounds) {
                    boundsHeight = Math.abs(bounds.top - bounds.bottom);
                  }
                  if ("right" in bounds && "left" in bounds) {
                    boundsWidth = Math.abs(bounds.right - bounds.left);
                  }
                }
                this.calcOffset();
                pointer.x = pointer.x - this._offset.left;
                pointer.y = pointer.y - this._offset.top;
                if (!ignoreZoom) {
                  pointer = this.restorePointerVpt(pointer);
                }
                var retinaScaling = this.getRetinaScaling();
                if (retinaScaling !== 1) {
                  pointer.x /= retinaScaling;
                  pointer.y /= retinaScaling;
                }
                if (boundsWidth === 0 || boundsHeight === 0) {
                  cssScale = { width: 1, height: 1 };
                } else {
                  cssScale = {
                    width: upperCanvasEl.width / boundsWidth,
                    height: upperCanvasEl.height / boundsHeight
                  };
                }
                return {
                  x: pointer.x * cssScale.width,
                  y: pointer.y * cssScale.height
                };
              },
              _createUpperCanvas: function() {
                var lowerCanvasClass = this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/, ""), lowerCanvasEl = this.lowerCanvasEl, upperCanvasEl = this.upperCanvasEl;
                if (upperCanvasEl) {
                  upperCanvasEl.className = "";
                } else {
                  upperCanvasEl = this._createCanvasElement();
                  this.upperCanvasEl = upperCanvasEl;
                }
                fabric.util.addClass(upperCanvasEl, "upper-canvas " + lowerCanvasClass);
                this.wrapperEl.appendChild(upperCanvasEl);
                this._copyCanvasStyle(lowerCanvasEl, upperCanvasEl);
                this._applyCanvasStyle(upperCanvasEl);
                this.contextTop = upperCanvasEl.getContext("2d");
              },
              _createCacheCanvas: function() {
                this.cacheCanvasEl = this._createCanvasElement();
                this.cacheCanvasEl.setAttribute("width", this.width);
                this.cacheCanvasEl.setAttribute("height", this.height);
                this.contextCache = this.cacheCanvasEl.getContext("2d");
              },
              _initWrapperElement: function() {
                this.wrapperEl = fabric.util.wrapElement(this.lowerCanvasEl, "div", {
                  "class": this.containerClass
                });
                fabric.util.setStyle(this.wrapperEl, {
                  width: this.width + "px",
                  height: this.height + "px",
                  position: "relative"
                });
                fabric.util.makeElementUnselectable(this.wrapperEl);
              },
              _applyCanvasStyle: function(element) {
                var width = this.width || element.width, height = this.height || element.height;
                fabric.util.setStyle(element, {
                  position: "absolute",
                  width: width + "px",
                  height: height + "px",
                  left: 0,
                  top: 0,
                  "touch-action": this.allowTouchScrolling ? "manipulation" : "none",
                  "-ms-touch-action": this.allowTouchScrolling ? "manipulation" : "none"
                });
                element.width = width;
                element.height = height;
                fabric.util.makeElementUnselectable(element);
              },
              _copyCanvasStyle: function(fromEl, toEl) {
                toEl.style.cssText = fromEl.style.cssText;
              },
              getSelectionContext: function() {
                return this.contextTop;
              },
              getSelectionElement: function() {
                return this.upperCanvasEl;
              },
              getActiveObject: function() {
                return this._activeObject;
              },
              getActiveObjects: function() {
                var active = this._activeObject;
                if (active) {
                  if (active.type === "activeSelection" && active._objects) {
                    return active._objects.slice(0);
                  } else {
                    return [active];
                  }
                }
                return [];
              },
              _onObjectRemoved: function(obj) {
                if (obj === this._activeObject) {
                  this.fire("before:selection:cleared", { target: obj });
                  this._discardActiveObject();
                  this.fire("selection:cleared", { target: obj });
                  obj.fire("deselected");
                }
                if (obj === this._hoveredTarget) {
                  this._hoveredTarget = null;
                  this._hoveredTargets = [];
                }
                this.callSuper("_onObjectRemoved", obj);
              },
              _fireSelectionEvents: function(oldObjects, e) {
                var somethingChanged = false, objects = this.getActiveObjects(), added = [], removed = [];
                oldObjects.forEach(function(oldObject) {
                  if (objects.indexOf(oldObject) === -1) {
                    somethingChanged = true;
                    oldObject.fire("deselected", {
                      e,
                      target: oldObject
                    });
                    removed.push(oldObject);
                  }
                });
                objects.forEach(function(object) {
                  if (oldObjects.indexOf(object) === -1) {
                    somethingChanged = true;
                    object.fire("selected", {
                      e,
                      target: object
                    });
                    added.push(object);
                  }
                });
                if (oldObjects.length > 0 && objects.length > 0) {
                  somethingChanged && this.fire("selection:updated", {
                    e,
                    selected: added,
                    deselected: removed,
                    updated: added[0] || removed[0],
                    target: this._activeObject
                  });
                } else if (objects.length > 0) {
                  this.fire("selection:created", {
                    e,
                    selected: added,
                    target: this._activeObject
                  });
                } else if (oldObjects.length > 0) {
                  this.fire("selection:cleared", {
                    e,
                    deselected: removed
                  });
                }
              },
              setActiveObject: function(object, e) {
                var currentActives = this.getActiveObjects();
                this._setActiveObject(object, e);
                this._fireSelectionEvents(currentActives, e);
                return this;
              },
              _setActiveObject: function(object, e) {
                if (this._activeObject === object) {
                  return false;
                }
                if (!this._discardActiveObject(e, object)) {
                  return false;
                }
                if (object.onSelect({ e })) {
                  return false;
                }
                this._activeObject = object;
                return true;
              },
              _discardActiveObject: function(e, object) {
                var obj = this._activeObject;
                if (obj) {
                  if (obj.onDeselect({ e, object })) {
                    return false;
                  }
                  this._activeObject = null;
                }
                return true;
              },
              discardActiveObject: function(e) {
                var currentActives = this.getActiveObjects(), activeObject = this.getActiveObject();
                if (currentActives.length) {
                  this.fire("before:selection:cleared", { target: activeObject, e });
                }
                this._discardActiveObject(e);
                this._fireSelectionEvents(currentActives, e);
                return this;
              },
              dispose: function() {
                var wrapper = this.wrapperEl;
                this.removeListeners();
                wrapper.removeChild(this.upperCanvasEl);
                wrapper.removeChild(this.lowerCanvasEl);
                this.contextCache = null;
                this.contextTop = null;
                ["upperCanvasEl", "cacheCanvasEl"].forEach(function(element) {
                  fabric.util.cleanUpJsdomNode(this[element]);
                  this[element] = void 0;
                }.bind(this));
                if (wrapper.parentNode) {
                  wrapper.parentNode.replaceChild(this.lowerCanvasEl, this.wrapperEl);
                }
                delete this.wrapperEl;
                fabric.StaticCanvas.prototype.dispose.call(this);
                return this;
              },
              clear: function() {
                this.discardActiveObject();
                this.clearContext(this.contextTop);
                return this.callSuper("clear");
              },
              drawControls: function(ctx) {
                var activeObject = this._activeObject;
                if (activeObject) {
                  activeObject._renderControls(ctx);
                }
              },
              _toObject: function(instance, methodName, propertiesToInclude) {
                var originalProperties = this._realizeGroupTransformOnObject(instance), object = this.callSuper("_toObject", instance, methodName, propertiesToInclude);
                this._unwindGroupTransformOnObject(instance, originalProperties);
                return object;
              },
              _realizeGroupTransformOnObject: function(instance) {
                if (instance.group && instance.group.type === "activeSelection" && this._activeObject === instance.group) {
                  var layoutProps = ["angle", "flipX", "flipY", "left", "scaleX", "scaleY", "skewX", "skewY", "top"];
                  var originalValues = {};
                  layoutProps.forEach(function(prop2) {
                    originalValues[prop2] = instance[prop2];
                  });
                  fabric.util.addTransformToObject(instance, this._activeObject.calcOwnMatrix());
                  return originalValues;
                } else {
                  return null;
                }
              },
              _unwindGroupTransformOnObject: function(instance, originalValues) {
                if (originalValues) {
                  instance.set(originalValues);
                }
              },
              _setSVGObject: function(markup, instance, reviver) {
                var originalProperties = this._realizeGroupTransformOnObject(instance);
                this.callSuper("_setSVGObject", markup, instance, reviver);
                this._unwindGroupTransformOnObject(instance, originalProperties);
              },
              setViewportTransform: function(vpt) {
                if (this.renderOnAddRemove && this._activeObject && this._activeObject.isEditing) {
                  this._activeObject.clearContextTop();
                }
                fabric.StaticCanvas.prototype.setViewportTransform.call(this, vpt);
              }
            });
            for (var prop in fabric.StaticCanvas) {
              if (prop !== "prototype") {
                fabric.Canvas[prop] = fabric.StaticCanvas[prop];
              }
            }
          })();
          (function() {
            var addListener = fabric.util.addListener, removeListener = fabric.util.removeListener, RIGHT_CLICK = 3, MIDDLE_CLICK = 2, LEFT_CLICK = 1, addEventOptions = { passive: false };
            function checkClick(e, value) {
              return e.button && e.button === value - 1;
            }
            fabric.util.object.extend(fabric.Canvas.prototype, {
              mainTouchId: null,
              _initEventListeners: function() {
                this.removeListeners();
                this._bindEvents();
                this.addOrRemove(addListener, "add");
              },
              _getEventPrefix: function() {
                return this.enablePointerEvents ? "pointer" : "mouse";
              },
              addOrRemove: function(functor, eventjsFunctor) {
                var canvasElement = this.upperCanvasEl, eventTypePrefix = this._getEventPrefix();
                functor(fabric.window, "resize", this._onResize);
                functor(canvasElement, eventTypePrefix + "down", this._onMouseDown);
                functor(canvasElement, eventTypePrefix + "move", this._onMouseMove, addEventOptions);
                functor(canvasElement, eventTypePrefix + "out", this._onMouseOut);
                functor(canvasElement, eventTypePrefix + "enter", this._onMouseEnter);
                functor(canvasElement, "wheel", this._onMouseWheel);
                functor(canvasElement, "contextmenu", this._onContextMenu);
                functor(canvasElement, "dblclick", this._onDoubleClick);
                functor(canvasElement, "dragover", this._onDragOver);
                functor(canvasElement, "dragenter", this._onDragEnter);
                functor(canvasElement, "dragleave", this._onDragLeave);
                functor(canvasElement, "drop", this._onDrop);
                if (!this.enablePointerEvents) {
                  functor(canvasElement, "touchstart", this._onTouchStart, addEventOptions);
                }
                if (typeof eventjs !== "undefined" && eventjsFunctor in eventjs) {
                  eventjs[eventjsFunctor](canvasElement, "gesture", this._onGesture);
                  eventjs[eventjsFunctor](canvasElement, "drag", this._onDrag);
                  eventjs[eventjsFunctor](canvasElement, "orientation", this._onOrientationChange);
                  eventjs[eventjsFunctor](canvasElement, "shake", this._onShake);
                  eventjs[eventjsFunctor](canvasElement, "longpress", this._onLongPress);
                }
              },
              removeListeners: function() {
                this.addOrRemove(removeListener, "remove");
                var eventTypePrefix = this._getEventPrefix();
                removeListener(fabric.document, eventTypePrefix + "up", this._onMouseUp);
                removeListener(fabric.document, "touchend", this._onTouchEnd, addEventOptions);
                removeListener(fabric.document, eventTypePrefix + "move", this._onMouseMove, addEventOptions);
                removeListener(fabric.document, "touchmove", this._onMouseMove, addEventOptions);
              },
              _bindEvents: function() {
                if (this.eventsBound) {
                  return;
                }
                this._onMouseDown = this._onMouseDown.bind(this);
                this._onTouchStart = this._onTouchStart.bind(this);
                this._onMouseMove = this._onMouseMove.bind(this);
                this._onMouseUp = this._onMouseUp.bind(this);
                this._onTouchEnd = this._onTouchEnd.bind(this);
                this._onResize = this._onResize.bind(this);
                this._onGesture = this._onGesture.bind(this);
                this._onDrag = this._onDrag.bind(this);
                this._onShake = this._onShake.bind(this);
                this._onLongPress = this._onLongPress.bind(this);
                this._onOrientationChange = this._onOrientationChange.bind(this);
                this._onMouseWheel = this._onMouseWheel.bind(this);
                this._onMouseOut = this._onMouseOut.bind(this);
                this._onMouseEnter = this._onMouseEnter.bind(this);
                this._onContextMenu = this._onContextMenu.bind(this);
                this._onDoubleClick = this._onDoubleClick.bind(this);
                this._onDragOver = this._onDragOver.bind(this);
                this._onDragEnter = this._simpleEventHandler.bind(this, "dragenter");
                this._onDragLeave = this._simpleEventHandler.bind(this, "dragleave");
                this._onDrop = this._simpleEventHandler.bind(this, "drop");
                this.eventsBound = true;
              },
              _onGesture: function(e, self2) {
                this.__onTransformGesture && this.__onTransformGesture(e, self2);
              },
              _onDrag: function(e, self2) {
                this.__onDrag && this.__onDrag(e, self2);
              },
              _onMouseWheel: function(e) {
                this.__onMouseWheel(e);
              },
              _onMouseOut: function(e) {
                var target = this._hoveredTarget;
                this.fire("mouse:out", { target, e });
                this._hoveredTarget = null;
                target && target.fire("mouseout", { e });
                var _this = this;
                this._hoveredTargets.forEach(function(_target) {
                  _this.fire("mouse:out", { target, e });
                  _target && target.fire("mouseout", { e });
                });
                this._hoveredTargets = [];
                if (this._iTextInstances) {
                  this._iTextInstances.forEach(function(obj) {
                    if (obj.isEditing) {
                      obj.hiddenTextarea.focus();
                    }
                  });
                }
              },
              _onMouseEnter: function(e) {
                if (!this._currentTransform && !this.findTarget(e)) {
                  this.fire("mouse:over", { target: null, e });
                  this._hoveredTarget = null;
                  this._hoveredTargets = [];
                }
              },
              _onOrientationChange: function(e, self2) {
                this.__onOrientationChange && this.__onOrientationChange(e, self2);
              },
              _onShake: function(e, self2) {
                this.__onShake && this.__onShake(e, self2);
              },
              _onLongPress: function(e, self2) {
                this.__onLongPress && this.__onLongPress(e, self2);
              },
              _onDragOver: function(e) {
                e.preventDefault();
                var target = this._simpleEventHandler("dragover", e);
                this._fireEnterLeaveEvents(target, e);
              },
              _onContextMenu: function(e) {
                if (this.stopContextMenu) {
                  e.stopPropagation();
                  e.preventDefault();
                }
                return false;
              },
              _onDoubleClick: function(e) {
                this._cacheTransformEventData(e);
                this._handleEvent(e, "dblclick");
                this._resetTransformEventData(e);
              },
              getPointerId: function(evt) {
                var changedTouches = evt.changedTouches;
                if (changedTouches) {
                  return changedTouches[0] && changedTouches[0].identifier;
                }
                if (this.enablePointerEvents) {
                  return evt.pointerId;
                }
                return -1;
              },
              _isMainEvent: function(evt) {
                if (evt.isPrimary === true) {
                  return true;
                }
                if (evt.isPrimary === false) {
                  return false;
                }
                if (evt.type === "touchend" && evt.touches.length === 0) {
                  return true;
                }
                if (evt.changedTouches) {
                  return evt.changedTouches[0].identifier === this.mainTouchId;
                }
                return true;
              },
              _onTouchStart: function(e) {
                e.preventDefault();
                if (this.mainTouchId === null) {
                  this.mainTouchId = this.getPointerId(e);
                }
                this.__onMouseDown(e);
                this._resetTransformEventData();
                var canvasElement = this.upperCanvasEl, eventTypePrefix = this._getEventPrefix();
                addListener(fabric.document, "touchend", this._onTouchEnd, addEventOptions);
                addListener(fabric.document, "touchmove", this._onMouseMove, addEventOptions);
                removeListener(canvasElement, eventTypePrefix + "down", this._onMouseDown);
              },
              _onMouseDown: function(e) {
                this.__onMouseDown(e);
                this._resetTransformEventData();
                var canvasElement = this.upperCanvasEl, eventTypePrefix = this._getEventPrefix();
                removeListener(canvasElement, eventTypePrefix + "move", this._onMouseMove, addEventOptions);
                addListener(fabric.document, eventTypePrefix + "up", this._onMouseUp);
                addListener(fabric.document, eventTypePrefix + "move", this._onMouseMove, addEventOptions);
              },
              _onTouchEnd: function(e) {
                if (e.touches.length > 0) {
                  return;
                }
                this.__onMouseUp(e);
                this._resetTransformEventData();
                this.mainTouchId = null;
                var eventTypePrefix = this._getEventPrefix();
                removeListener(fabric.document, "touchend", this._onTouchEnd, addEventOptions);
                removeListener(fabric.document, "touchmove", this._onMouseMove, addEventOptions);
                var _this = this;
                if (this._willAddMouseDown) {
                  clearTimeout(this._willAddMouseDown);
                }
                this._willAddMouseDown = setTimeout(function() {
                  addListener(_this.upperCanvasEl, eventTypePrefix + "down", _this._onMouseDown);
                  _this._willAddMouseDown = 0;
                }, 400);
              },
              _onMouseUp: function(e) {
                this.__onMouseUp(e);
                this._resetTransformEventData();
                var canvasElement = this.upperCanvasEl, eventTypePrefix = this._getEventPrefix();
                if (this._isMainEvent(e)) {
                  removeListener(fabric.document, eventTypePrefix + "up", this._onMouseUp);
                  removeListener(fabric.document, eventTypePrefix + "move", this._onMouseMove, addEventOptions);
                  addListener(canvasElement, eventTypePrefix + "move", this._onMouseMove, addEventOptions);
                }
              },
              _onMouseMove: function(e) {
                !this.allowTouchScrolling && e.preventDefault && e.preventDefault();
                this.__onMouseMove(e);
              },
              _onResize: function() {
                this.calcOffset();
              },
              _shouldRender: function(target) {
                var activeObject = this._activeObject;
                if (!!activeObject !== !!target || activeObject && target && activeObject !== target) {
                  return true;
                } else if (activeObject && activeObject.isEditing) {
                  return false;
                }
                return false;
              },
              __onMouseUp: function(e) {
                var target, transform = this._currentTransform, groupSelector = this._groupSelector, shouldRender = false, isClick = !groupSelector || groupSelector.left === 0 && groupSelector.top === 0;
                this._cacheTransformEventData(e);
                target = this._target;
                this._handleEvent(e, "up:before");
                if (checkClick(e, RIGHT_CLICK)) {
                  if (this.fireRightClick) {
                    this._handleEvent(e, "up", RIGHT_CLICK, isClick);
                  }
                  return;
                }
                if (checkClick(e, MIDDLE_CLICK)) {
                  if (this.fireMiddleClick) {
                    this._handleEvent(e, "up", MIDDLE_CLICK, isClick);
                  }
                  this._resetTransformEventData();
                  return;
                }
                if (this.isDrawingMode && this._isCurrentlyDrawing) {
                  this._onMouseUpInDrawingMode(e);
                  return;
                }
                if (!this._isMainEvent(e)) {
                  return;
                }
                if (transform) {
                  this._finalizeCurrentTransform(e);
                  shouldRender = transform.actionPerformed;
                }
                if (!isClick) {
                  var targetWasActive = target === this._activeObject;
                  this._maybeGroupObjects(e);
                  if (!shouldRender) {
                    shouldRender = this._shouldRender(target) || !targetWasActive && target === this._activeObject;
                  }
                }
                if (target) {
                  if (target.selectable && target !== this._activeObject && target.activeOn === "up") {
                    this.setActiveObject(target, e);
                    shouldRender = true;
                  } else {
                    var corner = target._findTargetCorner(this.getPointer(e, true), fabric.util.isTouchEvent(e));
                    var control = target.controls[corner], mouseUpHandler = control && control.getMouseUpHandler(e, target, control);
                    if (mouseUpHandler) {
                      var pointer = this.getPointer(e);
                      mouseUpHandler(e, transform, pointer.x, pointer.y);
                    }
                  }
                  target.isMoving = false;
                }
                this._setCursorFromEvent(e, target);
                this._handleEvent(e, "up", LEFT_CLICK, isClick);
                this._groupSelector = null;
                this._currentTransform = null;
                target && (target.__corner = 0);
                if (shouldRender) {
                  this.requestRenderAll();
                } else if (!isClick) {
                  this.renderTop();
                }
              },
              _simpleEventHandler: function(eventType, e) {
                var target = this.findTarget(e), targets = this.targets, options = {
                  e,
                  target,
                  subTargets: targets
                };
                this.fire(eventType, options);
                target && target.fire(eventType, options);
                if (!targets) {
                  return target;
                }
                for (var i = 0; i < targets.length; i++) {
                  targets[i].fire(eventType, options);
                }
                return target;
              },
              _handleEvent: function(e, eventType, button, isClick) {
                var target = this._target, targets = this.targets || [], options = {
                  e,
                  target,
                  subTargets: targets,
                  button: button || LEFT_CLICK,
                  isClick: isClick || false,
                  pointer: this._pointer,
                  absolutePointer: this._absolutePointer,
                  transform: this._currentTransform
                };
                if (eventType === "up") {
                  options.currentTarget = this.findTarget(e);
                  options.currentSubTargets = this.targets;
                }
                this.fire("mouse:" + eventType, options);
                target && target.fire("mouse" + eventType, options);
                for (var i = 0; i < targets.length; i++) {
                  targets[i].fire("mouse" + eventType, options);
                }
              },
              _finalizeCurrentTransform: function(e) {
                var transform = this._currentTransform, target = transform.target, eventName, options = {
                  e,
                  target,
                  transform,
                  action: transform.action
                };
                if (target._scaling) {
                  target._scaling = false;
                }
                target.setCoords();
                if (transform.actionPerformed || this.stateful && target.hasStateChanged()) {
                  if (transform.actionPerformed) {
                    eventName = this._addEventOptions(options, transform);
                    this._fire(eventName, options);
                  }
                  this._fire("modified", options);
                }
              },
              _addEventOptions: function(options, transform) {
                var eventName, by;
                switch (transform.action) {
                  case "scaleX":
                    eventName = "scaled";
                    by = "x";
                    break;
                  case "scaleY":
                    eventName = "scaled";
                    by = "y";
                    break;
                  case "skewX":
                    eventName = "skewed";
                    by = "x";
                    break;
                  case "skewY":
                    eventName = "skewed";
                    by = "y";
                    break;
                  case "scale":
                    eventName = "scaled";
                    by = "equally";
                    break;
                  case "rotate":
                    eventName = "rotated";
                    break;
                  case "drag":
                    eventName = "moved";
                    break;
                }
                options.by = by;
                return eventName;
              },
              _onMouseDownInDrawingMode: function(e) {
                this._isCurrentlyDrawing = true;
                if (this.getActiveObject()) {
                  this.discardActiveObject(e).requestRenderAll();
                }
                var pointer = this.getPointer(e);
                this.freeDrawingBrush.onMouseDown(pointer, { e, pointer });
                this._handleEvent(e, "down");
              },
              _onMouseMoveInDrawingMode: function(e) {
                if (this._isCurrentlyDrawing) {
                  var pointer = this.getPointer(e);
                  this.freeDrawingBrush.onMouseMove(pointer, { e, pointer });
                }
                this.setCursor(this.freeDrawingCursor);
                this._handleEvent(e, "move");
              },
              _onMouseUpInDrawingMode: function(e) {
                var pointer = this.getPointer(e);
                this._isCurrentlyDrawing = this.freeDrawingBrush.onMouseUp({ e, pointer });
                this._handleEvent(e, "up");
              },
              __onMouseDown: function(e) {
                this._cacheTransformEventData(e);
                this._handleEvent(e, "down:before");
                var target = this._target;
                if (checkClick(e, RIGHT_CLICK)) {
                  if (this.fireRightClick) {
                    this._handleEvent(e, "down", RIGHT_CLICK);
                  }
                  return;
                }
                if (checkClick(e, MIDDLE_CLICK)) {
                  if (this.fireMiddleClick) {
                    this._handleEvent(e, "down", MIDDLE_CLICK);
                  }
                  return;
                }
                if (this.isDrawingMode) {
                  this._onMouseDownInDrawingMode(e);
                  return;
                }
                if (!this._isMainEvent(e)) {
                  return;
                }
                if (this._currentTransform) {
                  return;
                }
                var pointer = this._pointer;
                this._previousPointer = pointer;
                var shouldRender = this._shouldRender(target), shouldGroup = this._shouldGroup(e, target);
                if (this._shouldClearSelection(e, target)) {
                  this.discardActiveObject(e);
                } else if (shouldGroup) {
                  this._handleGrouping(e, target);
                  target = this._activeObject;
                }
                if (this.selection && (!target || !target.selectable && !target.isEditing && target !== this._activeObject)) {
                  this._groupSelector = {
                    ex: this._absolutePointer.x,
                    ey: this._absolutePointer.y,
                    top: 0,
                    left: 0
                  };
                }
                if (target) {
                  var alreadySelected = target === this._activeObject;
                  if (target.selectable && target.activeOn === "down") {
                    this.setActiveObject(target, e);
                  }
                  var corner = target._findTargetCorner(this.getPointer(e, true), fabric.util.isTouchEvent(e));
                  target.__corner = corner;
                  if (target === this._activeObject && (corner || !shouldGroup)) {
                    this._setupCurrentTransform(e, target, alreadySelected);
                    var control = target.controls[corner], pointer = this.getPointer(e), mouseDownHandler = control && control.getMouseDownHandler(e, target, control);
                    if (mouseDownHandler) {
                      mouseDownHandler(e, this._currentTransform, pointer.x, pointer.y);
                    }
                  }
                }
                this._handleEvent(e, "down");
                (shouldRender || shouldGroup) && this.requestRenderAll();
              },
              _resetTransformEventData: function() {
                this._target = null;
                this._pointer = null;
                this._absolutePointer = null;
              },
              _cacheTransformEventData: function(e) {
                this._resetTransformEventData();
                this._pointer = this.getPointer(e, true);
                this._absolutePointer = this.restorePointerVpt(this._pointer);
                this._target = this._currentTransform ? this._currentTransform.target : this.findTarget(e) || null;
              },
              _beforeTransform: function(e) {
                var t = this._currentTransform;
                this.stateful && t.target.saveState();
                this.fire("before:transform", {
                  e,
                  transform: t
                });
              },
              __onMouseMove: function(e) {
                this._handleEvent(e, "move:before");
                this._cacheTransformEventData(e);
                var target, pointer;
                if (this.isDrawingMode) {
                  this._onMouseMoveInDrawingMode(e);
                  return;
                }
                if (!this._isMainEvent(e)) {
                  return;
                }
                var groupSelector = this._groupSelector;
                if (groupSelector) {
                  pointer = this._absolutePointer;
                  groupSelector.left = pointer.x - groupSelector.ex;
                  groupSelector.top = pointer.y - groupSelector.ey;
                  this.renderTop();
                } else if (!this._currentTransform) {
                  target = this.findTarget(e) || null;
                  this._setCursorFromEvent(e, target);
                  this._fireOverOutEvents(target, e);
                } else {
                  this._transformObject(e);
                }
                this._handleEvent(e, "move");
                this._resetTransformEventData();
              },
              _fireOverOutEvents: function(target, e) {
                var _hoveredTarget = this._hoveredTarget, _hoveredTargets = this._hoveredTargets, targets = this.targets, length = Math.max(_hoveredTargets.length, targets.length);
                this.fireSyntheticInOutEvents(target, e, {
                  oldTarget: _hoveredTarget,
                  evtOut: "mouseout",
                  canvasEvtOut: "mouse:out",
                  evtIn: "mouseover",
                  canvasEvtIn: "mouse:over"
                });
                for (var i = 0; i < length; i++) {
                  this.fireSyntheticInOutEvents(targets[i], e, {
                    oldTarget: _hoveredTargets[i],
                    evtOut: "mouseout",
                    evtIn: "mouseover"
                  });
                }
                this._hoveredTarget = target;
                this._hoveredTargets = this.targets.concat();
              },
              _fireEnterLeaveEvents: function(target, e) {
                var _draggedoverTarget = this._draggedoverTarget, _hoveredTargets = this._hoveredTargets, targets = this.targets, length = Math.max(_hoveredTargets.length, targets.length);
                this.fireSyntheticInOutEvents(target, e, {
                  oldTarget: _draggedoverTarget,
                  evtOut: "dragleave",
                  evtIn: "dragenter"
                });
                for (var i = 0; i < length; i++) {
                  this.fireSyntheticInOutEvents(targets[i], e, {
                    oldTarget: _hoveredTargets[i],
                    evtOut: "dragleave",
                    evtIn: "dragenter"
                  });
                }
                this._draggedoverTarget = target;
              },
              fireSyntheticInOutEvents: function(target, e, config) {
                var inOpt, outOpt, oldTarget = config.oldTarget, outFires, inFires, targetChanged = oldTarget !== target, canvasEvtIn = config.canvasEvtIn, canvasEvtOut = config.canvasEvtOut;
                if (targetChanged) {
                  inOpt = { e, target, previousTarget: oldTarget };
                  outOpt = { e, target: oldTarget, nextTarget: target };
                }
                inFires = target && targetChanged;
                outFires = oldTarget && targetChanged;
                if (outFires) {
                  canvasEvtOut && this.fire(canvasEvtOut, outOpt);
                  oldTarget.fire(config.evtOut, outOpt);
                }
                if (inFires) {
                  canvasEvtIn && this.fire(canvasEvtIn, inOpt);
                  target.fire(config.evtIn, inOpt);
                }
              },
              __onMouseWheel: function(e) {
                this._cacheTransformEventData(e);
                this._handleEvent(e, "wheel");
                this._resetTransformEventData();
              },
              _transformObject: function(e) {
                var pointer = this.getPointer(e), transform = this._currentTransform;
                transform.reset = false;
                transform.shiftKey = e.shiftKey;
                transform.altKey = e[this.centeredKey];
                this._performTransformAction(e, transform, pointer);
                transform.actionPerformed && this.requestRenderAll();
              },
              _performTransformAction: function(e, transform, pointer) {
                var x = pointer.x, y = pointer.y, action = transform.action, actionPerformed = false, actionHandler = transform.actionHandler;
                if (actionHandler) {
                  actionPerformed = actionHandler(e, transform, x, y);
                }
                if (action === "drag" && actionPerformed) {
                  transform.target.isMoving = true;
                  this.setCursor(transform.target.moveCursor || this.moveCursor);
                }
                transform.actionPerformed = transform.actionPerformed || actionPerformed;
              },
              _fire: fabric.controlsUtils.fireEvent,
              _setCursorFromEvent: function(e, target) {
                if (!target) {
                  this.setCursor(this.defaultCursor);
                  return false;
                }
                var hoverCursor = target.hoverCursor || this.hoverCursor, activeSelection = this._activeObject && this._activeObject.type === "activeSelection" ? this._activeObject : null, corner = (!activeSelection || !activeSelection.contains(target)) && target._findTargetCorner(this.getPointer(e, true));
                if (!corner) {
                  if (target.subTargetCheck) {
                    this.targets.concat().reverse().map(function(_target) {
                      hoverCursor = _target.hoverCursor || hoverCursor;
                    });
                  }
                  this.setCursor(hoverCursor);
                } else {
                  this.setCursor(this.getCornerCursor(corner, target, e));
                }
              },
              getCornerCursor: function(corner, target, e) {
                var control = target.controls[corner];
                return control.cursorStyleHandler(e, control, target);
              }
            });
          })();
          (function() {
            var min = Math.min, max = Math.max;
            fabric.util.object.extend(fabric.Canvas.prototype, {
              _shouldGroup: function(e, target) {
                var activeObject = this._activeObject;
                return activeObject && this._isSelectionKeyPressed(e) && target && target.selectable && this.selection && (activeObject !== target || activeObject.type === "activeSelection") && !target.onSelect({ e });
              },
              _handleGrouping: function(e, target) {
                var activeObject = this._activeObject;
                if (activeObject.__corner) {
                  return;
                }
                if (target === activeObject) {
                  target = this.findTarget(e, true);
                  if (!target || !target.selectable) {
                    return;
                  }
                }
                if (activeObject && activeObject.type === "activeSelection") {
                  this._updateActiveSelection(target, e);
                } else {
                  this._createActiveSelection(target, e);
                }
              },
              _updateActiveSelection: function(target, e) {
                var activeSelection = this._activeObject, currentActiveObjects = activeSelection._objects.slice(0);
                if (activeSelection.contains(target)) {
                  activeSelection.removeWithUpdate(target);
                  this._hoveredTarget = target;
                  this._hoveredTargets = this.targets.concat();
                  if (activeSelection.size() === 1) {
                    this._setActiveObject(activeSelection.item(0), e);
                  }
                } else {
                  activeSelection.addWithUpdate(target);
                  this._hoveredTarget = activeSelection;
                  this._hoveredTargets = this.targets.concat();
                }
                this._fireSelectionEvents(currentActiveObjects, e);
              },
              _createActiveSelection: function(target, e) {
                var currentActives = this.getActiveObjects(), group = this._createGroup(target);
                this._hoveredTarget = group;
                this._setActiveObject(group, e);
                this._fireSelectionEvents(currentActives, e);
              },
              _createGroup: function(target) {
                var objects = this._objects, isActiveLower = objects.indexOf(this._activeObject) < objects.indexOf(target), groupObjects = isActiveLower ? [this._activeObject, target] : [target, this._activeObject];
                this._activeObject.isEditing && this._activeObject.exitEditing();
                return new fabric.ActiveSelection(groupObjects, {
                  canvas: this
                });
              },
              _groupSelectedObjects: function(e) {
                var group = this._collectObjects(e), aGroup;
                if (group.length === 1) {
                  this.setActiveObject(group[0], e);
                } else if (group.length > 1) {
                  aGroup = new fabric.ActiveSelection(group.reverse(), {
                    canvas: this
                  });
                  this.setActiveObject(aGroup, e);
                }
              },
              _collectObjects: function(e) {
                var group = [], currentObject, x1 = this._groupSelector.ex, y1 = this._groupSelector.ey, x2 = x1 + this._groupSelector.left, y2 = y1 + this._groupSelector.top, selectionX1Y1 = new fabric.Point(min(x1, x2), min(y1, y2)), selectionX2Y2 = new fabric.Point(max(x1, x2), max(y1, y2)), allowIntersect = !this.selectionFullyContained, isClick = x1 === x2 && y1 === y2;
                for (var i = this._objects.length; i--; ) {
                  currentObject = this._objects[i];
                  if (!currentObject || !currentObject.selectable || !currentObject.visible) {
                    continue;
                  }
                  if (allowIntersect && currentObject.intersectsWithRect(selectionX1Y1, selectionX2Y2, true) || currentObject.isContainedWithinRect(selectionX1Y1, selectionX2Y2, true) || allowIntersect && currentObject.containsPoint(selectionX1Y1, null, true) || allowIntersect && currentObject.containsPoint(selectionX2Y2, null, true)) {
                    group.push(currentObject);
                    if (isClick) {
                      break;
                    }
                  }
                }
                if (group.length > 1) {
                  group = group.filter(function(object) {
                    return !object.onSelect({ e });
                  });
                }
                return group;
              },
              _maybeGroupObjects: function(e) {
                if (this.selection && this._groupSelector) {
                  this._groupSelectedObjects(e);
                }
                this.setCursor(this.defaultCursor);
                this._groupSelector = null;
              }
            });
          })();
          (function() {
            fabric.util.object.extend(fabric.StaticCanvas.prototype, {
              toDataURL: function(options) {
                options || (options = {});
                var format = options.format || "png", quality = options.quality || 1, multiplier = (options.multiplier || 1) * (options.enableRetinaScaling ? this.getRetinaScaling() : 1), canvasEl = this.toCanvasElement(multiplier, options);
                return fabric.util.toDataURL(canvasEl, format, quality);
              },
              toCanvasElement: function(multiplier, cropping) {
                multiplier = multiplier || 1;
                cropping = cropping || {};
                var scaledWidth = (cropping.width || this.width) * multiplier, scaledHeight = (cropping.height || this.height) * multiplier, zoom = this.getZoom(), originalWidth = this.width, originalHeight = this.height, newZoom = zoom * multiplier, vp = this.viewportTransform, translateX = (vp[4] - (cropping.left || 0)) * multiplier, translateY = (vp[5] - (cropping.top || 0)) * multiplier, originalInteractive = this.interactive, newVp = [newZoom, 0, 0, newZoom, translateX, translateY], originalRetina = this.enableRetinaScaling, canvasEl = fabric.util.createCanvasElement(), originalContextTop = this.contextTop;
                canvasEl.width = scaledWidth;
                canvasEl.height = scaledHeight;
                this.contextTop = null;
                this.enableRetinaScaling = false;
                this.interactive = false;
                this.viewportTransform = newVp;
                this.width = scaledWidth;
                this.height = scaledHeight;
                this.calcViewportBoundaries();
                this.renderCanvas(canvasEl.getContext("2d"), this._objects);
                this.viewportTransform = vp;
                this.width = originalWidth;
                this.height = originalHeight;
                this.calcViewportBoundaries();
                this.interactive = originalInteractive;
                this.enableRetinaScaling = originalRetina;
                this.contextTop = originalContextTop;
                return canvasEl;
              }
            });
          })();
          fabric.util.object.extend(fabric.StaticCanvas.prototype, {
            loadFromJSON: function(json, callback, reviver) {
              if (!json) {
                return;
              }
              var serialized = typeof json === "string" ? JSON.parse(json) : fabric.util.object.clone(json);
              var _this = this, clipPath = serialized.clipPath, renderOnAddRemove = this.renderOnAddRemove;
              this.renderOnAddRemove = false;
              delete serialized.clipPath;
              this._enlivenObjects(serialized.objects, function(enlivenedObjects) {
                _this.clear();
                _this._setBgOverlay(serialized, function() {
                  if (clipPath) {
                    _this._enlivenObjects([clipPath], function(enlivenedCanvasClip) {
                      _this.clipPath = enlivenedCanvasClip[0];
                      _this.__setupCanvas.call(_this, serialized, enlivenedObjects, renderOnAddRemove, callback);
                    });
                  } else {
                    _this.__setupCanvas.call(_this, serialized, enlivenedObjects, renderOnAddRemove, callback);
                  }
                });
              }, reviver);
              return this;
            },
            __setupCanvas: function(serialized, enlivenedObjects, renderOnAddRemove, callback) {
              var _this = this;
              enlivenedObjects.forEach(function(obj, index) {
                _this.insertAt(obj, index);
              });
              this.renderOnAddRemove = renderOnAddRemove;
              delete serialized.objects;
              delete serialized.backgroundImage;
              delete serialized.overlayImage;
              delete serialized.background;
              delete serialized.overlay;
              this._setOptions(serialized);
              this.renderAll();
              callback && callback();
            },
            _setBgOverlay: function(serialized, callback) {
              var loaded = {
                backgroundColor: false,
                overlayColor: false,
                backgroundImage: false,
                overlayImage: false
              };
              if (!serialized.backgroundImage && !serialized.overlayImage && !serialized.background && !serialized.overlay) {
                callback && callback();
                return;
              }
              var cbIfLoaded = function() {
                if (loaded.backgroundImage && loaded.overlayImage && loaded.backgroundColor && loaded.overlayColor) {
                  callback && callback();
                }
              };
              this.__setBgOverlay("backgroundImage", serialized.backgroundImage, loaded, cbIfLoaded);
              this.__setBgOverlay("overlayImage", serialized.overlayImage, loaded, cbIfLoaded);
              this.__setBgOverlay("backgroundColor", serialized.background, loaded, cbIfLoaded);
              this.__setBgOverlay("overlayColor", serialized.overlay, loaded, cbIfLoaded);
            },
            __setBgOverlay: function(property, value, loaded, callback) {
              var _this = this;
              if (!value) {
                loaded[property] = true;
                callback && callback();
                return;
              }
              if (property === "backgroundImage" || property === "overlayImage") {
                fabric.util.enlivenObjects([value], function(enlivedObject) {
                  _this[property] = enlivedObject[0];
                  loaded[property] = true;
                  callback && callback();
                });
              } else {
                this["set" + fabric.util.string.capitalize(property, true)](value, function() {
                  loaded[property] = true;
                  callback && callback();
                });
              }
            },
            _enlivenObjects: function(objects, callback, reviver) {
              if (!objects || objects.length === 0) {
                callback && callback([]);
                return;
              }
              fabric.util.enlivenObjects(objects, function(enlivenedObjects) {
                callback && callback(enlivenedObjects);
              }, null, reviver);
            },
            _toDataURL: function(format, callback) {
              this.clone(function(clone) {
                callback(clone.toDataURL(format));
              });
            },
            _toDataURLWithMultiplier: function(format, multiplier, callback) {
              this.clone(function(clone) {
                callback(clone.toDataURLWithMultiplier(format, multiplier));
              });
            },
            clone: function(callback, properties) {
              var data = JSON.stringify(this.toJSON(properties));
              this.cloneWithoutData(function(clone) {
                clone.loadFromJSON(data, function() {
                  callback && callback(clone);
                });
              });
            },
            cloneWithoutData: function(callback) {
              var el = fabric.util.createCanvasElement();
              el.width = this.width;
              el.height = this.height;
              var clone = new fabric.Canvas(el);
              if (this.backgroundImage) {
                clone.setBackgroundImage(this.backgroundImage.src, function() {
                  clone.renderAll();
                  callback && callback(clone);
                });
                clone.backgroundImageOpacity = this.backgroundImageOpacity;
                clone.backgroundImageStretch = this.backgroundImageStretch;
              } else {
                callback && callback(clone);
              }
            }
          });
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), extend = fabric2.util.object.extend, clone = fabric2.util.object.clone, toFixed = fabric2.util.toFixed, capitalize = fabric2.util.string.capitalize, degreesToRadians = fabric2.util.degreesToRadians, objectCaching = !fabric2.isLikelyNode, ALIASING_LIMIT = 2;
            if (fabric2.Object) {
              return;
            }
            fabric2.Object = fabric2.util.createClass(fabric2.CommonMethods, {
              type: "object",
              originX: "left",
              originY: "top",
              top: 0,
              left: 0,
              width: 0,
              height: 0,
              scaleX: 1,
              scaleY: 1,
              flipX: false,
              flipY: false,
              opacity: 1,
              angle: 0,
              skewX: 0,
              skewY: 0,
              cornerSize: 13,
              touchCornerSize: 24,
              transparentCorners: true,
              hoverCursor: null,
              moveCursor: null,
              padding: 0,
              borderColor: "rgb(178,204,255)",
              borderDashArray: null,
              cornerColor: "rgb(178,204,255)",
              cornerStrokeColor: null,
              cornerStyle: "rect",
              cornerDashArray: null,
              centeredScaling: false,
              centeredRotation: true,
              fill: "rgb(0,0,0)",
              fillRule: "nonzero",
              globalCompositeOperation: "source-over",
              backgroundColor: "",
              selectionBackgroundColor: "",
              stroke: null,
              strokeWidth: 1,
              strokeDashArray: null,
              strokeDashOffset: 0,
              strokeLineCap: "butt",
              strokeLineJoin: "miter",
              strokeMiterLimit: 4,
              shadow: null,
              borderOpacityWhenMoving: 0.4,
              borderScaleFactor: 1,
              minScaleLimit: 0,
              selectable: true,
              evented: true,
              visible: true,
              hasControls: true,
              hasBorders: true,
              perPixelTargetFind: false,
              includeDefaultValues: true,
              lockMovementX: false,
              lockMovementY: false,
              lockRotation: false,
              lockScalingX: false,
              lockScalingY: false,
              lockSkewingX: false,
              lockSkewingY: false,
              lockScalingFlip: false,
              excludeFromExport: false,
              objectCaching,
              statefullCache: false,
              noScaleCache: true,
              strokeUniform: false,
              dirty: true,
              __corner: 0,
              paintFirst: "fill",
              activeOn: "down",
              stateProperties: "top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),
              cacheProperties: "fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),
              colorProperties: "fill stroke backgroundColor".split(" "),
              clipPath: void 0,
              inverted: false,
              absolutePositioned: false,
              initialize: function(options) {
                if (options) {
                  this.setOptions(options);
                }
              },
              _createCacheCanvas: function() {
                this._cacheProperties = {};
                this._cacheCanvas = fabric2.util.createCanvasElement();
                this._cacheContext = this._cacheCanvas.getContext("2d");
                this._updateCacheCanvas();
                this.dirty = true;
              },
              _limitCacheSize: function(dims) {
                var perfLimitSizeTotal = fabric2.perfLimitSizeTotal, width = dims.width, height = dims.height, max = fabric2.maxCacheSideLimit, min = fabric2.minCacheSideLimit;
                if (width <= max && height <= max && width * height <= perfLimitSizeTotal) {
                  if (width < min) {
                    dims.width = min;
                  }
                  if (height < min) {
                    dims.height = min;
                  }
                  return dims;
                }
                var ar = width / height, limitedDims = fabric2.util.limitDimsByArea(ar, perfLimitSizeTotal), capValue = fabric2.util.capValue, x = capValue(min, limitedDims.x, max), y = capValue(min, limitedDims.y, max);
                if (width > x) {
                  dims.zoomX /= width / x;
                  dims.width = x;
                  dims.capped = true;
                }
                if (height > y) {
                  dims.zoomY /= height / y;
                  dims.height = y;
                  dims.capped = true;
                }
                return dims;
              },
              _getCacheCanvasDimensions: function() {
                var objectScale = this.getTotalObjectScaling(), dim = this._getTransformedDimensions(0, 0), neededX = dim.x * objectScale.scaleX / this.scaleX, neededY = dim.y * objectScale.scaleY / this.scaleY;
                return {
                  width: neededX + ALIASING_LIMIT,
                  height: neededY + ALIASING_LIMIT,
                  zoomX: objectScale.scaleX,
                  zoomY: objectScale.scaleY,
                  x: neededX,
                  y: neededY
                };
              },
              _updateCacheCanvas: function() {
                var targetCanvas = this.canvas;
                if (this.noScaleCache && targetCanvas && targetCanvas._currentTransform) {
                  var target = targetCanvas._currentTransform.target, action = targetCanvas._currentTransform.action;
                  if (this === target && action.slice && action.slice(0, 5) === "scale") {
                    return false;
                  }
                }
                var canvas = this._cacheCanvas, dims = this._limitCacheSize(this._getCacheCanvasDimensions()), minCacheSize = fabric2.minCacheSideLimit, width = dims.width, height = dims.height, drawingWidth, drawingHeight, zoomX = dims.zoomX, zoomY = dims.zoomY, dimensionsChanged = width !== this.cacheWidth || height !== this.cacheHeight, zoomChanged = this.zoomX !== zoomX || this.zoomY !== zoomY, shouldRedraw = dimensionsChanged || zoomChanged, additionalWidth = 0, additionalHeight = 0, shouldResizeCanvas = false;
                if (dimensionsChanged) {
                  var canvasWidth = this._cacheCanvas.width, canvasHeight = this._cacheCanvas.height, sizeGrowing = width > canvasWidth || height > canvasHeight, sizeShrinking = (width < canvasWidth * 0.9 || height < canvasHeight * 0.9) && canvasWidth > minCacheSize && canvasHeight > minCacheSize;
                  shouldResizeCanvas = sizeGrowing || sizeShrinking;
                  if (sizeGrowing && !dims.capped && (width > minCacheSize || height > minCacheSize)) {
                    additionalWidth = width * 0.1;
                    additionalHeight = height * 0.1;
                  }
                }
                if (this instanceof fabric2.Text && this.path) {
                  shouldRedraw = true;
                  shouldResizeCanvas = true;
                  additionalWidth += this.getHeightOfLine(0) * this.zoomX;
                  additionalHeight += this.getHeightOfLine(0) * this.zoomY;
                }
                if (shouldRedraw) {
                  if (shouldResizeCanvas) {
                    canvas.width = Math.ceil(width + additionalWidth);
                    canvas.height = Math.ceil(height + additionalHeight);
                  } else {
                    this._cacheContext.setTransform(1, 0, 0, 1, 0, 0);
                    this._cacheContext.clearRect(0, 0, canvas.width, canvas.height);
                  }
                  drawingWidth = dims.x / 2;
                  drawingHeight = dims.y / 2;
                  this.cacheTranslationX = Math.round(canvas.width / 2 - drawingWidth) + drawingWidth;
                  this.cacheTranslationY = Math.round(canvas.height / 2 - drawingHeight) + drawingHeight;
                  this.cacheWidth = width;
                  this.cacheHeight = height;
                  this._cacheContext.translate(this.cacheTranslationX, this.cacheTranslationY);
                  this._cacheContext.scale(zoomX, zoomY);
                  this.zoomX = zoomX;
                  this.zoomY = zoomY;
                  return true;
                }
                return false;
              },
              setOptions: function(options) {
                this._setOptions(options);
                this._initGradient(options.fill, "fill");
                this._initGradient(options.stroke, "stroke");
                this._initPattern(options.fill, "fill");
                this._initPattern(options.stroke, "stroke");
              },
              transform: function(ctx) {
                var needFullTransform = this.group && !this.group._transformDone || this.group && this.canvas && ctx === this.canvas.contextTop;
                var m = this.calcTransformMatrix(!needFullTransform);
                ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);
              },
              toObject: function(propertiesToInclude) {
                var NUM_FRACTION_DIGITS = fabric2.Object.NUM_FRACTION_DIGITS, object = {
                  type: this.type,
                  version: fabric2.version,
                  originX: this.originX,
                  originY: this.originY,
                  left: toFixed(this.left, NUM_FRACTION_DIGITS),
                  top: toFixed(this.top, NUM_FRACTION_DIGITS),
                  width: toFixed(this.width, NUM_FRACTION_DIGITS),
                  height: toFixed(this.height, NUM_FRACTION_DIGITS),
                  fill: this.fill && this.fill.toObject ? this.fill.toObject() : this.fill,
                  stroke: this.stroke && this.stroke.toObject ? this.stroke.toObject() : this.stroke,
                  strokeWidth: toFixed(this.strokeWidth, NUM_FRACTION_DIGITS),
                  strokeDashArray: this.strokeDashArray ? this.strokeDashArray.concat() : this.strokeDashArray,
                  strokeLineCap: this.strokeLineCap,
                  strokeDashOffset: this.strokeDashOffset,
                  strokeLineJoin: this.strokeLineJoin,
                  strokeUniform: this.strokeUniform,
                  strokeMiterLimit: toFixed(this.strokeMiterLimit, NUM_FRACTION_DIGITS),
                  scaleX: toFixed(this.scaleX, NUM_FRACTION_DIGITS),
                  scaleY: toFixed(this.scaleY, NUM_FRACTION_DIGITS),
                  angle: toFixed(this.angle, NUM_FRACTION_DIGITS),
                  flipX: this.flipX,
                  flipY: this.flipY,
                  opacity: toFixed(this.opacity, NUM_FRACTION_DIGITS),
                  shadow: this.shadow && this.shadow.toObject ? this.shadow.toObject() : this.shadow,
                  visible: this.visible,
                  backgroundColor: this.backgroundColor,
                  fillRule: this.fillRule,
                  paintFirst: this.paintFirst,
                  globalCompositeOperation: this.globalCompositeOperation,
                  skewX: toFixed(this.skewX, NUM_FRACTION_DIGITS),
                  skewY: toFixed(this.skewY, NUM_FRACTION_DIGITS)
                };
                if (this.clipPath && !this.clipPath.excludeFromExport) {
                  object.clipPath = this.clipPath.toObject(propertiesToInclude);
                  object.clipPath.inverted = this.clipPath.inverted;
                  object.clipPath.absolutePositioned = this.clipPath.absolutePositioned;
                }
                fabric2.util.populateWithProperties(this, object, propertiesToInclude);
                if (!this.includeDefaultValues) {
                  object = this._removeDefaultValues(object);
                }
                return object;
              },
              toDatalessObject: function(propertiesToInclude) {
                return this.toObject(propertiesToInclude);
              },
              _removeDefaultValues: function(object) {
                var prototype = fabric2.util.getKlass(object.type).prototype, stateProperties = prototype.stateProperties;
                stateProperties.forEach(function(prop) {
                  if (prop === "left" || prop === "top") {
                    return;
                  }
                  if (object[prop] === prototype[prop]) {
                    delete object[prop];
                  }
                  var isArray = Object.prototype.toString.call(object[prop]) === "[object Array]" && Object.prototype.toString.call(prototype[prop]) === "[object Array]";
                  if (isArray && object[prop].length === 0 && prototype[prop].length === 0) {
                    delete object[prop];
                  }
                });
                return object;
              },
              toString: function() {
                return "#<fabric." + capitalize(this.type) + ">";
              },
              getObjectScaling: function() {
                if (!this.group) {
                  return {
                    scaleX: this.scaleX,
                    scaleY: this.scaleY
                  };
                }
                var options = fabric2.util.qrDecompose(this.calcTransformMatrix());
                return { scaleX: Math.abs(options.scaleX), scaleY: Math.abs(options.scaleY) };
              },
              getTotalObjectScaling: function() {
                var scale = this.getObjectScaling(), scaleX = scale.scaleX, scaleY = scale.scaleY;
                if (this.canvas) {
                  var zoom = this.canvas.getZoom();
                  var retina = this.canvas.getRetinaScaling();
                  scaleX *= zoom * retina;
                  scaleY *= zoom * retina;
                }
                return { scaleX, scaleY };
              },
              getObjectOpacity: function() {
                var opacity = this.opacity;
                if (this.group) {
                  opacity *= this.group.getObjectOpacity();
                }
                return opacity;
              },
              _set: function(key, value) {
                var shouldConstrainValue = key === "scaleX" || key === "scaleY", isChanged = this[key] !== value, groupNeedsUpdate = false;
                if (shouldConstrainValue) {
                  value = this._constrainScale(value);
                }
                if (key === "scaleX" && value < 0) {
                  this.flipX = !this.flipX;
                  value *= -1;
                } else if (key === "scaleY" && value < 0) {
                  this.flipY = !this.flipY;
                  value *= -1;
                } else if (key === "shadow" && value && !(value instanceof fabric2.Shadow)) {
                  value = new fabric2.Shadow(value);
                } else if (key === "dirty" && this.group) {
                  this.group.set("dirty", value);
                }
                this[key] = value;
                if (isChanged) {
                  groupNeedsUpdate = this.group && this.group.isOnACache();
                  if (this.cacheProperties.indexOf(key) > -1) {
                    this.dirty = true;
                    groupNeedsUpdate && this.group.set("dirty", true);
                  } else if (groupNeedsUpdate && this.stateProperties.indexOf(key) > -1) {
                    this.group.set("dirty", true);
                  }
                }
                return this;
              },
              setOnGroup: function() {
              },
              getViewportTransform: function() {
                if (this.canvas && this.canvas.viewportTransform) {
                  return this.canvas.viewportTransform;
                }
                return fabric2.iMatrix.concat();
              },
              isNotVisible: function() {
                return this.opacity === 0 || !this.width && !this.height && this.strokeWidth === 0 || !this.visible;
              },
              render: function(ctx) {
                if (this.isNotVisible()) {
                  return;
                }
                if (this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen()) {
                  return;
                }
                ctx.save();
                this._setupCompositeOperation(ctx);
                this.drawSelectionBackground(ctx);
                this.transform(ctx);
                this._setOpacity(ctx);
                this._setShadow(ctx, this);
                if (this.shouldCache()) {
                  this.renderCache();
                  this.drawCacheOnCanvas(ctx);
                } else {
                  this._removeCacheCanvas();
                  this.dirty = false;
                  this.drawObject(ctx);
                  if (this.objectCaching && this.statefullCache) {
                    this.saveState({ propertySet: "cacheProperties" });
                  }
                }
                ctx.restore();
              },
              renderCache: function(options) {
                options = options || {};
                if (!this._cacheCanvas) {
                  this._createCacheCanvas();
                }
                if (this.isCacheDirty()) {
                  this.statefullCache && this.saveState({ propertySet: "cacheProperties" });
                  this.drawObject(this._cacheContext, options.forClipping);
                  this.dirty = false;
                }
              },
              _removeCacheCanvas: function() {
                this._cacheCanvas = null;
                this.cacheWidth = 0;
                this.cacheHeight = 0;
              },
              hasStroke: function() {
                return this.stroke && this.stroke !== "transparent" && this.strokeWidth !== 0;
              },
              hasFill: function() {
                return this.fill && this.fill !== "transparent";
              },
              needsItsOwnCache: function() {
                if (this.paintFirst === "stroke" && this.hasFill() && this.hasStroke() && typeof this.shadow === "object") {
                  return true;
                }
                if (this.clipPath) {
                  return true;
                }
                return false;
              },
              shouldCache: function() {
                this.ownCaching = this.needsItsOwnCache() || this.objectCaching && (!this.group || !this.group.isOnACache());
                return this.ownCaching;
              },
              willDrawShadow: function() {
                return !!this.shadow && (this.shadow.offsetX !== 0 || this.shadow.offsetY !== 0);
              },
              drawClipPathOnCache: function(ctx) {
                var path = this.clipPath;
                ctx.save();
                if (path.inverted) {
                  ctx.globalCompositeOperation = "destination-out";
                } else {
                  ctx.globalCompositeOperation = "destination-in";
                }
                if (path.absolutePositioned) {
                  var m = fabric2.util.invertTransform(this.calcTransformMatrix());
                  ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);
                }
                path.transform(ctx);
                ctx.scale(1 / path.zoomX, 1 / path.zoomY);
                ctx.drawImage(path._cacheCanvas, -path.cacheTranslationX, -path.cacheTranslationY);
                ctx.restore();
              },
              drawObject: function(ctx, forClipping) {
                var originalFill = this.fill, originalStroke = this.stroke;
                if (forClipping) {
                  this.fill = "black";
                  this.stroke = "";
                  this._setClippingProperties(ctx);
                } else {
                  this._renderBackground(ctx);
                }
                this._render(ctx);
                this._drawClipPath(ctx);
                this.fill = originalFill;
                this.stroke = originalStroke;
              },
              _drawClipPath: function(ctx) {
                var path = this.clipPath;
                if (!path) {
                  return;
                }
                path.canvas = this.canvas;
                path.shouldCache();
                path._transformDone = true;
                path.renderCache({ forClipping: true });
                this.drawClipPathOnCache(ctx);
              },
              drawCacheOnCanvas: function(ctx) {
                ctx.scale(1 / this.zoomX, 1 / this.zoomY);
                ctx.drawImage(this._cacheCanvas, -this.cacheTranslationX, -this.cacheTranslationY);
              },
              isCacheDirty: function(skipCanvas) {
                if (this.isNotVisible()) {
                  return false;
                }
                if (this._cacheCanvas && !skipCanvas && this._updateCacheCanvas()) {
                  return true;
                } else {
                  if (this.dirty || this.clipPath && this.clipPath.absolutePositioned || this.statefullCache && this.hasStateChanged("cacheProperties")) {
                    if (this._cacheCanvas && !skipCanvas) {
                      var width = this.cacheWidth / this.zoomX;
                      var height = this.cacheHeight / this.zoomY;
                      this._cacheContext.clearRect(-width / 2, -height / 2, width, height);
                    }
                    return true;
                  }
                }
                return false;
              },
              _renderBackground: function(ctx) {
                if (!this.backgroundColor) {
                  return;
                }
                var dim = this._getNonTransformedDimensions();
                ctx.fillStyle = this.backgroundColor;
                ctx.fillRect(-dim.x / 2, -dim.y / 2, dim.x, dim.y);
                this._removeShadow(ctx);
              },
              _setOpacity: function(ctx) {
                if (this.group && !this.group._transformDone) {
                  ctx.globalAlpha = this.getObjectOpacity();
                } else {
                  ctx.globalAlpha *= this.opacity;
                }
              },
              _setStrokeStyles: function(ctx, decl) {
                var stroke = decl.stroke;
                if (stroke) {
                  ctx.lineWidth = decl.strokeWidth;
                  ctx.lineCap = decl.strokeLineCap;
                  ctx.lineDashOffset = decl.strokeDashOffset;
                  ctx.lineJoin = decl.strokeLineJoin;
                  ctx.miterLimit = decl.strokeMiterLimit;
                  if (stroke.toLive) {
                    if (stroke.gradientUnits === "percentage" || stroke.gradientTransform || stroke.patternTransform) {
                      this._applyPatternForTransformedGradient(ctx, stroke);
                    } else {
                      ctx.strokeStyle = stroke.toLive(ctx, this);
                      this._applyPatternGradientTransform(ctx, stroke);
                    }
                  } else {
                    ctx.strokeStyle = decl.stroke;
                  }
                }
              },
              _setFillStyles: function(ctx, decl) {
                var fill = decl.fill;
                if (fill) {
                  if (fill.toLive) {
                    ctx.fillStyle = fill.toLive(ctx, this);
                    this._applyPatternGradientTransform(ctx, decl.fill);
                  } else {
                    ctx.fillStyle = fill;
                  }
                }
              },
              _setClippingProperties: function(ctx) {
                ctx.globalAlpha = 1;
                ctx.strokeStyle = "transparent";
                ctx.fillStyle = "#000000";
              },
              _setLineDash: function(ctx, dashArray) {
                if (!dashArray || dashArray.length === 0) {
                  return;
                }
                if (1 & dashArray.length) {
                  dashArray.push.apply(dashArray, dashArray);
                }
                ctx.setLineDash(dashArray);
              },
              _renderControls: function(ctx, styleOverride) {
                var vpt = this.getViewportTransform(), matrix = this.calcTransformMatrix(), options, drawBorders, drawControls;
                styleOverride = styleOverride || {};
                drawBorders = typeof styleOverride.hasBorders !== "undefined" ? styleOverride.hasBorders : this.hasBorders;
                drawControls = typeof styleOverride.hasControls !== "undefined" ? styleOverride.hasControls : this.hasControls;
                matrix = fabric2.util.multiplyTransformMatrices(vpt, matrix);
                options = fabric2.util.qrDecompose(matrix);
                ctx.save();
                ctx.translate(options.translateX, options.translateY);
                ctx.lineWidth = 1 * this.borderScaleFactor;
                if (!this.group) {
                  ctx.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1;
                }
                ctx.rotate(degreesToRadians(options.angle));
                if (styleOverride.forActiveSelection || this.group) {
                  drawBorders && this.drawBordersInGroup(ctx, options, styleOverride);
                } else {
                  drawBorders && this.drawBorders(ctx, styleOverride);
                }
                drawControls && this.drawControls(ctx, styleOverride);
                ctx.restore();
              },
              _setShadow: function(ctx) {
                if (!this.shadow) {
                  return;
                }
                var shadow = this.shadow, canvas = this.canvas, scaling, multX = canvas && canvas.viewportTransform[0] || 1, multY = canvas && canvas.viewportTransform[3] || 1;
                if (shadow.nonScaling) {
                  scaling = { scaleX: 1, scaleY: 1 };
                } else {
                  scaling = this.getObjectScaling();
                }
                if (canvas && canvas._isRetinaScaling()) {
                  multX *= fabric2.devicePixelRatio;
                  multY *= fabric2.devicePixelRatio;
                }
                ctx.shadowColor = shadow.color;
                ctx.shadowBlur = shadow.blur * fabric2.browserShadowBlurConstant * (multX + multY) * (scaling.scaleX + scaling.scaleY) / 4;
                ctx.shadowOffsetX = shadow.offsetX * multX * scaling.scaleX;
                ctx.shadowOffsetY = shadow.offsetY * multY * scaling.scaleY;
              },
              _removeShadow: function(ctx) {
                if (!this.shadow) {
                  return;
                }
                ctx.shadowColor = "";
                ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;
              },
              _applyPatternGradientTransform: function(ctx, filler) {
                if (!filler || !filler.toLive) {
                  return { offsetX: 0, offsetY: 0 };
                }
                var t = filler.gradientTransform || filler.patternTransform;
                var offsetX = -this.width / 2 + filler.offsetX || 0, offsetY = -this.height / 2 + filler.offsetY || 0;
                if (filler.gradientUnits === "percentage") {
                  ctx.transform(this.width, 0, 0, this.height, offsetX, offsetY);
                } else {
                  ctx.transform(1, 0, 0, 1, offsetX, offsetY);
                }
                if (t) {
                  ctx.transform(t[0], t[1], t[2], t[3], t[4], t[5]);
                }
                return { offsetX, offsetY };
              },
              _renderPaintInOrder: function(ctx) {
                if (this.paintFirst === "stroke") {
                  this._renderStroke(ctx);
                  this._renderFill(ctx);
                } else {
                  this._renderFill(ctx);
                  this._renderStroke(ctx);
                }
              },
              _render: function() {
              },
              _renderFill: function(ctx) {
                if (!this.fill) {
                  return;
                }
                ctx.save();
                this._setFillStyles(ctx, this);
                if (this.fillRule === "evenodd") {
                  ctx.fill("evenodd");
                } else {
                  ctx.fill();
                }
                ctx.restore();
              },
              _renderStroke: function(ctx) {
                if (!this.stroke || this.strokeWidth === 0) {
                  return;
                }
                if (this.shadow && !this.shadow.affectStroke) {
                  this._removeShadow(ctx);
                }
                ctx.save();
                if (this.strokeUniform && this.group) {
                  var scaling = this.getObjectScaling();
                  ctx.scale(1 / scaling.scaleX, 1 / scaling.scaleY);
                } else if (this.strokeUniform) {
                  ctx.scale(1 / this.scaleX, 1 / this.scaleY);
                }
                this._setLineDash(ctx, this.strokeDashArray);
                this._setStrokeStyles(ctx, this);
                ctx.stroke();
                ctx.restore();
              },
              _applyPatternForTransformedGradient: function(ctx, filler) {
                var dims = this._limitCacheSize(this._getCacheCanvasDimensions()), pCanvas = fabric2.util.createCanvasElement(), pCtx, retinaScaling = this.canvas.getRetinaScaling(), width = dims.x / this.scaleX / retinaScaling, height = dims.y / this.scaleY / retinaScaling;
                pCanvas.width = width;
                pCanvas.height = height;
                pCtx = pCanvas.getContext("2d");
                pCtx.beginPath();
                pCtx.moveTo(0, 0);
                pCtx.lineTo(width, 0);
                pCtx.lineTo(width, height);
                pCtx.lineTo(0, height);
                pCtx.closePath();
                pCtx.translate(width / 2, height / 2);
                pCtx.scale(dims.zoomX / this.scaleX / retinaScaling, dims.zoomY / this.scaleY / retinaScaling);
                this._applyPatternGradientTransform(pCtx, filler);
                pCtx.fillStyle = filler.toLive(ctx);
                pCtx.fill();
                ctx.translate(-this.width / 2 - this.strokeWidth / 2, -this.height / 2 - this.strokeWidth / 2);
                ctx.scale(retinaScaling * this.scaleX / dims.zoomX, retinaScaling * this.scaleY / dims.zoomY);
                ctx.strokeStyle = pCtx.createPattern(pCanvas, "no-repeat");
              },
              _findCenterFromElement: function() {
                return { x: this.left + this.width / 2, y: this.top + this.height / 2 };
              },
              _assignTransformMatrixProps: function() {
                if (this.transformMatrix) {
                  var options = fabric2.util.qrDecompose(this.transformMatrix);
                  this.flipX = false;
                  this.flipY = false;
                  this.set("scaleX", options.scaleX);
                  this.set("scaleY", options.scaleY);
                  this.angle = options.angle;
                  this.skewX = options.skewX;
                  this.skewY = 0;
                }
              },
              _removeTransformMatrix: function(preserveAspectRatioOptions) {
                var center = this._findCenterFromElement();
                if (this.transformMatrix) {
                  this._assignTransformMatrixProps();
                  center = fabric2.util.transformPoint(center, this.transformMatrix);
                }
                this.transformMatrix = null;
                if (preserveAspectRatioOptions) {
                  this.scaleX *= preserveAspectRatioOptions.scaleX;
                  this.scaleY *= preserveAspectRatioOptions.scaleY;
                  this.cropX = preserveAspectRatioOptions.cropX;
                  this.cropY = preserveAspectRatioOptions.cropY;
                  center.x += preserveAspectRatioOptions.offsetLeft;
                  center.y += preserveAspectRatioOptions.offsetTop;
                  this.width = preserveAspectRatioOptions.width;
                  this.height = preserveAspectRatioOptions.height;
                }
                this.setPositionByOrigin(center, "center", "center");
              },
              clone: function(callback, propertiesToInclude) {
                var objectForm = this.toObject(propertiesToInclude);
                if (this.constructor.fromObject) {
                  this.constructor.fromObject(objectForm, callback);
                } else {
                  fabric2.Object._fromObject("Object", objectForm, callback);
                }
              },
              cloneAsImage: function(callback, options) {
                var canvasEl = this.toCanvasElement(options);
                if (callback) {
                  callback(new fabric2.Image(canvasEl));
                }
                return this;
              },
              toCanvasElement: function(options) {
                options || (options = {});
                var utils = fabric2.util, origParams = utils.saveObjectTransform(this), originalGroup = this.group, originalShadow = this.shadow, abs = Math.abs, multiplier = (options.multiplier || 1) * (options.enableRetinaScaling ? fabric2.devicePixelRatio : 1);
                delete this.group;
                if (options.withoutTransform) {
                  utils.resetObjectTransform(this);
                }
                if (options.withoutShadow) {
                  this.shadow = null;
                }
                var el = fabric2.util.createCanvasElement(), boundingRect = this.getBoundingRect(true, true), shadow = this.shadow, scaling, shadowOffset = { x: 0, y: 0 }, shadowBlur, width, height;
                if (shadow) {
                  shadowBlur = shadow.blur;
                  if (shadow.nonScaling) {
                    scaling = { scaleX: 1, scaleY: 1 };
                  } else {
                    scaling = this.getObjectScaling();
                  }
                  shadowOffset.x = 2 * Math.round(abs(shadow.offsetX) + shadowBlur) * abs(scaling.scaleX);
                  shadowOffset.y = 2 * Math.round(abs(shadow.offsetY) + shadowBlur) * abs(scaling.scaleY);
                }
                width = boundingRect.width + shadowOffset.x;
                height = boundingRect.height + shadowOffset.y;
                el.width = Math.ceil(width);
                el.height = Math.ceil(height);
                var canvas = new fabric2.StaticCanvas(el, {
                  enableRetinaScaling: false,
                  renderOnAddRemove: false,
                  skipOffscreen: false
                });
                if (options.format === "jpeg") {
                  canvas.backgroundColor = "#fff";
                }
                this.setPositionByOrigin(new fabric2.Point(canvas.width / 2, canvas.height / 2), "center", "center");
                var originalCanvas = this.canvas;
                canvas.add(this);
                var canvasEl = canvas.toCanvasElement(multiplier || 1, options);
                this.shadow = originalShadow;
                this.set("canvas", originalCanvas);
                if (originalGroup) {
                  this.group = originalGroup;
                }
                this.set(origParams).setCoords();
                canvas._objects = [];
                canvas.dispose();
                canvas = null;
                return canvasEl;
              },
              toDataURL: function(options) {
                options || (options = {});
                return fabric2.util.toDataURL(this.toCanvasElement(options), options.format || "png", options.quality || 1);
              },
              isType: function(type) {
                return this.type === type;
              },
              complexity: function() {
                return 1;
              },
              toJSON: function(propertiesToInclude) {
                return this.toObject(propertiesToInclude);
              },
              rotate: function(angle) {
                var shouldCenterOrigin = (this.originX !== "center" || this.originY !== "center") && this.centeredRotation;
                if (shouldCenterOrigin) {
                  this._setOriginToCenter();
                }
                this.set("angle", angle);
                if (shouldCenterOrigin) {
                  this._resetOrigin();
                }
                return this;
              },
              centerH: function() {
                this.canvas && this.canvas.centerObjectH(this);
                return this;
              },
              viewportCenterH: function() {
                this.canvas && this.canvas.viewportCenterObjectH(this);
                return this;
              },
              centerV: function() {
                this.canvas && this.canvas.centerObjectV(this);
                return this;
              },
              viewportCenterV: function() {
                this.canvas && this.canvas.viewportCenterObjectV(this);
                return this;
              },
              center: function() {
                this.canvas && this.canvas.centerObject(this);
                return this;
              },
              viewportCenter: function() {
                this.canvas && this.canvas.viewportCenterObject(this);
                return this;
              },
              getLocalPointer: function(e, pointer) {
                pointer = pointer || this.canvas.getPointer(e);
                var pClicked = new fabric2.Point(pointer.x, pointer.y), objectLeftTop = this._getLeftTopCoords();
                if (this.angle) {
                  pClicked = fabric2.util.rotatePoint(pClicked, objectLeftTop, degreesToRadians(-this.angle));
                }
                return {
                  x: pClicked.x - objectLeftTop.x,
                  y: pClicked.y - objectLeftTop.y
                };
              },
              _setupCompositeOperation: function(ctx) {
                if (this.globalCompositeOperation) {
                  ctx.globalCompositeOperation = this.globalCompositeOperation;
                }
              }
            });
            fabric2.util.createAccessors && fabric2.util.createAccessors(fabric2.Object);
            extend(fabric2.Object.prototype, fabric2.Observable);
            fabric2.Object.NUM_FRACTION_DIGITS = 2;
            fabric2.Object._fromObject = function(className, object, callback, extraParam) {
              var klass = fabric2[className];
              object = clone(object, true);
              fabric2.util.enlivenPatterns([object.fill, object.stroke], function(patterns) {
                if (typeof patterns[0] !== "undefined") {
                  object.fill = patterns[0];
                }
                if (typeof patterns[1] !== "undefined") {
                  object.stroke = patterns[1];
                }
                fabric2.util.enlivenObjects([object.clipPath], function(enlivedProps) {
                  object.clipPath = enlivedProps[0];
                  var instance = extraParam ? new klass(object[extraParam], object) : new klass(object);
                  callback && callback(instance);
                });
              });
            };
            fabric2.Object.__uid = 0;
          })(exports2);
          (function() {
            var degreesToRadians = fabric.util.degreesToRadians, originXOffset = {
              left: -0.5,
              center: 0,
              right: 0.5
            }, originYOffset = {
              top: -0.5,
              center: 0,
              bottom: 0.5
            };
            fabric.util.object.extend(fabric.Object.prototype, {
              translateToGivenOrigin: function(point, fromOriginX, fromOriginY, toOriginX, toOriginY) {
                var x = point.x, y = point.y, offsetX, offsetY, dim;
                if (typeof fromOriginX === "string") {
                  fromOriginX = originXOffset[fromOriginX];
                } else {
                  fromOriginX -= 0.5;
                }
                if (typeof toOriginX === "string") {
                  toOriginX = originXOffset[toOriginX];
                } else {
                  toOriginX -= 0.5;
                }
                offsetX = toOriginX - fromOriginX;
                if (typeof fromOriginY === "string") {
                  fromOriginY = originYOffset[fromOriginY];
                } else {
                  fromOriginY -= 0.5;
                }
                if (typeof toOriginY === "string") {
                  toOriginY = originYOffset[toOriginY];
                } else {
                  toOriginY -= 0.5;
                }
                offsetY = toOriginY - fromOriginY;
                if (offsetX || offsetY) {
                  dim = this._getTransformedDimensions();
                  x = point.x + offsetX * dim.x;
                  y = point.y + offsetY * dim.y;
                }
                return new fabric.Point(x, y);
              },
              translateToCenterPoint: function(point, originX, originY) {
                var p = this.translateToGivenOrigin(point, originX, originY, "center", "center");
                if (this.angle) {
                  return fabric.util.rotatePoint(p, point, degreesToRadians(this.angle));
                }
                return p;
              },
              translateToOriginPoint: function(center, originX, originY) {
                var p = this.translateToGivenOrigin(center, "center", "center", originX, originY);
                if (this.angle) {
                  return fabric.util.rotatePoint(p, center, degreesToRadians(this.angle));
                }
                return p;
              },
              getCenterPoint: function() {
                var leftTop = new fabric.Point(this.left, this.top);
                return this.translateToCenterPoint(leftTop, this.originX, this.originY);
              },
              getPointByOrigin: function(originX, originY) {
                var center = this.getCenterPoint();
                return this.translateToOriginPoint(center, originX, originY);
              },
              toLocalPoint: function(point, originX, originY) {
                var center = this.getCenterPoint(), p, p2;
                if (typeof originX !== "undefined" && typeof originY !== "undefined") {
                  p = this.translateToGivenOrigin(center, "center", "center", originX, originY);
                } else {
                  p = new fabric.Point(this.left, this.top);
                }
                p2 = new fabric.Point(point.x, point.y);
                if (this.angle) {
                  p2 = fabric.util.rotatePoint(p2, center, -degreesToRadians(this.angle));
                }
                return p2.subtractEquals(p);
              },
              setPositionByOrigin: function(pos, originX, originY) {
                var center = this.translateToCenterPoint(pos, originX, originY), position = this.translateToOriginPoint(center, this.originX, this.originY);
                this.set("left", position.x);
                this.set("top", position.y);
              },
              adjustPosition: function(to) {
                var angle = degreesToRadians(this.angle), hypotFull = this.getScaledWidth(), xFull = fabric.util.cos(angle) * hypotFull, yFull = fabric.util.sin(angle) * hypotFull, offsetFrom, offsetTo;
                if (typeof this.originX === "string") {
                  offsetFrom = originXOffset[this.originX];
                } else {
                  offsetFrom = this.originX - 0.5;
                }
                if (typeof to === "string") {
                  offsetTo = originXOffset[to];
                } else {
                  offsetTo = to - 0.5;
                }
                this.left += xFull * (offsetTo - offsetFrom);
                this.top += yFull * (offsetTo - offsetFrom);
                this.setCoords();
                this.originX = to;
              },
              _setOriginToCenter: function() {
                this._originalOriginX = this.originX;
                this._originalOriginY = this.originY;
                var center = this.getCenterPoint();
                this.originX = "center";
                this.originY = "center";
                this.left = center.x;
                this.top = center.y;
              },
              _resetOrigin: function() {
                var originPoint = this.translateToOriginPoint(this.getCenterPoint(), this._originalOriginX, this._originalOriginY);
                this.originX = this._originalOriginX;
                this.originY = this._originalOriginY;
                this.left = originPoint.x;
                this.top = originPoint.y;
                this._originalOriginX = null;
                this._originalOriginY = null;
              },
              _getLeftTopCoords: function() {
                return this.translateToOriginPoint(this.getCenterPoint(), "left", "top");
              }
            });
          })();
          (function() {
            function arrayFromCoords(coords) {
              return [
                new fabric.Point(coords.tl.x, coords.tl.y),
                new fabric.Point(coords.tr.x, coords.tr.y),
                new fabric.Point(coords.br.x, coords.br.y),
                new fabric.Point(coords.bl.x, coords.bl.y)
              ];
            }
            var util = fabric.util, degreesToRadians = util.degreesToRadians, multiplyMatrices = util.multiplyTransformMatrices, transformPoint = util.transformPoint;
            util.object.extend(fabric.Object.prototype, {
              oCoords: null,
              aCoords: null,
              lineCoords: null,
              ownMatrixCache: null,
              matrixCache: null,
              controls: {},
              _getCoords: function(absolute, calculate) {
                if (calculate) {
                  return absolute ? this.calcACoords() : this.calcLineCoords();
                }
                if (!this.aCoords || !this.lineCoords) {
                  this.setCoords(true);
                }
                return absolute ? this.aCoords : this.lineCoords;
              },
              getCoords: function(absolute, calculate) {
                return arrayFromCoords(this._getCoords(absolute, calculate));
              },
              intersectsWithRect: function(pointTL, pointBR, absolute, calculate) {
                var coords = this.getCoords(absolute, calculate), intersection = fabric.Intersection.intersectPolygonRectangle(coords, pointTL, pointBR);
                return intersection.status === "Intersection";
              },
              intersectsWithObject: function(other, absolute, calculate) {
                var intersection = fabric.Intersection.intersectPolygonPolygon(this.getCoords(absolute, calculate), other.getCoords(absolute, calculate));
                return intersection.status === "Intersection" || other.isContainedWithinObject(this, absolute, calculate) || this.isContainedWithinObject(other, absolute, calculate);
              },
              isContainedWithinObject: function(other, absolute, calculate) {
                var points = this.getCoords(absolute, calculate), otherCoords = absolute ? other.aCoords : other.lineCoords, i = 0, lines = other._getImageLines(otherCoords);
                for (; i < 4; i++) {
                  if (!other.containsPoint(points[i], lines)) {
                    return false;
                  }
                }
                return true;
              },
              isContainedWithinRect: function(pointTL, pointBR, absolute, calculate) {
                var boundingRect = this.getBoundingRect(absolute, calculate);
                return boundingRect.left >= pointTL.x && boundingRect.left + boundingRect.width <= pointBR.x && boundingRect.top >= pointTL.y && boundingRect.top + boundingRect.height <= pointBR.y;
              },
              containsPoint: function(point, lines, absolute, calculate) {
                var coords = this._getCoords(absolute, calculate), lines = lines || this._getImageLines(coords), xPoints = this._findCrossPoints(point, lines);
                return xPoints !== 0 && xPoints % 2 === 1;
              },
              isOnScreen: function(calculate) {
                if (!this.canvas) {
                  return false;
                }
                var pointTL = this.canvas.vptCoords.tl, pointBR = this.canvas.vptCoords.br;
                var points = this.getCoords(true, calculate);
                if (points.some(function(point) {
                  return point.x <= pointBR.x && point.x >= pointTL.x && point.y <= pointBR.y && point.y >= pointTL.y;
                })) {
                  return true;
                }
                if (this.intersectsWithRect(pointTL, pointBR, true, calculate)) {
                  return true;
                }
                return this._containsCenterOfCanvas(pointTL, pointBR, calculate);
              },
              _containsCenterOfCanvas: function(pointTL, pointBR, calculate) {
                var centerPoint = { x: (pointTL.x + pointBR.x) / 2, y: (pointTL.y + pointBR.y) / 2 };
                if (this.containsPoint(centerPoint, null, true, calculate)) {
                  return true;
                }
                return false;
              },
              isPartiallyOnScreen: function(calculate) {
                if (!this.canvas) {
                  return false;
                }
                var pointTL = this.canvas.vptCoords.tl, pointBR = this.canvas.vptCoords.br;
                if (this.intersectsWithRect(pointTL, pointBR, true, calculate)) {
                  return true;
                }
                var allPointsAreOutside = this.getCoords(true, calculate).every(function(point) {
                  return (point.x >= pointBR.x || point.x <= pointTL.x) && (point.y >= pointBR.y || point.y <= pointTL.y);
                });
                return allPointsAreOutside && this._containsCenterOfCanvas(pointTL, pointBR, calculate);
              },
              _getImageLines: function(oCoords) {
                var lines = {
                  topline: {
                    o: oCoords.tl,
                    d: oCoords.tr
                  },
                  rightline: {
                    o: oCoords.tr,
                    d: oCoords.br
                  },
                  bottomline: {
                    o: oCoords.br,
                    d: oCoords.bl
                  },
                  leftline: {
                    o: oCoords.bl,
                    d: oCoords.tl
                  }
                };
                return lines;
              },
              _findCrossPoints: function(point, lines) {
                var b1, b2, a1, a2, xi, xcount = 0, iLine;
                for (var lineKey in lines) {
                  iLine = lines[lineKey];
                  if (iLine.o.y < point.y && iLine.d.y < point.y) {
                    continue;
                  }
                  if (iLine.o.y >= point.y && iLine.d.y >= point.y) {
                    continue;
                  }
                  if (iLine.o.x === iLine.d.x && iLine.o.x >= point.x) {
                    xi = iLine.o.x;
                  } else {
                    b1 = 0;
                    b2 = (iLine.d.y - iLine.o.y) / (iLine.d.x - iLine.o.x);
                    a1 = point.y - b1 * point.x;
                    a2 = iLine.o.y - b2 * iLine.o.x;
                    xi = -(a1 - a2) / (b1 - b2);
                  }
                  if (xi >= point.x) {
                    xcount += 1;
                  }
                  if (xcount === 2) {
                    break;
                  }
                }
                return xcount;
              },
              getBoundingRect: function(absolute, calculate) {
                var coords = this.getCoords(absolute, calculate);
                return util.makeBoundingBoxFromPoints(coords);
              },
              getScaledWidth: function() {
                return this._getTransformedDimensions().x;
              },
              getScaledHeight: function() {
                return this._getTransformedDimensions().y;
              },
              _constrainScale: function(value) {
                if (Math.abs(value) < this.minScaleLimit) {
                  if (value < 0) {
                    return -this.minScaleLimit;
                  } else {
                    return this.minScaleLimit;
                  }
                } else if (value === 0) {
                  return 1e-4;
                }
                return value;
              },
              scale: function(value) {
                this._set("scaleX", value);
                this._set("scaleY", value);
                return this.setCoords();
              },
              scaleToWidth: function(value, absolute) {
                var boundingRectFactor = this.getBoundingRect(absolute).width / this.getScaledWidth();
                return this.scale(value / this.width / boundingRectFactor);
              },
              scaleToHeight: function(value, absolute) {
                var boundingRectFactor = this.getBoundingRect(absolute).height / this.getScaledHeight();
                return this.scale(value / this.height / boundingRectFactor);
              },
              calcCoords: function(absolute) {
                if (absolute) {
                  return this.calcACoords();
                }
                return this.calcOCoords();
              },
              calcLineCoords: function() {
                var vpt = this.getViewportTransform(), padding = this.padding, angle = degreesToRadians(this.angle), cos = util.cos(angle), sin = util.sin(angle), cosP = cos * padding, sinP = sin * padding, cosPSinP = cosP + sinP, cosPMinusSinP = cosP - sinP, aCoords = this.calcACoords();
                var lineCoords = {
                  tl: transformPoint(aCoords.tl, vpt),
                  tr: transformPoint(aCoords.tr, vpt),
                  bl: transformPoint(aCoords.bl, vpt),
                  br: transformPoint(aCoords.br, vpt)
                };
                if (padding) {
                  lineCoords.tl.x -= cosPMinusSinP;
                  lineCoords.tl.y -= cosPSinP;
                  lineCoords.tr.x += cosPSinP;
                  lineCoords.tr.y -= cosPMinusSinP;
                  lineCoords.bl.x -= cosPSinP;
                  lineCoords.bl.y += cosPMinusSinP;
                  lineCoords.br.x += cosPMinusSinP;
                  lineCoords.br.y += cosPSinP;
                }
                return lineCoords;
              },
              calcOCoords: function() {
                var rotateMatrix = this._calcRotateMatrix(), translateMatrix = this._calcTranslateMatrix(), vpt = this.getViewportTransform(), startMatrix = multiplyMatrices(vpt, translateMatrix), finalMatrix = multiplyMatrices(startMatrix, rotateMatrix), finalMatrix = multiplyMatrices(finalMatrix, [1 / vpt[0], 0, 0, 1 / vpt[3], 0, 0]), dim = this._calculateCurrentDimensions(), coords = {};
                this.forEachControl(function(control, key, fabricObject) {
                  coords[key] = control.positionHandler(dim, finalMatrix, fabricObject);
                });
                return coords;
              },
              calcACoords: function() {
                var rotateMatrix = this._calcRotateMatrix(), translateMatrix = this._calcTranslateMatrix(), finalMatrix = multiplyMatrices(translateMatrix, rotateMatrix), dim = this._getTransformedDimensions(), w = dim.x / 2, h = dim.y / 2;
                return {
                  tl: transformPoint({ x: -w, y: -h }, finalMatrix),
                  tr: transformPoint({ x: w, y: -h }, finalMatrix),
                  bl: transformPoint({ x: -w, y: h }, finalMatrix),
                  br: transformPoint({ x: w, y: h }, finalMatrix)
                };
              },
              setCoords: function(skipCorners) {
                this.aCoords = this.calcACoords();
                this.lineCoords = this.group ? this.aCoords : this.calcLineCoords();
                if (skipCorners) {
                  return this;
                }
                this.oCoords = this.calcOCoords();
                this._setCornerCoords && this._setCornerCoords();
                return this;
              },
              _calcRotateMatrix: function() {
                return util.calcRotateMatrix(this);
              },
              _calcTranslateMatrix: function() {
                var center = this.getCenterPoint();
                return [1, 0, 0, 1, center.x, center.y];
              },
              transformMatrixKey: function(skipGroup) {
                var sep = "_", prefix = "";
                if (!skipGroup && this.group) {
                  prefix = this.group.transformMatrixKey(skipGroup) + sep;
                }
                return prefix + this.top + sep + this.left + sep + this.scaleX + sep + this.scaleY + sep + this.skewX + sep + this.skewY + sep + this.angle + sep + this.originX + sep + this.originY + sep + this.width + sep + this.height + sep + this.strokeWidth + this.flipX + this.flipY;
              },
              calcTransformMatrix: function(skipGroup) {
                var matrix = this.calcOwnMatrix();
                if (skipGroup || !this.group) {
                  return matrix;
                }
                var key = this.transformMatrixKey(skipGroup), cache = this.matrixCache || (this.matrixCache = {});
                if (cache.key === key) {
                  return cache.value;
                }
                if (this.group) {
                  matrix = multiplyMatrices(this.group.calcTransformMatrix(false), matrix);
                }
                cache.key = key;
                cache.value = matrix;
                return matrix;
              },
              calcOwnMatrix: function() {
                var key = this.transformMatrixKey(true), cache = this.ownMatrixCache || (this.ownMatrixCache = {});
                if (cache.key === key) {
                  return cache.value;
                }
                var tMatrix = this._calcTranslateMatrix(), options = {
                  angle: this.angle,
                  translateX: tMatrix[4],
                  translateY: tMatrix[5],
                  scaleX: this.scaleX,
                  scaleY: this.scaleY,
                  skewX: this.skewX,
                  skewY: this.skewY,
                  flipX: this.flipX,
                  flipY: this.flipY
                };
                cache.key = key;
                cache.value = util.composeMatrix(options);
                return cache.value;
              },
              _calcDimensionsTransformMatrix: function(skewX, skewY, flipping) {
                return util.calcDimensionsMatrix({
                  skewX,
                  skewY,
                  scaleX: this.scaleX * (flipping && this.flipX ? -1 : 1),
                  scaleY: this.scaleY * (flipping && this.flipY ? -1 : 1)
                });
              },
              _getNonTransformedDimensions: function() {
                var strokeWidth = this.strokeWidth, w = this.width + strokeWidth, h = this.height + strokeWidth;
                return { x: w, y: h };
              },
              _getTransformedDimensions: function(skewX, skewY) {
                if (typeof skewX === "undefined") {
                  skewX = this.skewX;
                }
                if (typeof skewY === "undefined") {
                  skewY = this.skewY;
                }
                var dimensions, dimX, dimY, noSkew = skewX === 0 && skewY === 0;
                if (this.strokeUniform) {
                  dimX = this.width;
                  dimY = this.height;
                } else {
                  dimensions = this._getNonTransformedDimensions();
                  dimX = dimensions.x;
                  dimY = dimensions.y;
                }
                if (noSkew) {
                  return this._finalizeDimensions(dimX * this.scaleX, dimY * this.scaleY);
                }
                var bbox = util.sizeAfterTransform(dimX, dimY, {
                  scaleX: this.scaleX,
                  scaleY: this.scaleY,
                  skewX,
                  skewY
                });
                return this._finalizeDimensions(bbox.x, bbox.y);
              },
              _finalizeDimensions: function(width, height) {
                return this.strokeUniform ? { x: width + this.strokeWidth, y: height + this.strokeWidth } : { x: width, y: height };
              },
              _calculateCurrentDimensions: function() {
                var vpt = this.getViewportTransform(), dim = this._getTransformedDimensions(), p = transformPoint(dim, vpt, true);
                return p.scalarAdd(2 * this.padding);
              }
            });
          })();
          fabric.util.object.extend(fabric.Object.prototype, {
            sendToBack: function() {
              if (this.group) {
                fabric.StaticCanvas.prototype.sendToBack.call(this.group, this);
              } else if (this.canvas) {
                this.canvas.sendToBack(this);
              }
              return this;
            },
            bringToFront: function() {
              if (this.group) {
                fabric.StaticCanvas.prototype.bringToFront.call(this.group, this);
              } else if (this.canvas) {
                this.canvas.bringToFront(this);
              }
              return this;
            },
            sendBackwards: function(intersecting) {
              if (this.group) {
                fabric.StaticCanvas.prototype.sendBackwards.call(this.group, this, intersecting);
              } else if (this.canvas) {
                this.canvas.sendBackwards(this, intersecting);
              }
              return this;
            },
            bringForward: function(intersecting) {
              if (this.group) {
                fabric.StaticCanvas.prototype.bringForward.call(this.group, this, intersecting);
              } else if (this.canvas) {
                this.canvas.bringForward(this, intersecting);
              }
              return this;
            },
            moveTo: function(index) {
              if (this.group && this.group.type !== "activeSelection") {
                fabric.StaticCanvas.prototype.moveTo.call(this.group, this, index);
              } else if (this.canvas) {
                this.canvas.moveTo(this, index);
              }
              return this;
            }
          });
          (function() {
            function getSvgColorString(prop, value) {
              if (!value) {
                return prop + ": none; ";
              } else if (value.toLive) {
                return prop + ": url(#SVGID_" + value.id + "); ";
              } else {
                var color = new fabric.Color(value), str = prop + ": " + color.toRgb() + "; ", opacity = color.getAlpha();
                if (opacity !== 1) {
                  str += prop + "-opacity: " + opacity.toString() + "; ";
                }
                return str;
              }
            }
            var toFixed = fabric.util.toFixed;
            fabric.util.object.extend(fabric.Object.prototype, {
              getSvgStyles: function(skipShadow) {
                var fillRule = this.fillRule ? this.fillRule : "nonzero", strokeWidth = this.strokeWidth ? this.strokeWidth : "0", strokeDashArray = this.strokeDashArray ? this.strokeDashArray.join(" ") : "none", strokeDashOffset = this.strokeDashOffset ? this.strokeDashOffset : "0", strokeLineCap = this.strokeLineCap ? this.strokeLineCap : "butt", strokeLineJoin = this.strokeLineJoin ? this.strokeLineJoin : "miter", strokeMiterLimit = this.strokeMiterLimit ? this.strokeMiterLimit : "4", opacity = typeof this.opacity !== "undefined" ? this.opacity : "1", visibility = this.visible ? "" : " visibility: hidden;", filter = skipShadow ? "" : this.getSvgFilter(), fill = getSvgColorString("fill", this.fill), stroke = getSvgColorString("stroke", this.stroke);
                return [
                  stroke,
                  "stroke-width: ",
                  strokeWidth,
                  "; ",
                  "stroke-dasharray: ",
                  strokeDashArray,
                  "; ",
                  "stroke-linecap: ",
                  strokeLineCap,
                  "; ",
                  "stroke-dashoffset: ",
                  strokeDashOffset,
                  "; ",
                  "stroke-linejoin: ",
                  strokeLineJoin,
                  "; ",
                  "stroke-miterlimit: ",
                  strokeMiterLimit,
                  "; ",
                  fill,
                  "fill-rule: ",
                  fillRule,
                  "; ",
                  "opacity: ",
                  opacity,
                  ";",
                  filter,
                  visibility
                ].join("");
              },
              getSvgSpanStyles: function(style, useWhiteSpace) {
                var term = "; ";
                var fontFamily = style.fontFamily ? "font-family: " + (style.fontFamily.indexOf("'") === -1 && style.fontFamily.indexOf('"') === -1 ? "'" + style.fontFamily + "'" : style.fontFamily) + term : "";
                var strokeWidth = style.strokeWidth ? "stroke-width: " + style.strokeWidth + term : "", fontFamily = fontFamily, fontSize = style.fontSize ? "font-size: " + style.fontSize + "px" + term : "", fontStyle = style.fontStyle ? "font-style: " + style.fontStyle + term : "", fontWeight = style.fontWeight ? "font-weight: " + style.fontWeight + term : "", fill = style.fill ? getSvgColorString("fill", style.fill) : "", stroke = style.stroke ? getSvgColorString("stroke", style.stroke) : "", textDecoration = this.getSvgTextDecoration(style), deltaY = style.deltaY ? "baseline-shift: " + -style.deltaY + "; " : "";
                if (textDecoration) {
                  textDecoration = "text-decoration: " + textDecoration + term;
                }
                return [
                  stroke,
                  strokeWidth,
                  fontFamily,
                  fontSize,
                  fontStyle,
                  fontWeight,
                  textDecoration,
                  fill,
                  deltaY,
                  useWhiteSpace ? "white-space: pre; " : ""
                ].join("");
              },
              getSvgTextDecoration: function(style) {
                return ["overline", "underline", "line-through"].filter(function(decoration) {
                  return style[decoration.replace("-", "")];
                }).join(" ");
              },
              getSvgFilter: function() {
                return this.shadow ? "filter: url(#SVGID_" + this.shadow.id + ");" : "";
              },
              getSvgCommons: function() {
                return [
                  this.id ? 'id="' + this.id + '" ' : "",
                  this.clipPath ? 'clip-path="url(#' + this.clipPath.clipPathId + ')" ' : ""
                ].join("");
              },
              getSvgTransform: function(full, additionalTransform) {
                var transform = full ? this.calcTransformMatrix() : this.calcOwnMatrix(), svgTransform = 'transform="' + fabric.util.matrixToSVG(transform);
                return svgTransform + (additionalTransform || "") + '" ';
              },
              _setSVGBg: function(textBgRects) {
                if (this.backgroundColor) {
                  var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;
                  textBgRects.push("		<rect ", this._getFillAttributes(this.backgroundColor), ' x="', toFixed(-this.width / 2, NUM_FRACTION_DIGITS), '" y="', toFixed(-this.height / 2, NUM_FRACTION_DIGITS), '" width="', toFixed(this.width, NUM_FRACTION_DIGITS), '" height="', toFixed(this.height, NUM_FRACTION_DIGITS), '"></rect>\n');
                }
              },
              toSVG: function(reviver) {
                return this._createBaseSVGMarkup(this._toSVG(reviver), { reviver });
              },
              toClipPathSVG: function(reviver) {
                return "	" + this._createBaseClipPathSVGMarkup(this._toSVG(reviver), { reviver });
              },
              _createBaseClipPathSVGMarkup: function(objectMarkup, options) {
                options = options || {};
                var reviver = options.reviver, additionalTransform = options.additionalTransform || "", commonPieces = [
                  this.getSvgTransform(true, additionalTransform),
                  this.getSvgCommons()
                ].join(""), index = objectMarkup.indexOf("COMMON_PARTS");
                objectMarkup[index] = commonPieces;
                return reviver ? reviver(objectMarkup.join("")) : objectMarkup.join("");
              },
              _createBaseSVGMarkup: function(objectMarkup, options) {
                options = options || {};
                var noStyle = options.noStyle, reviver = options.reviver, styleInfo = noStyle ? "" : 'style="' + this.getSvgStyles() + '" ', shadowInfo = options.withShadow ? 'style="' + this.getSvgFilter() + '" ' : "", clipPath = this.clipPath, vectorEffect = this.strokeUniform ? 'vector-effect="non-scaling-stroke" ' : "", absoluteClipPath = clipPath && clipPath.absolutePositioned, stroke = this.stroke, fill = this.fill, shadow = this.shadow, commonPieces, markup = [], clipPathMarkup, index = objectMarkup.indexOf("COMMON_PARTS"), additionalTransform = options.additionalTransform;
                if (clipPath) {
                  clipPath.clipPathId = "CLIPPATH_" + fabric.Object.__uid++;
                  clipPathMarkup = '<clipPath id="' + clipPath.clipPathId + '" >\n' + clipPath.toClipPathSVG(reviver) + "</clipPath>\n";
                }
                if (absoluteClipPath) {
                  markup.push("<g ", shadowInfo, this.getSvgCommons(), " >\n");
                }
                markup.push("<g ", this.getSvgTransform(false), !absoluteClipPath ? shadowInfo + this.getSvgCommons() : "", " >\n");
                commonPieces = [
                  styleInfo,
                  vectorEffect,
                  noStyle ? "" : this.addPaintOrder(),
                  " ",
                  additionalTransform ? 'transform="' + additionalTransform + '" ' : ""
                ].join("");
                objectMarkup[index] = commonPieces;
                if (fill && fill.toLive) {
                  markup.push(fill.toSVG(this));
                }
                if (stroke && stroke.toLive) {
                  markup.push(stroke.toSVG(this));
                }
                if (shadow) {
                  markup.push(shadow.toSVG(this));
                }
                if (clipPath) {
                  markup.push(clipPathMarkup);
                }
                markup.push(objectMarkup.join(""));
                markup.push("</g>\n");
                absoluteClipPath && markup.push("</g>\n");
                return reviver ? reviver(markup.join("")) : markup.join("");
              },
              addPaintOrder: function() {
                return this.paintFirst !== "fill" ? ' paint-order="' + this.paintFirst + '" ' : "";
              }
            });
          })();
          (function() {
            var extend = fabric.util.object.extend, originalSet = "stateProperties";
            function saveProps(origin, destination, props) {
              var tmpObj = {}, deep = true;
              props.forEach(function(prop) {
                tmpObj[prop] = origin[prop];
              });
              extend(origin[destination], tmpObj, deep);
            }
            function _isEqual(origValue, currentValue, firstPass) {
              if (origValue === currentValue) {
                return true;
              } else if (Array.isArray(origValue)) {
                if (!Array.isArray(currentValue) || origValue.length !== currentValue.length) {
                  return false;
                }
                for (var i = 0, len = origValue.length; i < len; i++) {
                  if (!_isEqual(origValue[i], currentValue[i])) {
                    return false;
                  }
                }
                return true;
              } else if (origValue && typeof origValue === "object") {
                var keys = Object.keys(origValue), key;
                if (!currentValue || typeof currentValue !== "object" || !firstPass && keys.length !== Object.keys(currentValue).length) {
                  return false;
                }
                for (var i = 0, len = keys.length; i < len; i++) {
                  key = keys[i];
                  if (key === "canvas" || key === "group") {
                    continue;
                  }
                  if (!_isEqual(origValue[key], currentValue[key])) {
                    return false;
                  }
                }
                return true;
              }
            }
            fabric.util.object.extend(fabric.Object.prototype, {
              hasStateChanged: function(propertySet) {
                propertySet = propertySet || originalSet;
                var dashedPropertySet = "_" + propertySet;
                if (Object.keys(this[dashedPropertySet]).length < this[propertySet].length) {
                  return true;
                }
                return !_isEqual(this[dashedPropertySet], this, true);
              },
              saveState: function(options) {
                var propertySet = options && options.propertySet || originalSet, destination = "_" + propertySet;
                if (!this[destination]) {
                  return this.setupState(options);
                }
                saveProps(this, destination, this[propertySet]);
                if (options && options.stateProperties) {
                  saveProps(this, destination, options.stateProperties);
                }
                return this;
              },
              setupState: function(options) {
                options = options || {};
                var propertySet = options.propertySet || originalSet;
                options.propertySet = propertySet;
                this["_" + propertySet] = {};
                this.saveState(options);
                return this;
              }
            });
          })();
          (function() {
            var degreesToRadians = fabric.util.degreesToRadians;
            fabric.util.object.extend(fabric.Object.prototype, {
              _findTargetCorner: function(pointer, forTouch) {
                if (!this.hasControls || this.group || (!this.canvas || this.canvas._activeObject !== this)) {
                  return false;
                }
                var ex = pointer.x, ey = pointer.y, xPoints, lines, keys = Object.keys(this.oCoords), j = keys.length - 1, i;
                this.__corner = 0;
                for (; j >= 0; j--) {
                  i = keys[j];
                  if (!this.isControlVisible(i)) {
                    continue;
                  }
                  lines = this._getImageLines(forTouch ? this.oCoords[i].touchCorner : this.oCoords[i].corner);
                  xPoints = this._findCrossPoints({ x: ex, y: ey }, lines);
                  if (xPoints !== 0 && xPoints % 2 === 1) {
                    this.__corner = i;
                    return i;
                  }
                }
                return false;
              },
              forEachControl: function(fn) {
                for (var i in this.controls) {
                  fn(this.controls[i], i, this);
                }
              },
              _setCornerCoords: function() {
                var coords = this.oCoords;
                for (var control in coords) {
                  var controlObject = this.controls[control];
                  coords[control].corner = controlObject.calcCornerCoords(this.angle, this.cornerSize, coords[control].x, coords[control].y, false);
                  coords[control].touchCorner = controlObject.calcCornerCoords(this.angle, this.touchCornerSize, coords[control].x, coords[control].y, true);
                }
              },
              drawSelectionBackground: function(ctx) {
                if (!this.selectionBackgroundColor || this.canvas && !this.canvas.interactive || this.canvas && this.canvas._activeObject !== this) {
                  return this;
                }
                ctx.save();
                var center = this.getCenterPoint(), wh = this._calculateCurrentDimensions(), vpt = this.canvas.viewportTransform;
                ctx.translate(center.x, center.y);
                ctx.scale(1 / vpt[0], 1 / vpt[3]);
                ctx.rotate(degreesToRadians(this.angle));
                ctx.fillStyle = this.selectionBackgroundColor;
                ctx.fillRect(-wh.x / 2, -wh.y / 2, wh.x, wh.y);
                ctx.restore();
                return this;
              },
              drawBorders: function(ctx, styleOverride) {
                styleOverride = styleOverride || {};
                var wh = this._calculateCurrentDimensions(), strokeWidth = this.borderScaleFactor, width = wh.x + strokeWidth, height = wh.y + strokeWidth, hasControls = typeof styleOverride.hasControls !== "undefined" ? styleOverride.hasControls : this.hasControls, shouldStroke = false;
                ctx.save();
                ctx.strokeStyle = styleOverride.borderColor || this.borderColor;
                this._setLineDash(ctx, styleOverride.borderDashArray || this.borderDashArray);
                ctx.strokeRect(-width / 2, -height / 2, width, height);
                if (hasControls) {
                  ctx.beginPath();
                  this.forEachControl(function(control, key, fabricObject) {
                    if (control.withConnection && control.getVisibility(fabricObject, key)) {
                      shouldStroke = true;
                      ctx.moveTo(control.x * width, control.y * height);
                      ctx.lineTo(control.x * width + control.offsetX, control.y * height + control.offsetY);
                    }
                  });
                  if (shouldStroke) {
                    ctx.stroke();
                  }
                }
                ctx.restore();
                return this;
              },
              drawBordersInGroup: function(ctx, options, styleOverride) {
                styleOverride = styleOverride || {};
                var bbox = fabric.util.sizeAfterTransform(this.width, this.height, options), strokeWidth = this.strokeWidth, strokeUniform = this.strokeUniform, borderScaleFactor = this.borderScaleFactor, width = bbox.x + strokeWidth * (strokeUniform ? this.canvas.getZoom() : options.scaleX) + borderScaleFactor, height = bbox.y + strokeWidth * (strokeUniform ? this.canvas.getZoom() : options.scaleY) + borderScaleFactor;
                ctx.save();
                this._setLineDash(ctx, styleOverride.borderDashArray || this.borderDashArray);
                ctx.strokeStyle = styleOverride.borderColor || this.borderColor;
                ctx.strokeRect(-width / 2, -height / 2, width, height);
                ctx.restore();
                return this;
              },
              drawControls: function(ctx, styleOverride) {
                styleOverride = styleOverride || {};
                ctx.save();
                var retinaScaling = this.canvas.getRetinaScaling(), matrix, p;
                ctx.setTransform(retinaScaling, 0, 0, retinaScaling, 0, 0);
                ctx.strokeStyle = ctx.fillStyle = styleOverride.cornerColor || this.cornerColor;
                if (!this.transparentCorners) {
                  ctx.strokeStyle = styleOverride.cornerStrokeColor || this.cornerStrokeColor;
                }
                this._setLineDash(ctx, styleOverride.cornerDashArray || this.cornerDashArray);
                this.setCoords();
                if (this.group) {
                  matrix = this.group.calcTransformMatrix();
                }
                this.forEachControl(function(control, key, fabricObject) {
                  p = fabricObject.oCoords[key];
                  if (control.getVisibility(fabricObject, key)) {
                    if (matrix) {
                      p = fabric.util.transformPoint(p, matrix);
                    }
                    control.render(ctx, p.x, p.y, styleOverride, fabricObject);
                  }
                });
                ctx.restore();
                return this;
              },
              isControlVisible: function(controlKey) {
                return this.controls[controlKey] && this.controls[controlKey].getVisibility(this, controlKey);
              },
              setControlVisible: function(controlKey, visible) {
                if (!this._controlsVisibility) {
                  this._controlsVisibility = {};
                }
                this._controlsVisibility[controlKey] = visible;
                return this;
              },
              setControlsVisibility: function(options) {
                options || (options = {});
                for (var p in options) {
                  this.setControlVisible(p, options[p]);
                }
                return this;
              },
              onDeselect: function() {
              },
              onSelect: function() {
              }
            });
          })();
          fabric.util.object.extend(fabric.StaticCanvas.prototype, {
            FX_DURATION: 500,
            fxCenterObjectH: function(object, callbacks) {
              callbacks = callbacks || {};
              var empty = function() {
              }, onComplete = callbacks.onComplete || empty, onChange = callbacks.onChange || empty, _this = this;
              fabric.util.animate({
                startValue: object.left,
                endValue: this.getCenter().left,
                duration: this.FX_DURATION,
                onChange: function(value) {
                  object.set("left", value);
                  _this.requestRenderAll();
                  onChange();
                },
                onComplete: function() {
                  object.setCoords();
                  onComplete();
                }
              });
              return this;
            },
            fxCenterObjectV: function(object, callbacks) {
              callbacks = callbacks || {};
              var empty = function() {
              }, onComplete = callbacks.onComplete || empty, onChange = callbacks.onChange || empty, _this = this;
              fabric.util.animate({
                startValue: object.top,
                endValue: this.getCenter().top,
                duration: this.FX_DURATION,
                onChange: function(value) {
                  object.set("top", value);
                  _this.requestRenderAll();
                  onChange();
                },
                onComplete: function() {
                  object.setCoords();
                  onComplete();
                }
              });
              return this;
            },
            fxRemove: function(object, callbacks) {
              callbacks = callbacks || {};
              var empty = function() {
              }, onComplete = callbacks.onComplete || empty, onChange = callbacks.onChange || empty, _this = this;
              fabric.util.animate({
                startValue: object.opacity,
                endValue: 0,
                duration: this.FX_DURATION,
                onChange: function(value) {
                  object.set("opacity", value);
                  _this.requestRenderAll();
                  onChange();
                },
                onComplete: function() {
                  _this.remove(object);
                  onComplete();
                }
              });
              return this;
            }
          });
          fabric.util.object.extend(fabric.Object.prototype, {
            animate: function() {
              if (arguments[0] && typeof arguments[0] === "object") {
                var propsToAnimate = [], prop, skipCallbacks;
                for (prop in arguments[0]) {
                  propsToAnimate.push(prop);
                }
                for (var i = 0, len = propsToAnimate.length; i < len; i++) {
                  prop = propsToAnimate[i];
                  skipCallbacks = i !== len - 1;
                  this._animate(prop, arguments[0][prop], arguments[1], skipCallbacks);
                }
              } else {
                this._animate.apply(this, arguments);
              }
              return this;
            },
            _animate: function(property, to, options, skipCallbacks) {
              var _this = this, propPair;
              to = to.toString();
              if (!options) {
                options = {};
              } else {
                options = fabric.util.object.clone(options);
              }
              if (~property.indexOf(".")) {
                propPair = property.split(".");
              }
              var propIsColor = _this.colorProperties.indexOf(property) > -1 || propPair && _this.colorProperties.indexOf(propPair[1]) > -1;
              var currentValue = propPair ? this.get(propPair[0])[propPair[1]] : this.get(property);
              if (!("from" in options)) {
                options.from = currentValue;
              }
              if (!propIsColor) {
                if (~to.indexOf("=")) {
                  to = currentValue + parseFloat(to.replace("=", ""));
                } else {
                  to = parseFloat(to);
                }
              }
              var _options = {
                startValue: options.from,
                endValue: to,
                byValue: options.by,
                easing: options.easing,
                duration: options.duration,
                abort: options.abort && function(value, valueProgress, timeProgress) {
                  return options.abort.call(_this, value, valueProgress, timeProgress);
                },
                onChange: function(value, valueProgress, timeProgress) {
                  if (propPair) {
                    _this[propPair[0]][propPair[1]] = value;
                  } else {
                    _this.set(property, value);
                  }
                  if (skipCallbacks) {
                    return;
                  }
                  options.onChange && options.onChange(value, valueProgress, timeProgress);
                },
                onComplete: function(value, valueProgress, timeProgress) {
                  if (skipCallbacks) {
                    return;
                  }
                  _this.setCoords();
                  options.onComplete && options.onComplete(value, valueProgress, timeProgress);
                }
              };
              if (propIsColor) {
                return fabric.util.animateColor(_options.startValue, _options.endValue, _options.duration, _options);
              } else {
                return fabric.util.animate(_options);
              }
            }
          });
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), extend = fabric2.util.object.extend, clone = fabric2.util.object.clone, coordProps = { x1: 1, x2: 1, y1: 1, y2: 1 };
            if (fabric2.Line) {
              fabric2.warn("fabric.Line is already defined");
              return;
            }
            fabric2.Line = fabric2.util.createClass(fabric2.Object, {
              type: "line",
              x1: 0,
              y1: 0,
              x2: 0,
              y2: 0,
              cacheProperties: fabric2.Object.prototype.cacheProperties.concat("x1", "x2", "y1", "y2"),
              initialize: function(points, options) {
                if (!points) {
                  points = [0, 0, 0, 0];
                }
                this.callSuper("initialize", options);
                this.set("x1", points[0]);
                this.set("y1", points[1]);
                this.set("x2", points[2]);
                this.set("y2", points[3]);
                this._setWidthHeight(options);
              },
              _setWidthHeight: function(options) {
                options || (options = {});
                this.width = Math.abs(this.x2 - this.x1);
                this.height = Math.abs(this.y2 - this.y1);
                this.left = "left" in options ? options.left : this._getLeftToOriginX();
                this.top = "top" in options ? options.top : this._getTopToOriginY();
              },
              _set: function(key, value) {
                this.callSuper("_set", key, value);
                if (typeof coordProps[key] !== "undefined") {
                  this._setWidthHeight();
                }
                return this;
              },
              _getLeftToOriginX: makeEdgeToOriginGetter({
                origin: "originX",
                axis1: "x1",
                axis2: "x2",
                dimension: "width"
              }, {
                nearest: "left",
                center: "center",
                farthest: "right"
              }),
              _getTopToOriginY: makeEdgeToOriginGetter({
                origin: "originY",
                axis1: "y1",
                axis2: "y2",
                dimension: "height"
              }, {
                nearest: "top",
                center: "center",
                farthest: "bottom"
              }),
              _render: function(ctx) {
                ctx.beginPath();
                var p = this.calcLinePoints();
                ctx.moveTo(p.x1, p.y1);
                ctx.lineTo(p.x2, p.y2);
                ctx.lineWidth = this.strokeWidth;
                var origStrokeStyle = ctx.strokeStyle;
                ctx.strokeStyle = this.stroke || ctx.fillStyle;
                this.stroke && this._renderStroke(ctx);
                ctx.strokeStyle = origStrokeStyle;
              },
              _findCenterFromElement: function() {
                return {
                  x: (this.x1 + this.x2) / 2,
                  y: (this.y1 + this.y2) / 2
                };
              },
              toObject: function(propertiesToInclude) {
                return extend(this.callSuper("toObject", propertiesToInclude), this.calcLinePoints());
              },
              _getNonTransformedDimensions: function() {
                var dim = this.callSuper("_getNonTransformedDimensions");
                if (this.strokeLineCap === "butt") {
                  if (this.width === 0) {
                    dim.y -= this.strokeWidth;
                  }
                  if (this.height === 0) {
                    dim.x -= this.strokeWidth;
                  }
                }
                return dim;
              },
              calcLinePoints: function() {
                var xMult = this.x1 <= this.x2 ? -1 : 1, yMult = this.y1 <= this.y2 ? -1 : 1, x1 = xMult * this.width * 0.5, y1 = yMult * this.height * 0.5, x2 = xMult * this.width * -0.5, y2 = yMult * this.height * -0.5;
                return {
                  x1,
                  x2,
                  y1,
                  y2
                };
              },
              _toSVG: function() {
                var p = this.calcLinePoints();
                return [
                  "<line ",
                  "COMMON_PARTS",
                  'x1="',
                  p.x1,
                  '" y1="',
                  p.y1,
                  '" x2="',
                  p.x2,
                  '" y2="',
                  p.y2,
                  '" />\n'
                ];
              }
            });
            fabric2.Line.ATTRIBUTE_NAMES = fabric2.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" "));
            fabric2.Line.fromElement = function(element, callback, options) {
              options = options || {};
              var parsedAttributes = fabric2.parseAttributes(element, fabric2.Line.ATTRIBUTE_NAMES), points = [
                parsedAttributes.x1 || 0,
                parsedAttributes.y1 || 0,
                parsedAttributes.x2 || 0,
                parsedAttributes.y2 || 0
              ];
              callback(new fabric2.Line(points, extend(parsedAttributes, options)));
            };
            fabric2.Line.fromObject = function(object, callback) {
              function _callback(instance) {
                delete instance.points;
                callback && callback(instance);
              }
              var options = clone(object, true);
              options.points = [object.x1, object.y1, object.x2, object.y2];
              fabric2.Object._fromObject("Line", options, _callback, "points");
            };
            function makeEdgeToOriginGetter(propertyNames, originValues) {
              var origin = propertyNames.origin, axis1 = propertyNames.axis1, axis2 = propertyNames.axis2, dimension = propertyNames.dimension, nearest = originValues.nearest, center = originValues.center, farthest = originValues.farthest;
              return function() {
                switch (this.get(origin)) {
                  case nearest:
                    return Math.min(this.get(axis1), this.get(axis2));
                  case center:
                    return Math.min(this.get(axis1), this.get(axis2)) + 0.5 * this.get(dimension);
                  case farthest:
                    return Math.max(this.get(axis1), this.get(axis2));
                }
              };
            }
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), pi = Math.PI;
            if (fabric2.Circle) {
              fabric2.warn("fabric.Circle is already defined.");
              return;
            }
            fabric2.Circle = fabric2.util.createClass(fabric2.Object, {
              type: "circle",
              radius: 0,
              startAngle: 0,
              endAngle: pi * 2,
              cacheProperties: fabric2.Object.prototype.cacheProperties.concat("radius", "startAngle", "endAngle"),
              _set: function(key, value) {
                this.callSuper("_set", key, value);
                if (key === "radius") {
                  this.setRadius(value);
                }
                return this;
              },
              toObject: function(propertiesToInclude) {
                return this.callSuper("toObject", ["radius", "startAngle", "endAngle"].concat(propertiesToInclude));
              },
              _toSVG: function() {
                var svgString, x = 0, y = 0, angle = (this.endAngle - this.startAngle) % (2 * pi);
                if (angle === 0) {
                  svgString = [
                    "<circle ",
                    "COMMON_PARTS",
                    'cx="' + x + '" cy="' + y + '" ',
                    'r="',
                    this.radius,
                    '" />\n'
                  ];
                } else {
                  var startX = fabric2.util.cos(this.startAngle) * this.radius, startY = fabric2.util.sin(this.startAngle) * this.radius, endX = fabric2.util.cos(this.endAngle) * this.radius, endY = fabric2.util.sin(this.endAngle) * this.radius, largeFlag = angle > pi ? "1" : "0";
                  svgString = [
                    '<path d="M ' + startX + " " + startY,
                    " A " + this.radius + " " + this.radius,
                    " 0 ",
                    +largeFlag + " 1",
                    " " + endX + " " + endY,
                    '" ',
                    "COMMON_PARTS",
                    " />\n"
                  ];
                }
                return svgString;
              },
              _render: function(ctx) {
                ctx.beginPath();
                ctx.arc(0, 0, this.radius, this.startAngle, this.endAngle, false);
                this._renderPaintInOrder(ctx);
              },
              getRadiusX: function() {
                return this.get("radius") * this.get("scaleX");
              },
              getRadiusY: function() {
                return this.get("radius") * this.get("scaleY");
              },
              setRadius: function(value) {
                this.radius = value;
                return this.set("width", value * 2).set("height", value * 2);
              }
            });
            fabric2.Circle.ATTRIBUTE_NAMES = fabric2.SHARED_ATTRIBUTES.concat("cx cy r".split(" "));
            fabric2.Circle.fromElement = function(element, callback) {
              var parsedAttributes = fabric2.parseAttributes(element, fabric2.Circle.ATTRIBUTE_NAMES);
              if (!isValidRadius(parsedAttributes)) {
                throw new Error("value of `r` attribute is required and can not be negative");
              }
              parsedAttributes.left = (parsedAttributes.left || 0) - parsedAttributes.radius;
              parsedAttributes.top = (parsedAttributes.top || 0) - parsedAttributes.radius;
              callback(new fabric2.Circle(parsedAttributes));
            };
            function isValidRadius(attributes) {
              return "radius" in attributes && attributes.radius >= 0;
            }
            fabric2.Circle.fromObject = function(object, callback) {
              fabric2.Object._fromObject("Circle", object, callback);
            };
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {});
            if (fabric2.Triangle) {
              fabric2.warn("fabric.Triangle is already defined");
              return;
            }
            fabric2.Triangle = fabric2.util.createClass(fabric2.Object, {
              type: "triangle",
              width: 100,
              height: 100,
              _render: function(ctx) {
                var widthBy2 = this.width / 2, heightBy2 = this.height / 2;
                ctx.beginPath();
                ctx.moveTo(-widthBy2, heightBy2);
                ctx.lineTo(0, -heightBy2);
                ctx.lineTo(widthBy2, heightBy2);
                ctx.closePath();
                this._renderPaintInOrder(ctx);
              },
              _toSVG: function() {
                var widthBy2 = this.width / 2, heightBy2 = this.height / 2, points = [
                  -widthBy2 + " " + heightBy2,
                  "0 " + -heightBy2,
                  widthBy2 + " " + heightBy2
                ].join(",");
                return [
                  "<polygon ",
                  "COMMON_PARTS",
                  'points="',
                  points,
                  '" />'
                ];
              }
            });
            fabric2.Triangle.fromObject = function(object, callback) {
              return fabric2.Object._fromObject("Triangle", object, callback);
            };
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), piBy2 = Math.PI * 2;
            if (fabric2.Ellipse) {
              fabric2.warn("fabric.Ellipse is already defined.");
              return;
            }
            fabric2.Ellipse = fabric2.util.createClass(fabric2.Object, {
              type: "ellipse",
              rx: 0,
              ry: 0,
              cacheProperties: fabric2.Object.prototype.cacheProperties.concat("rx", "ry"),
              initialize: function(options) {
                this.callSuper("initialize", options);
                this.set("rx", options && options.rx || 0);
                this.set("ry", options && options.ry || 0);
              },
              _set: function(key, value) {
                this.callSuper("_set", key, value);
                switch (key) {
                  case "rx":
                    this.rx = value;
                    this.set("width", value * 2);
                    break;
                  case "ry":
                    this.ry = value;
                    this.set("height", value * 2);
                    break;
                }
                return this;
              },
              getRx: function() {
                return this.get("rx") * this.get("scaleX");
              },
              getRy: function() {
                return this.get("ry") * this.get("scaleY");
              },
              toObject: function(propertiesToInclude) {
                return this.callSuper("toObject", ["rx", "ry"].concat(propertiesToInclude));
              },
              _toSVG: function() {
                return [
                  "<ellipse ",
                  "COMMON_PARTS",
                  'cx="0" cy="0" ',
                  'rx="',
                  this.rx,
                  '" ry="',
                  this.ry,
                  '" />\n'
                ];
              },
              _render: function(ctx) {
                ctx.beginPath();
                ctx.save();
                ctx.transform(1, 0, 0, this.ry / this.rx, 0, 0);
                ctx.arc(0, 0, this.rx, 0, piBy2, false);
                ctx.restore();
                this._renderPaintInOrder(ctx);
              }
            });
            fabric2.Ellipse.ATTRIBUTE_NAMES = fabric2.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" "));
            fabric2.Ellipse.fromElement = function(element, callback) {
              var parsedAttributes = fabric2.parseAttributes(element, fabric2.Ellipse.ATTRIBUTE_NAMES);
              parsedAttributes.left = (parsedAttributes.left || 0) - parsedAttributes.rx;
              parsedAttributes.top = (parsedAttributes.top || 0) - parsedAttributes.ry;
              callback(new fabric2.Ellipse(parsedAttributes));
            };
            fabric2.Ellipse.fromObject = function(object, callback) {
              fabric2.Object._fromObject("Ellipse", object, callback);
            };
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), extend = fabric2.util.object.extend;
            if (fabric2.Rect) {
              fabric2.warn("fabric.Rect is already defined");
              return;
            }
            fabric2.Rect = fabric2.util.createClass(fabric2.Object, {
              stateProperties: fabric2.Object.prototype.stateProperties.concat("rx", "ry"),
              type: "rect",
              rx: 0,
              ry: 0,
              cacheProperties: fabric2.Object.prototype.cacheProperties.concat("rx", "ry"),
              initialize: function(options) {
                this.callSuper("initialize", options);
                this._initRxRy();
              },
              _initRxRy: function() {
                if (this.rx && !this.ry) {
                  this.ry = this.rx;
                } else if (this.ry && !this.rx) {
                  this.rx = this.ry;
                }
              },
              _render: function(ctx) {
                var rx = this.rx ? Math.min(this.rx, this.width / 2) : 0, ry = this.ry ? Math.min(this.ry, this.height / 2) : 0, w = this.width, h = this.height, x = -this.width / 2, y = -this.height / 2, isRounded = rx !== 0 || ry !== 0, k = 1 - 0.5522847498;
                ctx.beginPath();
                ctx.moveTo(x + rx, y);
                ctx.lineTo(x + w - rx, y);
                isRounded && ctx.bezierCurveTo(x + w - k * rx, y, x + w, y + k * ry, x + w, y + ry);
                ctx.lineTo(x + w, y + h - ry);
                isRounded && ctx.bezierCurveTo(x + w, y + h - k * ry, x + w - k * rx, y + h, x + w - rx, y + h);
                ctx.lineTo(x + rx, y + h);
                isRounded && ctx.bezierCurveTo(x + k * rx, y + h, x, y + h - k * ry, x, y + h - ry);
                ctx.lineTo(x, y + ry);
                isRounded && ctx.bezierCurveTo(x, y + k * ry, x + k * rx, y, x + rx, y);
                ctx.closePath();
                this._renderPaintInOrder(ctx);
              },
              toObject: function(propertiesToInclude) {
                return this.callSuper("toObject", ["rx", "ry"].concat(propertiesToInclude));
              },
              _toSVG: function() {
                var x = -this.width / 2, y = -this.height / 2;
                return [
                  "<rect ",
                  "COMMON_PARTS",
                  'x="',
                  x,
                  '" y="',
                  y,
                  '" rx="',
                  this.rx,
                  '" ry="',
                  this.ry,
                  '" width="',
                  this.width,
                  '" height="',
                  this.height,
                  '" />\n'
                ];
              }
            });
            fabric2.Rect.ATTRIBUTE_NAMES = fabric2.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" "));
            fabric2.Rect.fromElement = function(element, callback, options) {
              if (!element) {
                return callback(null);
              }
              options = options || {};
              var parsedAttributes = fabric2.parseAttributes(element, fabric2.Rect.ATTRIBUTE_NAMES);
              parsedAttributes.left = parsedAttributes.left || 0;
              parsedAttributes.top = parsedAttributes.top || 0;
              parsedAttributes.height = parsedAttributes.height || 0;
              parsedAttributes.width = parsedAttributes.width || 0;
              var rect = new fabric2.Rect(extend(options ? fabric2.util.object.clone(options) : {}, parsedAttributes));
              rect.visible = rect.visible && rect.width > 0 && rect.height > 0;
              callback(rect);
            };
            fabric2.Rect.fromObject = function(object, callback) {
              return fabric2.Object._fromObject("Rect", object, callback);
            };
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), extend = fabric2.util.object.extend, min = fabric2.util.array.min, max = fabric2.util.array.max, toFixed = fabric2.util.toFixed;
            if (fabric2.Polyline) {
              fabric2.warn("fabric.Polyline is already defined");
              return;
            }
            fabric2.Polyline = fabric2.util.createClass(fabric2.Object, {
              type: "polyline",
              points: null,
              cacheProperties: fabric2.Object.prototype.cacheProperties.concat("points"),
              initialize: function(points, options) {
                options = options || {};
                this.points = points || [];
                this.callSuper("initialize", options);
                this._setPositionDimensions(options);
              },
              _setPositionDimensions: function(options) {
                var calcDim = this._calcDimensions(options), correctLeftTop;
                this.width = calcDim.width;
                this.height = calcDim.height;
                if (!options.fromSVG) {
                  correctLeftTop = this.translateToGivenOrigin({ x: calcDim.left - this.strokeWidth / 2, y: calcDim.top - this.strokeWidth / 2 }, "left", "top", this.originX, this.originY);
                }
                if (typeof options.left === "undefined") {
                  this.left = options.fromSVG ? calcDim.left : correctLeftTop.x;
                }
                if (typeof options.top === "undefined") {
                  this.top = options.fromSVG ? calcDim.top : correctLeftTop.y;
                }
                this.pathOffset = {
                  x: calcDim.left + this.width / 2,
                  y: calcDim.top + this.height / 2
                };
              },
              _calcDimensions: function() {
                var points = this.points, minX = min(points, "x") || 0, minY = min(points, "y") || 0, maxX = max(points, "x") || 0, maxY = max(points, "y") || 0, width = maxX - minX, height = maxY - minY;
                return {
                  left: minX,
                  top: minY,
                  width,
                  height
                };
              },
              toObject: function(propertiesToInclude) {
                return extend(this.callSuper("toObject", propertiesToInclude), {
                  points: this.points.concat()
                });
              },
              _toSVG: function() {
                var points = [], diffX = this.pathOffset.x, diffY = this.pathOffset.y, NUM_FRACTION_DIGITS = fabric2.Object.NUM_FRACTION_DIGITS;
                for (var i = 0, len = this.points.length; i < len; i++) {
                  points.push(toFixed(this.points[i].x - diffX, NUM_FRACTION_DIGITS), ",", toFixed(this.points[i].y - diffY, NUM_FRACTION_DIGITS), " ");
                }
                return [
                  "<" + this.type + " ",
                  "COMMON_PARTS",
                  'points="',
                  points.join(""),
                  '" />\n'
                ];
              },
              commonRender: function(ctx) {
                var point, len = this.points.length, x = this.pathOffset.x, y = this.pathOffset.y;
                if (!len || isNaN(this.points[len - 1].y)) {
                  return false;
                }
                ctx.beginPath();
                ctx.moveTo(this.points[0].x - x, this.points[0].y - y);
                for (var i = 0; i < len; i++) {
                  point = this.points[i];
                  ctx.lineTo(point.x - x, point.y - y);
                }
                return true;
              },
              _render: function(ctx) {
                if (!this.commonRender(ctx)) {
                  return;
                }
                this._renderPaintInOrder(ctx);
              },
              complexity: function() {
                return this.get("points").length;
              }
            });
            fabric2.Polyline.ATTRIBUTE_NAMES = fabric2.SHARED_ATTRIBUTES.concat();
            fabric2.Polyline.fromElementGenerator = function(_class) {
              return function(element, callback, options) {
                if (!element) {
                  return callback(null);
                }
                options || (options = {});
                var points = fabric2.parsePointsAttribute(element.getAttribute("points")), parsedAttributes = fabric2.parseAttributes(element, fabric2[_class].ATTRIBUTE_NAMES);
                parsedAttributes.fromSVG = true;
                callback(new fabric2[_class](points, extend(parsedAttributes, options)));
              };
            };
            fabric2.Polyline.fromElement = fabric2.Polyline.fromElementGenerator("Polyline");
            fabric2.Polyline.fromObject = function(object, callback) {
              return fabric2.Object._fromObject("Polyline", object, callback, "points");
            };
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {});
            if (fabric2.Polygon) {
              fabric2.warn("fabric.Polygon is already defined");
              return;
            }
            fabric2.Polygon = fabric2.util.createClass(fabric2.Polyline, {
              type: "polygon",
              _render: function(ctx) {
                if (!this.commonRender(ctx)) {
                  return;
                }
                ctx.closePath();
                this._renderPaintInOrder(ctx);
              }
            });
            fabric2.Polygon.ATTRIBUTE_NAMES = fabric2.SHARED_ATTRIBUTES.concat();
            fabric2.Polygon.fromElement = fabric2.Polyline.fromElementGenerator("Polygon");
            fabric2.Polygon.fromObject = function(object, callback) {
              fabric2.Object._fromObject("Polygon", object, callback, "points");
            };
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), min = fabric2.util.array.min, max = fabric2.util.array.max, extend = fabric2.util.object.extend, _toString = Object.prototype.toString, toFixed = fabric2.util.toFixed;
            if (fabric2.Path) {
              fabric2.warn("fabric.Path is already defined");
              return;
            }
            fabric2.Path = fabric2.util.createClass(fabric2.Object, {
              type: "path",
              path: null,
              cacheProperties: fabric2.Object.prototype.cacheProperties.concat("path", "fillRule"),
              stateProperties: fabric2.Object.prototype.stateProperties.concat("path"),
              initialize: function(path, options) {
                options = options || {};
                this.callSuper("initialize", options);
                if (!path) {
                  path = [];
                }
                var fromArray = _toString.call(path) === "[object Array]";
                this.path = fabric2.util.makePathSimpler(fromArray ? path : fabric2.util.parsePath(path));
                if (!this.path) {
                  return;
                }
                fabric2.Polyline.prototype._setPositionDimensions.call(this, options);
              },
              _renderPathCommands: function(ctx) {
                var current, subpathStartX = 0, subpathStartY = 0, x = 0, y = 0, controlX = 0, controlY = 0, l = -this.pathOffset.x, t = -this.pathOffset.y;
                ctx.beginPath();
                for (var i = 0, len = this.path.length; i < len; ++i) {
                  current = this.path[i];
                  switch (current[0]) {
                    case "L":
                      x = current[1];
                      y = current[2];
                      ctx.lineTo(x + l, y + t);
                      break;
                    case "M":
                      x = current[1];
                      y = current[2];
                      subpathStartX = x;
                      subpathStartY = y;
                      ctx.moveTo(x + l, y + t);
                      break;
                    case "C":
                      x = current[5];
                      y = current[6];
                      controlX = current[3];
                      controlY = current[4];
                      ctx.bezierCurveTo(current[1] + l, current[2] + t, controlX + l, controlY + t, x + l, y + t);
                      break;
                    case "Q":
                      ctx.quadraticCurveTo(current[1] + l, current[2] + t, current[3] + l, current[4] + t);
                      x = current[3];
                      y = current[4];
                      controlX = current[1];
                      controlY = current[2];
                      break;
                    case "z":
                    case "Z":
                      x = subpathStartX;
                      y = subpathStartY;
                      ctx.closePath();
                      break;
                  }
                }
              },
              _render: function(ctx) {
                this._renderPathCommands(ctx);
                this._renderPaintInOrder(ctx);
              },
              toString: function() {
                return "#<fabric.Path (" + this.complexity() + '): { "top": ' + this.top + ', "left": ' + this.left + " }>";
              },
              toObject: function(propertiesToInclude) {
                return extend(this.callSuper("toObject", propertiesToInclude), {
                  path: this.path.map(function(item) {
                    return item.slice();
                  })
                });
              },
              toDatalessObject: function(propertiesToInclude) {
                var o = this.toObject(["sourcePath"].concat(propertiesToInclude));
                if (o.sourcePath) {
                  delete o.path;
                }
                return o;
              },
              _toSVG: function() {
                var path = fabric2.util.joinPath(this.path);
                return [
                  "<path ",
                  "COMMON_PARTS",
                  'd="',
                  path,
                  '" stroke-linecap="round" ',
                  "/>\n"
                ];
              },
              _getOffsetTransform: function() {
                var digits = fabric2.Object.NUM_FRACTION_DIGITS;
                return " translate(" + toFixed(-this.pathOffset.x, digits) + ", " + toFixed(-this.pathOffset.y, digits) + ")";
              },
              toClipPathSVG: function(reviver) {
                var additionalTransform = this._getOffsetTransform();
                return "	" + this._createBaseClipPathSVGMarkup(this._toSVG(), { reviver, additionalTransform });
              },
              toSVG: function(reviver) {
                var additionalTransform = this._getOffsetTransform();
                return this._createBaseSVGMarkup(this._toSVG(), { reviver, additionalTransform });
              },
              complexity: function() {
                return this.path.length;
              },
              _calcDimensions: function() {
                var aX = [], aY = [], current, subpathStartX = 0, subpathStartY = 0, x = 0, y = 0, bounds;
                for (var i = 0, len = this.path.length; i < len; ++i) {
                  current = this.path[i];
                  switch (current[0]) {
                    case "L":
                      x = current[1];
                      y = current[2];
                      bounds = [];
                      break;
                    case "M":
                      x = current[1];
                      y = current[2];
                      subpathStartX = x;
                      subpathStartY = y;
                      bounds = [];
                      break;
                    case "C":
                      bounds = fabric2.util.getBoundsOfCurve(x, y, current[1], current[2], current[3], current[4], current[5], current[6]);
                      x = current[5];
                      y = current[6];
                      break;
                    case "Q":
                      bounds = fabric2.util.getBoundsOfCurve(x, y, current[1], current[2], current[1], current[2], current[3], current[4]);
                      x = current[3];
                      y = current[4];
                      break;
                    case "z":
                    case "Z":
                      x = subpathStartX;
                      y = subpathStartY;
                      break;
                  }
                  bounds.forEach(function(point) {
                    aX.push(point.x);
                    aY.push(point.y);
                  });
                  aX.push(x);
                  aY.push(y);
                }
                var minX = min(aX) || 0, minY = min(aY) || 0, maxX = max(aX) || 0, maxY = max(aY) || 0, deltaX = maxX - minX, deltaY = maxY - minY;
                return {
                  left: minX,
                  top: minY,
                  width: deltaX,
                  height: deltaY
                };
              }
            });
            fabric2.Path.fromObject = function(object, callback) {
              if (typeof object.sourcePath === "string") {
                var pathUrl = object.sourcePath;
                fabric2.loadSVGFromURL(pathUrl, function(elements) {
                  var path = elements[0];
                  path.setOptions(object);
                  callback && callback(path);
                });
              } else {
                fabric2.Object._fromObject("Path", object, callback, "path");
              }
            };
            fabric2.Path.ATTRIBUTE_NAMES = fabric2.SHARED_ATTRIBUTES.concat(["d"]);
            fabric2.Path.fromElement = function(element, callback, options) {
              var parsedAttributes = fabric2.parseAttributes(element, fabric2.Path.ATTRIBUTE_NAMES);
              parsedAttributes.fromSVG = true;
              callback(new fabric2.Path(parsedAttributes.d, extend(parsedAttributes, options)));
            };
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), min = fabric2.util.array.min, max = fabric2.util.array.max;
            if (fabric2.Group) {
              return;
            }
            fabric2.Group = fabric2.util.createClass(fabric2.Object, fabric2.Collection, {
              type: "group",
              strokeWidth: 0,
              subTargetCheck: false,
              cacheProperties: [],
              useSetOnGroup: false,
              initialize: function(objects, options, isAlreadyGrouped) {
                options = options || {};
                this._objects = [];
                isAlreadyGrouped && this.callSuper("initialize", options);
                this._objects = objects || [];
                for (var i = this._objects.length; i--; ) {
                  this._objects[i].group = this;
                }
                if (!isAlreadyGrouped) {
                  var center = options && options.centerPoint;
                  if (options.originX !== void 0) {
                    this.originX = options.originX;
                  }
                  if (options.originY !== void 0) {
                    this.originY = options.originY;
                  }
                  center || this._calcBounds();
                  this._updateObjectsCoords(center);
                  delete options.centerPoint;
                  this.callSuper("initialize", options);
                } else {
                  this._updateObjectsACoords();
                }
                this.setCoords();
              },
              _updateObjectsACoords: function() {
                var skipControls = true;
                for (var i = this._objects.length; i--; ) {
                  this._objects[i].setCoords(skipControls);
                }
              },
              _updateObjectsCoords: function(center) {
                var center = center || this.getCenterPoint();
                for (var i = this._objects.length; i--; ) {
                  this._updateObjectCoords(this._objects[i], center);
                }
              },
              _updateObjectCoords: function(object, center) {
                var objectLeft = object.left, objectTop = object.top, skipControls = true;
                object.set({
                  left: objectLeft - center.x,
                  top: objectTop - center.y
                });
                object.group = this;
                object.setCoords(skipControls);
              },
              toString: function() {
                return "#<fabric.Group: (" + this.complexity() + ")>";
              },
              addWithUpdate: function(object) {
                var nested = !!this.group;
                this._restoreObjectsState();
                fabric2.util.resetObjectTransform(this);
                if (object) {
                  if (nested) {
                    fabric2.util.removeTransformFromObject(object, this.group.calcTransformMatrix());
                  }
                  this._objects.push(object);
                  object.group = this;
                  object._set("canvas", this.canvas);
                }
                this._calcBounds();
                this._updateObjectsCoords();
                this.dirty = true;
                if (nested) {
                  this.group.addWithUpdate();
                } else {
                  this.setCoords();
                }
                return this;
              },
              removeWithUpdate: function(object) {
                this._restoreObjectsState();
                fabric2.util.resetObjectTransform(this);
                this.remove(object);
                this._calcBounds();
                this._updateObjectsCoords();
                this.setCoords();
                this.dirty = true;
                return this;
              },
              _onObjectAdded: function(object) {
                this.dirty = true;
                object.group = this;
                object._set("canvas", this.canvas);
              },
              _onObjectRemoved: function(object) {
                this.dirty = true;
                delete object.group;
              },
              _set: function(key, value) {
                var i = this._objects.length;
                if (this.useSetOnGroup) {
                  while (i--) {
                    this._objects[i].setOnGroup(key, value);
                  }
                }
                if (key === "canvas") {
                  while (i--) {
                    this._objects[i]._set(key, value);
                  }
                }
                fabric2.Object.prototype._set.call(this, key, value);
              },
              toObject: function(propertiesToInclude) {
                var _includeDefaultValues = this.includeDefaultValues;
                var objsToObject = this._objects.filter(function(obj2) {
                  return !obj2.excludeFromExport;
                }).map(function(obj2) {
                  var originalDefaults = obj2.includeDefaultValues;
                  obj2.includeDefaultValues = _includeDefaultValues;
                  var _obj = obj2.toObject(propertiesToInclude);
                  obj2.includeDefaultValues = originalDefaults;
                  return _obj;
                });
                var obj = fabric2.Object.prototype.toObject.call(this, propertiesToInclude);
                obj.objects = objsToObject;
                return obj;
              },
              toDatalessObject: function(propertiesToInclude) {
                var objsToObject, sourcePath = this.sourcePath;
                if (sourcePath) {
                  objsToObject = sourcePath;
                } else {
                  var _includeDefaultValues = this.includeDefaultValues;
                  objsToObject = this._objects.map(function(obj2) {
                    var originalDefaults = obj2.includeDefaultValues;
                    obj2.includeDefaultValues = _includeDefaultValues;
                    var _obj = obj2.toDatalessObject(propertiesToInclude);
                    obj2.includeDefaultValues = originalDefaults;
                    return _obj;
                  });
                }
                var obj = fabric2.Object.prototype.toDatalessObject.call(this, propertiesToInclude);
                obj.objects = objsToObject;
                return obj;
              },
              render: function(ctx) {
                this._transformDone = true;
                this.callSuper("render", ctx);
                this._transformDone = false;
              },
              shouldCache: function() {
                var ownCache = fabric2.Object.prototype.shouldCache.call(this);
                if (ownCache) {
                  for (var i = 0, len = this._objects.length; i < len; i++) {
                    if (this._objects[i].willDrawShadow()) {
                      this.ownCaching = false;
                      return false;
                    }
                  }
                }
                return ownCache;
              },
              willDrawShadow: function() {
                if (fabric2.Object.prototype.willDrawShadow.call(this)) {
                  return true;
                }
                for (var i = 0, len = this._objects.length; i < len; i++) {
                  if (this._objects[i].willDrawShadow()) {
                    return true;
                  }
                }
                return false;
              },
              isOnACache: function() {
                return this.ownCaching || this.group && this.group.isOnACache();
              },
              drawObject: function(ctx) {
                for (var i = 0, len = this._objects.length; i < len; i++) {
                  this._objects[i].render(ctx);
                }
                this._drawClipPath(ctx);
              },
              isCacheDirty: function(skipCanvas) {
                if (this.callSuper("isCacheDirty", skipCanvas)) {
                  return true;
                }
                if (!this.statefullCache) {
                  return false;
                }
                for (var i = 0, len = this._objects.length; i < len; i++) {
                  if (this._objects[i].isCacheDirty(true)) {
                    if (this._cacheCanvas) {
                      var x = this.cacheWidth / this.zoomX, y = this.cacheHeight / this.zoomY;
                      this._cacheContext.clearRect(-x / 2, -y / 2, x, y);
                    }
                    return true;
                  }
                }
                return false;
              },
              _restoreObjectsState: function() {
                var groupMatrix = this.calcOwnMatrix();
                this._objects.forEach(function(object) {
                  fabric2.util.addTransformToObject(object, groupMatrix);
                  delete object.group;
                  object.setCoords();
                });
                return this;
              },
              realizeTransform: function(object, parentMatrix) {
                fabric2.util.addTransformToObject(object, parentMatrix);
                return object;
              },
              destroy: function() {
                this._objects.forEach(function(object) {
                  object.set("dirty", true);
                });
                return this._restoreObjectsState();
              },
              toActiveSelection: function() {
                if (!this.canvas) {
                  return;
                }
                var objects = this._objects, canvas = this.canvas;
                this._objects = [];
                var options = this.toObject();
                delete options.objects;
                var activeSelection = new fabric2.ActiveSelection([]);
                activeSelection.set(options);
                activeSelection.type = "activeSelection";
                canvas.remove(this);
                objects.forEach(function(object) {
                  object.group = activeSelection;
                  object.dirty = true;
                  canvas.add(object);
                });
                activeSelection.canvas = canvas;
                activeSelection._objects = objects;
                canvas._activeObject = activeSelection;
                activeSelection.setCoords();
                return activeSelection;
              },
              ungroupOnCanvas: function() {
                return this._restoreObjectsState();
              },
              setObjectsCoords: function() {
                var skipControls = true;
                this.forEachObject(function(object) {
                  object.setCoords(skipControls);
                });
                return this;
              },
              _calcBounds: function(onlyWidthHeight) {
                var aX = [], aY = [], o, prop, coords, props = ["tr", "br", "bl", "tl"], i = 0, iLen = this._objects.length, j, jLen = props.length;
                for (; i < iLen; ++i) {
                  o = this._objects[i];
                  coords = o.calcACoords();
                  for (j = 0; j < jLen; j++) {
                    prop = props[j];
                    aX.push(coords[prop].x);
                    aY.push(coords[prop].y);
                  }
                  o.aCoords = coords;
                }
                this._getBounds(aX, aY, onlyWidthHeight);
              },
              _getBounds: function(aX, aY, onlyWidthHeight) {
                var minXY = new fabric2.Point(min(aX), min(aY)), maxXY = new fabric2.Point(max(aX), max(aY)), top = minXY.y || 0, left = minXY.x || 0, width = maxXY.x - minXY.x || 0, height = maxXY.y - minXY.y || 0;
                this.width = width;
                this.height = height;
                if (!onlyWidthHeight) {
                  this.setPositionByOrigin({ x: left, y: top }, "left", "top");
                }
              },
              _toSVG: function(reviver) {
                var svgString = ["<g ", "COMMON_PARTS", " >\n"];
                for (var i = 0, len = this._objects.length; i < len; i++) {
                  svgString.push("		", this._objects[i].toSVG(reviver));
                }
                svgString.push("</g>\n");
                return svgString;
              },
              getSvgStyles: function() {
                var opacity = typeof this.opacity !== "undefined" && this.opacity !== 1 ? "opacity: " + this.opacity + ";" : "", visibility = this.visible ? "" : " visibility: hidden;";
                return [
                  opacity,
                  this.getSvgFilter(),
                  visibility
                ].join("");
              },
              toClipPathSVG: function(reviver) {
                var svgString = [];
                for (var i = 0, len = this._objects.length; i < len; i++) {
                  svgString.push("	", this._objects[i].toClipPathSVG(reviver));
                }
                return this._createBaseClipPathSVGMarkup(svgString, { reviver });
              }
            });
            fabric2.Group.fromObject = function(object, callback) {
              var objects = object.objects, options = fabric2.util.object.clone(object, true);
              delete options.objects;
              if (typeof objects === "string") {
                fabric2.loadSVGFromURL(objects, function(elements) {
                  var group = fabric2.util.groupSVGElements(elements, object, objects);
                  group.set(options);
                  callback && callback(group);
                });
                return;
              }
              fabric2.util.enlivenObjects(objects, function(enlivenedObjects) {
                fabric2.util.enlivenObjects([object.clipPath], function(enlivedClipPath) {
                  var options2 = fabric2.util.object.clone(object, true);
                  options2.clipPath = enlivedClipPath[0];
                  delete options2.objects;
                  callback && callback(new fabric2.Group(enlivenedObjects, options2, true));
                });
              });
            };
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {});
            if (fabric2.ActiveSelection) {
              return;
            }
            fabric2.ActiveSelection = fabric2.util.createClass(fabric2.Group, {
              type: "activeSelection",
              initialize: function(objects, options) {
                options = options || {};
                this._objects = objects || [];
                for (var i = this._objects.length; i--; ) {
                  this._objects[i].group = this;
                }
                if (options.originX) {
                  this.originX = options.originX;
                }
                if (options.originY) {
                  this.originY = options.originY;
                }
                this._calcBounds();
                this._updateObjectsCoords();
                fabric2.Object.prototype.initialize.call(this, options);
                this.setCoords();
              },
              toGroup: function() {
                var objects = this._objects.concat();
                this._objects = [];
                var options = fabric2.Object.prototype.toObject.call(this);
                var newGroup = new fabric2.Group([]);
                delete options.type;
                newGroup.set(options);
                objects.forEach(function(object) {
                  object.canvas.remove(object);
                  object.group = newGroup;
                });
                newGroup._objects = objects;
                if (!this.canvas) {
                  return newGroup;
                }
                var canvas = this.canvas;
                canvas.add(newGroup);
                canvas._activeObject = newGroup;
                newGroup.setCoords();
                return newGroup;
              },
              onDeselect: function() {
                this.destroy();
                return false;
              },
              toString: function() {
                return "#<fabric.ActiveSelection: (" + this.complexity() + ")>";
              },
              shouldCache: function() {
                return false;
              },
              isOnACache: function() {
                return false;
              },
              _renderControls: function(ctx, styleOverride, childrenOverride) {
                ctx.save();
                ctx.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1;
                this.callSuper("_renderControls", ctx, styleOverride);
                childrenOverride = childrenOverride || {};
                if (typeof childrenOverride.hasControls === "undefined") {
                  childrenOverride.hasControls = false;
                }
                childrenOverride.forActiveSelection = true;
                for (var i = 0, len = this._objects.length; i < len; i++) {
                  this._objects[i]._renderControls(ctx, childrenOverride);
                }
                ctx.restore();
              }
            });
            fabric2.ActiveSelection.fromObject = function(object, callback) {
              fabric2.util.enlivenObjects(object.objects, function(enlivenedObjects) {
                delete object.objects;
                callback && callback(new fabric2.ActiveSelection(enlivenedObjects, object, true));
              });
            };
          })(exports2);
          (function(global2) {
            var extend = fabric.util.object.extend;
            if (!global2.fabric) {
              global2.fabric = {};
            }
            if (global2.fabric.Image) {
              fabric.warn("fabric.Image is already defined.");
              return;
            }
            fabric.Image = fabric.util.createClass(fabric.Object, {
              type: "image",
              strokeWidth: 0,
              srcFromAttribute: false,
              _lastScaleX: 1,
              _lastScaleY: 1,
              _filterScalingX: 1,
              _filterScalingY: 1,
              minimumScaleTrigger: 0.5,
              stateProperties: fabric.Object.prototype.stateProperties.concat("cropX", "cropY"),
              cacheProperties: fabric.Object.prototype.cacheProperties.concat("cropX", "cropY"),
              cacheKey: "",
              cropX: 0,
              cropY: 0,
              imageSmoothing: true,
              initialize: function(element, options) {
                options || (options = {});
                this.filters = [];
                this.cacheKey = "texture" + fabric.Object.__uid++;
                this.callSuper("initialize", options);
                this._initElement(element, options);
              },
              getElement: function() {
                return this._element || {};
              },
              setElement: function(element, options) {
                this.removeTexture(this.cacheKey);
                this.removeTexture(this.cacheKey + "_filtered");
                this._element = element;
                this._originalElement = element;
                this._initConfig(options);
                if (this.filters.length !== 0) {
                  this.applyFilters();
                }
                if (this.resizeFilter) {
                  this.applyResizeFilters();
                }
                return this;
              },
              removeTexture: function(key) {
                var backend = fabric.filterBackend;
                if (backend && backend.evictCachesForKey) {
                  backend.evictCachesForKey(key);
                }
              },
              dispose: function() {
                this.removeTexture(this.cacheKey);
                this.removeTexture(this.cacheKey + "_filtered");
                this._cacheContext = void 0;
                ["_originalElement", "_element", "_filteredEl", "_cacheCanvas"].forEach(function(element) {
                  fabric.util.cleanUpJsdomNode(this[element]);
                  this[element] = void 0;
                }.bind(this));
              },
              getCrossOrigin: function() {
                return this._originalElement && (this._originalElement.crossOrigin || null);
              },
              getOriginalSize: function() {
                var element = this.getElement();
                return {
                  width: element.naturalWidth || element.width,
                  height: element.naturalHeight || element.height
                };
              },
              _stroke: function(ctx) {
                if (!this.stroke || this.strokeWidth === 0) {
                  return;
                }
                var w = this.width / 2, h = this.height / 2;
                ctx.beginPath();
                ctx.moveTo(-w, -h);
                ctx.lineTo(w, -h);
                ctx.lineTo(w, h);
                ctx.lineTo(-w, h);
                ctx.lineTo(-w, -h);
                ctx.closePath();
              },
              toObject: function(propertiesToInclude) {
                var filters = [];
                this.filters.forEach(function(filterObj) {
                  if (filterObj) {
                    filters.push(filterObj.toObject());
                  }
                });
                var object = extend(this.callSuper("toObject", ["cropX", "cropY"].concat(propertiesToInclude)), {
                  src: this.getSrc(),
                  crossOrigin: this.getCrossOrigin(),
                  filters
                });
                if (this.resizeFilter) {
                  object.resizeFilter = this.resizeFilter.toObject();
                }
                return object;
              },
              hasCrop: function() {
                return this.cropX || this.cropY || this.width < this._element.width || this.height < this._element.height;
              },
              _toSVG: function() {
                var svgString = [], imageMarkup = [], strokeSvg, element = this._element, x = -this.width / 2, y = -this.height / 2, clipPath = "", imageRendering = "";
                if (!element) {
                  return [];
                }
                if (this.hasCrop()) {
                  var clipPathId = fabric.Object.__uid++;
                  svgString.push('<clipPath id="imageCrop_' + clipPathId + '">\n', '	<rect x="' + x + '" y="' + y + '" width="' + this.width + '" height="' + this.height + '" />\n', "</clipPath>\n");
                  clipPath = ' clip-path="url(#imageCrop_' + clipPathId + ')" ';
                }
                if (!this.imageSmoothing) {
                  imageRendering = '" image-rendering="optimizeSpeed';
                }
                imageMarkup.push("	<image ", "COMMON_PARTS", 'xlink:href="', this.getSvgSrc(true), '" x="', x - this.cropX, '" y="', y - this.cropY, '" width="', element.width || element.naturalWidth, '" height="', element.height || element.height, imageRendering, '"', clipPath, "></image>\n");
                if (this.stroke || this.strokeDashArray) {
                  var origFill = this.fill;
                  this.fill = null;
                  strokeSvg = [
                    "	<rect ",
                    'x="',
                    x,
                    '" y="',
                    y,
                    '" width="',
                    this.width,
                    '" height="',
                    this.height,
                    '" style="',
                    this.getSvgStyles(),
                    '"/>\n'
                  ];
                  this.fill = origFill;
                }
                if (this.paintFirst !== "fill") {
                  svgString = svgString.concat(strokeSvg, imageMarkup);
                } else {
                  svgString = svgString.concat(imageMarkup, strokeSvg);
                }
                return svgString;
              },
              getSrc: function(filtered) {
                var element = filtered ? this._element : this._originalElement;
                if (element) {
                  if (element.toDataURL) {
                    return element.toDataURL();
                  }
                  if (this.srcFromAttribute) {
                    return element.getAttribute("src");
                  } else {
                    return element.src;
                  }
                } else {
                  return this.src || "";
                }
              },
              setSrc: function(src, callback, options) {
                fabric.util.loadImage(src, function(img, isError) {
                  this.setElement(img, options);
                  this._setWidthHeight();
                  callback && callback(this, isError);
                }, this, options && options.crossOrigin);
                return this;
              },
              toString: function() {
                return '#<fabric.Image: { src: "' + this.getSrc() + '" }>';
              },
              applyResizeFilters: function() {
                var filter = this.resizeFilter, minimumScale = this.minimumScaleTrigger, objectScale = this.getTotalObjectScaling(), scaleX = objectScale.scaleX, scaleY = objectScale.scaleY, elementToFilter = this._filteredEl || this._originalElement;
                if (this.group) {
                  this.set("dirty", true);
                }
                if (!filter || scaleX > minimumScale && scaleY > minimumScale) {
                  this._element = elementToFilter;
                  this._filterScalingX = 1;
                  this._filterScalingY = 1;
                  this._lastScaleX = scaleX;
                  this._lastScaleY = scaleY;
                  return;
                }
                if (!fabric.filterBackend) {
                  fabric.filterBackend = fabric.initFilterBackend();
                }
                var canvasEl = fabric.util.createCanvasElement(), cacheKey = this._filteredEl ? this.cacheKey + "_filtered" : this.cacheKey, sourceWidth = elementToFilter.width, sourceHeight = elementToFilter.height;
                canvasEl.width = sourceWidth;
                canvasEl.height = sourceHeight;
                this._element = canvasEl;
                this._lastScaleX = filter.scaleX = scaleX;
                this._lastScaleY = filter.scaleY = scaleY;
                fabric.filterBackend.applyFilters([filter], elementToFilter, sourceWidth, sourceHeight, this._element, cacheKey);
                this._filterScalingX = canvasEl.width / this._originalElement.width;
                this._filterScalingY = canvasEl.height / this._originalElement.height;
              },
              applyFilters: function(filters) {
                filters = filters || this.filters || [];
                filters = filters.filter(function(filter) {
                  return filter && !filter.isNeutralState();
                });
                this.set("dirty", true);
                this.removeTexture(this.cacheKey + "_filtered");
                if (filters.length === 0) {
                  this._element = this._originalElement;
                  this._filteredEl = null;
                  this._filterScalingX = 1;
                  this._filterScalingY = 1;
                  return this;
                }
                var imgElement = this._originalElement, sourceWidth = imgElement.naturalWidth || imgElement.width, sourceHeight = imgElement.naturalHeight || imgElement.height;
                if (this._element === this._originalElement) {
                  var canvasEl = fabric.util.createCanvasElement();
                  canvasEl.width = sourceWidth;
                  canvasEl.height = sourceHeight;
                  this._element = canvasEl;
                  this._filteredEl = canvasEl;
                } else {
                  this._element = this._filteredEl;
                  this._filteredEl.getContext("2d").clearRect(0, 0, sourceWidth, sourceHeight);
                  this._lastScaleX = 1;
                  this._lastScaleY = 1;
                }
                if (!fabric.filterBackend) {
                  fabric.filterBackend = fabric.initFilterBackend();
                }
                fabric.filterBackend.applyFilters(filters, this._originalElement, sourceWidth, sourceHeight, this._element, this.cacheKey);
                if (this._originalElement.width !== this._element.width || this._originalElement.height !== this._element.height) {
                  this._filterScalingX = this._element.width / this._originalElement.width;
                  this._filterScalingY = this._element.height / this._originalElement.height;
                }
                return this;
              },
              _render: function(ctx) {
                fabric.util.setImageSmoothing(ctx, this.imageSmoothing);
                if (this.isMoving !== true && this.resizeFilter && this._needsResize()) {
                  this.applyResizeFilters();
                }
                this._stroke(ctx);
                this._renderPaintInOrder(ctx);
              },
              drawCacheOnCanvas: function(ctx) {
                fabric.util.setImageSmoothing(ctx, this.imageSmoothing);
                fabric.Object.prototype.drawCacheOnCanvas.call(this, ctx);
              },
              shouldCache: function() {
                return this.needsItsOwnCache();
              },
              _renderFill: function(ctx) {
                var elementToDraw = this._element;
                if (!elementToDraw) {
                  return;
                }
                var scaleX = this._filterScalingX, scaleY = this._filterScalingY, w = this.width, h = this.height, min = Math.min, max = Math.max, cropX = max(this.cropX, 0), cropY = max(this.cropY, 0), elWidth = elementToDraw.naturalWidth || elementToDraw.width, elHeight = elementToDraw.naturalHeight || elementToDraw.height, sX = cropX * scaleX, sY = cropY * scaleY, sW = min(w * scaleX, elWidth - sX), sH = min(h * scaleY, elHeight - sY), x = -w / 2, y = -h / 2, maxDestW = min(w, elWidth / scaleX - cropX), maxDestH = min(h, elHeight / scaleY - cropY);
                elementToDraw && ctx.drawImage(elementToDraw, sX, sY, sW, sH, x, y, maxDestW, maxDestH);
              },
              _needsResize: function() {
                var scale = this.getTotalObjectScaling();
                return scale.scaleX !== this._lastScaleX || scale.scaleY !== this._lastScaleY;
              },
              _resetWidthHeight: function() {
                this.set(this.getOriginalSize());
              },
              _initElement: function(element, options) {
                this.setElement(fabric.util.getById(element), options);
                fabric.util.addClass(this.getElement(), fabric.Image.CSS_CANVAS);
              },
              _initConfig: function(options) {
                options || (options = {});
                this.setOptions(options);
                this._setWidthHeight(options);
              },
              _initFilters: function(filters, callback) {
                if (filters && filters.length) {
                  fabric.util.enlivenObjects(filters, function(enlivenedObjects) {
                    callback && callback(enlivenedObjects);
                  }, "fabric.Image.filters");
                } else {
                  callback && callback();
                }
              },
              _setWidthHeight: function(options) {
                options || (options = {});
                var el = this.getElement();
                this.width = options.width || el.naturalWidth || el.width || 0;
                this.height = options.height || el.naturalHeight || el.height || 0;
              },
              parsePreserveAspectRatioAttribute: function() {
                var pAR = fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio || ""), rWidth = this._element.width, rHeight = this._element.height, scaleX = 1, scaleY = 1, offsetLeft = 0, offsetTop = 0, cropX = 0, cropY = 0, offset, pWidth = this.width, pHeight = this.height, parsedAttributes = { width: pWidth, height: pHeight };
                if (pAR && (pAR.alignX !== "none" || pAR.alignY !== "none")) {
                  if (pAR.meetOrSlice === "meet") {
                    scaleX = scaleY = fabric.util.findScaleToFit(this._element, parsedAttributes);
                    offset = (pWidth - rWidth * scaleX) / 2;
                    if (pAR.alignX === "Min") {
                      offsetLeft = -offset;
                    }
                    if (pAR.alignX === "Max") {
                      offsetLeft = offset;
                    }
                    offset = (pHeight - rHeight * scaleY) / 2;
                    if (pAR.alignY === "Min") {
                      offsetTop = -offset;
                    }
                    if (pAR.alignY === "Max") {
                      offsetTop = offset;
                    }
                  }
                  if (pAR.meetOrSlice === "slice") {
                    scaleX = scaleY = fabric.util.findScaleToCover(this._element, parsedAttributes);
                    offset = rWidth - pWidth / scaleX;
                    if (pAR.alignX === "Mid") {
                      cropX = offset / 2;
                    }
                    if (pAR.alignX === "Max") {
                      cropX = offset;
                    }
                    offset = rHeight - pHeight / scaleY;
                    if (pAR.alignY === "Mid") {
                      cropY = offset / 2;
                    }
                    if (pAR.alignY === "Max") {
                      cropY = offset;
                    }
                    rWidth = pWidth / scaleX;
                    rHeight = pHeight / scaleY;
                  }
                } else {
                  scaleX = pWidth / rWidth;
                  scaleY = pHeight / rHeight;
                }
                return {
                  width: rWidth,
                  height: rHeight,
                  scaleX,
                  scaleY,
                  offsetLeft,
                  offsetTop,
                  cropX,
                  cropY
                };
              }
            });
            fabric.Image.CSS_CANVAS = "canvas-img";
            fabric.Image.prototype.getSvgSrc = fabric.Image.prototype.getSrc;
            fabric.Image.fromObject = function(_object, callback) {
              var object = fabric.util.object.clone(_object);
              fabric.util.loadImage(object.src, function(img, isError) {
                if (isError) {
                  callback && callback(null, true);
                  return;
                }
                fabric.Image.prototype._initFilters.call(object, object.filters, function(filters) {
                  object.filters = filters || [];
                  fabric.Image.prototype._initFilters.call(object, [object.resizeFilter], function(resizeFilters) {
                    object.resizeFilter = resizeFilters[0];
                    fabric.util.enlivenObjects([object.clipPath], function(enlivedProps) {
                      object.clipPath = enlivedProps[0];
                      var image = new fabric.Image(img, object);
                      callback(image, false);
                    });
                  });
                });
              }, null, object.crossOrigin);
            };
            fabric.Image.fromURL = function(url, callback, imgOptions) {
              fabric.util.loadImage(url, function(img, isError) {
                callback && callback(new fabric.Image(img, imgOptions), isError);
              }, null, imgOptions && imgOptions.crossOrigin);
            };
            fabric.Image.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" "));
            fabric.Image.fromElement = function(element, callback, options) {
              var parsedAttributes = fabric.parseAttributes(element, fabric.Image.ATTRIBUTE_NAMES);
              fabric.Image.fromURL(parsedAttributes["xlink:href"], callback, extend(options ? fabric.util.object.clone(options) : {}, parsedAttributes));
            };
          })(exports2);
          fabric.util.object.extend(fabric.Object.prototype, {
            _getAngleValueForStraighten: function() {
              var angle = this.angle % 360;
              if (angle > 0) {
                return Math.round((angle - 1) / 90) * 90;
              }
              return Math.round(angle / 90) * 90;
            },
            straighten: function() {
              this.rotate(this._getAngleValueForStraighten());
              return this;
            },
            fxStraighten: function(callbacks) {
              callbacks = callbacks || {};
              var empty = function() {
              }, onComplete = callbacks.onComplete || empty, onChange = callbacks.onChange || empty, _this = this;
              fabric.util.animate({
                startValue: this.get("angle"),
                endValue: this._getAngleValueForStraighten(),
                duration: this.FX_DURATION,
                onChange: function(value) {
                  _this.rotate(value);
                  onChange();
                },
                onComplete: function() {
                  _this.setCoords();
                  onComplete();
                }
              });
              return this;
            }
          });
          fabric.util.object.extend(fabric.StaticCanvas.prototype, {
            straightenObject: function(object) {
              object.straighten();
              this.requestRenderAll();
              return this;
            },
            fxStraightenObject: function(object) {
              object.fxStraighten({
                onChange: this.requestRenderAllBound
              });
              return this;
            }
          });
          (function() {
            function testPrecision(gl, precision) {
              var fragmentSource = "precision " + precision + " float;\nvoid main(){}";
              var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
              gl.shaderSource(fragmentShader, fragmentSource);
              gl.compileShader(fragmentShader);
              if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {
                return false;
              }
              return true;
            }
            fabric.isWebglSupported = function(tileSize) {
              if (fabric.isLikelyNode) {
                return false;
              }
              tileSize = tileSize || fabric.WebglFilterBackend.prototype.tileSize;
              var canvas = document.createElement("canvas");
              var gl = canvas.getContext("webgl") || canvas.getContext("experimental-webgl");
              var isSupported = false;
              if (gl) {
                fabric.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);
                isSupported = fabric.maxTextureSize >= tileSize;
                var precisions = ["highp", "mediump", "lowp"];
                for (var i = 0; i < 3; i++) {
                  if (testPrecision(gl, precisions[i])) {
                    fabric.webGlPrecision = precisions[i];
                    break;
                  }
                }
              }
              this.isSupported = isSupported;
              return isSupported;
            };
            fabric.WebglFilterBackend = WebglFilterBackend;
            function WebglFilterBackend(options) {
              if (options && options.tileSize) {
                this.tileSize = options.tileSize;
              }
              this.setupGLContext(this.tileSize, this.tileSize);
              this.captureGPUInfo();
            }
            WebglFilterBackend.prototype = {
              tileSize: 2048,
              resources: {},
              setupGLContext: function(width, height) {
                this.dispose();
                this.createWebGLCanvas(width, height);
                this.aPosition = new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]);
                this.chooseFastestCopyGLTo2DMethod(width, height);
              },
              chooseFastestCopyGLTo2DMethod: function(width, height) {
                var canMeasurePerf = typeof window.performance !== "undefined", canUseImageData;
                try {
                  new ImageData(1, 1);
                  canUseImageData = true;
                } catch (e) {
                  canUseImageData = false;
                }
                var canUseArrayBuffer = typeof ArrayBuffer !== "undefined";
                var canUseUint8Clamped = typeof Uint8ClampedArray !== "undefined";
                if (!(canMeasurePerf && canUseImageData && canUseArrayBuffer && canUseUint8Clamped)) {
                  return;
                }
                var targetCanvas = fabric.util.createCanvasElement();
                var imageBuffer = new ArrayBuffer(width * height * 4);
                if (fabric.forceGLPutImageData) {
                  this.imageBuffer = imageBuffer;
                  this.copyGLTo2D = copyGLTo2DPutImageData;
                  return;
                }
                var testContext = {
                  imageBuffer,
                  destinationWidth: width,
                  destinationHeight: height,
                  targetCanvas
                };
                var startTime, drawImageTime, putImageDataTime;
                targetCanvas.width = width;
                targetCanvas.height = height;
                startTime = window.performance.now();
                copyGLTo2DDrawImage.call(testContext, this.gl, testContext);
                drawImageTime = window.performance.now() - startTime;
                startTime = window.performance.now();
                copyGLTo2DPutImageData.call(testContext, this.gl, testContext);
                putImageDataTime = window.performance.now() - startTime;
                if (drawImageTime > putImageDataTime) {
                  this.imageBuffer = imageBuffer;
                  this.copyGLTo2D = copyGLTo2DPutImageData;
                } else {
                  this.copyGLTo2D = copyGLTo2DDrawImage;
                }
              },
              createWebGLCanvas: function(width, height) {
                var canvas = fabric.util.createCanvasElement();
                canvas.width = width;
                canvas.height = height;
                var glOptions = {
                  alpha: true,
                  premultipliedAlpha: false,
                  depth: false,
                  stencil: false,
                  antialias: false
                }, gl = canvas.getContext("webgl", glOptions);
                if (!gl) {
                  gl = canvas.getContext("experimental-webgl", glOptions);
                }
                if (!gl) {
                  return;
                }
                gl.clearColor(0, 0, 0, 0);
                this.canvas = canvas;
                this.gl = gl;
              },
              applyFilters: function(filters, source, width, height, targetCanvas, cacheKey) {
                var gl = this.gl;
                var cachedTexture;
                if (cacheKey) {
                  cachedTexture = this.getCachedTexture(cacheKey, source);
                }
                var pipelineState = {
                  originalWidth: source.width || source.originalWidth,
                  originalHeight: source.height || source.originalHeight,
                  sourceWidth: width,
                  sourceHeight: height,
                  destinationWidth: width,
                  destinationHeight: height,
                  context: gl,
                  sourceTexture: this.createTexture(gl, width, height, !cachedTexture && source),
                  targetTexture: this.createTexture(gl, width, height),
                  originalTexture: cachedTexture || this.createTexture(gl, width, height, !cachedTexture && source),
                  passes: filters.length,
                  webgl: true,
                  aPosition: this.aPosition,
                  programCache: this.programCache,
                  pass: 0,
                  filterBackend: this,
                  targetCanvas
                };
                var tempFbo = gl.createFramebuffer();
                gl.bindFramebuffer(gl.FRAMEBUFFER, tempFbo);
                filters.forEach(function(filter) {
                  filter && filter.applyTo(pipelineState);
                });
                resizeCanvasIfNeeded(pipelineState);
                this.copyGLTo2D(gl, pipelineState);
                gl.bindTexture(gl.TEXTURE_2D, null);
                gl.deleteTexture(pipelineState.sourceTexture);
                gl.deleteTexture(pipelineState.targetTexture);
                gl.deleteFramebuffer(tempFbo);
                targetCanvas.getContext("2d").setTransform(1, 0, 0, 1, 0, 0);
                return pipelineState;
              },
              dispose: function() {
                if (this.canvas) {
                  this.canvas = null;
                  this.gl = null;
                }
                this.clearWebGLCaches();
              },
              clearWebGLCaches: function() {
                this.programCache = {};
                this.textureCache = {};
              },
              createTexture: function(gl, width, height, textureImageSource) {
                var texture = gl.createTexture();
                gl.bindTexture(gl.TEXTURE_2D, texture);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
                if (textureImageSource) {
                  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureImageSource);
                } else {
                  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
                }
                return texture;
              },
              getCachedTexture: function(uniqueId, textureImageSource) {
                if (this.textureCache[uniqueId]) {
                  return this.textureCache[uniqueId];
                } else {
                  var texture = this.createTexture(this.gl, textureImageSource.width, textureImageSource.height, textureImageSource);
                  this.textureCache[uniqueId] = texture;
                  return texture;
                }
              },
              evictCachesForKey: function(cacheKey) {
                if (this.textureCache[cacheKey]) {
                  this.gl.deleteTexture(this.textureCache[cacheKey]);
                  delete this.textureCache[cacheKey];
                }
              },
              copyGLTo2D: copyGLTo2DDrawImage,
              captureGPUInfo: function() {
                if (this.gpuInfo) {
                  return this.gpuInfo;
                }
                var gl = this.gl, gpuInfo = { renderer: "", vendor: "" };
                if (!gl) {
                  return gpuInfo;
                }
                var ext = gl.getExtension("WEBGL_debug_renderer_info");
                if (ext) {
                  var renderer = gl.getParameter(ext.UNMASKED_RENDERER_WEBGL);
                  var vendor = gl.getParameter(ext.UNMASKED_VENDOR_WEBGL);
                  if (renderer) {
                    gpuInfo.renderer = renderer.toLowerCase();
                  }
                  if (vendor) {
                    gpuInfo.vendor = vendor.toLowerCase();
                  }
                }
                this.gpuInfo = gpuInfo;
                return gpuInfo;
              }
            };
          })();
          function resizeCanvasIfNeeded(pipelineState) {
            var targetCanvas = pipelineState.targetCanvas, width = targetCanvas.width, height = targetCanvas.height, dWidth = pipelineState.destinationWidth, dHeight = pipelineState.destinationHeight;
            if (width !== dWidth || height !== dHeight) {
              targetCanvas.width = dWidth;
              targetCanvas.height = dHeight;
            }
          }
          function copyGLTo2DDrawImage(gl, pipelineState) {
            var glCanvas = gl.canvas, targetCanvas = pipelineState.targetCanvas, ctx = targetCanvas.getContext("2d");
            ctx.translate(0, targetCanvas.height);
            ctx.scale(1, -1);
            var sourceY = glCanvas.height - targetCanvas.height;
            ctx.drawImage(glCanvas, 0, sourceY, targetCanvas.width, targetCanvas.height, 0, 0, targetCanvas.width, targetCanvas.height);
          }
          function copyGLTo2DPutImageData(gl, pipelineState) {
            var targetCanvas = pipelineState.targetCanvas, ctx = targetCanvas.getContext("2d"), dWidth = pipelineState.destinationWidth, dHeight = pipelineState.destinationHeight, numBytes = dWidth * dHeight * 4;
            var u8 = new Uint8Array(this.imageBuffer, 0, numBytes);
            var u8Clamped = new Uint8ClampedArray(this.imageBuffer, 0, numBytes);
            gl.readPixels(0, 0, dWidth, dHeight, gl.RGBA, gl.UNSIGNED_BYTE, u8);
            var imgData = new ImageData(u8Clamped, dWidth, dHeight);
            ctx.putImageData(imgData, 0, 0);
          }
          (function() {
            var noop = function() {
            };
            fabric.Canvas2dFilterBackend = Canvas2dFilterBackend;
            function Canvas2dFilterBackend() {
            }
            Canvas2dFilterBackend.prototype = {
              evictCachesForKey: noop,
              dispose: noop,
              clearWebGLCaches: noop,
              resources: {},
              applyFilters: function(filters, sourceElement, sourceWidth, sourceHeight, targetCanvas) {
                var ctx = targetCanvas.getContext("2d");
                ctx.drawImage(sourceElement, 0, 0, sourceWidth, sourceHeight);
                var imageData = ctx.getImageData(0, 0, sourceWidth, sourceHeight);
                var originalImageData = ctx.getImageData(0, 0, sourceWidth, sourceHeight);
                var pipelineState = {
                  sourceWidth,
                  sourceHeight,
                  imageData,
                  originalEl: sourceElement,
                  originalImageData,
                  canvasEl: targetCanvas,
                  ctx,
                  filterBackend: this
                };
                filters.forEach(function(filter) {
                  filter.applyTo(pipelineState);
                });
                if (pipelineState.imageData.width !== sourceWidth || pipelineState.imageData.height !== sourceHeight) {
                  targetCanvas.width = pipelineState.imageData.width;
                  targetCanvas.height = pipelineState.imageData.height;
                }
                ctx.putImageData(pipelineState.imageData, 0, 0);
                return pipelineState;
              }
            };
          })();
          fabric.Image = fabric.Image || {};
          fabric.Image.filters = fabric.Image.filters || {};
          fabric.Image.filters.BaseFilter = fabric.util.createClass({
            type: "BaseFilter",
            vertexSource: "attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",
            fragmentSource: "precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",
            initialize: function(options) {
              if (options) {
                this.setOptions(options);
              }
            },
            setOptions: function(options) {
              for (var prop in options) {
                this[prop] = options[prop];
              }
            },
            createProgram: function(gl, fragmentSource, vertexSource) {
              fragmentSource = fragmentSource || this.fragmentSource;
              vertexSource = vertexSource || this.vertexSource;
              if (fabric.webGlPrecision !== "highp") {
                fragmentSource = fragmentSource.replace(/precision highp float/g, "precision " + fabric.webGlPrecision + " float");
              }
              var vertexShader = gl.createShader(gl.VERTEX_SHADER);
              gl.shaderSource(vertexShader, vertexSource);
              gl.compileShader(vertexShader);
              if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {
                throw new Error("Vertex shader compile error for " + this.type + ": " + gl.getShaderInfoLog(vertexShader));
              }
              var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
              gl.shaderSource(fragmentShader, fragmentSource);
              gl.compileShader(fragmentShader);
              if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {
                throw new Error("Fragment shader compile error for " + this.type + ": " + gl.getShaderInfoLog(fragmentShader));
              }
              var program = gl.createProgram();
              gl.attachShader(program, vertexShader);
              gl.attachShader(program, fragmentShader);
              gl.linkProgram(program);
              if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
                throw new Error('Shader link error for "${this.type}" ' + gl.getProgramInfoLog(program));
              }
              var attributeLocations = this.getAttributeLocations(gl, program);
              var uniformLocations = this.getUniformLocations(gl, program) || {};
              uniformLocations.uStepW = gl.getUniformLocation(program, "uStepW");
              uniformLocations.uStepH = gl.getUniformLocation(program, "uStepH");
              return {
                program,
                attributeLocations,
                uniformLocations
              };
            },
            getAttributeLocations: function(gl, program) {
              return {
                aPosition: gl.getAttribLocation(program, "aPosition")
              };
            },
            getUniformLocations: function() {
              return {};
            },
            sendAttributeData: function(gl, attributeLocations, aPositionData) {
              var attributeLocation = attributeLocations.aPosition;
              var buffer = gl.createBuffer();
              gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
              gl.enableVertexAttribArray(attributeLocation);
              gl.vertexAttribPointer(attributeLocation, 2, gl.FLOAT, false, 0, 0);
              gl.bufferData(gl.ARRAY_BUFFER, aPositionData, gl.STATIC_DRAW);
            },
            _setupFrameBuffer: function(options) {
              var gl = options.context, width, height;
              if (options.passes > 1) {
                width = options.destinationWidth;
                height = options.destinationHeight;
                if (options.sourceWidth !== width || options.sourceHeight !== height) {
                  gl.deleteTexture(options.targetTexture);
                  options.targetTexture = options.filterBackend.createTexture(gl, width, height);
                }
                gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, options.targetTexture, 0);
              } else {
                gl.bindFramebuffer(gl.FRAMEBUFFER, null);
                gl.finish();
              }
            },
            _swapTextures: function(options) {
              options.passes--;
              options.pass++;
              var temp = options.targetTexture;
              options.targetTexture = options.sourceTexture;
              options.sourceTexture = temp;
            },
            isNeutralState: function() {
              var main = this.mainParameter, _class = fabric.Image.filters[this.type].prototype;
              if (main) {
                if (Array.isArray(_class[main])) {
                  for (var i = _class[main].length; i--; ) {
                    if (this[main][i] !== _class[main][i]) {
                      return false;
                    }
                  }
                  return true;
                } else {
                  return _class[main] === this[main];
                }
              } else {
                return false;
              }
            },
            applyTo: function(options) {
              if (options.webgl) {
                this._setupFrameBuffer(options);
                this.applyToWebGL(options);
                this._swapTextures(options);
              } else {
                this.applyTo2d(options);
              }
            },
            retrieveShader: function(options) {
              if (!options.programCache.hasOwnProperty(this.type)) {
                options.programCache[this.type] = this.createProgram(options.context);
              }
              return options.programCache[this.type];
            },
            applyToWebGL: function(options) {
              var gl = options.context;
              var shader = this.retrieveShader(options);
              if (options.pass === 0 && options.originalTexture) {
                gl.bindTexture(gl.TEXTURE_2D, options.originalTexture);
              } else {
                gl.bindTexture(gl.TEXTURE_2D, options.sourceTexture);
              }
              gl.useProgram(shader.program);
              this.sendAttributeData(gl, shader.attributeLocations, options.aPosition);
              gl.uniform1f(shader.uniformLocations.uStepW, 1 / options.sourceWidth);
              gl.uniform1f(shader.uniformLocations.uStepH, 1 / options.sourceHeight);
              this.sendUniformData(gl, shader.uniformLocations);
              gl.viewport(0, 0, options.destinationWidth, options.destinationHeight);
              gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
            },
            bindAdditionalTexture: function(gl, texture, textureUnit) {
              gl.activeTexture(textureUnit);
              gl.bindTexture(gl.TEXTURE_2D, texture);
              gl.activeTexture(gl.TEXTURE0);
            },
            unbindAdditionalTexture: function(gl, textureUnit) {
              gl.activeTexture(textureUnit);
              gl.bindTexture(gl.TEXTURE_2D, null);
              gl.activeTexture(gl.TEXTURE0);
            },
            getMainParameter: function() {
              return this[this.mainParameter];
            },
            setMainParameter: function(value) {
              this[this.mainParameter] = value;
            },
            sendUniformData: function() {
            },
            createHelpLayer: function(options) {
              if (!options.helpLayer) {
                var helpLayer = document.createElement("canvas");
                helpLayer.width = options.sourceWidth;
                helpLayer.height = options.sourceHeight;
                options.helpLayer = helpLayer;
              }
            },
            toObject: function() {
              var object = { type: this.type }, mainP = this.mainParameter;
              if (mainP) {
                object[mainP] = this[mainP];
              }
              return object;
            },
            toJSON: function() {
              return this.toObject();
            }
          });
          fabric.Image.filters.BaseFilter.fromObject = function(object, callback) {
            var filter = new fabric.Image.filters[object.type](object);
            callback && callback(filter);
            return filter;
          };
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.ColorMatrix = createClass(filters.BaseFilter, {
              type: "ColorMatrix",
              fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",
              matrix: [
                1,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
                0,
                0,
                0,
                0,
                1,
                0
              ],
              mainParameter: "matrix",
              colorsOnly: true,
              initialize: function(options) {
                this.callSuper("initialize", options);
                this.matrix = this.matrix.slice(0);
              },
              applyTo2d: function(options) {
                var imageData = options.imageData, data = imageData.data, iLen = data.length, m = this.matrix, r, g, b, a, i, colorsOnly = this.colorsOnly;
                for (i = 0; i < iLen; i += 4) {
                  r = data[i];
                  g = data[i + 1];
                  b = data[i + 2];
                  if (colorsOnly) {
                    data[i] = r * m[0] + g * m[1] + b * m[2] + m[4] * 255;
                    data[i + 1] = r * m[5] + g * m[6] + b * m[7] + m[9] * 255;
                    data[i + 2] = r * m[10] + g * m[11] + b * m[12] + m[14] * 255;
                  } else {
                    a = data[i + 3];
                    data[i] = r * m[0] + g * m[1] + b * m[2] + a * m[3] + m[4] * 255;
                    data[i + 1] = r * m[5] + g * m[6] + b * m[7] + a * m[8] + m[9] * 255;
                    data[i + 2] = r * m[10] + g * m[11] + b * m[12] + a * m[13] + m[14] * 255;
                    data[i + 3] = r * m[15] + g * m[16] + b * m[17] + a * m[18] + m[19] * 255;
                  }
                }
              },
              getUniformLocations: function(gl, program) {
                return {
                  uColorMatrix: gl.getUniformLocation(program, "uColorMatrix"),
                  uConstants: gl.getUniformLocation(program, "uConstants")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                var m = this.matrix, matrix = [
                  m[0],
                  m[1],
                  m[2],
                  m[3],
                  m[5],
                  m[6],
                  m[7],
                  m[8],
                  m[10],
                  m[11],
                  m[12],
                  m[13],
                  m[15],
                  m[16],
                  m[17],
                  m[18]
                ], constants = [m[4], m[9], m[14], m[19]];
                gl.uniformMatrix4fv(uniformLocations.uColorMatrix, false, matrix);
                gl.uniform4fv(uniformLocations.uConstants, constants);
              }
            });
            fabric2.Image.filters.ColorMatrix.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.Brightness = createClass(filters.BaseFilter, {
              type: "Brightness",
              fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",
              brightness: 0,
              mainParameter: "brightness",
              applyTo2d: function(options) {
                if (this.brightness === 0) {
                  return;
                }
                var imageData = options.imageData, data = imageData.data, i, len = data.length, brightness = Math.round(this.brightness * 255);
                for (i = 0; i < len; i += 4) {
                  data[i] = data[i] + brightness;
                  data[i + 1] = data[i + 1] + brightness;
                  data[i + 2] = data[i + 2] + brightness;
                }
              },
              getUniformLocations: function(gl, program) {
                return {
                  uBrightness: gl.getUniformLocation(program, "uBrightness")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                gl.uniform1f(uniformLocations.uBrightness, this.brightness);
              }
            });
            fabric2.Image.filters.Brightness.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), extend = fabric2.util.object.extend, filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.Convolute = createClass(filters.BaseFilter, {
              type: "Convolute",
              opaque: false,
              matrix: [0, 0, 0, 0, 1, 0, 0, 0, 0],
              fragmentSource: {
                Convolute_3_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                Convolute_3_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                Convolute_5_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                Convolute_5_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                Convolute_7_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                Convolute_7_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",
                Convolute_9_1: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",
                Convolute_9_0: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"
              },
              retrieveShader: function(options) {
                var size = Math.sqrt(this.matrix.length);
                var cacheKey = this.type + "_" + size + "_" + (this.opaque ? 1 : 0);
                var shaderSource = this.fragmentSource[cacheKey];
                if (!options.programCache.hasOwnProperty(cacheKey)) {
                  options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);
                }
                return options.programCache[cacheKey];
              },
              applyTo2d: function(options) {
                var imageData = options.imageData, data = imageData.data, weights = this.matrix, side = Math.round(Math.sqrt(weights.length)), halfSide = Math.floor(side / 2), sw = imageData.width, sh = imageData.height, output = options.ctx.createImageData(sw, sh), dst = output.data, alphaFac = this.opaque ? 1 : 0, r, g, b, a, dstOff, scx, scy, srcOff, wt, x, y, cx, cy;
                for (y = 0; y < sh; y++) {
                  for (x = 0; x < sw; x++) {
                    dstOff = (y * sw + x) * 4;
                    r = 0;
                    g = 0;
                    b = 0;
                    a = 0;
                    for (cy = 0; cy < side; cy++) {
                      for (cx = 0; cx < side; cx++) {
                        scy = y + cy - halfSide;
                        scx = x + cx - halfSide;
                        if (scy < 0 || scy >= sh || scx < 0 || scx >= sw) {
                          continue;
                        }
                        srcOff = (scy * sw + scx) * 4;
                        wt = weights[cy * side + cx];
                        r += data[srcOff] * wt;
                        g += data[srcOff + 1] * wt;
                        b += data[srcOff + 2] * wt;
                        if (!alphaFac) {
                          a += data[srcOff + 3] * wt;
                        }
                      }
                    }
                    dst[dstOff] = r;
                    dst[dstOff + 1] = g;
                    dst[dstOff + 2] = b;
                    if (!alphaFac) {
                      dst[dstOff + 3] = a;
                    } else {
                      dst[dstOff + 3] = data[dstOff + 3];
                    }
                  }
                }
                options.imageData = output;
              },
              getUniformLocations: function(gl, program) {
                return {
                  uMatrix: gl.getUniformLocation(program, "uMatrix"),
                  uOpaque: gl.getUniformLocation(program, "uOpaque"),
                  uHalfSize: gl.getUniformLocation(program, "uHalfSize"),
                  uSize: gl.getUniformLocation(program, "uSize")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                gl.uniform1fv(uniformLocations.uMatrix, this.matrix);
              },
              toObject: function() {
                return extend(this.callSuper("toObject"), {
                  opaque: this.opaque,
                  matrix: this.matrix
                });
              }
            });
            fabric2.Image.filters.Convolute.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.Grayscale = createClass(filters.BaseFilter, {
              type: "Grayscale",
              fragmentSource: {
                average: "precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",
                lightness: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",
                luminosity: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"
              },
              mode: "average",
              mainParameter: "mode",
              applyTo2d: function(options) {
                var imageData = options.imageData, data = imageData.data, i, len = data.length, value, mode = this.mode;
                for (i = 0; i < len; i += 4) {
                  if (mode === "average") {
                    value = (data[i] + data[i + 1] + data[i + 2]) / 3;
                  } else if (mode === "lightness") {
                    value = (Math.min(data[i], data[i + 1], data[i + 2]) + Math.max(data[i], data[i + 1], data[i + 2])) / 2;
                  } else if (mode === "luminosity") {
                    value = 0.21 * data[i] + 0.72 * data[i + 1] + 0.07 * data[i + 2];
                  }
                  data[i] = value;
                  data[i + 1] = value;
                  data[i + 2] = value;
                }
              },
              retrieveShader: function(options) {
                var cacheKey = this.type + "_" + this.mode;
                if (!options.programCache.hasOwnProperty(cacheKey)) {
                  var shaderSource = this.fragmentSource[this.mode];
                  options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);
                }
                return options.programCache[cacheKey];
              },
              getUniformLocations: function(gl, program) {
                return {
                  uMode: gl.getUniformLocation(program, "uMode")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                var mode = 1;
                gl.uniform1i(uniformLocations.uMode, mode);
              },
              isNeutralState: function() {
                return false;
              }
            });
            fabric2.Image.filters.Grayscale.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.Invert = createClass(filters.BaseFilter, {
              type: "Invert",
              fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",
              invert: true,
              mainParameter: "invert",
              applyTo2d: function(options) {
                var imageData = options.imageData, data = imageData.data, i, len = data.length;
                for (i = 0; i < len; i += 4) {
                  data[i] = 255 - data[i];
                  data[i + 1] = 255 - data[i + 1];
                  data[i + 2] = 255 - data[i + 2];
                }
              },
              isNeutralState: function() {
                return !this.invert;
              },
              getUniformLocations: function(gl, program) {
                return {
                  uInvert: gl.getUniformLocation(program, "uInvert")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                gl.uniform1i(uniformLocations.uInvert, this.invert);
              }
            });
            fabric2.Image.filters.Invert.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), extend = fabric2.util.object.extend, filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.Noise = createClass(filters.BaseFilter, {
              type: "Noise",
              fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",
              mainParameter: "noise",
              noise: 0,
              applyTo2d: function(options) {
                if (this.noise === 0) {
                  return;
                }
                var imageData = options.imageData, data = imageData.data, i, len = data.length, noise = this.noise, rand;
                for (i = 0, len = data.length; i < len; i += 4) {
                  rand = (0.5 - Math.random()) * noise;
                  data[i] += rand;
                  data[i + 1] += rand;
                  data[i + 2] += rand;
                }
              },
              getUniformLocations: function(gl, program) {
                return {
                  uNoise: gl.getUniformLocation(program, "uNoise"),
                  uSeed: gl.getUniformLocation(program, "uSeed")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                gl.uniform1f(uniformLocations.uNoise, this.noise / 255);
                gl.uniform1f(uniformLocations.uSeed, Math.random());
              },
              toObject: function() {
                return extend(this.callSuper("toObject"), {
                  noise: this.noise
                });
              }
            });
            fabric2.Image.filters.Noise.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.Pixelate = createClass(filters.BaseFilter, {
              type: "Pixelate",
              blocksize: 4,
              mainParameter: "blocksize",
              fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",
              applyTo2d: function(options) {
                var imageData = options.imageData, data = imageData.data, iLen = imageData.height, jLen = imageData.width, index, i, j, r, g, b, a, _i, _j, _iLen, _jLen;
                for (i = 0; i < iLen; i += this.blocksize) {
                  for (j = 0; j < jLen; j += this.blocksize) {
                    index = i * 4 * jLen + j * 4;
                    r = data[index];
                    g = data[index + 1];
                    b = data[index + 2];
                    a = data[index + 3];
                    _iLen = Math.min(i + this.blocksize, iLen);
                    _jLen = Math.min(j + this.blocksize, jLen);
                    for (_i = i; _i < _iLen; _i++) {
                      for (_j = j; _j < _jLen; _j++) {
                        index = _i * 4 * jLen + _j * 4;
                        data[index] = r;
                        data[index + 1] = g;
                        data[index + 2] = b;
                        data[index + 3] = a;
                      }
                    }
                  }
                }
              },
              isNeutralState: function() {
                return this.blocksize === 1;
              },
              getUniformLocations: function(gl, program) {
                return {
                  uBlocksize: gl.getUniformLocation(program, "uBlocksize"),
                  uStepW: gl.getUniformLocation(program, "uStepW"),
                  uStepH: gl.getUniformLocation(program, "uStepH")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                gl.uniform1f(uniformLocations.uBlocksize, this.blocksize);
              }
            });
            fabric2.Image.filters.Pixelate.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), extend = fabric2.util.object.extend, filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.RemoveColor = createClass(filters.BaseFilter, {
              type: "RemoveColor",
              color: "#FFFFFF",
              fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",
              distance: 0.02,
              useAlpha: false,
              applyTo2d: function(options) {
                var imageData = options.imageData, data = imageData.data, i, distance = this.distance * 255, r, g, b, source = new fabric2.Color(this.color).getSource(), lowC = [
                  source[0] - distance,
                  source[1] - distance,
                  source[2] - distance
                ], highC = [
                  source[0] + distance,
                  source[1] + distance,
                  source[2] + distance
                ];
                for (i = 0; i < data.length; i += 4) {
                  r = data[i];
                  g = data[i + 1];
                  b = data[i + 2];
                  if (r > lowC[0] && g > lowC[1] && b > lowC[2] && r < highC[0] && g < highC[1] && b < highC[2]) {
                    data[i + 3] = 0;
                  }
                }
              },
              getUniformLocations: function(gl, program) {
                return {
                  uLow: gl.getUniformLocation(program, "uLow"),
                  uHigh: gl.getUniformLocation(program, "uHigh")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                var source = new fabric2.Color(this.color).getSource(), distance = parseFloat(this.distance), lowC = [
                  0 + source[0] / 255 - distance,
                  0 + source[1] / 255 - distance,
                  0 + source[2] / 255 - distance,
                  1
                ], highC = [
                  source[0] / 255 + distance,
                  source[1] / 255 + distance,
                  source[2] / 255 + distance,
                  1
                ];
                gl.uniform4fv(uniformLocations.uLow, lowC);
                gl.uniform4fv(uniformLocations.uHigh, highC);
              },
              toObject: function() {
                return extend(this.callSuper("toObject"), {
                  color: this.color,
                  distance: this.distance
                });
              }
            });
            fabric2.Image.filters.RemoveColor.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            var matrices = {
              Brownie: [
                0.5997,
                0.34553,
                -0.27082,
                0,
                0.186,
                -0.0377,
                0.86095,
                0.15059,
                0,
                -0.1449,
                0.24113,
                -0.07441,
                0.44972,
                0,
                -0.02965,
                0,
                0,
                0,
                1,
                0
              ],
              Vintage: [
                0.62793,
                0.32021,
                -0.03965,
                0,
                0.03784,
                0.02578,
                0.64411,
                0.03259,
                0,
                0.02926,
                0.0466,
                -0.08512,
                0.52416,
                0,
                0.02023,
                0,
                0,
                0,
                1,
                0
              ],
              Kodachrome: [
                1.12855,
                -0.39673,
                -0.03992,
                0,
                0.24991,
                -0.16404,
                1.08352,
                -0.05498,
                0,
                0.09698,
                -0.16786,
                -0.56034,
                1.60148,
                0,
                0.13972,
                0,
                0,
                0,
                1,
                0
              ],
              Technicolor: [
                1.91252,
                -0.85453,
                -0.09155,
                0,
                0.04624,
                -0.30878,
                1.76589,
                -0.10601,
                0,
                -0.27589,
                -0.2311,
                -0.75018,
                1.84759,
                0,
                0.12137,
                0,
                0,
                0,
                1,
                0
              ],
              Polaroid: [
                1.438,
                -0.062,
                -0.062,
                0,
                0,
                -0.122,
                1.378,
                -0.122,
                0,
                0,
                -0.016,
                -0.016,
                1.483,
                0,
                0,
                0,
                0,
                0,
                1,
                0
              ],
              Sepia: [
                0.393,
                0.769,
                0.189,
                0,
                0,
                0.349,
                0.686,
                0.168,
                0,
                0,
                0.272,
                0.534,
                0.131,
                0,
                0,
                0,
                0,
                0,
                1,
                0
              ],
              BlackWhite: [
                1.5,
                1.5,
                1.5,
                0,
                -1,
                1.5,
                1.5,
                1.5,
                0,
                -1,
                1.5,
                1.5,
                1.5,
                0,
                -1,
                0,
                0,
                0,
                1,
                0
              ]
            };
            for (var key in matrices) {
              filters[key] = createClass(filters.ColorMatrix, {
                type: key,
                matrix: matrices[key],
                mainParameter: false,
                colorsOnly: true
              });
              fabric2.Image.filters[key].fromObject = fabric2.Image.filters.BaseFilter.fromObject;
            }
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric, filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.BlendColor = createClass(filters.BaseFilter, {
              type: "BlendColor",
              color: "#F95C63",
              mode: "multiply",
              alpha: 1,
              fragmentSource: {
                multiply: "gl_FragColor.rgb *= uColor.rgb;\n",
                screen: "gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",
                add: "gl_FragColor.rgb += uColor.rgb;\n",
                diff: "gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",
                subtract: "gl_FragColor.rgb -= uColor.rgb;\n",
                lighten: "gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",
                darken: "gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",
                exclusion: "gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",
                overlay: "if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",
                tint: "gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"
              },
              buildSource: function(mode) {
                return "precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n" + this.fragmentSource[mode] + "}\n}";
              },
              retrieveShader: function(options) {
                var cacheKey = this.type + "_" + this.mode, shaderSource;
                if (!options.programCache.hasOwnProperty(cacheKey)) {
                  shaderSource = this.buildSource(this.mode);
                  options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);
                }
                return options.programCache[cacheKey];
              },
              applyTo2d: function(options) {
                var imageData = options.imageData, data = imageData.data, iLen = data.length, tr, tg, tb, r, g, b, source, alpha1 = 1 - this.alpha;
                source = new fabric2.Color(this.color).getSource();
                tr = source[0] * this.alpha;
                tg = source[1] * this.alpha;
                tb = source[2] * this.alpha;
                for (var i = 0; i < iLen; i += 4) {
                  r = data[i];
                  g = data[i + 1];
                  b = data[i + 2];
                  switch (this.mode) {
                    case "multiply":
                      data[i] = r * tr / 255;
                      data[i + 1] = g * tg / 255;
                      data[i + 2] = b * tb / 255;
                      break;
                    case "screen":
                      data[i] = 255 - (255 - r) * (255 - tr) / 255;
                      data[i + 1] = 255 - (255 - g) * (255 - tg) / 255;
                      data[i + 2] = 255 - (255 - b) * (255 - tb) / 255;
                      break;
                    case "add":
                      data[i] = r + tr;
                      data[i + 1] = g + tg;
                      data[i + 2] = b + tb;
                      break;
                    case "diff":
                    case "difference":
                      data[i] = Math.abs(r - tr);
                      data[i + 1] = Math.abs(g - tg);
                      data[i + 2] = Math.abs(b - tb);
                      break;
                    case "subtract":
                      data[i] = r - tr;
                      data[i + 1] = g - tg;
                      data[i + 2] = b - tb;
                      break;
                    case "darken":
                      data[i] = Math.min(r, tr);
                      data[i + 1] = Math.min(g, tg);
                      data[i + 2] = Math.min(b, tb);
                      break;
                    case "lighten":
                      data[i] = Math.max(r, tr);
                      data[i + 1] = Math.max(g, tg);
                      data[i + 2] = Math.max(b, tb);
                      break;
                    case "overlay":
                      data[i] = tr < 128 ? 2 * r * tr / 255 : 255 - 2 * (255 - r) * (255 - tr) / 255;
                      data[i + 1] = tg < 128 ? 2 * g * tg / 255 : 255 - 2 * (255 - g) * (255 - tg) / 255;
                      data[i + 2] = tb < 128 ? 2 * b * tb / 255 : 255 - 2 * (255 - b) * (255 - tb) / 255;
                      break;
                    case "exclusion":
                      data[i] = tr + r - 2 * tr * r / 255;
                      data[i + 1] = tg + g - 2 * tg * g / 255;
                      data[i + 2] = tb + b - 2 * tb * b / 255;
                      break;
                    case "tint":
                      data[i] = tr + r * alpha1;
                      data[i + 1] = tg + g * alpha1;
                      data[i + 2] = tb + b * alpha1;
                  }
                }
              },
              getUniformLocations: function(gl, program) {
                return {
                  uColor: gl.getUniformLocation(program, "uColor")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                var source = new fabric2.Color(this.color).getSource();
                source[0] = this.alpha * source[0] / 255;
                source[1] = this.alpha * source[1] / 255;
                source[2] = this.alpha * source[2] / 255;
                source[3] = this.alpha;
                gl.uniform4fv(uniformLocations.uColor, source);
              },
              toObject: function() {
                return {
                  type: this.type,
                  color: this.color,
                  mode: this.mode,
                  alpha: this.alpha
                };
              }
            });
            fabric2.Image.filters.BlendColor.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric, filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.BlendImage = createClass(filters.BaseFilter, {
              type: "BlendImage",
              image: null,
              mode: "multiply",
              alpha: 1,
              vertexSource: "attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",
              fragmentSource: {
                multiply: "precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",
                mask: "precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"
              },
              retrieveShader: function(options) {
                var cacheKey = this.type + "_" + this.mode;
                var shaderSource = this.fragmentSource[this.mode];
                if (!options.programCache.hasOwnProperty(cacheKey)) {
                  options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);
                }
                return options.programCache[cacheKey];
              },
              applyToWebGL: function(options) {
                var gl = options.context, texture = this.createTexture(options.filterBackend, this.image);
                this.bindAdditionalTexture(gl, texture, gl.TEXTURE1);
                this.callSuper("applyToWebGL", options);
                this.unbindAdditionalTexture(gl, gl.TEXTURE1);
              },
              createTexture: function(backend, image) {
                return backend.getCachedTexture(image.cacheKey, image._element);
              },
              calculateMatrix: function() {
                var image = this.image, width = image._element.width, height = image._element.height;
                return [
                  1 / image.scaleX,
                  0,
                  0,
                  0,
                  1 / image.scaleY,
                  0,
                  -image.left / width,
                  -image.top / height,
                  1
                ];
              },
              applyTo2d: function(options) {
                var imageData = options.imageData, resources = options.filterBackend.resources, data = imageData.data, iLen = data.length, width = imageData.width, height = imageData.height, tr, tg, tb, ta, r, g, b, a, canvas1, context, image = this.image, blendData;
                if (!resources.blendImage) {
                  resources.blendImage = fabric2.util.createCanvasElement();
                }
                canvas1 = resources.blendImage;
                context = canvas1.getContext("2d");
                if (canvas1.width !== width || canvas1.height !== height) {
                  canvas1.width = width;
                  canvas1.height = height;
                } else {
                  context.clearRect(0, 0, width, height);
                }
                context.setTransform(image.scaleX, 0, 0, image.scaleY, image.left, image.top);
                context.drawImage(image._element, 0, 0, width, height);
                blendData = context.getImageData(0, 0, width, height).data;
                for (var i = 0; i < iLen; i += 4) {
                  r = data[i];
                  g = data[i + 1];
                  b = data[i + 2];
                  a = data[i + 3];
                  tr = blendData[i];
                  tg = blendData[i + 1];
                  tb = blendData[i + 2];
                  ta = blendData[i + 3];
                  switch (this.mode) {
                    case "multiply":
                      data[i] = r * tr / 255;
                      data[i + 1] = g * tg / 255;
                      data[i + 2] = b * tb / 255;
                      data[i + 3] = a * ta / 255;
                      break;
                    case "mask":
                      data[i + 3] = ta;
                      break;
                  }
                }
              },
              getUniformLocations: function(gl, program) {
                return {
                  uTransformMatrix: gl.getUniformLocation(program, "uTransformMatrix"),
                  uImage: gl.getUniformLocation(program, "uImage")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                var matrix = this.calculateMatrix();
                gl.uniform1i(uniformLocations.uImage, 1);
                gl.uniformMatrix3fv(uniformLocations.uTransformMatrix, false, matrix);
              },
              toObject: function() {
                return {
                  type: this.type,
                  image: this.image && this.image.toObject(),
                  mode: this.mode,
                  alpha: this.alpha
                };
              }
            });
            fabric2.Image.filters.BlendImage.fromObject = function(object, callback) {
              fabric2.Image.fromObject(object.image, function(image) {
                var options = fabric2.util.object.clone(object);
                options.image = image;
                callback(new fabric2.Image.filters.BlendImage(options));
              });
            };
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), pow = Math.pow, floor = Math.floor, sqrt = Math.sqrt, abs = Math.abs, round = Math.round, sin = Math.sin, ceil = Math.ceil, filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.Resize = createClass(filters.BaseFilter, {
              type: "Resize",
              resizeType: "hermite",
              scaleX: 1,
              scaleY: 1,
              lanczosLobes: 3,
              getUniformLocations: function(gl, program) {
                return {
                  uDelta: gl.getUniformLocation(program, "uDelta"),
                  uTaps: gl.getUniformLocation(program, "uTaps")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                gl.uniform2fv(uniformLocations.uDelta, this.horizontal ? [1 / this.width, 0] : [0, 1 / this.height]);
                gl.uniform1fv(uniformLocations.uTaps, this.taps);
              },
              retrieveShader: function(options) {
                var filterWindow = this.getFilterWindow(), cacheKey = this.type + "_" + filterWindow;
                if (!options.programCache.hasOwnProperty(cacheKey)) {
                  var fragmentShader = this.generateShader(filterWindow);
                  options.programCache[cacheKey] = this.createProgram(options.context, fragmentShader);
                }
                return options.programCache[cacheKey];
              },
              getFilterWindow: function() {
                var scale = this.tempScale;
                return Math.ceil(this.lanczosLobes / scale);
              },
              getTaps: function() {
                var lobeFunction = this.lanczosCreate(this.lanczosLobes), scale = this.tempScale, filterWindow = this.getFilterWindow(), taps = new Array(filterWindow);
                for (var i = 1; i <= filterWindow; i++) {
                  taps[i - 1] = lobeFunction(i * scale);
                }
                return taps;
              },
              generateShader: function(filterWindow) {
                var offsets = new Array(filterWindow), fragmentShader = this.fragmentSourceTOP, filterWindow;
                for (var i = 1; i <= filterWindow; i++) {
                  offsets[i - 1] = i + ".0 * uDelta";
                }
                fragmentShader += "uniform float uTaps[" + filterWindow + "];\n";
                fragmentShader += "void main() {\n";
                fragmentShader += "  vec4 color = texture2D(uTexture, vTexCoord);\n";
                fragmentShader += "  float sum = 1.0;\n";
                offsets.forEach(function(offset, i2) {
                  fragmentShader += "  color += texture2D(uTexture, vTexCoord + " + offset + ") * uTaps[" + i2 + "];\n";
                  fragmentShader += "  color += texture2D(uTexture, vTexCoord - " + offset + ") * uTaps[" + i2 + "];\n";
                  fragmentShader += "  sum += 2.0 * uTaps[" + i2 + "];\n";
                });
                fragmentShader += "  gl_FragColor = color / sum;\n";
                fragmentShader += "}";
                return fragmentShader;
              },
              fragmentSourceTOP: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",
              applyTo: function(options) {
                if (options.webgl) {
                  options.passes++;
                  this.width = options.sourceWidth;
                  this.horizontal = true;
                  this.dW = Math.round(this.width * this.scaleX);
                  this.dH = options.sourceHeight;
                  this.tempScale = this.dW / this.width;
                  this.taps = this.getTaps();
                  options.destinationWidth = this.dW;
                  this._setupFrameBuffer(options);
                  this.applyToWebGL(options);
                  this._swapTextures(options);
                  options.sourceWidth = options.destinationWidth;
                  this.height = options.sourceHeight;
                  this.horizontal = false;
                  this.dH = Math.round(this.height * this.scaleY);
                  this.tempScale = this.dH / this.height;
                  this.taps = this.getTaps();
                  options.destinationHeight = this.dH;
                  this._setupFrameBuffer(options);
                  this.applyToWebGL(options);
                  this._swapTextures(options);
                  options.sourceHeight = options.destinationHeight;
                } else {
                  this.applyTo2d(options);
                }
              },
              isNeutralState: function() {
                return this.scaleX === 1 && this.scaleY === 1;
              },
              lanczosCreate: function(lobes) {
                return function(x) {
                  if (x >= lobes || x <= -lobes) {
                    return 0;
                  }
                  if (x < 11920929e-14 && x > -11920929e-14) {
                    return 1;
                  }
                  x *= Math.PI;
                  var xx = x / lobes;
                  return sin(x) / x * sin(xx) / xx;
                };
              },
              applyTo2d: function(options) {
                var imageData = options.imageData, scaleX = this.scaleX, scaleY = this.scaleY;
                this.rcpScaleX = 1 / scaleX;
                this.rcpScaleY = 1 / scaleY;
                var oW = imageData.width, oH = imageData.height, dW = round(oW * scaleX), dH = round(oH * scaleY), newData;
                if (this.resizeType === "sliceHack") {
                  newData = this.sliceByTwo(options, oW, oH, dW, dH);
                } else if (this.resizeType === "hermite") {
                  newData = this.hermiteFastResize(options, oW, oH, dW, dH);
                } else if (this.resizeType === "bilinear") {
                  newData = this.bilinearFiltering(options, oW, oH, dW, dH);
                } else if (this.resizeType === "lanczos") {
                  newData = this.lanczosResize(options, oW, oH, dW, dH);
                }
                options.imageData = newData;
              },
              sliceByTwo: function(options, oW, oH, dW, dH) {
                var imageData = options.imageData, mult = 0.5, doneW = false, doneH = false, stepW = oW * mult, stepH = oH * mult, resources = fabric2.filterBackend.resources, tmpCanvas, ctx, sX = 0, sY = 0, dX = oW, dY = 0;
                if (!resources.sliceByTwo) {
                  resources.sliceByTwo = document.createElement("canvas");
                }
                tmpCanvas = resources.sliceByTwo;
                if (tmpCanvas.width < oW * 1.5 || tmpCanvas.height < oH) {
                  tmpCanvas.width = oW * 1.5;
                  tmpCanvas.height = oH;
                }
                ctx = tmpCanvas.getContext("2d");
                ctx.clearRect(0, 0, oW * 1.5, oH);
                ctx.putImageData(imageData, 0, 0);
                dW = floor(dW);
                dH = floor(dH);
                while (!doneW || !doneH) {
                  oW = stepW;
                  oH = stepH;
                  if (dW < floor(stepW * mult)) {
                    stepW = floor(stepW * mult);
                  } else {
                    stepW = dW;
                    doneW = true;
                  }
                  if (dH < floor(stepH * mult)) {
                    stepH = floor(stepH * mult);
                  } else {
                    stepH = dH;
                    doneH = true;
                  }
                  ctx.drawImage(tmpCanvas, sX, sY, oW, oH, dX, dY, stepW, stepH);
                  sX = dX;
                  sY = dY;
                  dY += stepH;
                }
                return ctx.getImageData(sX, sY, dW, dH);
              },
              lanczosResize: function(options, oW, oH, dW, dH) {
                function process(u) {
                  var v, i, weight, idx, a, red, green, blue, alpha, fX, fY;
                  center.x = (u + 0.5) * ratioX;
                  icenter.x = floor(center.x);
                  for (v = 0; v < dH; v++) {
                    center.y = (v + 0.5) * ratioY;
                    icenter.y = floor(center.y);
                    a = 0;
                    red = 0;
                    green = 0;
                    blue = 0;
                    alpha = 0;
                    for (i = icenter.x - range2X; i <= icenter.x + range2X; i++) {
                      if (i < 0 || i >= oW) {
                        continue;
                      }
                      fX = floor(1e3 * abs(i - center.x));
                      if (!cacheLanc[fX]) {
                        cacheLanc[fX] = {};
                      }
                      for (var j = icenter.y - range2Y; j <= icenter.y + range2Y; j++) {
                        if (j < 0 || j >= oH) {
                          continue;
                        }
                        fY = floor(1e3 * abs(j - center.y));
                        if (!cacheLanc[fX][fY]) {
                          cacheLanc[fX][fY] = lanczos(sqrt(pow(fX * rcpRatioX, 2) + pow(fY * rcpRatioY, 2)) / 1e3);
                        }
                        weight = cacheLanc[fX][fY];
                        if (weight > 0) {
                          idx = (j * oW + i) * 4;
                          a += weight;
                          red += weight * srcData[idx];
                          green += weight * srcData[idx + 1];
                          blue += weight * srcData[idx + 2];
                          alpha += weight * srcData[idx + 3];
                        }
                      }
                    }
                    idx = (v * dW + u) * 4;
                    destData[idx] = red / a;
                    destData[idx + 1] = green / a;
                    destData[idx + 2] = blue / a;
                    destData[idx + 3] = alpha / a;
                  }
                  if (++u < dW) {
                    return process(u);
                  } else {
                    return destImg;
                  }
                }
                var srcData = options.imageData.data, destImg = options.ctx.createImageData(dW, dH), destData = destImg.data, lanczos = this.lanczosCreate(this.lanczosLobes), ratioX = this.rcpScaleX, ratioY = this.rcpScaleY, rcpRatioX = 2 / this.rcpScaleX, rcpRatioY = 2 / this.rcpScaleY, range2X = ceil(ratioX * this.lanczosLobes / 2), range2Y = ceil(ratioY * this.lanczosLobes / 2), cacheLanc = {}, center = {}, icenter = {};
                return process(0);
              },
              bilinearFiltering: function(options, oW, oH, dW, dH) {
                var a, b, c, d, x, y, i, j, xDiff, yDiff, chnl, color, offset = 0, origPix, ratioX = this.rcpScaleX, ratioY = this.rcpScaleY, w4 = 4 * (oW - 1), img = options.imageData, pixels = img.data, destImage = options.ctx.createImageData(dW, dH), destPixels = destImage.data;
                for (i = 0; i < dH; i++) {
                  for (j = 0; j < dW; j++) {
                    x = floor(ratioX * j);
                    y = floor(ratioY * i);
                    xDiff = ratioX * j - x;
                    yDiff = ratioY * i - y;
                    origPix = 4 * (y * oW + x);
                    for (chnl = 0; chnl < 4; chnl++) {
                      a = pixels[origPix + chnl];
                      b = pixels[origPix + 4 + chnl];
                      c = pixels[origPix + w4 + chnl];
                      d = pixels[origPix + w4 + 4 + chnl];
                      color = a * (1 - xDiff) * (1 - yDiff) + b * xDiff * (1 - yDiff) + c * yDiff * (1 - xDiff) + d * xDiff * yDiff;
                      destPixels[offset++] = color;
                    }
                  }
                }
                return destImage;
              },
              hermiteFastResize: function(options, oW, oH, dW, dH) {
                var ratioW = this.rcpScaleX, ratioH = this.rcpScaleY, ratioWHalf = ceil(ratioW / 2), ratioHHalf = ceil(ratioH / 2), img = options.imageData, data = img.data, img2 = options.ctx.createImageData(dW, dH), data2 = img2.data;
                for (var j = 0; j < dH; j++) {
                  for (var i = 0; i < dW; i++) {
                    var x2 = (i + j * dW) * 4, weight = 0, weights = 0, weightsAlpha = 0, gxR = 0, gxG = 0, gxB = 0, gxA = 0, centerY = (j + 0.5) * ratioH;
                    for (var yy = floor(j * ratioH); yy < (j + 1) * ratioH; yy++) {
                      var dy = abs(centerY - (yy + 0.5)) / ratioHHalf, centerX = (i + 0.5) * ratioW, w0 = dy * dy;
                      for (var xx = floor(i * ratioW); xx < (i + 1) * ratioW; xx++) {
                        var dx = abs(centerX - (xx + 0.5)) / ratioWHalf, w = sqrt(w0 + dx * dx);
                        if (w > 1 && w < -1) {
                          continue;
                        }
                        weight = 2 * w * w * w - 3 * w * w + 1;
                        if (weight > 0) {
                          dx = 4 * (xx + yy * oW);
                          gxA += weight * data[dx + 3];
                          weightsAlpha += weight;
                          if (data[dx + 3] < 255) {
                            weight = weight * data[dx + 3] / 250;
                          }
                          gxR += weight * data[dx];
                          gxG += weight * data[dx + 1];
                          gxB += weight * data[dx + 2];
                          weights += weight;
                        }
                      }
                    }
                    data2[x2] = gxR / weights;
                    data2[x2 + 1] = gxG / weights;
                    data2[x2 + 2] = gxB / weights;
                    data2[x2 + 3] = gxA / weightsAlpha;
                  }
                }
                return img2;
              },
              toObject: function() {
                return {
                  type: this.type,
                  scaleX: this.scaleX,
                  scaleY: this.scaleY,
                  resizeType: this.resizeType,
                  lanczosLobes: this.lanczosLobes
                };
              }
            });
            fabric2.Image.filters.Resize.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.Contrast = createClass(filters.BaseFilter, {
              type: "Contrast",
              fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",
              contrast: 0,
              mainParameter: "contrast",
              applyTo2d: function(options) {
                if (this.contrast === 0) {
                  return;
                }
                var imageData = options.imageData, i, len, data = imageData.data, len = data.length, contrast = Math.floor(this.contrast * 255), contrastF = 259 * (contrast + 255) / (255 * (259 - contrast));
                for (i = 0; i < len; i += 4) {
                  data[i] = contrastF * (data[i] - 128) + 128;
                  data[i + 1] = contrastF * (data[i + 1] - 128) + 128;
                  data[i + 2] = contrastF * (data[i + 2] - 128) + 128;
                }
              },
              getUniformLocations: function(gl, program) {
                return {
                  uContrast: gl.getUniformLocation(program, "uContrast")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                gl.uniform1f(uniformLocations.uContrast, this.contrast);
              }
            });
            fabric2.Image.filters.Contrast.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.Saturation = createClass(filters.BaseFilter, {
              type: "Saturation",
              fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",
              saturation: 0,
              mainParameter: "saturation",
              applyTo2d: function(options) {
                if (this.saturation === 0) {
                  return;
                }
                var imageData = options.imageData, data = imageData.data, len = data.length, adjust = -this.saturation, i, max;
                for (i = 0; i < len; i += 4) {
                  max = Math.max(data[i], data[i + 1], data[i + 2]);
                  data[i] += max !== data[i] ? (max - data[i]) * adjust : 0;
                  data[i + 1] += max !== data[i + 1] ? (max - data[i + 1]) * adjust : 0;
                  data[i + 2] += max !== data[i + 2] ? (max - data[i + 2]) * adjust : 0;
                }
              },
              getUniformLocations: function(gl, program) {
                return {
                  uSaturation: gl.getUniformLocation(program, "uSaturation")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                gl.uniform1f(uniformLocations.uSaturation, -this.saturation);
              }
            });
            fabric2.Image.filters.Saturation.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.Vibrance = createClass(filters.BaseFilter, {
              type: "Vibrance",
              fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",
              vibrance: 0,
              mainParameter: "vibrance",
              applyTo2d: function(options) {
                if (this.vibrance === 0) {
                  return;
                }
                var imageData = options.imageData, data = imageData.data, len = data.length, adjust = -this.vibrance, i, max, avg, amt;
                for (i = 0; i < len; i += 4) {
                  max = Math.max(data[i], data[i + 1], data[i + 2]);
                  avg = (data[i] + data[i + 1] + data[i + 2]) / 3;
                  amt = Math.abs(max - avg) * 2 / 255 * adjust;
                  data[i] += max !== data[i] ? (max - data[i]) * amt : 0;
                  data[i + 1] += max !== data[i + 1] ? (max - data[i + 1]) * amt : 0;
                  data[i + 2] += max !== data[i + 2] ? (max - data[i + 2]) * amt : 0;
                }
              },
              getUniformLocations: function(gl, program) {
                return {
                  uVibrance: gl.getUniformLocation(program, "uVibrance")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                gl.uniform1f(uniformLocations.uVibrance, -this.vibrance);
              }
            });
            fabric2.Image.filters.Vibrance.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.Blur = createClass(filters.BaseFilter, {
              type: "Blur",
              fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",
              blur: 0,
              mainParameter: "blur",
              applyTo: function(options) {
                if (options.webgl) {
                  this.aspectRatio = options.sourceWidth / options.sourceHeight;
                  options.passes++;
                  this._setupFrameBuffer(options);
                  this.horizontal = true;
                  this.applyToWebGL(options);
                  this._swapTextures(options);
                  this._setupFrameBuffer(options);
                  this.horizontal = false;
                  this.applyToWebGL(options);
                  this._swapTextures(options);
                } else {
                  this.applyTo2d(options);
                }
              },
              applyTo2d: function(options) {
                options.imageData = this.simpleBlur(options);
              },
              simpleBlur: function(options) {
                var resources = options.filterBackend.resources, canvas1, canvas2, width = options.imageData.width, height = options.imageData.height;
                if (!resources.blurLayer1) {
                  resources.blurLayer1 = fabric2.util.createCanvasElement();
                  resources.blurLayer2 = fabric2.util.createCanvasElement();
                }
                canvas1 = resources.blurLayer1;
                canvas2 = resources.blurLayer2;
                if (canvas1.width !== width || canvas1.height !== height) {
                  canvas2.width = canvas1.width = width;
                  canvas2.height = canvas1.height = height;
                }
                var ctx1 = canvas1.getContext("2d"), ctx2 = canvas2.getContext("2d"), nSamples = 15, random, percent, j, i, blur = this.blur * 0.06 * 0.5;
                ctx1.putImageData(options.imageData, 0, 0);
                ctx2.clearRect(0, 0, width, height);
                for (i = -nSamples; i <= nSamples; i++) {
                  random = (Math.random() - 0.5) / 4;
                  percent = i / nSamples;
                  j = blur * percent * width + random;
                  ctx2.globalAlpha = 1 - Math.abs(percent);
                  ctx2.drawImage(canvas1, j, random);
                  ctx1.drawImage(canvas2, 0, 0);
                  ctx2.globalAlpha = 1;
                  ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
                }
                for (i = -nSamples; i <= nSamples; i++) {
                  random = (Math.random() - 0.5) / 4;
                  percent = i / nSamples;
                  j = blur * percent * height + random;
                  ctx2.globalAlpha = 1 - Math.abs(percent);
                  ctx2.drawImage(canvas1, random, j);
                  ctx1.drawImage(canvas2, 0, 0);
                  ctx2.globalAlpha = 1;
                  ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
                }
                options.ctx.drawImage(canvas1, 0, 0);
                var newImageData = options.ctx.getImageData(0, 0, canvas1.width, canvas1.height);
                ctx1.globalAlpha = 1;
                ctx1.clearRect(0, 0, canvas1.width, canvas1.height);
                return newImageData;
              },
              getUniformLocations: function(gl, program) {
                return {
                  delta: gl.getUniformLocation(program, "uDelta")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                var delta = this.chooseRightDelta();
                gl.uniform2fv(uniformLocations.delta, delta);
              },
              chooseRightDelta: function() {
                var blurScale = 1, delta = [0, 0], blur;
                if (this.horizontal) {
                  if (this.aspectRatio > 1) {
                    blurScale = 1 / this.aspectRatio;
                  }
                } else {
                  if (this.aspectRatio < 1) {
                    blurScale = this.aspectRatio;
                  }
                }
                blur = blurScale * this.blur * 0.12;
                if (this.horizontal) {
                  delta[0] = blur;
                } else {
                  delta[1] = blur;
                }
                return delta;
              }
            });
            filters.Blur.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.Gamma = createClass(filters.BaseFilter, {
              type: "Gamma",
              fragmentSource: "precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",
              gamma: [1, 1, 1],
              mainParameter: "gamma",
              initialize: function(options) {
                this.gamma = [1, 1, 1];
                filters.BaseFilter.prototype.initialize.call(this, options);
              },
              applyTo2d: function(options) {
                var imageData = options.imageData, data = imageData.data, gamma = this.gamma, len = data.length, rInv = 1 / gamma[0], gInv = 1 / gamma[1], bInv = 1 / gamma[2], i;
                if (!this.rVals) {
                  this.rVals = new Uint8Array(256);
                  this.gVals = new Uint8Array(256);
                  this.bVals = new Uint8Array(256);
                }
                for (i = 0, len = 256; i < len; i++) {
                  this.rVals[i] = Math.pow(i / 255, rInv) * 255;
                  this.gVals[i] = Math.pow(i / 255, gInv) * 255;
                  this.bVals[i] = Math.pow(i / 255, bInv) * 255;
                }
                for (i = 0, len = data.length; i < len; i += 4) {
                  data[i] = this.rVals[data[i]];
                  data[i + 1] = this.gVals[data[i + 1]];
                  data[i + 2] = this.bVals[data[i + 2]];
                }
              },
              getUniformLocations: function(gl, program) {
                return {
                  uGamma: gl.getUniformLocation(program, "uGamma")
                };
              },
              sendUniformData: function(gl, uniformLocations) {
                gl.uniform3fv(uniformLocations.uGamma, this.gamma);
              }
            });
            fabric2.Image.filters.Gamma.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.Composed = createClass(filters.BaseFilter, {
              type: "Composed",
              subFilters: [],
              initialize: function(options) {
                this.callSuper("initialize", options);
                this.subFilters = this.subFilters.slice(0);
              },
              applyTo: function(options) {
                options.passes += this.subFilters.length - 1;
                this.subFilters.forEach(function(filter) {
                  filter.applyTo(options);
                });
              },
              toObject: function() {
                return fabric2.util.object.extend(this.callSuper("toObject"), {
                  subFilters: this.subFilters.map(function(filter) {
                    return filter.toObject();
                  })
                });
              },
              isNeutralState: function() {
                return !this.subFilters.some(function(filter) {
                  return !filter.isNeutralState();
                });
              }
            });
            fabric2.Image.filters.Composed.fromObject = function(object, callback) {
              var filters2 = object.subFilters || [], subFilters = filters2.map(function(filter) {
                return new fabric2.Image.filters[filter.type](filter);
              }), instance = new fabric2.Image.filters.Composed({ subFilters });
              callback && callback(instance);
              return instance;
            };
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), filters = fabric2.Image.filters, createClass = fabric2.util.createClass;
            filters.HueRotation = createClass(filters.ColorMatrix, {
              type: "HueRotation",
              rotation: 0,
              mainParameter: "rotation",
              calculateMatrix: function() {
                var rad = this.rotation * Math.PI, cos = fabric2.util.cos(rad), sin = fabric2.util.sin(rad), aThird = 1 / 3, aThirdSqtSin = Math.sqrt(aThird) * sin, OneMinusCos = 1 - cos;
                this.matrix = [
                  1,
                  0,
                  0,
                  0,
                  0,
                  0,
                  1,
                  0,
                  0,
                  0,
                  0,
                  0,
                  1,
                  0,
                  0,
                  0,
                  0,
                  0,
                  1,
                  0
                ];
                this.matrix[0] = cos + OneMinusCos / 3;
                this.matrix[1] = aThird * OneMinusCos - aThirdSqtSin;
                this.matrix[2] = aThird * OneMinusCos + aThirdSqtSin;
                this.matrix[5] = aThird * OneMinusCos + aThirdSqtSin;
                this.matrix[6] = cos + aThird * OneMinusCos;
                this.matrix[7] = aThird * OneMinusCos - aThirdSqtSin;
                this.matrix[10] = aThird * OneMinusCos - aThirdSqtSin;
                this.matrix[11] = aThird * OneMinusCos + aThirdSqtSin;
                this.matrix[12] = cos + aThird * OneMinusCos;
              },
              isNeutralState: function(options) {
                this.calculateMatrix();
                return filters.BaseFilter.prototype.isNeutralState.call(this, options);
              },
              applyTo: function(options) {
                this.calculateMatrix();
                filters.BaseFilter.prototype.applyTo.call(this, options);
              }
            });
            fabric2.Image.filters.HueRotation.fromObject = fabric2.Image.filters.BaseFilter.fromObject;
          })(exports2);
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {}), clone = fabric2.util.object.clone;
            if (fabric2.Text) {
              fabric2.warn("fabric.Text is already defined");
              return;
            }
            var additionalProps = "fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");
            fabric2.Text = fabric2.util.createClass(fabric2.Object, {
              _dimensionAffectingProps: [
                "fontSize",
                "fontWeight",
                "fontFamily",
                "fontStyle",
                "lineHeight",
                "text",
                "charSpacing",
                "textAlign",
                "styles",
                "path",
                "pathStartOffset",
                "pathSide"
              ],
              _reNewline: /\r?\n/,
              _reSpacesAndTabs: /[ \t\r]/g,
              _reSpaceAndTab: /[ \t\r]/,
              _reWords: /\S+/g,
              type: "text",
              fontSize: 40,
              fontWeight: "normal",
              fontFamily: "Times New Roman",
              underline: false,
              overline: false,
              linethrough: false,
              textAlign: "left",
              fontStyle: "normal",
              lineHeight: 1.16,
              superscript: {
                size: 0.6,
                baseline: -0.35
              },
              subscript: {
                size: 0.6,
                baseline: 0.11
              },
              textBackgroundColor: "",
              stateProperties: fabric2.Object.prototype.stateProperties.concat(additionalProps),
              cacheProperties: fabric2.Object.prototype.cacheProperties.concat(additionalProps),
              stroke: null,
              shadow: null,
              path: null,
              pathStartOffset: 0,
              pathSide: "left",
              _fontSizeFraction: 0.222,
              offsets: {
                underline: 0.1,
                linethrough: -0.315,
                overline: -0.88
              },
              _fontSizeMult: 1.13,
              charSpacing: 0,
              styles: null,
              _measuringContext: null,
              deltaY: 0,
              direction: "ltr",
              _styleProperties: [
                "stroke",
                "strokeWidth",
                "fill",
                "fontFamily",
                "fontSize",
                "fontWeight",
                "fontStyle",
                "underline",
                "overline",
                "linethrough",
                "deltaY",
                "textBackgroundColor"
              ],
              __charBounds: [],
              CACHE_FONT_SIZE: 400,
              MIN_TEXT_WIDTH: 2,
              initialize: function(text, options) {
                this.styles = options ? options.styles || {} : {};
                this.text = text;
                this.__skipDimension = true;
                this.callSuper("initialize", options);
                if (this.path) {
                  this.setPathInfo();
                }
                this.__skipDimension = false;
                this.initDimensions();
                this.setCoords();
                this.setupState({ propertySet: "_dimensionAffectingProps" });
              },
              setPathInfo: function() {
                var path = this.path;
                if (path) {
                  path.segmentsInfo = fabric2.util.getPathSegmentsInfo(path.path);
                }
              },
              getMeasuringContext: function() {
                if (!fabric2._measuringContext) {
                  fabric2._measuringContext = this.canvas && this.canvas.contextCache || fabric2.util.createCanvasElement().getContext("2d");
                }
                return fabric2._measuringContext;
              },
              _splitText: function() {
                var newLines = this._splitTextIntoLines(this.text);
                this.textLines = newLines.lines;
                this._textLines = newLines.graphemeLines;
                this._unwrappedTextLines = newLines._unwrappedLines;
                this._text = newLines.graphemeText;
                return newLines;
              },
              initDimensions: function() {
                if (this.__skipDimension) {
                  return;
                }
                this._splitText();
                this._clearCache();
                if (this.path) {
                  this.width = this.path.width;
                  this.height = this.path.height;
                } else {
                  this.width = this.calcTextWidth() || this.cursorWidth || this.MIN_TEXT_WIDTH;
                  this.height = this.calcTextHeight();
                }
                if (this.textAlign.indexOf("justify") !== -1) {
                  this.enlargeSpaces();
                }
                this.saveState({ propertySet: "_dimensionAffectingProps" });
              },
              enlargeSpaces: function() {
                var diffSpace, currentLineWidth, numberOfSpaces, accumulatedSpace, line, charBound, spaces;
                for (var i = 0, len = this._textLines.length; i < len; i++) {
                  if (this.textAlign !== "justify" && (i === len - 1 || this.isEndOfWrapping(i))) {
                    continue;
                  }
                  accumulatedSpace = 0;
                  line = this._textLines[i];
                  currentLineWidth = this.getLineWidth(i);
                  if (currentLineWidth < this.width && (spaces = this.textLines[i].match(this._reSpacesAndTabs))) {
                    numberOfSpaces = spaces.length;
                    diffSpace = (this.width - currentLineWidth) / numberOfSpaces;
                    for (var j = 0, jlen = line.length; j <= jlen; j++) {
                      charBound = this.__charBounds[i][j];
                      if (this._reSpaceAndTab.test(line[j])) {
                        charBound.width += diffSpace;
                        charBound.kernedWidth += diffSpace;
                        charBound.left += accumulatedSpace;
                        accumulatedSpace += diffSpace;
                      } else {
                        charBound.left += accumulatedSpace;
                      }
                    }
                  }
                }
              },
              isEndOfWrapping: function(lineIndex) {
                return lineIndex === this._textLines.length - 1;
              },
              missingNewlineOffset: function() {
                return 1;
              },
              toString: function() {
                return "#<fabric.Text (" + this.complexity() + '): { "text": "' + this.text + '", "fontFamily": "' + this.fontFamily + '" }>';
              },
              _getCacheCanvasDimensions: function() {
                var dims = this.callSuper("_getCacheCanvasDimensions");
                var fontSize = this.fontSize;
                dims.width += fontSize * dims.zoomX;
                dims.height += fontSize * dims.zoomY;
                return dims;
              },
              _render: function(ctx) {
                var path = this.path;
                path && !path.isNotVisible() && path._render(ctx);
                this._setTextStyles(ctx);
                this._renderTextLinesBackground(ctx);
                this._renderTextDecoration(ctx, "underline");
                this._renderText(ctx);
                this._renderTextDecoration(ctx, "overline");
                this._renderTextDecoration(ctx, "linethrough");
              },
              _renderText: function(ctx) {
                if (this.paintFirst === "stroke") {
                  this._renderTextStroke(ctx);
                  this._renderTextFill(ctx);
                } else {
                  this._renderTextFill(ctx);
                  this._renderTextStroke(ctx);
                }
              },
              _setTextStyles: function(ctx, charStyle, forMeasuring) {
                ctx.textBaseline = "alphabetic";
                ctx.font = this._getFontDeclaration(charStyle, forMeasuring);
              },
              calcTextWidth: function() {
                var maxWidth = this.getLineWidth(0);
                for (var i = 1, len = this._textLines.length; i < len; i++) {
                  var currentLineWidth = this.getLineWidth(i);
                  if (currentLineWidth > maxWidth) {
                    maxWidth = currentLineWidth;
                  }
                }
                return maxWidth;
              },
              _renderTextLine: function(method, ctx, line, left, top, lineIndex) {
                this._renderChars(method, ctx, line, left, top, lineIndex);
              },
              _renderTextLinesBackground: function(ctx) {
                if (!this.textBackgroundColor && !this.styleHas("textBackgroundColor")) {
                  return;
                }
                var heightOfLine, lineLeftOffset, originalFill = ctx.fillStyle, line, lastColor, leftOffset = this._getLeftOffset(), lineTopOffset = this._getTopOffset(), boxStart = 0, boxWidth = 0, charBox, currentColor, path = this.path, drawStart;
                for (var i = 0, len = this._textLines.length; i < len; i++) {
                  heightOfLine = this.getHeightOfLine(i);
                  if (!this.textBackgroundColor && !this.styleHas("textBackgroundColor", i)) {
                    lineTopOffset += heightOfLine;
                    continue;
                  }
                  line = this._textLines[i];
                  lineLeftOffset = this._getLineLeftOffset(i);
                  boxWidth = 0;
                  boxStart = 0;
                  lastColor = this.getValueOfPropertyAt(i, 0, "textBackgroundColor");
                  for (var j = 0, jlen = line.length; j < jlen; j++) {
                    charBox = this.__charBounds[i][j];
                    currentColor = this.getValueOfPropertyAt(i, j, "textBackgroundColor");
                    if (path) {
                      ctx.save();
                      ctx.translate(charBox.renderLeft, charBox.renderTop);
                      ctx.rotate(charBox.angle);
                      ctx.fillStyle = currentColor;
                      currentColor && ctx.fillRect(-charBox.width / 2, -heightOfLine / this.lineHeight * (1 - this._fontSizeFraction), charBox.width, heightOfLine / this.lineHeight);
                      ctx.restore();
                    } else if (currentColor !== lastColor) {
                      drawStart = leftOffset + lineLeftOffset + boxStart;
                      if (this.direction === "rtl") {
                        drawStart = this.width - drawStart - boxWidth;
                      }
                      ctx.fillStyle = lastColor;
                      lastColor && ctx.fillRect(drawStart, lineTopOffset, boxWidth, heightOfLine / this.lineHeight);
                      boxStart = charBox.left;
                      boxWidth = charBox.width;
                      lastColor = currentColor;
                    } else {
                      boxWidth += charBox.kernedWidth;
                    }
                  }
                  if (currentColor && !path) {
                    drawStart = leftOffset + lineLeftOffset + boxStart;
                    if (this.direction === "rtl") {
                      drawStart = this.width - drawStart - boxWidth;
                    }
                    ctx.fillStyle = currentColor;
                    ctx.fillRect(drawStart, lineTopOffset, boxWidth, heightOfLine / this.lineHeight);
                  }
                  lineTopOffset += heightOfLine;
                }
                ctx.fillStyle = originalFill;
                this._removeShadow(ctx);
              },
              getFontCache: function(decl) {
                var fontFamily = decl.fontFamily.toLowerCase();
                if (!fabric2.charWidthsCache[fontFamily]) {
                  fabric2.charWidthsCache[fontFamily] = {};
                }
                var cache = fabric2.charWidthsCache[fontFamily], cacheProp = decl.fontStyle.toLowerCase() + "_" + (decl.fontWeight + "").toLowerCase();
                if (!cache[cacheProp]) {
                  cache[cacheProp] = {};
                }
                return cache[cacheProp];
              },
              _measureChar: function(_char, charStyle, previousChar, prevCharStyle) {
                var fontCache = this.getFontCache(charStyle), fontDeclaration = this._getFontDeclaration(charStyle), previousFontDeclaration = this._getFontDeclaration(prevCharStyle), couple = previousChar + _char, stylesAreEqual = fontDeclaration === previousFontDeclaration, width, coupleWidth, previousWidth, fontMultiplier = charStyle.fontSize / this.CACHE_FONT_SIZE, kernedWidth;
                if (previousChar && fontCache[previousChar] !== void 0) {
                  previousWidth = fontCache[previousChar];
                }
                if (fontCache[_char] !== void 0) {
                  kernedWidth = width = fontCache[_char];
                }
                if (stylesAreEqual && fontCache[couple] !== void 0) {
                  coupleWidth = fontCache[couple];
                  kernedWidth = coupleWidth - previousWidth;
                }
                if (width === void 0 || previousWidth === void 0 || coupleWidth === void 0) {
                  var ctx = this.getMeasuringContext();
                  this._setTextStyles(ctx, charStyle, true);
                }
                if (width === void 0) {
                  kernedWidth = width = ctx.measureText(_char).width;
                  fontCache[_char] = width;
                }
                if (previousWidth === void 0 && stylesAreEqual && previousChar) {
                  previousWidth = ctx.measureText(previousChar).width;
                  fontCache[previousChar] = previousWidth;
                }
                if (stylesAreEqual && coupleWidth === void 0) {
                  coupleWidth = ctx.measureText(couple).width;
                  fontCache[couple] = coupleWidth;
                  kernedWidth = coupleWidth - previousWidth;
                }
                return { width: width * fontMultiplier, kernedWidth: kernedWidth * fontMultiplier };
              },
              getHeightOfChar: function(line, _char) {
                return this.getValueOfPropertyAt(line, _char, "fontSize");
              },
              measureLine: function(lineIndex) {
                var lineInfo = this._measureLine(lineIndex);
                if (this.charSpacing !== 0) {
                  lineInfo.width -= this._getWidthOfCharSpacing();
                }
                if (lineInfo.width < 0) {
                  lineInfo.width = 0;
                }
                return lineInfo;
              },
              _measureLine: function(lineIndex) {
                var width = 0, i, grapheme, line = this._textLines[lineIndex], prevGrapheme, graphemeInfo, numOfSpaces = 0, lineBounds = new Array(line.length), positionInPath = 0, startingPoint, totalPathLength, path = this.path, reverse = this.pathSide === "right";
                this.__charBounds[lineIndex] = lineBounds;
                for (i = 0; i < line.length; i++) {
                  grapheme = line[i];
                  graphemeInfo = this._getGraphemeBox(grapheme, lineIndex, i, prevGrapheme);
                  lineBounds[i] = graphemeInfo;
                  width += graphemeInfo.kernedWidth;
                  prevGrapheme = grapheme;
                }
                lineBounds[i] = {
                  left: graphemeInfo ? graphemeInfo.left + graphemeInfo.width : 0,
                  width: 0,
                  kernedWidth: 0,
                  height: this.fontSize
                };
                if (path) {
                  totalPathLength = path.segmentsInfo[path.segmentsInfo.length - 1].length;
                  startingPoint = fabric2.util.getPointOnPath(path.path, 0, path.segmentsInfo);
                  startingPoint.x += path.pathOffset.x;
                  startingPoint.y += path.pathOffset.y;
                  switch (this.textAlign) {
                    case "left":
                      positionInPath = reverse ? totalPathLength - width : 0;
                      break;
                    case "center":
                      positionInPath = (totalPathLength - width) / 2;
                      break;
                    case "right":
                      positionInPath = reverse ? 0 : totalPathLength - width;
                      break;
                  }
                  positionInPath += this.pathStartOffset * (reverse ? -1 : 1);
                  for (i = reverse ? line.length - 1 : 0; reverse ? i >= 0 : i < line.length; reverse ? i-- : i++) {
                    graphemeInfo = lineBounds[i];
                    if (positionInPath > totalPathLength) {
                      positionInPath %= totalPathLength;
                    } else if (positionInPath < 0) {
                      positionInPath += totalPathLength;
                    }
                    this._setGraphemeOnPath(positionInPath, graphemeInfo, startingPoint);
                    positionInPath += graphemeInfo.kernedWidth;
                  }
                }
                return { width, numOfSpaces };
              },
              _setGraphemeOnPath: function(positionInPath, graphemeInfo, startingPoint) {
                var centerPosition = positionInPath + graphemeInfo.kernedWidth / 2, path = this.path;
                var info = fabric2.util.getPointOnPath(path.path, centerPosition, path.segmentsInfo);
                graphemeInfo.renderLeft = info.x - startingPoint.x;
                graphemeInfo.renderTop = info.y - startingPoint.y;
                graphemeInfo.angle = info.angle + (this.pathSide === "right" ? Math.PI : 0);
              },
              _getGraphemeBox: function(grapheme, lineIndex, charIndex, prevGrapheme, skipLeft) {
                var style = this.getCompleteStyleDeclaration(lineIndex, charIndex), prevStyle = prevGrapheme ? this.getCompleteStyleDeclaration(lineIndex, charIndex - 1) : {}, info = this._measureChar(grapheme, style, prevGrapheme, prevStyle), kernedWidth = info.kernedWidth, width = info.width, charSpacing;
                if (this.charSpacing !== 0) {
                  charSpacing = this._getWidthOfCharSpacing();
                  width += charSpacing;
                  kernedWidth += charSpacing;
                }
                var box = {
                  width,
                  left: 0,
                  height: style.fontSize,
                  kernedWidth,
                  deltaY: style.deltaY
                };
                if (charIndex > 0 && !skipLeft) {
                  var previousBox = this.__charBounds[lineIndex][charIndex - 1];
                  box.left = previousBox.left + previousBox.width + info.kernedWidth - info.width;
                }
                return box;
              },
              getHeightOfLine: function(lineIndex) {
                if (this.__lineHeights[lineIndex]) {
                  return this.__lineHeights[lineIndex];
                }
                var line = this._textLines[lineIndex], maxHeight = this.getHeightOfChar(lineIndex, 0);
                for (var i = 1, len = line.length; i < len; i++) {
                  maxHeight = Math.max(this.getHeightOfChar(lineIndex, i), maxHeight);
                }
                return this.__lineHeights[lineIndex] = maxHeight * this.lineHeight * this._fontSizeMult;
              },
              calcTextHeight: function() {
                var lineHeight, height = 0;
                for (var i = 0, len = this._textLines.length; i < len; i++) {
                  lineHeight = this.getHeightOfLine(i);
                  height += i === len - 1 ? lineHeight / this.lineHeight : lineHeight;
                }
                return height;
              },
              _getLeftOffset: function() {
                return this.direction === "ltr" ? -this.width / 2 : this.width / 2;
              },
              _getTopOffset: function() {
                return -this.height / 2;
              },
              _renderTextCommon: function(ctx, method) {
                ctx.save();
                var lineHeights = 0, left = this._getLeftOffset(), top = this._getTopOffset();
                for (var i = 0, len = this._textLines.length; i < len; i++) {
                  var heightOfLine = this.getHeightOfLine(i), maxHeight = heightOfLine / this.lineHeight, leftOffset = this._getLineLeftOffset(i);
                  this._renderTextLine(method, ctx, this._textLines[i], left + leftOffset, top + lineHeights + maxHeight, i);
                  lineHeights += heightOfLine;
                }
                ctx.restore();
              },
              _renderTextFill: function(ctx) {
                if (!this.fill && !this.styleHas("fill")) {
                  return;
                }
                this._renderTextCommon(ctx, "fillText");
              },
              _renderTextStroke: function(ctx) {
                if ((!this.stroke || this.strokeWidth === 0) && this.isEmptyStyles()) {
                  return;
                }
                if (this.shadow && !this.shadow.affectStroke) {
                  this._removeShadow(ctx);
                }
                ctx.save();
                this._setLineDash(ctx, this.strokeDashArray);
                ctx.beginPath();
                this._renderTextCommon(ctx, "strokeText");
                ctx.closePath();
                ctx.restore();
              },
              _renderChars: function(method, ctx, line, left, top, lineIndex) {
                var lineHeight = this.getHeightOfLine(lineIndex), isJustify = this.textAlign.indexOf("justify") !== -1, actualStyle, nextStyle, charsToRender = "", charBox, boxWidth = 0, timeToRender, path = this.path, shortCut = !isJustify && this.charSpacing === 0 && this.isEmptyStyles(lineIndex) && !path, isLtr = this.direction === "ltr", sign = this.direction === "ltr" ? 1 : -1, drawingLeft;
                ctx.save();
                top -= lineHeight * this._fontSizeFraction / this.lineHeight;
                if (shortCut) {
                  ctx.canvas.setAttribute("dir", isLtr ? "ltr" : "rtl");
                  ctx.direction = isLtr ? "ltr" : "rtl";
                  ctx.textAlign = isLtr ? "left" : "right";
                  this._renderChar(method, ctx, lineIndex, 0, line.join(""), left, top, lineHeight);
                  ctx.restore();
                  return;
                }
                for (var i = 0, len = line.length - 1; i <= len; i++) {
                  timeToRender = i === len || this.charSpacing || path;
                  charsToRender += line[i];
                  charBox = this.__charBounds[lineIndex][i];
                  if (boxWidth === 0) {
                    left += sign * (charBox.kernedWidth - charBox.width);
                    boxWidth += charBox.width;
                  } else {
                    boxWidth += charBox.kernedWidth;
                  }
                  if (isJustify && !timeToRender) {
                    if (this._reSpaceAndTab.test(line[i])) {
                      timeToRender = true;
                    }
                  }
                  if (!timeToRender) {
                    actualStyle = actualStyle || this.getCompleteStyleDeclaration(lineIndex, i);
                    nextStyle = this.getCompleteStyleDeclaration(lineIndex, i + 1);
                    timeToRender = this._hasStyleChanged(actualStyle, nextStyle);
                  }
                  if (timeToRender) {
                    if (path) {
                      ctx.save();
                      ctx.translate(charBox.renderLeft, charBox.renderTop);
                      ctx.rotate(charBox.angle);
                      this._renderChar(method, ctx, lineIndex, i, charsToRender, -boxWidth / 2, 0, lineHeight);
                      ctx.restore();
                    } else {
                      drawingLeft = left;
                      ctx.canvas.setAttribute("dir", isLtr ? "ltr" : "rtl");
                      ctx.direction = isLtr ? "ltr" : "rtl";
                      ctx.textAlign = isLtr ? "left" : "right";
                      this._renderChar(method, ctx, lineIndex, i, charsToRender, drawingLeft, top, lineHeight);
                    }
                    charsToRender = "";
                    actualStyle = nextStyle;
                    left += sign * boxWidth;
                    boxWidth = 0;
                  }
                }
                ctx.restore();
              },
              _applyPatternGradientTransformText: function(filler) {
                var pCanvas = fabric2.util.createCanvasElement(), pCtx, width = this.width + this.strokeWidth, height = this.height + this.strokeWidth;
                pCanvas.width = width;
                pCanvas.height = height;
                pCtx = pCanvas.getContext("2d");
                pCtx.beginPath();
                pCtx.moveTo(0, 0);
                pCtx.lineTo(width, 0);
                pCtx.lineTo(width, height);
                pCtx.lineTo(0, height);
                pCtx.closePath();
                pCtx.translate(width / 2, height / 2);
                pCtx.fillStyle = filler.toLive(pCtx);
                this._applyPatternGradientTransform(pCtx, filler);
                pCtx.fill();
                return pCtx.createPattern(pCanvas, "no-repeat");
              },
              handleFiller: function(ctx, property, filler) {
                var offsetX, offsetY;
                if (filler.toLive) {
                  if (filler.gradientUnits === "percentage" || filler.gradientTransform || filler.patternTransform) {
                    offsetX = -this.width / 2;
                    offsetY = -this.height / 2;
                    ctx.translate(offsetX, offsetY);
                    ctx[property] = this._applyPatternGradientTransformText(filler);
                    return { offsetX, offsetY };
                  } else {
                    ctx[property] = filler.toLive(ctx, this);
                    return this._applyPatternGradientTransform(ctx, filler);
                  }
                } else {
                  ctx[property] = filler;
                }
                return { offsetX: 0, offsetY: 0 };
              },
              _setStrokeStyles: function(ctx, decl) {
                ctx.lineWidth = decl.strokeWidth;
                ctx.lineCap = this.strokeLineCap;
                ctx.lineDashOffset = this.strokeDashOffset;
                ctx.lineJoin = this.strokeLineJoin;
                ctx.miterLimit = this.strokeMiterLimit;
                return this.handleFiller(ctx, "strokeStyle", decl.stroke);
              },
              _setFillStyles: function(ctx, decl) {
                return this.handleFiller(ctx, "fillStyle", decl.fill);
              },
              _renderChar: function(method, ctx, lineIndex, charIndex, _char, left, top) {
                var decl = this._getStyleDeclaration(lineIndex, charIndex), fullDecl = this.getCompleteStyleDeclaration(lineIndex, charIndex), shouldFill = method === "fillText" && fullDecl.fill, shouldStroke = method === "strokeText" && fullDecl.stroke && fullDecl.strokeWidth, fillOffsets, strokeOffsets;
                if (!shouldStroke && !shouldFill) {
                  return;
                }
                ctx.save();
                shouldFill && (fillOffsets = this._setFillStyles(ctx, fullDecl));
                shouldStroke && (strokeOffsets = this._setStrokeStyles(ctx, fullDecl));
                ctx.font = this._getFontDeclaration(fullDecl);
                if (decl && decl.textBackgroundColor) {
                  this._removeShadow(ctx);
                }
                if (decl && decl.deltaY) {
                  top += decl.deltaY;
                }
                shouldFill && ctx.fillText(_char, left - fillOffsets.offsetX, top - fillOffsets.offsetY);
                shouldStroke && ctx.strokeText(_char, left - strokeOffsets.offsetX, top - strokeOffsets.offsetY);
                ctx.restore();
              },
              setSuperscript: function(start, end) {
                return this._setScript(start, end, this.superscript);
              },
              setSubscript: function(start, end) {
                return this._setScript(start, end, this.subscript);
              },
              _setScript: function(start, end, schema) {
                var loc = this.get2DCursorLocation(start, true), fontSize = this.getValueOfPropertyAt(loc.lineIndex, loc.charIndex, "fontSize"), dy = this.getValueOfPropertyAt(loc.lineIndex, loc.charIndex, "deltaY"), style = { fontSize: fontSize * schema.size, deltaY: dy + fontSize * schema.baseline };
                this.setSelectionStyles(style, start, end);
                return this;
              },
              _hasStyleChanged: function(prevStyle, thisStyle) {
                return prevStyle.fill !== thisStyle.fill || prevStyle.stroke !== thisStyle.stroke || prevStyle.strokeWidth !== thisStyle.strokeWidth || prevStyle.fontSize !== thisStyle.fontSize || prevStyle.fontFamily !== thisStyle.fontFamily || prevStyle.fontWeight !== thisStyle.fontWeight || prevStyle.fontStyle !== thisStyle.fontStyle || prevStyle.deltaY !== thisStyle.deltaY;
              },
              _hasStyleChangedForSvg: function(prevStyle, thisStyle) {
                return this._hasStyleChanged(prevStyle, thisStyle) || prevStyle.overline !== thisStyle.overline || prevStyle.underline !== thisStyle.underline || prevStyle.linethrough !== thisStyle.linethrough;
              },
              _getLineLeftOffset: function(lineIndex) {
                var lineWidth = this.getLineWidth(lineIndex), lineDiff = this.width - lineWidth, textAlign = this.textAlign, direction = this.direction, isEndOfWrapping, leftOffset = 0, isEndOfWrapping = this.isEndOfWrapping(lineIndex);
                if (textAlign === "justify" || textAlign === "justify-center" && !isEndOfWrapping || textAlign === "justify-right" && !isEndOfWrapping || textAlign === "justify-left" && !isEndOfWrapping) {
                  return 0;
                }
                if (textAlign === "center") {
                  leftOffset = lineDiff / 2;
                }
                if (textAlign === "right") {
                  leftOffset = lineDiff;
                }
                if (textAlign === "justify-center") {
                  leftOffset = lineDiff / 2;
                }
                if (textAlign === "justify-right") {
                  leftOffset = lineDiff;
                }
                if (direction === "rtl") {
                  leftOffset -= lineDiff;
                }
                return leftOffset;
              },
              _clearCache: function() {
                this.__lineWidths = [];
                this.__lineHeights = [];
                this.__charBounds = [];
              },
              _shouldClearDimensionCache: function() {
                var shouldClear = this._forceClearCache;
                shouldClear || (shouldClear = this.hasStateChanged("_dimensionAffectingProps"));
                if (shouldClear) {
                  this.dirty = true;
                  this._forceClearCache = false;
                }
                return shouldClear;
              },
              getLineWidth: function(lineIndex) {
                if (this.__lineWidths[lineIndex]) {
                  return this.__lineWidths[lineIndex];
                }
                var width, line = this._textLines[lineIndex], lineInfo;
                if (line === "") {
                  width = 0;
                } else {
                  lineInfo = this.measureLine(lineIndex);
                  width = lineInfo.width;
                }
                this.__lineWidths[lineIndex] = width;
                return width;
              },
              _getWidthOfCharSpacing: function() {
                if (this.charSpacing !== 0) {
                  return this.fontSize * this.charSpacing / 1e3;
                }
                return 0;
              },
              getValueOfPropertyAt: function(lineIndex, charIndex, property) {
                var charStyle = this._getStyleDeclaration(lineIndex, charIndex);
                if (charStyle && typeof charStyle[property] !== "undefined") {
                  return charStyle[property];
                }
                return this[property];
              },
              _renderTextDecoration: function(ctx, type) {
                if (!this[type] && !this.styleHas(type)) {
                  return;
                }
                var heightOfLine, size, _size, lineLeftOffset, dy, _dy, line, lastDecoration, leftOffset = this._getLeftOffset(), topOffset = this._getTopOffset(), top, boxStart, boxWidth, charBox, currentDecoration, maxHeight, currentFill, lastFill, path = this.path, charSpacing = this._getWidthOfCharSpacing(), offsetY = this.offsets[type];
                for (var i = 0, len = this._textLines.length; i < len; i++) {
                  heightOfLine = this.getHeightOfLine(i);
                  if (!this[type] && !this.styleHas(type, i)) {
                    topOffset += heightOfLine;
                    continue;
                  }
                  line = this._textLines[i];
                  maxHeight = heightOfLine / this.lineHeight;
                  lineLeftOffset = this._getLineLeftOffset(i);
                  boxStart = 0;
                  boxWidth = 0;
                  lastDecoration = this.getValueOfPropertyAt(i, 0, type);
                  lastFill = this.getValueOfPropertyAt(i, 0, "fill");
                  top = topOffset + maxHeight * (1 - this._fontSizeFraction);
                  size = this.getHeightOfChar(i, 0);
                  dy = this.getValueOfPropertyAt(i, 0, "deltaY");
                  for (var j = 0, jlen = line.length; j < jlen; j++) {
                    charBox = this.__charBounds[i][j];
                    currentDecoration = this.getValueOfPropertyAt(i, j, type);
                    currentFill = this.getValueOfPropertyAt(i, j, "fill");
                    _size = this.getHeightOfChar(i, j);
                    _dy = this.getValueOfPropertyAt(i, j, "deltaY");
                    if (path && currentDecoration && currentFill) {
                      ctx.save();
                      ctx.fillStyle = lastFill;
                      ctx.translate(charBox.renderLeft, charBox.renderTop);
                      ctx.rotate(charBox.angle);
                      ctx.fillRect(-charBox.kernedWidth / 2, offsetY * _size + _dy, charBox.kernedWidth, this.fontSize / 15);
                      ctx.restore();
                    } else if ((currentDecoration !== lastDecoration || currentFill !== lastFill || _size !== size || _dy !== dy) && boxWidth > 0) {
                      var drawStart = leftOffset + lineLeftOffset + boxStart;
                      if (this.direction === "rtl") {
                        drawStart = this.width - drawStart - boxWidth;
                      }
                      if (lastDecoration && lastFill) {
                        ctx.fillStyle = lastFill;
                        ctx.fillRect(drawStart, top + offsetY * size + dy, boxWidth, this.fontSize / 15);
                      }
                      boxStart = charBox.left;
                      boxWidth = charBox.width;
                      lastDecoration = currentDecoration;
                      lastFill = currentFill;
                      size = _size;
                      dy = _dy;
                    } else {
                      boxWidth += charBox.kernedWidth;
                    }
                  }
                  var drawStart = leftOffset + lineLeftOffset + boxStart;
                  if (this.direction === "rtl") {
                    drawStart = this.width - drawStart - boxWidth;
                  }
                  ctx.fillStyle = currentFill;
                  currentDecoration && currentFill && ctx.fillRect(drawStart, top + offsetY * size + dy, boxWidth - charSpacing, this.fontSize / 15);
                  topOffset += heightOfLine;
                }
                this._removeShadow(ctx);
              },
              _getFontDeclaration: function(styleObject, forMeasuring) {
                var style = styleObject || this, family = this.fontFamily, fontIsGeneric = fabric2.Text.genericFonts.indexOf(family.toLowerCase()) > -1;
                var fontFamily = family === void 0 || family.indexOf("'") > -1 || family.indexOf(",") > -1 || family.indexOf('"') > -1 || fontIsGeneric ? style.fontFamily : '"' + style.fontFamily + '"';
                return [
                  fabric2.isLikelyNode ? style.fontWeight : style.fontStyle,
                  fabric2.isLikelyNode ? style.fontStyle : style.fontWeight,
                  forMeasuring ? this.CACHE_FONT_SIZE + "px" : style.fontSize + "px",
                  fontFamily
                ].join(" ");
              },
              render: function(ctx) {
                if (!this.visible) {
                  return;
                }
                if (this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen()) {
                  return;
                }
                if (this._shouldClearDimensionCache()) {
                  this.initDimensions();
                }
                this.callSuper("render", ctx);
              },
              _splitTextIntoLines: function(text) {
                var lines = text.split(this._reNewline), newLines = new Array(lines.length), newLine = ["\n"], newText = [];
                for (var i = 0; i < lines.length; i++) {
                  newLines[i] = fabric2.util.string.graphemeSplit(lines[i]);
                  newText = newText.concat(newLines[i], newLine);
                }
                newText.pop();
                return { _unwrappedLines: newLines, lines, graphemeText: newText, graphemeLines: newLines };
              },
              toObject: function(propertiesToInclude) {
                var allProperties = additionalProps.concat(propertiesToInclude);
                var obj = this.callSuper("toObject", allProperties);
                obj.styles = clone(this.styles, true);
                if (obj.path) {
                  obj.path = this.path.toObject();
                }
                return obj;
              },
              set: function(key, value) {
                this.callSuper("set", key, value);
                var needsDims = false;
                var isAddingPath = false;
                if (typeof key === "object") {
                  for (var _key in key) {
                    if (_key === "path") {
                      this.setPathInfo();
                    }
                    needsDims = needsDims || this._dimensionAffectingProps.indexOf(_key) !== -1;
                    isAddingPath = isAddingPath || _key === "path";
                  }
                } else {
                  needsDims = this._dimensionAffectingProps.indexOf(key) !== -1;
                  isAddingPath = key === "path";
                }
                if (isAddingPath) {
                  this.setPathInfo();
                }
                if (needsDims) {
                  this.initDimensions();
                  this.setCoords();
                }
                return this;
              },
              complexity: function() {
                return 1;
              }
            });
            fabric2.Text.ATTRIBUTE_NAMES = fabric2.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" "));
            fabric2.Text.DEFAULT_SVG_FONT_SIZE = 16;
            fabric2.Text.fromElement = function(element, callback, options) {
              if (!element) {
                return callback(null);
              }
              var parsedAttributes = fabric2.parseAttributes(element, fabric2.Text.ATTRIBUTE_NAMES), parsedAnchor = parsedAttributes.textAnchor || "left";
              options = fabric2.util.object.extend(options ? clone(options) : {}, parsedAttributes);
              options.top = options.top || 0;
              options.left = options.left || 0;
              if (parsedAttributes.textDecoration) {
                var textDecoration = parsedAttributes.textDecoration;
                if (textDecoration.indexOf("underline") !== -1) {
                  options.underline = true;
                }
                if (textDecoration.indexOf("overline") !== -1) {
                  options.overline = true;
                }
                if (textDecoration.indexOf("line-through") !== -1) {
                  options.linethrough = true;
                }
                delete options.textDecoration;
              }
              if ("dx" in parsedAttributes) {
                options.left += parsedAttributes.dx;
              }
              if ("dy" in parsedAttributes) {
                options.top += parsedAttributes.dy;
              }
              if (!("fontSize" in options)) {
                options.fontSize = fabric2.Text.DEFAULT_SVG_FONT_SIZE;
              }
              var textContent = "";
              if (!("textContent" in element)) {
                if ("firstChild" in element && element.firstChild !== null) {
                  if ("data" in element.firstChild && element.firstChild.data !== null) {
                    textContent = element.firstChild.data;
                  }
                }
              } else {
                textContent = element.textContent;
              }
              textContent = textContent.replace(/^\s+|\s+$|\n+/g, "").replace(/\s+/g, " ");
              var originalStrokeWidth = options.strokeWidth;
              options.strokeWidth = 0;
              var text = new fabric2.Text(textContent, options), textHeightScaleFactor = text.getScaledHeight() / text.height, lineHeightDiff = (text.height + text.strokeWidth) * text.lineHeight - text.height, scaledDiff = lineHeightDiff * textHeightScaleFactor, textHeight = text.getScaledHeight() + scaledDiff, offX = 0;
              if (parsedAnchor === "center") {
                offX = text.getScaledWidth() / 2;
              }
              if (parsedAnchor === "right") {
                offX = text.getScaledWidth();
              }
              text.set({
                left: text.left - offX,
                top: text.top - (textHeight - text.fontSize * (0.07 + text._fontSizeFraction)) / text.lineHeight,
                strokeWidth: typeof originalStrokeWidth !== "undefined" ? originalStrokeWidth : 1
              });
              callback(text);
            };
            fabric2.Text.fromObject = function(object, callback) {
              var objectCopy = clone(object), path = object.path;
              delete objectCopy.path;
              return fabric2.Object._fromObject("Text", objectCopy, function(textInstance) {
                if (path) {
                  fabric2.Object._fromObject("Path", path, function(pathInstance) {
                    textInstance.set("path", pathInstance);
                    callback(textInstance);
                  }, "path");
                } else {
                  callback(textInstance);
                }
              }, "text");
            };
            fabric2.Text.genericFonts = ["sans-serif", "serif", "cursive", "fantasy", "monospace"];
            fabric2.util.createAccessors && fabric2.util.createAccessors(fabric2.Text);
          })(exports2);
          (function() {
            fabric.util.object.extend(fabric.Text.prototype, {
              isEmptyStyles: function(lineIndex) {
                if (!this.styles) {
                  return true;
                }
                if (typeof lineIndex !== "undefined" && !this.styles[lineIndex]) {
                  return true;
                }
                var obj = typeof lineIndex === "undefined" ? this.styles : { line: this.styles[lineIndex] };
                for (var p1 in obj) {
                  for (var p2 in obj[p1]) {
                    for (var p3 in obj[p1][p2]) {
                      return false;
                    }
                  }
                }
                return true;
              },
              styleHas: function(property, lineIndex) {
                if (!this.styles || !property || property === "") {
                  return false;
                }
                if (typeof lineIndex !== "undefined" && !this.styles[lineIndex]) {
                  return false;
                }
                var obj = typeof lineIndex === "undefined" ? this.styles : { 0: this.styles[lineIndex] };
                for (var p1 in obj) {
                  for (var p2 in obj[p1]) {
                    if (typeof obj[p1][p2][property] !== "undefined") {
                      return true;
                    }
                  }
                }
                return false;
              },
              cleanStyle: function(property) {
                if (!this.styles || !property || property === "") {
                  return false;
                }
                var obj = this.styles, stylesCount = 0, letterCount, stylePropertyValue, allStyleObjectPropertiesMatch = true, graphemeCount = 0, styleObject;
                for (var p1 in obj) {
                  letterCount = 0;
                  for (var p2 in obj[p1]) {
                    var styleObject = obj[p1][p2], stylePropertyHasBeenSet = styleObject.hasOwnProperty(property);
                    stylesCount++;
                    if (stylePropertyHasBeenSet) {
                      if (!stylePropertyValue) {
                        stylePropertyValue = styleObject[property];
                      } else if (styleObject[property] !== stylePropertyValue) {
                        allStyleObjectPropertiesMatch = false;
                      }
                      if (styleObject[property] === this[property]) {
                        delete styleObject[property];
                      }
                    } else {
                      allStyleObjectPropertiesMatch = false;
                    }
                    if (Object.keys(styleObject).length !== 0) {
                      letterCount++;
                    } else {
                      delete obj[p1][p2];
                    }
                  }
                  if (letterCount === 0) {
                    delete obj[p1];
                  }
                }
                for (var i = 0; i < this._textLines.length; i++) {
                  graphemeCount += this._textLines[i].length;
                }
                if (allStyleObjectPropertiesMatch && stylesCount === graphemeCount) {
                  this[property] = stylePropertyValue;
                  this.removeStyle(property);
                }
              },
              removeStyle: function(property) {
                if (!this.styles || !property || property === "") {
                  return;
                }
                var obj = this.styles, line, lineNum, charNum;
                for (lineNum in obj) {
                  line = obj[lineNum];
                  for (charNum in line) {
                    delete line[charNum][property];
                    if (Object.keys(line[charNum]).length === 0) {
                      delete line[charNum];
                    }
                  }
                  if (Object.keys(line).length === 0) {
                    delete obj[lineNum];
                  }
                }
              },
              _extendStyles: function(index, styles) {
                var loc = this.get2DCursorLocation(index);
                if (!this._getLineStyle(loc.lineIndex)) {
                  this._setLineStyle(loc.lineIndex);
                }
                if (!this._getStyleDeclaration(loc.lineIndex, loc.charIndex)) {
                  this._setStyleDeclaration(loc.lineIndex, loc.charIndex, {});
                }
                fabric.util.object.extend(this._getStyleDeclaration(loc.lineIndex, loc.charIndex), styles);
              },
              get2DCursorLocation: function(selectionStart, skipWrapping) {
                if (typeof selectionStart === "undefined") {
                  selectionStart = this.selectionStart;
                }
                var lines = skipWrapping ? this._unwrappedTextLines : this._textLines, len = lines.length;
                for (var i = 0; i < len; i++) {
                  if (selectionStart <= lines[i].length) {
                    return {
                      lineIndex: i,
                      charIndex: selectionStart
                    };
                  }
                  selectionStart -= lines[i].length + this.missingNewlineOffset(i);
                }
                return {
                  lineIndex: i - 1,
                  charIndex: lines[i - 1].length < selectionStart ? lines[i - 1].length : selectionStart
                };
              },
              getSelectionStyles: function(startIndex, endIndex, complete) {
                if (typeof startIndex === "undefined") {
                  startIndex = this.selectionStart || 0;
                }
                if (typeof endIndex === "undefined") {
                  endIndex = this.selectionEnd || startIndex;
                }
                var styles = [];
                for (var i = startIndex; i < endIndex; i++) {
                  styles.push(this.getStyleAtPosition(i, complete));
                }
                return styles;
              },
              getStyleAtPosition: function(position, complete) {
                var loc = this.get2DCursorLocation(position), style = complete ? this.getCompleteStyleDeclaration(loc.lineIndex, loc.charIndex) : this._getStyleDeclaration(loc.lineIndex, loc.charIndex);
                return style || {};
              },
              setSelectionStyles: function(styles, startIndex, endIndex) {
                if (typeof startIndex === "undefined") {
                  startIndex = this.selectionStart || 0;
                }
                if (typeof endIndex === "undefined") {
                  endIndex = this.selectionEnd || startIndex;
                }
                for (var i = startIndex; i < endIndex; i++) {
                  this._extendStyles(i, styles);
                }
                this._forceClearCache = true;
                return this;
              },
              _getStyleDeclaration: function(lineIndex, charIndex) {
                var lineStyle = this.styles && this.styles[lineIndex];
                if (!lineStyle) {
                  return null;
                }
                return lineStyle[charIndex];
              },
              getCompleteStyleDeclaration: function(lineIndex, charIndex) {
                var style = this._getStyleDeclaration(lineIndex, charIndex) || {}, styleObject = {}, prop;
                for (var i = 0; i < this._styleProperties.length; i++) {
                  prop = this._styleProperties[i];
                  styleObject[prop] = typeof style[prop] === "undefined" ? this[prop] : style[prop];
                }
                return styleObject;
              },
              _setStyleDeclaration: function(lineIndex, charIndex, style) {
                this.styles[lineIndex][charIndex] = style;
              },
              _deleteStyleDeclaration: function(lineIndex, charIndex) {
                delete this.styles[lineIndex][charIndex];
              },
              _getLineStyle: function(lineIndex) {
                return !!this.styles[lineIndex];
              },
              _setLineStyle: function(lineIndex) {
                this.styles[lineIndex] = {};
              },
              _deleteLineStyle: function(lineIndex) {
                delete this.styles[lineIndex];
              }
            });
          })();
          (function() {
            function parseDecoration(object) {
              if (object.textDecoration) {
                object.textDecoration.indexOf("underline") > -1 && (object.underline = true);
                object.textDecoration.indexOf("line-through") > -1 && (object.linethrough = true);
                object.textDecoration.indexOf("overline") > -1 && (object.overline = true);
                delete object.textDecoration;
              }
            }
            fabric.IText = fabric.util.createClass(fabric.Text, fabric.Observable, {
              type: "i-text",
              selectionStart: 0,
              selectionEnd: 0,
              selectionColor: "rgba(17,119,255,0.3)",
              isEditing: false,
              editable: true,
              editingBorderColor: "rgba(102,153,255,0.25)",
              cursorWidth: 2,
              cursorColor: "",
              cursorDelay: 1e3,
              cursorDuration: 600,
              caching: true,
              hiddenTextareaContainer: null,
              _reSpace: /\s|\n/,
              _currentCursorOpacity: 0,
              _selectionDirection: null,
              _abortCursorAnimation: false,
              __widthOfSpace: [],
              inCompositionMode: false,
              initialize: function(text, options) {
                this.callSuper("initialize", text, options);
                this.initBehavior();
              },
              setSelectionStart: function(index) {
                index = Math.max(index, 0);
                this._updateAndFire("selectionStart", index);
              },
              setSelectionEnd: function(index) {
                index = Math.min(index, this.text.length);
                this._updateAndFire("selectionEnd", index);
              },
              _updateAndFire: function(property, index) {
                if (this[property] !== index) {
                  this._fireSelectionChanged();
                  this[property] = index;
                }
                this._updateTextarea();
              },
              _fireSelectionChanged: function() {
                this.fire("selection:changed");
                this.canvas && this.canvas.fire("text:selection:changed", { target: this });
              },
              initDimensions: function() {
                this.isEditing && this.initDelayedCursor();
                this.clearContextTop();
                this.callSuper("initDimensions");
              },
              render: function(ctx) {
                this.clearContextTop();
                this.callSuper("render", ctx);
                this.cursorOffsetCache = {};
                this.renderCursorOrSelection();
              },
              _render: function(ctx) {
                this.callSuper("_render", ctx);
              },
              clearContextTop: function(skipRestore) {
                if (!this.isEditing || !this.canvas || !this.canvas.contextTop) {
                  return;
                }
                var ctx = this.canvas.contextTop, v = this.canvas.viewportTransform;
                ctx.save();
                ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);
                this.transform(ctx);
                this._clearTextArea(ctx);
                skipRestore || ctx.restore();
              },
              renderCursorOrSelection: function() {
                if (!this.isEditing || !this.canvas || !this.canvas.contextTop) {
                  return;
                }
                var boundaries = this._getCursorBoundaries(), ctx = this.canvas.contextTop;
                this.clearContextTop(true);
                if (this.selectionStart === this.selectionEnd) {
                  this.renderCursor(boundaries, ctx);
                } else {
                  this.renderSelection(boundaries, ctx);
                }
                ctx.restore();
              },
              _clearTextArea: function(ctx) {
                var width = this.width + 4, height = this.height + 4;
                ctx.clearRect(-width / 2, -height / 2, width, height);
              },
              _getCursorBoundaries: function(position) {
                if (typeof position === "undefined") {
                  position = this.selectionStart;
                }
                var left = this._getLeftOffset(), top = this._getTopOffset(), offsets = this._getCursorBoundariesOffsets(position);
                return {
                  left,
                  top,
                  leftOffset: offsets.left,
                  topOffset: offsets.top
                };
              },
              _getCursorBoundariesOffsets: function(position) {
                if (this.cursorOffsetCache && "top" in this.cursorOffsetCache) {
                  return this.cursorOffsetCache;
                }
                var lineLeftOffset, lineIndex, charIndex, topOffset = 0, leftOffset = 0, boundaries, cursorPosition = this.get2DCursorLocation(position);
                charIndex = cursorPosition.charIndex;
                lineIndex = cursorPosition.lineIndex;
                for (var i = 0; i < lineIndex; i++) {
                  topOffset += this.getHeightOfLine(i);
                }
                lineLeftOffset = this._getLineLeftOffset(lineIndex);
                var bound = this.__charBounds[lineIndex][charIndex];
                bound && (leftOffset = bound.left);
                if (this.charSpacing !== 0 && charIndex === this._textLines[lineIndex].length) {
                  leftOffset -= this._getWidthOfCharSpacing();
                }
                boundaries = {
                  top: topOffset,
                  left: lineLeftOffset + (leftOffset > 0 ? leftOffset : 0)
                };
                if (this.direction === "rtl") {
                  boundaries.left *= -1;
                }
                this.cursorOffsetCache = boundaries;
                return this.cursorOffsetCache;
              },
              renderCursor: function(boundaries, ctx) {
                var cursorLocation = this.get2DCursorLocation(), lineIndex = cursorLocation.lineIndex, charIndex = cursorLocation.charIndex > 0 ? cursorLocation.charIndex - 1 : 0, charHeight = this.getValueOfPropertyAt(lineIndex, charIndex, "fontSize"), multiplier = this.scaleX * this.canvas.getZoom(), cursorWidth = this.cursorWidth / multiplier, topOffset = boundaries.topOffset, dy = this.getValueOfPropertyAt(lineIndex, charIndex, "deltaY");
                topOffset += (1 - this._fontSizeFraction) * this.getHeightOfLine(lineIndex) / this.lineHeight - charHeight * (1 - this._fontSizeFraction);
                if (this.inCompositionMode) {
                  this.renderSelection(boundaries, ctx);
                }
                ctx.fillStyle = this.cursorColor || this.getValueOfPropertyAt(lineIndex, charIndex, "fill");
                ctx.globalAlpha = this.__isMousedown ? 1 : this._currentCursorOpacity;
                ctx.fillRect(boundaries.left + boundaries.leftOffset - cursorWidth / 2, topOffset + boundaries.top + dy, cursorWidth, charHeight);
              },
              renderSelection: function(boundaries, ctx) {
                var selectionStart = this.inCompositionMode ? this.hiddenTextarea.selectionStart : this.selectionStart, selectionEnd = this.inCompositionMode ? this.hiddenTextarea.selectionEnd : this.selectionEnd, isJustify = this.textAlign.indexOf("justify") !== -1, start = this.get2DCursorLocation(selectionStart), end = this.get2DCursorLocation(selectionEnd), startLine = start.lineIndex, endLine = end.lineIndex, startChar = start.charIndex < 0 ? 0 : start.charIndex, endChar = end.charIndex < 0 ? 0 : end.charIndex;
                for (var i = startLine; i <= endLine; i++) {
                  var lineOffset = this._getLineLeftOffset(i) || 0, lineHeight = this.getHeightOfLine(i), realLineHeight = 0, boxStart = 0, boxEnd = 0;
                  if (i === startLine) {
                    boxStart = this.__charBounds[startLine][startChar].left;
                  }
                  if (i >= startLine && i < endLine) {
                    boxEnd = isJustify && !this.isEndOfWrapping(i) ? this.width : this.getLineWidth(i) || 5;
                  } else if (i === endLine) {
                    if (endChar === 0) {
                      boxEnd = this.__charBounds[endLine][endChar].left;
                    } else {
                      var charSpacing = this._getWidthOfCharSpacing();
                      boxEnd = this.__charBounds[endLine][endChar - 1].left + this.__charBounds[endLine][endChar - 1].width - charSpacing;
                    }
                  }
                  realLineHeight = lineHeight;
                  if (this.lineHeight < 1 || i === endLine && this.lineHeight > 1) {
                    lineHeight /= this.lineHeight;
                  }
                  var drawStart = boundaries.left + lineOffset + boxStart, drawWidth = boxEnd - boxStart, drawHeight = lineHeight, extraTop = 0;
                  if (this.inCompositionMode) {
                    ctx.fillStyle = this.compositionColor || "black";
                    drawHeight = 1;
                    extraTop = lineHeight;
                  } else {
                    ctx.fillStyle = this.selectionColor;
                  }
                  if (this.direction === "rtl") {
                    drawStart = this.width - drawStart - drawWidth;
                  }
                  ctx.fillRect(drawStart, boundaries.top + boundaries.topOffset + extraTop, drawWidth, drawHeight);
                  boundaries.topOffset += realLineHeight;
                }
              },
              getCurrentCharFontSize: function() {
                var cp = this._getCurrentCharIndex();
                return this.getValueOfPropertyAt(cp.l, cp.c, "fontSize");
              },
              getCurrentCharColor: function() {
                var cp = this._getCurrentCharIndex();
                return this.getValueOfPropertyAt(cp.l, cp.c, "fill");
              },
              _getCurrentCharIndex: function() {
                var cursorPosition = this.get2DCursorLocation(this.selectionStart, true), charIndex = cursorPosition.charIndex > 0 ? cursorPosition.charIndex - 1 : 0;
                return { l: cursorPosition.lineIndex, c: charIndex };
              }
            });
            fabric.IText.fromObject = function(object, callback) {
              parseDecoration(object);
              if (object.styles) {
                for (var i in object.styles) {
                  for (var j in object.styles[i]) {
                    parseDecoration(object.styles[i][j]);
                  }
                }
              }
              fabric.Object._fromObject("IText", object, callback, "text");
            };
          })();
          (function() {
            var clone = fabric.util.object.clone;
            fabric.util.object.extend(fabric.IText.prototype, {
              initBehavior: function() {
                this.initAddedHandler();
                this.initRemovedHandler();
                this.initCursorSelectionHandlers();
                this.initDoubleClickSimulation();
                this.mouseMoveHandler = this.mouseMoveHandler.bind(this);
              },
              onDeselect: function() {
                this.isEditing && this.exitEditing();
                this.selected = false;
              },
              initAddedHandler: function() {
                var _this = this;
                this.on("added", function() {
                  var canvas = _this.canvas;
                  if (canvas) {
                    if (!canvas._hasITextHandlers) {
                      canvas._hasITextHandlers = true;
                      _this._initCanvasHandlers(canvas);
                    }
                    canvas._iTextInstances = canvas._iTextInstances || [];
                    canvas._iTextInstances.push(_this);
                  }
                });
              },
              initRemovedHandler: function() {
                var _this = this;
                this.on("removed", function() {
                  var canvas = _this.canvas;
                  if (canvas) {
                    canvas._iTextInstances = canvas._iTextInstances || [];
                    fabric.util.removeFromArray(canvas._iTextInstances, _this);
                    if (canvas._iTextInstances.length === 0) {
                      canvas._hasITextHandlers = false;
                      _this._removeCanvasHandlers(canvas);
                    }
                  }
                });
              },
              _initCanvasHandlers: function(canvas) {
                canvas._mouseUpITextHandler = function() {
                  if (canvas._iTextInstances) {
                    canvas._iTextInstances.forEach(function(obj) {
                      obj.__isMousedown = false;
                    });
                  }
                };
                canvas.on("mouse:up", canvas._mouseUpITextHandler);
              },
              _removeCanvasHandlers: function(canvas) {
                canvas.off("mouse:up", canvas._mouseUpITextHandler);
              },
              _tick: function() {
                this._currentTickState = this._animateCursor(this, 1, this.cursorDuration, "_onTickComplete");
              },
              _animateCursor: function(obj, targetOpacity, duration, completeMethod) {
                var tickState;
                tickState = {
                  isAborted: false,
                  abort: function() {
                    this.isAborted = true;
                  }
                };
                obj.animate("_currentCursorOpacity", targetOpacity, {
                  duration,
                  onComplete: function() {
                    if (!tickState.isAborted) {
                      obj[completeMethod]();
                    }
                  },
                  onChange: function() {
                    if (obj.canvas && obj.selectionStart === obj.selectionEnd) {
                      obj.renderCursorOrSelection();
                    }
                  },
                  abort: function() {
                    return tickState.isAborted;
                  }
                });
                return tickState;
              },
              _onTickComplete: function() {
                var _this = this;
                if (this._cursorTimeout1) {
                  clearTimeout(this._cursorTimeout1);
                }
                this._cursorTimeout1 = setTimeout(function() {
                  _this._currentTickCompleteState = _this._animateCursor(_this, 0, this.cursorDuration / 2, "_tick");
                }, 100);
              },
              initDelayedCursor: function(restart) {
                var _this = this, delay = restart ? 0 : this.cursorDelay;
                this.abortCursorAnimation();
                this._currentCursorOpacity = 1;
                this._cursorTimeout2 = setTimeout(function() {
                  _this._tick();
                }, delay);
              },
              abortCursorAnimation: function() {
                var shouldClear = this._currentTickState || this._currentTickCompleteState, canvas = this.canvas;
                this._currentTickState && this._currentTickState.abort();
                this._currentTickCompleteState && this._currentTickCompleteState.abort();
                clearTimeout(this._cursorTimeout1);
                clearTimeout(this._cursorTimeout2);
                this._currentCursorOpacity = 0;
                if (shouldClear && canvas) {
                  canvas.clearContext(canvas.contextTop || canvas.contextContainer);
                }
              },
              selectAll: function() {
                this.selectionStart = 0;
                this.selectionEnd = this._text.length;
                this._fireSelectionChanged();
                this._updateTextarea();
                return this;
              },
              getSelectedText: function() {
                return this._text.slice(this.selectionStart, this.selectionEnd).join("");
              },
              findWordBoundaryLeft: function(startFrom) {
                var offset = 0, index = startFrom - 1;
                if (this._reSpace.test(this._text[index])) {
                  while (this._reSpace.test(this._text[index])) {
                    offset++;
                    index--;
                  }
                }
                while (/\S/.test(this._text[index]) && index > -1) {
                  offset++;
                  index--;
                }
                return startFrom - offset;
              },
              findWordBoundaryRight: function(startFrom) {
                var offset = 0, index = startFrom;
                if (this._reSpace.test(this._text[index])) {
                  while (this._reSpace.test(this._text[index])) {
                    offset++;
                    index++;
                  }
                }
                while (/\S/.test(this._text[index]) && index < this._text.length) {
                  offset++;
                  index++;
                }
                return startFrom + offset;
              },
              findLineBoundaryLeft: function(startFrom) {
                var offset = 0, index = startFrom - 1;
                while (!/\n/.test(this._text[index]) && index > -1) {
                  offset++;
                  index--;
                }
                return startFrom - offset;
              },
              findLineBoundaryRight: function(startFrom) {
                var offset = 0, index = startFrom;
                while (!/\n/.test(this._text[index]) && index < this._text.length) {
                  offset++;
                  index++;
                }
                return startFrom + offset;
              },
              searchWordBoundary: function(selectionStart, direction) {
                var text = this._text, index = this._reSpace.test(text[selectionStart]) ? selectionStart - 1 : selectionStart, _char = text[index], reNonWord = fabric.reNonWord;
                while (!reNonWord.test(_char) && index > 0 && index < text.length) {
                  index += direction;
                  _char = text[index];
                }
                if (reNonWord.test(_char)) {
                  index += direction === 1 ? 0 : 1;
                }
                return index;
              },
              selectWord: function(selectionStart) {
                selectionStart = selectionStart || this.selectionStart;
                var newSelectionStart = this.searchWordBoundary(selectionStart, -1), newSelectionEnd = this.searchWordBoundary(selectionStart, 1);
                this.selectionStart = newSelectionStart;
                this.selectionEnd = newSelectionEnd;
                this._fireSelectionChanged();
                this._updateTextarea();
                this.renderCursorOrSelection();
              },
              selectLine: function(selectionStart) {
                selectionStart = selectionStart || this.selectionStart;
                var newSelectionStart = this.findLineBoundaryLeft(selectionStart), newSelectionEnd = this.findLineBoundaryRight(selectionStart);
                this.selectionStart = newSelectionStart;
                this.selectionEnd = newSelectionEnd;
                this._fireSelectionChanged();
                this._updateTextarea();
                return this;
              },
              enterEditing: function(e) {
                if (this.isEditing || !this.editable) {
                  return;
                }
                if (this.canvas) {
                  this.canvas.calcOffset();
                  this.exitEditingOnOthers(this.canvas);
                }
                this.isEditing = true;
                this.initHiddenTextarea(e);
                this.hiddenTextarea.focus();
                this.hiddenTextarea.value = this.text;
                this._updateTextarea();
                this._saveEditingProps();
                this._setEditingProps();
                this._textBeforeEdit = this.text;
                this._tick();
                this.fire("editing:entered");
                this._fireSelectionChanged();
                if (!this.canvas) {
                  return this;
                }
                this.canvas.fire("text:editing:entered", { target: this });
                this.initMouseMoveHandler();
                this.canvas.requestRenderAll();
                return this;
              },
              exitEditingOnOthers: function(canvas) {
                if (canvas._iTextInstances) {
                  canvas._iTextInstances.forEach(function(obj) {
                    obj.selected = false;
                    if (obj.isEditing) {
                      obj.exitEditing();
                    }
                  });
                }
              },
              initMouseMoveHandler: function() {
                this.canvas.on("mouse:move", this.mouseMoveHandler);
              },
              mouseMoveHandler: function(options) {
                if (!this.__isMousedown || !this.isEditing) {
                  return;
                }
                var newSelectionStart = this.getSelectionStartFromPointer(options.e), currentStart = this.selectionStart, currentEnd = this.selectionEnd;
                if ((newSelectionStart !== this.__selectionStartOnMouseDown || currentStart === currentEnd) && (currentStart === newSelectionStart || currentEnd === newSelectionStart)) {
                  return;
                }
                if (newSelectionStart > this.__selectionStartOnMouseDown) {
                  this.selectionStart = this.__selectionStartOnMouseDown;
                  this.selectionEnd = newSelectionStart;
                } else {
                  this.selectionStart = newSelectionStart;
                  this.selectionEnd = this.__selectionStartOnMouseDown;
                }
                if (this.selectionStart !== currentStart || this.selectionEnd !== currentEnd) {
                  this.restartCursorIfNeeded();
                  this._fireSelectionChanged();
                  this._updateTextarea();
                  this.renderCursorOrSelection();
                }
              },
              _setEditingProps: function() {
                this.hoverCursor = "text";
                if (this.canvas) {
                  this.canvas.defaultCursor = this.canvas.moveCursor = "text";
                }
                this.borderColor = this.editingBorderColor;
                this.hasControls = this.selectable = false;
                this.lockMovementX = this.lockMovementY = true;
              },
              fromStringToGraphemeSelection: function(start, end, text) {
                var smallerTextStart = text.slice(0, start), graphemeStart = fabric.util.string.graphemeSplit(smallerTextStart).length;
                if (start === end) {
                  return { selectionStart: graphemeStart, selectionEnd: graphemeStart };
                }
                var smallerTextEnd = text.slice(start, end), graphemeEnd = fabric.util.string.graphemeSplit(smallerTextEnd).length;
                return { selectionStart: graphemeStart, selectionEnd: graphemeStart + graphemeEnd };
              },
              fromGraphemeToStringSelection: function(start, end, _text) {
                var smallerTextStart = _text.slice(0, start), graphemeStart = smallerTextStart.join("").length;
                if (start === end) {
                  return { selectionStart: graphemeStart, selectionEnd: graphemeStart };
                }
                var smallerTextEnd = _text.slice(start, end), graphemeEnd = smallerTextEnd.join("").length;
                return { selectionStart: graphemeStart, selectionEnd: graphemeStart + graphemeEnd };
              },
              _updateTextarea: function() {
                this.cursorOffsetCache = {};
                if (!this.hiddenTextarea) {
                  return;
                }
                if (!this.inCompositionMode) {
                  var newSelection = this.fromGraphemeToStringSelection(this.selectionStart, this.selectionEnd, this._text);
                  this.hiddenTextarea.selectionStart = newSelection.selectionStart;
                  this.hiddenTextarea.selectionEnd = newSelection.selectionEnd;
                }
                this.updateTextareaPosition();
              },
              updateFromTextArea: function() {
                if (!this.hiddenTextarea) {
                  return;
                }
                this.cursorOffsetCache = {};
                this.text = this.hiddenTextarea.value;
                if (this._shouldClearDimensionCache()) {
                  this.initDimensions();
                  this.setCoords();
                }
                var newSelection = this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value);
                this.selectionEnd = this.selectionStart = newSelection.selectionEnd;
                if (!this.inCompositionMode) {
                  this.selectionStart = newSelection.selectionStart;
                }
                this.updateTextareaPosition();
              },
              updateTextareaPosition: function() {
                if (this.selectionStart === this.selectionEnd) {
                  var style = this._calcTextareaPosition();
                  this.hiddenTextarea.style.left = style.left;
                  this.hiddenTextarea.style.top = style.top;
                }
              },
              _calcTextareaPosition: function() {
                if (!this.canvas) {
                  return { x: 1, y: 1 };
                }
                var desiredPosition = this.inCompositionMode ? this.compositionStart : this.selectionStart, boundaries = this._getCursorBoundaries(desiredPosition), cursorLocation = this.get2DCursorLocation(desiredPosition), lineIndex = cursorLocation.lineIndex, charIndex = cursorLocation.charIndex, charHeight = this.getValueOfPropertyAt(lineIndex, charIndex, "fontSize") * this.lineHeight, leftOffset = boundaries.leftOffset, m = this.calcTransformMatrix(), p = {
                  x: boundaries.left + leftOffset,
                  y: boundaries.top + boundaries.topOffset + charHeight
                }, retinaScaling = this.canvas.getRetinaScaling(), upperCanvas = this.canvas.upperCanvasEl, upperCanvasWidth = upperCanvas.width / retinaScaling, upperCanvasHeight = upperCanvas.height / retinaScaling, maxWidth = upperCanvasWidth - charHeight, maxHeight = upperCanvasHeight - charHeight, scaleX = upperCanvas.clientWidth / upperCanvasWidth, scaleY = upperCanvas.clientHeight / upperCanvasHeight;
                p = fabric.util.transformPoint(p, m);
                p = fabric.util.transformPoint(p, this.canvas.viewportTransform);
                p.x *= scaleX;
                p.y *= scaleY;
                if (p.x < 0) {
                  p.x = 0;
                }
                if (p.x > maxWidth) {
                  p.x = maxWidth;
                }
                if (p.y < 0) {
                  p.y = 0;
                }
                if (p.y > maxHeight) {
                  p.y = maxHeight;
                }
                p.x += this.canvas._offset.left;
                p.y += this.canvas._offset.top;
                return { left: p.x + "px", top: p.y + "px", fontSize: charHeight + "px", charHeight };
              },
              _saveEditingProps: function() {
                this._savedProps = {
                  hasControls: this.hasControls,
                  borderColor: this.borderColor,
                  lockMovementX: this.lockMovementX,
                  lockMovementY: this.lockMovementY,
                  hoverCursor: this.hoverCursor,
                  selectable: this.selectable,
                  defaultCursor: this.canvas && this.canvas.defaultCursor,
                  moveCursor: this.canvas && this.canvas.moveCursor
                };
              },
              _restoreEditingProps: function() {
                if (!this._savedProps) {
                  return;
                }
                this.hoverCursor = this._savedProps.hoverCursor;
                this.hasControls = this._savedProps.hasControls;
                this.borderColor = this._savedProps.borderColor;
                this.selectable = this._savedProps.selectable;
                this.lockMovementX = this._savedProps.lockMovementX;
                this.lockMovementY = this._savedProps.lockMovementY;
                if (this.canvas) {
                  this.canvas.defaultCursor = this._savedProps.defaultCursor;
                  this.canvas.moveCursor = this._savedProps.moveCursor;
                }
              },
              exitEditing: function() {
                var isTextChanged = this._textBeforeEdit !== this.text;
                var hiddenTextarea = this.hiddenTextarea;
                this.selected = false;
                this.isEditing = false;
                this.selectionEnd = this.selectionStart;
                if (hiddenTextarea) {
                  hiddenTextarea.blur && hiddenTextarea.blur();
                  hiddenTextarea.parentNode && hiddenTextarea.parentNode.removeChild(hiddenTextarea);
                }
                this.hiddenTextarea = null;
                this.abortCursorAnimation();
                this._restoreEditingProps();
                this._currentCursorOpacity = 0;
                if (this._shouldClearDimensionCache()) {
                  this.initDimensions();
                  this.setCoords();
                }
                this.fire("editing:exited");
                isTextChanged && this.fire("modified");
                if (this.canvas) {
                  this.canvas.off("mouse:move", this.mouseMoveHandler);
                  this.canvas.fire("text:editing:exited", { target: this });
                  isTextChanged && this.canvas.fire("object:modified", { target: this });
                }
                return this;
              },
              _removeExtraneousStyles: function() {
                for (var prop in this.styles) {
                  if (!this._textLines[prop]) {
                    delete this.styles[prop];
                  }
                }
              },
              removeStyleFromTo: function(start, end) {
                var cursorStart = this.get2DCursorLocation(start, true), cursorEnd = this.get2DCursorLocation(end, true), lineStart = cursorStart.lineIndex, charStart = cursorStart.charIndex, lineEnd = cursorEnd.lineIndex, charEnd = cursorEnd.charIndex, i, styleObj;
                if (lineStart !== lineEnd) {
                  if (this.styles[lineStart]) {
                    for (i = charStart; i < this._unwrappedTextLines[lineStart].length; i++) {
                      delete this.styles[lineStart][i];
                    }
                  }
                  if (this.styles[lineEnd]) {
                    for (i = charEnd; i < this._unwrappedTextLines[lineEnd].length; i++) {
                      styleObj = this.styles[lineEnd][i];
                      if (styleObj) {
                        this.styles[lineStart] || (this.styles[lineStart] = {});
                        this.styles[lineStart][charStart + i - charEnd] = styleObj;
                      }
                    }
                  }
                  for (i = lineStart + 1; i <= lineEnd; i++) {
                    delete this.styles[i];
                  }
                  this.shiftLineStyles(lineEnd, lineStart - lineEnd);
                } else {
                  if (this.styles[lineStart]) {
                    styleObj = this.styles[lineStart];
                    var diff = charEnd - charStart, numericChar, _char;
                    for (i = charStart; i < charEnd; i++) {
                      delete styleObj[i];
                    }
                    for (_char in this.styles[lineStart]) {
                      numericChar = parseInt(_char, 10);
                      if (numericChar >= charEnd) {
                        styleObj[numericChar - diff] = styleObj[_char];
                        delete styleObj[_char];
                      }
                    }
                  }
                }
              },
              shiftLineStyles: function(lineIndex, offset) {
                var clonedStyles = clone(this.styles);
                for (var line in this.styles) {
                  var numericLine = parseInt(line, 10);
                  if (numericLine > lineIndex) {
                    this.styles[numericLine + offset] = clonedStyles[numericLine];
                    if (!clonedStyles[numericLine - offset]) {
                      delete this.styles[numericLine];
                    }
                  }
                }
              },
              restartCursorIfNeeded: function() {
                if (!this._currentTickState || this._currentTickState.isAborted || !this._currentTickCompleteState || this._currentTickCompleteState.isAborted) {
                  this.initDelayedCursor();
                }
              },
              insertNewlineStyleObject: function(lineIndex, charIndex, qty, copiedStyle) {
                var currentCharStyle, newLineStyles = {}, somethingAdded = false, isEndOfLine = this._unwrappedTextLines[lineIndex].length === charIndex;
                qty || (qty = 1);
                this.shiftLineStyles(lineIndex, qty);
                if (this.styles[lineIndex]) {
                  currentCharStyle = this.styles[lineIndex][charIndex === 0 ? charIndex : charIndex - 1];
                }
                for (var index in this.styles[lineIndex]) {
                  var numIndex = parseInt(index, 10);
                  if (numIndex >= charIndex) {
                    somethingAdded = true;
                    newLineStyles[numIndex - charIndex] = this.styles[lineIndex][index];
                    if (!(isEndOfLine && charIndex === 0)) {
                      delete this.styles[lineIndex][index];
                    }
                  }
                }
                var styleCarriedOver = false;
                if (somethingAdded && !isEndOfLine) {
                  this.styles[lineIndex + qty] = newLineStyles;
                  styleCarriedOver = true;
                }
                if (styleCarriedOver) {
                  qty--;
                }
                while (qty > 0) {
                  if (copiedStyle && copiedStyle[qty - 1]) {
                    this.styles[lineIndex + qty] = { 0: clone(copiedStyle[qty - 1]) };
                  } else if (currentCharStyle) {
                    this.styles[lineIndex + qty] = { 0: clone(currentCharStyle) };
                  } else {
                    delete this.styles[lineIndex + qty];
                  }
                  qty--;
                }
                this._forceClearCache = true;
              },
              insertCharStyleObject: function(lineIndex, charIndex, quantity, copiedStyle) {
                if (!this.styles) {
                  this.styles = {};
                }
                var currentLineStyles = this.styles[lineIndex], currentLineStylesCloned = currentLineStyles ? clone(currentLineStyles) : {};
                quantity || (quantity = 1);
                for (var index in currentLineStylesCloned) {
                  var numericIndex = parseInt(index, 10);
                  if (numericIndex >= charIndex) {
                    currentLineStyles[numericIndex + quantity] = currentLineStylesCloned[numericIndex];
                    if (!currentLineStylesCloned[numericIndex - quantity]) {
                      delete currentLineStyles[numericIndex];
                    }
                  }
                }
                this._forceClearCache = true;
                if (copiedStyle) {
                  while (quantity--) {
                    if (!Object.keys(copiedStyle[quantity]).length) {
                      continue;
                    }
                    if (!this.styles[lineIndex]) {
                      this.styles[lineIndex] = {};
                    }
                    this.styles[lineIndex][charIndex + quantity] = clone(copiedStyle[quantity]);
                  }
                  return;
                }
                if (!currentLineStyles) {
                  return;
                }
                var newStyle = currentLineStyles[charIndex ? charIndex - 1 : 1];
                while (newStyle && quantity--) {
                  this.styles[lineIndex][charIndex + quantity] = clone(newStyle);
                }
              },
              insertNewStyleBlock: function(insertedText, start, copiedStyle) {
                var cursorLoc = this.get2DCursorLocation(start, true), addedLines = [0], linesLength = 0;
                for (var i = 0; i < insertedText.length; i++) {
                  if (insertedText[i] === "\n") {
                    linesLength++;
                    addedLines[linesLength] = 0;
                  } else {
                    addedLines[linesLength]++;
                  }
                }
                if (addedLines[0] > 0) {
                  this.insertCharStyleObject(cursorLoc.lineIndex, cursorLoc.charIndex, addedLines[0], copiedStyle);
                  copiedStyle = copiedStyle && copiedStyle.slice(addedLines[0] + 1);
                }
                linesLength && this.insertNewlineStyleObject(cursorLoc.lineIndex, cursorLoc.charIndex + addedLines[0], linesLength);
                for (var i = 1; i < linesLength; i++) {
                  if (addedLines[i] > 0) {
                    this.insertCharStyleObject(cursorLoc.lineIndex + i, 0, addedLines[i], copiedStyle);
                  } else if (copiedStyle) {
                    this.styles[cursorLoc.lineIndex + i][0] = copiedStyle[0];
                  }
                  copiedStyle = copiedStyle && copiedStyle.slice(addedLines[i] + 1);
                }
                if (addedLines[i] > 0) {
                  this.insertCharStyleObject(cursorLoc.lineIndex + i, 0, addedLines[i], copiedStyle);
                }
              },
              setSelectionStartEndWithShift: function(start, end, newSelection) {
                if (newSelection <= start) {
                  if (end === start) {
                    this._selectionDirection = "left";
                  } else if (this._selectionDirection === "right") {
                    this._selectionDirection = "left";
                    this.selectionEnd = start;
                  }
                  this.selectionStart = newSelection;
                } else if (newSelection > start && newSelection < end) {
                  if (this._selectionDirection === "right") {
                    this.selectionEnd = newSelection;
                  } else {
                    this.selectionStart = newSelection;
                  }
                } else {
                  if (end === start) {
                    this._selectionDirection = "right";
                  } else if (this._selectionDirection === "left") {
                    this._selectionDirection = "right";
                    this.selectionStart = end;
                  }
                  this.selectionEnd = newSelection;
                }
              },
              setSelectionInBoundaries: function() {
                var length = this.text.length;
                if (this.selectionStart > length) {
                  this.selectionStart = length;
                } else if (this.selectionStart < 0) {
                  this.selectionStart = 0;
                }
                if (this.selectionEnd > length) {
                  this.selectionEnd = length;
                } else if (this.selectionEnd < 0) {
                  this.selectionEnd = 0;
                }
              }
            });
          })();
          fabric.util.object.extend(fabric.IText.prototype, {
            initDoubleClickSimulation: function() {
              this.__lastClickTime = +new Date();
              this.__lastLastClickTime = +new Date();
              this.__lastPointer = {};
              this.on("mousedown", this.onMouseDown);
            },
            onMouseDown: function(options) {
              if (!this.canvas) {
                return;
              }
              this.__newClickTime = +new Date();
              var newPointer = options.pointer;
              if (this.isTripleClick(newPointer)) {
                this.fire("tripleclick", options);
                this._stopEvent(options.e);
              }
              this.__lastLastClickTime = this.__lastClickTime;
              this.__lastClickTime = this.__newClickTime;
              this.__lastPointer = newPointer;
              this.__lastIsEditing = this.isEditing;
              this.__lastSelected = this.selected;
            },
            isTripleClick: function(newPointer) {
              return this.__newClickTime - this.__lastClickTime < 500 && this.__lastClickTime - this.__lastLastClickTime < 500 && this.__lastPointer.x === newPointer.x && this.__lastPointer.y === newPointer.y;
            },
            _stopEvent: function(e) {
              e.preventDefault && e.preventDefault();
              e.stopPropagation && e.stopPropagation();
            },
            initCursorSelectionHandlers: function() {
              this.initMousedownHandler();
              this.initMouseupHandler();
              this.initClicks();
            },
            doubleClickHandler: function(options) {
              if (!this.isEditing) {
                return;
              }
              this.selectWord(this.getSelectionStartFromPointer(options.e));
            },
            tripleClickHandler: function(options) {
              if (!this.isEditing) {
                return;
              }
              this.selectLine(this.getSelectionStartFromPointer(options.e));
            },
            initClicks: function() {
              this.on("mousedblclick", this.doubleClickHandler);
              this.on("tripleclick", this.tripleClickHandler);
            },
            _mouseDownHandler: function(options) {
              if (!this.canvas || !this.editable || options.e.button && options.e.button !== 1) {
                return;
              }
              this.__isMousedown = true;
              if (this.selected) {
                this.inCompositionMode = false;
                this.setCursorByClick(options.e);
              }
              if (this.isEditing) {
                this.__selectionStartOnMouseDown = this.selectionStart;
                if (this.selectionStart === this.selectionEnd) {
                  this.abortCursorAnimation();
                }
                this.renderCursorOrSelection();
              }
            },
            _mouseDownHandlerBefore: function(options) {
              if (!this.canvas || !this.editable || options.e.button && options.e.button !== 1) {
                return;
              }
              this.selected = this === this.canvas._activeObject;
            },
            initMousedownHandler: function() {
              this.on("mousedown", this._mouseDownHandler);
              this.on("mousedown:before", this._mouseDownHandlerBefore);
            },
            initMouseupHandler: function() {
              this.on("mouseup", this.mouseUpHandler);
            },
            mouseUpHandler: function(options) {
              this.__isMousedown = false;
              if (!this.editable || this.group || options.transform && options.transform.actionPerformed || options.e.button && options.e.button !== 1) {
                return;
              }
              if (this.canvas) {
                var currentActive = this.canvas._activeObject;
                if (currentActive && currentActive !== this) {
                  return;
                }
              }
              if (this.__lastSelected && !this.__corner) {
                this.selected = false;
                this.__lastSelected = false;
                this.enterEditing(options.e);
                if (this.selectionStart === this.selectionEnd) {
                  this.initDelayedCursor(true);
                } else {
                  this.renderCursorOrSelection();
                }
              } else {
                this.selected = true;
              }
            },
            setCursorByClick: function(e) {
              var newSelection = this.getSelectionStartFromPointer(e), start = this.selectionStart, end = this.selectionEnd;
              if (e.shiftKey) {
                this.setSelectionStartEndWithShift(start, end, newSelection);
              } else {
                this.selectionStart = newSelection;
                this.selectionEnd = newSelection;
              }
              if (this.isEditing) {
                this._fireSelectionChanged();
                this._updateTextarea();
              }
            },
            getSelectionStartFromPointer: function(e) {
              var mouseOffset = this.getLocalPointer(e), prevWidth = 0, width = 0, height = 0, charIndex = 0, lineIndex = 0, lineLeftOffset, line;
              for (var i = 0, len = this._textLines.length; i < len; i++) {
                if (height <= mouseOffset.y) {
                  height += this.getHeightOfLine(i) * this.scaleY;
                  lineIndex = i;
                  if (i > 0) {
                    charIndex += this._textLines[i - 1].length + this.missingNewlineOffset(i - 1);
                  }
                } else {
                  break;
                }
              }
              lineLeftOffset = this._getLineLeftOffset(lineIndex);
              width = lineLeftOffset * this.scaleX;
              line = this._textLines[lineIndex];
              if (this.direction === "rtl") {
                mouseOffset.x = this.width * this.scaleX - mouseOffset.x + width;
              }
              for (var j = 0, jlen = line.length; j < jlen; j++) {
                prevWidth = width;
                width += this.__charBounds[lineIndex][j].kernedWidth * this.scaleX;
                if (width <= mouseOffset.x) {
                  charIndex++;
                } else {
                  break;
                }
              }
              return this._getNewSelectionStartFromOffset(mouseOffset, prevWidth, width, charIndex, jlen);
            },
            _getNewSelectionStartFromOffset: function(mouseOffset, prevWidth, width, index, jlen) {
              var distanceBtwLastCharAndCursor = mouseOffset.x - prevWidth, distanceBtwNextCharAndCursor = width - mouseOffset.x, offset = distanceBtwNextCharAndCursor > distanceBtwLastCharAndCursor || distanceBtwNextCharAndCursor < 0 ? 0 : 1, newSelectionStart = index + offset;
              if (this.flipX) {
                newSelectionStart = jlen - newSelectionStart;
              }
              if (newSelectionStart > this._text.length) {
                newSelectionStart = this._text.length;
              }
              return newSelectionStart;
            }
          });
          fabric.util.object.extend(fabric.IText.prototype, {
            initHiddenTextarea: function() {
              this.hiddenTextarea = fabric.document.createElement("textarea");
              this.hiddenTextarea.setAttribute("autocapitalize", "off");
              this.hiddenTextarea.setAttribute("autocorrect", "off");
              this.hiddenTextarea.setAttribute("autocomplete", "off");
              this.hiddenTextarea.setAttribute("spellcheck", "false");
              this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea", "");
              this.hiddenTextarea.setAttribute("wrap", "off");
              var style = this._calcTextareaPosition();
              this.hiddenTextarea.style.cssText = "position: absolute; top: " + style.top + "; left: " + style.left + "; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: " + style.fontSize + ";";
              if (this.hiddenTextareaContainer) {
                this.hiddenTextareaContainer.appendChild(this.hiddenTextarea);
              } else {
                fabric.document.body.appendChild(this.hiddenTextarea);
              }
              fabric.util.addListener(this.hiddenTextarea, "keydown", this.onKeyDown.bind(this));
              fabric.util.addListener(this.hiddenTextarea, "keyup", this.onKeyUp.bind(this));
              fabric.util.addListener(this.hiddenTextarea, "input", this.onInput.bind(this));
              fabric.util.addListener(this.hiddenTextarea, "copy", this.copy.bind(this));
              fabric.util.addListener(this.hiddenTextarea, "cut", this.copy.bind(this));
              fabric.util.addListener(this.hiddenTextarea, "paste", this.paste.bind(this));
              fabric.util.addListener(this.hiddenTextarea, "compositionstart", this.onCompositionStart.bind(this));
              fabric.util.addListener(this.hiddenTextarea, "compositionupdate", this.onCompositionUpdate.bind(this));
              fabric.util.addListener(this.hiddenTextarea, "compositionend", this.onCompositionEnd.bind(this));
              if (!this._clickHandlerInitialized && this.canvas) {
                fabric.util.addListener(this.canvas.upperCanvasEl, "click", this.onClick.bind(this));
                this._clickHandlerInitialized = true;
              }
            },
            keysMap: {
              9: "exitEditing",
              27: "exitEditing",
              33: "moveCursorUp",
              34: "moveCursorDown",
              35: "moveCursorRight",
              36: "moveCursorLeft",
              37: "moveCursorLeft",
              38: "moveCursorUp",
              39: "moveCursorRight",
              40: "moveCursorDown"
            },
            keysMapRtl: {
              9: "exitEditing",
              27: "exitEditing",
              33: "moveCursorUp",
              34: "moveCursorDown",
              35: "moveCursorLeft",
              36: "moveCursorRight",
              37: "moveCursorRight",
              38: "moveCursorUp",
              39: "moveCursorLeft",
              40: "moveCursorDown"
            },
            ctrlKeysMapUp: {
              67: "copy",
              88: "cut"
            },
            ctrlKeysMapDown: {
              65: "selectAll"
            },
            onClick: function() {
              this.hiddenTextarea && this.hiddenTextarea.focus();
            },
            onKeyDown: function(e) {
              if (!this.isEditing) {
                return;
              }
              var keyMap = this.direction === "rtl" ? this.keysMapRtl : this.keysMap;
              if (e.keyCode in keyMap) {
                this[keyMap[e.keyCode]](e);
              } else if (e.keyCode in this.ctrlKeysMapDown && (e.ctrlKey || e.metaKey)) {
                this[this.ctrlKeysMapDown[e.keyCode]](e);
              } else {
                return;
              }
              e.stopImmediatePropagation();
              e.preventDefault();
              if (e.keyCode >= 33 && e.keyCode <= 40) {
                this.inCompositionMode = false;
                this.clearContextTop();
                this.renderCursorOrSelection();
              } else {
                this.canvas && this.canvas.requestRenderAll();
              }
            },
            onKeyUp: function(e) {
              if (!this.isEditing || this._copyDone || this.inCompositionMode) {
                this._copyDone = false;
                return;
              }
              if (e.keyCode in this.ctrlKeysMapUp && (e.ctrlKey || e.metaKey)) {
                this[this.ctrlKeysMapUp[e.keyCode]](e);
              } else {
                return;
              }
              e.stopImmediatePropagation();
              e.preventDefault();
              this.canvas && this.canvas.requestRenderAll();
            },
            onInput: function(e) {
              var fromPaste = this.fromPaste;
              this.fromPaste = false;
              e && e.stopPropagation();
              if (!this.isEditing) {
                return;
              }
              var nextText = this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText, charCount = this._text.length, nextCharCount = nextText.length, removedText, insertedText, charDiff = nextCharCount - charCount, selectionStart = this.selectionStart, selectionEnd = this.selectionEnd, selection = selectionStart !== selectionEnd, copiedStyle, removeFrom, removeTo;
              if (this.hiddenTextarea.value === "") {
                this.styles = {};
                this.updateFromTextArea();
                this.fire("changed");
                if (this.canvas) {
                  this.canvas.fire("text:changed", { target: this });
                  this.canvas.requestRenderAll();
                }
                return;
              }
              var textareaSelection = this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value);
              var backDelete = selectionStart > textareaSelection.selectionStart;
              if (selection) {
                removedText = this._text.slice(selectionStart, selectionEnd);
                charDiff += selectionEnd - selectionStart;
              } else if (nextCharCount < charCount) {
                if (backDelete) {
                  removedText = this._text.slice(selectionEnd + charDiff, selectionEnd);
                } else {
                  removedText = this._text.slice(selectionStart, selectionStart - charDiff);
                }
              }
              insertedText = nextText.slice(textareaSelection.selectionEnd - charDiff, textareaSelection.selectionEnd);
              if (removedText && removedText.length) {
                if (insertedText.length) {
                  copiedStyle = this.getSelectionStyles(selectionStart, selectionStart + 1, false);
                  copiedStyle = insertedText.map(function() {
                    return copiedStyle[0];
                  });
                }
                if (selection) {
                  removeFrom = selectionStart;
                  removeTo = selectionEnd;
                } else if (backDelete) {
                  removeFrom = selectionEnd - removedText.length;
                  removeTo = selectionEnd;
                } else {
                  removeFrom = selectionEnd;
                  removeTo = selectionEnd + removedText.length;
                }
                this.removeStyleFromTo(removeFrom, removeTo);
              }
              if (insertedText.length) {
                if (fromPaste && insertedText.join("") === fabric.copiedText && !fabric.disableStyleCopyPaste) {
                  copiedStyle = fabric.copiedTextStyle;
                }
                this.insertNewStyleBlock(insertedText, selectionStart, copiedStyle);
              }
              this.updateFromTextArea();
              this.fire("changed");
              if (this.canvas) {
                this.canvas.fire("text:changed", { target: this });
                this.canvas.requestRenderAll();
              }
            },
            onCompositionStart: function() {
              this.inCompositionMode = true;
            },
            onCompositionEnd: function() {
              this.inCompositionMode = false;
            },
            onCompositionUpdate: function(e) {
              this.compositionStart = e.target.selectionStart;
              this.compositionEnd = e.target.selectionEnd;
              this.updateTextareaPosition();
            },
            copy: function() {
              if (this.selectionStart === this.selectionEnd) {
                return;
              }
              fabric.copiedText = this.getSelectedText();
              if (!fabric.disableStyleCopyPaste) {
                fabric.copiedTextStyle = this.getSelectionStyles(this.selectionStart, this.selectionEnd, true);
              } else {
                fabric.copiedTextStyle = null;
              }
              this._copyDone = true;
            },
            paste: function() {
              this.fromPaste = true;
            },
            _getClipboardData: function(e) {
              return e && e.clipboardData || fabric.window.clipboardData;
            },
            _getWidthBeforeCursor: function(lineIndex, charIndex) {
              var widthBeforeCursor = this._getLineLeftOffset(lineIndex), bound;
              if (charIndex > 0) {
                bound = this.__charBounds[lineIndex][charIndex - 1];
                widthBeforeCursor += bound.left + bound.width;
              }
              return widthBeforeCursor;
            },
            getDownCursorOffset: function(e, isRight) {
              var selectionProp = this._getSelectionForOffset(e, isRight), cursorLocation = this.get2DCursorLocation(selectionProp), lineIndex = cursorLocation.lineIndex;
              if (lineIndex === this._textLines.length - 1 || e.metaKey || e.keyCode === 34) {
                return this._text.length - selectionProp;
              }
              var charIndex = cursorLocation.charIndex, widthBeforeCursor = this._getWidthBeforeCursor(lineIndex, charIndex), indexOnOtherLine = this._getIndexOnLine(lineIndex + 1, widthBeforeCursor), textAfterCursor = this._textLines[lineIndex].slice(charIndex);
              return textAfterCursor.length + indexOnOtherLine + 1 + this.missingNewlineOffset(lineIndex);
            },
            _getSelectionForOffset: function(e, isRight) {
              if (e.shiftKey && this.selectionStart !== this.selectionEnd && isRight) {
                return this.selectionEnd;
              } else {
                return this.selectionStart;
              }
            },
            getUpCursorOffset: function(e, isRight) {
              var selectionProp = this._getSelectionForOffset(e, isRight), cursorLocation = this.get2DCursorLocation(selectionProp), lineIndex = cursorLocation.lineIndex;
              if (lineIndex === 0 || e.metaKey || e.keyCode === 33) {
                return -selectionProp;
              }
              var charIndex = cursorLocation.charIndex, widthBeforeCursor = this._getWidthBeforeCursor(lineIndex, charIndex), indexOnOtherLine = this._getIndexOnLine(lineIndex - 1, widthBeforeCursor), textBeforeCursor = this._textLines[lineIndex].slice(0, charIndex), missingNewlineOffset = this.missingNewlineOffset(lineIndex - 1);
              return -this._textLines[lineIndex - 1].length + indexOnOtherLine - textBeforeCursor.length + (1 - missingNewlineOffset);
            },
            _getIndexOnLine: function(lineIndex, width) {
              var line = this._textLines[lineIndex], lineLeftOffset = this._getLineLeftOffset(lineIndex), widthOfCharsOnLine = lineLeftOffset, indexOnLine = 0, charWidth, foundMatch;
              for (var j = 0, jlen = line.length; j < jlen; j++) {
                charWidth = this.__charBounds[lineIndex][j].width;
                widthOfCharsOnLine += charWidth;
                if (widthOfCharsOnLine > width) {
                  foundMatch = true;
                  var leftEdge = widthOfCharsOnLine - charWidth, rightEdge = widthOfCharsOnLine, offsetFromLeftEdge = Math.abs(leftEdge - width), offsetFromRightEdge = Math.abs(rightEdge - width);
                  indexOnLine = offsetFromRightEdge < offsetFromLeftEdge ? j : j - 1;
                  break;
                }
              }
              if (!foundMatch) {
                indexOnLine = line.length - 1;
              }
              return indexOnLine;
            },
            moveCursorDown: function(e) {
              if (this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length) {
                return;
              }
              this._moveCursorUpOrDown("Down", e);
            },
            moveCursorUp: function(e) {
              if (this.selectionStart === 0 && this.selectionEnd === 0) {
                return;
              }
              this._moveCursorUpOrDown("Up", e);
            },
            _moveCursorUpOrDown: function(direction, e) {
              var action = "get" + direction + "CursorOffset", offset = this[action](e, this._selectionDirection === "right");
              if (e.shiftKey) {
                this.moveCursorWithShift(offset);
              } else {
                this.moveCursorWithoutShift(offset);
              }
              if (offset !== 0) {
                this.setSelectionInBoundaries();
                this.abortCursorAnimation();
                this._currentCursorOpacity = 1;
                this.initDelayedCursor();
                this._fireSelectionChanged();
                this._updateTextarea();
              }
            },
            moveCursorWithShift: function(offset) {
              var newSelection = this._selectionDirection === "left" ? this.selectionStart + offset : this.selectionEnd + offset;
              this.setSelectionStartEndWithShift(this.selectionStart, this.selectionEnd, newSelection);
              return offset !== 0;
            },
            moveCursorWithoutShift: function(offset) {
              if (offset < 0) {
                this.selectionStart += offset;
                this.selectionEnd = this.selectionStart;
              } else {
                this.selectionEnd += offset;
                this.selectionStart = this.selectionEnd;
              }
              return offset !== 0;
            },
            moveCursorLeft: function(e) {
              if (this.selectionStart === 0 && this.selectionEnd === 0) {
                return;
              }
              this._moveCursorLeftOrRight("Left", e);
            },
            _move: function(e, prop, direction) {
              var newValue;
              if (e.altKey) {
                newValue = this["findWordBoundary" + direction](this[prop]);
              } else if (e.metaKey || e.keyCode === 35 || e.keyCode === 36) {
                newValue = this["findLineBoundary" + direction](this[prop]);
              } else {
                this[prop] += direction === "Left" ? -1 : 1;
                return true;
              }
              if (typeof newValue !== void 0 && this[prop] !== newValue) {
                this[prop] = newValue;
                return true;
              }
            },
            _moveLeft: function(e, prop) {
              return this._move(e, prop, "Left");
            },
            _moveRight: function(e, prop) {
              return this._move(e, prop, "Right");
            },
            moveCursorLeftWithoutShift: function(e) {
              var change = true;
              this._selectionDirection = "left";
              if (this.selectionEnd === this.selectionStart && this.selectionStart !== 0) {
                change = this._moveLeft(e, "selectionStart");
              }
              this.selectionEnd = this.selectionStart;
              return change;
            },
            moveCursorLeftWithShift: function(e) {
              if (this._selectionDirection === "right" && this.selectionStart !== this.selectionEnd) {
                return this._moveLeft(e, "selectionEnd");
              } else if (this.selectionStart !== 0) {
                this._selectionDirection = "left";
                return this._moveLeft(e, "selectionStart");
              }
            },
            moveCursorRight: function(e) {
              if (this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length) {
                return;
              }
              this._moveCursorLeftOrRight("Right", e);
            },
            _moveCursorLeftOrRight: function(direction, e) {
              var actionName = "moveCursor" + direction + "With";
              this._currentCursorOpacity = 1;
              if (e.shiftKey) {
                actionName += "Shift";
              } else {
                actionName += "outShift";
              }
              if (this[actionName](e)) {
                this.abortCursorAnimation();
                this.initDelayedCursor();
                this._fireSelectionChanged();
                this._updateTextarea();
              }
            },
            moveCursorRightWithShift: function(e) {
              if (this._selectionDirection === "left" && this.selectionStart !== this.selectionEnd) {
                return this._moveRight(e, "selectionStart");
              } else if (this.selectionEnd !== this._text.length) {
                this._selectionDirection = "right";
                return this._moveRight(e, "selectionEnd");
              }
            },
            moveCursorRightWithoutShift: function(e) {
              var changed = true;
              this._selectionDirection = "right";
              if (this.selectionStart === this.selectionEnd) {
                changed = this._moveRight(e, "selectionStart");
                this.selectionEnd = this.selectionStart;
              } else {
                this.selectionStart = this.selectionEnd;
              }
              return changed;
            },
            removeChars: function(start, end) {
              if (typeof end === "undefined") {
                end = start + 1;
              }
              this.removeStyleFromTo(start, end);
              this._text.splice(start, end - start);
              this.text = this._text.join("");
              this.set("dirty", true);
              if (this._shouldClearDimensionCache()) {
                this.initDimensions();
                this.setCoords();
              }
              this._removeExtraneousStyles();
            },
            insertChars: function(text, style, start, end) {
              if (typeof end === "undefined") {
                end = start;
              }
              if (end > start) {
                this.removeStyleFromTo(start, end);
              }
              var graphemes = fabric.util.string.graphemeSplit(text);
              this.insertNewStyleBlock(graphemes, start, style);
              this._text = [].concat(this._text.slice(0, start), graphemes, this._text.slice(end));
              this.text = this._text.join("");
              this.set("dirty", true);
              if (this._shouldClearDimensionCache()) {
                this.initDimensions();
                this.setCoords();
              }
              this._removeExtraneousStyles();
            }
          });
          (function() {
            var toFixed = fabric.util.toFixed, multipleSpacesRegex = /  +/g;
            fabric.util.object.extend(fabric.Text.prototype, {
              _toSVG: function() {
                var offsets = this._getSVGLeftTopOffsets(), textAndBg = this._getSVGTextAndBg(offsets.textTop, offsets.textLeft);
                return this._wrapSVGTextAndBg(textAndBg);
              },
              toSVG: function(reviver) {
                return this._createBaseSVGMarkup(this._toSVG(), { reviver, noStyle: true, withShadow: true });
              },
              _getSVGLeftTopOffsets: function() {
                return {
                  textLeft: -this.width / 2,
                  textTop: -this.height / 2,
                  lineTop: this.getHeightOfLine(0)
                };
              },
              _wrapSVGTextAndBg: function(textAndBg) {
                var noShadow = true, textDecoration = this.getSvgTextDecoration(this);
                return [
                  textAndBg.textBgRects.join(""),
                  '		<text xml:space="preserve" ',
                  this.fontFamily ? 'font-family="' + this.fontFamily.replace(/"/g, "'") + '" ' : "",
                  this.fontSize ? 'font-size="' + this.fontSize + '" ' : "",
                  this.fontStyle ? 'font-style="' + this.fontStyle + '" ' : "",
                  this.fontWeight ? 'font-weight="' + this.fontWeight + '" ' : "",
                  textDecoration ? 'text-decoration="' + textDecoration + '" ' : "",
                  'style="',
                  this.getSvgStyles(noShadow),
                  '"',
                  this.addPaintOrder(),
                  " >",
                  textAndBg.textSpans.join(""),
                  "</text>\n"
                ];
              },
              _getSVGTextAndBg: function(textTopOffset, textLeftOffset) {
                var textSpans = [], textBgRects = [], height = textTopOffset, lineOffset;
                this._setSVGBg(textBgRects);
                for (var i = 0, len = this._textLines.length; i < len; i++) {
                  lineOffset = this._getLineLeftOffset(i);
                  if (this.textBackgroundColor || this.styleHas("textBackgroundColor", i)) {
                    this._setSVGTextLineBg(textBgRects, i, textLeftOffset + lineOffset, height);
                  }
                  this._setSVGTextLineText(textSpans, i, textLeftOffset + lineOffset, height);
                  height += this.getHeightOfLine(i);
                }
                return {
                  textSpans,
                  textBgRects
                };
              },
              _createTextCharSpan: function(_char, styleDecl, left, top) {
                var shouldUseWhitespace = _char !== _char.trim() || _char.match(multipleSpacesRegex), styleProps = this.getSvgSpanStyles(styleDecl, shouldUseWhitespace), fillStyles = styleProps ? 'style="' + styleProps + '"' : "", dy = styleDecl.deltaY, dySpan = "", NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;
                if (dy) {
                  dySpan = ' dy="' + toFixed(dy, NUM_FRACTION_DIGITS) + '" ';
                }
                return [
                  '<tspan x="',
                  toFixed(left, NUM_FRACTION_DIGITS),
                  '" y="',
                  toFixed(top, NUM_FRACTION_DIGITS),
                  '" ',
                  dySpan,
                  fillStyles,
                  ">",
                  fabric.util.string.escapeXml(_char),
                  "</tspan>"
                ].join("");
              },
              _setSVGTextLineText: function(textSpans, lineIndex, textLeftOffset, textTopOffset) {
                var lineHeight = this.getHeightOfLine(lineIndex), isJustify = this.textAlign.indexOf("justify") !== -1, actualStyle, nextStyle, charsToRender = "", charBox, style, boxWidth = 0, line = this._textLines[lineIndex], timeToRender;
                textTopOffset += lineHeight * (1 - this._fontSizeFraction) / this.lineHeight;
                for (var i = 0, len = line.length - 1; i <= len; i++) {
                  timeToRender = i === len || this.charSpacing;
                  charsToRender += line[i];
                  charBox = this.__charBounds[lineIndex][i];
                  if (boxWidth === 0) {
                    textLeftOffset += charBox.kernedWidth - charBox.width;
                    boxWidth += charBox.width;
                  } else {
                    boxWidth += charBox.kernedWidth;
                  }
                  if (isJustify && !timeToRender) {
                    if (this._reSpaceAndTab.test(line[i])) {
                      timeToRender = true;
                    }
                  }
                  if (!timeToRender) {
                    actualStyle = actualStyle || this.getCompleteStyleDeclaration(lineIndex, i);
                    nextStyle = this.getCompleteStyleDeclaration(lineIndex, i + 1);
                    timeToRender = this._hasStyleChangedForSvg(actualStyle, nextStyle);
                  }
                  if (timeToRender) {
                    style = this._getStyleDeclaration(lineIndex, i) || {};
                    textSpans.push(this._createTextCharSpan(charsToRender, style, textLeftOffset, textTopOffset));
                    charsToRender = "";
                    actualStyle = nextStyle;
                    textLeftOffset += boxWidth;
                    boxWidth = 0;
                  }
                }
              },
              _pushTextBgRect: function(textBgRects, color, left, top, width, height) {
                var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;
                textBgRects.push("		<rect ", this._getFillAttributes(color), ' x="', toFixed(left, NUM_FRACTION_DIGITS), '" y="', toFixed(top, NUM_FRACTION_DIGITS), '" width="', toFixed(width, NUM_FRACTION_DIGITS), '" height="', toFixed(height, NUM_FRACTION_DIGITS), '"></rect>\n');
              },
              _setSVGTextLineBg: function(textBgRects, i, leftOffset, textTopOffset) {
                var line = this._textLines[i], heightOfLine = this.getHeightOfLine(i) / this.lineHeight, boxWidth = 0, boxStart = 0, charBox, currentColor, lastColor = this.getValueOfPropertyAt(i, 0, "textBackgroundColor");
                for (var j = 0, jlen = line.length; j < jlen; j++) {
                  charBox = this.__charBounds[i][j];
                  currentColor = this.getValueOfPropertyAt(i, j, "textBackgroundColor");
                  if (currentColor !== lastColor) {
                    lastColor && this._pushTextBgRect(textBgRects, lastColor, leftOffset + boxStart, textTopOffset, boxWidth, heightOfLine);
                    boxStart = charBox.left;
                    boxWidth = charBox.width;
                    lastColor = currentColor;
                  } else {
                    boxWidth += charBox.kernedWidth;
                  }
                }
                currentColor && this._pushTextBgRect(textBgRects, currentColor, leftOffset + boxStart, textTopOffset, boxWidth, heightOfLine);
              },
              _getFillAttributes: function(value) {
                var fillColor = value && typeof value === "string" ? new fabric.Color(value) : "";
                if (!fillColor || !fillColor.getSource() || fillColor.getAlpha() === 1) {
                  return 'fill="' + value + '"';
                }
                return 'opacity="' + fillColor.getAlpha() + '" fill="' + fillColor.setAlpha(1).toRgb() + '"';
              },
              _getSVGLineTopOffset: function(lineIndex) {
                var lineTopOffset = 0, lastHeight = 0;
                for (var j = 0; j < lineIndex; j++) {
                  lineTopOffset += this.getHeightOfLine(j);
                }
                lastHeight = this.getHeightOfLine(j);
                return {
                  lineTop: lineTopOffset,
                  offset: (this._fontSizeMult - this._fontSizeFraction) * lastHeight / (this.lineHeight * this._fontSizeMult)
                };
              },
              getSvgStyles: function(skipShadow) {
                var svgStyle = fabric.Object.prototype.getSvgStyles.call(this, skipShadow);
                return svgStyle + " white-space: pre;";
              }
            });
          })();
          (function(global2) {
            var fabric2 = global2.fabric || (global2.fabric = {});
            fabric2.Textbox = fabric2.util.createClass(fabric2.IText, fabric2.Observable, {
              type: "textbox",
              minWidth: 20,
              dynamicMinWidth: 2,
              __cachedLines: null,
              lockScalingFlip: true,
              noScaleCache: false,
              _dimensionAffectingProps: fabric2.Text.prototype._dimensionAffectingProps.concat("width"),
              _wordJoiners: /[ \t\r]/,
              splitByGrapheme: false,
              initDimensions: function() {
                if (this.__skipDimension) {
                  return;
                }
                this.isEditing && this.initDelayedCursor();
                this.clearContextTop();
                this._clearCache();
                this.dynamicMinWidth = 0;
                this._styleMap = this._generateStyleMap(this._splitText());
                if (this.dynamicMinWidth > this.width) {
                  this._set("width", this.dynamicMinWidth);
                }
                if (this.textAlign.indexOf("justify") !== -1) {
                  this.enlargeSpaces();
                }
                this.height = this.calcTextHeight();
                this.saveState({ propertySet: "_dimensionAffectingProps" });
              },
              _generateStyleMap: function(textInfo) {
                var realLineCount = 0, realLineCharCount = 0, charCount = 0, map = {};
                for (var i = 0; i < textInfo.graphemeLines.length; i++) {
                  if (textInfo.graphemeText[charCount] === "\n" && i > 0) {
                    realLineCharCount = 0;
                    charCount++;
                    realLineCount++;
                  } else if (!this.splitByGrapheme && this._reSpaceAndTab.test(textInfo.graphemeText[charCount]) && i > 0) {
                    realLineCharCount++;
                    charCount++;
                  }
                  map[i] = { line: realLineCount, offset: realLineCharCount };
                  charCount += textInfo.graphemeLines[i].length;
                  realLineCharCount += textInfo.graphemeLines[i].length;
                }
                return map;
              },
              styleHas: function(property, lineIndex) {
                if (this._styleMap && !this.isWrapping) {
                  var map = this._styleMap[lineIndex];
                  if (map) {
                    lineIndex = map.line;
                  }
                }
                return fabric2.Text.prototype.styleHas.call(this, property, lineIndex);
              },
              isEmptyStyles: function(lineIndex) {
                if (!this.styles) {
                  return true;
                }
                var offset = 0, nextLineIndex = lineIndex + 1, nextOffset, obj, shouldLimit = false, map = this._styleMap[lineIndex], mapNextLine = this._styleMap[lineIndex + 1];
                if (map) {
                  lineIndex = map.line;
                  offset = map.offset;
                }
                if (mapNextLine) {
                  nextLineIndex = mapNextLine.line;
                  shouldLimit = nextLineIndex === lineIndex;
                  nextOffset = mapNextLine.offset;
                }
                obj = typeof lineIndex === "undefined" ? this.styles : { line: this.styles[lineIndex] };
                for (var p1 in obj) {
                  for (var p2 in obj[p1]) {
                    if (p2 >= offset && (!shouldLimit || p2 < nextOffset)) {
                      for (var p3 in obj[p1][p2]) {
                        return false;
                      }
                    }
                  }
                }
                return true;
              },
              _getStyleDeclaration: function(lineIndex, charIndex) {
                if (this._styleMap && !this.isWrapping) {
                  var map = this._styleMap[lineIndex];
                  if (!map) {
                    return null;
                  }
                  lineIndex = map.line;
                  charIndex = map.offset + charIndex;
                }
                return this.callSuper("_getStyleDeclaration", lineIndex, charIndex);
              },
              _setStyleDeclaration: function(lineIndex, charIndex, style) {
                var map = this._styleMap[lineIndex];
                lineIndex = map.line;
                charIndex = map.offset + charIndex;
                this.styles[lineIndex][charIndex] = style;
              },
              _deleteStyleDeclaration: function(lineIndex, charIndex) {
                var map = this._styleMap[lineIndex];
                lineIndex = map.line;
                charIndex = map.offset + charIndex;
                delete this.styles[lineIndex][charIndex];
              },
              _getLineStyle: function(lineIndex) {
                var map = this._styleMap[lineIndex];
                return !!this.styles[map.line];
              },
              _setLineStyle: function(lineIndex) {
                var map = this._styleMap[lineIndex];
                this.styles[map.line] = {};
              },
              _wrapText: function(lines, desiredWidth) {
                var wrapped = [], i;
                this.isWrapping = true;
                for (i = 0; i < lines.length; i++) {
                  wrapped = wrapped.concat(this._wrapLine(lines[i], i, desiredWidth));
                }
                this.isWrapping = false;
                return wrapped;
              },
              _measureWord: function(word, lineIndex, charOffset) {
                var width = 0, prevGrapheme, skipLeft = true;
                charOffset = charOffset || 0;
                for (var i = 0, len = word.length; i < len; i++) {
                  var box = this._getGraphemeBox(word[i], lineIndex, i + charOffset, prevGrapheme, skipLeft);
                  width += box.kernedWidth;
                  prevGrapheme = word[i];
                }
                return width;
              },
              _wrapLine: function(_line, lineIndex, desiredWidth, reservedSpace) {
                var lineWidth = 0, splitByGrapheme = this.splitByGrapheme, graphemeLines = [], line = [], words = splitByGrapheme ? fabric2.util.string.graphemeSplit(_line) : _line.split(this._wordJoiners), word = "", offset = 0, infix = splitByGrapheme ? "" : " ", wordWidth = 0, infixWidth = 0, largestWordWidth = 0, lineJustStarted = true, additionalSpace = this._getWidthOfCharSpacing(), reservedSpace = reservedSpace || 0;
                if (words.length === 0) {
                  words.push([]);
                }
                desiredWidth -= reservedSpace;
                for (var i = 0; i < words.length; i++) {
                  word = splitByGrapheme ? words[i] : fabric2.util.string.graphemeSplit(words[i]);
                  wordWidth = this._measureWord(word, lineIndex, offset);
                  offset += word.length;
                  lineWidth += infixWidth + wordWidth - additionalSpace;
                  if (lineWidth > desiredWidth && !lineJustStarted) {
                    graphemeLines.push(line);
                    line = [];
                    lineWidth = wordWidth;
                    lineJustStarted = true;
                  } else {
                    lineWidth += additionalSpace;
                  }
                  if (!lineJustStarted && !splitByGrapheme) {
                    line.push(infix);
                  }
                  line = line.concat(word);
                  infixWidth = splitByGrapheme ? 0 : this._measureWord([infix], lineIndex, offset);
                  offset++;
                  lineJustStarted = false;
                  if (wordWidth > largestWordWidth) {
                    largestWordWidth = wordWidth;
                  }
                }
                i && graphemeLines.push(line);
                if (largestWordWidth + reservedSpace > this.dynamicMinWidth) {
                  this.dynamicMinWidth = largestWordWidth - additionalSpace + reservedSpace;
                }
                return graphemeLines;
              },
              isEndOfWrapping: function(lineIndex) {
                if (!this._styleMap[lineIndex + 1]) {
                  return true;
                }
                if (this._styleMap[lineIndex + 1].line !== this._styleMap[lineIndex].line) {
                  return true;
                }
                return false;
              },
              missingNewlineOffset: function(lineIndex) {
                if (this.splitByGrapheme) {
                  return this.isEndOfWrapping(lineIndex) ? 1 : 0;
                }
                return 1;
              },
              _splitTextIntoLines: function(text) {
                var newText = fabric2.Text.prototype._splitTextIntoLines.call(this, text), graphemeLines = this._wrapText(newText.lines, this.width), lines = new Array(graphemeLines.length);
                for (var i = 0; i < graphemeLines.length; i++) {
                  lines[i] = graphemeLines[i].join("");
                }
                newText.lines = lines;
                newText.graphemeLines = graphemeLines;
                return newText;
              },
              getMinWidth: function() {
                return Math.max(this.minWidth, this.dynamicMinWidth);
              },
              _removeExtraneousStyles: function() {
                var linesToKeep = {};
                for (var prop in this._styleMap) {
                  if (this._textLines[prop]) {
                    linesToKeep[this._styleMap[prop].line] = 1;
                  }
                }
                for (var prop in this.styles) {
                  if (!linesToKeep[prop]) {
                    delete this.styles[prop];
                  }
                }
              },
              toObject: function(propertiesToInclude) {
                return this.callSuper("toObject", ["minWidth", "splitByGrapheme"].concat(propertiesToInclude));
              }
            });
            fabric2.Textbox.fromObject = function(object, callback) {
              return fabric2.Object._fromObject("Textbox", object, callback, "text");
            };
          })(exports2);
          (function() {
            var controlsUtils = fabric.controlsUtils, scaleSkewStyleHandler = controlsUtils.scaleSkewCursorStyleHandler, scaleStyleHandler = controlsUtils.scaleCursorStyleHandler, scalingEqually = controlsUtils.scalingEqually, scalingYOrSkewingX = controlsUtils.scalingYOrSkewingX, scalingXOrSkewingY = controlsUtils.scalingXOrSkewingY, scaleOrSkewActionName = controlsUtils.scaleOrSkewActionName, objectControls = fabric.Object.prototype.controls;
            objectControls.ml = new fabric.Control({
              x: -0.5,
              y: 0,
              cursorStyleHandler: scaleSkewStyleHandler,
              actionHandler: scalingXOrSkewingY,
              getActionName: scaleOrSkewActionName
            });
            objectControls.mr = new fabric.Control({
              x: 0.5,
              y: 0,
              cursorStyleHandler: scaleSkewStyleHandler,
              actionHandler: scalingXOrSkewingY,
              getActionName: scaleOrSkewActionName
            });
            objectControls.mb = new fabric.Control({
              x: 0,
              y: 0.5,
              cursorStyleHandler: scaleSkewStyleHandler,
              actionHandler: scalingYOrSkewingX,
              getActionName: scaleOrSkewActionName
            });
            objectControls.mt = new fabric.Control({
              x: 0,
              y: -0.5,
              cursorStyleHandler: scaleSkewStyleHandler,
              actionHandler: scalingYOrSkewingX,
              getActionName: scaleOrSkewActionName
            });
            objectControls.tl = new fabric.Control({
              x: -0.5,
              y: -0.5,
              cursorStyleHandler: scaleStyleHandler,
              actionHandler: scalingEqually
            });
            objectControls.tr = new fabric.Control({
              x: 0.5,
              y: -0.5,
              cursorStyleHandler: scaleStyleHandler,
              actionHandler: scalingEqually
            });
            objectControls.bl = new fabric.Control({
              x: -0.5,
              y: 0.5,
              cursorStyleHandler: scaleStyleHandler,
              actionHandler: scalingEqually
            });
            objectControls.br = new fabric.Control({
              x: 0.5,
              y: 0.5,
              cursorStyleHandler: scaleStyleHandler,
              actionHandler: scalingEqually
            });
            objectControls.mtr = new fabric.Control({
              x: 0,
              y: -0.5,
              actionHandler: controlsUtils.rotationWithSnapping,
              cursorStyleHandler: controlsUtils.rotationStyleHandler,
              offsetY: -40,
              withConnection: true,
              actionName: "rotate"
            });
            if (fabric.Textbox) {
              var textBoxControls = fabric.Textbox.prototype.controls = {};
              textBoxControls.mtr = objectControls.mtr;
              textBoxControls.tr = objectControls.tr;
              textBoxControls.br = objectControls.br;
              textBoxControls.tl = objectControls.tl;
              textBoxControls.bl = objectControls.bl;
              textBoxControls.mt = objectControls.mt;
              textBoxControls.mb = objectControls.mb;
              textBoxControls.mr = new fabric.Control({
                x: 0.5,
                y: 0,
                actionHandler: controlsUtils.changeWidth,
                cursorStyleHandler: scaleSkewStyleHandler,
                actionName: "resizing"
              });
              textBoxControls.ml = new fabric.Control({
                x: -0.5,
                y: 0,
                actionHandler: controlsUtils.changeWidth,
                cursorStyleHandler: scaleSkewStyleHandler,
                actionName: "resizing"
              });
            }
          })();
        },
        4426: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(4486);
        },
        9406: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(4877);
        },
        789: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(7178);
        },
        381: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(5603);
        },
        7636: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(1206);
        },
        1899: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(6174);
        },
        899: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(57);
        },
        8005: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(4741);
        },
        6562: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(8368);
        },
        9131: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(3739);
        },
        4383: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(172);
        },
        6065: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(4963);
        },
        1734: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(7820);
        },
        2461: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(5636);
        },
        5214: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(5059);
        },
        6397: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(3969);
        },
        8189: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(6618);
        },
        9146: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(5279);
        },
        4496: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(9562);
        },
        3972: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(652);
        },
        7172: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(2813);
        },
        1845: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(8664);
        },
        662: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(1457);
        },
        711: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(2937);
        },
        6623: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(9297);
        },
        7077: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(8026);
        },
        9856: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(2044);
        },
        4230: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(2214);
        },
        184: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(9256);
        },
        3742: function(module2, __unused_webpack_exports, __webpack_require__2) {
          module2.exports = __webpack_require__2(5659);
        },
        1801: function(module2) {
          var DIVISOR = {
            rect: 1,
            circle: 2,
            triangle: 1
          };
          var DIMENSION_KEYS = {
            rect: {
              w: "width",
              h: "height"
            },
            circle: {
              w: "rx",
              h: "ry"
            },
            triangle: {
              w: "width",
              h: "height"
            }
          };
          function setStartPoint(shape) {
            var originX = shape.originX, originY = shape.originY;
            var originKey = originX.substring(0, 1) + originY.substring(0, 1);
            shape.startPoint = shape.origins[originKey];
          }
          function getPositionsOfRotatedOrigin(origin, pointer, angle) {
            var sx = origin.x;
            var sy = origin.y;
            var px = pointer.x;
            var py = pointer.y;
            var r = angle * Math.PI / 180;
            var rx = (px - sx) * Math.cos(r) - (py - sy) * Math.sin(r) + sx;
            var ry = (px - sx) * Math.sin(r) + (py - sy) * Math.cos(r) + sy;
            return {
              originX: sx > rx ? "right" : "left",
              originY: sy > ry ? "bottom" : "top"
            };
          }
          function hasCenterOrigin(shape) {
            return shape.originX === "center" && shape.originY === "center";
          }
          function adjustOriginByStartPoint(pointer, shape) {
            var centerPoint = shape.getPointByOrigin("center", "center");
            var angle = -shape.angle;
            var originPositions = getPositionsOfRotatedOrigin(centerPoint, pointer, angle);
            var originX = originPositions.originX, originY = originPositions.originY;
            var origin = shape.getPointByOrigin(originX, originY);
            var left = shape.left - (centerPoint.x - origin.x);
            var top = shape.top - (centerPoint.y - origin.y);
            shape.set({
              originX,
              originY,
              left,
              top
            });
            shape.setCoords();
          }
          function adjustOriginByMovingPointer(pointer, shape) {
            var origin = shape.startPoint;
            var angle = -shape.angle;
            var originPositions = getPositionsOfRotatedOrigin(origin, pointer, angle);
            var originX = originPositions.originX, originY = originPositions.originY;
            shape.setPositionByOrigin(origin, originX, originY);
            shape.setCoords();
          }
          function adjustDimensionOnScaling(shape) {
            var type = shape.type, scaleX = shape.scaleX, scaleY = shape.scaleY;
            var dimensionKeys = DIMENSION_KEYS[type];
            var width = shape[dimensionKeys.w] * scaleX;
            var height = shape[dimensionKeys.h] * scaleY;
            if (shape.isRegular) {
              var maxScale = Math.max(scaleX, scaleY);
              width = shape[dimensionKeys.w] * maxScale;
              height = shape[dimensionKeys.h] * maxScale;
            }
            var options = {
              hasControls: false,
              hasBorders: false,
              scaleX: 1,
              scaleY: 1
            };
            options[dimensionKeys.w] = width;
            options[dimensionKeys.h] = height;
            shape.set(options);
          }
          function adjustDimensionOnMouseMove(pointer, shape) {
            var type = shape.type, strokeWidth = shape.strokeWidth, origin = shape.startPoint;
            var divisor = DIVISOR[type];
            var dimensionKeys = DIMENSION_KEYS[type];
            var isTriangle = !!(shape.type === "triangle");
            var options = {};
            var width = Math.abs(origin.x - pointer.x) / divisor;
            var height = Math.abs(origin.y - pointer.y) / divisor;
            if (width > strokeWidth) {
              width -= strokeWidth / divisor;
            }
            if (height > strokeWidth) {
              height -= strokeWidth / divisor;
            }
            if (shape.isRegular) {
              width = height = Math.max(width, height);
              if (isTriangle) {
                height = Math.sqrt(3) / 2 * width;
              }
            }
            options[dimensionKeys.w] = width;
            options[dimensionKeys.h] = height;
            shape.set(options);
          }
          module2.exports = {
            setOrigins: function setOrigins(shape) {
              var leftTopPoint = shape.getPointByOrigin("left", "top");
              var rightTopPoint = shape.getPointByOrigin("right", "top");
              var rightBottomPoint = shape.getPointByOrigin("right", "bottom");
              var leftBottomPoint = shape.getPointByOrigin("left", "bottom");
              shape.origins = {
                lt: leftTopPoint,
                rt: rightTopPoint,
                rb: rightBottomPoint,
                lb: leftBottomPoint
              };
            },
            resize: function resize(shape, pointer, isScaling) {
              if (hasCenterOrigin(shape)) {
                adjustOriginByStartPoint(pointer, shape);
                setStartPoint(shape);
              }
              if (isScaling) {
                adjustDimensionOnScaling(shape);
              } else {
                adjustDimensionOnMouseMove(pointer, shape);
              }
              adjustOriginByMovingPointer(pointer, shape);
            },
            adjustOriginToCenter: function adjustOriginToCenter(shape) {
              var centerPoint = shape.getPointByOrigin("center", "center");
              var originX = shape.originX, originY = shape.originY;
              var origin = shape.getPointByOrigin(originX, originY);
              var left = shape.left + (centerPoint.x - origin.x);
              var top = shape.top + (centerPoint.y - origin.y);
              shape.set({
                hasControls: true,
                hasBorders: true,
                originX: "center",
                originY: "center",
                left,
                top
              });
              shape.setCoords();
            }
          };
        },
        2221: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(5454);
          __webpack_require__2(9173);
          var path = __webpack_require__2(7545);
          module2.exports = path.Array.from;
        },
        5078: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(8118);
          var path = __webpack_require__2(7545);
          module2.exports = path.Array.isArray;
        },
        6135: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(9106);
          var entryVirtual = __webpack_require__2(5607);
          module2.exports = entryVirtual("Array").concat;
        },
        9510: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(1710);
          var entryVirtual = __webpack_require__2(5607);
          module2.exports = entryVirtual("Array").fill;
        },
        3971: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(3436);
          var entryVirtual = __webpack_require__2(5607);
          module2.exports = entryVirtual("Array").filter;
        },
        98: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(9823);
          var entryVirtual = __webpack_require__2(5607);
          module2.exports = entryVirtual("Array").forEach;
        },
        2089: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(2276);
          var entryVirtual = __webpack_require__2(5607);
          module2.exports = entryVirtual("Array").indexOf;
        },
        6209: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(3838);
          var entryVirtual = __webpack_require__2(5607);
          module2.exports = entryVirtual("Array").map;
        },
        2671: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(5818);
          var entryVirtual = __webpack_require__2(5607);
          module2.exports = entryVirtual("Array").slice;
        },
        1375: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(2178);
          var entryVirtual = __webpack_require__2(5607);
          module2.exports = entryVirtual("Array").splice;
        },
        3528: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(665);
          var entryVirtual = __webpack_require__2(5607);
          module2.exports = entryVirtual("Function").bind;
        },
        5739: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(8939);
          __webpack_require__2(5454);
          var getIteratorMethod = __webpack_require__2(8703);
          module2.exports = getIteratorMethod;
        },
        278: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var bind = __webpack_require__2(3528);
          var FunctionPrototype = Function.prototype;
          module2.exports = function(it) {
            var own = it.bind;
            return it === FunctionPrototype || it instanceof Function && own === FunctionPrototype.bind ? bind : own;
          };
        },
        1484: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var concat = __webpack_require__2(6135);
          var ArrayPrototype = Array.prototype;
          module2.exports = function(it) {
            var own = it.concat;
            return it === ArrayPrototype || it instanceof Array && own === ArrayPrototype.concat ? concat : own;
          };
        },
        7731: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var fill = __webpack_require__2(9510);
          var ArrayPrototype = Array.prototype;
          module2.exports = function(it) {
            var own = it.fill;
            return it === ArrayPrototype || it instanceof Array && own === ArrayPrototype.fill ? fill : own;
          };
        },
        3669: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var filter = __webpack_require__2(3971);
          var ArrayPrototype = Array.prototype;
          module2.exports = function(it) {
            var own = it.filter;
            return it === ArrayPrototype || it instanceof Array && own === ArrayPrototype.filter ? filter : own;
          };
        },
        2604: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var indexOf = __webpack_require__2(2089);
          var ArrayPrototype = Array.prototype;
          module2.exports = function(it) {
            var own = it.indexOf;
            return it === ArrayPrototype || it instanceof Array && own === ArrayPrototype.indexOf ? indexOf : own;
          };
        },
        263: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var map = __webpack_require__2(6209);
          var ArrayPrototype = Array.prototype;
          module2.exports = function(it) {
            var own = it.map;
            return it === ArrayPrototype || it instanceof Array && own === ArrayPrototype.map ? map : own;
          };
        },
        7663: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var slice = __webpack_require__2(2671);
          var ArrayPrototype = Array.prototype;
          module2.exports = function(it) {
            var own = it.slice;
            return it === ArrayPrototype || it instanceof Array && own === ArrayPrototype.slice ? slice : own;
          };
        },
        5063: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var splice = __webpack_require__2(1375);
          var ArrayPrototype = Array.prototype;
          module2.exports = function(it) {
            var own = it.splice;
            return it === ArrayPrototype || it instanceof Array && own === ArrayPrototype.splice ? splice : own;
          };
        },
        6813: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var trim = __webpack_require__2(3842);
          var StringPrototype = String.prototype;
          module2.exports = function(it) {
            var own = it.trim;
            return typeof it === "string" || it === StringPrototype || it instanceof String && own === StringPrototype.trim ? trim : own;
          };
        },
        6285: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(2666);
          var path = __webpack_require__2(7545);
          module2.exports = path.Number.parseInt;
        },
        3213: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(3113);
          var path = __webpack_require__2(7545);
          var Object2 = path.Object;
          module2.exports = function create(P, D) {
            return Object2.create(P, D);
          };
        },
        3512: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(297);
          var path = __webpack_require__2(7545);
          var Object2 = path.Object;
          var defineProperty = module2.exports = function defineProperty2(it, key, desc) {
            return Object2.defineProperty(it, key, desc);
          };
          if (Object2.defineProperty.sham)
            defineProperty.sham = true;
        },
        8168: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(9234);
          var path = __webpack_require__2(7545);
          module2.exports = path.Object.getPrototypeOf;
        },
        8651: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(2647);
          var path = __webpack_require__2(7545);
          module2.exports = path.Object.keys;
        },
        3083: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(3222);
          var path = __webpack_require__2(7545);
          module2.exports = path.Object.setPrototypeOf;
        },
        2987: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(4859);
          var path = __webpack_require__2(7545);
          module2.exports = path.parseFloat;
        },
        2239: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(5706);
          var path = __webpack_require__2(7545);
          module2.exports = path.parseInt;
        },
        3154: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(4242);
          __webpack_require__2(8939);
          __webpack_require__2(6663);
          __webpack_require__2(9021);
          __webpack_require__2(7884);
          __webpack_require__2(8885);
          __webpack_require__2(1868);
          __webpack_require__2(5454);
          var path = __webpack_require__2(7545);
          module2.exports = path.Promise;
        },
        6577: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(5397);
          var path = __webpack_require__2(7545);
          module2.exports = path.Reflect.construct;
        },
        3842: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(957);
          var entryVirtual = __webpack_require__2(5607);
          module2.exports = entryVirtual("String").trim;
        },
        5008: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(9106);
          __webpack_require__2(6663);
          __webpack_require__2(6187);
          __webpack_require__2(9781);
          __webpack_require__2(492);
          __webpack_require__2(6681);
          __webpack_require__2(9594);
          __webpack_require__2(3665);
          __webpack_require__2(9017);
          __webpack_require__2(1250);
          __webpack_require__2(9786);
          __webpack_require__2(503);
          __webpack_require__2(6565);
          __webpack_require__2(9322);
          __webpack_require__2(3610);
          __webpack_require__2(6886);
          __webpack_require__2(3514);
          __webpack_require__2(8671);
          __webpack_require__2(8556);
          __webpack_require__2(1367);
          var path = __webpack_require__2(7545);
          module2.exports = path.Symbol;
        },
        994: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(8939);
          __webpack_require__2(6663);
          __webpack_require__2(5454);
          __webpack_require__2(3665);
          var WrappedWellKnownSymbolModule = __webpack_require__2(9207);
          module2.exports = WrappedWellKnownSymbolModule.f("iterator");
        },
        2813: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(3822);
          module2.exports = parent;
        },
        8664: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(1434);
          module2.exports = parent;
        },
        1457: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(7710);
          module2.exports = parent;
        },
        2937: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(4741);
          module2.exports = parent;
        },
        9297: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(4963);
          module2.exports = parent;
        },
        8026: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(7820);
          module2.exports = parent;
        },
        2044: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(8980);
          module2.exports = parent;
        },
        2214: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(6672);
          module2.exports = parent;
        },
        9256: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(2285);
          __webpack_require__2(177);
          __webpack_require__2(9031);
          __webpack_require__2(6658);
          __webpack_require__2(1875);
          __webpack_require__2(8658);
          __webpack_require__2(4592);
          __webpack_require__2(6680);
          module2.exports = parent;
        },
        5659: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(8535);
          module2.exports = parent;
        },
        6235: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var isCallable = __webpack_require__2(6447);
          var tryToString = __webpack_require__2(9288);
          module2.exports = function(argument) {
            if (isCallable(argument))
              return argument;
            throw TypeError(tryToString(argument) + " is not a function");
          };
        },
        1404: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var isConstructor = __webpack_require__2(2091);
          var tryToString = __webpack_require__2(9288);
          module2.exports = function(argument) {
            if (isConstructor(argument))
              return argument;
            throw TypeError(tryToString(argument) + " is not a constructor");
          };
        },
        7757: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var isCallable = __webpack_require__2(6447);
          module2.exports = function(argument) {
            if (typeof argument === "object" || isCallable(argument))
              return argument;
            throw TypeError("Can't set " + String(argument) + " as a prototype");
          };
        },
        7423: function(module2) {
          module2.exports = function() {
          };
        },
        6961: function(module2) {
          module2.exports = function(it, Constructor, name) {
            if (it instanceof Constructor)
              return it;
            throw TypeError("Incorrect " + (name ? name + " " : "") + "invocation");
          };
        },
        1138: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var isObject = __webpack_require__2(5744);
          module2.exports = function(argument) {
            if (isObject(argument))
              return argument;
            throw TypeError(String(argument) + " is not an object");
          };
        },
        2724: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var toObject = __webpack_require__2(1795);
          var toAbsoluteIndex = __webpack_require__2(7739);
          var lengthOfArrayLike = __webpack_require__2(4104);
          module2.exports = function fill(value) {
            var O = toObject(this);
            var length = lengthOfArrayLike(O);
            var argumentsLength = arguments.length;
            var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : void 0, length);
            var end = argumentsLength > 2 ? arguments[2] : void 0;
            var endPos = end === void 0 ? length : toAbsoluteIndex(end, length);
            while (endPos > index)
              O[index++] = value;
            return O;
          };
        },
        7397: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var $forEach = __webpack_require__2(454).forEach;
          var arrayMethodIsStrict = __webpack_require__2(424);
          var STRICT_METHOD = arrayMethodIsStrict("forEach");
          module2.exports = !STRICT_METHOD ? function forEach(callbackfn) {
            return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : void 0);
          } : [].forEach;
        },
        841: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var bind = __webpack_require__2(8043);
          var toObject = __webpack_require__2(1795);
          var callWithSafeIterationClosing = __webpack_require__2(1635);
          var isArrayIteratorMethod = __webpack_require__2(6109);
          var isConstructor = __webpack_require__2(2091);
          var lengthOfArrayLike = __webpack_require__2(4104);
          var createProperty = __webpack_require__2(9361);
          var getIterator = __webpack_require__2(1669);
          var getIteratorMethod = __webpack_require__2(8703);
          module2.exports = function from(arrayLike) {
            var O = toObject(arrayLike);
            var IS_CONSTRUCTOR = isConstructor(this);
            var argumentsLength = arguments.length;
            var mapfn = argumentsLength > 1 ? arguments[1] : void 0;
            var mapping = mapfn !== void 0;
            if (mapping)
              mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : void 0, 2);
            var iteratorMethod = getIteratorMethod(O);
            var index = 0;
            var length, result, step, iterator, next, value;
            if (iteratorMethod && !(this == Array && isArrayIteratorMethod(iteratorMethod))) {
              iterator = getIterator(O, iteratorMethod);
              next = iterator.next;
              result = IS_CONSTRUCTOR ? new this() : [];
              for (; !(step = next.call(iterator)).done; index++) {
                value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;
                createProperty(result, index, value);
              }
            } else {
              length = lengthOfArrayLike(O);
              result = IS_CONSTRUCTOR ? new this(length) : Array(length);
              for (; length > index; index++) {
                value = mapping ? mapfn(O[index], index) : O[index];
                createProperty(result, index, value);
              }
            }
            result.length = index;
            return result;
          };
        },
        8180: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var toIndexedObject = __webpack_require__2(101);
          var toAbsoluteIndex = __webpack_require__2(7739);
          var lengthOfArrayLike = __webpack_require__2(4104);
          var createMethod = function(IS_INCLUDES) {
            return function($this, el, fromIndex) {
              var O = toIndexedObject($this);
              var length = lengthOfArrayLike(O);
              var index = toAbsoluteIndex(fromIndex, length);
              var value;
              if (IS_INCLUDES && el != el)
                while (length > index) {
                  value = O[index++];
                  if (value != value)
                    return true;
                }
              else
                for (; length > index; index++) {
                  if ((IS_INCLUDES || index in O) && O[index] === el)
                    return IS_INCLUDES || index || 0;
                }
              return !IS_INCLUDES && -1;
            };
          };
          module2.exports = {
            includes: createMethod(true),
            indexOf: createMethod(false)
          };
        },
        454: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var bind = __webpack_require__2(8043);
          var IndexedObject = __webpack_require__2(2202);
          var toObject = __webpack_require__2(1795);
          var lengthOfArrayLike = __webpack_require__2(4104);
          var arraySpeciesCreate = __webpack_require__2(1321);
          var push = [].push;
          var createMethod = function(TYPE) {
            var IS_MAP = TYPE == 1;
            var IS_FILTER = TYPE == 2;
            var IS_SOME = TYPE == 3;
            var IS_EVERY = TYPE == 4;
            var IS_FIND_INDEX = TYPE == 6;
            var IS_FILTER_REJECT = TYPE == 7;
            var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;
            return function($this, callbackfn, that, specificCreate) {
              var O = toObject($this);
              var self2 = IndexedObject(O);
              var boundFunction = bind(callbackfn, that, 3);
              var length = lengthOfArrayLike(self2);
              var index = 0;
              var create = specificCreate || arraySpeciesCreate;
              var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : void 0;
              var value, result;
              for (; length > index; index++)
                if (NO_HOLES || index in self2) {
                  value = self2[index];
                  result = boundFunction(value, index, O);
                  if (TYPE) {
                    if (IS_MAP)
                      target[index] = result;
                    else if (result)
                      switch (TYPE) {
                        case 3:
                          return true;
                        case 5:
                          return value;
                        case 6:
                          return index;
                        case 2:
                          push.call(target, value);
                      }
                    else
                      switch (TYPE) {
                        case 4:
                          return false;
                        case 7:
                          push.call(target, value);
                      }
                  }
                }
              return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;
            };
          };
          module2.exports = {
            forEach: createMethod(0),
            map: createMethod(1),
            filter: createMethod(2),
            some: createMethod(3),
            every: createMethod(4),
            find: createMethod(5),
            findIndex: createMethod(6),
            filterReject: createMethod(7)
          };
        },
        242: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var fails = __webpack_require__2(6192);
          var wellKnownSymbol = __webpack_require__2(8182);
          var V8_VERSION = __webpack_require__2(4218);
          var SPECIES = wellKnownSymbol("species");
          module2.exports = function(METHOD_NAME) {
            return V8_VERSION >= 51 || !fails(function() {
              var array = [];
              var constructor = array.constructor = {};
              constructor[SPECIES] = function() {
                return { foo: 1 };
              };
              return array[METHOD_NAME](Boolean).foo !== 1;
            });
          };
        },
        424: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var fails = __webpack_require__2(6192);
          module2.exports = function(METHOD_NAME, argument) {
            var method = [][METHOD_NAME];
            return !!method && fails(function() {
              method.call(null, argument || function() {
                throw 1;
              }, 1);
            });
          };
        },
        3712: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var isArray = __webpack_require__2(4770);
          var isConstructor = __webpack_require__2(2091);
          var isObject = __webpack_require__2(5744);
          var wellKnownSymbol = __webpack_require__2(8182);
          var SPECIES = wellKnownSymbol("species");
          module2.exports = function(originalArray) {
            var C;
            if (isArray(originalArray)) {
              C = originalArray.constructor;
              if (isConstructor(C) && (C === Array || isArray(C.prototype)))
                C = void 0;
              else if (isObject(C)) {
                C = C[SPECIES];
                if (C === null)
                  C = void 0;
              }
            }
            return C === void 0 ? Array : C;
          };
        },
        1321: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var arraySpeciesConstructor = __webpack_require__2(3712);
          module2.exports = function(originalArray, length) {
            return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);
          };
        },
        1635: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var anObject = __webpack_require__2(1138);
          var iteratorClose = __webpack_require__2(6639);
          module2.exports = function(iterator, fn, value, ENTRIES) {
            try {
              return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);
            } catch (error) {
              iteratorClose(iterator, "throw", error);
            }
          };
        },
        9770: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var wellKnownSymbol = __webpack_require__2(8182);
          var ITERATOR = wellKnownSymbol("iterator");
          var SAFE_CLOSING = false;
          try {
            var called = 0;
            var iteratorWithReturn = {
              next: function() {
                return { done: !!called++ };
              },
              "return": function() {
                SAFE_CLOSING = true;
              }
            };
            iteratorWithReturn[ITERATOR] = function() {
              return this;
            };
            Array.from(iteratorWithReturn, function() {
              throw 2;
            });
          } catch (error) {
          }
          module2.exports = function(exec, SKIP_CLOSING) {
            if (!SKIP_CLOSING && !SAFE_CLOSING)
              return false;
            var ITERATION_SUPPORT = false;
            try {
              var object = {};
              object[ITERATOR] = function() {
                return {
                  next: function() {
                    return { done: ITERATION_SUPPORT = true };
                  }
                };
              };
              exec(object);
            } catch (error) {
            }
            return ITERATION_SUPPORT;
          };
        },
        9272: function(module2) {
          var toString = {}.toString;
          module2.exports = function(it) {
            return toString.call(it).slice(8, -1);
          };
        },
        4696: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var TO_STRING_TAG_SUPPORT = __webpack_require__2(3471);
          var isCallable = __webpack_require__2(6447);
          var classofRaw = __webpack_require__2(9272);
          var wellKnownSymbol = __webpack_require__2(8182);
          var TO_STRING_TAG = wellKnownSymbol("toStringTag");
          var CORRECT_ARGUMENTS = classofRaw(function() {
            return arguments;
          }()) == "Arguments";
          var tryGet = function(it, key) {
            try {
              return it[key];
            } catch (error) {
            }
          };
          module2.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function(it) {
            var O, tag, result;
            return it === void 0 ? "Undefined" : it === null ? "Null" : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == "string" ? tag : CORRECT_ARGUMENTS ? classofRaw(O) : (result = classofRaw(O)) == "Object" && isCallable(O.callee) ? "Arguments" : result;
          };
        },
        4635: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var fails = __webpack_require__2(6192);
          module2.exports = !fails(function() {
            function F() {
            }
            F.prototype.constructor = null;
            return Object.getPrototypeOf(new F()) !== F.prototype;
          });
        },
        5148: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var IteratorPrototype = __webpack_require__2(4413).IteratorPrototype;
          var create = __webpack_require__2(2853);
          var createPropertyDescriptor = __webpack_require__2(774);
          var setToStringTag = __webpack_require__2(1284);
          var Iterators = __webpack_require__2(7771);
          var returnThis = function() {
            return this;
          };
          module2.exports = function(IteratorConstructor, NAME, next) {
            var TO_STRING_TAG = NAME + " Iterator";
            IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });
            setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);
            Iterators[TO_STRING_TAG] = returnThis;
            return IteratorConstructor;
          };
        },
        8711: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var DESCRIPTORS = __webpack_require__2(69);
          var definePropertyModule = __webpack_require__2(2760);
          var createPropertyDescriptor = __webpack_require__2(774);
          module2.exports = DESCRIPTORS ? function(object, key, value) {
            return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
          } : function(object, key, value) {
            object[key] = value;
            return object;
          };
        },
        774: function(module2) {
          module2.exports = function(bitmap, value) {
            return {
              enumerable: !(bitmap & 1),
              configurable: !(bitmap & 2),
              writable: !(bitmap & 4),
              value
            };
          };
        },
        9361: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var toPropertyKey = __webpack_require__2(77);
          var definePropertyModule = __webpack_require__2(2760);
          var createPropertyDescriptor = __webpack_require__2(774);
          module2.exports = function(object, key, value) {
            var propertyKey = toPropertyKey(key);
            if (propertyKey in object)
              definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));
            else
              object[propertyKey] = value;
          };
        },
        7218: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var IS_PURE = __webpack_require__2(5546);
          var FunctionName = __webpack_require__2(2282);
          var isCallable = __webpack_require__2(6447);
          var createIteratorConstructor = __webpack_require__2(5148);
          var getPrototypeOf = __webpack_require__2(9341);
          var setPrototypeOf = __webpack_require__2(4469);
          var setToStringTag = __webpack_require__2(1284);
          var createNonEnumerableProperty = __webpack_require__2(8711);
          var redefine = __webpack_require__2(9482);
          var wellKnownSymbol = __webpack_require__2(8182);
          var Iterators = __webpack_require__2(7771);
          var IteratorsCore = __webpack_require__2(4413);
          var PROPER_FUNCTION_NAME = FunctionName.PROPER;
          var CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;
          var IteratorPrototype = IteratorsCore.IteratorPrototype;
          var BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;
          var ITERATOR = wellKnownSymbol("iterator");
          var KEYS = "keys";
          var VALUES = "values";
          var ENTRIES = "entries";
          var returnThis = function() {
            return this;
          };
          module2.exports = function(Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {
            createIteratorConstructor(IteratorConstructor, NAME, next);
            var getIterationMethod = function(KIND) {
              if (KIND === DEFAULT && defaultIterator)
                return defaultIterator;
              if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype)
                return IterablePrototype[KIND];
              switch (KIND) {
                case KEYS:
                  return function keys() {
                    return new IteratorConstructor(this, KIND);
                  };
                case VALUES:
                  return function values() {
                    return new IteratorConstructor(this, KIND);
                  };
                case ENTRIES:
                  return function entries() {
                    return new IteratorConstructor(this, KIND);
                  };
              }
              return function() {
                return new IteratorConstructor(this);
              };
            };
            var TO_STRING_TAG = NAME + " Iterator";
            var INCORRECT_VALUES_NAME = false;
            var IterablePrototype = Iterable.prototype;
            var nativeIterator = IterablePrototype[ITERATOR] || IterablePrototype["@@iterator"] || DEFAULT && IterablePrototype[DEFAULT];
            var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);
            var anyNativeIterator = NAME == "Array" ? IterablePrototype.entries || nativeIterator : nativeIterator;
            var CurrentIteratorPrototype, methods, KEY;
            if (anyNativeIterator) {
              CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));
              if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {
                if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {
                  if (setPrototypeOf) {
                    setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);
                  } else if (!isCallable(CurrentIteratorPrototype[ITERATOR])) {
                    redefine(CurrentIteratorPrototype, ITERATOR, returnThis);
                  }
                }
                setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);
                if (IS_PURE)
                  Iterators[TO_STRING_TAG] = returnThis;
              }
            }
            if (PROPER_FUNCTION_NAME && DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {
              if (!IS_PURE && CONFIGURABLE_FUNCTION_NAME) {
                createNonEnumerableProperty(IterablePrototype, "name", VALUES);
              } else {
                INCORRECT_VALUES_NAME = true;
                defaultIterator = function values() {
                  return nativeIterator.call(this);
                };
              }
            }
            if (DEFAULT) {
              methods = {
                values: getIterationMethod(VALUES),
                keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),
                entries: getIterationMethod(ENTRIES)
              };
              if (FORCED)
                for (KEY in methods) {
                  if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {
                    redefine(IterablePrototype, KEY, methods[KEY]);
                  }
                }
              else
                $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);
            }
            if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {
              redefine(IterablePrototype, ITERATOR, defaultIterator, { name: DEFAULT });
            }
            Iterators[NAME] = defaultIterator;
            return methods;
          };
        },
        1488: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var path = __webpack_require__2(7545);
          var hasOwn = __webpack_require__2(4500);
          var wrappedWellKnownSymbolModule = __webpack_require__2(9207);
          var defineProperty = __webpack_require__2(2760).f;
          module2.exports = function(NAME) {
            var Symbol2 = path.Symbol || (path.Symbol = {});
            if (!hasOwn(Symbol2, NAME))
              defineProperty(Symbol2, NAME, {
                value: wrappedWellKnownSymbolModule.f(NAME)
              });
          };
        },
        69: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var fails = __webpack_require__2(6192);
          module2.exports = !fails(function() {
            return Object.defineProperty({}, 1, { get: function() {
              return 7;
            } })[1] != 7;
          });
        },
        7449: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          var isObject = __webpack_require__2(5744);
          var document2 = global2.document;
          var EXISTS = isObject(document2) && isObject(document2.createElement);
          module2.exports = function(it) {
            return EXISTS ? document2.createElement(it) : {};
          };
        },
        7365: function(module2) {
          module2.exports = {
            CSSRuleList: 0,
            CSSStyleDeclaration: 0,
            CSSValueList: 0,
            ClientRectList: 0,
            DOMRectList: 0,
            DOMStringList: 0,
            DOMTokenList: 1,
            DataTransferItemList: 0,
            FileList: 0,
            HTMLAllCollection: 0,
            HTMLCollection: 0,
            HTMLFormElement: 0,
            HTMLSelectElement: 0,
            MediaList: 0,
            MimeTypeArray: 0,
            NamedNodeMap: 0,
            NodeList: 1,
            PaintRequestList: 0,
            Plugin: 0,
            PluginArray: 0,
            SVGLengthList: 0,
            SVGNumberList: 0,
            SVGPathSegList: 0,
            SVGPointList: 0,
            SVGStringList: 0,
            SVGTransformList: 0,
            SourceBufferList: 0,
            StyleSheetList: 0,
            TextTrackCueList: 0,
            TextTrackList: 0,
            TouchList: 0
          };
        },
        2957: function(module2) {
          module2.exports = typeof window == "object";
        },
        9347: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var userAgent = __webpack_require__2(8989);
          var global2 = __webpack_require__2(8576);
          module2.exports = /ipad|iphone|ipod/i.test(userAgent) && global2.Pebble !== void 0;
        },
        9536: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var userAgent = __webpack_require__2(8989);
          module2.exports = /(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent);
        },
        224: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var classof = __webpack_require__2(9272);
          var global2 = __webpack_require__2(8576);
          module2.exports = classof(global2.process) == "process";
        },
        5914: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var userAgent = __webpack_require__2(8989);
          module2.exports = /web0s(?!.*chrome)/i.test(userAgent);
        },
        8989: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var getBuiltIn = __webpack_require__2(150);
          module2.exports = getBuiltIn("navigator", "userAgent") || "";
        },
        4218: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          var userAgent = __webpack_require__2(8989);
          var process = global2.process;
          var Deno = global2.Deno;
          var versions = process && process.versions || Deno && Deno.version;
          var v8 = versions && versions.v8;
          var match, version;
          if (v8) {
            match = v8.split(".");
            version = match[0] < 4 ? 1 : match[0] + match[1];
          } else if (userAgent) {
            match = userAgent.match(/Edge\/(\d+)/);
            if (!match || match[1] >= 74) {
              match = userAgent.match(/Chrome\/(\d+)/);
              if (match)
                version = match[1];
            }
          }
          module2.exports = version && +version;
        },
        5607: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var path = __webpack_require__2(7545);
          module2.exports = function(CONSTRUCTOR) {
            return path[CONSTRUCTOR + "Prototype"];
          };
        },
        2952: function(module2) {
          module2.exports = [
            "constructor",
            "hasOwnProperty",
            "isPrototypeOf",
            "propertyIsEnumerable",
            "toLocaleString",
            "toString",
            "valueOf"
          ];
        },
        3085: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          var isCallable = __webpack_require__2(6447);
          var getOwnPropertyDescriptor = __webpack_require__2(5141).f;
          var isForced = __webpack_require__2(9245);
          var path = __webpack_require__2(7545);
          var bind = __webpack_require__2(8043);
          var createNonEnumerableProperty = __webpack_require__2(8711);
          var hasOwn = __webpack_require__2(4500);
          var wrapConstructor = function(NativeConstructor) {
            var Wrapper = function(a, b, c) {
              if (this instanceof NativeConstructor) {
                switch (arguments.length) {
                  case 0:
                    return new NativeConstructor();
                  case 1:
                    return new NativeConstructor(a);
                  case 2:
                    return new NativeConstructor(a, b);
                }
                return new NativeConstructor(a, b, c);
              }
              return NativeConstructor.apply(this, arguments);
            };
            Wrapper.prototype = NativeConstructor.prototype;
            return Wrapper;
          };
          module2.exports = function(options, source) {
            var TARGET = options.target;
            var GLOBAL = options.global;
            var STATIC = options.stat;
            var PROTO = options.proto;
            var nativeSource = GLOBAL ? global2 : STATIC ? global2[TARGET] : (global2[TARGET] || {}).prototype;
            var target = GLOBAL ? path : path[TARGET] || createNonEnumerableProperty(path, TARGET, {})[TARGET];
            var targetPrototype = target.prototype;
            var FORCED, USE_NATIVE, VIRTUAL_PROTOTYPE;
            var key, sourceProperty, targetProperty, nativeProperty, resultProperty, descriptor;
            for (key in source) {
              FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? "." : "#") + key, options.forced);
              USE_NATIVE = !FORCED && nativeSource && hasOwn(nativeSource, key);
              targetProperty = target[key];
              if (USE_NATIVE)
                if (options.noTargetGet) {
                  descriptor = getOwnPropertyDescriptor(nativeSource, key);
                  nativeProperty = descriptor && descriptor.value;
                } else
                  nativeProperty = nativeSource[key];
              sourceProperty = USE_NATIVE && nativeProperty ? nativeProperty : source[key];
              if (USE_NATIVE && typeof targetProperty === typeof sourceProperty)
                continue;
              if (options.bind && USE_NATIVE)
                resultProperty = bind(sourceProperty, global2);
              else if (options.wrap && USE_NATIVE)
                resultProperty = wrapConstructor(sourceProperty);
              else if (PROTO && isCallable(sourceProperty))
                resultProperty = bind(Function.call, sourceProperty);
              else
                resultProperty = sourceProperty;
              if (options.sham || sourceProperty && sourceProperty.sham || targetProperty && targetProperty.sham) {
                createNonEnumerableProperty(resultProperty, "sham", true);
              }
              createNonEnumerableProperty(target, key, resultProperty);
              if (PROTO) {
                VIRTUAL_PROTOTYPE = TARGET + "Prototype";
                if (!hasOwn(path, VIRTUAL_PROTOTYPE)) {
                  createNonEnumerableProperty(path, VIRTUAL_PROTOTYPE, {});
                }
                createNonEnumerableProperty(path[VIRTUAL_PROTOTYPE], key, sourceProperty);
                if (options.real && targetPrototype && !targetPrototype[key]) {
                  createNonEnumerableProperty(targetPrototype, key, sourceProperty);
                }
              }
            }
          };
        },
        6192: function(module2) {
          module2.exports = function(exec) {
            try {
              return !!exec();
            } catch (error) {
              return true;
            }
          };
        },
        8043: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var aCallable = __webpack_require__2(6235);
          module2.exports = function(fn, that, length) {
            aCallable(fn);
            if (that === void 0)
              return fn;
            switch (length) {
              case 0:
                return function() {
                  return fn.call(that);
                };
              case 1:
                return function(a) {
                  return fn.call(that, a);
                };
              case 2:
                return function(a, b) {
                  return fn.call(that, a, b);
                };
              case 3:
                return function(a, b, c) {
                  return fn.call(that, a, b, c);
                };
            }
            return function() {
              return fn.apply(that, arguments);
            };
          };
        },
        6782: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var aCallable = __webpack_require__2(6235);
          var isObject = __webpack_require__2(5744);
          var slice = [].slice;
          var factories = {};
          var construct = function(C, argsLength, args) {
            if (!(argsLength in factories)) {
              for (var list = [], i = 0; i < argsLength; i++)
                list[i] = "a[" + i + "]";
              factories[argsLength] = Function("C,a", "return new C(" + list.join(",") + ")");
            }
            return factories[argsLength](C, args);
          };
          module2.exports = Function.bind || function bind(that) {
            var fn = aCallable(this);
            var partArgs = slice.call(arguments, 1);
            var boundFunction = function bound() {
              var args = partArgs.concat(slice.call(arguments));
              return this instanceof boundFunction ? construct(fn, args.length, args) : fn.apply(that, args);
            };
            if (isObject(fn.prototype))
              boundFunction.prototype = fn.prototype;
            return boundFunction;
          };
        },
        2282: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var DESCRIPTORS = __webpack_require__2(69);
          var hasOwn = __webpack_require__2(4500);
          var FunctionPrototype = Function.prototype;
          var getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;
          var EXISTS = hasOwn(FunctionPrototype, "name");
          var PROPER = EXISTS && function something() {
          }.name === "something";
          var CONFIGURABLE = EXISTS && (!DESCRIPTORS || DESCRIPTORS && getDescriptor(FunctionPrototype, "name").configurable);
          module2.exports = {
            EXISTS,
            PROPER,
            CONFIGURABLE
          };
        },
        150: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var path = __webpack_require__2(7545);
          var global2 = __webpack_require__2(8576);
          var isCallable = __webpack_require__2(6447);
          var aFunction = function(variable) {
            return isCallable(variable) ? variable : void 0;
          };
          module2.exports = function(namespace, method) {
            return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global2[namespace]) : path[namespace] && path[namespace][method] || global2[namespace] && global2[namespace][method];
          };
        },
        8703: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var classof = __webpack_require__2(4696);
          var getMethod = __webpack_require__2(5037);
          var Iterators = __webpack_require__2(7771);
          var wellKnownSymbol = __webpack_require__2(8182);
          var ITERATOR = wellKnownSymbol("iterator");
          module2.exports = function(it) {
            if (it != void 0)
              return getMethod(it, ITERATOR) || getMethod(it, "@@iterator") || Iterators[classof(it)];
          };
        },
        1669: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var aCallable = __webpack_require__2(6235);
          var anObject = __webpack_require__2(1138);
          var getIteratorMethod = __webpack_require__2(8703);
          module2.exports = function(argument, usingIterator) {
            var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;
            if (aCallable(iteratorMethod))
              return anObject(iteratorMethod.call(argument));
            throw TypeError(String(argument) + " is not iterable");
          };
        },
        5037: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var aCallable = __webpack_require__2(6235);
          module2.exports = function(V, P) {
            var func = V[P];
            return func == null ? void 0 : aCallable(func);
          };
        },
        8576: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var check = function(it) {
            return it && it.Math == Math && it;
          };
          module2.exports = check(typeof globalThis == "object" && globalThis) || check(typeof window == "object" && window) || check(typeof self == "object" && self) || check(typeof __webpack_require__2.g == "object" && __webpack_require__2.g) || function() {
            return this;
          }() || Function("return this")();
        },
        4500: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var toObject = __webpack_require__2(1795);
          var hasOwnProperty = {}.hasOwnProperty;
          module2.exports = Object.hasOwn || function hasOwn(it, key) {
            return hasOwnProperty.call(toObject(it), key);
          };
        },
        4535: function(module2) {
          module2.exports = {};
        },
        3681: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          module2.exports = function(a, b) {
            var console2 = global2.console;
            if (console2 && console2.error) {
              arguments.length === 1 ? console2.error(a) : console2.error(a, b);
            }
          };
        },
        7403: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var getBuiltIn = __webpack_require__2(150);
          module2.exports = getBuiltIn("document", "documentElement");
        },
        188: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var DESCRIPTORS = __webpack_require__2(69);
          var fails = __webpack_require__2(6192);
          var createElement2 = __webpack_require__2(7449);
          module2.exports = !DESCRIPTORS && !fails(function() {
            return Object.defineProperty(createElement2("div"), "a", {
              get: function() {
                return 7;
              }
            }).a != 7;
          });
        },
        2202: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var fails = __webpack_require__2(6192);
          var classof = __webpack_require__2(9272);
          var split = "".split;
          module2.exports = fails(function() {
            return !Object("z").propertyIsEnumerable(0);
          }) ? function(it) {
            return classof(it) == "String" ? split.call(it, "") : Object(it);
          } : Object;
        },
        9516: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var isCallable = __webpack_require__2(6447);
          var store = __webpack_require__2(6434);
          var functionToString = Function.toString;
          if (!isCallable(store.inspectSource)) {
            store.inspectSource = function(it) {
              return functionToString.call(it);
            };
          }
          module2.exports = store.inspectSource;
        },
        273: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var isObject = __webpack_require__2(5744);
          var createNonEnumerableProperty = __webpack_require__2(8711);
          module2.exports = function(O, options) {
            if (isObject(options) && "cause" in options) {
              createNonEnumerableProperty(O, "cause", O.cause);
            }
          };
        },
        3326: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var NATIVE_WEAK_MAP = __webpack_require__2(8921);
          var global2 = __webpack_require__2(8576);
          var isObject = __webpack_require__2(5744);
          var createNonEnumerableProperty = __webpack_require__2(8711);
          var hasOwn = __webpack_require__2(4500);
          var shared = __webpack_require__2(6434);
          var sharedKey = __webpack_require__2(9766);
          var hiddenKeys = __webpack_require__2(4535);
          var OBJECT_ALREADY_INITIALIZED = "Object already initialized";
          var WeakMap2 = global2.WeakMap;
          var set, get, has;
          var enforce = function(it) {
            return has(it) ? get(it) : set(it, {});
          };
          var getterFor = function(TYPE) {
            return function(it) {
              var state;
              if (!isObject(it) || (state = get(it)).type !== TYPE) {
                throw TypeError("Incompatible receiver, " + TYPE + " required");
              }
              return state;
            };
          };
          if (NATIVE_WEAK_MAP || shared.state) {
            var store = shared.state || (shared.state = new WeakMap2());
            var wmget = store.get;
            var wmhas = store.has;
            var wmset = store.set;
            set = function(it, metadata) {
              if (wmhas.call(store, it))
                throw new TypeError(OBJECT_ALREADY_INITIALIZED);
              metadata.facade = it;
              wmset.call(store, it, metadata);
              return metadata;
            };
            get = function(it) {
              return wmget.call(store, it) || {};
            };
            has = function(it) {
              return wmhas.call(store, it);
            };
          } else {
            var STATE = sharedKey("state");
            hiddenKeys[STATE] = true;
            set = function(it, metadata) {
              if (hasOwn(it, STATE))
                throw new TypeError(OBJECT_ALREADY_INITIALIZED);
              metadata.facade = it;
              createNonEnumerableProperty(it, STATE, metadata);
              return metadata;
            };
            get = function(it) {
              return hasOwn(it, STATE) ? it[STATE] : {};
            };
            has = function(it) {
              return hasOwn(it, STATE);
            };
          }
          module2.exports = {
            set,
            get,
            has,
            enforce,
            getterFor
          };
        },
        6109: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var wellKnownSymbol = __webpack_require__2(8182);
          var Iterators = __webpack_require__2(7771);
          var ITERATOR = wellKnownSymbol("iterator");
          var ArrayPrototype = Array.prototype;
          module2.exports = function(it) {
            return it !== void 0 && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);
          };
        },
        4770: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var classof = __webpack_require__2(9272);
          module2.exports = Array.isArray || function isArray(argument) {
            return classof(argument) == "Array";
          };
        },
        6447: function(module2) {
          module2.exports = function(argument) {
            return typeof argument === "function";
          };
        },
        2091: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var fails = __webpack_require__2(6192);
          var isCallable = __webpack_require__2(6447);
          var classof = __webpack_require__2(4696);
          var getBuiltIn = __webpack_require__2(150);
          var inspectSource = __webpack_require__2(9516);
          var empty = [];
          var construct = getBuiltIn("Reflect", "construct");
          var constructorRegExp = /^\s*(?:class|function)\b/;
          var exec = constructorRegExp.exec;
          var INCORRECT_TO_STRING = !constructorRegExp.exec(function() {
          });
          var isConstructorModern = function(argument) {
            if (!isCallable(argument))
              return false;
            try {
              construct(Object, empty, argument);
              return true;
            } catch (error) {
              return false;
            }
          };
          var isConstructorLegacy = function(argument) {
            if (!isCallable(argument))
              return false;
            switch (classof(argument)) {
              case "AsyncFunction":
              case "GeneratorFunction":
              case "AsyncGeneratorFunction":
                return false;
            }
            return INCORRECT_TO_STRING || !!exec.call(constructorRegExp, inspectSource(argument));
          };
          module2.exports = !construct || fails(function() {
            var called;
            return isConstructorModern(isConstructorModern.call) || !isConstructorModern(Object) || !isConstructorModern(function() {
              called = true;
            }) || called;
          }) ? isConstructorLegacy : isConstructorModern;
        },
        9245: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var fails = __webpack_require__2(6192);
          var isCallable = __webpack_require__2(6447);
          var replacement = /#|\.prototype\./;
          var isForced = function(feature, detection) {
            var value = data[normalize(feature)];
            return value == POLYFILL ? true : value == NATIVE ? false : isCallable(detection) ? fails(detection) : !!detection;
          };
          var normalize = isForced.normalize = function(string) {
            return String(string).replace(replacement, ".").toLowerCase();
          };
          var data = isForced.data = {};
          var NATIVE = isForced.NATIVE = "N";
          var POLYFILL = isForced.POLYFILL = "P";
          module2.exports = isForced;
        },
        5744: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var isCallable = __webpack_require__2(6447);
          module2.exports = function(it) {
            return typeof it === "object" ? it !== null : isCallable(it);
          };
        },
        5546: function(module2) {
          module2.exports = true;
        },
        3236: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var isCallable = __webpack_require__2(6447);
          var getBuiltIn = __webpack_require__2(150);
          var USE_SYMBOL_AS_UID = __webpack_require__2(615);
          module2.exports = USE_SYMBOL_AS_UID ? function(it) {
            return typeof it == "symbol";
          } : function(it) {
            var $Symbol = getBuiltIn("Symbol");
            return isCallable($Symbol) && Object(it) instanceof $Symbol;
          };
        },
        3442: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var anObject = __webpack_require__2(1138);
          var isArrayIteratorMethod = __webpack_require__2(6109);
          var lengthOfArrayLike = __webpack_require__2(4104);
          var bind = __webpack_require__2(8043);
          var getIterator = __webpack_require__2(1669);
          var getIteratorMethod = __webpack_require__2(8703);
          var iteratorClose = __webpack_require__2(6639);
          var Result = function(stopped, result) {
            this.stopped = stopped;
            this.result = result;
          };
          module2.exports = function(iterable, unboundFunction, options) {
            var that = options && options.that;
            var AS_ENTRIES = !!(options && options.AS_ENTRIES);
            var IS_ITERATOR = !!(options && options.IS_ITERATOR);
            var INTERRUPTED = !!(options && options.INTERRUPTED);
            var fn = bind(unboundFunction, that, 1 + AS_ENTRIES + INTERRUPTED);
            var iterator, iterFn, index, length, result, next, step;
            var stop = function(condition) {
              if (iterator)
                iteratorClose(iterator, "normal", condition);
              return new Result(true, condition);
            };
            var callFn = function(value) {
              if (AS_ENTRIES) {
                anObject(value);
                return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);
              }
              return INTERRUPTED ? fn(value, stop) : fn(value);
            };
            if (IS_ITERATOR) {
              iterator = iterable;
            } else {
              iterFn = getIteratorMethod(iterable);
              if (!iterFn)
                throw TypeError(String(iterable) + " is not iterable");
              if (isArrayIteratorMethod(iterFn)) {
                for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {
                  result = callFn(iterable[index]);
                  if (result && result instanceof Result)
                    return result;
                }
                return new Result(false);
              }
              iterator = getIterator(iterable, iterFn);
            }
            next = iterator.next;
            while (!(step = next.call(iterator)).done) {
              try {
                result = callFn(step.value);
              } catch (error) {
                iteratorClose(iterator, "throw", error);
              }
              if (typeof result == "object" && result && result instanceof Result)
                return result;
            }
            return new Result(false);
          };
        },
        6639: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var anObject = __webpack_require__2(1138);
          var getMethod = __webpack_require__2(5037);
          module2.exports = function(iterator, kind, value) {
            var innerResult, innerError;
            anObject(iterator);
            try {
              innerResult = getMethod(iterator, "return");
              if (!innerResult) {
                if (kind === "throw")
                  throw value;
                return value;
              }
              innerResult = innerResult.call(iterator);
            } catch (error) {
              innerError = true;
              innerResult = error;
            }
            if (kind === "throw")
              throw value;
            if (innerError)
              throw innerResult;
            anObject(innerResult);
            return value;
          };
        },
        4413: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var fails = __webpack_require__2(6192);
          var isCallable = __webpack_require__2(6447);
          var create = __webpack_require__2(2853);
          var getPrototypeOf = __webpack_require__2(9341);
          var redefine = __webpack_require__2(9482);
          var wellKnownSymbol = __webpack_require__2(8182);
          var IS_PURE = __webpack_require__2(5546);
          var ITERATOR = wellKnownSymbol("iterator");
          var BUGGY_SAFARI_ITERATORS = false;
          var IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;
          if ([].keys) {
            arrayIterator = [].keys();
            if (!("next" in arrayIterator))
              BUGGY_SAFARI_ITERATORS = true;
            else {
              PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));
              if (PrototypeOfArrayIteratorPrototype !== Object.prototype)
                IteratorPrototype = PrototypeOfArrayIteratorPrototype;
            }
          }
          var NEW_ITERATOR_PROTOTYPE = IteratorPrototype == void 0 || fails(function() {
            var test = {};
            return IteratorPrototype[ITERATOR].call(test) !== test;
          });
          if (NEW_ITERATOR_PROTOTYPE)
            IteratorPrototype = {};
          else if (IS_PURE)
            IteratorPrototype = create(IteratorPrototype);
          if (!isCallable(IteratorPrototype[ITERATOR])) {
            redefine(IteratorPrototype, ITERATOR, function() {
              return this;
            });
          }
          module2.exports = {
            IteratorPrototype,
            BUGGY_SAFARI_ITERATORS
          };
        },
        7771: function(module2) {
          module2.exports = {};
        },
        4104: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var toLength = __webpack_require__2(8445);
          module2.exports = function(obj) {
            return toLength(obj.length);
          };
        },
        2950: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          var getOwnPropertyDescriptor = __webpack_require__2(5141).f;
          var macrotask = __webpack_require__2(7160).set;
          var IS_IOS = __webpack_require__2(9536);
          var IS_IOS_PEBBLE = __webpack_require__2(9347);
          var IS_WEBOS_WEBKIT = __webpack_require__2(5914);
          var IS_NODE = __webpack_require__2(224);
          var MutationObserver2 = global2.MutationObserver || global2.WebKitMutationObserver;
          var document2 = global2.document;
          var process = global2.process;
          var Promise2 = global2.Promise;
          var queueMicrotaskDescriptor = getOwnPropertyDescriptor(global2, "queueMicrotask");
          var queueMicrotask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;
          var flush, head, last, notify, toggle, node, promise, then;
          if (!queueMicrotask) {
            flush = function() {
              var parent, fn;
              if (IS_NODE && (parent = process.domain))
                parent.exit();
              while (head) {
                fn = head.fn;
                head = head.next;
                try {
                  fn();
                } catch (error) {
                  if (head)
                    notify();
                  else
                    last = void 0;
                  throw error;
                }
              }
              last = void 0;
              if (parent)
                parent.enter();
            };
            if (!IS_IOS && !IS_NODE && !IS_WEBOS_WEBKIT && MutationObserver2 && document2) {
              toggle = true;
              node = document2.createTextNode("");
              new MutationObserver2(flush).observe(node, { characterData: true });
              notify = function() {
                node.data = toggle = !toggle;
              };
            } else if (!IS_IOS_PEBBLE && Promise2 && Promise2.resolve) {
              promise = Promise2.resolve(void 0);
              promise.constructor = Promise2;
              then = promise.then;
              notify = function() {
                then.call(promise, flush);
              };
            } else if (IS_NODE) {
              notify = function() {
                process.nextTick(flush);
              };
            } else {
              notify = function() {
                macrotask.call(global2, flush);
              };
            }
          }
          module2.exports = queueMicrotask || function(fn) {
            var task = { fn, next: void 0 };
            if (last)
              last.next = task;
            if (!head) {
              head = task;
              notify();
            }
            last = task;
          };
        },
        4471: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          module2.exports = global2.Promise;
        },
        3045: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var V8_VERSION = __webpack_require__2(4218);
          var fails = __webpack_require__2(6192);
          module2.exports = !!Object.getOwnPropertySymbols && !fails(function() {
            var symbol = Symbol();
            return !String(symbol) || !(Object(symbol) instanceof Symbol) || !Symbol.sham && V8_VERSION && V8_VERSION < 41;
          });
        },
        4551: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var fails = __webpack_require__2(6192);
          var wellKnownSymbol = __webpack_require__2(8182);
          var IS_PURE = __webpack_require__2(5546);
          var ITERATOR = wellKnownSymbol("iterator");
          module2.exports = !fails(function() {
            var url = new URL("b?a=1&b=2&c=3", "http://a");
            var searchParams = url.searchParams;
            var result = "";
            url.pathname = "c%20d";
            searchParams.forEach(function(value, key) {
              searchParams["delete"]("b");
              result += key + value;
            });
            return IS_PURE && !url.toJSON || !searchParams.sort || url.href !== "http://a/c%20d?a=1&c=3" || searchParams.get("c") !== "3" || String(new URLSearchParams("?a=1")) !== "a=1" || !searchParams[ITERATOR] || new URL("https://a@b").username !== "a" || new URLSearchParams(new URLSearchParams("a=b")).get("a") !== "b" || new URL("http://\u0442\u0435\u0441\u0442").host !== "xn--e1aybc" || new URL("http://a#\u0431").hash !== "#%D0%B1" || result !== "a1c3" || new URL("http://x", void 0).host !== "x";
          });
        },
        8921: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          var isCallable = __webpack_require__2(6447);
          var inspectSource = __webpack_require__2(9516);
          var WeakMap2 = global2.WeakMap;
          module2.exports = isCallable(WeakMap2) && /native code/.test(inspectSource(WeakMap2));
        },
        9438: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var aCallable = __webpack_require__2(6235);
          var PromiseCapability = function(C) {
            var resolve, reject;
            this.promise = new C(function($$resolve, $$reject) {
              if (resolve !== void 0 || reject !== void 0)
                throw TypeError("Bad Promise constructor");
              resolve = $$resolve;
              reject = $$reject;
            });
            this.resolve = aCallable(resolve);
            this.reject = aCallable(reject);
          };
          module2.exports.f = function(C) {
            return new PromiseCapability(C);
          };
        },
        15: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          var fails = __webpack_require__2(6192);
          var toString = __webpack_require__2(4845);
          var trim = __webpack_require__2(4277).trim;
          var whitespaces = __webpack_require__2(1450);
          var $parseFloat = global2.parseFloat;
          var Symbol2 = global2.Symbol;
          var ITERATOR = Symbol2 && Symbol2.iterator;
          var FORCED = 1 / $parseFloat(whitespaces + "-0") !== -Infinity || ITERATOR && !fails(function() {
            $parseFloat(Object(ITERATOR));
          });
          module2.exports = FORCED ? function parseFloat2(string) {
            var trimmedString = trim(toString(string));
            var result = $parseFloat(trimmedString);
            return result === 0 && trimmedString.charAt(0) == "-" ? -0 : result;
          } : $parseFloat;
        },
        2558: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          var fails = __webpack_require__2(6192);
          var toString = __webpack_require__2(4845);
          var trim = __webpack_require__2(4277).trim;
          var whitespaces = __webpack_require__2(1450);
          var $parseInt = global2.parseInt;
          var Symbol2 = global2.Symbol;
          var ITERATOR = Symbol2 && Symbol2.iterator;
          var hex = /^[+-]?0[Xx]/;
          var FORCED = $parseInt(whitespaces + "08") !== 8 || $parseInt(whitespaces + "0x16") !== 22 || ITERATOR && !fails(function() {
            $parseInt(Object(ITERATOR));
          });
          module2.exports = FORCED ? function parseInt2(string, radix) {
            var S = trim(toString(string));
            return $parseInt(S, radix >>> 0 || (hex.test(S) ? 16 : 10));
          } : $parseInt;
        },
        2503: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var DESCRIPTORS = __webpack_require__2(69);
          var fails = __webpack_require__2(6192);
          var objectKeys = __webpack_require__2(7653);
          var getOwnPropertySymbolsModule = __webpack_require__2(4750);
          var propertyIsEnumerableModule = __webpack_require__2(6007);
          var toObject = __webpack_require__2(1795);
          var IndexedObject = __webpack_require__2(2202);
          var $assign = Object.assign;
          var defineProperty = Object.defineProperty;
          module2.exports = !$assign || fails(function() {
            if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, "a", {
              enumerable: true,
              get: function() {
                defineProperty(this, "b", {
                  value: 3,
                  enumerable: false
                });
              }
            }), { b: 2 })).b !== 1)
              return true;
            var A = {};
            var B = {};
            var symbol = Symbol();
            var alphabet = "abcdefghijklmnopqrst";
            A[symbol] = 7;
            alphabet.split("").forEach(function(chr) {
              B[chr] = chr;
            });
            return $assign({}, A)[symbol] != 7 || objectKeys($assign({}, B)).join("") != alphabet;
          }) ? function assign(target, source) {
            var T = toObject(target);
            var argumentsLength = arguments.length;
            var index = 1;
            var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
            var propertyIsEnumerable = propertyIsEnumerableModule.f;
            while (argumentsLength > index) {
              var S = IndexedObject(arguments[index++]);
              var keys = getOwnPropertySymbols ? objectKeys(S).concat(getOwnPropertySymbols(S)) : objectKeys(S);
              var length = keys.length;
              var j = 0;
              var key;
              while (length > j) {
                key = keys[j++];
                if (!DESCRIPTORS || propertyIsEnumerable.call(S, key))
                  T[key] = S[key];
              }
            }
            return T;
          } : $assign;
        },
        2853: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var anObject = __webpack_require__2(1138);
          var defineProperties = __webpack_require__2(1187);
          var enumBugKeys = __webpack_require__2(2952);
          var hiddenKeys = __webpack_require__2(4535);
          var html = __webpack_require__2(7403);
          var documentCreateElement = __webpack_require__2(7449);
          var sharedKey = __webpack_require__2(9766);
          var GT = ">";
          var LT = "<";
          var PROTOTYPE = "prototype";
          var SCRIPT = "script";
          var IE_PROTO = sharedKey("IE_PROTO");
          var EmptyConstructor = function() {
          };
          var scriptTag = function(content) {
            return LT + SCRIPT + GT + content + LT + "/" + SCRIPT + GT;
          };
          var NullProtoObjectViaActiveX = function(activeXDocument2) {
            activeXDocument2.write(scriptTag(""));
            activeXDocument2.close();
            var temp = activeXDocument2.parentWindow.Object;
            activeXDocument2 = null;
            return temp;
          };
          var NullProtoObjectViaIFrame = function() {
            var iframe = documentCreateElement("iframe");
            var JS = "java" + SCRIPT + ":";
            var iframeDocument;
            iframe.style.display = "none";
            html.appendChild(iframe);
            iframe.src = String(JS);
            iframeDocument = iframe.contentWindow.document;
            iframeDocument.open();
            iframeDocument.write(scriptTag("document.F=Object"));
            iframeDocument.close();
            return iframeDocument.F;
          };
          var activeXDocument;
          var NullProtoObject = function() {
            try {
              activeXDocument = new ActiveXObject("htmlfile");
            } catch (error) {
            }
            NullProtoObject = typeof document != "undefined" ? document.domain && activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame() : NullProtoObjectViaActiveX(activeXDocument);
            var length = enumBugKeys.length;
            while (length--)
              delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
            return NullProtoObject();
          };
          hiddenKeys[IE_PROTO] = true;
          module2.exports = Object.create || function create(O, Properties) {
            var result;
            if (O !== null) {
              EmptyConstructor[PROTOTYPE] = anObject(O);
              result = new EmptyConstructor();
              EmptyConstructor[PROTOTYPE] = null;
              result[IE_PROTO] = O;
            } else
              result = NullProtoObject();
            return Properties === void 0 ? result : defineProperties(result, Properties);
          };
        },
        1187: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var DESCRIPTORS = __webpack_require__2(69);
          var definePropertyModule = __webpack_require__2(2760);
          var anObject = __webpack_require__2(1138);
          var objectKeys = __webpack_require__2(7653);
          module2.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {
            anObject(O);
            var keys = objectKeys(Properties);
            var length = keys.length;
            var index = 0;
            var key;
            while (length > index)
              definePropertyModule.f(O, key = keys[index++], Properties[key]);
            return O;
          };
        },
        2760: function(__unused_webpack_module, exports2, __webpack_require__2) {
          var DESCRIPTORS = __webpack_require__2(69);
          var IE8_DOM_DEFINE = __webpack_require__2(188);
          var anObject = __webpack_require__2(1138);
          var toPropertyKey = __webpack_require__2(77);
          var $defineProperty = Object.defineProperty;
          exports2.f = DESCRIPTORS ? $defineProperty : function defineProperty(O, P, Attributes) {
            anObject(O);
            P = toPropertyKey(P);
            anObject(Attributes);
            if (IE8_DOM_DEFINE)
              try {
                return $defineProperty(O, P, Attributes);
              } catch (error) {
              }
            if ("get" in Attributes || "set" in Attributes)
              throw TypeError("Accessors not supported");
            if ("value" in Attributes)
              O[P] = Attributes.value;
            return O;
          };
        },
        5141: function(__unused_webpack_module, exports2, __webpack_require__2) {
          var DESCRIPTORS = __webpack_require__2(69);
          var propertyIsEnumerableModule = __webpack_require__2(6007);
          var createPropertyDescriptor = __webpack_require__2(774);
          var toIndexedObject = __webpack_require__2(101);
          var toPropertyKey = __webpack_require__2(77);
          var hasOwn = __webpack_require__2(4500);
          var IE8_DOM_DEFINE = __webpack_require__2(188);
          var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
          exports2.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {
            O = toIndexedObject(O);
            P = toPropertyKey(P);
            if (IE8_DOM_DEFINE)
              try {
                return $getOwnPropertyDescriptor(O, P);
              } catch (error) {
              }
            if (hasOwn(O, P))
              return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);
          };
        },
        4052: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var toIndexedObject = __webpack_require__2(101);
          var $getOwnPropertyNames = __webpack_require__2(2092).f;
          var toString = {}.toString;
          var windowNames = typeof window == "object" && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
          var getWindowNames = function(it) {
            try {
              return $getOwnPropertyNames(it);
            } catch (error) {
              return windowNames.slice();
            }
          };
          module2.exports.f = function getOwnPropertyNames(it) {
            return windowNames && toString.call(it) == "[object Window]" ? getWindowNames(it) : $getOwnPropertyNames(toIndexedObject(it));
          };
        },
        2092: function(__unused_webpack_module, exports2, __webpack_require__2) {
          var internalObjectKeys = __webpack_require__2(7934);
          var enumBugKeys = __webpack_require__2(2952);
          var hiddenKeys = enumBugKeys.concat("length", "prototype");
          exports2.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
            return internalObjectKeys(O, hiddenKeys);
          };
        },
        4750: function(__unused_webpack_module, exports2) {
          exports2.f = Object.getOwnPropertySymbols;
        },
        9341: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var hasOwn = __webpack_require__2(4500);
          var isCallable = __webpack_require__2(6447);
          var toObject = __webpack_require__2(1795);
          var sharedKey = __webpack_require__2(9766);
          var CORRECT_PROTOTYPE_GETTER = __webpack_require__2(4635);
          var IE_PROTO = sharedKey("IE_PROTO");
          var ObjectPrototype = Object.prototype;
          module2.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function(O) {
            var object = toObject(O);
            if (hasOwn(object, IE_PROTO))
              return object[IE_PROTO];
            var constructor = object.constructor;
            if (isCallable(constructor) && object instanceof constructor) {
              return constructor.prototype;
            }
            return object instanceof Object ? ObjectPrototype : null;
          };
        },
        7934: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var hasOwn = __webpack_require__2(4500);
          var toIndexedObject = __webpack_require__2(101);
          var indexOf = __webpack_require__2(8180).indexOf;
          var hiddenKeys = __webpack_require__2(4535);
          module2.exports = function(object, names) {
            var O = toIndexedObject(object);
            var i = 0;
            var result = [];
            var key;
            for (key in O)
              !hasOwn(hiddenKeys, key) && hasOwn(O, key) && result.push(key);
            while (names.length > i)
              if (hasOwn(O, key = names[i++])) {
                ~indexOf(result, key) || result.push(key);
              }
            return result;
          };
        },
        7653: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var internalObjectKeys = __webpack_require__2(7934);
          var enumBugKeys = __webpack_require__2(2952);
          module2.exports = Object.keys || function keys(O) {
            return internalObjectKeys(O, enumBugKeys);
          };
        },
        6007: function(__unused_webpack_module, exports2) {
          var $propertyIsEnumerable = {}.propertyIsEnumerable;
          var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
          var NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);
          exports2.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
            var descriptor = getOwnPropertyDescriptor(this, V);
            return !!descriptor && descriptor.enumerable;
          } : $propertyIsEnumerable;
        },
        4469: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var anObject = __webpack_require__2(1138);
          var aPossiblePrototype = __webpack_require__2(7757);
          module2.exports = Object.setPrototypeOf || ("__proto__" in {} ? function() {
            var CORRECT_SETTER = false;
            var test = {};
            var setter;
            try {
              setter = Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set;
              setter.call(test, []);
              CORRECT_SETTER = test instanceof Array;
            } catch (error) {
            }
            return function setPrototypeOf(O, proto) {
              anObject(O);
              aPossiblePrototype(proto);
              if (CORRECT_SETTER)
                setter.call(O, proto);
              else
                O.__proto__ = proto;
              return O;
            };
          }() : void 0);
        },
        158: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var TO_STRING_TAG_SUPPORT = __webpack_require__2(3471);
          var classof = __webpack_require__2(4696);
          module2.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {
            return "[object " + classof(this) + "]";
          };
        },
        380: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var isCallable = __webpack_require__2(6447);
          var isObject = __webpack_require__2(5744);
          module2.exports = function(input, pref) {
            var fn, val;
            if (pref === "string" && isCallable(fn = input.toString) && !isObject(val = fn.call(input)))
              return val;
            if (isCallable(fn = input.valueOf) && !isObject(val = fn.call(input)))
              return val;
            if (pref !== "string" && isCallable(fn = input.toString) && !isObject(val = fn.call(input)))
              return val;
            throw TypeError("Can't convert object to primitive value");
          };
        },
        7545: function(module2) {
          module2.exports = {};
        },
        892: function(module2) {
          module2.exports = function(exec) {
            try {
              return { error: false, value: exec() };
            } catch (error) {
              return { error: true, value: error };
            }
          };
        },
        9126: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var anObject = __webpack_require__2(1138);
          var isObject = __webpack_require__2(5744);
          var newPromiseCapability = __webpack_require__2(9438);
          module2.exports = function(C, x) {
            anObject(C);
            if (isObject(x) && x.constructor === C)
              return x;
            var promiseCapability = newPromiseCapability.f(C);
            var resolve = promiseCapability.resolve;
            resolve(x);
            return promiseCapability.promise;
          };
        },
        533: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var redefine = __webpack_require__2(9482);
          module2.exports = function(target, src, options) {
            for (var key in src) {
              if (options && options.unsafe && target[key])
                target[key] = src[key];
              else
                redefine(target, key, src[key], options);
            }
            return target;
          };
        },
        9482: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var createNonEnumerableProperty = __webpack_require__2(8711);
          module2.exports = function(target, key, value, options) {
            if (options && options.enumerable)
              target[key] = value;
            else
              createNonEnumerableProperty(target, key, value);
          };
        },
        3209: function(module2) {
          module2.exports = function(it) {
            if (it == void 0)
              throw TypeError("Can't call method on " + it);
            return it;
          };
        },
        7613: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          module2.exports = function(key, value) {
            try {
              Object.defineProperty(global2, key, { value, configurable: true, writable: true });
            } catch (error) {
              global2[key] = value;
            }
            return value;
          };
        },
        3656: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var getBuiltIn = __webpack_require__2(150);
          var definePropertyModule = __webpack_require__2(2760);
          var wellKnownSymbol = __webpack_require__2(8182);
          var DESCRIPTORS = __webpack_require__2(69);
          var SPECIES = wellKnownSymbol("species");
          module2.exports = function(CONSTRUCTOR_NAME) {
            var Constructor = getBuiltIn(CONSTRUCTOR_NAME);
            var defineProperty = definePropertyModule.f;
            if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {
              defineProperty(Constructor, SPECIES, {
                configurable: true,
                get: function() {
                  return this;
                }
              });
            }
          };
        },
        1284: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var TO_STRING_TAG_SUPPORT = __webpack_require__2(3471);
          var defineProperty = __webpack_require__2(2760).f;
          var createNonEnumerableProperty = __webpack_require__2(8711);
          var hasOwn = __webpack_require__2(4500);
          var toString = __webpack_require__2(158);
          var wellKnownSymbol = __webpack_require__2(8182);
          var TO_STRING_TAG = wellKnownSymbol("toStringTag");
          module2.exports = function(it, TAG, STATIC, SET_METHOD) {
            if (it) {
              var target = STATIC ? it : it.prototype;
              if (!hasOwn(target, TO_STRING_TAG)) {
                defineProperty(target, TO_STRING_TAG, { configurable: true, value: TAG });
              }
              if (SET_METHOD && !TO_STRING_TAG_SUPPORT) {
                createNonEnumerableProperty(target, "toString", toString);
              }
            }
          };
        },
        9766: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var shared = __webpack_require__2(8717);
          var uid = __webpack_require__2(2759);
          var keys = shared("keys");
          module2.exports = function(key) {
            return keys[key] || (keys[key] = uid(key));
          };
        },
        6434: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          var setGlobal = __webpack_require__2(7613);
          var SHARED = "__core-js_shared__";
          var store = global2[SHARED] || setGlobal(SHARED, {});
          module2.exports = store;
        },
        8717: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var IS_PURE = __webpack_require__2(5546);
          var store = __webpack_require__2(6434);
          (module2.exports = function(key, value) {
            return store[key] || (store[key] = value !== void 0 ? value : {});
          })("versions", []).push({
            version: "3.18.2",
            mode: IS_PURE ? "pure" : "global",
            copyright: "\xA9 2021 Denis Pushkarev (zloirock.ru)"
          });
        },
        4743: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var anObject = __webpack_require__2(1138);
          var aConstructor = __webpack_require__2(1404);
          var wellKnownSymbol = __webpack_require__2(8182);
          var SPECIES = wellKnownSymbol("species");
          module2.exports = function(O, defaultConstructor) {
            var C = anObject(O).constructor;
            var S;
            return C === void 0 || (S = anObject(C)[SPECIES]) == void 0 ? defaultConstructor : aConstructor(S);
          };
        },
        863: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var toIntegerOrInfinity = __webpack_require__2(1941);
          var toString = __webpack_require__2(4845);
          var requireObjectCoercible = __webpack_require__2(3209);
          var createMethod = function(CONVERT_TO_STRING) {
            return function($this, pos) {
              var S = toString(requireObjectCoercible($this));
              var position = toIntegerOrInfinity(pos);
              var size = S.length;
              var first, second;
              if (position < 0 || position >= size)
                return CONVERT_TO_STRING ? "" : void 0;
              first = S.charCodeAt(position);
              return first < 55296 || first > 56319 || position + 1 === size || (second = S.charCodeAt(position + 1)) < 56320 || second > 57343 ? CONVERT_TO_STRING ? S.charAt(position) : first : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 55296 << 10) + (second - 56320) + 65536;
            };
          };
          module2.exports = {
            codeAt: createMethod(false),
            charAt: createMethod(true)
          };
        },
        7977: function(module2) {
          var maxInt = 2147483647;
          var base = 36;
          var tMin = 1;
          var tMax = 26;
          var skew = 38;
          var damp = 700;
          var initialBias = 72;
          var initialN = 128;
          var delimiter = "-";
          var regexNonASCII = /[^\0-\u007E]/;
          var regexSeparators = /[.\u3002\uFF0E\uFF61]/g;
          var OVERFLOW_ERROR = "Overflow: input needs wider integers to process";
          var baseMinusTMin = base - tMin;
          var floor = Math.floor;
          var stringFromCharCode = String.fromCharCode;
          var ucs2decode = function(string) {
            var output = [];
            var counter = 0;
            var length = string.length;
            while (counter < length) {
              var value = string.charCodeAt(counter++);
              if (value >= 55296 && value <= 56319 && counter < length) {
                var extra = string.charCodeAt(counter++);
                if ((extra & 64512) == 56320) {
                  output.push(((value & 1023) << 10) + (extra & 1023) + 65536);
                } else {
                  output.push(value);
                  counter--;
                }
              } else {
                output.push(value);
              }
            }
            return output;
          };
          var digitToBasic = function(digit) {
            return digit + 22 + 75 * (digit < 26);
          };
          var adapt = function(delta, numPoints, firstTime) {
            var k = 0;
            delta = firstTime ? floor(delta / damp) : delta >> 1;
            delta += floor(delta / numPoints);
            for (; delta > baseMinusTMin * tMax >> 1; k += base) {
              delta = floor(delta / baseMinusTMin);
            }
            return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
          };
          var encode = function(input) {
            var output = [];
            input = ucs2decode(input);
            var inputLength = input.length;
            var n = initialN;
            var delta = 0;
            var bias = initialBias;
            var i, currentValue;
            for (i = 0; i < input.length; i++) {
              currentValue = input[i];
              if (currentValue < 128) {
                output.push(stringFromCharCode(currentValue));
              }
            }
            var basicLength = output.length;
            var handledCPCount = basicLength;
            if (basicLength) {
              output.push(delimiter);
            }
            while (handledCPCount < inputLength) {
              var m = maxInt;
              for (i = 0; i < input.length; i++) {
                currentValue = input[i];
                if (currentValue >= n && currentValue < m) {
                  m = currentValue;
                }
              }
              var handledCPCountPlusOne = handledCPCount + 1;
              if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
                throw RangeError(OVERFLOW_ERROR);
              }
              delta += (m - n) * handledCPCountPlusOne;
              n = m;
              for (i = 0; i < input.length; i++) {
                currentValue = input[i];
                if (currentValue < n && ++delta > maxInt) {
                  throw RangeError(OVERFLOW_ERROR);
                }
                if (currentValue == n) {
                  var q = delta;
                  for (var k = base; ; k += base) {
                    var t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;
                    if (q < t)
                      break;
                    var qMinusT = q - t;
                    var baseMinusT = base - t;
                    output.push(stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT)));
                    q = floor(qMinusT / baseMinusT);
                  }
                  output.push(stringFromCharCode(digitToBasic(q)));
                  bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
                  delta = 0;
                  ++handledCPCount;
                }
              }
              ++delta;
              ++n;
            }
            return output.join("");
          };
          module2.exports = function(input) {
            var encoded = [];
            var labels = input.toLowerCase().replace(regexSeparators, ".").split(".");
            var i, label;
            for (i = 0; i < labels.length; i++) {
              label = labels[i];
              encoded.push(regexNonASCII.test(label) ? "xn--" + encode(label) : label);
            }
            return encoded.join(".");
          };
        },
        6815: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var PROPER_FUNCTION_NAME = __webpack_require__2(2282).PROPER;
          var fails = __webpack_require__2(6192);
          var whitespaces = __webpack_require__2(1450);
          var non = "\u200B\x85\u180E";
          module2.exports = function(METHOD_NAME) {
            return fails(function() {
              return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() !== non || PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME;
            });
          };
        },
        4277: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var requireObjectCoercible = __webpack_require__2(3209);
          var toString = __webpack_require__2(4845);
          var whitespaces = __webpack_require__2(1450);
          var whitespace = "[" + whitespaces + "]";
          var ltrim = RegExp("^" + whitespace + whitespace + "*");
          var rtrim = RegExp(whitespace + whitespace + "*$");
          var createMethod = function(TYPE) {
            return function($this) {
              var string = toString(requireObjectCoercible($this));
              if (TYPE & 1)
                string = string.replace(ltrim, "");
              if (TYPE & 2)
                string = string.replace(rtrim, "");
              return string;
            };
          };
          module2.exports = {
            start: createMethod(1),
            end: createMethod(2),
            trim: createMethod(3)
          };
        },
        7160: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          var isCallable = __webpack_require__2(6447);
          var fails = __webpack_require__2(6192);
          var bind = __webpack_require__2(8043);
          var html = __webpack_require__2(7403);
          var createElement2 = __webpack_require__2(7449);
          var IS_IOS = __webpack_require__2(9536);
          var IS_NODE = __webpack_require__2(224);
          var set = global2.setImmediate;
          var clear = global2.clearImmediate;
          var process = global2.process;
          var MessageChannel = global2.MessageChannel;
          var Dispatch = global2.Dispatch;
          var counter = 0;
          var queue = {};
          var ONREADYSTATECHANGE = "onreadystatechange";
          var location2, defer, channel, port;
          try {
            location2 = global2.location;
          } catch (error) {
          }
          var run = function(id) {
            if (queue.hasOwnProperty(id)) {
              var fn = queue[id];
              delete queue[id];
              fn();
            }
          };
          var runner = function(id) {
            return function() {
              run(id);
            };
          };
          var listener = function(event) {
            run(event.data);
          };
          var post = function(id) {
            global2.postMessage(String(id), location2.protocol + "//" + location2.host);
          };
          if (!set || !clear) {
            set = function setImmediate(fn) {
              var args = [];
              var argumentsLength = arguments.length;
              var i = 1;
              while (argumentsLength > i)
                args.push(arguments[i++]);
              queue[++counter] = function() {
                (isCallable(fn) ? fn : Function(fn)).apply(void 0, args);
              };
              defer(counter);
              return counter;
            };
            clear = function clearImmediate(id) {
              delete queue[id];
            };
            if (IS_NODE) {
              defer = function(id) {
                process.nextTick(runner(id));
              };
            } else if (Dispatch && Dispatch.now) {
              defer = function(id) {
                Dispatch.now(runner(id));
              };
            } else if (MessageChannel && !IS_IOS) {
              channel = new MessageChannel();
              port = channel.port2;
              channel.port1.onmessage = listener;
              defer = bind(port.postMessage, port, 1);
            } else if (global2.addEventListener && isCallable(global2.postMessage) && !global2.importScripts && location2 && location2.protocol !== "file:" && !fails(post)) {
              defer = post;
              global2.addEventListener("message", listener, false);
            } else if (ONREADYSTATECHANGE in createElement2("script")) {
              defer = function(id) {
                html.appendChild(createElement2("script"))[ONREADYSTATECHANGE] = function() {
                  html.removeChild(this);
                  run(id);
                };
              };
            } else {
              defer = function(id) {
                setTimeout(runner(id), 0);
              };
            }
          }
          module2.exports = {
            set,
            clear
          };
        },
        7739: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var toIntegerOrInfinity = __webpack_require__2(1941);
          var max = Math.max;
          var min = Math.min;
          module2.exports = function(index, length) {
            var integer = toIntegerOrInfinity(index);
            return integer < 0 ? max(integer + length, 0) : min(integer, length);
          };
        },
        101: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var IndexedObject = __webpack_require__2(2202);
          var requireObjectCoercible = __webpack_require__2(3209);
          module2.exports = function(it) {
            return IndexedObject(requireObjectCoercible(it));
          };
        },
        1941: function(module2) {
          var ceil = Math.ceil;
          var floor = Math.floor;
          module2.exports = function(argument) {
            var number = +argument;
            return number !== number || number === 0 ? 0 : (number > 0 ? floor : ceil)(number);
          };
        },
        8445: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var toIntegerOrInfinity = __webpack_require__2(1941);
          var min = Math.min;
          module2.exports = function(argument) {
            return argument > 0 ? min(toIntegerOrInfinity(argument), 9007199254740991) : 0;
          };
        },
        1795: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var requireObjectCoercible = __webpack_require__2(3209);
          module2.exports = function(argument) {
            return Object(requireObjectCoercible(argument));
          };
        },
        7888: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var isObject = __webpack_require__2(5744);
          var isSymbol = __webpack_require__2(3236);
          var getMethod = __webpack_require__2(5037);
          var ordinaryToPrimitive = __webpack_require__2(380);
          var wellKnownSymbol = __webpack_require__2(8182);
          var TO_PRIMITIVE = wellKnownSymbol("toPrimitive");
          module2.exports = function(input, pref) {
            if (!isObject(input) || isSymbol(input))
              return input;
            var exoticToPrim = getMethod(input, TO_PRIMITIVE);
            var result;
            if (exoticToPrim) {
              if (pref === void 0)
                pref = "default";
              result = exoticToPrim.call(input, pref);
              if (!isObject(result) || isSymbol(result))
                return result;
              throw TypeError("Can't convert object to primitive value");
            }
            if (pref === void 0)
              pref = "number";
            return ordinaryToPrimitive(input, pref);
          };
        },
        77: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var toPrimitive = __webpack_require__2(7888);
          var isSymbol = __webpack_require__2(3236);
          module2.exports = function(argument) {
            var key = toPrimitive(argument, "string");
            return isSymbol(key) ? key : String(key);
          };
        },
        3471: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var wellKnownSymbol = __webpack_require__2(8182);
          var TO_STRING_TAG = wellKnownSymbol("toStringTag");
          var test = {};
          test[TO_STRING_TAG] = "z";
          module2.exports = String(test) === "[object z]";
        },
        4845: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var classof = __webpack_require__2(4696);
          module2.exports = function(argument) {
            if (classof(argument) === "Symbol")
              throw TypeError("Cannot convert a Symbol value to a string");
            return String(argument);
          };
        },
        9288: function(module2) {
          module2.exports = function(argument) {
            try {
              return String(argument);
            } catch (error) {
              return "Object";
            }
          };
        },
        2759: function(module2) {
          var id = 0;
          var postfix = Math.random();
          module2.exports = function(key) {
            return "Symbol(" + String(key === void 0 ? "" : key) + ")_" + (++id + postfix).toString(36);
          };
        },
        615: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var NATIVE_SYMBOL = __webpack_require__2(3045);
          module2.exports = NATIVE_SYMBOL && !Symbol.sham && typeof Symbol.iterator == "symbol";
        },
        9207: function(__unused_webpack_module, exports2, __webpack_require__2) {
          var wellKnownSymbol = __webpack_require__2(8182);
          exports2.f = wellKnownSymbol;
        },
        8182: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          var shared = __webpack_require__2(8717);
          var hasOwn = __webpack_require__2(4500);
          var uid = __webpack_require__2(2759);
          var NATIVE_SYMBOL = __webpack_require__2(3045);
          var USE_SYMBOL_AS_UID = __webpack_require__2(615);
          var WellKnownSymbolsStore = shared("wks");
          var Symbol2 = global2.Symbol;
          var createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol2 : Symbol2 && Symbol2.withoutSetter || uid;
          module2.exports = function(name) {
            if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == "string")) {
              if (NATIVE_SYMBOL && hasOwn(Symbol2, name)) {
                WellKnownSymbolsStore[name] = Symbol2[name];
              } else {
                WellKnownSymbolsStore[name] = createWellKnownSymbol("Symbol." + name);
              }
            }
            return WellKnownSymbolsStore[name];
          };
        },
        1450: function(module2) {
          module2.exports = "	\n\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF";
        },
        4242: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var getPrototypeOf = __webpack_require__2(9341);
          var setPrototypeOf = __webpack_require__2(4469);
          var create = __webpack_require__2(2853);
          var createNonEnumerableProperty = __webpack_require__2(8711);
          var createPropertyDescriptor = __webpack_require__2(774);
          var installErrorCause = __webpack_require__2(273);
          var iterate = __webpack_require__2(3442);
          var toString = __webpack_require__2(4845);
          var $AggregateError = function AggregateError(errors, message) {
            var that = this;
            var options = arguments.length > 2 ? arguments[2] : void 0;
            if (!(that instanceof $AggregateError))
              return new $AggregateError(errors, message, options);
            if (setPrototypeOf) {
              that = setPrototypeOf(new Error(void 0), getPrototypeOf(that));
            }
            if (message !== void 0)
              createNonEnumerableProperty(that, "message", toString(message));
            installErrorCause(that, options);
            var errorsArray = [];
            iterate(errors, errorsArray.push, { that: errorsArray });
            createNonEnumerableProperty(that, "errors", errorsArray);
            return that;
          };
          $AggregateError.prototype = create(Error.prototype, {
            constructor: createPropertyDescriptor(5, $AggregateError),
            message: createPropertyDescriptor(5, ""),
            name: createPropertyDescriptor(5, "AggregateError")
          });
          $({ global: true }, {
            AggregateError: $AggregateError
          });
        },
        9106: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var fails = __webpack_require__2(6192);
          var isArray = __webpack_require__2(4770);
          var isObject = __webpack_require__2(5744);
          var toObject = __webpack_require__2(1795);
          var lengthOfArrayLike = __webpack_require__2(4104);
          var createProperty = __webpack_require__2(9361);
          var arraySpeciesCreate = __webpack_require__2(1321);
          var arrayMethodHasSpeciesSupport = __webpack_require__2(242);
          var wellKnownSymbol = __webpack_require__2(8182);
          var V8_VERSION = __webpack_require__2(4218);
          var IS_CONCAT_SPREADABLE = wellKnownSymbol("isConcatSpreadable");
          var MAX_SAFE_INTEGER = 9007199254740991;
          var MAXIMUM_ALLOWED_INDEX_EXCEEDED = "Maximum allowed index exceeded";
          var IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function() {
            var array = [];
            array[IS_CONCAT_SPREADABLE] = false;
            return array.concat()[0] !== array;
          });
          var SPECIES_SUPPORT = arrayMethodHasSpeciesSupport("concat");
          var isConcatSpreadable = function(O) {
            if (!isObject(O))
              return false;
            var spreadable = O[IS_CONCAT_SPREADABLE];
            return spreadable !== void 0 ? !!spreadable : isArray(O);
          };
          var FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;
          $({ target: "Array", proto: true, forced: FORCED }, {
            concat: function concat(arg) {
              var O = toObject(this);
              var A = arraySpeciesCreate(O, 0);
              var n = 0;
              var i, k, length, len, E;
              for (i = -1, length = arguments.length; i < length; i++) {
                E = i === -1 ? O : arguments[i];
                if (isConcatSpreadable(E)) {
                  len = lengthOfArrayLike(E);
                  if (n + len > MAX_SAFE_INTEGER)
                    throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);
                  for (k = 0; k < len; k++, n++)
                    if (k in E)
                      createProperty(A, n, E[k]);
                } else {
                  if (n >= MAX_SAFE_INTEGER)
                    throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);
                  createProperty(A, n++, E);
                }
              }
              A.length = n;
              return A;
            }
          });
        },
        1710: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var fill = __webpack_require__2(2724);
          var addToUnscopables = __webpack_require__2(7423);
          $({ target: "Array", proto: true }, {
            fill
          });
          addToUnscopables("fill");
        },
        3436: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var $filter = __webpack_require__2(454).filter;
          var arrayMethodHasSpeciesSupport = __webpack_require__2(242);
          var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport("filter");
          $({ target: "Array", proto: true, forced: !HAS_SPECIES_SUPPORT }, {
            filter: function filter(callbackfn) {
              return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : void 0);
            }
          });
        },
        9823: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var forEach = __webpack_require__2(7397);
          $({ target: "Array", proto: true, forced: [].forEach != forEach }, {
            forEach
          });
        },
        9173: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var from = __webpack_require__2(841);
          var checkCorrectnessOfIteration = __webpack_require__2(9770);
          var INCORRECT_ITERATION = !checkCorrectnessOfIteration(function(iterable) {
            Array.from(iterable);
          });
          $({ target: "Array", stat: true, forced: INCORRECT_ITERATION }, {
            from
          });
        },
        2276: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var $indexOf = __webpack_require__2(8180).indexOf;
          var arrayMethodIsStrict = __webpack_require__2(424);
          var nativeIndexOf = [].indexOf;
          var NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;
          var STRICT_METHOD = arrayMethodIsStrict("indexOf");
          $({ target: "Array", proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD }, {
            indexOf: function indexOf(searchElement) {
              return NEGATIVE_ZERO ? nativeIndexOf.apply(this, arguments) || 0 : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : void 0);
            }
          });
        },
        8118: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var isArray = __webpack_require__2(4770);
          $({ target: "Array", stat: true }, {
            isArray
          });
        },
        8939: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var toIndexedObject = __webpack_require__2(101);
          var addToUnscopables = __webpack_require__2(7423);
          var Iterators = __webpack_require__2(7771);
          var InternalStateModule = __webpack_require__2(3326);
          var defineIterator = __webpack_require__2(7218);
          var ARRAY_ITERATOR = "Array Iterator";
          var setInternalState = InternalStateModule.set;
          var getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);
          module2.exports = defineIterator(Array, "Array", function(iterated, kind) {
            setInternalState(this, {
              type: ARRAY_ITERATOR,
              target: toIndexedObject(iterated),
              index: 0,
              kind
            });
          }, function() {
            var state = getInternalState(this);
            var target = state.target;
            var kind = state.kind;
            var index = state.index++;
            if (!target || index >= target.length) {
              state.target = void 0;
              return { value: void 0, done: true };
            }
            if (kind == "keys")
              return { value: index, done: false };
            if (kind == "values")
              return { value: target[index], done: false };
            return { value: [index, target[index]], done: false };
          }, "values");
          Iterators.Arguments = Iterators.Array;
          addToUnscopables("keys");
          addToUnscopables("values");
          addToUnscopables("entries");
        },
        3838: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var $map = __webpack_require__2(454).map;
          var arrayMethodHasSpeciesSupport = __webpack_require__2(242);
          var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport("map");
          $({ target: "Array", proto: true, forced: !HAS_SPECIES_SUPPORT }, {
            map: function map(callbackfn) {
              return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : void 0);
            }
          });
        },
        5818: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var isArray = __webpack_require__2(4770);
          var isConstructor = __webpack_require__2(2091);
          var isObject = __webpack_require__2(5744);
          var toAbsoluteIndex = __webpack_require__2(7739);
          var lengthOfArrayLike = __webpack_require__2(4104);
          var toIndexedObject = __webpack_require__2(101);
          var createProperty = __webpack_require__2(9361);
          var wellKnownSymbol = __webpack_require__2(8182);
          var arrayMethodHasSpeciesSupport = __webpack_require__2(242);
          var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport("slice");
          var SPECIES = wellKnownSymbol("species");
          var nativeSlice = [].slice;
          var max = Math.max;
          $({ target: "Array", proto: true, forced: !HAS_SPECIES_SUPPORT }, {
            slice: function slice(start, end) {
              var O = toIndexedObject(this);
              var length = lengthOfArrayLike(O);
              var k = toAbsoluteIndex(start, length);
              var fin = toAbsoluteIndex(end === void 0 ? length : end, length);
              var Constructor, result, n;
              if (isArray(O)) {
                Constructor = O.constructor;
                if (isConstructor(Constructor) && (Constructor === Array || isArray(Constructor.prototype))) {
                  Constructor = void 0;
                } else if (isObject(Constructor)) {
                  Constructor = Constructor[SPECIES];
                  if (Constructor === null)
                    Constructor = void 0;
                }
                if (Constructor === Array || Constructor === void 0) {
                  return nativeSlice.call(O, k, fin);
                }
              }
              result = new (Constructor === void 0 ? Array : Constructor)(max(fin - k, 0));
              for (n = 0; k < fin; k++, n++)
                if (k in O)
                  createProperty(result, n, O[k]);
              result.length = n;
              return result;
            }
          });
        },
        2178: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var toAbsoluteIndex = __webpack_require__2(7739);
          var toIntegerOrInfinity = __webpack_require__2(1941);
          var lengthOfArrayLike = __webpack_require__2(4104);
          var toObject = __webpack_require__2(1795);
          var arraySpeciesCreate = __webpack_require__2(1321);
          var createProperty = __webpack_require__2(9361);
          var arrayMethodHasSpeciesSupport = __webpack_require__2(242);
          var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport("splice");
          var max = Math.max;
          var min = Math.min;
          var MAX_SAFE_INTEGER = 9007199254740991;
          var MAXIMUM_ALLOWED_LENGTH_EXCEEDED = "Maximum allowed length exceeded";
          $({ target: "Array", proto: true, forced: !HAS_SPECIES_SUPPORT }, {
            splice: function splice(start, deleteCount) {
              var O = toObject(this);
              var len = lengthOfArrayLike(O);
              var actualStart = toAbsoluteIndex(start, len);
              var argumentsLength = arguments.length;
              var insertCount, actualDeleteCount, A, k, from, to;
              if (argumentsLength === 0) {
                insertCount = actualDeleteCount = 0;
              } else if (argumentsLength === 1) {
                insertCount = 0;
                actualDeleteCount = len - actualStart;
              } else {
                insertCount = argumentsLength - 2;
                actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);
              }
              if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {
                throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);
              }
              A = arraySpeciesCreate(O, actualDeleteCount);
              for (k = 0; k < actualDeleteCount; k++) {
                from = actualStart + k;
                if (from in O)
                  createProperty(A, k, O[from]);
              }
              A.length = actualDeleteCount;
              if (insertCount < actualDeleteCount) {
                for (k = actualStart; k < len - actualDeleteCount; k++) {
                  from = k + actualDeleteCount;
                  to = k + insertCount;
                  if (from in O)
                    O[to] = O[from];
                  else
                    delete O[to];
                }
                for (k = len; k > len - actualDeleteCount + insertCount; k--)
                  delete O[k - 1];
              } else if (insertCount > actualDeleteCount) {
                for (k = len - actualDeleteCount; k > actualStart; k--) {
                  from = k + actualDeleteCount - 1;
                  to = k + insertCount - 1;
                  if (from in O)
                    O[to] = O[from];
                  else
                    delete O[to];
                }
              }
              for (k = 0; k < insertCount; k++) {
                O[k + actualStart] = arguments[k + 2];
              }
              O.length = len - actualDeleteCount + insertCount;
              return A;
            }
          });
        },
        665: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var bind = __webpack_require__2(6782);
          $({ target: "Function", proto: true }, {
            bind
          });
        },
        8671: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var global2 = __webpack_require__2(8576);
          var setToStringTag = __webpack_require__2(1284);
          setToStringTag(global2.JSON, "JSON", true);
        },
        8556: function() {
        },
        2666: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var parseInt2 = __webpack_require__2(2558);
          $({ target: "Number", stat: true, forced: Number.parseInt != parseInt2 }, {
            parseInt: parseInt2
          });
        },
        3113: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var DESCRIPTORS = __webpack_require__2(69);
          var create = __webpack_require__2(2853);
          $({ target: "Object", stat: true, sham: !DESCRIPTORS }, {
            create
          });
        },
        297: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var DESCRIPTORS = __webpack_require__2(69);
          var objectDefinePropertyModile = __webpack_require__2(2760);
          $({ target: "Object", stat: true, forced: !DESCRIPTORS, sham: !DESCRIPTORS }, {
            defineProperty: objectDefinePropertyModile.f
          });
        },
        9234: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var fails = __webpack_require__2(6192);
          var toObject = __webpack_require__2(1795);
          var nativeGetPrototypeOf = __webpack_require__2(9341);
          var CORRECT_PROTOTYPE_GETTER = __webpack_require__2(4635);
          var FAILS_ON_PRIMITIVES = fails(function() {
            nativeGetPrototypeOf(1);
          });
          $({ target: "Object", stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {
            getPrototypeOf: function getPrototypeOf(it) {
              return nativeGetPrototypeOf(toObject(it));
            }
          });
        },
        2647: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var toObject = __webpack_require__2(1795);
          var nativeKeys = __webpack_require__2(7653);
          var fails = __webpack_require__2(6192);
          var FAILS_ON_PRIMITIVES = fails(function() {
            nativeKeys(1);
          });
          $({ target: "Object", stat: true, forced: FAILS_ON_PRIMITIVES }, {
            keys: function keys(it) {
              return nativeKeys(toObject(it));
            }
          });
        },
        3222: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var setPrototypeOf = __webpack_require__2(4469);
          $({ target: "Object", stat: true }, {
            setPrototypeOf
          });
        },
        6663: function() {
        },
        4859: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var $parseFloat = __webpack_require__2(15);
          $({ global: true, forced: parseFloat != $parseFloat }, {
            parseFloat: $parseFloat
          });
        },
        5706: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var $parseInt = __webpack_require__2(2558);
          $({ global: true, forced: parseInt != $parseInt }, {
            parseInt: $parseInt
          });
        },
        7884: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var aCallable = __webpack_require__2(6235);
          var newPromiseCapabilityModule = __webpack_require__2(9438);
          var perform = __webpack_require__2(892);
          var iterate = __webpack_require__2(3442);
          $({ target: "Promise", stat: true }, {
            allSettled: function allSettled(iterable) {
              var C = this;
              var capability = newPromiseCapabilityModule.f(C);
              var resolve = capability.resolve;
              var reject = capability.reject;
              var result = perform(function() {
                var promiseResolve = aCallable(C.resolve);
                var values = [];
                var counter = 0;
                var remaining = 1;
                iterate(iterable, function(promise) {
                  var index = counter++;
                  var alreadyCalled = false;
                  values.push(void 0);
                  remaining++;
                  promiseResolve.call(C, promise).then(function(value) {
                    if (alreadyCalled)
                      return;
                    alreadyCalled = true;
                    values[index] = { status: "fulfilled", value };
                    --remaining || resolve(values);
                  }, function(error) {
                    if (alreadyCalled)
                      return;
                    alreadyCalled = true;
                    values[index] = { status: "rejected", reason: error };
                    --remaining || resolve(values);
                  });
                });
                --remaining || resolve(values);
              });
              if (result.error)
                reject(result.value);
              return capability.promise;
            }
          });
        },
        8885: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var aCallable = __webpack_require__2(6235);
          var getBuiltIn = __webpack_require__2(150);
          var newPromiseCapabilityModule = __webpack_require__2(9438);
          var perform = __webpack_require__2(892);
          var iterate = __webpack_require__2(3442);
          var PROMISE_ANY_ERROR = "No one promise resolved";
          $({ target: "Promise", stat: true }, {
            any: function any(iterable) {
              var C = this;
              var capability = newPromiseCapabilityModule.f(C);
              var resolve = capability.resolve;
              var reject = capability.reject;
              var result = perform(function() {
                var promiseResolve = aCallable(C.resolve);
                var errors = [];
                var counter = 0;
                var remaining = 1;
                var alreadyResolved = false;
                iterate(iterable, function(promise) {
                  var index = counter++;
                  var alreadyRejected = false;
                  errors.push(void 0);
                  remaining++;
                  promiseResolve.call(C, promise).then(function(value) {
                    if (alreadyRejected || alreadyResolved)
                      return;
                    alreadyResolved = true;
                    resolve(value);
                  }, function(error) {
                    if (alreadyRejected || alreadyResolved)
                      return;
                    alreadyRejected = true;
                    errors[index] = error;
                    --remaining || reject(new (getBuiltIn("AggregateError"))(errors, PROMISE_ANY_ERROR));
                  });
                });
                --remaining || reject(new (getBuiltIn("AggregateError"))(errors, PROMISE_ANY_ERROR));
              });
              if (result.error)
                reject(result.value);
              return capability.promise;
            }
          });
        },
        1868: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var IS_PURE = __webpack_require__2(5546);
          var NativePromise = __webpack_require__2(4471);
          var fails = __webpack_require__2(6192);
          var getBuiltIn = __webpack_require__2(150);
          var isCallable = __webpack_require__2(6447);
          var speciesConstructor = __webpack_require__2(4743);
          var promiseResolve = __webpack_require__2(9126);
          var redefine = __webpack_require__2(9482);
          var NON_GENERIC = !!NativePromise && fails(function() {
            NativePromise.prototype["finally"].call({ then: function() {
            } }, function() {
            });
          });
          $({ target: "Promise", proto: true, real: true, forced: NON_GENERIC }, {
            "finally": function(onFinally) {
              var C = speciesConstructor(this, getBuiltIn("Promise"));
              var isFunction = isCallable(onFinally);
              return this.then(isFunction ? function(x) {
                return promiseResolve(C, onFinally()).then(function() {
                  return x;
                });
              } : onFinally, isFunction ? function(e) {
                return promiseResolve(C, onFinally()).then(function() {
                  throw e;
                });
              } : onFinally);
            }
          });
          if (!IS_PURE && isCallable(NativePromise)) {
            var method = getBuiltIn("Promise").prototype["finally"];
            if (NativePromise.prototype["finally"] !== method) {
              redefine(NativePromise.prototype, "finally", method, { unsafe: true });
            }
          }
        },
        9021: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var IS_PURE = __webpack_require__2(5546);
          var global2 = __webpack_require__2(8576);
          var getBuiltIn = __webpack_require__2(150);
          var NativePromise = __webpack_require__2(4471);
          var redefine = __webpack_require__2(9482);
          var redefineAll = __webpack_require__2(533);
          var setPrototypeOf = __webpack_require__2(4469);
          var setToStringTag = __webpack_require__2(1284);
          var setSpecies = __webpack_require__2(3656);
          var aCallable = __webpack_require__2(6235);
          var isCallable = __webpack_require__2(6447);
          var isObject = __webpack_require__2(5744);
          var anInstance = __webpack_require__2(6961);
          var inspectSource = __webpack_require__2(9516);
          var iterate = __webpack_require__2(3442);
          var checkCorrectnessOfIteration = __webpack_require__2(9770);
          var speciesConstructor = __webpack_require__2(4743);
          var task = __webpack_require__2(7160).set;
          var microtask = __webpack_require__2(2950);
          var promiseResolve = __webpack_require__2(9126);
          var hostReportErrors = __webpack_require__2(3681);
          var newPromiseCapabilityModule = __webpack_require__2(9438);
          var perform = __webpack_require__2(892);
          var InternalStateModule = __webpack_require__2(3326);
          var isForced = __webpack_require__2(9245);
          var wellKnownSymbol = __webpack_require__2(8182);
          var IS_BROWSER = __webpack_require__2(2957);
          var IS_NODE = __webpack_require__2(224);
          var V8_VERSION = __webpack_require__2(4218);
          var SPECIES = wellKnownSymbol("species");
          var PROMISE = "Promise";
          var getInternalState = InternalStateModule.get;
          var setInternalState = InternalStateModule.set;
          var getInternalPromiseState = InternalStateModule.getterFor(PROMISE);
          var NativePromisePrototype = NativePromise && NativePromise.prototype;
          var PromiseConstructor = NativePromise;
          var PromiseConstructorPrototype = NativePromisePrototype;
          var TypeError2 = global2.TypeError;
          var document2 = global2.document;
          var process = global2.process;
          var newPromiseCapability = newPromiseCapabilityModule.f;
          var newGenericPromiseCapability = newPromiseCapability;
          var DISPATCH_EVENT = !!(document2 && document2.createEvent && global2.dispatchEvent);
          var NATIVE_REJECTION_EVENT = isCallable(global2.PromiseRejectionEvent);
          var UNHANDLED_REJECTION = "unhandledrejection";
          var REJECTION_HANDLED = "rejectionhandled";
          var PENDING = 0;
          var FULFILLED = 1;
          var REJECTED = 2;
          var HANDLED = 1;
          var UNHANDLED = 2;
          var SUBCLASSING = false;
          var Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;
          var FORCED = isForced(PROMISE, function() {
            var PROMISE_CONSTRUCTOR_SOURCE = inspectSource(PromiseConstructor);
            var GLOBAL_CORE_JS_PROMISE = PROMISE_CONSTRUCTOR_SOURCE !== String(PromiseConstructor);
            if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION === 66)
              return true;
            if (IS_PURE && !PromiseConstructorPrototype["finally"])
              return true;
            if (V8_VERSION >= 51 && /native code/.test(PROMISE_CONSTRUCTOR_SOURCE))
              return false;
            var promise = new PromiseConstructor(function(resolve) {
              resolve(1);
            });
            var FakePromise = function(exec) {
              exec(function() {
              }, function() {
              });
            };
            var constructor = promise.constructor = {};
            constructor[SPECIES] = FakePromise;
            SUBCLASSING = promise.then(function() {
            }) instanceof FakePromise;
            if (!SUBCLASSING)
              return true;
            return !GLOBAL_CORE_JS_PROMISE && IS_BROWSER && !NATIVE_REJECTION_EVENT;
          });
          var INCORRECT_ITERATION = FORCED || !checkCorrectnessOfIteration(function(iterable) {
            PromiseConstructor.all(iterable)["catch"](function() {
            });
          });
          var isThenable = function(it) {
            var then;
            return isObject(it) && isCallable(then = it.then) ? then : false;
          };
          var notify = function(state, isReject) {
            if (state.notified)
              return;
            state.notified = true;
            var chain = state.reactions;
            microtask(function() {
              var value = state.value;
              var ok = state.state == FULFILLED;
              var index = 0;
              while (chain.length > index) {
                var reaction = chain[index++];
                var handler = ok ? reaction.ok : reaction.fail;
                var resolve = reaction.resolve;
                var reject = reaction.reject;
                var domain = reaction.domain;
                var result, then, exited;
                try {
                  if (handler) {
                    if (!ok) {
                      if (state.rejection === UNHANDLED)
                        onHandleUnhandled(state);
                      state.rejection = HANDLED;
                    }
                    if (handler === true)
                      result = value;
                    else {
                      if (domain)
                        domain.enter();
                      result = handler(value);
                      if (domain) {
                        domain.exit();
                        exited = true;
                      }
                    }
                    if (result === reaction.promise) {
                      reject(TypeError2("Promise-chain cycle"));
                    } else if (then = isThenable(result)) {
                      then.call(result, resolve, reject);
                    } else
                      resolve(result);
                  } else
                    reject(value);
                } catch (error) {
                  if (domain && !exited)
                    domain.exit();
                  reject(error);
                }
              }
              state.reactions = [];
              state.notified = false;
              if (isReject && !state.rejection)
                onUnhandled(state);
            });
          };
          var dispatchEvent = function(name, promise, reason) {
            var event, handler;
            if (DISPATCH_EVENT) {
              event = document2.createEvent("Event");
              event.promise = promise;
              event.reason = reason;
              event.initEvent(name, false, true);
              global2.dispatchEvent(event);
            } else
              event = { promise, reason };
            if (!NATIVE_REJECTION_EVENT && (handler = global2["on" + name]))
              handler(event);
            else if (name === UNHANDLED_REJECTION)
              hostReportErrors("Unhandled promise rejection", reason);
          };
          var onUnhandled = function(state) {
            task.call(global2, function() {
              var promise = state.facade;
              var value = state.value;
              var IS_UNHANDLED = isUnhandled(state);
              var result;
              if (IS_UNHANDLED) {
                result = perform(function() {
                  if (IS_NODE) {
                    process.emit("unhandledRejection", value, promise);
                  } else
                    dispatchEvent(UNHANDLED_REJECTION, promise, value);
                });
                state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;
                if (result.error)
                  throw result.value;
              }
            });
          };
          var isUnhandled = function(state) {
            return state.rejection !== HANDLED && !state.parent;
          };
          var onHandleUnhandled = function(state) {
            task.call(global2, function() {
              var promise = state.facade;
              if (IS_NODE) {
                process.emit("rejectionHandled", promise);
              } else
                dispatchEvent(REJECTION_HANDLED, promise, state.value);
            });
          };
          var bind = function(fn, state, unwrap) {
            return function(value) {
              fn(state, value, unwrap);
            };
          };
          var internalReject = function(state, value, unwrap) {
            if (state.done)
              return;
            state.done = true;
            if (unwrap)
              state = unwrap;
            state.value = value;
            state.state = REJECTED;
            notify(state, true);
          };
          var internalResolve = function(state, value, unwrap) {
            if (state.done)
              return;
            state.done = true;
            if (unwrap)
              state = unwrap;
            try {
              if (state.facade === value)
                throw TypeError2("Promise can't be resolved itself");
              var then = isThenable(value);
              if (then) {
                microtask(function() {
                  var wrapper = { done: false };
                  try {
                    then.call(value, bind(internalResolve, wrapper, state), bind(internalReject, wrapper, state));
                  } catch (error) {
                    internalReject(wrapper, error, state);
                  }
                });
              } else {
                state.value = value;
                state.state = FULFILLED;
                notify(state, false);
              }
            } catch (error) {
              internalReject({ done: false }, error, state);
            }
          };
          if (FORCED) {
            PromiseConstructor = function Promise2(executor) {
              anInstance(this, PromiseConstructor, PROMISE);
              aCallable(executor);
              Internal.call(this);
              var state = getInternalState(this);
              try {
                executor(bind(internalResolve, state), bind(internalReject, state));
              } catch (error) {
                internalReject(state, error);
              }
            };
            PromiseConstructorPrototype = PromiseConstructor.prototype;
            Internal = function Promise2(executor) {
              setInternalState(this, {
                type: PROMISE,
                done: false,
                notified: false,
                parent: false,
                reactions: [],
                rejection: false,
                state: PENDING,
                value: void 0
              });
            };
            Internal.prototype = redefineAll(PromiseConstructorPrototype, {
              then: function then(onFulfilled, onRejected) {
                var state = getInternalPromiseState(this);
                var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));
                reaction.ok = isCallable(onFulfilled) ? onFulfilled : true;
                reaction.fail = isCallable(onRejected) && onRejected;
                reaction.domain = IS_NODE ? process.domain : void 0;
                state.parent = true;
                state.reactions.push(reaction);
                if (state.state != PENDING)
                  notify(state, false);
                return reaction.promise;
              },
              "catch": function(onRejected) {
                return this.then(void 0, onRejected);
              }
            });
            OwnPromiseCapability = function() {
              var promise = new Internal();
              var state = getInternalState(promise);
              this.promise = promise;
              this.resolve = bind(internalResolve, state);
              this.reject = bind(internalReject, state);
            };
            newPromiseCapabilityModule.f = newPromiseCapability = function(C) {
              return C === PromiseConstructor || C === PromiseWrapper ? new OwnPromiseCapability(C) : newGenericPromiseCapability(C);
            };
            if (!IS_PURE && isCallable(NativePromise) && NativePromisePrototype !== Object.prototype) {
              nativeThen = NativePromisePrototype.then;
              if (!SUBCLASSING) {
                redefine(NativePromisePrototype, "then", function then(onFulfilled, onRejected) {
                  var that = this;
                  return new PromiseConstructor(function(resolve, reject) {
                    nativeThen.call(that, resolve, reject);
                  }).then(onFulfilled, onRejected);
                }, { unsafe: true });
                redefine(NativePromisePrototype, "catch", PromiseConstructorPrototype["catch"], { unsafe: true });
              }
              try {
                delete NativePromisePrototype.constructor;
              } catch (error) {
              }
              if (setPrototypeOf) {
                setPrototypeOf(NativePromisePrototype, PromiseConstructorPrototype);
              }
            }
          }
          $({ global: true, wrap: true, forced: FORCED }, {
            Promise: PromiseConstructor
          });
          setToStringTag(PromiseConstructor, PROMISE, false, true);
          setSpecies(PROMISE);
          PromiseWrapper = getBuiltIn(PROMISE);
          $({ target: PROMISE, stat: true, forced: FORCED }, {
            reject: function reject(r) {
              var capability = newPromiseCapability(this);
              capability.reject.call(void 0, r);
              return capability.promise;
            }
          });
          $({ target: PROMISE, stat: true, forced: IS_PURE || FORCED }, {
            resolve: function resolve(x) {
              return promiseResolve(IS_PURE && this === PromiseWrapper ? PromiseConstructor : this, x);
            }
          });
          $({ target: PROMISE, stat: true, forced: INCORRECT_ITERATION }, {
            all: function all(iterable) {
              var C = this;
              var capability = newPromiseCapability(C);
              var resolve = capability.resolve;
              var reject = capability.reject;
              var result = perform(function() {
                var $promiseResolve = aCallable(C.resolve);
                var values = [];
                var counter = 0;
                var remaining = 1;
                iterate(iterable, function(promise) {
                  var index = counter++;
                  var alreadyCalled = false;
                  values.push(void 0);
                  remaining++;
                  $promiseResolve.call(C, promise).then(function(value) {
                    if (alreadyCalled)
                      return;
                    alreadyCalled = true;
                    values[index] = value;
                    --remaining || resolve(values);
                  }, reject);
                });
                --remaining || resolve(values);
              });
              if (result.error)
                reject(result.value);
              return capability.promise;
            },
            race: function race(iterable) {
              var C = this;
              var capability = newPromiseCapability(C);
              var reject = capability.reject;
              var result = perform(function() {
                var $promiseResolve = aCallable(C.resolve);
                iterate(iterable, function(promise) {
                  $promiseResolve.call(C, promise).then(capability.resolve, reject);
                });
              });
              if (result.error)
                reject(result.value);
              return capability.promise;
            }
          });
        },
        5397: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var getBuiltIn = __webpack_require__2(150);
          var aConstructor = __webpack_require__2(1404);
          var anObject = __webpack_require__2(1138);
          var isObject = __webpack_require__2(5744);
          var create = __webpack_require__2(2853);
          var bind = __webpack_require__2(6782);
          var fails = __webpack_require__2(6192);
          var nativeConstruct = getBuiltIn("Reflect", "construct");
          var NEW_TARGET_BUG = fails(function() {
            function F() {
            }
            return !(nativeConstruct(function() {
            }, [], F) instanceof F);
          });
          var ARGS_BUG = !fails(function() {
            nativeConstruct(function() {
            });
          });
          var FORCED = NEW_TARGET_BUG || ARGS_BUG;
          $({ target: "Reflect", stat: true, forced: FORCED, sham: FORCED }, {
            construct: function construct(Target, args) {
              aConstructor(Target);
              anObject(args);
              var newTarget = arguments.length < 3 ? Target : aConstructor(arguments[2]);
              if (ARGS_BUG && !NEW_TARGET_BUG)
                return nativeConstruct(Target, args, newTarget);
              if (Target == newTarget) {
                switch (args.length) {
                  case 0:
                    return new Target();
                  case 1:
                    return new Target(args[0]);
                  case 2:
                    return new Target(args[0], args[1]);
                  case 3:
                    return new Target(args[0], args[1], args[2]);
                  case 4:
                    return new Target(args[0], args[1], args[2], args[3]);
                }
                var $args = [null];
                $args.push.apply($args, args);
                return new (bind.apply(Target, $args))();
              }
              var proto = newTarget.prototype;
              var instance = create(isObject(proto) ? proto : Object.prototype);
              var result = Function.apply.call(Target, instance, args);
              return isObject(result) ? result : instance;
            }
          });
        },
        1367: function() {
        },
        5454: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var charAt = __webpack_require__2(863).charAt;
          var toString = __webpack_require__2(4845);
          var InternalStateModule = __webpack_require__2(3326);
          var defineIterator = __webpack_require__2(7218);
          var STRING_ITERATOR = "String Iterator";
          var setInternalState = InternalStateModule.set;
          var getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);
          defineIterator(String, "String", function(iterated) {
            setInternalState(this, {
              type: STRING_ITERATOR,
              string: toString(iterated),
              index: 0
            });
          }, function next() {
            var state = getInternalState(this);
            var string = state.string;
            var index = state.index;
            var point;
            if (index >= string.length)
              return { value: void 0, done: true };
            point = charAt(string, index);
            state.index += point.length;
            return { value: point, done: false };
          });
        },
        957: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var $trim = __webpack_require__2(4277).trim;
          var forcedStringTrimMethod = __webpack_require__2(6815);
          $({ target: "String", proto: true, forced: forcedStringTrimMethod("trim") }, {
            trim: function trim() {
              return $trim(this);
            }
          });
        },
        9781: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("asyncIterator");
        },
        492: function() {
        },
        6681: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("hasInstance");
        },
        9594: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("isConcatSpreadable");
        },
        3665: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("iterator");
        },
        6187: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var global2 = __webpack_require__2(8576);
          var getBuiltIn = __webpack_require__2(150);
          var IS_PURE = __webpack_require__2(5546);
          var DESCRIPTORS = __webpack_require__2(69);
          var NATIVE_SYMBOL = __webpack_require__2(3045);
          var fails = __webpack_require__2(6192);
          var hasOwn = __webpack_require__2(4500);
          var isArray = __webpack_require__2(4770);
          var isCallable = __webpack_require__2(6447);
          var isObject = __webpack_require__2(5744);
          var isSymbol = __webpack_require__2(3236);
          var anObject = __webpack_require__2(1138);
          var toObject = __webpack_require__2(1795);
          var toIndexedObject = __webpack_require__2(101);
          var toPropertyKey = __webpack_require__2(77);
          var $toString = __webpack_require__2(4845);
          var createPropertyDescriptor = __webpack_require__2(774);
          var nativeObjectCreate = __webpack_require__2(2853);
          var objectKeys = __webpack_require__2(7653);
          var getOwnPropertyNamesModule = __webpack_require__2(2092);
          var getOwnPropertyNamesExternal = __webpack_require__2(4052);
          var getOwnPropertySymbolsModule = __webpack_require__2(4750);
          var getOwnPropertyDescriptorModule = __webpack_require__2(5141);
          var definePropertyModule = __webpack_require__2(2760);
          var propertyIsEnumerableModule = __webpack_require__2(6007);
          var redefine = __webpack_require__2(9482);
          var shared = __webpack_require__2(8717);
          var sharedKey = __webpack_require__2(9766);
          var hiddenKeys = __webpack_require__2(4535);
          var uid = __webpack_require__2(2759);
          var wellKnownSymbol = __webpack_require__2(8182);
          var wrappedWellKnownSymbolModule = __webpack_require__2(9207);
          var defineWellKnownSymbol = __webpack_require__2(1488);
          var setToStringTag = __webpack_require__2(1284);
          var InternalStateModule = __webpack_require__2(3326);
          var $forEach = __webpack_require__2(454).forEach;
          var HIDDEN = sharedKey("hidden");
          var SYMBOL = "Symbol";
          var PROTOTYPE = "prototype";
          var TO_PRIMITIVE = wellKnownSymbol("toPrimitive");
          var setInternalState = InternalStateModule.set;
          var getInternalState = InternalStateModule.getterFor(SYMBOL);
          var ObjectPrototype = Object[PROTOTYPE];
          var $Symbol = global2.Symbol;
          var $stringify = getBuiltIn("JSON", "stringify");
          var nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
          var nativeDefineProperty = definePropertyModule.f;
          var nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;
          var nativePropertyIsEnumerable = propertyIsEnumerableModule.f;
          var AllSymbols = shared("symbols");
          var ObjectPrototypeSymbols = shared("op-symbols");
          var StringToSymbolRegistry = shared("string-to-symbol-registry");
          var SymbolToStringRegistry = shared("symbol-to-string-registry");
          var WellKnownSymbolsStore = shared("wks");
          var QObject = global2.QObject;
          var USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;
          var setSymbolDescriptor = DESCRIPTORS && fails(function() {
            return nativeObjectCreate(nativeDefineProperty({}, "a", {
              get: function() {
                return nativeDefineProperty(this, "a", { value: 7 }).a;
              }
            })).a != 7;
          }) ? function(O, P, Attributes) {
            var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);
            if (ObjectPrototypeDescriptor)
              delete ObjectPrototype[P];
            nativeDefineProperty(O, P, Attributes);
            if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {
              nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);
            }
          } : nativeDefineProperty;
          var wrap = function(tag, description) {
            var symbol = AllSymbols[tag] = nativeObjectCreate($Symbol[PROTOTYPE]);
            setInternalState(symbol, {
              type: SYMBOL,
              tag,
              description
            });
            if (!DESCRIPTORS)
              symbol.description = description;
            return symbol;
          };
          var $defineProperty = function defineProperty(O, P, Attributes) {
            if (O === ObjectPrototype)
              $defineProperty(ObjectPrototypeSymbols, P, Attributes);
            anObject(O);
            var key = toPropertyKey(P);
            anObject(Attributes);
            if (hasOwn(AllSymbols, key)) {
              if (!Attributes.enumerable) {
                if (!hasOwn(O, HIDDEN))
                  nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));
                O[HIDDEN][key] = true;
              } else {
                if (hasOwn(O, HIDDEN) && O[HIDDEN][key])
                  O[HIDDEN][key] = false;
                Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });
              }
              return setSymbolDescriptor(O, key, Attributes);
            }
            return nativeDefineProperty(O, key, Attributes);
          };
          var $defineProperties = function defineProperties(O, Properties) {
            anObject(O);
            var properties = toIndexedObject(Properties);
            var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));
            $forEach(keys, function(key) {
              if (!DESCRIPTORS || $propertyIsEnumerable.call(properties, key))
                $defineProperty(O, key, properties[key]);
            });
            return O;
          };
          var $create = function create(O, Properties) {
            return Properties === void 0 ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);
          };
          var $propertyIsEnumerable = function propertyIsEnumerable(V) {
            var P = toPropertyKey(V);
            var enumerable = nativePropertyIsEnumerable.call(this, P);
            if (this === ObjectPrototype && hasOwn(AllSymbols, P) && !hasOwn(ObjectPrototypeSymbols, P))
              return false;
            return enumerable || !hasOwn(this, P) || !hasOwn(AllSymbols, P) || hasOwn(this, HIDDEN) && this[HIDDEN][P] ? enumerable : true;
          };
          var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {
            var it = toIndexedObject(O);
            var key = toPropertyKey(P);
            if (it === ObjectPrototype && hasOwn(AllSymbols, key) && !hasOwn(ObjectPrototypeSymbols, key))
              return;
            var descriptor = nativeGetOwnPropertyDescriptor(it, key);
            if (descriptor && hasOwn(AllSymbols, key) && !(hasOwn(it, HIDDEN) && it[HIDDEN][key])) {
              descriptor.enumerable = true;
            }
            return descriptor;
          };
          var $getOwnPropertyNames = function getOwnPropertyNames(O) {
            var names = nativeGetOwnPropertyNames(toIndexedObject(O));
            var result = [];
            $forEach(names, function(key) {
              if (!hasOwn(AllSymbols, key) && !hasOwn(hiddenKeys, key))
                result.push(key);
            });
            return result;
          };
          var $getOwnPropertySymbols = function getOwnPropertySymbols(O) {
            var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;
            var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));
            var result = [];
            $forEach(names, function(key) {
              if (hasOwn(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || hasOwn(ObjectPrototype, key))) {
                result.push(AllSymbols[key]);
              }
            });
            return result;
          };
          if (!NATIVE_SYMBOL) {
            $Symbol = function Symbol2() {
              if (this instanceof $Symbol)
                throw TypeError("Symbol is not a constructor");
              var description = !arguments.length || arguments[0] === void 0 ? void 0 : $toString(arguments[0]);
              var tag = uid(description);
              var setter = function(value) {
                if (this === ObjectPrototype)
                  setter.call(ObjectPrototypeSymbols, value);
                if (hasOwn(this, HIDDEN) && hasOwn(this[HIDDEN], tag))
                  this[HIDDEN][tag] = false;
                setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));
              };
              if (DESCRIPTORS && USE_SETTER)
                setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });
              return wrap(tag, description);
            };
            redefine($Symbol[PROTOTYPE], "toString", function toString() {
              return getInternalState(this).tag;
            });
            redefine($Symbol, "withoutSetter", function(description) {
              return wrap(uid(description), description);
            });
            propertyIsEnumerableModule.f = $propertyIsEnumerable;
            definePropertyModule.f = $defineProperty;
            getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;
            getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;
            getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;
            wrappedWellKnownSymbolModule.f = function(name) {
              return wrap(wellKnownSymbol(name), name);
            };
            if (DESCRIPTORS) {
              nativeDefineProperty($Symbol[PROTOTYPE], "description", {
                configurable: true,
                get: function description() {
                  return getInternalState(this).description;
                }
              });
              if (!IS_PURE) {
                redefine(ObjectPrototype, "propertyIsEnumerable", $propertyIsEnumerable, { unsafe: true });
              }
            }
          }
          $({ global: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {
            Symbol: $Symbol
          });
          $forEach(objectKeys(WellKnownSymbolsStore), function(name) {
            defineWellKnownSymbol(name);
          });
          $({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {
            "for": function(key) {
              var string = $toString(key);
              if (hasOwn(StringToSymbolRegistry, string))
                return StringToSymbolRegistry[string];
              var symbol = $Symbol(string);
              StringToSymbolRegistry[string] = symbol;
              SymbolToStringRegistry[symbol] = string;
              return symbol;
            },
            keyFor: function keyFor(sym) {
              if (!isSymbol(sym))
                throw TypeError(sym + " is not a symbol");
              if (hasOwn(SymbolToStringRegistry, sym))
                return SymbolToStringRegistry[sym];
            },
            useSetter: function() {
              USE_SETTER = true;
            },
            useSimple: function() {
              USE_SETTER = false;
            }
          });
          $({ target: "Object", stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {
            create: $create,
            defineProperty: $defineProperty,
            defineProperties: $defineProperties,
            getOwnPropertyDescriptor: $getOwnPropertyDescriptor
          });
          $({ target: "Object", stat: true, forced: !NATIVE_SYMBOL }, {
            getOwnPropertyNames: $getOwnPropertyNames,
            getOwnPropertySymbols: $getOwnPropertySymbols
          });
          $({ target: "Object", stat: true, forced: fails(function() {
            getOwnPropertySymbolsModule.f(1);
          }) }, {
            getOwnPropertySymbols: function getOwnPropertySymbols(it) {
              return getOwnPropertySymbolsModule.f(toObject(it));
            }
          });
          if ($stringify) {
            var FORCED_JSON_STRINGIFY = !NATIVE_SYMBOL || fails(function() {
              var symbol = $Symbol();
              return $stringify([symbol]) != "[null]" || $stringify({ a: symbol }) != "{}" || $stringify(Object(symbol)) != "{}";
            });
            $({ target: "JSON", stat: true, forced: FORCED_JSON_STRINGIFY }, {
              stringify: function stringify(it, replacer, space) {
                var args = [it];
                var index = 1;
                var $replacer;
                while (arguments.length > index)
                  args.push(arguments[index++]);
                $replacer = replacer;
                if (!isObject(replacer) && it === void 0 || isSymbol(it))
                  return;
                if (!isArray(replacer))
                  replacer = function(key, value) {
                    if (isCallable($replacer))
                      value = $replacer.call(this, key, value);
                    if (!isSymbol(value))
                      return value;
                  };
                args[1] = replacer;
                return $stringify.apply(null, args);
              }
            });
          }
          if (!$Symbol[PROTOTYPE][TO_PRIMITIVE]) {
            var valueOf = $Symbol[PROTOTYPE].valueOf;
            redefine($Symbol[PROTOTYPE], TO_PRIMITIVE, function() {
              return valueOf.apply(this, arguments);
            });
          }
          setToStringTag($Symbol, SYMBOL);
          hiddenKeys[HIDDEN] = true;
        },
        1250: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("matchAll");
        },
        9017: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("match");
        },
        9786: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("replace");
        },
        503: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("search");
        },
        6565: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("species");
        },
        9322: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("split");
        },
        3610: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("toPrimitive");
        },
        6886: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("toStringTag");
        },
        3514: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("unscopables");
        },
        177: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("asyncDispose");
        },
        9031: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("dispose");
        },
        6658: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("matcher");
        },
        1875: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("metadata");
        },
        8658: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("observable");
        },
        4592: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("patternMatch");
        },
        6680: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var defineWellKnownSymbol = __webpack_require__2(1488);
          defineWellKnownSymbol("replaceAll");
        },
        162: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(8939);
          var DOMIterables = __webpack_require__2(7365);
          var global2 = __webpack_require__2(8576);
          var classof = __webpack_require__2(4696);
          var createNonEnumerableProperty = __webpack_require__2(8711);
          var Iterators = __webpack_require__2(7771);
          var wellKnownSymbol = __webpack_require__2(8182);
          var TO_STRING_TAG = wellKnownSymbol("toStringTag");
          for (var COLLECTION_NAME in DOMIterables) {
            var Collection = global2[COLLECTION_NAME];
            var CollectionPrototype = Collection && Collection.prototype;
            if (CollectionPrototype && classof(CollectionPrototype) !== TO_STRING_TAG) {
              createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);
            }
            Iterators[COLLECTION_NAME] = Iterators.Array;
          }
        },
        2906: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          var $ = __webpack_require__2(3085);
          var global2 = __webpack_require__2(8576);
          var isCallable = __webpack_require__2(6447);
          var userAgent = __webpack_require__2(8989);
          var slice = [].slice;
          var MSIE = /MSIE .\./.test(userAgent);
          var wrap = function(scheduler) {
            return function(handler, timeout) {
              var boundArgs = arguments.length > 2;
              var args = boundArgs ? slice.call(arguments, 2) : void 0;
              return scheduler(boundArgs ? function() {
                (isCallable(handler) ? handler : Function(handler)).apply(this, args);
              } : handler, timeout);
            };
          };
          $({ global: true, bind: true, forced: MSIE }, {
            setTimeout: wrap(global2.setTimeout),
            setInterval: wrap(global2.setInterval)
          });
        },
        9336: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(8939);
          var $ = __webpack_require__2(3085);
          var getBuiltIn = __webpack_require__2(150);
          var USE_NATIVE_URL = __webpack_require__2(4551);
          var redefine = __webpack_require__2(9482);
          var redefineAll = __webpack_require__2(533);
          var setToStringTag = __webpack_require__2(1284);
          var createIteratorConstructor = __webpack_require__2(5148);
          var InternalStateModule = __webpack_require__2(3326);
          var anInstance = __webpack_require__2(6961);
          var isCallable = __webpack_require__2(6447);
          var hasOwn = __webpack_require__2(4500);
          var bind = __webpack_require__2(8043);
          var classof = __webpack_require__2(4696);
          var anObject = __webpack_require__2(1138);
          var isObject = __webpack_require__2(5744);
          var $toString = __webpack_require__2(4845);
          var create = __webpack_require__2(2853);
          var createPropertyDescriptor = __webpack_require__2(774);
          var getIterator = __webpack_require__2(1669);
          var getIteratorMethod = __webpack_require__2(8703);
          var wellKnownSymbol = __webpack_require__2(8182);
          var nativeFetch = getBuiltIn("fetch");
          var NativeRequest = getBuiltIn("Request");
          var RequestPrototype = NativeRequest && NativeRequest.prototype;
          var Headers = getBuiltIn("Headers");
          var ITERATOR = wellKnownSymbol("iterator");
          var URL_SEARCH_PARAMS = "URLSearchParams";
          var URL_SEARCH_PARAMS_ITERATOR = URL_SEARCH_PARAMS + "Iterator";
          var setInternalState = InternalStateModule.set;
          var getInternalParamsState = InternalStateModule.getterFor(URL_SEARCH_PARAMS);
          var getInternalIteratorState = InternalStateModule.getterFor(URL_SEARCH_PARAMS_ITERATOR);
          var plus = /\+/g;
          var sequences = Array(4);
          var percentSequence = function(bytes) {
            return sequences[bytes - 1] || (sequences[bytes - 1] = RegExp("((?:%[\\da-f]{2}){" + bytes + "})", "gi"));
          };
          var percentDecode = function(sequence) {
            try {
              return decodeURIComponent(sequence);
            } catch (error) {
              return sequence;
            }
          };
          var deserialize = function(it) {
            var result = it.replace(plus, " ");
            var bytes = 4;
            try {
              return decodeURIComponent(result);
            } catch (error) {
              while (bytes) {
                result = result.replace(percentSequence(bytes--), percentDecode);
              }
              return result;
            }
          };
          var find = /[!'()~]|%20/g;
          var replace = {
            "!": "%21",
            "'": "%27",
            "(": "%28",
            ")": "%29",
            "~": "%7E",
            "%20": "+"
          };
          var replacer = function(match) {
            return replace[match];
          };
          var serialize = function(it) {
            return encodeURIComponent(it).replace(find, replacer);
          };
          var parseSearchParams = function(result, query) {
            if (query) {
              var attributes = query.split("&");
              var index = 0;
              var attribute, entry;
              while (index < attributes.length) {
                attribute = attributes[index++];
                if (attribute.length) {
                  entry = attribute.split("=");
                  result.push({
                    key: deserialize(entry.shift()),
                    value: deserialize(entry.join("="))
                  });
                }
              }
            }
          };
          var updateSearchParams = function(query) {
            this.entries.length = 0;
            parseSearchParams(this.entries, query);
          };
          var validateArgumentsLength = function(passed, required) {
            if (passed < required)
              throw TypeError("Not enough arguments");
          };
          var URLSearchParamsIterator = createIteratorConstructor(function Iterator(params, kind) {
            setInternalState(this, {
              type: URL_SEARCH_PARAMS_ITERATOR,
              iterator: getIterator(getInternalParamsState(params).entries),
              kind
            });
          }, "Iterator", function next() {
            var state = getInternalIteratorState(this);
            var kind = state.kind;
            var step = state.iterator.next();
            var entry = step.value;
            if (!step.done) {
              step.value = kind === "keys" ? entry.key : kind === "values" ? entry.value : [entry.key, entry.value];
            }
            return step;
          });
          var URLSearchParamsConstructor = function URLSearchParams2() {
            anInstance(this, URLSearchParamsConstructor, URL_SEARCH_PARAMS);
            var init = arguments.length > 0 ? arguments[0] : void 0;
            var that = this;
            var entries = [];
            var iteratorMethod, iterator, next, step, entryIterator, entryNext, first, second, key;
            setInternalState(that, {
              type: URL_SEARCH_PARAMS,
              entries,
              updateURL: function() {
              },
              updateSearchParams
            });
            if (init !== void 0) {
              if (isObject(init)) {
                iteratorMethod = getIteratorMethod(init);
                if (iteratorMethod) {
                  iterator = getIterator(init, iteratorMethod);
                  next = iterator.next;
                  while (!(step = next.call(iterator)).done) {
                    entryIterator = getIterator(anObject(step.value));
                    entryNext = entryIterator.next;
                    if ((first = entryNext.call(entryIterator)).done || (second = entryNext.call(entryIterator)).done || !entryNext.call(entryIterator).done)
                      throw TypeError("Expected sequence with length 2");
                    entries.push({ key: $toString(first.value), value: $toString(second.value) });
                  }
                } else
                  for (key in init)
                    if (hasOwn(init, key))
                      entries.push({ key, value: $toString(init[key]) });
              } else {
                parseSearchParams(entries, typeof init === "string" ? init.charAt(0) === "?" ? init.slice(1) : init : $toString(init));
              }
            }
          };
          var URLSearchParamsPrototype = URLSearchParamsConstructor.prototype;
          redefineAll(URLSearchParamsPrototype, {
            append: function append(name, value) {
              validateArgumentsLength(arguments.length, 2);
              var state = getInternalParamsState(this);
              state.entries.push({ key: $toString(name), value: $toString(value) });
              state.updateURL();
            },
            "delete": function(name) {
              validateArgumentsLength(arguments.length, 1);
              var state = getInternalParamsState(this);
              var entries = state.entries;
              var key = $toString(name);
              var index = 0;
              while (index < entries.length) {
                if (entries[index].key === key)
                  entries.splice(index, 1);
                else
                  index++;
              }
              state.updateURL();
            },
            get: function get(name) {
              validateArgumentsLength(arguments.length, 1);
              var entries = getInternalParamsState(this).entries;
              var key = $toString(name);
              var index = 0;
              for (; index < entries.length; index++) {
                if (entries[index].key === key)
                  return entries[index].value;
              }
              return null;
            },
            getAll: function getAll(name) {
              validateArgumentsLength(arguments.length, 1);
              var entries = getInternalParamsState(this).entries;
              var key = $toString(name);
              var result = [];
              var index = 0;
              for (; index < entries.length; index++) {
                if (entries[index].key === key)
                  result.push(entries[index].value);
              }
              return result;
            },
            has: function has(name) {
              validateArgumentsLength(arguments.length, 1);
              var entries = getInternalParamsState(this).entries;
              var key = $toString(name);
              var index = 0;
              while (index < entries.length) {
                if (entries[index++].key === key)
                  return true;
              }
              return false;
            },
            set: function set(name, value) {
              validateArgumentsLength(arguments.length, 1);
              var state = getInternalParamsState(this);
              var entries = state.entries;
              var found = false;
              var key = $toString(name);
              var val = $toString(value);
              var index = 0;
              var entry;
              for (; index < entries.length; index++) {
                entry = entries[index];
                if (entry.key === key) {
                  if (found)
                    entries.splice(index--, 1);
                  else {
                    found = true;
                    entry.value = val;
                  }
                }
              }
              if (!found)
                entries.push({ key, value: val });
              state.updateURL();
            },
            sort: function sort() {
              var state = getInternalParamsState(this);
              var entries = state.entries;
              var slice = entries.slice();
              var entry, entriesIndex, sliceIndex;
              entries.length = 0;
              for (sliceIndex = 0; sliceIndex < slice.length; sliceIndex++) {
                entry = slice[sliceIndex];
                for (entriesIndex = 0; entriesIndex < sliceIndex; entriesIndex++) {
                  if (entries[entriesIndex].key > entry.key) {
                    entries.splice(entriesIndex, 0, entry);
                    break;
                  }
                }
                if (entriesIndex === sliceIndex)
                  entries.push(entry);
              }
              state.updateURL();
            },
            forEach: function forEach(callback) {
              var entries = getInternalParamsState(this).entries;
              var boundFunction = bind(callback, arguments.length > 1 ? arguments[1] : void 0, 3);
              var index = 0;
              var entry;
              while (index < entries.length) {
                entry = entries[index++];
                boundFunction(entry.value, entry.key, this);
              }
            },
            keys: function keys() {
              return new URLSearchParamsIterator(this, "keys");
            },
            values: function values() {
              return new URLSearchParamsIterator(this, "values");
            },
            entries: function entries() {
              return new URLSearchParamsIterator(this, "entries");
            }
          }, { enumerable: true });
          redefine(URLSearchParamsPrototype, ITERATOR, URLSearchParamsPrototype.entries, { name: "entries" });
          redefine(URLSearchParamsPrototype, "toString", function toString() {
            var entries = getInternalParamsState(this).entries;
            var result = [];
            var index = 0;
            var entry;
            while (index < entries.length) {
              entry = entries[index++];
              result.push(serialize(entry.key) + "=" + serialize(entry.value));
            }
            return result.join("&");
          }, { enumerable: true });
          setToStringTag(URLSearchParamsConstructor, URL_SEARCH_PARAMS);
          $({ global: true, forced: !USE_NATIVE_URL }, {
            URLSearchParams: URLSearchParamsConstructor
          });
          if (!USE_NATIVE_URL && isCallable(Headers)) {
            var wrapRequestOptions = function(init) {
              if (isObject(init)) {
                var body = init.body;
                var headers;
                if (classof(body) === URL_SEARCH_PARAMS) {
                  headers = init.headers ? new Headers(init.headers) : new Headers();
                  if (!headers.has("content-type")) {
                    headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8");
                  }
                  return create(init, {
                    body: createPropertyDescriptor(0, String(body)),
                    headers: createPropertyDescriptor(0, headers)
                  });
                }
              }
              return init;
            };
            if (isCallable(nativeFetch)) {
              $({ global: true, enumerable: true, forced: true }, {
                fetch: function fetch(input) {
                  return nativeFetch(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});
                }
              });
            }
            if (isCallable(NativeRequest)) {
              var RequestConstructor = function Request(input) {
                anInstance(this, RequestConstructor, "Request");
                return new NativeRequest(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});
              };
              RequestPrototype.constructor = RequestConstructor;
              RequestConstructor.prototype = RequestPrototype;
              $({ global: true, forced: true }, {
                Request: RequestConstructor
              });
            }
          }
          module2.exports = {
            URLSearchParams: URLSearchParamsConstructor,
            getState: getInternalParamsState
          };
        },
        4948: function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(5454);
          var $ = __webpack_require__2(3085);
          var DESCRIPTORS = __webpack_require__2(69);
          var USE_NATIVE_URL = __webpack_require__2(4551);
          var global2 = __webpack_require__2(8576);
          var defineProperties = __webpack_require__2(1187);
          var redefine = __webpack_require__2(9482);
          var anInstance = __webpack_require__2(6961);
          var hasOwn = __webpack_require__2(4500);
          var assign = __webpack_require__2(2503);
          var arrayFrom = __webpack_require__2(841);
          var codeAt = __webpack_require__2(863).codeAt;
          var toASCII = __webpack_require__2(7977);
          var $toString = __webpack_require__2(4845);
          var setToStringTag = __webpack_require__2(1284);
          var URLSearchParamsModule = __webpack_require__2(9336);
          var InternalStateModule = __webpack_require__2(3326);
          var NativeURL = global2.URL;
          var URLSearchParams2 = URLSearchParamsModule.URLSearchParams;
          var getInternalSearchParamsState = URLSearchParamsModule.getState;
          var setInternalState = InternalStateModule.set;
          var getInternalURLState = InternalStateModule.getterFor("URL");
          var floor = Math.floor;
          var pow = Math.pow;
          var INVALID_AUTHORITY = "Invalid authority";
          var INVALID_SCHEME = "Invalid scheme";
          var INVALID_HOST = "Invalid host";
          var INVALID_PORT = "Invalid port";
          var ALPHA = /[A-Za-z]/;
          var ALPHANUMERIC = /[\d+-.A-Za-z]/;
          var DIGIT = /\d/;
          var HEX_START = /^0x/i;
          var OCT = /^[0-7]+$/;
          var DEC = /^\d+$/;
          var HEX = /^[\dA-Fa-f]+$/;
          var FORBIDDEN_HOST_CODE_POINT = /[\0\t\n\r #%/:<>?@[\\\]^|]/;
          var FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT = /[\0\t\n\r #/:<>?@[\\\]^|]/;
          var LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE = /^[\u0000-\u0020]+|[\u0000-\u0020]+$/g;
          var TAB_AND_NEW_LINE = /[\t\n\r]/g;
          var EOF;
          var parseHost = function(url, input) {
            var result, codePoints, index;
            if (input.charAt(0) == "[") {
              if (input.charAt(input.length - 1) != "]")
                return INVALID_HOST;
              result = parseIPv6(input.slice(1, -1));
              if (!result)
                return INVALID_HOST;
              url.host = result;
            } else if (!isSpecial(url)) {
              if (FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT.test(input))
                return INVALID_HOST;
              result = "";
              codePoints = arrayFrom(input);
              for (index = 0; index < codePoints.length; index++) {
                result += percentEncode(codePoints[index], C0ControlPercentEncodeSet);
              }
              url.host = result;
            } else {
              input = toASCII(input);
              if (FORBIDDEN_HOST_CODE_POINT.test(input))
                return INVALID_HOST;
              result = parseIPv4(input);
              if (result === null)
                return INVALID_HOST;
              url.host = result;
            }
          };
          var parseIPv4 = function(input) {
            var parts = input.split(".");
            var partsLength, numbers, index, part, radix, number, ipv4;
            if (parts.length && parts[parts.length - 1] == "") {
              parts.pop();
            }
            partsLength = parts.length;
            if (partsLength > 4)
              return input;
            numbers = [];
            for (index = 0; index < partsLength; index++) {
              part = parts[index];
              if (part == "")
                return input;
              radix = 10;
              if (part.length > 1 && part.charAt(0) == "0") {
                radix = HEX_START.test(part) ? 16 : 8;
                part = part.slice(radix == 8 ? 1 : 2);
              }
              if (part === "") {
                number = 0;
              } else {
                if (!(radix == 10 ? DEC : radix == 8 ? OCT : HEX).test(part))
                  return input;
                number = parseInt(part, radix);
              }
              numbers.push(number);
            }
            for (index = 0; index < partsLength; index++) {
              number = numbers[index];
              if (index == partsLength - 1) {
                if (number >= pow(256, 5 - partsLength))
                  return null;
              } else if (number > 255)
                return null;
            }
            ipv4 = numbers.pop();
            for (index = 0; index < numbers.length; index++) {
              ipv4 += numbers[index] * pow(256, 3 - index);
            }
            return ipv4;
          };
          var parseIPv6 = function(input) {
            var address = [0, 0, 0, 0, 0, 0, 0, 0];
            var pieceIndex = 0;
            var compress = null;
            var pointer = 0;
            var value, length, numbersSeen, ipv4Piece, number, swaps, swap;
            var chr = function() {
              return input.charAt(pointer);
            };
            if (chr() == ":") {
              if (input.charAt(1) != ":")
                return;
              pointer += 2;
              pieceIndex++;
              compress = pieceIndex;
            }
            while (chr()) {
              if (pieceIndex == 8)
                return;
              if (chr() == ":") {
                if (compress !== null)
                  return;
                pointer++;
                pieceIndex++;
                compress = pieceIndex;
                continue;
              }
              value = length = 0;
              while (length < 4 && HEX.test(chr())) {
                value = value * 16 + parseInt(chr(), 16);
                pointer++;
                length++;
              }
              if (chr() == ".") {
                if (length == 0)
                  return;
                pointer -= length;
                if (pieceIndex > 6)
                  return;
                numbersSeen = 0;
                while (chr()) {
                  ipv4Piece = null;
                  if (numbersSeen > 0) {
                    if (chr() == "." && numbersSeen < 4)
                      pointer++;
                    else
                      return;
                  }
                  if (!DIGIT.test(chr()))
                    return;
                  while (DIGIT.test(chr())) {
                    number = parseInt(chr(), 10);
                    if (ipv4Piece === null)
                      ipv4Piece = number;
                    else if (ipv4Piece == 0)
                      return;
                    else
                      ipv4Piece = ipv4Piece * 10 + number;
                    if (ipv4Piece > 255)
                      return;
                    pointer++;
                  }
                  address[pieceIndex] = address[pieceIndex] * 256 + ipv4Piece;
                  numbersSeen++;
                  if (numbersSeen == 2 || numbersSeen == 4)
                    pieceIndex++;
                }
                if (numbersSeen != 4)
                  return;
                break;
              } else if (chr() == ":") {
                pointer++;
                if (!chr())
                  return;
              } else if (chr())
                return;
              address[pieceIndex++] = value;
            }
            if (compress !== null) {
              swaps = pieceIndex - compress;
              pieceIndex = 7;
              while (pieceIndex != 0 && swaps > 0) {
                swap = address[pieceIndex];
                address[pieceIndex--] = address[compress + swaps - 1];
                address[compress + --swaps] = swap;
              }
            } else if (pieceIndex != 8)
              return;
            return address;
          };
          var findLongestZeroSequence = function(ipv6) {
            var maxIndex = null;
            var maxLength = 1;
            var currStart = null;
            var currLength = 0;
            var index = 0;
            for (; index < 8; index++) {
              if (ipv6[index] !== 0) {
                if (currLength > maxLength) {
                  maxIndex = currStart;
                  maxLength = currLength;
                }
                currStart = null;
                currLength = 0;
              } else {
                if (currStart === null)
                  currStart = index;
                ++currLength;
              }
            }
            if (currLength > maxLength) {
              maxIndex = currStart;
              maxLength = currLength;
            }
            return maxIndex;
          };
          var serializeHost = function(host) {
            var result, index, compress, ignore0;
            if (typeof host == "number") {
              result = [];
              for (index = 0; index < 4; index++) {
                result.unshift(host % 256);
                host = floor(host / 256);
              }
              return result.join(".");
            } else if (typeof host == "object") {
              result = "";
              compress = findLongestZeroSequence(host);
              for (index = 0; index < 8; index++) {
                if (ignore0 && host[index] === 0)
                  continue;
                if (ignore0)
                  ignore0 = false;
                if (compress === index) {
                  result += index ? ":" : "::";
                  ignore0 = true;
                } else {
                  result += host[index].toString(16);
                  if (index < 7)
                    result += ":";
                }
              }
              return "[" + result + "]";
            }
            return host;
          };
          var C0ControlPercentEncodeSet = {};
          var fragmentPercentEncodeSet = assign({}, C0ControlPercentEncodeSet, {
            " ": 1,
            '"': 1,
            "<": 1,
            ">": 1,
            "`": 1
          });
          var pathPercentEncodeSet = assign({}, fragmentPercentEncodeSet, {
            "#": 1,
            "?": 1,
            "{": 1,
            "}": 1
          });
          var userinfoPercentEncodeSet = assign({}, pathPercentEncodeSet, {
            "/": 1,
            ":": 1,
            ";": 1,
            "=": 1,
            "@": 1,
            "[": 1,
            "\\": 1,
            "]": 1,
            "^": 1,
            "|": 1
          });
          var percentEncode = function(chr, set) {
            var code = codeAt(chr, 0);
            return code > 32 && code < 127 && !hasOwn(set, chr) ? chr : encodeURIComponent(chr);
          };
          var specialSchemes = {
            ftp: 21,
            file: null,
            http: 80,
            https: 443,
            ws: 80,
            wss: 443
          };
          var isSpecial = function(url) {
            return hasOwn(specialSchemes, url.scheme);
          };
          var includesCredentials = function(url) {
            return url.username != "" || url.password != "";
          };
          var cannotHaveUsernamePasswordPort = function(url) {
            return !url.host || url.cannotBeABaseURL || url.scheme == "file";
          };
          var isWindowsDriveLetter = function(string, normalized) {
            var second;
            return string.length == 2 && ALPHA.test(string.charAt(0)) && ((second = string.charAt(1)) == ":" || !normalized && second == "|");
          };
          var startsWithWindowsDriveLetter = function(string) {
            var third;
            return string.length > 1 && isWindowsDriveLetter(string.slice(0, 2)) && (string.length == 2 || ((third = string.charAt(2)) === "/" || third === "\\" || third === "?" || third === "#"));
          };
          var shortenURLsPath = function(url) {
            var path = url.path;
            var pathSize = path.length;
            if (pathSize && (url.scheme != "file" || pathSize != 1 || !isWindowsDriveLetter(path[0], true))) {
              path.pop();
            }
          };
          var isSingleDot = function(segment) {
            return segment === "." || segment.toLowerCase() === "%2e";
          };
          var isDoubleDot = function(segment) {
            segment = segment.toLowerCase();
            return segment === ".." || segment === "%2e." || segment === ".%2e" || segment === "%2e%2e";
          };
          var SCHEME_START = {};
          var SCHEME = {};
          var NO_SCHEME = {};
          var SPECIAL_RELATIVE_OR_AUTHORITY = {};
          var PATH_OR_AUTHORITY = {};
          var RELATIVE = {};
          var RELATIVE_SLASH = {};
          var SPECIAL_AUTHORITY_SLASHES = {};
          var SPECIAL_AUTHORITY_IGNORE_SLASHES = {};
          var AUTHORITY = {};
          var HOST = {};
          var HOSTNAME = {};
          var PORT = {};
          var FILE = {};
          var FILE_SLASH = {};
          var FILE_HOST = {};
          var PATH_START = {};
          var PATH = {};
          var CANNOT_BE_A_BASE_URL_PATH = {};
          var QUERY = {};
          var FRAGMENT = {};
          var parseURL = function(url, input, stateOverride, base) {
            var state = stateOverride || SCHEME_START;
            var pointer = 0;
            var buffer = "";
            var seenAt = false;
            var seenBracket = false;
            var seenPasswordToken = false;
            var codePoints, chr, bufferCodePoints, failure;
            if (!stateOverride) {
              url.scheme = "";
              url.username = "";
              url.password = "";
              url.host = null;
              url.port = null;
              url.path = [];
              url.query = null;
              url.fragment = null;
              url.cannotBeABaseURL = false;
              input = input.replace(LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE, "");
            }
            input = input.replace(TAB_AND_NEW_LINE, "");
            codePoints = arrayFrom(input);
            while (pointer <= codePoints.length) {
              chr = codePoints[pointer];
              switch (state) {
                case SCHEME_START:
                  if (chr && ALPHA.test(chr)) {
                    buffer += chr.toLowerCase();
                    state = SCHEME;
                  } else if (!stateOverride) {
                    state = NO_SCHEME;
                    continue;
                  } else
                    return INVALID_SCHEME;
                  break;
                case SCHEME:
                  if (chr && (ALPHANUMERIC.test(chr) || chr == "+" || chr == "-" || chr == ".")) {
                    buffer += chr.toLowerCase();
                  } else if (chr == ":") {
                    if (stateOverride && (isSpecial(url) != hasOwn(specialSchemes, buffer) || buffer == "file" && (includesCredentials(url) || url.port !== null) || url.scheme == "file" && !url.host))
                      return;
                    url.scheme = buffer;
                    if (stateOverride) {
                      if (isSpecial(url) && specialSchemes[url.scheme] == url.port)
                        url.port = null;
                      return;
                    }
                    buffer = "";
                    if (url.scheme == "file") {
                      state = FILE;
                    } else if (isSpecial(url) && base && base.scheme == url.scheme) {
                      state = SPECIAL_RELATIVE_OR_AUTHORITY;
                    } else if (isSpecial(url)) {
                      state = SPECIAL_AUTHORITY_SLASHES;
                    } else if (codePoints[pointer + 1] == "/") {
                      state = PATH_OR_AUTHORITY;
                      pointer++;
                    } else {
                      url.cannotBeABaseURL = true;
                      url.path.push("");
                      state = CANNOT_BE_A_BASE_URL_PATH;
                    }
                  } else if (!stateOverride) {
                    buffer = "";
                    state = NO_SCHEME;
                    pointer = 0;
                    continue;
                  } else
                    return INVALID_SCHEME;
                  break;
                case NO_SCHEME:
                  if (!base || base.cannotBeABaseURL && chr != "#")
                    return INVALID_SCHEME;
                  if (base.cannotBeABaseURL && chr == "#") {
                    url.scheme = base.scheme;
                    url.path = base.path.slice();
                    url.query = base.query;
                    url.fragment = "";
                    url.cannotBeABaseURL = true;
                    state = FRAGMENT;
                    break;
                  }
                  state = base.scheme == "file" ? FILE : RELATIVE;
                  continue;
                case SPECIAL_RELATIVE_OR_AUTHORITY:
                  if (chr == "/" && codePoints[pointer + 1] == "/") {
                    state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
                    pointer++;
                  } else {
                    state = RELATIVE;
                    continue;
                  }
                  break;
                case PATH_OR_AUTHORITY:
                  if (chr == "/") {
                    state = AUTHORITY;
                    break;
                  } else {
                    state = PATH;
                    continue;
                  }
                case RELATIVE:
                  url.scheme = base.scheme;
                  if (chr == EOF) {
                    url.username = base.username;
                    url.password = base.password;
                    url.host = base.host;
                    url.port = base.port;
                    url.path = base.path.slice();
                    url.query = base.query;
                  } else if (chr == "/" || chr == "\\" && isSpecial(url)) {
                    state = RELATIVE_SLASH;
                  } else if (chr == "?") {
                    url.username = base.username;
                    url.password = base.password;
                    url.host = base.host;
                    url.port = base.port;
                    url.path = base.path.slice();
                    url.query = "";
                    state = QUERY;
                  } else if (chr == "#") {
                    url.username = base.username;
                    url.password = base.password;
                    url.host = base.host;
                    url.port = base.port;
                    url.path = base.path.slice();
                    url.query = base.query;
                    url.fragment = "";
                    state = FRAGMENT;
                  } else {
                    url.username = base.username;
                    url.password = base.password;
                    url.host = base.host;
                    url.port = base.port;
                    url.path = base.path.slice();
                    url.path.pop();
                    state = PATH;
                    continue;
                  }
                  break;
                case RELATIVE_SLASH:
                  if (isSpecial(url) && (chr == "/" || chr == "\\")) {
                    state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
                  } else if (chr == "/") {
                    state = AUTHORITY;
                  } else {
                    url.username = base.username;
                    url.password = base.password;
                    url.host = base.host;
                    url.port = base.port;
                    state = PATH;
                    continue;
                  }
                  break;
                case SPECIAL_AUTHORITY_SLASHES:
                  state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
                  if (chr != "/" || buffer.charAt(pointer + 1) != "/")
                    continue;
                  pointer++;
                  break;
                case SPECIAL_AUTHORITY_IGNORE_SLASHES:
                  if (chr != "/" && chr != "\\") {
                    state = AUTHORITY;
                    continue;
                  }
                  break;
                case AUTHORITY:
                  if (chr == "@") {
                    if (seenAt)
                      buffer = "%40" + buffer;
                    seenAt = true;
                    bufferCodePoints = arrayFrom(buffer);
                    for (var i = 0; i < bufferCodePoints.length; i++) {
                      var codePoint = bufferCodePoints[i];
                      if (codePoint == ":" && !seenPasswordToken) {
                        seenPasswordToken = true;
                        continue;
                      }
                      var encodedCodePoints = percentEncode(codePoint, userinfoPercentEncodeSet);
                      if (seenPasswordToken)
                        url.password += encodedCodePoints;
                      else
                        url.username += encodedCodePoints;
                    }
                    buffer = "";
                  } else if (chr == EOF || chr == "/" || chr == "?" || chr == "#" || chr == "\\" && isSpecial(url)) {
                    if (seenAt && buffer == "")
                      return INVALID_AUTHORITY;
                    pointer -= arrayFrom(buffer).length + 1;
                    buffer = "";
                    state = HOST;
                  } else
                    buffer += chr;
                  break;
                case HOST:
                case HOSTNAME:
                  if (stateOverride && url.scheme == "file") {
                    state = FILE_HOST;
                    continue;
                  } else if (chr == ":" && !seenBracket) {
                    if (buffer == "")
                      return INVALID_HOST;
                    failure = parseHost(url, buffer);
                    if (failure)
                      return failure;
                    buffer = "";
                    state = PORT;
                    if (stateOverride == HOSTNAME)
                      return;
                  } else if (chr == EOF || chr == "/" || chr == "?" || chr == "#" || chr == "\\" && isSpecial(url)) {
                    if (isSpecial(url) && buffer == "")
                      return INVALID_HOST;
                    if (stateOverride && buffer == "" && (includesCredentials(url) || url.port !== null))
                      return;
                    failure = parseHost(url, buffer);
                    if (failure)
                      return failure;
                    buffer = "";
                    state = PATH_START;
                    if (stateOverride)
                      return;
                    continue;
                  } else {
                    if (chr == "[")
                      seenBracket = true;
                    else if (chr == "]")
                      seenBracket = false;
                    buffer += chr;
                  }
                  break;
                case PORT:
                  if (DIGIT.test(chr)) {
                    buffer += chr;
                  } else if (chr == EOF || chr == "/" || chr == "?" || chr == "#" || chr == "\\" && isSpecial(url) || stateOverride) {
                    if (buffer != "") {
                      var port = parseInt(buffer, 10);
                      if (port > 65535)
                        return INVALID_PORT;
                      url.port = isSpecial(url) && port === specialSchemes[url.scheme] ? null : port;
                      buffer = "";
                    }
                    if (stateOverride)
                      return;
                    state = PATH_START;
                    continue;
                  } else
                    return INVALID_PORT;
                  break;
                case FILE:
                  url.scheme = "file";
                  if (chr == "/" || chr == "\\")
                    state = FILE_SLASH;
                  else if (base && base.scheme == "file") {
                    if (chr == EOF) {
                      url.host = base.host;
                      url.path = base.path.slice();
                      url.query = base.query;
                    } else if (chr == "?") {
                      url.host = base.host;
                      url.path = base.path.slice();
                      url.query = "";
                      state = QUERY;
                    } else if (chr == "#") {
                      url.host = base.host;
                      url.path = base.path.slice();
                      url.query = base.query;
                      url.fragment = "";
                      state = FRAGMENT;
                    } else {
                      if (!startsWithWindowsDriveLetter(codePoints.slice(pointer).join(""))) {
                        url.host = base.host;
                        url.path = base.path.slice();
                        shortenURLsPath(url);
                      }
                      state = PATH;
                      continue;
                    }
                  } else {
                    state = PATH;
                    continue;
                  }
                  break;
                case FILE_SLASH:
                  if (chr == "/" || chr == "\\") {
                    state = FILE_HOST;
                    break;
                  }
                  if (base && base.scheme == "file" && !startsWithWindowsDriveLetter(codePoints.slice(pointer).join(""))) {
                    if (isWindowsDriveLetter(base.path[0], true))
                      url.path.push(base.path[0]);
                    else
                      url.host = base.host;
                  }
                  state = PATH;
                  continue;
                case FILE_HOST:
                  if (chr == EOF || chr == "/" || chr == "\\" || chr == "?" || chr == "#") {
                    if (!stateOverride && isWindowsDriveLetter(buffer)) {
                      state = PATH;
                    } else if (buffer == "") {
                      url.host = "";
                      if (stateOverride)
                        return;
                      state = PATH_START;
                    } else {
                      failure = parseHost(url, buffer);
                      if (failure)
                        return failure;
                      if (url.host == "localhost")
                        url.host = "";
                      if (stateOverride)
                        return;
                      buffer = "";
                      state = PATH_START;
                    }
                    continue;
                  } else
                    buffer += chr;
                  break;
                case PATH_START:
                  if (isSpecial(url)) {
                    state = PATH;
                    if (chr != "/" && chr != "\\")
                      continue;
                  } else if (!stateOverride && chr == "?") {
                    url.query = "";
                    state = QUERY;
                  } else if (!stateOverride && chr == "#") {
                    url.fragment = "";
                    state = FRAGMENT;
                  } else if (chr != EOF) {
                    state = PATH;
                    if (chr != "/")
                      continue;
                  }
                  break;
                case PATH:
                  if (chr == EOF || chr == "/" || chr == "\\" && isSpecial(url) || !stateOverride && (chr == "?" || chr == "#")) {
                    if (isDoubleDot(buffer)) {
                      shortenURLsPath(url);
                      if (chr != "/" && !(chr == "\\" && isSpecial(url))) {
                        url.path.push("");
                      }
                    } else if (isSingleDot(buffer)) {
                      if (chr != "/" && !(chr == "\\" && isSpecial(url))) {
                        url.path.push("");
                      }
                    } else {
                      if (url.scheme == "file" && !url.path.length && isWindowsDriveLetter(buffer)) {
                        if (url.host)
                          url.host = "";
                        buffer = buffer.charAt(0) + ":";
                      }
                      url.path.push(buffer);
                    }
                    buffer = "";
                    if (url.scheme == "file" && (chr == EOF || chr == "?" || chr == "#")) {
                      while (url.path.length > 1 && url.path[0] === "") {
                        url.path.shift();
                      }
                    }
                    if (chr == "?") {
                      url.query = "";
                      state = QUERY;
                    } else if (chr == "#") {
                      url.fragment = "";
                      state = FRAGMENT;
                    }
                  } else {
                    buffer += percentEncode(chr, pathPercentEncodeSet);
                  }
                  break;
                case CANNOT_BE_A_BASE_URL_PATH:
                  if (chr == "?") {
                    url.query = "";
                    state = QUERY;
                  } else if (chr == "#") {
                    url.fragment = "";
                    state = FRAGMENT;
                  } else if (chr != EOF) {
                    url.path[0] += percentEncode(chr, C0ControlPercentEncodeSet);
                  }
                  break;
                case QUERY:
                  if (!stateOverride && chr == "#") {
                    url.fragment = "";
                    state = FRAGMENT;
                  } else if (chr != EOF) {
                    if (chr == "'" && isSpecial(url))
                      url.query += "%27";
                    else if (chr == "#")
                      url.query += "%23";
                    else
                      url.query += percentEncode(chr, C0ControlPercentEncodeSet);
                  }
                  break;
                case FRAGMENT:
                  if (chr != EOF)
                    url.fragment += percentEncode(chr, fragmentPercentEncodeSet);
                  break;
              }
              pointer++;
            }
          };
          var URLConstructor = function URL2(url) {
            var that = anInstance(this, URLConstructor, "URL");
            var base = arguments.length > 1 ? arguments[1] : void 0;
            var urlString = $toString(url);
            var state = setInternalState(that, { type: "URL" });
            var baseState, failure;
            if (base !== void 0) {
              if (base instanceof URLConstructor)
                baseState = getInternalURLState(base);
              else {
                failure = parseURL(baseState = {}, $toString(base));
                if (failure)
                  throw TypeError(failure);
              }
            }
            failure = parseURL(state, urlString, null, baseState);
            if (failure)
              throw TypeError(failure);
            var searchParams = state.searchParams = new URLSearchParams2();
            var searchParamsState = getInternalSearchParamsState(searchParams);
            searchParamsState.updateSearchParams(state.query);
            searchParamsState.updateURL = function() {
              state.query = String(searchParams) || null;
            };
            if (!DESCRIPTORS) {
              that.href = serializeURL.call(that);
              that.origin = getOrigin.call(that);
              that.protocol = getProtocol.call(that);
              that.username = getUsername.call(that);
              that.password = getPassword.call(that);
              that.host = getHost.call(that);
              that.hostname = getHostname.call(that);
              that.port = getPort.call(that);
              that.pathname = getPathname.call(that);
              that.search = getSearch.call(that);
              that.searchParams = getSearchParams.call(that);
              that.hash = getHash.call(that);
            }
          };
          var URLPrototype = URLConstructor.prototype;
          var serializeURL = function() {
            var url = getInternalURLState(this);
            var scheme = url.scheme;
            var username = url.username;
            var password = url.password;
            var host = url.host;
            var port = url.port;
            var path = url.path;
            var query = url.query;
            var fragment = url.fragment;
            var output = scheme + ":";
            if (host !== null) {
              output += "//";
              if (includesCredentials(url)) {
                output += username + (password ? ":" + password : "") + "@";
              }
              output += serializeHost(host);
              if (port !== null)
                output += ":" + port;
            } else if (scheme == "file")
              output += "//";
            output += url.cannotBeABaseURL ? path[0] : path.length ? "/" + path.join("/") : "";
            if (query !== null)
              output += "?" + query;
            if (fragment !== null)
              output += "#" + fragment;
            return output;
          };
          var getOrigin = function() {
            var url = getInternalURLState(this);
            var scheme = url.scheme;
            var port = url.port;
            if (scheme == "blob")
              try {
                return new URLConstructor(scheme.path[0]).origin;
              } catch (error) {
                return "null";
              }
            if (scheme == "file" || !isSpecial(url))
              return "null";
            return scheme + "://" + serializeHost(url.host) + (port !== null ? ":" + port : "");
          };
          var getProtocol = function() {
            return getInternalURLState(this).scheme + ":";
          };
          var getUsername = function() {
            return getInternalURLState(this).username;
          };
          var getPassword = function() {
            return getInternalURLState(this).password;
          };
          var getHost = function() {
            var url = getInternalURLState(this);
            var host = url.host;
            var port = url.port;
            return host === null ? "" : port === null ? serializeHost(host) : serializeHost(host) + ":" + port;
          };
          var getHostname = function() {
            var host = getInternalURLState(this).host;
            return host === null ? "" : serializeHost(host);
          };
          var getPort = function() {
            var port = getInternalURLState(this).port;
            return port === null ? "" : String(port);
          };
          var getPathname = function() {
            var url = getInternalURLState(this);
            var path = url.path;
            return url.cannotBeABaseURL ? path[0] : path.length ? "/" + path.join("/") : "";
          };
          var getSearch = function() {
            var query = getInternalURLState(this).query;
            return query ? "?" + query : "";
          };
          var getSearchParams = function() {
            return getInternalURLState(this).searchParams;
          };
          var getHash = function() {
            var fragment = getInternalURLState(this).fragment;
            return fragment ? "#" + fragment : "";
          };
          var accessorDescriptor = function(getter, setter) {
            return { get: getter, set: setter, configurable: true, enumerable: true };
          };
          if (DESCRIPTORS) {
            defineProperties(URLPrototype, {
              href: accessorDescriptor(serializeURL, function(href) {
                var url = getInternalURLState(this);
                var urlString = $toString(href);
                var failure = parseURL(url, urlString);
                if (failure)
                  throw TypeError(failure);
                getInternalSearchParamsState(url.searchParams).updateSearchParams(url.query);
              }),
              origin: accessorDescriptor(getOrigin),
              protocol: accessorDescriptor(getProtocol, function(protocol) {
                var url = getInternalURLState(this);
                parseURL(url, $toString(protocol) + ":", SCHEME_START);
              }),
              username: accessorDescriptor(getUsername, function(username) {
                var url = getInternalURLState(this);
                var codePoints = arrayFrom($toString(username));
                if (cannotHaveUsernamePasswordPort(url))
                  return;
                url.username = "";
                for (var i = 0; i < codePoints.length; i++) {
                  url.username += percentEncode(codePoints[i], userinfoPercentEncodeSet);
                }
              }),
              password: accessorDescriptor(getPassword, function(password) {
                var url = getInternalURLState(this);
                var codePoints = arrayFrom($toString(password));
                if (cannotHaveUsernamePasswordPort(url))
                  return;
                url.password = "";
                for (var i = 0; i < codePoints.length; i++) {
                  url.password += percentEncode(codePoints[i], userinfoPercentEncodeSet);
                }
              }),
              host: accessorDescriptor(getHost, function(host) {
                var url = getInternalURLState(this);
                if (url.cannotBeABaseURL)
                  return;
                parseURL(url, $toString(host), HOST);
              }),
              hostname: accessorDescriptor(getHostname, function(hostname) {
                var url = getInternalURLState(this);
                if (url.cannotBeABaseURL)
                  return;
                parseURL(url, $toString(hostname), HOSTNAME);
              }),
              port: accessorDescriptor(getPort, function(port) {
                var url = getInternalURLState(this);
                if (cannotHaveUsernamePasswordPort(url))
                  return;
                port = $toString(port);
                if (port == "")
                  url.port = null;
                else
                  parseURL(url, port, PORT);
              }),
              pathname: accessorDescriptor(getPathname, function(pathname) {
                var url = getInternalURLState(this);
                if (url.cannotBeABaseURL)
                  return;
                url.path = [];
                parseURL(url, $toString(pathname), PATH_START);
              }),
              search: accessorDescriptor(getSearch, function(search) {
                var url = getInternalURLState(this);
                search = $toString(search);
                if (search == "") {
                  url.query = null;
                } else {
                  if (search.charAt(0) == "?")
                    search = search.slice(1);
                  url.query = "";
                  parseURL(url, search, QUERY);
                }
                getInternalSearchParamsState(url.searchParams).updateSearchParams(url.query);
              }),
              searchParams: accessorDescriptor(getSearchParams),
              hash: accessorDescriptor(getHash, function(hash) {
                var url = getInternalURLState(this);
                hash = $toString(hash);
                if (hash == "") {
                  url.fragment = null;
                  return;
                }
                if (hash.charAt(0) == "#")
                  hash = hash.slice(1);
                url.fragment = "";
                parseURL(url, hash, FRAGMENT);
              })
            });
          }
          redefine(URLPrototype, "toJSON", function toJSON() {
            return serializeURL.call(this);
          }, { enumerable: true });
          redefine(URLPrototype, "toString", function toString() {
            return serializeURL.call(this);
          }, { enumerable: true });
          if (NativeURL) {
            var nativeCreateObjectURL = NativeURL.createObjectURL;
            var nativeRevokeObjectURL = NativeURL.revokeObjectURL;
            if (nativeCreateObjectURL)
              redefine(URLConstructor, "createObjectURL", function createObjectURL(blob) {
                return nativeCreateObjectURL.apply(NativeURL, arguments);
              });
            if (nativeRevokeObjectURL)
              redefine(URLConstructor, "revokeObjectURL", function revokeObjectURL(url) {
                return nativeRevokeObjectURL.apply(NativeURL, arguments);
              });
          }
          setToStringTag(URLConstructor, "URL");
          $({ global: true, forced: !USE_NATIVE_URL, sham: !DESCRIPTORS }, {
            URL: URLConstructor
          });
        },
        9801: function() {
        },
        3822: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(2221);
          module2.exports = parent;
        },
        1434: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(5078);
          module2.exports = parent;
        },
        6899: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(98);
          module2.exports = parent;
        },
        7710: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(5739);
          __webpack_require__2(162);
          module2.exports = parent;
        },
        4486: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(278);
          module2.exports = parent;
        },
        4877: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(1484);
          module2.exports = parent;
        },
        7178: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(7731);
          module2.exports = parent;
        },
        5603: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(3669);
          module2.exports = parent;
        },
        1206: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(162);
          var forEach = __webpack_require__2(6899);
          var classof = __webpack_require__2(4696);
          var ArrayPrototype = Array.prototype;
          var DOMIterables = {
            DOMTokenList: true,
            NodeList: true
          };
          module2.exports = function(it) {
            var own = it.forEach;
            return it === ArrayPrototype || it instanceof Array && own === ArrayPrototype.forEach || DOMIterables.hasOwnProperty(classof(it)) ? forEach : own;
          };
        },
        6174: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(2604);
          module2.exports = parent;
        },
        57: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(263);
          module2.exports = parent;
        },
        4741: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(7663);
          module2.exports = parent;
        },
        8368: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(5063);
          module2.exports = parent;
        },
        3739: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(6813);
          module2.exports = parent;
        },
        172: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(6285);
          module2.exports = parent;
        },
        4963: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(3213);
          module2.exports = parent;
        },
        7820: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(3512);
          module2.exports = parent;
        },
        8980: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(8168);
          module2.exports = parent;
        },
        5636: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(8651);
          module2.exports = parent;
        },
        6672: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(3083);
          module2.exports = parent;
        },
        5059: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(2987);
          module2.exports = parent;
        },
        3969: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(2239);
          module2.exports = parent;
        },
        6618: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(3154);
          __webpack_require__2(162);
          module2.exports = parent;
        },
        5279: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(6577);
          module2.exports = parent;
        },
        9562: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(2906);
          var path = __webpack_require__2(7545);
          module2.exports = path.setTimeout;
        },
        2285: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(5008);
          __webpack_require__2(162);
          module2.exports = parent;
        },
        8535: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(994);
          __webpack_require__2(162);
          module2.exports = parent;
        },
        652: function(module2, __unused_webpack_exports, __webpack_require__2) {
          var parent = __webpack_require__2(5668);
          module2.exports = parent;
        },
        5668: function(module2, __unused_webpack_exports, __webpack_require__2) {
          __webpack_require__2(4948);
          __webpack_require__2(9801);
          __webpack_require__2(9336);
          var path = __webpack_require__2(7545);
          module2.exports = path.URL;
        },
        2534: function(module2) {
          module2.exports = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyBkaXNwbGF5PSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGRlZnMgaWQ9InR1aS1pbWFnZS1lZGl0b3Itc3ZnLWRlZmF1bHQtaWNvbnMiPgo8c3ltYm9sIGlkPSJpYy1hcHBseSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNNCAxMi4wMTFsNSA1TDIwLjAxMSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1jYW5jZWwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTYgNmwxMiAxMk0xOCA2TDYgMTgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIC8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik00IDBoMXYyMGExIDEgMCAwIDEtMS0xVjB6TTIwIDE3aC0xVjVoMXYxMnptMCAydjVoLTF2LTVoMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMTloMTl2MUg1ek00Ljc2MiA0djFIMFY0aDQuNzYyek03IDRoMTJhMSAxIDAgMCAxIDEgMUg3VjR6Ii8+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1yZXNpemUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIi8+CiAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNIDE4Ljk4ODI4MSAzLjAxMTcxOSBDIDE4LjgwMDc4MSAyLjgyNDIxOSAxOC41IDIuODI0MjE5IDE4LjMxMjUgMy4wMTE3MTkgTCAxMS42MjEwOTQgOS43MDcwMzEgQyAxMS40Mjk2ODggOS44OTQ1MzEgMTEuNDI5Njg4IDEwLjE5NTMxMiAxMS42MjEwOTQgMTAuMzc4OTA2IEMgMTEuNzEwOTM4IDEwLjQ3MjY1NiAxMS44MzU5MzggMTAuNTE5NTMxIDExLjk1NzAzMSAxMC41MTk1MzEgQyAxMi4wNzgxMjUgMTAuNTE5NTMxIDEyLjIwMzEyNSAxMC40NzI2NTYgMTIuMjkyOTY5IDEwLjM3ODkwNiBMIDE4Ljk4ODI4MSAzLjY4NzUgQyAxOS4xNzU3ODEgMy41IDE5LjE3NTc4MSAzLjE5OTIxOSAxOC45ODgyODEgMy4wMTE3MTkgWiBNIDE4Ljk4ODI4MSAzLjAxMTcxOSAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEMgMTguMzg2NzE5IDIuODY3MTg4IDE4LjE3MTg3NSAzLjA4MjAzMSAxOC4xNzE4NzUgMy4zNDc2NTYgTCAxOC4xNzE4NzUgOS4wODU5MzggQyAxOC4xNzE4NzUgOS4zNDc2NTYgMTguMzg2NzE5IDkuNTYyNSAxOC42NTIzNDQgOS41NjI1IEMgMTguOTE3OTY5IDkuNTYyNSAxOS4xMzI4MTIgOS4zNDc2NTYgMTkuMTMyODEyIDkuMDg1OTM4IEwgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEwgMTIuOTE0MDYyIDIuODY3MTg4IEMgMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjQzNzUgMy4wODIwMzEgMTIuNDM3NSAzLjM0NzY1NiBDIDEyLjQzNzUgMy42MTMyODEgMTIuNjUyMzQ0IDMuODI4MTI1IDEyLjkxNDA2MiAzLjgyODEyNSBMIDE4LjY1MjM0NCAzLjgyODEyNSBDIDE4LjkxNzk2OSAzLjgyODEyNSAxOS4xMzI4MTIgMy42MTMyODEgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTAuMzc4OTA2IDExLjYyMTA5NCBDIDEwLjE5NTMxMiAxMS40MzM1OTQgOS44OTA2MjUgMTEuNDMzNTk0IDkuNzAzMTI1IDExLjYyMTA5NCBMIDMuMDA3ODEyIDE4LjMxNjQwNiBDIDIuODIwMzEyIDE4LjUgMi44MjAzMTIgMTguODA0Njg4IDMuMDA3ODEyIDE4Ljk5MjE4OCBDIDMuMTA1NDY5IDE5LjA4NTkzOCAzLjIyNjU2MiAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy40Njg3NSAxOS4xMzI4MTIgMy41ODk4NDQgMTkuMDg1OTM4IDMuNjgzNTk0IDE4Ljk5MjE4OCBMIDEwLjM3ODkwNiAxMi4yOTY4NzUgQyAxMC41NjY0MDYgMTIuMTA5Mzc1IDEwLjU2NjQwNiAxMS44MDQ2ODggMTAuMzc4OTA2IDExLjYyMTA5NCBaIE0gMTAuMzc4OTA2IDExLjYyMTA5NCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMy4zNDc2NTYgMTIuNDM3NSBDIDMuMDgyMDMxIDEyLjQzNzUgMi44NjcxODggMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjkxNDA2MiBMIDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy42MTMyODEgMTkuMTMyODEyIDMuODI4MTI1IDE4LjkxNzk2OSAzLjgyODEyNSAxOC42NTIzNDQgTCAzLjgyODEyNSAxMi45MTQwNjIgQyAzLjgyODEyNSAxMi42NTIzNDQgMy42MTMyODEgMTIuNDM3NSAzLjM0NzY1NiAxMi40Mzc1IFogTSAzLjM0NzY1NiAxMi40Mzc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSA5LjA4NTkzOCAxOC4xNzE4NzUgTCAzLjM0NzY1NiAxOC4xNzE4NzUgQyAzLjA4MjAzMSAxOC4xNzE4NzUgMi44NjcxODggMTguMzg2NzE5IDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEwgOS4wODU5MzggMTkuMTMyODEyIEMgOS4zNDc2NTYgMTkuMTMyODEyIDkuNTYyNSAxOC45MTc5NjkgOS41NjI1IDE4LjY1MjM0NCBDIDkuNTYyNSAxOC4zODY3MTkgOS4zNDc2NTYgMTguMTcxODc1IDkuMDg1OTM4IDE4LjE3MTg3NSBaIE0gOS4wODU5MzggMTguMTcxODc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSAyMC41NjI1IDAgTCAxLjQzNzUgMCBDIDAuNjQ0NTMxIDAgMCAwLjY0NDUzMSAwIDEuNDM3NSBMIDAgMjAuNTYyNSBDIDAgMjEuMzU1NDY5IDAuNjQ0NTMxIDIyIDEuNDM3NSAyMiBMIDIwLjU2MjUgMjIgQyAyMS4zNTU0NjkgMjIgMjIgMjEuMzU1NDY5IDIyIDIwLjU2MjUgTCAyMiAxLjQzNzUgQyAyMiAwLjY0NDUzMSAyMS4zNTU0NjkgMCAyMC41NjI1IDAgWiBNIDIxLjA0Mjk2OSAyMC41NjI1IEMgMjEuMDQyOTY5IDIwLjgyODEyNSAyMC44MjgxMjUgMjEuMDQyOTY5IDIwLjU2MjUgMjEuMDQyOTY5IEwgMS40Mzc1IDIxLjA0Mjk2OSBDIDEuMTcxODc1IDIxLjA0Mjk2OSAwLjk1NzAzMSAyMC44MjgxMjUgMC45NTcwMzEgMjAuNTYyNSBMIDAuOTU3MDMxIDEuNDM3NSBDIDAuOTU3MDMxIDEuMTcxODc1IDEuMTcxODc1IDAuOTU3MDMxIDEuNDM3NSAwLjk1NzAzMSBMIDIwLjU2MjUgMC45NTcwMzEgQyAyMC44MjgxMjUgMC45NTcwMzEgMjEuMDQyOTY5IDEuMTcxODc1IDIxLjA0Mjk2OSAxLjQzNzUgWiBNIDIxLjA0Mjk2OSAyMC41NjI1ICIvPgo8L3N5bWJvbD4KPCEtLSAgLS0+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZS1hbGwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik01IDIzSDNhMSAxIDAgMCAxLTEtMVY2aDF2MTZoMnYxem0xNi0xMGgtMVY2aDF2N3pNOSAxM0g4di0zaDF2M3ptMyAwaC0xdi0zaDF2M3ptMyAwaC0xdi0zaDF2M3pNMTQuNzk0IDMuNzk0TDEzIDJoLTNMOC4yMDYgMy43OTRBLjk2My45NjMgMCAwIDEgOCAyLjVsLjcwMy0xLjA1NUExIDEgMCAwIDEgOS41MzUgMWgzLjkzYTEgMSAwIDAgMSAuODMyLjQ0NUwxNSAyLjVhLjk2NS45NjUgMCAwIDEtLjIwNiAxLjI5NHpNMTQuMTk3IDRIOC44MDNoNS4zOTR6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDNoMjN2MUgwek0xMS4yODYgMjFIOC43MTRMOCAyM0g3bDEtMi44VjIwaC4wNzFMOS41IDE2aDFsMS40MjkgNEgxMnYuMmwxIDIuOGgtMWwtLjcxNC0yem0tLjM1Ny0xTDEwIDE3LjQgOS4wNzEgMjBoMS44NTh6TTIwIDIyaDN2MWgtNHYtN2gxdjZ6bS01IDBoM3YxaC00di03aDF2NnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTMgNnYxNmgxN1Y2aDF2MTZhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNmgxek0xNC43OTQgMy43OTRMMTMgMmgtM0w4LjIwNiAzLjc5NEEuOTYzLjk2MyAwIDAgMSA4IDIuNWwuNzAzLTEuMDU1QTEgMSAwIDAgMSA5LjUzNSAxaDMuOTNhMSAxIDAgMCAxIC44MzIuNDQ1TDE1IDIuNWEuOTY1Ljk2NSAwIDAgMS0uMjA2IDEuMjk0ek0xNC4xOTcgNEg4LjgwM2g1LjM5NHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTAgM2gyM3YxSDB6TTggMTBoMXY2SDh2LTZ6bTMgMGgxdjZoLTF2LTZ6bTMgMGgxdjZoLTF2LTZ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1kcmF3LWZyZWUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMjAuOTI5QzIuNTk0IDEwLjk3NiA0LjMyMyA2IDcuNjg2IDZjNS44NzIgMCAyLjUyNCAxOSA3LjY5NyAxOXMxLjg5LTE0LjkyOSA2LjQxNC0xNC45MjkgMS4zNTcgMTAuODU4IDUuMTMgMTAuODU4YzEuODAyIDAgMi42NTctMi4yNjIgMi41NjYtNi43ODYiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRyYXctbGluZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIgMTUuNWgyOCIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZHJhdyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIuNSAyMS41SDVjLjI0NSAwIC40OC0uMDU4LjY5MS0uMTY4bC4xMjQtLjA2NS4xNC4wMWMuNDI5LjAyOC44NS0uMTI3IDEuMTYtLjQzN0wyMi41NSA1LjQwNWEuNS41IDAgMCAwIDAtLjcwN2wtMy4yNDYtMy4yNDVhLjUuNSAwIDAgMC0uNzA3IDBMMy4xNjIgMTYuODg4YTEuNDk1IDEuNDk1IDAgMCAwLS40MzcgMS4xNTVsLjAxLjE0LS4wNjUuMTIzYy0uMTExLjIxMi0uMTcuNDQ4LS4xNy42OTR2Mi41eiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTYuNDE0IDMuNzA3bDMuODkgMy44OS0uNzA4LjcwNi0zLjg4OS0zLjg4OXoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWZpbHRlciIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTEyIDd2MUgyVjdoMTB6bTYgMGg0djFoLTRWN3pNMTIgMTZ2MWgxMHYtMUgxMnptLTYgMEgydjFoNHYtMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTguNSAyMGEzLjUgMy41IDAgMSAxIDAtNyAzLjUgMy41IDAgMCAxIDAgN3ptMC0xYTIuNSAyLjUgMCAxIDAgMC01IDIuNSAyLjUgMCAwIDAgMCA1ek0xNS41IDExYTMuNSAzLjUgMCAxIDEgMC03IDMuNSAzLjUgMCAwIDEgMCA3em0wLTFhMi41IDIuNSAwIDEgMCAwLTUgMi41IDIuNSAwIDAgMCAwIDV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXJlc2V0IiB2aWV3Qm94PSIwIDAgMzEgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMzEgMEgwdjMyaDMxeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjggMTZhOCA4IDAgMCAxLTggOEgzdi0xaDF2LTdIM2E4IDggMCAwIDEgOC04aDE3djFoLTF2N2gxek0xMSA5YTcgNyAwIDAgMC03IDd2N2gxNmE3IDcgMCAwIDAgNy03VjlIMTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0yNCA1bDMuNSAzLjVMMjQgMTJNNyAyMGwtMy41IDMuNUw3IDI3Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXgiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGQ9Ik0zMiAzMkgwVjBoMzJ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNyAzMmgtMVYwaDF6TTI3LjE2NyAxMWwuNSAzaC0xLjAzbC0uNTQ2LTNoMS4wNzZ6bS0uNS0zaC0xLjEyMkwyNSA1aC01VjRoNS4xNTNhMSAxIDAgMCAxIC45ODYuODM2TDI2LjY2NyA4em0xLjUgOWwuNSAzaC0uOTRsLS41NDUtM2guOTg1em0xIDZsLjYzOSAzLjgzNkExIDEgMCAwIDEgMjguODE5IDI4SDI2di0xaDNsLS43MjYtNGguODk0ek0yMyAyOGgtM3YtMWgzdjF6TTEzIDR2MUg3TDMgMjdoMTB2MUgzLjE4YTEgMSAwIDAgMS0uOTg2LTEuMTY0bDMuNjY2LTIyQTEgMSAwIDAgMSA2Ljg0NyA0SDEzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZmxpcC15IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwdjMyaDMyVjB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDE2djFoMzJ2LTF6TTExIDI3LjE2N2wzIC41di0xLjAzbC0zLS41NDZ2MS4wNzZ6bS0zLS41di0xLjEyMkw1IDI1di01SDR2NS4xNTNhMSAxIDAgMCAwIC44MzYuOTg2TDggMjYuNjY3em05IDEuNWwzIC41di0uOTRsLTMtLjU0NXYuOTg1em02IDFsMy44MzYuNjM5QTEgMSAwIDAgMCAyOCAyOC44MlYyNmgtMXYzbC00LS43Mjd2Ljg5NHpNMjggMjN2LTNoLTF2M2gxek00IDEzaDFWN2wyMi00djEwaDFWMy4xOGExIDEgMCAwIDAtMS4xNjQtLjk4NmwtMjIgMy42NjdBMSAxIDAgMCAwIDQgNi44NDdWMTN6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgc3Ryb2tlPSJub25lIiBkPSJNMTEgMGgxdjI0aC0xek0xOSAyMXYtMWgydi0yaDF2MmExIDEgMCAwIDEtMSAxaC0yem0tMiAwaC0zdi0xaDN2MXptNS01aC0xdi0zaDF2M3ptMC01aC0xVjhoMXYzem0wLTVoLTFWNGgtMlYzaDJhMSAxIDAgMCAxIDEgMXYyem0tNS0zdjFoLTNWM2gzek05IDN2MUgydjE2aDd2MUgyYTEgMSAwIDAgMS0xLTFWNGExIDEgMCAwIDEgMS0xaDd6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwSDI0VjI0SDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzQwIC0xNikgdHJhbnNsYXRlKDU0NyA4KSB0cmFuc2xhdGUoMTkzIDgpIi8+CiAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBzdHJva2U9Im5vbmUiIGQ9Ik0xMi41IDFDMTguMjk5IDEgMjMgNS43MDEgMjMgMTEuNVMxOC4yOTkgMjIgMTIuNSAyMmMtNS4yOSAwLTkuNjY1LTMuOTExLTEwLjM5NC04Ljk5OWgxLjAxMkMzLjgzOCAxNy41MzQgNy43NjQgMjEgMTIuNSAyMWM1LjI0NyAwIDkuNS00LjI1MyA5LjUtOS41UzE3Ljc0NyAyIDEyLjUgMkM4LjQ5IDIgNS4wNiA0LjQ4NSAzLjY2NiA4SDNoNHYxSDJWNGgxdjMuMDIyQzQuNjggMy40NjIgOC4zMDMgMSAxMi41IDF6bS41IDVsLS4wMDEgNS4yOTEgMi41MzcgMi41MzctLjcwOC43MDhMMTIuMjkyIDEySDEyVjZoMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDAgLTE2KSB0cmFuc2xhdGUoNTQ3IDgpIHRyYW5zbGF0ZSgxOTMgOCkiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktY2hlY2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBzdHJva2U9IiM1NTU1NTUiIGQ9Ik00LjUgLTFMMS41IDIgNi41IDciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MCAtODA0KSB0cmFuc2xhdGUoNjAgODA0KSB0cmFuc2xhdGUoMiAzKSByb3RhdGUoLTkwIDQgMykiIC8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDBoMXYxMGMtLjU1MiAwLTEtLjQ0OC0xLTFWMHpNMTAgOXYzSDlWOWgxek05IDJoMXY2SDlWMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDlIMTJWMTBIMnpNOSAyYy41MTMgMCAuOTM2LjM4Ni45OTMuODgzTDEwIDNIM1YyaDZ6TTIgM0gwVjJoMnYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg0IC04MDQpIHRyYW5zbGF0ZSg4NCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJlc2l6ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjQ5MjE4OCAxLjUwNzgxMiBDIDkuMzk4NDM4IDEuNDE0MDYyIDkuMjUgMS40MTQwNjIgOS4xNTYyNSAxLjUwNzgxMiBMIDUuODEyNSA0Ljg1MTU2MiBDIDUuNzE0ODQ0IDQuOTQ1MzEyIDUuNzE0ODQ0IDUuMDk3NjU2IDUuODEyNSA1LjE4NzUgQyA1Ljg1NTQ2OSA1LjIzNDM3NSA1LjkxNzk2OSA1LjI1NzgxMiA1Ljk3NjU2MiA1LjI1NzgxMiBDIDYuMDM5MDYyIDUuMjU3ODEyIDYuMTAxNTYyIDUuMjM0Mzc1IDYuMTQ4NDM4IDUuMTg3NSBMIDkuNDkyMTg4IDEuODQzNzUgQyA5LjU4NTkzOCAxLjc1IDkuNTg1OTM4IDEuNjAxNTYyIDkuNDkyMTg4IDEuNTA3ODEyIFogTSA5LjQ5MjE4OCAxLjUwNzgxMiAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gOS4zMjgxMjUgMS40MzM1OTQgQyA5LjE5NTMxMiAxLjQzMzU5NCA5LjA4NTkzOCAxLjUzOTA2MiA5LjA4NTkzOCAxLjY3MTg3NSBMIDkuMDg1OTM4IDQuNTQyOTY5IEMgOS4wODU5MzggNC42NzE4NzUgOS4xOTUzMTIgNC43ODEyNSA5LjMyODEyNSA0Ljc4MTI1IEMgOS40NjA5MzggNC43ODEyNSA5LjU2NjQwNiA0LjY3MTg3NSA5LjU2NjQwNiA0LjU0Mjk2OSBMIDkuNTY2NDA2IDEuNjcxODc1IEMgOS41NjY0MDYgMS41MzkwNjIgOS40NjA5MzggMS40MzM1OTQgOS4zMjgxMjUgMS40MzM1OTQgWiBNIDkuMzI4MTI1IDEuNDMzNTk0ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjMyODEyNSAxLjQzMzU5NCBMIDYuNDU3MDMxIDEuNDMzNTk0IEMgNi4zMjgxMjUgMS40MzM1OTQgNi4yMTg3NSAxLjUzOTA2MiA2LjIxODc1IDEuNjcxODc1IEMgNi4yMTg3NSAxLjgwNDY4OCA2LjMyODEyNSAxLjkxNDA2MiA2LjQ1NzAzMSAxLjkxNDA2MiBMIDkuMzI4MTI1IDEuOTE0MDYyIEMgOS40NjA5MzggMS45MTQwNjIgOS41NjY0MDYgMS44MDQ2ODggOS41NjY0MDYgMS42NzE4NzUgQyA5LjU2NjQwNiAxLjUzOTA2MiA5LjQ2MDkzOCAxLjQzMzU5NCA5LjMyODEyNSAxLjQzMzU5NCBaIE0gOS4zMjgxMjUgMS40MzM1OTQgIi8+CiAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNIDUuMTg3NSA1LjgxMjUgQyA1LjA5NzY1NiA1LjcxODc1IDQuOTQ1MzEyIDUuNzE4NzUgNC44NTE1NjIgNS44MTI1IEwgMS41MDM5MDYgOS4xNTYyNSBDIDEuNDEwMTU2IDkuMjUgMS40MTAxNTYgOS40MDIzNDQgMS41MDM5MDYgOS40OTYwOTQgQyAxLjU1NDY4OCA5LjU0Mjk2OSAxLjYxMzI4MSA5LjU2NjQwNiAxLjY3MTg3NSA5LjU2NjQwNiBDIDEuNzM0Mzc1IDkuNTY2NDA2IDEuNzk2ODc1IDkuNTQyOTY5IDEuODQzNzUgOS40OTYwOTQgTCA1LjE4NzUgNi4xNDg0MzggQyA1LjI4MTI1IDYuMDU0Njg4IDUuMjgxMjUgNS45MDIzNDQgNS4xODc1IDUuODEyNSBaIE0gNS4xODc1IDUuODEyNSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gMS42NzE4NzUgNi4yMTg3NSBDIDEuNTM5MDYyIDYuMjE4NzUgMS40MzM1OTQgNi4zMjgxMjUgMS40MzM1OTQgNi40NTcwMzEgTCAxLjQzMzU5NCA5LjMyODEyNSBDIDEuNDMzNTk0IDkuNDYwOTM4IDEuNTM5MDYyIDkuNTY2NDA2IDEuNjcxODc1IDkuNTY2NDA2IEMgMS44MDQ2ODggOS41NjY0MDYgMS45MTQwNjIgOS40NjA5MzggMS45MTQwNjIgOS4zMjgxMjUgTCAxLjkxNDA2MiA2LjQ1NzAzMSBDIDEuOTE0MDYyIDYuMzI4MTI1IDEuODA0Njg4IDYuMjE4NzUgMS42NzE4NzUgNi4yMTg3NSBaIE0gMS42NzE4NzUgNi4yMTg3NSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gNC41NDI5NjkgOS4wODU5MzggTCAxLjY3MTg3NSA5LjA4NTkzOCBDIDEuNTM5MDYyIDkuMDg1OTM4IDEuNDMzNTk0IDkuMTk1MzEyIDEuNDMzNTk0IDkuMzI4MTI1IEMgMS40MzM1OTQgOS40NjA5MzggMS41MzkwNjIgOS41NjY0MDYgMS42NzE4NzUgOS41NjY0MDYgTCA0LjU0Mjk2OSA5LjU2NjQwNiBDIDQuNjcxODc1IDkuNTY2NDA2IDQuNzgxMjUgOS40NjA5MzggNC43ODEyNSA5LjMyODEyNSBDIDQuNzgxMjUgOS4xOTUzMTIgNC42NzE4NzUgOS4wODU5MzggNC41NDI5NjkgOS4wODU5MzggWiBNIDQuNTQyOTY5IDkuMDg1OTM4ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSAxMC4yODEyNSAwIEwgMC43MTg3NSAwIEMgMC4zMjAzMTIgMCAwIDAuMzIwMzEyIDAgMC43MTg3NSBMIDAgMTAuMjgxMjUgQyAwIDEwLjY3OTY4OCAwLjMyMDMxMiAxMSAwLjcxODc1IDExIEwgMTAuMjgxMjUgMTEgQyAxMC42Nzk2ODggMTEgMTEgMTAuNjc5Njg4IDExIDEwLjI4MTI1IEwgMTEgMC43MTg3NSBDIDExIDAuMzIwMzEyIDEwLjY3OTY4OCAwIDEwLjI4MTI1IDAgWiBNIDEwLjUyMzQzOCAxMC4yODEyNSBDIDEwLjUyMzQzOCAxMC40MTQwNjIgMTAuNDE0MDYyIDEwLjUyMzQzOCAxMC4yODEyNSAxMC41MjM0MzggTCAwLjcxODc1IDEwLjUyMzQzOCBDIDAuNTg1OTM4IDEwLjUyMzQzOCAwLjQ3NjU2MiAxMC40MTQwNjIgMC40NzY1NjIgMTAuMjgxMjUgTCAwLjQ3NjU2MiAwLjcxODc1IEMgMC40NzY1NjIgMC41ODU5MzggMC41ODU5MzggMC40NzY1NjIgMC43MTg3NSAwLjQ3NjU2MiBMIDEwLjI4MTI1IDAuNDc2NTYyIEMgMTAuNDE0MDYyIDAuNDc2NTYyIDEwLjUyMzQzOCAwLjU4NTkzOCAxMC41MjM0MzggMC43MTg3NSBaIE0gMTAuNTIzNDM4IDEwLjI4MTI1ICIvPgogIDwvZz4KPC9zeW1ib2w+CjwhLS0gIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWRyYXciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDFIMTJWMTNIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBkPSJNOS42MjIgMS41ODRsMS44MzUgMS42NTgtOC4zMSA4LjQwN0wuNSAxMi41VjExbDkuMTIyLTkuNDE2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE1NiAtODA0KSB0cmFuc2xhdGUoMTU2IDgwMykiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNNy42MjggMy43NTNMMTAuMzc4IDMuNzUzIDEwLjM3OCA0LjI1MyA3LjYyOCA0LjI1M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIHJvdGF0ZSg0NSA5LjAwMyA0LjAwMykiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZmlsdGVyIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xMiAzdjFIOVYzaDN6TTcgNEgwVjNoN3YxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI3NiAtODA0KSB0cmFuc2xhdGUoMjc2IDgwNCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMTIgOHYxSDlWOGgzek03IDlIMFY4aDd2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYgLTgwNCkgdHJhbnNsYXRlKDI3NiA4MDQpIG1hdHJpeCgtMSAwIDAgMSAxMiAwKSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik04IDFjMS4xMDUgMCAyIC44OTUgMiAycy0uODk1IDItMiAyLTItLjg5NS0yLTIgLjg5NS0yIDItMnptMCAxYy0uNTUyIDAtMSAuNDQ4LTEgMXMuNDQ4IDEgMSAxIDEtLjQ0OCAxLTEtLjQ0OC0xLTEtMXpNNCA3YzEuMTA1IDAgMiAuODk1IDIgMnMtLjg5NSAyLTIgMi0yLS44OTUtMi0yIC44OTUtMiAyLTJ6bTAgMWMtLjU1MiAwLTEgLjQ0OC0xIDFzLjQ0OCAxIDEgMSAxLS40NDggMS0xLS40NDgtMS0xLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA4IC04MDQpIHRyYW5zbGF0ZSgxMDggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik02IDBMNyAwIDcgMTIgNiAxMnpNMTEgMTBWOWgxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIMTB2LTFoMXpNNSAxdjFIMXY4aDR2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjV2LTljMC0uMjc2LjIyNC0uNS41LS41SDV6bTcgNXYyaC0xVjZoMXptMC0zdjJoLTFWM2gxek05IDF2MUg3VjFoMnptMi41IDBjLjI3NiAwIC41LjIyNC41LjVWMmgtMlYxaDEuNXpNOSAxMUg3di0xaDJ2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDggLTgwNCkgdHJhbnNsYXRlKDEwOCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS4xIiBkPSJNNiA5LjU2OEwyLjYwMSAxMSAyLjk3NSA3LjQ2NyAwLjUgNC44MiA0LjEzIDQuMDY4IDYgMSA3Ljg3IDQuMDY4IDExLjUgNC44MiA5LjAyNSA3LjQ2NyA5LjM5OSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LW1hc2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTIgLTgwNCkgdHJhbnNsYXRlKDI1MiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMEgxMlYxMkgweiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iMi41IiBzdHJva2U9IiM0NDQiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgMGMuMjc2IDAgLjUuMjI0LjUuNXYxMWMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41Vi41QzAgLjIyNC4yMjQgMCAuNSAwaDExek0xMSAxSDF2MTBoMTBWMXoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJyZm40cnlsZmZhIiBkPSJNNyAxMmMtLjMzNSAwLS42NjMtLjAyNS0uOTgzLS4wNzRDMy4xNzEgMTEuNDkyIDEgOS4yMDUgMSA2LjQ0NGMwLTEuMzYzLjUzNC0yLjYxMyAxLjQxNS0zLjU4Ii8+CiAgICAgICAgPG1hc2sgaWQ9IjZmOWduMmR5c2IiIHdpZHRoPSI2IiBoZWlnaHQ9IjkuMTM2IiB4PSIwIiB5PSIwIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcmZuNHJ5bGZmYSIgc3Ryb2tlPSI0MzQzNDMiLz4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzIgLTgwNCkgdHJhbnNsYXRlKDEzMiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMC41SDEyVjEyLjVIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTYuNSAxQzkuNTM4IDEgMTIgMy40NjIgMTIgNi41YzAgMi4zNy0xLjUgNC4zOS0zLjYgNS4xNjNsLS40MDctLjkxNkM5Ljc0NCAxMC4xMyAxMSA4LjQ2MiAxMSA2LjUgMTEgNC4wMTUgOC45ODUgMiA2LjUgMmMtLjc3NyAwLTEuNTA5LjE5Ny0yLjE0Ny41NDRMNCAxLjc1bC0uMjA1LS4wNEM0LjU5NCAxLjI1OCA1LjUxNyAxIDYuNSAxeiIvPgogICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzQzNDM0MyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAxLjI1IiBzdHJva2Utd2lkdGg9IjEiIG1hc2s9InVybCgjNmY5Z24yZHlzYikiIHhsaW5rOmhyZWY9IiNyZm40cnlsZmZhIi8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik00LjI3OSAwTDYgMS43NSA0LjI1IDMuNTcxIDMuNTQzIDIuODY0IDQuNTg2IDEuNzUgMy41NzIgMC43MDd6IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSA5LjU0MyAwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3Rvcnktc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY3YzAgLjI3Ni0uMjI0LjUtLjUuNWgtN2MtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC44aDFWMTFoNlY1SDguMzQxbC0uNTY4LTFIMTEuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00LjUgMC41TDguNSA3LjYxMSAwLjUgNy42MTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTgwIC04MDQpIHRyYW5zbGF0ZSgxODAgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDFoOGMuNTUyIDAgMSAuNDQ4IDEgMUgxYzAtLjU1Mi40NDgtMSAxLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xIDFIMlYzSDF6TTEwIDFIMTFWM0gxMHpNNS41IDFMNi41IDEgNi41IDExIDUuNSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjggLTgwNCkgdHJhbnNsYXRlKDIyOCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTQgMTBIOFYxMUg0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyOCAtODA0KSB0cmFuc2xhdGUoMjI4IDgwNCkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktbG9hZCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzI0IC04MDUpIHRyYW5zbGF0ZSgzMjQgODA1KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik01IDBjLjU1MiAwIDEgLjQ0OCAxIDF2MWg1LjVjLjI3NiAwIC41LjIyNC41LjV2OGMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41VjFjMC0uNTUyLjQ0OC0xIDEtMWg0em0wIDFIMXY5aDEwVjNINVYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMSAyTDUgMiA1IDMgMSAzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZGVsZXRlIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGw9IiM0MzQzNDMiPgogICAgICAgICAgICA8cGF0aCBkPSJNMiA5aDhWMWgxdjguNWMwIC4yNzYtLjIyNC41LS41LjVoLTljLS4yNzYgMC0uNS0uMjI0LS41LS41VjFoMXY4ek0wIDBIMTJWMUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgM0g1VjdINHpNNyAzSDhWN0g3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgMWg0VjBoMXYxLjVjMCAuMjc2LS4yMjQuNS0uNS41aC01Yy0uMjc2IDAtLjUtLjIyNC0uNS0uNVYwaDF2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDAgLTgwNCkgdHJhbnNsYXRlKDMwMCA4MDQpIG1hdHJpeCgxIDAgMCAtMSAwIDIpIi8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1ncm91cCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ4IC04MDQpIHRyYW5zbGF0ZSgzNDggODA0KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTEgOXYyaDF2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOWgxem0xMSAxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIOXYtMWgydi0xaDF6bS00IDF2MUg2di0xaDJ6bS0zIDB2MUgzdi0xaDJ6bTctNHYyaC0xVjdoMXpNMSA2djJIMFY2aDF6bTExLTJ2MmgtMVY0aDF6TTEgM3YySDBWM2gxem0xMC41LTNjLjI3NiAwIC41LjIyNC41LjVWM2gtMVYxaC0xVjBoMS41ek02IDB2MUg0VjBoMnptMyAwdjFIN1YwaDJ6TTAgLjVDMCAuMjI0LjIyNCAwIC41IDBIM3YxSDF2MUgwVi41ek05LjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY1YzAgLjI3Ni0uMjI0LjUtLjUuNWgtNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC4zNTVjLjMxNy4wOTQuNjUyLjE0NSAxIC4xNDVWOWg0VjVoLS41YzAtLjM0OC0uMDUtLjY4My0uMTQ1LTFIOS41eiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI1IiBjeT0iNSIgcj0iMi41IiBzdHJva2U9IiM0MzQzNDMiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWFycm93LTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIxLjc5MyAxOC41SDIuNXYtNWgxOC45MzVsLTcuNi04aDUuODcybDEwLjUgMTAuNS0xMC41IDEwLjVoLTUuOTE0bDgtOHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ctMyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMjUuMjg4IDE2LjQyTDE0LjIwOCAyNy41SDYuNzkybDExLjI5MS0xMS4yOTFMNi44MjYgNC41aDcuMzgxbDExLjY2MSAxMS42NjEtLjU4LjI1OHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMTEuNXY5aDE4djUuMjkzTDMwLjI5MyAxNiAyMC41IDYuMjA3VjExLjVoLTE4eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1idWJibGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIyLjIwNyAyNC41TDE2LjUgMzAuMjA3VjI0LjVIOEE2LjUgNi41IDAgMCAxIDEuNSAxOFY5QTYuNSA2LjUgMCAwIDEgOCAyLjVoMTZBNi41IDYuNSAwIDAgMSAzMC41IDl2OWE2LjUgNi41IDAgMCAxLTYuNSA2LjVoLTEuNzkzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1oZWFydCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTUuOTk2IDMwLjY3NWwxLjk4MS0xLjc5YzcuODk4LTcuMTc3IDEwLjM2NS05LjcxOCAxMi4xMzUtMTMuMDEyLjkyMi0xLjcxNiAxLjM3Ny0zLjM3IDEuMzc3LTUuMDc2IDAtNC42NS0zLjY0Ny04LjI5Ny04LjI5Ny04LjI5Ny0yLjMzIDAtNC44NiAxLjUyNy02LjgxNyAzLjgyNGwtLjM4LjQ0Ny0uMzgxLS40NDdDMTMuNjU4IDQuMDI3IDExLjEyNiAyLjUgOC43OTcgMi41IDQuMTQ3IDIuNS41IDYuMTQ3LjUgMTAuNzk3YzAgMS43MTQuNDYgMy4zNzUgMS4zODkgNS4wOTggMS43NzUgMy4yODggNC4yNiA1Ljg0MyAxMi4xMjMgMTIuOTc0bDEuOTg0IDEuODA2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1sb2FkIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNy4zMTQgMTguODY3bDEuOTUxLTIuNTMgNCA1LjE4NGgtMTdsNi41LTguODQgNC41NDkgNi4xODZ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC4wMSA0YTExLjc5OCAxMS43OTggMCAwIDAgMCAxSDN2MjRoMjRWMTQuOTg2YTguNzM4IDguNzM4IDAgMCAwIDEgMFYyOWExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVY1YTEgMSAwIDAgMSAxLTFoMTUuMDF6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yNSAzaDF2OWgtMXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIyIDZsMy41LTMuNUwyOSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWxvY2F0aW9uIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTYgMzEuMjhDMjMuNjc1IDIzLjMwMiAyNy41IDE3LjE4MSAyNy41IDEzYzAtNi4zNTEtNS4xNDktMTEuNS0xMS41LTExLjVTNC41IDYuNjQ5IDQuNSAxM2MwIDQuMTgxIDMuODI1IDEwLjMwMiAxMS41IDE4LjI4eiIvPgogICAgPGNpcmNsZSBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGN4PSIxNiIgY3k9IjEzIiByPSI0LjUiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tcG9seWdvbiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTS41NzYgMTZMOC4yOSAyOS41aDE1LjQyTDMxLjQyNCAxNiAyMy43MSAyLjVIOC4yOUwuNTc2IDE2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyLTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0xOS40NDYgMzEuNTkybDIuMjY1LTMuMjcyIDMuOTQ2LjI1LjYzNi0zLjk0IDMuNjY1LTEuNTA1LTEuMTItMy44MzIgMi42NTUtMi45NjItMi42NTYtMi45NjIgMS4xMi0zLjgzMi0zLjY2NC0xLjUwNS0uNjM2LTMuOTQxLTMuOTQ2LjI1LTIuMjY1LTMuMjcxTDE2IDMuMDI0IDEyLjU1NCAxLjA3IDEwLjI4OSA0LjM0bC0zLjk0Ni0uMjUtLjYzNiAzLjk0MS0zLjY2NSAxLjUwNSAxLjEyIDMuODMyTC41MDggMTYuMzNsMi42NTYgMi45NjItMS4xMiAzLjgzMiAzLjY2NCAxLjUwNC42MzYgMy45NDIgMy45NDYtLjI1IDIuMjY1IDMuMjdMMTYgMjkuNjM4bDMuNDQ2IDEuOTU1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMjUuMjkyIDI5Ljg3OGwtMS43NzUtMTAuMzQ2IDcuNTE3LTcuMzI3LTEwLjM4OC0xLjUxTDE2IDEuMjgybC00LjY0NiA5LjQxMy0xMC4zODggMS41MSA3LjUxNyA3LjMyNy0xLjc3NSAxMC4zNDZMMTYgMjQuOTkzbDkuMjkyIDQuODg1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMTEuOTIzIDE5LjEzNkw1LjQyNCAyMmwuNzE1LTcuMDY1LTQuNzMxLTUuMjk2IDYuOTQtMS41MDNMMTEuOTIzIDJsMy41NzQgNi4xMzYgNi45NCAxLjUwMy00LjczMSA1LjI5NkwxOC40MiAyMnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLW1hc2stbG9hZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTguMDEgNGExMS43OTggMTEuNzk4IDAgMCAwIDAgMUgzdjI0aDI0VjE0Ljk4NmE4LjczOCA4LjczOCAwIDAgMCAxIDBWMjlhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xaDE1LjAxek0xNSAyM2E2IDYgMCAxIDEgMC0xMiA2IDYgMCAwIDEgMCAxMnptMC0xYTUgNSAwIDEgMCAwLTEwIDUgNSAwIDAgMCAwIDEweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjUgM2gxdjloLTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yMiA2bDMuNS0zLjVMMjkgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtbWFzayIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjQuNSIgc3Ryb2tlPSJpbmhlcml0IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDFoMjBhMSAxIDAgMCAxIDEgMXYyMGExIDEgMCAwIDEtMSAxSDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTF6bTAgMXYyMGgyMFYySDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1yZWRvIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIxIDZIOWE2IDYgMCAxIDAgMCAxMmgxMnYxSDlBNyA3IDAgMCAxIDkgNWgxMnYxeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBkPSJNMTkgM2wyLjUgMi41TDE5IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJlc2V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMiAxM3YtMWE3IDcgMCAwIDEgNy03aDEzdjFoLTF2NWgxdjFhNyA3IDAgMCAxLTcgN0gydi0xaDF2LTVIMnptNy03YTYgNiAwIDAgMC02IDZ2NmgxMmE2IDYgMCAwIDAgNi02VjZIOXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTE5IDNsMi41IDIuNUwxOSA4TTUgMTZsLTIuNSAyLjVMNSAyMSIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtcm90YXRlLWNsb2Nrd2lzZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTI5IDE3aC0uOTI0YzAgNi42MjctNS4zNzMgMTItMTIgMTItNi42MjggMC0xMi01LjM3My0xMi0xMkM0LjA3NiAxMC4zOTggOS40MDcgNS4wNDEgMTYgNVY0QzguODIgNCAzIDkuODIgMyAxN3M1LjgyIDEzIDEzIDEzIDEzLTUuODIgMTMtMTN6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsNCAzLTQgMyIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNiA0aDR2MWgtNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZS1jb3VudGVyY2xvY2t3aXNlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMyAxN2guOTI0YzAgNi42MjcgNS4zNzMgMTIgMTIgMTIgNi42MjggMCAxMi01LjM3MyAxMi0xMiAwLTYuNjAyLTUuMzMxLTExLjk2LTExLjkyNC0xMlY0YzcuMTggMCAxMyA1LjgyIDEzIDEzcy01LjgyIDEzLTEzIDEzUzMgMjQuMTggMyAxN3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIgNGg0djFoLTR6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsLTQgMyA0IDMiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIHN0cm9rZT0ibm9uZSIgZD0iTTguMzQ5IDIyLjI1NGExMC4wMDIgMTAuMDAyIDAgMCAxLTIuNzc4LTEuNzE5bC42NS0uNzZhOS4wMDIgOS4wMDIgMCAwIDAgMi40OTUgMS41NDhsLS4zNjcuOTMxem0yLjg3My43MDRsLjA3OC0uOTk3YTkgOSAwIDEgMC0uNTU3LTE3Ljg1MmwtLjE0LS45OUExMC4wNzYgMTAuMDc2IDAgMCAxIDEyLjE0NSAzYzUuNTIzIDAgMTAgNC40NzcgMTAgMTBzLTQuNDc3IDEwLTEwIDEwYy0uMzEyIDAtLjYyLS4wMTQtLjkyNC0uMDQyem0tNy41NTYtNC42NTVhOS45NDIgOS45NDIgMCAwIDEtMS4yNTMtMi45OTZsLjk3My0uMjM0YTguOTQ4IDguOTQ4IDAgMCAwIDEuMTI0IDIuNjkzbC0uODQ0LjUzN3ptLTEuNTAyLTUuOTFBOS45NDkgOS45NDkgMCAwIDEgMi44OCA5LjIzbC45MjUuMzgyYTguOTU0IDguOTU0IDAgMCAwLS42NDQgMi44NDRsLS45OTgtLjA2MnptMi4yMS01LjY4NmMuNjg3LS44NDggMS41MS0xLjU4IDIuNDM2LTIuMTY2bC41MjMuODUyYTkuMDQ4IDkuMDQ4IDAgMCAwLTIuMTg4IDEuOTVsLS43NzEtLjYzNnoiLz4KICAgIDxwYXRoIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTEzIDFsLTIuNSAyLjVMMTMgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUtY2lyY2xlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS1yZWN0YW5nbGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cmVjdCB3aWR0aD0iMjciIGhlaWdodD0iMjciIHg9IjIuNSIgeT0iMi41IiBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHJ4PSIxIi8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS10cmlhbmdsZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE2IDIuNWwxNS41IDI3SC41eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNC43MDYgOEgyMWExIDEgMCAwIDEgMSAxdjEyYTEgMSAwIDAgMS0xIDFIOWExIDEgMCAwIDEtMS0xdi00aDF2NGgxMlY5aC01LjcwNmwtLjU4OC0xeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik04LjUgMS41bDcuNSAxM0gxeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC1hbGlnbi1jZW50ZXIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTggMTJoMTZ2MUg4ek0yIDE5aDI4djFIMnpNOCAyNmgxNnYxSDh6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLWxlZnQiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTIgMTJoMTZ2MUgyek0yIDE5aDI4djFIMnpNMiAyNmgxNnYxSDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLXJpZ2h0IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIiBkPSJNMCAwaDMydjMySDB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDVoMjh2MUgyek0xNCAxMmgxNnYxSDE0ek0yIDE5aDI4djFIMnpNMTQgMjZoMTZ2MUgxNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXRleHQtYm9sZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNyAyaDJ2Mkg3ek03IDI4aDJ2Mkg3eiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDN2MTJoOWE2IDYgMCAxIDAgMC0xMkg5ek05IDE1djE0aDEwYTcgNyAwIDAgMCAwLTE0SDl6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWl0YWxpYyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTUgMmg1djFoLTV6TTExIDI5aDV2MWgtNXpNMTcgM2gxbC00IDI2aC0xeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC11bmRlcmxpbmUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTggMnYxNGE4IDggMCAxIDAgMTYgMFYyaDF2MTRhOSA5IDAgMCAxLTE4IDBWMmgxek0zIDI5aDI2djFIM3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMmg1djFINXpNMjIgMmg1djFoLTV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNCAzaDE1YTEgMSAwIDAgMSAxIDFIM2ExIDEgMCAwIDEgMS0xek0zIDRoMXYxSDN6TTE5IDRoMXYxaC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTEgM2gxdjE4aC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTAgMjBoM3YxaC0zeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdW5kbyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0yNCAwSDB2MjRoMjR6IiBvcGFjaXR5PSIuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMyA2aDEyYTYgNiAwIDEgMSAwIDEySDN2MWgxMmE3IDcgMCAwIDAgMC0xNEgzdjF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik01IDNMMi41IDUuNSA1IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20taW4iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI5IC0yOTApIHRyYW5zbGF0ZSgyMjkgMjkwKSI+CiAgICAgICAgPGNpcmNsZSBjeD0iMTAuNSIgY3k9IjEwLjUiIHI9IjkiIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC44MjggMTUuODI4SDE5LjgyOFYyMi44MjhIMTguODI4eiIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDE5LjMyOCAxOS4zMjgpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZD0iTTcgMTBIMTRWMTFIN3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTAgN0gxMVYxNEgxMHoiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20tb3V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2MyAtMjkwKSB0cmFuc2xhdGUoMjYzIDI5MCkiPgogICAgICAgIDxjaXJjbGUgY3g9IjEwLjUiIGN5PSIxMC41IiByPSI5IiBzdHJva2U9ImluaGVyaXQiIGZpbGw9Im5vbmUiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTguODI4IDE1LjgyOEgxOS44MjhWMjIuODI4SDE4LjgyOHoiIHRyYW5zZm9ybT0icm90YXRlKC00NSAxOS4zMjggMTkuMzI4KSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik03IDEwSDE0VjExSDd6Ii8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oYW5kIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik04LjY3MiAzLjM2YzEuMzI4IDAgMi4xMTQuNzggMi4yOSAxLjg2OWwuMDE0LjEwMS4wMjMuMDA2djEuMDQybC0uNjM4LS4xODVjLS4xODctLjA1NS0uMzIzLS4yMTEtLjM1NC0uMzk5TDEwIDUuNzEzYzAtLjgyNS0uNDItMS4zNTMtMS4zMjgtMS4zNTNDNy42OTUgNC4zNiA3IDUuMDQxIDcgNS43MTN2Ny45NDFjMCAuNDM5LS41MjQuNjY1LS44NDMuMzY0bC0xLjg2OC0xLjc2MWMtLjU5NS0uNTI4LTEuMzE2LS42MTctMS45MTgtLjIxNi0uNTIyLjM0OC0uNTYyIDEuMjAzLS4xOCAxLjhMNy43MzggMjJoMTEuMDEzbC4yODUtLjUxOGMxLjI0Ny0yLjMyNiAxLjg5Ny00LjI1OSAxLjk2LTUuNzg1bC4wMDQtLjIzOVY4LjAzNWMwLS42NTYtLjUtMS4xNy0xLTEuMTctLjUwMyAwLTEgLjQ1Ni0xIDEuMTcgMCAuMzMzLS4zMi41NzMtLjY0LjQ4TDE4IDguNDFWNy4zNjhsLjA4Ni4wMjYuMDQyLS4xMzZjLjI3OS0uODA1Ljk3OC0xLjMzMiAxLjczOC0xLjM4OEwyMCA1Ljg2NWMxLjA1NyAwIDIgLjk2NyAyIDIuMTd2Ny40MjNjMCAxLjkyOS0uODQ1IDQuMzUyLTIuNTIxIDcuMjktLjA5LjE1Ni0uMjU1LjI1Mi0uNDM1LjI1Mkg3LjQ3NGMtLjE2NiAwLS4zMjEtLjA4Mi0uNDE0LS4yMTlsLTUuNzA0LTguMzljLS42NTMtMS4wMTktLjU4NC0yLjQ4Ni40Ni0zLjE4MiAxLS42NjYgMi4yMTYtLjUxNiAzLjE0OC4zMUw2IDEyLjQ5NVY1LjcxM2MwLTEuMTggMS4wNTgtMi4yNjMgMi40OS0yLjM0OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIuNSAxLjVjMS4zMjUgMCAyLjQxIDEuMDMyIDIuNDk1IDIuMzM2TDE1IDR2Ny4yMmgtMVY0YzAtLjgyOC0uNjcyLTEuNS0xLjUtMS41LS43OCAwLTEuNDIuNTk1LTEuNDkzIDEuMzU2TDExIDR2Ny4yMmgtMVY0YzAtMS4zOCAxLjEyLTIuNSAyLjUtMi41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI5NyAtMjkwKSB0cmFuc2xhdGUoMjk3IDI5MCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNi41IDMuNWMxLjMyNSAwIDIuNDEgMS4wMzIgMi40OTUgMi4zMzZMMTkgNnY2LjNoLTFWNmMwLS44MjgtLjY3Mi0xLjUtMS41LTEuNS0uNzggMC0xLjQyLjU5NS0xLjQ5MyAxLjM1NkwxNSA2djIuNDRoLTFWNmMwLTEuMzggMS4xMi0yLjUgMi41LTIuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8L2RlZnM+Cjwvc3ZnPgo=";
        },
        624: function(module2) {
          module2.exports = __WEBPACK_EXTERNAL_MODULE__624__;
        },
        4858: function(module2) {
          module2.exports = __WEBPACK_EXTERNAL_MODULE__4858__;
        },
        4960: function() {
        },
        6759: function() {
        },
        6272: function() {
        }
      };
      var __webpack_module_cache__ = {};
      function __webpack_require__(moduleId) {
        var cachedModule = __webpack_module_cache__[moduleId];
        if (cachedModule !== void 0) {
          return cachedModule.exports;
        }
        var module2 = __webpack_module_cache__[moduleId] = {
          exports: {}
        };
        __webpack_modules__[moduleId](module2, module2.exports, __webpack_require__);
        return module2.exports;
      }
      !function() {
        __webpack_require__.n = function(module2) {
          var getter = module2 && module2.__esModule ? function() {
            return module2["default"];
          } : function() {
            return module2;
          };
          __webpack_require__.d(getter, { a: getter });
          return getter;
        };
      }();
      !function() {
        __webpack_require__.d = function(exports2, definition) {
          for (var key in definition) {
            if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports2, key)) {
              Object.defineProperty(exports2, key, { enumerable: true, get: definition[key] });
            }
          }
        };
      }();
      !function() {
        __webpack_require__.g = function() {
          if (typeof globalThis === "object")
            return globalThis;
          try {
            return this || new Function("return this")();
          } catch (e) {
            if (typeof window === "object")
              return window;
          }
        }();
      }();
      !function() {
        __webpack_require__.o = function(obj, prop) {
          return Object.prototype.hasOwnProperty.call(obj, prop);
        };
      }();
      var __webpack_exports__ = {};
      !function() {
        __webpack_require__.d(__webpack_exports__, {
          "default": function() {
            return src;
          }
        });
        var trim = __webpack_require__(9131);
        var trim_default = /* @__PURE__ */ __webpack_require__.n(trim);
        var index_of = __webpack_require__(1899);
        var index_of_default = /* @__PURE__ */ __webpack_require__.n(index_of);
        var splice = __webpack_require__(6562);
        var splice_default = /* @__PURE__ */ __webpack_require__.n(splice);
        var define_property = __webpack_require__(1734);
        var define_property_default = /* @__PURE__ */ __webpack_require__.n(define_property);
        var slice = __webpack_require__(8005);
        var slice_default = /* @__PURE__ */ __webpack_require__.n(slice);
        var create = __webpack_require__(6065);
        var create_default = /* @__PURE__ */ __webpack_require__.n(create);
        var set_timeout = __webpack_require__(4496);
        var set_timeout_default = /* @__PURE__ */ __webpack_require__.n(set_timeout);
        if (!Element.prototype.matches) {
          Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
        }
        if (!Element.prototype.closest) {
          Element.prototype.closest = function(s) {
            var el = this;
            do {
              if (Element.prototype.matches.call(el, s))
                return el;
              el = el.parentElement || el.parentNode;
            } while (el !== null && el.nodeType === 1);
            return null;
          };
        }
        /*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
        if ("document" in self) {
          if (!("classList" in document.createElement("_")) || document.createElementNS && !("classList" in document.createElementNS("http://www.w3.org/2000/svg", "g"))) {
            (function(view) {
              if (!("Element" in view))
                return;
              var classListProp = "classList", protoProp = "prototype", elemCtrProto = view.Element[protoProp], objCtr = Object, strTrim = trim_default()(String[protoProp]) || function() {
                return this.replace(/^\s+|\s+$/g, "");
              }, arrIndexOf = index_of_default()(Array[protoProp]) || function(item) {
                var i = 0, len = this.length;
                for (; i < len; i++) {
                  if (i in this && this[i] === item) {
                    return i;
                  }
                }
                return -1;
              }, DOMEx = function DOMEx2(type, message) {
                this.name = type;
                this.code = DOMException[type];
                this.message = message;
              }, checkTokenAndGetIndex = function checkTokenAndGetIndex2(classList, token) {
                if (token === "") {
                  throw new DOMEx("SYNTAX_ERR", "The token must not be empty.");
                }
                if (/\s/.test(token)) {
                  throw new DOMEx("INVALID_CHARACTER_ERR", "The token must not contain space characters.");
                }
                return arrIndexOf.call(classList, token);
              }, ClassList = function ClassList2(elem) {
                var trimmedClasses = strTrim.call(elem.getAttribute("class") || ""), classes = trimmedClasses ? trimmedClasses.split(/\s+/) : [], i = 0, len = classes.length;
                for (; i < len; i++) {
                  this.push(classes[i]);
                }
                this._updateClassName = function() {
                  elem.setAttribute("class", this.toString());
                };
              }, classListProto = ClassList[protoProp] = [], classListGetter = function classListGetter2() {
                return new ClassList(this);
              };
              DOMEx[protoProp] = Error[protoProp];
              classListProto.item = function(i) {
                return this[i] || null;
              };
              classListProto.contains = function(token) {
                return ~checkTokenAndGetIndex(this, token + "");
              };
              classListProto.add = function() {
                var tokens = arguments, i = 0, l = tokens.length, token, updated = false;
                do {
                  token = tokens[i] + "";
                  if (!~checkTokenAndGetIndex(this, token)) {
                    this.push(token);
                    updated = true;
                  }
                } while (++i < l);
                if (updated) {
                  this._updateClassName();
                }
              };
              classListProto.remove = function() {
                var tokens = arguments, i = 0, l = tokens.length, token, updated = false, index;
                do {
                  token = tokens[i] + "";
                  index = checkTokenAndGetIndex(this, token);
                  while (~index) {
                    var _context2;
                    splice_default()(_context2 = this).call(_context2, index, 1);
                    updated = true;
                    index = checkTokenAndGetIndex(this, token);
                  }
                } while (++i < l);
                if (updated) {
                  this._updateClassName();
                }
              };
              classListProto.toggle = function(token, force) {
                var result = this.contains(token), method = result ? force !== true && "remove" : force !== false && "add";
                if (method) {
                  this[method](token);
                }
                if (force === true || force === false) {
                  return force;
                } else {
                  return !result;
                }
              };
              classListProto.replace = function(token, replacement_token) {
                var index = checkTokenAndGetIndex(token + "");
                if (~index) {
                  var _context2;
                  splice_default()(_context2 = this).call(_context2, index, 1, replacement_token);
                  this._updateClassName();
                }
              };
              classListProto.toString = function() {
                return this.join(" ");
              };
              if (define_property_default()) {
                var classListPropDesc = {
                  get: classListGetter,
                  enumerable: true,
                  configurable: true
                };
                try {
                  define_property_default()(elemCtrProto, classListProp, classListPropDesc);
                } catch (ex) {
                  if (ex.number === void 0 || ex.number === -2146823252) {
                    classListPropDesc.enumerable = false;
                    define_property_default()(elemCtrProto, classListProp, classListPropDesc);
                  }
                }
              } else if (objCtr[protoProp].__defineGetter__) {
                elemCtrProto.__defineGetter__(classListProp, classListGetter);
              }
            })(self);
          }
          (function() {
            var testElement = document.createElement("_");
            testElement.classList.add("c1", "c2");
            if (!testElement.classList.contains("c2")) {
              var createMethod = function createMethod2(method) {
                var original = DOMTokenList.prototype[method];
                DOMTokenList.prototype[method] = function(token) {
                  var i, len = arguments.length;
                  for (i = 0; i < len; i++) {
                    token = arguments[i];
                    original.call(this, token);
                  }
                };
              };
              createMethod("add");
              createMethod("remove");
            }
            testElement.classList.toggle("c3", false);
            if (testElement.classList.contains("c3")) {
              var _toggle = DOMTokenList.prototype.toggle;
              DOMTokenList.prototype.toggle = function(token, force) {
                if (1 in arguments && !this.contains(token) === !force) {
                  return force;
                } else {
                  return _toggle.call(this, token);
                }
              };
            }
            if (!("replace" in document.createElement("_").classList)) {
              DOMTokenList.prototype.replace = function(token, replacement_token) {
                var tokens = this.toString().split(" "), index = index_of_default()(tokens).call(tokens, token + "");
                if (~index) {
                  tokens = slice_default()(tokens).call(tokens, index);
                  this.remove.apply(this, tokens);
                  this.add(replacement_token);
                  this.add.apply(this, slice_default()(tokens).call(tokens, 1));
                }
              };
            }
            testElement = null;
          })();
        }
        /*!
         * @copyright Copyright (c) 2017 IcoMoon.io
         * @license   Licensed under MIT license
         *            See https://github.com/Keyamoon/svgxuse
         * @version   1.2.6
         */
        (function() {
          if (typeof window !== "undefined" && window.addEventListener) {
            var cache = create_default()(null);
            var checkUseElems;
            var tid;
            var debouncedCheck = function debouncedCheck2() {
              clearTimeout(tid);
              tid = set_timeout_default()(checkUseElems, 100);
            };
            var unobserveChanges = function unobserveChanges2() {
              return;
            };
            var observeChanges = function observeChanges2() {
              var observer;
              window.addEventListener("resize", debouncedCheck, false);
              window.addEventListener("orientationchange", debouncedCheck, false);
              if (window.MutationObserver) {
                observer = new MutationObserver(debouncedCheck);
                observer.observe(document.documentElement, {
                  childList: true,
                  subtree: true,
                  attributes: true
                });
                unobserveChanges = function unobserveChanges2() {
                  try {
                    observer.disconnect();
                    window.removeEventListener("resize", debouncedCheck, false);
                    window.removeEventListener("orientationchange", debouncedCheck, false);
                  } catch (ignore) {
                  }
                };
              } else {
                document.documentElement.addEventListener("DOMSubtreeModified", debouncedCheck, false);
                unobserveChanges = function unobserveChanges2() {
                  document.documentElement.removeEventListener("DOMSubtreeModified", debouncedCheck, false);
                  window.removeEventListener("resize", debouncedCheck, false);
                  window.removeEventListener("orientationchange", debouncedCheck, false);
                };
              }
            };
            var createRequest = function createRequest2(url2) {
              function getOrigin(loc) {
                var a;
                if (loc.protocol !== void 0) {
                  a = loc;
                } else {
                  a = document.createElement("a");
                  a.href = loc;
                }
                return a.protocol.replace(/:/g, "") + a.host;
              }
              var Request;
              var origin;
              var origin2;
              if (window.XMLHttpRequest) {
                Request = new XMLHttpRequest();
                origin = getOrigin(location);
                origin2 = getOrigin(url2);
                if (Request.withCredentials === void 0 && origin2 !== "" && origin2 !== origin) {
                  Request = XDomainRequest || void 0;
                } else {
                  Request = XMLHttpRequest;
                }
              }
              return Request;
            };
            var xlinkNS = "http://www.w3.org/1999/xlink";
            checkUseElems = function checkUseElems2() {
              var base;
              var bcr;
              var hash;
              var href;
              var i;
              var inProgressCount = 0;
              var isHidden;
              var Request;
              var url2;
              var uses;
              var xhr;
              function observeIfDone() {
                inProgressCount -= 1;
                if (inProgressCount === 0) {
                  unobserveChanges();
                  observeChanges();
                }
              }
              function attrUpdateFunc(spec) {
                return function() {
                  if (cache[spec.base] !== true) {
                    spec.useEl.setAttributeNS(xlinkNS, "xlink:href", "#" + spec.hash);
                    if (spec.useEl.hasAttribute("href")) {
                      spec.useEl.setAttribute("href", "#" + spec.hash);
                    }
                  }
                };
              }
              function onloadFunc(xhr2) {
                return function() {
                  var body = document.body;
                  var x = document.createElement("x");
                  var svg;
                  xhr2.onload = null;
                  x.innerHTML = xhr2.responseText;
                  svg = x.getElementsByTagName("svg")[0];
                  if (svg) {
                    svg.setAttribute("aria-hidden", "true");
                    svg.style.position = "absolute";
                    svg.style.width = 0;
                    svg.style.height = 0;
                    svg.style.overflow = "hidden";
                    body.insertBefore(svg, body.firstChild);
                  }
                  observeIfDone();
                };
              }
              function onErrorTimeout(xhr2) {
                return function() {
                  xhr2.onerror = null;
                  xhr2.ontimeout = null;
                  observeIfDone();
                };
              }
              unobserveChanges();
              uses = document.getElementsByTagName("use");
              for (i = 0; i < uses.length; i += 1) {
                try {
                  bcr = uses[i].getBoundingClientRect();
                } catch (ignore) {
                  bcr = false;
                }
                href = uses[i].getAttribute("href") || uses[i].getAttributeNS(xlinkNS, "href") || uses[i].getAttribute("xlink:href");
                if (href && href.split) {
                  url2 = href.split("#");
                } else {
                  url2 = ["", ""];
                }
                base = url2[0];
                hash = url2[1];
                isHidden = bcr && bcr.left === 0 && bcr.right === 0 && bcr.top === 0 && bcr.bottom === 0;
                if (bcr && bcr.width === 0 && bcr.height === 0 && !isHidden) {
                  if (uses[i].hasAttribute("href")) {
                    uses[i].setAttributeNS(xlinkNS, "xlink:href", href);
                  }
                  if (base.length) {
                    xhr = cache[base];
                    if (xhr !== true) {
                      set_timeout_default()(attrUpdateFunc({
                        useEl: uses[i],
                        base,
                        hash
                      }), 0);
                    }
                    if (xhr === void 0) {
                      Request = createRequest(base);
                      if (Request !== void 0) {
                        xhr = new Request();
                        cache[base] = xhr;
                        xhr.onload = onloadFunc(xhr);
                        xhr.onerror = onErrorTimeout(xhr);
                        xhr.ontimeout = onErrorTimeout(xhr);
                        xhr.open("GET", base);
                        xhr.send();
                        inProgressCount += 1;
                      }
                    }
                  }
                } else {
                  if (!isHidden) {
                    if (cache[base] === void 0) {
                      cache[base] = true;
                    } else if (cache[base].onload) {
                      cache[base].abort();
                      delete cache[base].onload;
                      cache[base] = true;
                    }
                  } else if (base.length && cache[base]) {
                    set_timeout_default()(attrUpdateFunc({
                      useEl: uses[i],
                      base,
                      hash
                    }), 0);
                  }
                }
              }
              uses = "";
              inProgressCount += 1;
              observeIfDone();
            };
            var _winLoad;
            _winLoad = function winLoad() {
              window.removeEventListener("load", _winLoad, false);
              tid = set_timeout_default()(checkUseElems, 0);
            };
            if (document.readyState !== "complete") {
              window.addEventListener("load", _winLoad, false);
            } else {
              _winLoad();
            }
          }
        })();
        var is_array = __webpack_require__(1845);
        function _arrayLikeToArray(arr, len) {
          if (len == null || len > arr.length)
            len = arr.length;
          for (var i = 0, arr2 = new Array(len); i < len; i++) {
            arr2[i] = arr[i];
          }
          return arr2;
        }
        function _arrayWithoutHoles(arr) {
          if (is_array(arr))
            return _arrayLikeToArray(arr);
        }
        var symbol = __webpack_require__(184);
        var get_iterator_method = __webpack_require__(662);
        var from = __webpack_require__(7172);
        function _iterableToArray(iter) {
          if (typeof symbol !== "undefined" && get_iterator_method(iter) != null || iter["@@iterator"] != null)
            return from(iter);
        }
        var instance_slice = __webpack_require__(711);
        function _unsupportedIterableToArray(o, minLen) {
          var _context2;
          if (!o)
            return;
          if (typeof o === "string")
            return _arrayLikeToArray(o, minLen);
          var n = instance_slice(_context2 = Object.prototype.toString.call(o)).call(_context2, 8, -1);
          if (n === "Object" && o.constructor)
            n = o.constructor.name;
          if (n === "Map" || n === "Set")
            return from(o);
          if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
            return _arrayLikeToArray(o, minLen);
        }
        function _nonIterableSpread() {
          throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }
        function _toConsumableArray(arr) {
          return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
        }
        var object_define_property = __webpack_require__(7077);
        function _defineProperty(obj, key, value) {
          if (key in obj) {
            object_define_property(obj, key, {
              value,
              enumerable: true,
              configurable: true,
              writable: true
            });
          } else {
            obj[key] = value;
          }
          return obj;
        }
        function _classCallCheck(instance, Constructor) {
          if (!(instance instanceof Constructor)) {
            throw new TypeError("Cannot call a class as a function");
          }
        }
        function _defineProperties(target, props) {
          for (var i = 0; i < props.length; i++) {
            var descriptor = props[i];
            descriptor.enumerable = descriptor.enumerable || false;
            descriptor.configurable = true;
            if ("value" in descriptor)
              descriptor.writable = true;
            object_define_property(target, descriptor.key, descriptor);
          }
        }
        function _createClass(Constructor, protoProps, staticProps) {
          if (protoProps)
            _defineProperties(Constructor.prototype, protoProps);
          if (staticProps)
            _defineProperties(Constructor, staticProps);
          return Constructor;
        }
        var for_each = __webpack_require__(7636);
        var for_each_default = /* @__PURE__ */ __webpack_require__.n(for_each);
        var bind = __webpack_require__(4426);
        var bind_default = /* @__PURE__ */ __webpack_require__.n(bind);
        var concat = __webpack_require__(9406);
        var concat_default = /* @__PURE__ */ __webpack_require__.n(concat);
        var core_js_stable_promise = __webpack_require__(8189);
        var promise_default = /* @__PURE__ */ __webpack_require__.n(core_js_stable_promise);
        var url = __webpack_require__(3972);
        var url_default = /* @__PURE__ */ __webpack_require__.n(url);
        var external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_ = __webpack_require__(624);
        var external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default = /* @__PURE__ */ __webpack_require__.n(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_);
        var fabric = __webpack_require__(2777);
        var keys = __webpack_require__(2461);
        var keys_default = /* @__PURE__ */ __webpack_require__.n(keys);
        function _arrayWithHoles(arr) {
          if (is_array(arr))
            return arr;
        }
        function _iterableToArrayLimit(arr, i) {
          var _i = arr == null ? null : typeof symbol !== "undefined" && get_iterator_method(arr) || arr["@@iterator"];
          if (_i == null)
            return;
          var _arr = [];
          var _n = true;
          var _d = false;
          var _s, _e;
          try {
            for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {
              _arr.push(_s.value);
              if (i && _arr.length === i)
                break;
            }
          } catch (err) {
            _d = true;
            _e = err;
          } finally {
            try {
              if (!_n && _i["return"] != null)
                _i["return"]();
            } finally {
              if (_d)
                throw _e;
            }
          }
          return _arr;
        }
        function _nonIterableRest() {
          throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }
        function _slicedToArray(arr, i) {
          return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();
        }
        var parse_int = __webpack_require__(6397);
        var parse_int_default = /* @__PURE__ */ __webpack_require__.n(parse_int);
        var instance_fill = __webpack_require__(789);
        var fill_default = /* @__PURE__ */ __webpack_require__.n(instance_fill);
        var _context;
        var ZOOM_HELP_MENUS = ["zoomIn", "zoomOut", "hand"];
        var COMMAND_HELP_MENUS = ["history", "undo", "redo", "reset"];
        var DELETE_HELP_MENUS = ["delete", "deleteAll"];
        var HELP_MENUS = concat_default()(_context = []).call(_context, ZOOM_HELP_MENUS, COMMAND_HELP_MENUS, DELETE_HELP_MENUS);
        var SHAPE_FILL_TYPE = {
          FILTER: "filter",
          COLOR: "color"
        };
        var SHAPE_TYPE = ["rect", "circle", "triangle"];
        var OBJ_TYPE = {
          CROPZONE: "cropzone"
        };
        var filterType = {
          VINTAGE: "vintage",
          SEPIA2: "sepia2",
          REMOVE_COLOR: "removeColor",
          COLOR_FILTER: "colorFilter",
          REMOVE_WHITE: "removeWhite",
          BLEND_COLOR: "blendColor",
          BLEND: "blend"
        };
        var componentNames = keyMirror("IMAGE_LOADER", "CROPPER", "FLIP", "ROTATION", "FREE_DRAWING", "LINE", "TEXT", "ICON", "FILTER", "SHAPE", "ZOOM", "RESIZE");
        var SHAPE_DEFAULT_OPTIONS = {
          lockSkewingX: true,
          lockSkewingY: true,
          bringForward: true,
          isRegular: false
        };
        var CROPZONE_DEFAULT_OPTIONS = {
          hasRotatingPoint: false,
          hasBorders: false,
          lockScalingFlip: true,
          lockRotation: true,
          lockSkewingX: true,
          lockSkewingY: true
        };
        var commandNames = {
          CLEAR_OBJECTS: "clearObjects",
          LOAD_IMAGE: "loadImage",
          FLIP_IMAGE: "flip",
          ROTATE_IMAGE: "rotate",
          ADD_OBJECT: "addObject",
          REMOVE_OBJECT: "removeObject",
          APPLY_FILTER: "applyFilter",
          REMOVE_FILTER: "removeFilter",
          ADD_ICON: "addIcon",
          CHANGE_ICON_COLOR: "changeIconColor",
          ADD_SHAPE: "addShape",
          CHANGE_SHAPE: "changeShape",
          ADD_TEXT: "addText",
          CHANGE_TEXT: "changeText",
          CHANGE_TEXT_STYLE: "changeTextStyle",
          ADD_IMAGE_OBJECT: "addImageObject",
          RESIZE_CANVAS_DIMENSION: "resizeCanvasDimension",
          SET_OBJECT_PROPERTIES: "setObjectProperties",
          SET_OBJECT_POSITION: "setObjectPosition",
          CHANGE_SELECTION: "changeSelection",
          RESIZE_IMAGE: "resize"
        };
        var eventNames = {
          OBJECT_ACTIVATED: "objectActivated",
          OBJECT_MOVED: "objectMoved",
          OBJECT_SCALED: "objectScaled",
          OBJECT_CREATED: "objectCreated",
          OBJECT_ROTATED: "objectRotated",
          OBJECT_ADDED: "objectAdded",
          OBJECT_MODIFIED: "objectModified",
          TEXT_EDITING: "textEditing",
          TEXT_CHANGED: "textChanged",
          ICON_CREATE_RESIZE: "iconCreateResize",
          ICON_CREATE_END: "iconCreateEnd",
          ADD_TEXT: "addText",
          ADD_OBJECT: "addObject",
          ADD_OBJECT_AFTER: "addObjectAfter",
          MOUSE_DOWN: "mousedown",
          MOUSE_UP: "mouseup",
          MOUSE_MOVE: "mousemove",
          REDO_STACK_CHANGED: "redoStackChanged",
          UNDO_STACK_CHANGED: "undoStackChanged",
          SELECTION_CLEARED: "selectionCleared",
          SELECTION_CREATED: "selectionCreated",
          EXECUTE_COMMAND: "executeCommand",
          AFTER_UNDO: "afterUndo",
          AFTER_REDO: "afterRedo",
          ZOOM_CHANGED: "zoomChanged",
          HAND_STARTED: "handStarted",
          HAND_STOPPED: "handStopped",
          KEY_DOWN: "keydown",
          KEY_UP: "keyup",
          INPUT_BOX_EDITING_STARTED: "inputBoxEditingStarted",
          INPUT_BOX_EDITING_STOPPED: "inputBoxEditingStopped",
          FOCUS: "focus",
          BLUR: "blur",
          IMAGE_RESIZED: "imageResized"
        };
        var selectorNames = {
          COLOR_PICKER_INPUT_BOX: ".tui-colorpicker-palette-hex"
        };
        var historyNames = {
          LOAD_IMAGE: "Load",
          LOAD_MASK_IMAGE: "Mask",
          ADD_MASK_IMAGE: "Mask",
          ADD_IMAGE_OBJECT: "Mask",
          CROP: "Crop",
          RESIZE: "Resize",
          APPLY_FILTER: "Filter",
          REMOVE_FILTER: "Filter",
          CHANGE_SHAPE: "Shape",
          CHANGE_ICON_COLOR: "Icon",
          ADD_TEXT: "Text",
          CHANGE_TEXT_STYLE: "Text",
          REMOVE_OBJECT: "Delete",
          CLEAR_OBJECTS: "Delete"
        };
        var drawingModes = keyMirror("NORMAL", "CROPPER", "FREE_DRAWING", "LINE_DRAWING", "TEXT", "SHAPE", "ICON", "ZOOM", "RESIZE");
        var drawingMenuNames = {
          TEXT: "text",
          CROP: "crop",
          RESIZE: "resize",
          SHAPE: "shape",
          ZOOM: "zoom"
        };
        var zoomModes = {
          DEFAULT: "normal",
          ZOOM: "zoom",
          HAND: "hand"
        };
        var keyCodes = {
          Z: 90,
          Y: 89,
          C: 67,
          V: 86,
          SHIFT: 16,
          BACKSPACE: 8,
          DEL: 46,
          ARROW_DOWN: 40,
          ARROW_UP: 38,
          SPACE: 32
        };
        var fObjectOptions = {
          SELECTION_STYLE: {
            borderColor: "red",
            cornerColor: "green",
            cornerSize: 10,
            originX: "center",
            originY: "center",
            transparentCorners: false
          }
        };
        var rejectMessages = {
          addedObject: "The object is already added.",
          flip: "The flipX and flipY setting values are not changed.",
          invalidDrawingMode: "This operation is not supported in the drawing mode.",
          invalidParameters: "Invalid parameters.",
          isLock: "The executing command state is locked.",
          loadImage: "The background image is empty.",
          loadingImageFailed: "Invalid image loaded.",
          noActiveObject: "There is no active object.",
          noObject: "The object is not in canvas.",
          redo: "The promise of redo command is reject.",
          rotation: "The current angle is same the old angle.",
          undo: "The promise of undo command is reject.",
          unsupportedOperation: "Unsupported operation.",
          unsupportedType: "Unsupported object type."
        };
        var defaultIconPath = {
          "icon-arrow": "M40 12V0l24 24-24 24V36H0V12h40z",
          "icon-arrow-2": "M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ",
          "icon-arrow-3": "M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ",
          "icon-star": "M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ",
          "icon-star-2": "M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ",
          "icon-polygon": "M3,31 L19,3 h32 l16,28 l-16,28 H19  z ",
          "icon-location": "M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z",
          "icon-heart": "M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ",
          "icon-bubble": "M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z"
        };
        var defaultRotateRangeValues = {
          realTimeEvent: true,
          min: -360,
          max: 360,
          value: 0
        };
        var defaultDrawRangeValues = {
          min: 5,
          max: 30,
          value: 12
        };
        var defaultShapeStrokeValues = {
          realTimeEvent: true,
          min: 2,
          max: 300,
          value: 3
        };
        var defaultTextRangeValues = {
          realTimeEvent: true,
          min: 10,
          max: 100,
          value: 50
        };
        var defaultFilterRangeValues = {
          tintOpacityRange: {
            realTimeEvent: true,
            min: 0,
            max: 1,
            value: 0.7,
            useDecimal: true
          },
          removewhiteDistanceRange: {
            realTimeEvent: true,
            min: 0,
            max: 1,
            value: 0.2,
            useDecimal: true
          },
          brightnessRange: {
            realTimeEvent: true,
            min: -1,
            max: 1,
            value: 0,
            useDecimal: true
          },
          noiseRange: {
            realTimeEvent: true,
            min: 0,
            max: 1e3,
            value: 100
          },
          pixelateRange: {
            realTimeEvent: true,
            min: 2,
            max: 20,
            value: 4
          },
          colorfilterThresholdRange: {
            realTimeEvent: true,
            min: 0,
            max: 1,
            value: 0.2,
            useDecimal: true
          },
          blurFilterRange: {
            value: 0.1
          }
        };
        var emptyCropRectValues = {
          LEFT: 0,
          TOP: 0,
          WIDTH: 0.5,
          HEIGHT: 0.5
        };
        var defaultResizePixelValues = {
          realTimeEvent: true,
          min: 32,
          max: 4088,
          value: 800
        };
        var FLOATING_POINT_DIGIT = 2;
        var CSS_PREFIX = "tui-image-editor-";
        var min = Math.min, max = Math.max;
        var hostnameSent = false;
        function isFunction(value) {
          return typeof value === "function";
        }
        function clamp(value, minValue, maxValue) {
          if (minValue > maxValue) {
            var _ref = [maxValue, minValue];
            minValue = _ref[0];
            maxValue = _ref[1];
          }
          return max(minValue, min(value, maxValue));
        }
        function keyMirror() {
          var obj = {};
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.forEach)(args, function(key) {
            obj[key] = key;
          });
          return obj;
        }
        function getProperties(obj, keys2) {
          var props = {};
          var length = keys2.length;
          var i = 0;
          var key;
          for (i = 0; i < length; i += 1) {
            key = keys2[i];
            props[key] = obj[key];
          }
          return props;
        }
        function toInteger(value) {
          return parse_int_default()(value, 10);
        }
        function toCamelCase(targetString) {
          return targetString.replace(/-([a-z])/g, function($0, $1) {
            return $1.toUpperCase();
          });
        }
        function isSupportFileApi() {
          return !!(window.File && window.FileList && window.FileReader);
        }
        function getRgb(color, alpha) {
          var _context3, _context4, _context5;
          if (color.length === 4) {
            var _context2;
            color = concat_default()(_context2 = "".concat(color)).call(_context2, slice_default()(color).call(color, 1, 4));
          }
          var r = parse_int_default()(slice_default()(color).call(color, 1, 3), 16);
          var g = parse_int_default()(slice_default()(color).call(color, 3, 5), 16);
          var b = parse_int_default()(slice_default()(color).call(color, 5, 7), 16);
          var a = alpha || 1;
          return concat_default()(_context3 = concat_default()(_context4 = concat_default()(_context5 = "rgba(".concat(r, ", ")).call(_context5, g, ", ")).call(_context4, b, ", ")).call(_context3, a, ")");
        }
        function sendHostName() {
          if (hostnameSent) {
            return;
          }
          hostnameSent = true;
          (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.sendHostname)("image-editor", "UA-129999381-1");
        }
        function styleLoad(styleBuffer, tagId) {
          var _document$getElements = document.getElementsByTagName("head"), _document$getElements2 = _slicedToArray(_document$getElements, 1), head = _document$getElements2[0];
          var linkElement = document.createElement("link");
          var styleData = encodeURIComponent(styleBuffer);
          if (tagId) {
            linkElement.id = tagId;
          }
          linkElement.setAttribute("rel", "stylesheet");
          linkElement.setAttribute("type", "text/css");
          linkElement.setAttribute("href", "data:text/css;charset=UTF-8,".concat(styleData));
          head.appendChild(linkElement);
        }
        function getSelector(targetElement) {
          return function(str) {
            return targetElement.querySelector(str);
          };
        }
        function base64ToBlob2(data) {
          var rImageType2 = /data:(image\/.+);base64,/;
          var mimeString = "";
          var raw, uInt8Array, i;
          raw = data.replace(rImageType2, function(header, imageType) {
            mimeString = imageType;
            return "";
          });
          raw = atob(raw);
          var rawLength = raw.length;
          uInt8Array = new Uint8Array(rawLength);
          for (i = 0; i < rawLength; i += 1) {
            uInt8Array[i] = raw.charCodeAt(i);
          }
          return new Blob([uInt8Array], {
            type: mimeString
          });
        }
        function fixFloatingPoint(value) {
          return Number(value.toFixed(FLOATING_POINT_DIGIT));
        }
        function assignmentForDestroy(targetObject) {
          (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.forEach)(targetObject, function(value, key) {
            targetObject[key] = null;
          });
        }
        function cls() {
          var _context7;
          var str = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
          var prefix = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
          if (str.charAt(0) === ".") {
            var _context6;
            return concat_default()(_context6 = ".".concat(CSS_PREFIX).concat(prefix)).call(_context6, slice_default()(str).call(str, 1));
          }
          return concat_default()(_context7 = "".concat(CSS_PREFIX).concat(prefix)).call(_context7, str);
        }
        function changeOrigin(fObject, origin) {
          var originX = origin.originX, originY = origin.originY;
          var _fObject$getPointByOr = fObject.getPointByOrigin(originX, originY), left = _fObject$getPointByOr.x, top = _fObject$getPointByOr.y;
          fObject.set({
            left,
            top,
            originX,
            originY
          });
          fObject.setCoords();
        }
        function flipObject(targetObject) {
          var _context8;
          var result = {};
          for_each_default()(_context8 = keys_default()(targetObject)).call(_context8, function(key) {
            result[targetObject[key]] = key;
          });
          return result;
        }
        function setCustomProperty(targetObject, props) {
          targetObject.customProps = targetObject.customProps || {};
          (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)(targetObject.customProps, props);
        }
        function getCustomProperty(fObject, propNames) {
          var resultObject = {};
          if ((0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.isString)(propNames)) {
            propNames = [propNames];
          }
          (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.forEach)(propNames, function(propName) {
            resultObject[propName] = fObject.customProps[propName];
          });
          return resultObject;
        }
        function capitalizeString(targetString) {
          return targetString.charAt(0).toUpperCase() + slice_default()(targetString).call(targetString, 1);
        }
        function includes(targetArray, compareValue) {
          return index_of_default()(targetArray).call(targetArray, compareValue) >= 0;
        }
        function getFillTypeFromOption() {
          var fillOption = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.pick)(fillOption, "type") || SHAPE_FILL_TYPE.COLOR;
        }
        function getFillTypeFromObject(shapeObj) {
          var _shapeObj$fill = fill_default()(shapeObj), fill = _shapeObj$fill === void 0 ? {} : _shapeObj$fill;
          if (fill.source) {
            return SHAPE_FILL_TYPE.FILTER;
          }
          return SHAPE_FILL_TYPE.COLOR;
        }
        function isShape(obj) {
          return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.inArray)(obj.get("type"), SHAPE_TYPE) >= 0;
        }
        function getObjectType(type) {
          if (includes(SHAPE_TYPE, type)) {
            return "Shape";
          }
          switch (type) {
            case "i-text":
              return "Text";
            case "path":
            case "line":
              return "Draw";
            case "activeSelection":
              return "Group";
            default:
              return toStartOfCapital(type);
          }
        }
        function getFilterType(type) {
          var _ref2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, _ref2$useAlpha = _ref2.useAlpha, useAlpha = _ref2$useAlpha === void 0 ? true : _ref2$useAlpha, mode = _ref2.mode;
          var VINTAGE = filterType.VINTAGE, REMOVE_COLOR = filterType.REMOVE_COLOR, BLEND_COLOR = filterType.BLEND_COLOR, SEPIA2 = filterType.SEPIA2, COLOR_FILTER = filterType.COLOR_FILTER, REMOVE_WHITE = filterType.REMOVE_WHITE, BLEND = filterType.BLEND;
          var filterName;
          switch (type) {
            case VINTAGE:
              filterName = SEPIA2;
              break;
            case REMOVE_COLOR:
              filterName = useAlpha ? COLOR_FILTER : REMOVE_WHITE;
              break;
            case BLEND_COLOR:
              filterName = mode === "add" ? BLEND : mode;
              break;
            default:
              filterName = type;
          }
          return toStartOfCapital(filterName);
        }
        function isSilentCommand(command2) {
          var LOAD_IMAGE = commandNames.LOAD_IMAGE;
          return typeof command2 === "string" ? LOAD_IMAGE === command2 : LOAD_IMAGE === command2.name;
        }
        function getHistoryTitle(command2) {
          var _context9, _context10;
          var FLIP_IMAGE = commandNames.FLIP_IMAGE, ROTATE_IMAGE = commandNames.ROTATE_IMAGE, ADD_TEXT2 = commandNames.ADD_TEXT, APPLY_FILTER = commandNames.APPLY_FILTER, REMOVE_FILTER = commandNames.REMOVE_FILTER, CHANGE_SHAPE = commandNames.CHANGE_SHAPE, CHANGE_ICON_COLOR = commandNames.CHANGE_ICON_COLOR, CHANGE_TEXT_STYLE = commandNames.CHANGE_TEXT_STYLE, CLEAR_OBJECTS = commandNames.CLEAR_OBJECTS, ADD_IMAGE_OBJECT = commandNames.ADD_IMAGE_OBJECT, REMOVE_OBJECT = commandNames.REMOVE_OBJECT, RESIZE_IMAGE = commandNames.RESIZE_IMAGE;
          var name = command2.name, args = command2.args;
          var historyInfo;
          switch (name) {
            case FLIP_IMAGE:
              historyInfo = {
                name,
                detail: args[1] === "reset" ? args[1] : slice_default()(_context9 = args[1]).call(_context9, 4)
              };
              break;
            case ROTATE_IMAGE:
              historyInfo = {
                name,
                detail: args[2]
              };
              break;
            case APPLY_FILTER:
              historyInfo = {
                name: historyNames.APPLY_FILTER,
                detail: getFilterType(args[1], args[2])
              };
              break;
            case REMOVE_FILTER:
              historyInfo = {
                name: historyNames.REMOVE_FILTER,
                detail: "Remove"
              };
              break;
            case CHANGE_SHAPE:
              historyInfo = {
                name: historyNames.CHANGE_SHAPE,
                detail: "Change"
              };
              break;
            case CHANGE_ICON_COLOR:
              historyInfo = {
                name: historyNames.CHANGE_ICON_COLOR,
                detail: "Change"
              };
              break;
            case CHANGE_TEXT_STYLE:
              historyInfo = {
                name: historyNames.CHANGE_TEXT_STYLE,
                detail: "Change"
              };
              break;
            case REMOVE_OBJECT:
              historyInfo = {
                name: historyNames.REMOVE_OBJECT,
                detail: args[2]
              };
              break;
            case CLEAR_OBJECTS:
              historyInfo = {
                name: historyNames.CLEAR_OBJECTS,
                detail: "All"
              };
              break;
            case ADD_IMAGE_OBJECT:
              historyInfo = {
                name: historyNames.ADD_IMAGE_OBJECT,
                detail: "Add"
              };
              break;
            case ADD_TEXT2:
              historyInfo = {
                name: historyNames.ADD_TEXT
              };
              break;
            case RESIZE_IMAGE:
              historyInfo = {
                name: historyNames.RESIZE,
                detail: concat_default()(_context10 = "".concat(~~args[1].width, "x")).call(_context10, ~~args[1].height)
              };
              break;
            default:
              historyInfo = {
                name
              };
              break;
          }
          if (args[1] === "mask") {
            historyInfo = {
              name: historyNames.LOAD_MASK_IMAGE,
              detail: "Apply"
            };
          }
          return historyInfo;
        }
        function getHelpMenuBarPosition(position) {
          if (position === "top") {
            return "bottom";
          }
          if (position === "left") {
            return "right";
          }
          if (position === "right") {
            return "left";
          }
          return "top";
        }
        function toStartOfCapital(str) {
          return str.replace(/[a-z]/, function(first) {
            return first.toUpperCase();
          });
        }
        function isEmptyCropzone(cropRect) {
          var left = cropRect.left, top = cropRect.top, width = cropRect.width, height = cropRect.height;
          var LEFT = emptyCropRectValues.LEFT, TOP = emptyCropRectValues.TOP, WIDTH = emptyCropRectValues.WIDTH, HEIGHT = emptyCropRectValues.HEIGHT;
          return left === LEFT && top === TOP && width === WIDTH && height === HEIGHT;
        }
        var types = keyMirror("UN_IMPLEMENTATION", "NO_COMPONENT_NAME");
        var messages = {
          UN_IMPLEMENTATION: "Should implement a method: ",
          NO_COMPONENT_NAME: "Should set a component name"
        };
        var map = {
          UN_IMPLEMENTATION: function UN_IMPLEMENTATION(methodName) {
            return messages.UN_IMPLEMENTATION + methodName;
          },
          NO_COMPONENT_NAME: function NO_COMPONENT_NAME() {
            return messages.NO_COMPONENT_NAME;
          }
        };
        var errorMessage = {
          types: external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend({}, types),
          create: function create2(type) {
            type = type.toLowerCase();
            var func = map[type];
            for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
              args[_key - 1] = arguments[_key];
            }
            return func.apply(void 0, args);
          }
        };
        var createMessage = errorMessage.create;
        var errorTypes = errorMessage.types;
        var Command = /* @__PURE__ */ function() {
          function Command2(actions2, args) {
            _classCallCheck(this, Command2);
            this.name = actions2.name;
            this.args = args;
            this.execute = actions2.execute;
            this.undo = actions2.undo;
            this.executeCallback = actions2.executeCallback || null;
            this.undoCallback = actions2.undoCallback || null;
            this.undoData = {};
          }
          _createClass(Command2, [{
            key: "execute",
            value: function execute() {
              throw new Error(createMessage(errorTypes.UN_IMPLEMENTATION, "execute"));
            }
          }, {
            key: "undo",
            value: function undo() {
              throw new Error(createMessage(errorTypes.UN_IMPLEMENTATION, "undo"));
            }
          }, {
            key: "isRedo",
            get: function get() {
              return keys_default()(this.undoData).length > 0;
            }
          }, {
            key: "setUndoData",
            value: function setUndoData(undoData, cachedUndoDataForSilent2, isSilent) {
              if (cachedUndoDataForSilent2) {
                undoData = cachedUndoDataForSilent2;
              }
              if (!isSilent) {
                external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend(this.undoData, undoData);
                cachedUndoDataForSilent2 = null;
              } else if (!cachedUndoDataForSilent2) {
                cachedUndoDataForSilent2 = undoData;
              }
              return cachedUndoDataForSilent2;
            }
          }, {
            key: "setExecuteCallback",
            value: function setExecuteCallback(callback) {
              this.executeCallback = callback;
              return this;
            }
          }, {
            key: "setUndoCallback",
            value: function setUndoCallback(callback) {
              this.undoCallback = callback;
              return this;
            }
          }]);
          return Command2;
        }();
        var command = Command;
        var commands = {};
        function command_create(name) {
          var actions2 = commands[name];
          if (actions2) {
            for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
              args[_key - 1] = arguments[_key];
            }
            return new command(actions2, args);
          }
          return null;
        }
        function register(command2) {
          commands[command2.name] = command2;
        }
        var factory_command = {
          create: command_create,
          register
        };
        var Invoker = /* @__PURE__ */ function() {
          function Invoker2() {
            _classCallCheck(this, Invoker2);
            this._undoStack = [];
            this._redoStack = [];
            this._isLocked = false;
            this._isSilent = false;
          }
          _createClass(Invoker2, [{
            key: "_invokeExecution",
            value: function _invokeExecution(command2) {
              var _this = this;
              var isRedo = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
              this.lock();
              var args = command2.args;
              if (!args) {
                args = [];
              }
              return command2.execute.apply(command2, _toConsumableArray(args)).then(function(value) {
                if (!_this._isSilent) {
                  _this.pushUndoStack(command2);
                  _this.fire(isRedo ? eventNames.AFTER_REDO : eventNames.EXECUTE_COMMAND, command2);
                }
                _this.unlock();
                if (isFunction(command2.executeCallback)) {
                  command2.executeCallback(value);
                }
                return value;
              })["catch"](function(message) {
                _this.unlock();
                return promise_default().reject(message);
              });
            }
          }, {
            key: "_invokeUndo",
            value: function _invokeUndo(command2) {
              var _this2 = this;
              this.lock();
              var args = command2.args;
              if (!args) {
                args = [];
              }
              return command2.undo.apply(command2, _toConsumableArray(args)).then(function(value) {
                _this2.pushRedoStack(command2);
                _this2.fire(eventNames.AFTER_UNDO, command2);
                _this2.unlock();
                if (isFunction(command2.undoCallback)) {
                  command2.undoCallback(value);
                }
                return value;
              })["catch"](function(message) {
                _this2.unlock();
                return promise_default().reject(message);
              });
            }
          }, {
            key: "_fireRedoStackChanged",
            value: function _fireRedoStackChanged() {
              this.fire(eventNames.REDO_STACK_CHANGED, this._redoStack.length);
            }
          }, {
            key: "_fireUndoStackChanged",
            value: function _fireUndoStackChanged() {
              this.fire(eventNames.UNDO_STACK_CHANGED, this._undoStack.length);
            }
          }, {
            key: "lock",
            value: function lock() {
              this._isLocked = true;
            }
          }, {
            key: "unlock",
            value: function unlock() {
              this._isLocked = false;
            }
          }, {
            key: "executeSilent",
            value: function executeSilent() {
              var _this3 = this;
              this._isSilent = true;
              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                args[_key] = arguments[_key];
              }
              return this.execute.apply(this, concat_default()(args).call(args, [this._isSilent])).then(function() {
                _this3._isSilent = false;
              });
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this4 = this;
              if (this._isLocked) {
                return promise_default().reject(rejectMessages.isLock);
              }
              for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
                args[_key2] = arguments[_key2];
              }
              var command2 = args[0];
              if ((0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.isString)(command2)) {
                command2 = factory_command.create.apply(factory_command, args);
              }
              return this._invokeExecution(command2).then(function(value) {
                _this4.clearRedoStack();
                return value;
              });
            }
          }, {
            key: "undo",
            value: function undo() {
              var command2 = this._undoStack.pop();
              var promise;
              var message = "";
              if (command2 && this._isLocked) {
                this.pushUndoStack(command2, true);
                command2 = null;
              }
              if (command2) {
                if (this.isEmptyUndoStack()) {
                  this._fireUndoStackChanged();
                }
                promise = this._invokeUndo(command2);
              } else {
                message = rejectMessages.undo;
                if (this._isLocked) {
                  var _context2;
                  message = concat_default()(_context2 = "".concat(message, " Because ")).call(_context2, rejectMessages.isLock);
                }
                promise = promise_default().reject(message);
              }
              return promise;
            }
          }, {
            key: "redo",
            value: function redo() {
              var command2 = this._redoStack.pop();
              var promise;
              var message = "";
              if (command2 && this._isLocked) {
                this.pushRedoStack(command2, true);
                command2 = null;
              }
              if (command2) {
                if (this.isEmptyRedoStack()) {
                  this._fireRedoStackChanged();
                }
                promise = this._invokeExecution(command2, true);
              } else {
                message = rejectMessages.redo;
                if (this._isLocked) {
                  var _context2;
                  message = concat_default()(_context2 = "".concat(message, " Because ")).call(_context2, rejectMessages.isLock);
                }
                promise = promise_default().reject(message);
              }
              return promise;
            }
          }, {
            key: "pushUndoStack",
            value: function pushUndoStack(command2, isSilent) {
              this._undoStack.push(command2);
              if (!isSilent) {
                this._fireUndoStackChanged();
              }
            }
          }, {
            key: "pushRedoStack",
            value: function pushRedoStack(command2, isSilent) {
              this._redoStack.push(command2);
              if (!isSilent) {
                this._fireRedoStackChanged();
              }
            }
          }, {
            key: "isEmptyRedoStack",
            value: function isEmptyRedoStack() {
              return this._redoStack.length === 0;
            }
          }, {
            key: "isEmptyUndoStack",
            value: function isEmptyUndoStack() {
              return this._undoStack.length === 0;
            }
          }, {
            key: "clearUndoStack",
            value: function clearUndoStack() {
              if (!this.isEmptyUndoStack()) {
                this._undoStack = [];
                this._fireUndoStackChanged();
              }
            }
          }, {
            key: "clearRedoStack",
            value: function clearRedoStack() {
              if (!this.isEmptyRedoStack()) {
                this._redoStack = [];
                this._fireRedoStackChanged();
              }
            }
          }]);
          return Invoker2;
        }();
        external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.CustomEvents.mixin(Invoker);
        var invoker = Invoker;
        var parse_float = __webpack_require__(5214);
        var parse_float_default = /* @__PURE__ */ __webpack_require__.n(parse_float);
        var mainContainer = function(_ref) {
          var _context2, _context22, _context3, _context4, _context5, _context6, _context7;
          var locale2 = _ref.locale, biImage = _ref.biImage, commonStyle = _ref.commonStyle, headerStyle = _ref.headerStyle, loadButtonStyle = _ref.loadButtonStyle, downloadButtonStyle = _ref.downloadButtonStyle, submenuStyle = _ref.submenuStyle;
          return concat_default()(_context2 = concat_default()(_context22 = concat_default()(_context3 = concat_default()(_context4 = concat_default()(_context5 = concat_default()(_context6 = concat_default()(_context7 = '\n    <div class="tui-image-editor-main-container" style="'.concat(commonStyle, '">\n        <div class="tui-image-editor-header" style="')).call(_context7, headerStyle, '">\n            <div class="tui-image-editor-header-logo">\n                <img src="')).call(_context6, biImage, '" />\n            </div>\n            <div class="tui-image-editor-header-buttons">\n                <div style="')).call(_context5, loadButtonStyle, '">\n                    ')).call(_context4, locale2.localize("Load"), '\n                    <input type="file" class="tui-image-editor-load-btn" />\n                </div>\n                <button class="tui-image-editor-download-btn" style="')).call(_context3, downloadButtonStyle, '">\n                    ')).call(_context22, locale2.localize("Download"), '\n                </button>\n            </div>\n        </div>\n        <div class="tui-image-editor-main">\n            <div class="tui-image-editor-submenu">\n                <div class="tui-image-editor-submenu-style" style="')).call(_context2, submenuStyle, '"></div>\n            </div>\n            <div class="tui-image-editor-wrap">\n                <div class="tui-image-editor-size-wrap">\n                    <div class="tui-image-editor-align-wrap">\n                        <div class="tui-image-editor"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n');
        };
        var controls = function(_ref) {
          var _context2, _context22, _context3, _context4, _context5;
          var locale2 = _ref.locale, biImage = _ref.biImage, loadButtonStyle = _ref.loadButtonStyle, downloadButtonStyle = _ref.downloadButtonStyle, menuBarPosition = _ref.menuBarPosition;
          return concat_default()(_context2 = concat_default()(_context22 = concat_default()(_context3 = concat_default()(_context4 = concat_default()(_context5 = '\n    <ul class="tui-image-editor-help-menu '.concat(getHelpMenuBarPosition(menuBarPosition), '"></ul>\n    <div class="tui-image-editor-controls">\n        <div class="tui-image-editor-controls-logo">\n            <img src="')).call(_context5, biImage, '" />\n        </div>\n        <ul class="tui-image-editor-menu"></ul>\n\n        <div class="tui-image-editor-controls-buttons">\n            <div style="')).call(_context4, loadButtonStyle, '">\n                ')).call(_context3, locale2.localize("Load"), '\n                <input type="file" class="tui-image-editor-load-btn" />\n            </div>\n            <button class="tui-image-editor-download-btn" style="')).call(_context22, downloadButtonStyle, '">\n                ')).call(_context2, locale2.localize("Download"), "\n            </button>\n        </div>\n    </div>\n");
        };
        var style = function(_ref) {
          var _context2, _context22, _context3, _context4, _context5, _context6, _context7, _context8, _context9, _context10, _context11, _context12, _context13, _context14, _context15, _context16, _context17, _context18, _context19, _context20, _context21, _context222, _context23, _context24, _context25, _context26, _context27, _context28, _context29;
          var subMenuLabelActive = _ref.subMenuLabelActive, subMenuLabelNormal = _ref.subMenuLabelNormal, subMenuRangeTitle = _ref.subMenuRangeTitle, submenuPartitionVertical = _ref.submenuPartitionVertical, submenuPartitionHorizontal = _ref.submenuPartitionHorizontal, submenuCheckbox = _ref.submenuCheckbox, submenuRangePointer = _ref.submenuRangePointer, submenuRangeValue = _ref.submenuRangeValue, submenuColorpickerTitle = _ref.submenuColorpickerTitle, submenuColorpickerButton = _ref.submenuColorpickerButton, submenuRangeBar = _ref.submenuRangeBar, submenuRangeSubbar = _ref.submenuRangeSubbar, submenuDisabledRangePointer = _ref.submenuDisabledRangePointer, submenuDisabledRangeBar = _ref.submenuDisabledRangeBar, submenuDisabledRangeSubbar = _ref.submenuDisabledRangeSubbar, submenuIconSize = _ref.submenuIconSize, menuIconSize = _ref.menuIconSize, biSize = _ref.biSize, menuIconStyle = _ref.menuIconStyle, submenuIconStyle = _ref.submenuIconStyle;
          return concat_default()(_context2 = concat_default()(_context22 = concat_default()(_context3 = concat_default()(_context4 = concat_default()(_context5 = concat_default()(_context6 = concat_default()(_context7 = concat_default()(_context8 = concat_default()(_context9 = concat_default()(_context10 = concat_default()(_context11 = concat_default()(_context12 = concat_default()(_context13 = concat_default()(_context14 = concat_default()(_context15 = concat_default()(_context16 = concat_default()(_context17 = concat_default()(_context18 = concat_default()(_context19 = concat_default()(_context20 = concat_default()(_context21 = concat_default()(_context222 = concat_default()(_context23 = concat_default()(_context24 = concat_default()(_context25 = concat_default()(_context26 = concat_default()(_context27 = concat_default()(_context28 = concat_default()(_context29 = '\n    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,\n    .tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,\n    .tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,\n    .tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,\n    .tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,\n    .tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype="icon-star-2"] label,\n    .tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,\n    .tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,\n    .tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,\n    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,\n    .tie-draw-line-select-button.line .tui-image-editor-button.line label,\n    .tie-draw-line-select-button.free .tui-image-editor-button.free label,\n    .tie-flip-button.flipX .tui-image-editor-button.flipX label,\n    .tie-flip-button.flipY .tui-image-editor-button.flipY label,\n    .tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,\n    .tie-crop-button .tui-image-editor-button.apply.active label,\n    .tie-crop-preset-button .tui-image-editor-button.preset.active label,\n    .tie-resize-button .tui-image-editor-button.apply.active label,\n    .tie-resize-preset-button .tui-image-editor-button.preset.active label,\n    .tie-shape-button.rect .tui-image-editor-button.rect label,\n    .tie-shape-button.circle .tui-image-editor-button.circle label,\n    .tie-shape-button.triangle .tui-image-editor-button.triangle label,\n    .tie-text-effect-button .tui-image-editor-button.active label,\n    .tie-text-align-button.tie-text-align-left .tui-image-editor-button.left label,\n    .tie-text-align-button.tie-text-align-center .tui-image-editor-button.center label,\n    .tie-text-align-button.tie-text-align-right .tui-image-editor-button.right label,\n    .tie-mask-apply.apply.active .tui-image-editor-button.apply label,\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,\n    .tui-image-editor-container .tui-image-editor-checkbox label > span {\n        '.concat(subMenuLabelActive, "\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,\n    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label,\n    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label > span {\n        ")).call(_context29, subMenuLabelNormal, "\n    }\n    .tui-image-editor-container .tui-image-editor-range-wrap label > span {\n        ")).call(_context28, subMenuRangeTitle, "\n    }\n    .tui-image-editor-container .tui-image-editor-partition > div {\n        ")).call(_context27, submenuPartitionVertical, "\n    }\n    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,\n    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {\n        ")).call(_context26, submenuPartitionHorizontal, "\n    }\n    .tui-image-editor-container .tui-image-editor-checkbox label > span:before {\n        ")).call(_context25, submenuCheckbox, "\n    }\n    .tui-image-editor-container .tui-image-editor-checkbox label > input:checked + span:before {\n        border: 0;\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {\n        ")).call(_context24, submenuRangePointer, "\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-bar {\n        ")).call(_context23, submenuRangeBar, "\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {\n        ")).call(_context222, submenuRangeSubbar, "\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {\n        ")).call(_context21, submenuDisabledRangePointer, "\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {\n        ")).call(_context20, submenuDisabledRangeSubbar, "\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {\n        ")).call(_context19, submenuDisabledRangeBar, "\n    }\n    .tui-image-editor-container .tui-image-editor-range-value {\n        ")).call(_context18, submenuRangeValue, "\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {\n        ")).call(_context17, submenuColorpickerTitle, "\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {\n        ")).call(_context16, submenuColorpickerButton, "\n    }\n    .tui-image-editor-container .svg_ic-menu {\n        ")).call(_context15, menuIconSize, "\n    }\n    .tui-image-editor-container .svg_ic-submenu {\n        ")).call(_context14, submenuIconSize, "\n    }\n    .tui-image-editor-container .tui-image-editor-controls-logo > img,\n    .tui-image-editor-container .tui-image-editor-header-logo > img {\n        ")).call(_context13, biSize, "\n    }\n    .tui-image-editor-menu use.normal.use-default,\n    .tui-image-editor-help-menu use.normal.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(_context12, menuIconStyle.normal.color, ";\n        stroke: ")).call(_context11, menuIconStyle.normal.color, ";\n    }\n    .tui-image-editor-menu use.active.use-default,\n    .tui-image-editor-help-menu use.active.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(_context10, menuIconStyle.active.color, ";\n        stroke: ")).call(_context9, menuIconStyle.active.color, ";\n    }\n    .tui-image-editor-menu use.hover.use-default,\n    .tui-image-editor-help-menu use.hover.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(_context8, menuIconStyle.hover.color, ";\n        stroke: ")).call(_context7, menuIconStyle.hover.color, ";\n    }\n    .tui-image-editor-menu use.disabled.use-default,\n    .tui-image-editor-help-menu use.disabled.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(_context6, menuIconStyle.disabled.color, ";\n        stroke: ")).call(_context5, menuIconStyle.disabled.color, ";\n    }\n    .tui-image-editor-submenu use.normal.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(_context4, submenuIconStyle.normal.color, ";\n        stroke: ")).call(_context3, submenuIconStyle.normal.color, ";\n    }\n    .tui-image-editor-submenu use.active.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(_context22, submenuIconStyle.active.color, ";\n        stroke: ")).call(_context2, submenuIconStyle.active.color, ";\n    }\n");
        };
        var standard = {
          "common.bi.image": "https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png",
          "common.bisize.width": "251px",
          "common.bisize.height": "21px",
          "common.backgroundImage": "none",
          "common.backgroundColor": "#1e1e1e",
          "common.border": "0px",
          "header.backgroundImage": "none",
          "header.backgroundColor": "transparent",
          "header.border": "0px",
          "loadButton.backgroundColor": "#fff",
          "loadButton.border": "1px solid #ddd",
          "loadButton.color": "#222",
          "loadButton.fontFamily": "'Noto Sans', sans-serif",
          "loadButton.fontSize": "12px",
          "downloadButton.backgroundColor": "#fdba3b",
          "downloadButton.border": "1px solid #fdba3b",
          "downloadButton.color": "#fff",
          "downloadButton.fontFamily": "'Noto Sans', sans-serif",
          "downloadButton.fontSize": "12px",
          "menu.normalIcon.color": "#8a8a8a",
          "menu.activeIcon.color": "#555555",
          "menu.disabledIcon.color": "#434343",
          "menu.hoverIcon.color": "#e9e9e9",
          "submenu.normalIcon.color": "#8a8a8a",
          "submenu.activeIcon.color": "#e9e9e9",
          "menu.iconSize.width": "24px",
          "menu.iconSize.height": "24px",
          "submenu.iconSize.width": "32px",
          "submenu.iconSize.height": "32px",
          "submenu.backgroundColor": "#1e1e1e",
          "submenu.partition.color": "#3c3c3c",
          "submenu.normalLabel.color": "#8a8a8a",
          "submenu.normalLabel.fontWeight": "lighter",
          "submenu.activeLabel.color": "#fff",
          "submenu.activeLabel.fontWeight": "lighter",
          "checkbox.border": "0px",
          "checkbox.backgroundColor": "#fff",
          "range.pointer.color": "#fff",
          "range.bar.color": "#666",
          "range.subbar.color": "#d1d1d1",
          "range.disabledPointer.color": "#414141",
          "range.disabledBar.color": "#282828",
          "range.disabledSubbar.color": "#414141",
          "range.value.color": "#fff",
          "range.value.fontWeight": "lighter",
          "range.value.fontSize": "11px",
          "range.value.border": "1px solid #353535",
          "range.value.backgroundColor": "#151515",
          "range.title.color": "#fff",
          "range.title.fontWeight": "lighter",
          "colorpicker.button.border": "1px solid #1e1e1e",
          "colorpicker.title.color": "#fff"
        };
        var svg_default = __webpack_require__(2534);
        var Theme = /* @__PURE__ */ function() {
          function Theme2(customTheme) {
            _classCallCheck(this, Theme2);
            this.styles = this._changeToObject((0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({}, standard, customTheme));
            styleLoad(this._styleMaker());
            this._loadDefaultSvgIcon();
          }
          _createClass(Theme2, [{
            key: "getStyle",
            value: function getStyle(type) {
              var result = null;
              var firstProperty = type.replace(/\..+$/, "");
              var option = this.styles[type];
              switch (type) {
                case "common.bi":
                  result = this.styles[type].image;
                  break;
                case "menu.icon":
                  result = {
                    active: this.styles["".concat(firstProperty, ".activeIcon")],
                    normal: this.styles["".concat(firstProperty, ".normalIcon")],
                    hover: this.styles["".concat(firstProperty, ".hoverIcon")],
                    disabled: this.styles["".concat(firstProperty, ".disabledIcon")]
                  };
                  break;
                case "submenu.icon":
                  result = {
                    active: this.styles["".concat(firstProperty, ".activeIcon")],
                    normal: this.styles["".concat(firstProperty, ".normalIcon")]
                  };
                  break;
                case "submenu.label":
                  result = {
                    active: this._makeCssText(this.styles["".concat(firstProperty, ".activeLabel")]),
                    normal: this._makeCssText(this.styles["".concat(firstProperty, ".normalLabel")])
                  };
                  break;
                case "submenu.partition":
                  result = {
                    vertical: this._makeCssText((0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({}, option, {
                      borderLeft: "1px solid ".concat(option.color)
                    })),
                    horizontal: this._makeCssText((0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({}, option, {
                      borderBottom: "1px solid ".concat(option.color)
                    }))
                  };
                  break;
                case "range.disabledPointer":
                case "range.disabledBar":
                case "range.disabledSubbar":
                case "range.pointer":
                case "range.bar":
                case "range.subbar":
                  option.backgroundColor = option.color;
                  result = this._makeCssText(option);
                  break;
                default:
                  result = this._makeCssText(option);
                  break;
              }
              return result;
            }
          }, {
            key: "_styleMaker",
            value: function _styleMaker() {
              var submenuLabelStyle = this.getStyle("submenu.label");
              var submenuPartitionStyle = this.getStyle("submenu.partition");
              return style({
                subMenuLabelActive: submenuLabelStyle.active,
                subMenuLabelNormal: submenuLabelStyle.normal,
                submenuPartitionVertical: submenuPartitionStyle.vertical,
                submenuPartitionHorizontal: submenuPartitionStyle.horizontal,
                biSize: this.getStyle("common.bisize"),
                subMenuRangeTitle: this.getStyle("range.title"),
                submenuRangePointer: this.getStyle("range.pointer"),
                submenuRangeBar: this.getStyle("range.bar"),
                submenuRangeSubbar: this.getStyle("range.subbar"),
                submenuDisabledRangePointer: this.getStyle("range.disabledPointer"),
                submenuDisabledRangeBar: this.getStyle("range.disabledBar"),
                submenuDisabledRangeSubbar: this.getStyle("range.disabledSubbar"),
                submenuRangeValue: this.getStyle("range.value"),
                submenuColorpickerTitle: this.getStyle("colorpicker.title"),
                submenuColorpickerButton: this.getStyle("colorpicker.button"),
                submenuCheckbox: this.getStyle("checkbox"),
                menuIconSize: this.getStyle("menu.iconSize"),
                submenuIconSize: this.getStyle("submenu.iconSize"),
                menuIconStyle: this.getStyle("menu.icon"),
                submenuIconStyle: this.getStyle("submenu.icon")
              });
            }
          }, {
            key: "_changeToObject",
            value: function _changeToObject(styleOptions) {
              var styleObject = {};
              (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.forEach)(styleOptions, function(value, key) {
                var keyExplode = key.match(/^(.+)\.([a-z]+)$/i);
                var _keyExplode = _slicedToArray(keyExplode, 3), property = _keyExplode[1], subProperty = _keyExplode[2];
                if (!styleObject[property]) {
                  styleObject[property] = {};
                }
                styleObject[property][subProperty] = value;
              });
              return styleObject;
            }
          }, {
            key: "_makeCssText",
            value: function _makeCssText(styleObject) {
              var _this = this;
              var converterStack = [];
              (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.forEach)(styleObject, function(value, key) {
                var _context2, _context22;
                if (index_of_default()(_context2 = ["backgroundImage"]).call(_context2, key) > -1 && value !== "none") {
                  value = "url(".concat(value, ")");
                }
                converterStack.push(concat_default()(_context22 = "".concat(_this._toUnderScore(key), ": ")).call(_context22, value));
              });
              return converterStack.join(";");
            }
          }, {
            key: "_toUnderScore",
            value: function _toUnderScore(targetString) {
              return targetString.replace(/([A-Z])/g, function($0, $1) {
                return "-".concat($1.toLowerCase());
              });
            }
          }, {
            key: "_loadDefaultSvgIcon",
            value: function _loadDefaultSvgIcon() {
              if (!document.getElementById("tui-image-editor-svg-default-icons")) {
                var parser = new DOMParser();
                var encodedURI = svg_default.replace(/data:image\/svg\+xml;base64,/, "");
                var dom = parser.parseFromString(atob(encodedURI), "text/xml");
                document.body.appendChild(dom.documentElement);
              }
            }
          }, {
            key: "_makeIconClassName",
            value: function _makeIconClassName(iconType, isSubmenu) {
              var iconStyleInfo = isSubmenu ? this.getStyle("submenu.icon") : this.getStyle("menu.icon");
              var _iconStyleInfo$iconTy = iconStyleInfo[iconType], path = _iconStyleInfo$iconTy.path, name = _iconStyleInfo$iconTy.name;
              return path && name ? iconType : "".concat(iconType, " use-default");
            }
          }, {
            key: "_makeSvgIconPrefix",
            value: function _makeSvgIconPrefix(iconType, isSubmenu) {
              var _context3;
              var iconStyleInfo = isSubmenu ? this.getStyle("submenu.icon") : this.getStyle("menu.icon");
              var _iconStyleInfo$iconTy2 = iconStyleInfo[iconType], path = _iconStyleInfo$iconTy2.path, name = _iconStyleInfo$iconTy2.name;
              return path && name ? concat_default()(_context3 = "".concat(path, "#")).call(_context3, name, "-") : "#";
            }
          }, {
            key: "_makeSvgItem",
            value: function _makeSvgItem(useIconTypes, menuName, isSubmenu) {
              var _this2 = this;
              return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.map)(useIconTypes, function(iconType) {
                var _context4, _context5;
                var svgIconPrefix = _this2._makeSvgIconPrefix(iconType, isSubmenu);
                var iconName = _this2._toUnderScore(menuName);
                var svgIconClassName = _this2._makeIconClassName(iconType, isSubmenu);
                return concat_default()(_context4 = concat_default()(_context5 = '<use xlink:href="'.concat(svgIconPrefix, "ic-")).call(_context5, iconName, '" class="')).call(_context4, svgIconClassName, '"/>');
              }).join("");
            }
          }, {
            key: "makeMenSvgIconSet",
            value: function makeMenSvgIconSet(useIconTypes, menuName) {
              var _context6;
              var isSubmenu = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
              return concat_default()(_context6 = '<svg class="svg_ic-'.concat(isSubmenu ? "submenu" : "menu", '">')).call(_context6, this._makeSvgItem(useIconTypes, menuName, isSubmenu), "</svg>");
            }
          }]);
          return Theme2;
        }();
        var theme = Theme;
        var construct = __webpack_require__(9146);
        var construct_default = /* @__PURE__ */ __webpack_require__.n(construct);
        var object_create = __webpack_require__(6623);
        var set_prototype_of = __webpack_require__(4230);
        function _setPrototypeOf(o, p) {
          _setPrototypeOf = set_prototype_of || function _setPrototypeOf2(o2, p2) {
            o2.__proto__ = p2;
            return o2;
          };
          return _setPrototypeOf(o, p);
        }
        function _inherits(subClass, superClass) {
          if (typeof superClass !== "function" && superClass !== null) {
            throw new TypeError("Super expression must either be null or a function");
          }
          subClass.prototype = object_create(superClass && superClass.prototype, {
            constructor: {
              value: subClass,
              writable: true,
              configurable: true
            }
          });
          if (superClass)
            _setPrototypeOf(subClass, superClass);
        }
        var iterator = __webpack_require__(3742);
        function _typeof(obj) {
          "@babel/helpers - typeof";
          if (typeof symbol === "function" && typeof iterator === "symbol") {
            _typeof = function _typeof2(obj2) {
              return typeof obj2;
            };
          } else {
            _typeof = function _typeof2(obj2) {
              return obj2 && typeof symbol === "function" && obj2.constructor === symbol && obj2 !== symbol.prototype ? "symbol" : typeof obj2;
            };
          }
          return _typeof(obj);
        }
        function _assertThisInitialized(self2) {
          if (self2 === void 0) {
            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          }
          return self2;
        }
        function _possibleConstructorReturn(self2, call) {
          if (call && (_typeof(call) === "object" || typeof call === "function")) {
            return call;
          } else if (call !== void 0) {
            throw new TypeError("Derived constructors may only return object or undefined");
          }
          return _assertThisInitialized(self2);
        }
        var get_prototype_of = __webpack_require__(9856);
        function _getPrototypeOf(o) {
          _getPrototypeOf = set_prototype_of ? get_prototype_of : function _getPrototypeOf2(o2) {
            return o2.__proto__ || get_prototype_of(o2);
          };
          return _getPrototypeOf(o);
        }
        var external_commonjs_tui_color_picker_commonjs2_tui_color_picker_amd_tui_color_picker_root_tui_colorPicker_ = __webpack_require__(4858);
        var external_commonjs_tui_color_picker_commonjs2_tui_color_picker_amd_tui_color_picker_root_tui_colorPicker_default = /* @__PURE__ */ __webpack_require__.n(external_commonjs_tui_color_picker_commonjs2_tui_color_picker_amd_tui_color_picker_root_tui_colorPicker_);
        var PICKER_COLOR = ["#000000", "#2a2a2a", "#545454", "#7e7e7e", "#a8a8a8", "#d2d2d2", "#ffffff", "", "#ff4040", "#ff6518", "#ffbb3b", "#03bd9e", "#00a9ff", "#515ce6", "#9e5fff", "#ff5583"];
        var Colorpicker = /* @__PURE__ */ function() {
          function Colorpicker2(colorpickerElement, _ref) {
            var _ref$defaultColor = _ref.defaultColor, defaultColor = _ref$defaultColor === void 0 ? "#7e7e7e" : _ref$defaultColor, _ref$toggleDirection = _ref.toggleDirection, toggleDirection = _ref$toggleDirection === void 0 ? "up" : _ref$toggleDirection, usageStatistics = _ref.usageStatistics;
            _classCallCheck(this, Colorpicker2);
            this.colorpickerElement = colorpickerElement;
            this.usageStatistics = usageStatistics;
            this._show = false;
            this._colorpickerElement = colorpickerElement;
            this._toggleDirection = toggleDirection;
            this._makePickerButtonElement(defaultColor);
            this._makePickerLayerElement(colorpickerElement, colorpickerElement.getAttribute("title"));
            this._color = defaultColor;
            this.picker = external_commonjs_tui_color_picker_commonjs2_tui_color_picker_amd_tui_color_picker_root_tui_colorPicker_default().create({
              container: this.pickerElement,
              preset: PICKER_COLOR,
              color: defaultColor,
              usageStatistics: this.usageStatistics
            });
            this._addEvent();
          }
          _createClass(Colorpicker2, [{
            key: "destroy",
            value: function destroy() {
              var _this = this;
              this._removeEvent();
              this.picker.destroy();
              this.colorpickerElement.innerHTML = "";
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), this, function(value, key) {
                _this[key] = null;
              });
            }
          }, {
            key: "color",
            get: function get() {
              return this._color;
            },
            set: function set(color) {
              this._color = color;
              this._changeColorElement(color);
            }
          }, {
            key: "_changeColorElement",
            value: function _changeColorElement(color) {
              if (color) {
                this.colorElement.classList.remove("transparent");
                this.colorElement.style.backgroundColor = color;
              } else {
                this.colorElement.style.backgroundColor = "#fff";
                this.colorElement.classList.add("transparent");
              }
            }
          }, {
            key: "_makePickerButtonElement",
            value: function _makePickerButtonElement(defaultColor) {
              this.colorpickerElement.classList.add("tui-image-editor-button");
              this.colorElement = document.createElement("div");
              this.colorElement.className = "color-picker-value";
              if (defaultColor) {
                this.colorElement.style.backgroundColor = defaultColor;
              } else {
                this.colorElement.classList.add("transparent");
              }
            }
          }, {
            key: "_makePickerLayerElement",
            value: function _makePickerLayerElement(colorpickerElement, title) {
              var label = document.createElement("label");
              var triangle = document.createElement("div");
              this.pickerControl = document.createElement("div");
              this.pickerControl.className = "color-picker-control";
              this.pickerElement = document.createElement("div");
              this.pickerElement.className = "color-picker";
              label.innerHTML = title;
              triangle.className = "triangle";
              this.pickerControl.appendChild(this.pickerElement);
              this.pickerControl.appendChild(triangle);
              colorpickerElement.appendChild(this.pickerControl);
              colorpickerElement.appendChild(this.colorElement);
              colorpickerElement.appendChild(label);
            }
          }, {
            key: "_addEvent",
            value: function _addEvent() {
              var _this2 = this, _context2;
              this.picker.on("selectColor", function(value) {
                _this2._changeColorElement(value.color);
                _this2._color = value.color;
                _this2.fire("change", value.color);
              });
              this.eventHandler = {
                pickerToggle: bind_default()(_context2 = this._pickerToggleEventHandler).call(_context2, this),
                pickerHide: function pickerHide() {
                  return _this2.hide();
                }
              };
              this.colorpickerElement.addEventListener("click", this.eventHandler.pickerToggle);
              document.body.addEventListener("click", this.eventHandler.pickerHide);
            }
          }, {
            key: "_removeEvent",
            value: function _removeEvent() {
              this.colorpickerElement.removeEventListener("click", this.eventHandler.pickerToggle);
              document.body.removeEventListener("click", this.eventHandler.pickerHide);
              this.picker.off();
            }
          }, {
            key: "_pickerToggleEventHandler",
            value: function _pickerToggleEventHandler(event) {
              var target = event.target;
              var isInPickerControl = target && this._isElementInColorPickerControl(target);
              if (!isInPickerControl || isInPickerControl && this._isPaletteButton(target)) {
                this._show = !this._show;
                this.pickerControl.style.display = this._show ? "block" : "none";
                this._setPickerControlPosition();
                this.fire("changeShow", this);
              }
              event.stopPropagation();
            }
          }, {
            key: "_isPaletteButton",
            value: function _isPaletteButton(target) {
              return target.className === "tui-colorpicker-palette-button";
            }
          }, {
            key: "_isElementInColorPickerControl",
            value: function _isElementInColorPickerControl(element) {
              var parentNode = element;
              while (parentNode !== document.body) {
                if (!parentNode) {
                  break;
                }
                if (parentNode === this.pickerControl) {
                  return true;
                }
                parentNode = parentNode.parentNode;
              }
              return false;
            }
          }, {
            key: "hide",
            value: function hide() {
              this._show = false;
              this.pickerControl.style.display = "none";
            }
          }, {
            key: "_setPickerControlPosition",
            value: function _setPickerControlPosition() {
              var controlStyle = this.pickerControl.style;
              var halfPickerWidth = this._colorpickerElement.clientWidth / 2 + 2;
              var left = this.pickerControl.offsetWidth / 2 - halfPickerWidth;
              var top = (this.pickerControl.offsetHeight + 10) * -1;
              if (this._toggleDirection === "down") {
                top = 30;
              }
              controlStyle.top = "".concat(top, "px");
              controlStyle.left = "-".concat(left, "px");
            }
          }]);
          return Colorpicker2;
        }();
        external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().CustomEvents.mixin(Colorpicker);
        var colorpicker = Colorpicker;
        var INPUT_FILTER_REGEXP = /(-?)([0-9]*)[^0-9]*([0-9]*)/g;
        var Range = /* @__PURE__ */ function() {
          function Range2(rangeElements) {
            var _context2, _context22, _context3, _context4, _context5, _context6, _context7;
            var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
            _classCallCheck(this, Range2);
            this._value = options.value || 0;
            this.rangeElement = rangeElements.slider;
            this.rangeInputElement = rangeElements.input;
            this._drawRangeElement();
            this.rangeWidth = this._getRangeWidth();
            this._min = options.min || 0;
            this._max = options.max || 100;
            this._useDecimal = options.useDecimal;
            this._absMax = this._min * -1 + this._max;
            this.realTimeEvent = options.realTimeEvent || false;
            this.eventHandler = {
              startChangingSlide: bind_default()(_context2 = this._startChangingSlide).call(_context2, this),
              stopChangingSlide: bind_default()(_context22 = this._stopChangingSlide).call(_context22, this),
              changeSlide: bind_default()(_context3 = this._changeSlide).call(_context3, this),
              changeSlideFinally: bind_default()(_context4 = this._changeSlideFinally).call(_context4, this),
              changeInput: bind_default()(_context5 = this._changeValueWithInput).call(_context5, this, false),
              changeInputFinally: bind_default()(_context6 = this._changeValueWithInput).call(_context6, this, true),
              changeInputWithArrow: bind_default()(_context7 = this._changeValueWithInputKeyEvent).call(_context7, this)
            };
            this._addClickEvent();
            this._addDragEvent();
            this._addInputEvent();
            this.value = options.value;
            this.trigger("change");
          }
          _createClass(Range2, [{
            key: "destroy",
            value: function destroy() {
              var _this = this;
              this._removeClickEvent();
              this._removeDragEvent();
              this._removeInputEvent();
              this.rangeElement.innerHTML = "";
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), this, function(value, key) {
                _this[key] = null;
              });
            }
          }, {
            key: "max",
            get: function get() {
              return this._max;
            },
            set: function set(maxValue) {
              this._max = maxValue;
              this._absMax = this._min * -1 + this._max;
              this.value = this._value;
            }
          }, {
            key: "min",
            get: function get() {
              return this._min;
            },
            set: function set(minValue) {
              this._min = minValue;
              this.max = this._max;
            }
          }, {
            key: "value",
            get: function get() {
              return this._value;
            },
            set: function set(value) {
              value = this._useDecimal ? value : toInteger(value);
              var absValue = value - this._min;
              var leftPosition = absValue * this.rangeWidth / this._absMax;
              if (this.rangeWidth < leftPosition) {
                leftPosition = this.rangeWidth;
              }
              this.pointer.style.left = "".concat(leftPosition, "px");
              this.subbar.style.right = "".concat(this.rangeWidth - leftPosition, "px");
              this._value = value;
              if (this.rangeInputElement) {
                this.rangeInputElement.value = value;
              }
            }
          }, {
            key: "trigger",
            value: function trigger(type) {
              this.fire(type, this._value);
            }
          }, {
            key: "_getRangeWidth",
            value: function _getRangeWidth() {
              var getElementWidth = function getElementWidth2(element) {
                return toInteger(window.getComputedStyle(element, null).width);
              };
              return getElementWidth(this.rangeElement) - getElementWidth(this.pointer);
            }
          }, {
            key: "_drawRangeElement",
            value: function _drawRangeElement() {
              this.rangeElement.classList.add("tui-image-editor-range");
              this.bar = document.createElement("div");
              this.bar.className = "tui-image-editor-virtual-range-bar";
              this.subbar = document.createElement("div");
              this.subbar.className = "tui-image-editor-virtual-range-subbar";
              this.pointer = document.createElement("div");
              this.pointer.className = "tui-image-editor-virtual-range-pointer";
              this.bar.appendChild(this.subbar);
              this.bar.appendChild(this.pointer);
              this.rangeElement.appendChild(this.bar);
            }
          }, {
            key: "_addInputEvent",
            value: function _addInputEvent() {
              if (this.rangeInputElement) {
                this.rangeInputElement.addEventListener("keydown", this.eventHandler.changeInputWithArrow);
                this.rangeInputElement.addEventListener("keyup", this.eventHandler.changeInput);
                this.rangeInputElement.addEventListener("blur", this.eventHandler.changeInputFinally);
              }
            }
          }, {
            key: "_removeInputEvent",
            value: function _removeInputEvent() {
              if (this.rangeInputElement) {
                this.rangeInputElement.removeEventListener("keydown", this.eventHandler.changeInputWithArrow);
                this.rangeInputElement.removeEventListener("keyup", this.eventHandler.changeInput);
                this.rangeInputElement.removeEventListener("blur", this.eventHandler.changeInputFinally);
              }
            }
          }, {
            key: "_changeValueWithInputKeyEvent",
            value: function _changeValueWithInputKeyEvent(event) {
              var _context8;
              var keyCode = event.keyCode, target = event.target;
              if (index_of_default()(_context8 = [keyCodes.ARROW_UP, keyCodes.ARROW_DOWN]).call(_context8, keyCode) < 0) {
                return;
              }
              var value = Number(target.value);
              value = this._valueUpDownForKeyEvent(value, keyCode);
              var unChanged = value < this._min || value > this._max;
              if (!unChanged) {
                var clampValue = clamp(value, this._min, this.max);
                this.value = clampValue;
                this.fire("change", clampValue, false);
              }
            }
          }, {
            key: "_valueUpDownForKeyEvent",
            value: function _valueUpDownForKeyEvent(value, keyCode) {
              var step = this._useDecimal ? 0.1 : 1;
              if (keyCode === keyCodes.ARROW_UP) {
                value += step;
              } else if (keyCode === keyCodes.ARROW_DOWN) {
                value -= step;
              }
              return value;
            }
          }, {
            key: "_changeValueWithInput",
            value: function _changeValueWithInput(isLast, event) {
              var _context9;
              var keyCode = event.keyCode, target = event.target;
              if (index_of_default()(_context9 = [keyCodes.ARROW_UP, keyCodes.ARROW_DOWN]).call(_context9, keyCode) >= 0) {
                return;
              }
              var stringValue = this._filterForInputText(target.value);
              var waitForChange = !stringValue || isNaN(stringValue);
              target.value = stringValue;
              if (!waitForChange) {
                var value = this._useDecimal ? Number(stringValue) : toInteger(stringValue);
                value = clamp(value, this._min, this.max);
                this.value = value;
                this.fire("change", value, isLast);
              }
            }
          }, {
            key: "_addClickEvent",
            value: function _addClickEvent() {
              this.rangeElement.addEventListener("click", this.eventHandler.changeSlideFinally);
            }
          }, {
            key: "_removeClickEvent",
            value: function _removeClickEvent() {
              this.rangeElement.removeEventListener("click", this.eventHandler.changeSlideFinally);
            }
          }, {
            key: "_addDragEvent",
            value: function _addDragEvent() {
              this.pointer.addEventListener("mousedown", this.eventHandler.startChangingSlide);
            }
          }, {
            key: "_removeDragEvent",
            value: function _removeDragEvent() {
              this.pointer.removeEventListener("mousedown", this.eventHandler.startChangingSlide);
            }
          }, {
            key: "_changeSlide",
            value: function _changeSlide(event) {
              var changePosition = event.screenX;
              var diffPosition = changePosition - this.firstPosition;
              var touchPx = this.firstLeft + diffPosition;
              touchPx = touchPx > this.rangeWidth ? this.rangeWidth : touchPx;
              touchPx = touchPx < 0 ? 0 : touchPx;
              this.pointer.style.left = "".concat(touchPx, "px");
              this.subbar.style.right = "".concat(this.rangeWidth - touchPx, "px");
              var ratio = touchPx / this.rangeWidth;
              var resultValue = this._absMax * ratio + this._min;
              var value = this._useDecimal ? resultValue : toInteger(resultValue);
              var isValueChanged = this.value !== value;
              if (isValueChanged) {
                this.value = value;
                if (this.realTimeEvent) {
                  this.fire("change", this._value, false);
                }
              }
            }
          }, {
            key: "_changeSlideFinally",
            value: function _changeSlideFinally(event) {
              event.stopPropagation();
              if (event.target.className !== "tui-image-editor-range") {
                return;
              }
              var touchPx = event.offsetX;
              var ratio = touchPx / this.rangeWidth;
              var value = this._absMax * ratio + this._min;
              this.pointer.style.left = "".concat(ratio * this.rangeWidth, "px");
              this.subbar.style.right = "".concat((1 - ratio) * this.rangeWidth, "px");
              this.value = value;
              this.fire("change", value, true);
            }
          }, {
            key: "_startChangingSlide",
            value: function _startChangingSlide(event) {
              this.firstPosition = event.screenX;
              this.firstLeft = toInteger(this.pointer.style.left) || 0;
              document.addEventListener("mousemove", this.eventHandler.changeSlide);
              document.addEventListener("mouseup", this.eventHandler.stopChangingSlide);
            }
          }, {
            key: "_stopChangingSlide",
            value: function _stopChangingSlide() {
              this.fire("change", this._value, true);
              document.removeEventListener("mousemove", this.eventHandler.changeSlide);
              document.removeEventListener("mouseup", this.eventHandler.stopChangingSlide);
            }
          }, {
            key: "_filterForInputText",
            value: function _filterForInputText(inputValue) {
              return inputValue.replace(INPUT_FILTER_REGEXP, "$1$2$3");
            }
          }]);
          return Range2;
        }();
        external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().CustomEvents.mixin(Range);
        var range = Range;
        var Submenu = /* @__PURE__ */ function() {
          function Submenu2(subMenuElement, _ref) {
            var locale2 = _ref.locale, name = _ref.name, makeSvgIcon = _ref.makeSvgIcon, menuBarPosition = _ref.menuBarPosition, templateHtml = _ref.templateHtml, usageStatistics = _ref.usageStatistics;
            _classCallCheck(this, Submenu2);
            this.subMenuElement = subMenuElement;
            this.menuBarPosition = menuBarPosition;
            this.toggleDirection = menuBarPosition === "top" ? "down" : "up";
            this.colorPickerControls = [];
            this.usageStatistics = usageStatistics;
            this.eventHandler = {};
            this._makeSubMenuElement({
              locale: locale2,
              name,
              makeSvgIcon,
              templateHtml
            });
          }
          _createClass(Submenu2, [{
            key: "selector",
            value: function selector(selectName) {
              return this.subMenuElement.querySelector(selectName);
            }
          }, {
            key: "colorPickerChangeShow",
            value: function colorPickerChangeShow(occurredControl) {
              var _context2;
              for_each_default()(_context2 = this.colorPickerControls).call(_context2, function(pickerControl) {
                if (occurredControl !== pickerControl) {
                  pickerControl.hide();
                }
              });
            }
          }, {
            key: "getButtonType",
            value: function getButtonType(button, buttonNames) {
              return button.className.match(RegExp("(".concat(buttonNames.join("|"), ")")))[0];
            }
          }, {
            key: "changeClass",
            value: function changeClass(target, removeClass, addClass) {
              target.classList.remove(removeClass);
              target.classList.add(addClass);
            }
          }, {
            key: "changeStandbyMode",
            value: function changeStandbyMode() {
            }
          }, {
            key: "changeStartMode",
            value: function changeStartMode() {
            }
          }, {
            key: "_makeSubMenuElement",
            value: function _makeSubMenuElement(_ref2) {
              var locale2 = _ref2.locale, name = _ref2.name, iconStyle = _ref2.iconStyle, makeSvgIcon = _ref2.makeSvgIcon, templateHtml = _ref2.templateHtml;
              var iconSubMenu = document.createElement("div");
              iconSubMenu.className = "tui-image-editor-menu-".concat(name);
              iconSubMenu.innerHTML = templateHtml({
                locale: locale2,
                iconStyle,
                makeSvgIcon
              });
              this.subMenuElement.appendChild(iconSubMenu);
            }
          }, {
            key: "_onStartEditingInputBox",
            value: function _onStartEditingInputBox() {
              this.fire(eventNames.INPUT_BOX_EDITING_STARTED);
            }
          }, {
            key: "_onStopEditingInputBox",
            value: function _onStopEditingInputBox() {
              this.fire(eventNames.INPUT_BOX_EDITING_STOPPED);
            }
          }]);
          return Submenu2;
        }();
        external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.CustomEvents.mixin(Submenu);
        var submenuBase = Submenu;
        var shape = function(_ref) {
          var _context2, _context22, _context3, _context4, _context5, _context6, _context7, _context8;
          var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon;
          return concat_default()(_context2 = concat_default()(_context22 = concat_default()(_context3 = concat_default()(_context4 = concat_default()(_context5 = concat_default()(_context6 = concat_default()(_context7 = concat_default()(_context8 = '\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-shape-button">\n            <div class="tui-image-editor-button rect">\n                <div>\n                    '.concat(makeSvgIcon(["normal", "active"], "shape-rectangle", true), "\n                </div>\n                <label> ")).call(_context8, locale2.localize("Rectangle"), ' </label>\n            </div>\n            <div class="tui-image-editor-button circle">\n                <div>\n                    ')).call(_context7, makeSvgIcon(["normal", "active"], "shape-circle", true), "\n                </div>\n                <label> ")).call(_context6, locale2.localize("Circle"), ' </label>\n            </div>\n            <div class="tui-image-editor-button triangle">\n                <div>\n                    ')).call(_context5, makeSvgIcon(["normal", "active"], "shape-triangle", true), "\n                </div>\n                <label> ")).call(_context4, locale2.localize("Triangle"), ' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tie-shape-color-button">\n            <div class="tie-color-fill" title="')).call(_context3, locale2.localize("Fill"), '"></div>\n            <div class="tie-color-stroke" title="')).call(_context22, locale2.localize("Stroke"), '"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">')).call(_context2, locale2.localize("Stroke"), '</label>\n            <div class="tie-stroke-range"></div>\n            <input class="tie-stroke-range-value tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n');
        };
        function _createSuper(Derived) {
          var hasNativeReflectConstruct = _isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function _isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var SHAPE_DEFAULT_OPTION = {
          stroke: "#ffbb3b",
          fill: "",
          strokeWidth: 3
        };
        var Shape = /* @__PURE__ */ function(_Submenu) {
          _inherits(Shape2, _Submenu);
          var _super = _createSuper(Shape2);
          function Shape2(subMenuElement, _ref) {
            var _this;
            var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon, menuBarPosition = _ref.menuBarPosition, usageStatistics = _ref.usageStatistics;
            _classCallCheck(this, Shape2);
            _this = _super.call(this, subMenuElement, {
              locale: locale2,
              name: "shape",
              makeSvgIcon,
              menuBarPosition,
              templateHtml: shape,
              usageStatistics
            });
            _this.type = null;
            _this.options = SHAPE_DEFAULT_OPTION;
            _this._els = {
              shapeSelectButton: _this.selector(".tie-shape-button"),
              shapeColorButton: _this.selector(".tie-shape-color-button"),
              strokeRange: new range({
                slider: _this.selector(".tie-stroke-range"),
                input: _this.selector(".tie-stroke-range-value")
              }, defaultShapeStrokeValues),
              fillColorpicker: new colorpicker(_this.selector(".tie-color-fill"), {
                defaultColor: "",
                toggleDirection: _this.toggleDirection,
                usageStatistics: _this.usageStatistics
              }),
              strokeColorpicker: new colorpicker(_this.selector(".tie-color-stroke"), {
                defaultColor: "#ffbb3b",
                toggleDirection: _this.toggleDirection,
                usageStatistics: _this.usageStatistics
              })
            };
            _this.colorPickerControls.push(_this._els.fillColorpicker);
            _this.colorPickerControls.push(_this._els.strokeColorpicker);
            _this.colorPickerInputBoxes = [];
            _this.colorPickerInputBoxes.push(_this._els.fillColorpicker.colorpickerElement.querySelector(selectorNames.COLOR_PICKER_INPUT_BOX));
            _this.colorPickerInputBoxes.push(_this._els.strokeColorpicker.colorpickerElement.querySelector(selectorNames.COLOR_PICKER_INPUT_BOX));
            return _this;
          }
          _createClass(Shape2, [{
            key: "destroy",
            value: function destroy() {
              this._removeEvent();
              this._els.strokeRange.destroy();
              this._els.fillColorpicker.destroy();
              this._els.strokeColorpicker.destroy();
              assignmentForDestroy(this);
            }
          }, {
            key: "addEvent",
            value: function addEvent(actions2) {
              var _context2, _context22, _context3, _context4, _context5, _context6, _this2 = this;
              this.eventHandler.shapeTypeSelected = bind_default()(_context2 = this._changeShapeHandler).call(_context2, this);
              this.actions = actions2;
              this._els.shapeSelectButton.addEventListener("click", this.eventHandler.shapeTypeSelected);
              this._els.strokeRange.on("change", bind_default()(_context22 = this._changeStrokeRangeHandler).call(_context22, this));
              this._els.fillColorpicker.on("change", bind_default()(_context3 = this._changeFillColorHandler).call(_context3, this));
              this._els.strokeColorpicker.on("change", bind_default()(_context4 = this._changeStrokeColorHandler).call(_context4, this));
              this._els.fillColorpicker.on("changeShow", bind_default()(_context5 = this.colorPickerChangeShow).call(_context5, this));
              this._els.strokeColorpicker.on("changeShow", bind_default()(_context6 = this.colorPickerChangeShow).call(_context6, this));
              external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().forEachArray(this.colorPickerInputBoxes, function(inputBox) {
                var _context7, _context8;
                inputBox.addEventListener(eventNames.FOCUS, bind_default()(_context7 = _this2._onStartEditingInputBox).call(_context7, _this2));
                inputBox.addEventListener(eventNames.BLUR, bind_default()(_context8 = _this2._onStopEditingInputBox).call(_context8, _this2));
              }, this);
            }
          }, {
            key: "_removeEvent",
            value: function _removeEvent() {
              var _this3 = this;
              this._els.shapeSelectButton.removeEventListener("click", this.eventHandler.shapeTypeSelected);
              this._els.strokeRange.off();
              this._els.fillColorpicker.off();
              this._els.strokeColorpicker.off();
              external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().forEachArray(this.colorPickerInputBoxes, function(inputBox) {
                var _context9, _context10;
                inputBox.removeEventListener(eventNames.FOCUS, bind_default()(_context9 = _this3._onStartEditingInputBox).call(_context9, _this3));
                inputBox.removeEventListener(eventNames.BLUR, bind_default()(_context10 = _this3._onStopEditingInputBox).call(_context10, _this3));
              }, this);
            }
          }, {
            key: "setShapeStatus",
            value: function setShapeStatus(_ref2) {
              var strokeWidth = _ref2.strokeWidth, strokeColor = _ref2.strokeColor, fillColor = _ref2.fillColor;
              this._els.strokeRange.value = strokeWidth;
              this._els.strokeColorpicker.color = strokeColor;
              this._els.fillColorpicker.color = fillColor;
              this.options.stroke = strokeColor;
              this.options.fill = fillColor;
              this.options.strokeWidth = strokeWidth;
              this.actions.setDrawingShape(this.type, {
                strokeWidth
              });
            }
          }, {
            key: "changeStartMode",
            value: function changeStartMode() {
              this.actions.stopDrawingMode();
            }
          }, {
            key: "changeStandbyMode",
            value: function changeStandbyMode() {
              this.type = null;
              this.actions.changeSelectableAll(true);
              this._els.shapeSelectButton.classList.remove("circle");
              this._els.shapeSelectButton.classList.remove("triangle");
              this._els.shapeSelectButton.classList.remove("rect");
            }
          }, {
            key: "setMaxStrokeValue",
            value: function setMaxStrokeValue(maxValue) {
              var strokeMaxValue = maxValue;
              if (strokeMaxValue <= 0) {
                strokeMaxValue = defaultShapeStrokeValues.max;
              }
              this._els.strokeRange.max = strokeMaxValue;
            }
          }, {
            key: "setStrokeValue",
            value: function setStrokeValue(value) {
              this._els.strokeRange.value = value;
              this._els.strokeRange.trigger("change");
            }
          }, {
            key: "getStrokeValue",
            value: function getStrokeValue() {
              return this._els.strokeRange.value;
            }
          }, {
            key: "_changeShapeHandler",
            value: function _changeShapeHandler(event) {
              var button = event.target.closest(".tui-image-editor-button");
              if (button) {
                this.actions.stopDrawingMode();
                this.actions.discardSelection();
                var shapeType = this.getButtonType(button, ["circle", "triangle", "rect"]);
                if (this.type === shapeType) {
                  this.changeStandbyMode();
                  return;
                }
                this.changeStandbyMode();
                this.type = shapeType;
                event.currentTarget.classList.add(shapeType);
                this.actions.changeSelectableAll(false);
                this.actions.modeChange("shape");
              }
            }
          }, {
            key: "_changeStrokeRangeHandler",
            value: function _changeStrokeRangeHandler(value, isLast) {
              this.options.strokeWidth = toInteger(value);
              this.actions.changeShape({
                strokeWidth: value
              }, !isLast);
              this.actions.setDrawingShape(this.type, this.options);
            }
          }, {
            key: "_changeFillColorHandler",
            value: function _changeFillColorHandler(color) {
              color = color || "transparent";
              this.options.fill = color;
              this.actions.changeShape({
                fill: color
              });
            }
          }, {
            key: "_changeStrokeColorHandler",
            value: function _changeStrokeColorHandler(color) {
              color = color || "transparent";
              this.options.stroke = color;
              this.actions.changeShape({
                stroke: color
              });
            }
          }]);
          return Shape2;
        }(submenuBase);
        var ui_shape = Shape;
        var crop = function(_ref) {
          var _context2, _context22, _context3, _context4, _context5, _context6, _context7, _context8, _context9, _context10, _context11, _context12, _context13, _context14, _context15, _context16, _context17;
          var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon;
          return concat_default()(_context2 = concat_default()(_context22 = concat_default()(_context3 = concat_default()(_context4 = concat_default()(_context5 = concat_default()(_context6 = concat_default()(_context7 = concat_default()(_context8 = concat_default()(_context9 = concat_default()(_context10 = concat_default()(_context11 = concat_default()(_context12 = concat_default()(_context13 = concat_default()(_context14 = concat_default()(_context15 = concat_default()(_context16 = concat_default()(_context17 = '\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-crop-preset-button">\n            <div class="tui-image-editor-button preset preset-none active">\n                <div>\n                    '.concat(makeSvgIcon(["normal", "active"], "shape-rectangle", true), "\n                </div>\n                <label> ")).call(_context17, locale2.localize("Custom"), ' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-square">\n                <div>\n                    ')).call(_context16, makeSvgIcon(["normal", "active"], "crop", true), "\n                </div>\n                <label> ")).call(_context15, locale2.localize("Square"), ' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-3-2">\n                <div>\n                    ')).call(_context14, makeSvgIcon(["normal", "active"], "crop", true), "\n                </div>\n                <label> ")).call(_context13, locale2.localize("3:2"), ' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-4-3">\n                <div>\n                    ')).call(_context12, makeSvgIcon(["normal", "active"], "crop", true), "\n                </div>\n                <label> ")).call(_context11, locale2.localize("4:3"), ' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-5-4">\n                <div>\n                    ')).call(_context10, makeSvgIcon(["normal", "active"], "crop", true), "\n                </div>\n                <label> ")).call(_context9, locale2.localize("5:4"), ' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-7-5">\n                <div>\n                    ')).call(_context8, makeSvgIcon(["normal", "active"], "crop", true), "\n                </div>\n                <label> ")).call(_context7, locale2.localize("7:5"), ' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-16-9">\n                <div>\n                    ')).call(_context6, makeSvgIcon(["normal", "active"], "crop", true), "\n                </div>\n                <label> ")).call(_context5, locale2.localize("16:9"), ' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline">\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tie-crop-button action">\n            <div class="tui-image-editor-button apply">\n                ')).call(_context4, makeSvgIcon(["normal", "active"], "apply"), "\n                <label>\n                    ")).call(_context3, locale2.localize("Apply"), '\n                </label>\n            </div>\n            <div class="tui-image-editor-button cancel">\n                ')).call(_context22, makeSvgIcon(["normal", "active"], "cancel"), "\n                <label>\n                    ")).call(_context2, locale2.localize("Cancel"), "\n                </label>\n            </div>\n        </li>\n    </ul>\n");
        };
        function crop_createSuper(Derived) {
          var hasNativeReflectConstruct = crop_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function crop_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var Crop = /* @__PURE__ */ function(_Submenu) {
          _inherits(Crop2, _Submenu);
          var _super = crop_createSuper(Crop2);
          function Crop2(subMenuElement, _ref) {
            var _this;
            var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon, menuBarPosition = _ref.menuBarPosition, usageStatistics = _ref.usageStatistics;
            _classCallCheck(this, Crop2);
            _this = _super.call(this, subMenuElement, {
              locale: locale2,
              name: "crop",
              makeSvgIcon,
              menuBarPosition,
              templateHtml: crop,
              usageStatistics
            });
            _this.status = "active";
            _this._els = {
              apply: _this.selector(".tie-crop-button .apply"),
              cancel: _this.selector(".tie-crop-button .cancel"),
              preset: _this.selector(".tie-crop-preset-button")
            };
            _this.defaultPresetButton = _this._els.preset.querySelector(".preset-none");
            return _this;
          }
          _createClass(Crop2, [{
            key: "destroy",
            value: function destroy() {
              this._removeEvent();
              assignmentForDestroy(this);
            }
          }, {
            key: "addEvent",
            value: function addEvent(actions2) {
              var _context2, _context22, _context3;
              var apply = bind_default()(_context2 = this._applyEventHandler).call(_context2, this);
              var cancel = bind_default()(_context22 = this._cancelEventHandler).call(_context22, this);
              var cropzonePreset = bind_default()(_context3 = this._cropzonePresetEventHandler).call(_context3, this);
              this.eventHandler = {
                apply,
                cancel,
                cropzonePreset
              };
              this.actions = actions2;
              this._els.apply.addEventListener("click", apply);
              this._els.cancel.addEventListener("click", cancel);
              this._els.preset.addEventListener("click", cropzonePreset);
            }
          }, {
            key: "_removeEvent",
            value: function _removeEvent() {
              this._els.apply.removeEventListener("click", this.eventHandler.apply);
              this._els.cancel.removeEventListener("click", this.eventHandler.cancel);
              this._els.preset.removeEventListener("click", this.eventHandler.cropzonePreset);
            }
          }, {
            key: "_applyEventHandler",
            value: function _applyEventHandler() {
              this.actions.crop();
              this._els.apply.classList.remove("active");
            }
          }, {
            key: "_cancelEventHandler",
            value: function _cancelEventHandler() {
              this.actions.cancel();
              this._els.apply.classList.remove("active");
            }
          }, {
            key: "_cropzonePresetEventHandler",
            value: function _cropzonePresetEventHandler(event) {
              var button = event.target.closest(".tui-image-editor-button.preset");
              if (button) {
                var _button$className$mat = button.className.match(/preset-[^\s]+/), _button$className$mat2 = _slicedToArray(_button$className$mat, 1), presetType = _button$className$mat2[0];
                this._setPresetButtonActive(button);
                this.actions.preset(presetType);
              }
            }
          }, {
            key: "changeStartMode",
            value: function changeStartMode() {
              this.actions.modeChange("crop");
            }
          }, {
            key: "changeStandbyMode",
            value: function changeStandbyMode() {
              this.actions.stopDrawingMode();
              this._setPresetButtonActive();
            }
          }, {
            key: "changeApplyButtonStatus",
            value: function changeApplyButtonStatus(enableStatus) {
              if (enableStatus) {
                this._els.apply.classList.add("active");
              } else {
                this._els.apply.classList.remove("active");
              }
            }
          }, {
            key: "_setPresetButtonActive",
            value: function _setPresetButtonActive() {
              var button = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.defaultPresetButton;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), slice_default()([]).call(this._els.preset.querySelectorAll(".preset")), function(presetButton) {
                presetButton.classList.remove("active");
              });
              if (button) {
                button.classList.add("active");
              }
            }
          }]);
          return Crop2;
        }(submenuBase);
        var ui_crop = Crop;
        var resize = function(_ref) {
          var _context2, _context22, _context3, _context4, _context5, _context6;
          var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon;
          return concat_default()(_context2 = concat_default()(_context22 = concat_default()(_context3 = concat_default()(_context4 = concat_default()(_context5 = concat_default()(_context6 = '\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-range-wrap tui-image-editor-newline">\n                <label class="range">'.concat(locale2.localize("Width"), '&nbsp;</label>\n                <div class="tie-width-range"></div>\n                <input class="tie-width-range-value tui-image-editor-range-value" value="0" /> <label>px</label>\n                <div class="tui-image-editor-partition tui-image-editor-newline"></div>\n                <label class="range">')).call(_context6, locale2.localize("Height"), '</label>\n                <div class="tie-height-range"></div>\n                <input class="tie-height-range-value tui-image-editor-range-value" value="0" /> <label>px</label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline"></li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-wrap">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-lock-aspect-ratio">\n                        <span>')).call(_context5, locale2.localize("Lock Aspect Ratio"), '</span>\n                    </label>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline"></li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline"></li>\n        <li class="tie-resize-button action">\n            <div class="tui-image-editor-button apply">\n                ')).call(_context4, makeSvgIcon(["normal", "active"], "apply"), "\n                <label>\n                    ")).call(_context3, locale2.localize("Apply"), '\n                </label>\n            </div>\n            <div class="tui-image-editor-button cancel">\n                ')).call(_context22, makeSvgIcon(["normal", "active"], "cancel"), "\n                <label>\n                    ")).call(_context2, locale2.localize("Cancel"), "\n                </label>\n            </div>\n        </li>\n    </ul>\n");
        };
        function resize_createSuper(Derived) {
          var hasNativeReflectConstruct = resize_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function resize_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var Resize = /* @__PURE__ */ function(_Submenu) {
          _inherits(Resize2, _Submenu);
          var _super = resize_createSuper(Resize2);
          function Resize2(subMenuElement, _ref) {
            var _this;
            var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon, menuBarPosition = _ref.menuBarPosition, usageStatistics = _ref.usageStatistics;
            _classCallCheck(this, Resize2);
            _this = _super.call(this, subMenuElement, {
              locale: locale2,
              name: "resize",
              makeSvgIcon,
              menuBarPosition,
              templateHtml: resize,
              usageStatistics
            });
            _this.status = "active";
            _this._lockState = false;
            _this._originalDimensions = null;
            _this._els = {
              widthRange: new range({
                slider: _this.selector(".tie-width-range"),
                input: _this.selector(".tie-width-range-value")
              }, defaultResizePixelValues),
              heightRange: new range({
                slider: _this.selector(".tie-height-range"),
                input: _this.selector(".tie-height-range-value")
              }, defaultResizePixelValues),
              lockAspectRatio: _this.selector(".tie-lock-aspect-ratio"),
              apply: _this.selector(".tie-resize-button .apply"),
              cancel: _this.selector(".tie-resize-button .cancel")
            };
            return _this;
          }
          _createClass(Resize2, [{
            key: "changeStartMode",
            value: function changeStartMode() {
              this.actions.modeChange("resize");
              var dimensions = this.actions.getCurrentDimensions();
              this._originalDimensions = dimensions;
              this.setWidthValue(dimensions.width);
              this.setHeightValue(dimensions.height);
            }
          }, {
            key: "changeStandbyMode",
            value: function changeStandbyMode() {
              this.actions.stopDrawingMode();
              this.actions.reset(true);
            }
          }, {
            key: "setLimit",
            value: function setLimit(limits) {
              this._els.widthRange.min = this.calcMinValue(limits.minWidth);
              this._els.heightRange.min = this.calcMinValue(limits.minHeight);
              this._els.widthRange.max = this.calcMaxValue(limits.maxWidth);
              this._els.heightRange.max = this.calcMaxValue(limits.maxHeight);
            }
          }, {
            key: "calcMaxValue",
            value: function calcMaxValue(maxValue) {
              if (maxValue <= 0) {
                maxValue = defaultResizePixelValues.max;
              }
              return maxValue;
            }
          }, {
            key: "calcMinValue",
            value: function calcMinValue(minValue) {
              if (minValue <= 0) {
                minValue = defaultResizePixelValues.min;
              }
              return minValue;
            }
          }, {
            key: "setWidthValue",
            value: function setWidthValue(value) {
              var trigger = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
              this._els.widthRange.value = value;
              if (trigger) {
                this._els.widthRange.trigger("change");
              }
            }
          }, {
            key: "setHeightValue",
            value: function setHeightValue(value) {
              var trigger = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
              this._els.heightRange.value = value;
              if (trigger) {
                this._els.heightRange.trigger("change");
              }
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this._removeEvent();
              assignmentForDestroy(this);
            }
          }, {
            key: "addEvent",
            value: function addEvent(actions2) {
              var _context2, _context22, _context3, _context4, _context5;
              this._els.widthRange.on("change", bind_default()(_context2 = this._changeWidthRangeHandler).call(_context2, this));
              this._els.heightRange.on("change", bind_default()(_context22 = this._changeHeightRangeHandler).call(_context22, this));
              this._els.lockAspectRatio.addEventListener("change", bind_default()(_context3 = this._changeLockAspectRatio).call(_context3, this));
              var apply = bind_default()(_context4 = this._applyEventHandler).call(_context4, this);
              var cancel = bind_default()(_context5 = this._cancelEventHandler).call(_context5, this);
              this.eventHandler = {
                apply,
                cancel
              };
              this.actions = actions2;
              this._els.apply.addEventListener("click", apply);
              this._els.cancel.addEventListener("click", cancel);
            }
          }, {
            key: "_changeWidthRangeHandler",
            value: function _changeWidthRangeHandler(value) {
              this.actions.preview("width", toInteger(value), this._lockState);
            }
          }, {
            key: "_changeHeightRangeHandler",
            value: function _changeHeightRangeHandler(value) {
              this.actions.preview("height", toInteger(value), this._lockState);
            }
          }, {
            key: "_changeLockAspectRatio",
            value: function _changeLockAspectRatio(event) {
              this._lockState = event.target.checked;
              this.actions.lockAspectRatio(this._lockState, defaultResizePixelValues.min, defaultResizePixelValues.max);
            }
          }, {
            key: "_removeEvent",
            value: function _removeEvent() {
              this._els.apply.removeEventListener("click", this.eventHandler.apply);
              this._els.cancel.removeEventListener("click", this.eventHandler.cancel);
            }
          }, {
            key: "_applyEventHandler",
            value: function _applyEventHandler() {
              this.actions.resize();
              this._els.apply.classList.remove("active");
            }
          }, {
            key: "_cancelEventHandler",
            value: function _cancelEventHandler() {
              this.actions.reset();
              this._els.cancel.classList.remove("active");
            }
          }, {
            key: "changeApplyButtonStatus",
            value: function changeApplyButtonStatus(enableStatus) {
              if (enableStatus) {
                this._els.apply.classList.add("active");
              } else {
                this._els.apply.classList.remove("active");
              }
            }
          }]);
          return Resize2;
        }(submenuBase);
        var ui_resize = Resize;
        var flip = function(_ref) {
          var _context2, _context22, _context3, _context4, _context5;
          var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon;
          return concat_default()(_context2 = concat_default()(_context22 = concat_default()(_context3 = concat_default()(_context4 = concat_default()(_context5 = '\n    <ul class="tie-flip-button tui-image-editor-submenu-item">\n        <li>\n            <div class="tui-image-editor-button flipX">\n                <div>\n                    '.concat(makeSvgIcon(["normal", "active"], "flip-x", true), "\n                </div>\n                <label>\n                    ")).call(_context5, locale2.localize("Flip X"), '\n                </label>\n            </div>\n            <div class="tui-image-editor-button flipY">\n                <div>\n                    ')).call(_context4, makeSvgIcon(["normal", "active"], "flip-y", true), "\n                </div>\n                <label>\n                    ")).call(_context3, locale2.localize("Flip Y"), '\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tui-image-editor-button resetFlip">\n                <div>\n                    ')).call(_context22, makeSvgIcon(["normal", "active"], "flip-reset", true), "\n                </div>\n                <label>\n                    ")).call(_context2, locale2.localize("Reset"), "\n                </label>\n            </div>\n        </li>\n    </ul>\n");
        };
        function flip_createSuper(Derived) {
          var hasNativeReflectConstruct = flip_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function flip_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var Flip = /* @__PURE__ */ function(_Submenu) {
          _inherits(Flip2, _Submenu);
          var _super = flip_createSuper(Flip2);
          function Flip2(subMenuElement, _ref) {
            var _this;
            var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon, menuBarPosition = _ref.menuBarPosition, usageStatistics = _ref.usageStatistics;
            _classCallCheck(this, Flip2);
            _this = _super.call(this, subMenuElement, {
              locale: locale2,
              name: "flip",
              makeSvgIcon,
              menuBarPosition,
              templateHtml: flip,
              usageStatistics
            });
            _this.flipStatus = false;
            _this._els = {
              flipButton: _this.selector(".tie-flip-button")
            };
            return _this;
          }
          _createClass(Flip2, [{
            key: "destroy",
            value: function destroy() {
              this._removeEvent();
              assignmentForDestroy(this);
            }
          }, {
            key: "addEvent",
            value: function addEvent(actions2) {
              var _context2;
              this.eventHandler.changeFlip = bind_default()(_context2 = this._changeFlip).call(_context2, this);
              this._actions = actions2;
              this._els.flipButton.addEventListener("click", this.eventHandler.changeFlip);
            }
          }, {
            key: "_removeEvent",
            value: function _removeEvent() {
              this._els.flipButton.removeEventListener("click", this.eventHandler.changeFlip);
            }
          }, {
            key: "_changeFlip",
            value: function _changeFlip(event) {
              var _this2 = this;
              var button = event.target.closest(".tui-image-editor-button");
              if (button) {
                var flipType = this.getButtonType(button, ["flipX", "flipY", "resetFlip"]);
                if (!this.flipStatus && flipType === "resetFlip") {
                  return;
                }
                this._actions.flip(flipType).then(function(flipStatus) {
                  var flipClassList = _this2._els.flipButton.classList;
                  _this2.flipStatus = false;
                  flipClassList.remove("resetFlip");
                  for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), ["flipX", "flipY"], function(type) {
                    flipClassList.remove(type);
                    if (flipStatus[type]) {
                      flipClassList.add(type);
                      flipClassList.add("resetFlip");
                      _this2.flipStatus = true;
                    }
                  });
                });
              }
            }
          }]);
          return Flip2;
        }(submenuBase);
        var ui_flip = Flip;
        var rotate = function(_ref) {
          var _context2, _context22;
          var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon;
          return concat_default()(_context2 = concat_default()(_context22 = '\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-rotate-button">\n            <div class="tui-image-editor-button clockwise">\n                <div>\n                    '.concat(makeSvgIcon(["normal", "active"], "rotate-clockwise", true), '\n                </div>\n                <label> 30 </label>\n            </div>\n            <div class="tui-image-editor-button counterclockwise">\n                <div>\n                    ')).call(_context22, makeSvgIcon(["normal", "active"], "rotate-counterclockwise", true), '\n                </div>\n                <label> -30 </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">')).call(_context2, locale2.localize("Range"), '</label>\n            <div class="tie-rotate-range"></div>\n            <input class="tie-rotate-range-value tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n');
        };
        function rotate_createSuper(Derived) {
          var hasNativeReflectConstruct = rotate_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function rotate_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var CLOCKWISE = 30;
        var COUNTERCLOCKWISE = -30;
        var Rotate = /* @__PURE__ */ function(_Submenu) {
          _inherits(Rotate2, _Submenu);
          var _super = rotate_createSuper(Rotate2);
          function Rotate2(subMenuElement, _ref) {
            var _this;
            var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon, menuBarPosition = _ref.menuBarPosition, usageStatistics = _ref.usageStatistics;
            _classCallCheck(this, Rotate2);
            _this = _super.call(this, subMenuElement, {
              locale: locale2,
              name: "rotate",
              makeSvgIcon,
              menuBarPosition,
              templateHtml: rotate,
              usageStatistics
            });
            _this._value = 0;
            _this._els = {
              rotateButton: _this.selector(".tie-rotate-button"),
              rotateRange: new range({
                slider: _this.selector(".tie-rotate-range"),
                input: _this.selector(".tie-rotate-range-value")
              }, defaultRotateRangeValues)
            };
            return _this;
          }
          _createClass(Rotate2, [{
            key: "destroy",
            value: function destroy() {
              this._removeEvent();
              this._els.rotateRange.destroy();
              assignmentForDestroy(this);
            }
          }, {
            key: "setRangeBarAngle",
            value: function setRangeBarAngle(type, angle) {
              var resultAngle = angle;
              if (type === "rotate") {
                resultAngle = parse_int_default()(this._els.rotateRange.value, 10) + angle;
              }
              this._setRangeBarRatio(resultAngle);
            }
          }, {
            key: "_setRangeBarRatio",
            value: function _setRangeBarRatio(angle) {
              this._els.rotateRange.value = angle;
            }
          }, {
            key: "addEvent",
            value: function addEvent(actions2) {
              var _context2, _context22;
              this.eventHandler.rotationAngleChanged = bind_default()(_context2 = this._changeRotateForButton).call(_context2, this);
              this.actions = actions2;
              this._els.rotateButton.addEventListener("click", this.eventHandler.rotationAngleChanged);
              this._els.rotateRange.on("change", bind_default()(_context22 = this._changeRotateForRange).call(_context22, this));
            }
          }, {
            key: "_removeEvent",
            value: function _removeEvent() {
              this._els.rotateButton.removeEventListener("click", this.eventHandler.rotationAngleChanged);
              this._els.rotateRange.off();
            }
          }, {
            key: "_changeRotateForRange",
            value: function _changeRotateForRange(value, isLast) {
              var angle = toInteger(value);
              this.actions.setAngle(angle, !isLast);
              this._value = angle;
            }
          }, {
            key: "_changeRotateForButton",
            value: function _changeRotateForButton(event) {
              var button = event.target.closest(".tui-image-editor-button");
              var angle = this._els.rotateRange.value;
              if (button) {
                var rotateType = this.getButtonType(button, ["counterclockwise", "clockwise"]);
                var rotateAngle = {
                  clockwise: CLOCKWISE,
                  counterclockwise: COUNTERCLOCKWISE
                }[rotateType];
                var newAngle = parse_int_default()(angle, 10) + rotateAngle;
                var isRotatable = newAngle >= -360 && newAngle <= 360;
                if (isRotatable) {
                  this.actions.rotate(rotateAngle);
                }
              }
            }
          }]);
          return Rotate2;
        }(submenuBase);
        var ui_rotate = Rotate;
        var submenu_text = function(_ref) {
          var _context2, _context22, _context3, _context4, _context5, _context6, _context7, _context8, _context9, _context10, _context11, _context12, _context13;
          var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon;
          return concat_default()(_context2 = concat_default()(_context22 = concat_default()(_context3 = concat_default()(_context4 = concat_default()(_context5 = concat_default()(_context6 = concat_default()(_context7 = concat_default()(_context8 = concat_default()(_context9 = concat_default()(_context10 = concat_default()(_context11 = concat_default()(_context12 = concat_default()(_context13 = '\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-text-effect-button">\n            <div class="tui-image-editor-button bold">\n                <div>\n                    '.concat(makeSvgIcon(["normal", "active"], "text-bold", true), "\n                </div>\n                <label> ")).call(_context13, locale2.localize("Bold"), ' </label>\n            </div>\n            <div class="tui-image-editor-button italic">\n                <div>\n                    ')).call(_context12, makeSvgIcon(["normal", "active"], "text-italic", true), "\n                </div>\n                <label> ")).call(_context11, locale2.localize("Italic"), ' </label>\n            </div>\n            <div class="tui-image-editor-button underline">\n                <div>\n                    ')).call(_context10, makeSvgIcon(["normal", "active"], "text-underline", true), "\n                </div>\n                <label> ")).call(_context9, locale2.localize("Underline"), ' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tie-text-align-button">\n            <div class="tui-image-editor-button left">\n                <div>\n                    ')).call(_context8, makeSvgIcon(["normal", "active"], "text-align-left", true), "\n                </div>\n                <label> ")).call(_context7, locale2.localize("Left"), ' </label>\n            </div>\n            <div class="tui-image-editor-button center">\n                <div>\n                    ')).call(_context6, makeSvgIcon(["normal", "active"], "text-align-center", true), "\n                </div>\n                <label> ")).call(_context5, locale2.localize("Center"), ' </label>\n            </div>\n            <div class="tui-image-editor-button right">\n                <div>\n                    ')).call(_context4, makeSvgIcon(["normal", "active"], "text-align-right", true), "\n                </div>\n                <label> ")).call(_context3, locale2.localize("Right"), ' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tie-text-color" title="')).call(_context22, locale2.localize("Color"), '"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">')).call(_context2, locale2.localize("Text size"), '</label>\n            <div class="tie-text-range"></div>\n            <input class="tie-text-range-value tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n');
        };
        function text_createSuper(Derived) {
          var hasNativeReflectConstruct = text_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function text_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var Text2 = /* @__PURE__ */ function(_Submenu) {
          _inherits(Text3, _Submenu);
          var _super = text_createSuper(Text3);
          function Text3(subMenuElement, _ref) {
            var _this;
            var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon, menuBarPosition = _ref.menuBarPosition, usageStatistics = _ref.usageStatistics;
            _classCallCheck(this, Text3);
            _this = _super.call(this, subMenuElement, {
              locale: locale2,
              name: "text",
              makeSvgIcon,
              menuBarPosition,
              templateHtml: submenu_text,
              usageStatistics
            });
            _this.effect = {
              bold: false,
              italic: false,
              underline: false
            };
            _this.align = "tie-text-align-left";
            _this._els = {
              textEffectButton: _this.selector(".tie-text-effect-button"),
              textAlignButton: _this.selector(".tie-text-align-button"),
              textColorpicker: new colorpicker(_this.selector(".tie-text-color"), {
                defaultColor: "#ffbb3b",
                toggleDirection: _this.toggleDirection,
                usageStatistics: _this.usageStatistics
              }),
              textRange: new range({
                slider: _this.selector(".tie-text-range"),
                input: _this.selector(".tie-text-range-value")
              }, defaultTextRangeValues)
            };
            _this.colorPickerInputBox = _this._els.textColorpicker.colorpickerElement.querySelector(selectorNames.COLOR_PICKER_INPUT_BOX);
            return _this;
          }
          _createClass(Text3, [{
            key: "destroy",
            value: function destroy() {
              this._removeEvent();
              this._els.textColorpicker.destroy();
              this._els.textRange.destroy();
              assignmentForDestroy(this);
            }
          }, {
            key: "addEvent",
            value: function addEvent(actions2) {
              var _context2, _context22, _context3, _context4, _context5, _context6;
              var setTextEffect = bind_default()(_context2 = this._setTextEffectHandler).call(_context2, this);
              var setTextAlign = bind_default()(_context22 = this._setTextAlignHandler).call(_context22, this);
              this.eventHandler = {
                setTextEffect,
                setTextAlign
              };
              this.actions = actions2;
              this._els.textEffectButton.addEventListener("click", setTextEffect);
              this._els.textAlignButton.addEventListener("click", setTextAlign);
              this._els.textRange.on("change", bind_default()(_context3 = this._changeTextRnageHandler).call(_context3, this));
              this._els.textColorpicker.on("change", bind_default()(_context4 = this._changeColorHandler).call(_context4, this));
              this.colorPickerInputBox.addEventListener(eventNames.FOCUS, bind_default()(_context5 = this._onStartEditingInputBox).call(_context5, this));
              this.colorPickerInputBox.addEventListener(eventNames.BLUR, bind_default()(_context6 = this._onStopEditingInputBox).call(_context6, this));
            }
          }, {
            key: "_removeEvent",
            value: function _removeEvent() {
              var _context7, _context8;
              var _this$eventHandler = this.eventHandler, setTextEffect = _this$eventHandler.setTextEffect, setTextAlign = _this$eventHandler.setTextAlign;
              this._els.textEffectButton.removeEventListener("click", setTextEffect);
              this._els.textAlignButton.removeEventListener("click", setTextAlign);
              this._els.textRange.off();
              this._els.textColorpicker.off();
              this.colorPickerInputBox.removeEventListener(eventNames.FOCUS, bind_default()(_context7 = this._onStartEditingInputBox).call(_context7, this));
              this.colorPickerInputBox.removeEventListener(eventNames.BLUR, bind_default()(_context8 = this._onStopEditingInputBox).call(_context8, this));
            }
          }, {
            key: "changeStandbyMode",
            value: function changeStandbyMode() {
              this.actions.stopDrawingMode();
            }
          }, {
            key: "changeStartMode",
            value: function changeStartMode() {
              this.actions.modeChange("text");
            }
          }, {
            key: "textColor",
            get: function get() {
              return this._els.textColorpicker.color;
            },
            set: function set(color) {
              this._els.textColorpicker.color = color;
            }
          }, {
            key: "fontSize",
            get: function get() {
              return this._els.textRange.value;
            },
            set: function set(value) {
              this._els.textRange.value = value;
            }
          }, {
            key: "fontStyle",
            get: function get() {
              return this.effect.italic ? "italic" : "normal";
            }
          }, {
            key: "fontWeight",
            get: function get() {
              return this.effect.bold ? "bold" : "normal";
            }
          }, {
            key: "underline",
            get: function get() {
              return this.effect.underline;
            }
          }, {
            key: "setTextStyleStateOnAction",
            value: function setTextStyleStateOnAction() {
              var textStyle = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
              var fill = fill_default()(textStyle), fontSize = textStyle.fontSize, fontStyle = textStyle.fontStyle, fontWeight = textStyle.fontWeight, textDecoration = textStyle.textDecoration, textAlign = textStyle.textAlign;
              this.textColor = fill;
              this.fontSize = fontSize;
              this.setEffectState("italic", fontStyle);
              this.setEffectState("bold", fontWeight);
              this.setEffectState("underline", textDecoration);
              this.setAlignState("tie-text-align-".concat(textAlign));
            }
          }, {
            key: "setEffectState",
            value: function setEffectState(effectName, value) {
              var effectValue = value === "italic" || value === "bold" || value === "underline";
              var button = this._els.textEffectButton.querySelector(".tui-image-editor-button.".concat(effectName));
              this.effect[effectName] = effectValue;
              button.classList[effectValue ? "add" : "remove"]("active");
            }
          }, {
            key: "setAlignState",
            value: function setAlignState(value) {
              var button = this._els.textAlignButton;
              button.classList.remove(this.align);
              button.classList.add(value);
              this.align = value;
            }
          }, {
            key: "_setTextEffectHandler",
            value: function _setTextEffectHandler(event) {
              var button = event.target.closest(".tui-image-editor-button");
              if (button) {
                var _button$className$mat = button.className.match(/(bold|italic|underline)/), _button$className$mat2 = _slicedToArray(_button$className$mat, 1), styleType = _button$className$mat2[0];
                var styleObj = {
                  bold: {
                    fontWeight: "bold"
                  },
                  italic: {
                    fontStyle: "italic"
                  },
                  underline: {
                    textDecoration: "underline"
                  }
                }[styleType];
                this.effect[styleType] = !this.effect[styleType];
                button.classList.toggle("active");
                this.actions.changeTextStyle(styleObj);
              }
            }
          }, {
            key: "_setTextAlignHandler",
            value: function _setTextAlignHandler(event) {
              var button = event.target.closest(".tui-image-editor-button");
              if (button) {
                var styleType = this.getButtonType(button, ["left", "center", "right"]);
                var styleTypeAlias = "tie-text-align-".concat(styleType);
                event.currentTarget.classList.remove(this.align);
                if (this.align !== styleTypeAlias) {
                  event.currentTarget.classList.add(styleTypeAlias);
                }
                this.actions.changeTextStyle({
                  textAlign: styleType
                });
                this.align = styleTypeAlias;
              }
            }
          }, {
            key: "_changeTextRnageHandler",
            value: function _changeTextRnageHandler(value, isLast) {
              this.actions.changeTextStyle({
                fontSize: value
              }, !isLast);
            }
          }, {
            key: "_changeColorHandler",
            value: function _changeColorHandler(color) {
              color = color || "transparent";
              this.actions.changeTextStyle({
                fill: color
              });
            }
          }]);
          return Text3;
        }(submenuBase);
        var ui_text = Text2;
        var mask = function(_ref) {
          var _context2, _context22, _context3;
          var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon;
          return concat_default()(_context2 = concat_default()(_context22 = concat_default()(_context3 = '\n    <ul class="tui-image-editor-submenu-item">\n        <li>\n            <div class="tui-image-editor-button">\n                <div>\n                    <input type="file" accept="image/*" class="tie-mask-image-file">\n                    '.concat(makeSvgIcon(["normal", "active"], "mask-load", true), "\n                </div>\n                <label> ")).call(_context3, locale2.localize("Load Mask Image"), ' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tie-mask-apply tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">\n            <div class="tui-image-editor-button apply">\n                ')).call(_context22, makeSvgIcon(["normal", "active"], "apply"), "\n                <label>\n                    ")).call(_context2, locale2.localize("Apply"), "\n                </label>\n            </div>\n        </li>\n    </ul>\n");
        };
        function mask_createSuper(Derived) {
          var hasNativeReflectConstruct = mask_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function mask_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var Mask = /* @__PURE__ */ function(_Submenu) {
          _inherits(Mask2, _Submenu);
          var _super = mask_createSuper(Mask2);
          function Mask2(subMenuElement, _ref) {
            var _this;
            var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon, menuBarPosition = _ref.menuBarPosition, usageStatistics = _ref.usageStatistics;
            _classCallCheck(this, Mask2);
            _this = _super.call(this, subMenuElement, {
              locale: locale2,
              name: "mask",
              makeSvgIcon,
              menuBarPosition,
              templateHtml: mask,
              usageStatistics
            });
            _this._els = {
              applyButton: _this.selector(".tie-mask-apply"),
              maskImageButton: _this.selector(".tie-mask-image-file")
            };
            return _this;
          }
          _createClass(Mask2, [{
            key: "destroy",
            value: function destroy() {
              this._removeEvent();
              assignmentForDestroy(this);
            }
          }, {
            key: "addEvent",
            value: function addEvent(actions2) {
              var _context2, _context22;
              var loadMaskFile = bind_default()(_context2 = this._loadMaskFile).call(_context2, this);
              var applyMask = bind_default()(_context22 = this._applyMask).call(_context22, this);
              this.eventHandler = {
                loadMaskFile,
                applyMask
              };
              this.actions = actions2;
              this._els.maskImageButton.addEventListener("change", loadMaskFile);
              this._els.applyButton.addEventListener("click", applyMask);
            }
          }, {
            key: "_removeEvent",
            value: function _removeEvent() {
              this._els.maskImageButton.removeEventListener("change", this.eventHandler.loadMaskFile);
              this._els.applyButton.removeEventListener("click", this.eventHandler.applyMask);
            }
          }, {
            key: "_applyMask",
            value: function _applyMask() {
              this.actions.applyFilter();
              this._els.applyButton.classList.remove("active");
            }
          }, {
            key: "_loadMaskFile",
            value: function _loadMaskFile(event) {
              var imgUrl;
              if (!isSupportFileApi()) {
                alert("This browser does not support file-api");
              }
              var _event$target$files = _slicedToArray(event.target.files, 1), file = _event$target$files[0];
              if (file) {
                imgUrl = url_default().createObjectURL(file);
                this.actions.loadImageFromURL(imgUrl, file);
                this._els.applyButton.classList.add("active");
              }
            }
          }]);
          return Mask2;
        }(submenuBase);
        var ui_mask = Mask;
        var icon = function(_ref) {
          var _context2, _context22, _context3, _context4, _context5, _context6, _context7, _context8, _context9, _context10, _context11, _context12, _context13, _context14, _context15, _context16, _context17, _context18, _context19, _context20;
          var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon;
          return concat_default()(_context2 = concat_default()(_context22 = concat_default()(_context3 = concat_default()(_context4 = concat_default()(_context5 = concat_default()(_context6 = concat_default()(_context7 = concat_default()(_context8 = concat_default()(_context9 = concat_default()(_context10 = concat_default()(_context11 = concat_default()(_context12 = concat_default()(_context13 = concat_default()(_context14 = concat_default()(_context15 = concat_default()(_context16 = concat_default()(_context17 = concat_default()(_context18 = concat_default()(_context19 = concat_default()(_context20 = '\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-icon-add-button">\n            <div class="tui-image-editor-button" data-icontype="icon-arrow">\n                <div>\n                    '.concat(makeSvgIcon(["normal", "active"], "icon-arrow", true), "\n                </div>\n                <label>\n                    ")).call(_context20, locale2.localize("Arrow"), '\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">\n                <div>\n                    ')).call(_context19, makeSvgIcon(["normal", "active"], "icon-arrow-2", true), "\n                </div>\n                <label>\n                    ")).call(_context18, locale2.localize("Arrow-2"), '\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">\n                <div>\n                    ')).call(_context17, makeSvgIcon(["normal", "active"], "icon-arrow-3", true), "\n                </div>\n                <label>\n                    ")).call(_context16, locale2.localize("Arrow-3"), '\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-star">\n                <div>\n                    ')).call(_context15, makeSvgIcon(["normal", "active"], "icon-star", true), "\n                </div>\n                <label>\n                    ")).call(_context14, locale2.localize("Star-1"), '\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-star-2">\n                <div>\n                    ')).call(_context13, makeSvgIcon(["normal", "active"], "icon-star-2", true), "\n                </div>\n                <label>\n                    ")).call(_context12, locale2.localize("Star-2"), '\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-polygon">\n                <div>\n                    ')).call(_context11, makeSvgIcon(["normal", "active"], "icon-polygon", true), "\n                </div>\n                <label>\n                    ")).call(_context10, locale2.localize("Polygon"), '\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-location">\n                <div>\n                    ')).call(_context9, makeSvgIcon(["normal", "active"], "icon-location", true), "\n                </div>\n                <label>\n                    ")).call(_context8, locale2.localize("Location"), '\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-heart">\n                <div>\n                    ')).call(_context7, makeSvgIcon(["normal", "active"], "icon-heart", true), "\n                </div>\n                <label>\n                    ")).call(_context6, locale2.localize("Heart"), '\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-bubble">\n                <div>\n                    ')).call(_context5, makeSvgIcon(["normal", "active"], "icon-bubble", true), "\n                </div>\n                <label>\n                    ")).call(_context4, locale2.localize("Bubble"), '\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tie-icon-add-button">\n            <div class="tui-image-editor-button" style="margin:0">\n                <div>\n                    <input type="file" accept="image/*" class="tie-icon-image-file">\n                    ')).call(_context3, makeSvgIcon(["normal", "active"], "icon-load", true), "\n                </div>\n                <label>\n                    ")).call(_context22, locale2.localize("Custom icon"), '\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tie-icon-color" title="')).call(_context2, locale2.localize("Color"), '"></div>\n        </li>\n    </ul>\n');
        };
        function icon_createSuper(Derived) {
          var hasNativeReflectConstruct = icon_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function icon_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var Icon = /* @__PURE__ */ function(_Submenu) {
          _inherits(Icon2, _Submenu);
          var _super = icon_createSuper(Icon2);
          function Icon2(subMenuElement, _ref) {
            var _this;
            var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon, menuBarPosition = _ref.menuBarPosition, usageStatistics = _ref.usageStatistics;
            _classCallCheck(this, Icon2);
            _this = _super.call(this, subMenuElement, {
              locale: locale2,
              name: "icon",
              makeSvgIcon,
              menuBarPosition,
              templateHtml: icon,
              usageStatistics
            });
            _this.iconType = null;
            _this._iconMap = {};
            _this._els = {
              registerIconButton: _this.selector(".tie-icon-image-file"),
              addIconButton: _this.selector(".tie-icon-add-button"),
              iconColorpicker: new colorpicker(_this.selector(".tie-icon-color"), {
                defaultColor: "#ffbb3b",
                toggleDirection: _this.toggleDirection,
                usageStatistics: _this.usageStatistics
              })
            };
            _this.colorPickerInputBox = _this._els.iconColorpicker.colorpickerElement.querySelector(selectorNames.COLOR_PICKER_INPUT_BOX);
            return _this;
          }
          _createClass(Icon2, [{
            key: "destroy",
            value: function destroy() {
              this._removeEvent();
              this._els.iconColorpicker.destroy();
              assignmentForDestroy(this);
            }
          }, {
            key: "addEvent",
            value: function addEvent(actions2) {
              var _context2, _context22, _context3, _context4, _context5;
              var registerIcon = bind_default()(_context2 = this._registerIconHandler).call(_context2, this);
              var addIcon = bind_default()(_context22 = this._addIconHandler).call(_context22, this);
              this.eventHandler = {
                registerIcon,
                addIcon
              };
              this.actions = actions2;
              this._els.iconColorpicker.on("change", bind_default()(_context3 = this._changeColorHandler).call(_context3, this));
              this._els.registerIconButton.addEventListener("change", registerIcon);
              this._els.addIconButton.addEventListener("click", addIcon);
              this.colorPickerInputBox.addEventListener(eventNames.FOCUS, bind_default()(_context4 = this._onStartEditingInputBox).call(_context4, this));
              this.colorPickerInputBox.addEventListener(eventNames.BLUR, bind_default()(_context5 = this._onStopEditingInputBox).call(_context5, this));
            }
          }, {
            key: "_removeEvent",
            value: function _removeEvent() {
              var _context6, _context7;
              this._els.iconColorpicker.off();
              this._els.registerIconButton.removeEventListener("change", this.eventHandler.registerIcon);
              this._els.addIconButton.removeEventListener("click", this.eventHandler.addIcon);
              this.colorPickerInputBox.removeEventListener(eventNames.FOCUS, bind_default()(_context6 = this._onStartEditingInputBox).call(_context6, this));
              this.colorPickerInputBox.removeEventListener(eventNames.BLUR, bind_default()(_context7 = this._onStopEditingInputBox).call(_context7, this));
            }
          }, {
            key: "clearIconType",
            value: function clearIconType() {
              this._els.addIconButton.classList.remove(this.iconType);
              this.iconType = null;
            }
          }, {
            key: "registerDefaultIcon",
            value: function registerDefaultIcon() {
              var _this2 = this;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), defaultIconPath, function(path, type) {
                _this2.actions.registerDefaultIcons(type, path);
              });
            }
          }, {
            key: "setIconPickerColor",
            value: function setIconPickerColor(iconColor) {
              this._els.iconColorpicker.color = iconColor;
            }
          }, {
            key: "changeStandbyMode",
            value: function changeStandbyMode() {
              this.clearIconType();
              this.actions.cancelAddIcon();
            }
          }, {
            key: "_changeColorHandler",
            value: function _changeColorHandler(color) {
              color = color || "transparent";
              this.actions.changeColor(color);
            }
          }, {
            key: "_addIconHandler",
            value: function _addIconHandler(event) {
              var button = event.target.closest(".tui-image-editor-button");
              if (button) {
                var iconType = button.getAttribute("data-icontype");
                var iconColor = this._els.iconColorpicker.color;
                this.actions.discardSelection();
                this.actions.changeSelectableAll(false);
                this._els.addIconButton.classList.remove(this.iconType);
                this._els.addIconButton.classList.add(iconType);
                if (this.iconType === iconType) {
                  this.changeStandbyMode();
                } else {
                  this.actions.addIcon(iconType, iconColor);
                  this.iconType = iconType;
                }
              }
            }
          }, {
            key: "_registerIconHandler",
            value: function _registerIconHandler(event) {
              var imgUrl;
              if (!isSupportFileApi) {
                alert("This browser does not support file-api");
              }
              var _event$target$files = _slicedToArray(event.target.files, 1), file = _event$target$files[0];
              if (file) {
                imgUrl = url_default().createObjectURL(file);
                this.actions.registerCustomIcon(imgUrl, file);
              }
            }
          }]);
          return Icon2;
        }(submenuBase);
        var ui_icon = Icon;
        var draw = function(_ref) {
          var _context2, _context22, _context3, _context4, _context5;
          var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon;
          return concat_default()(_context2 = concat_default()(_context22 = concat_default()(_context3 = concat_default()(_context4 = concat_default()(_context5 = '\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-draw-line-select-button">\n            <div class="tui-image-editor-button free">\n                <div>\n                    '.concat(makeSvgIcon(["normal", "active"], "draw-free", true), "\n                </div>\n                <label>\n                    ")).call(_context5, locale2.localize("Free"), '\n                </label>\n            </div>\n            <div class="tui-image-editor-button line">\n                <div>\n                    ')).call(_context4, makeSvgIcon(["normal", "active"], "draw-line", true), "\n                </div>\n                <label>\n                    ")).call(_context3, locale2.localize("Straight"), '\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tie-draw-color" title="')).call(_context22, locale2.localize("Color"), '"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">')).call(_context2, locale2.localize("Range"), '</label>\n            <div class="tie-draw-range"></div>\n            <input class="tie-draw-range-value tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n');
        };
        function draw_createSuper(Derived) {
          var hasNativeReflectConstruct = draw_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function draw_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var DRAW_OPACITY = 0.7;
        var Draw = /* @__PURE__ */ function(_Submenu) {
          _inherits(Draw2, _Submenu);
          var _super = draw_createSuper(Draw2);
          function Draw2(subMenuElement, _ref) {
            var _this;
            var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon, menuBarPosition = _ref.menuBarPosition, usageStatistics = _ref.usageStatistics;
            _classCallCheck(this, Draw2);
            _this = _super.call(this, subMenuElement, {
              locale: locale2,
              name: "draw",
              makeSvgIcon,
              menuBarPosition,
              templateHtml: draw,
              usageStatistics
            });
            _this._els = {
              lineSelectButton: _this.selector(".tie-draw-line-select-button"),
              drawColorPicker: new colorpicker(_this.selector(".tie-draw-color"), {
                defaultColor: "#00a9ff",
                toggleDirection: _this.toggleDirection,
                usageStatistics: _this.usageStatistics
              }),
              drawRange: new range({
                slider: _this.selector(".tie-draw-range"),
                input: _this.selector(".tie-draw-range-value")
              }, defaultDrawRangeValues)
            };
            _this.type = null;
            _this.color = _this._els.drawColorPicker.color;
            _this.width = _this._els.drawRange.value;
            _this.colorPickerInputBox = _this._els.drawColorPicker.colorpickerElement.querySelector(selectorNames.COLOR_PICKER_INPUT_BOX);
            return _this;
          }
          _createClass(Draw2, [{
            key: "destroy",
            value: function destroy() {
              this._removeEvent();
              this._els.drawColorPicker.destroy();
              this._els.drawRange.destroy();
              assignmentForDestroy(this);
            }
          }, {
            key: "addEvent",
            value: function addEvent(actions2) {
              var _context2, _context22, _context3, _context4, _context5;
              this.eventHandler.changeDrawType = bind_default()(_context2 = this._changeDrawType).call(_context2, this);
              this.actions = actions2;
              this._els.lineSelectButton.addEventListener("click", this.eventHandler.changeDrawType);
              this._els.drawColorPicker.on("change", bind_default()(_context22 = this._changeDrawColor).call(_context22, this));
              this._els.drawRange.on("change", bind_default()(_context3 = this._changeDrawRange).call(_context3, this));
              this.colorPickerInputBox.addEventListener(eventNames.FOCUS, bind_default()(_context4 = this._onStartEditingInputBox).call(_context4, this));
              this.colorPickerInputBox.addEventListener(eventNames.BLUR, bind_default()(_context5 = this._onStopEditingInputBox).call(_context5, this));
            }
          }, {
            key: "_removeEvent",
            value: function _removeEvent() {
              var _context6, _context7;
              this._els.lineSelectButton.removeEventListener("click", this.eventHandler.changeDrawType);
              this._els.drawColorPicker.off();
              this._els.drawRange.off();
              this.colorPickerInputBox.removeEventListener(eventNames.FOCUS, bind_default()(_context6 = this._onStartEditingInputBox).call(_context6, this));
              this.colorPickerInputBox.removeEventListener(eventNames.BLUR, bind_default()(_context7 = this._onStopEditingInputBox).call(_context7, this));
            }
          }, {
            key: "setDrawMode",
            value: function setDrawMode() {
              this.actions.setDrawMode(this.type, {
                width: this.width,
                color: getRgb(this.color, DRAW_OPACITY)
              });
            }
          }, {
            key: "changeStandbyMode",
            value: function changeStandbyMode() {
              this.type = null;
              this.actions.stopDrawingMode();
              this.actions.changeSelectableAll(true);
              this._els.lineSelectButton.classList.remove("free");
              this._els.lineSelectButton.classList.remove("line");
            }
          }, {
            key: "changeStartMode",
            value: function changeStartMode() {
              this.type = "free";
              this._els.lineSelectButton.classList.add("free");
              this.setDrawMode();
            }
          }, {
            key: "_changeDrawType",
            value: function _changeDrawType(event) {
              var button = event.target.closest(".tui-image-editor-button");
              if (button) {
                var lineType = this.getButtonType(button, ["free", "line"]);
                this.actions.discardSelection();
                if (this.type === lineType) {
                  this.changeStandbyMode();
                  return;
                }
                this.changeStandbyMode();
                this.type = lineType;
                this._els.lineSelectButton.classList.add(lineType);
                this.setDrawMode();
              }
            }
          }, {
            key: "_changeDrawColor",
            value: function _changeDrawColor(color) {
              this.color = color || "transparent";
              if (!this.type) {
                this.changeStartMode();
              } else {
                this.setDrawMode();
              }
            }
          }, {
            key: "_changeDrawRange",
            value: function _changeDrawRange(value) {
              this.width = value;
              if (!this.type) {
                this.changeStartMode();
              } else {
                this.setDrawMode();
              }
            }
          }]);
          return Draw2;
        }(submenuBase);
        var ui_draw = Draw;
        var filter = function(_ref) {
          var _context2, _context22, _context3, _context4, _context5, _context6, _context7, _context8, _context9, _context10, _context11, _context12, _context13, _context14, _context15, _context16;
          var locale2 = _ref.locale;
          return concat_default()(_context2 = concat_default()(_context22 = concat_default()(_context3 = concat_default()(_context4 = concat_default()(_context5 = concat_default()(_context6 = concat_default()(_context7 = concat_default()(_context8 = concat_default()(_context9 = concat_default()(_context10 = concat_default()(_context11 = concat_default()(_context12 = concat_default()(_context13 = concat_default()(_context14 = concat_default()(_context15 = concat_default()(_context16 = '\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-wrap fixed-width">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-grayscale">\n                        <span>'.concat(locale2.localize("Grayscale"), '</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-invert">\n                        <span>')).call(_context16, locale2.localize("Invert"), '</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-sepia">\n                        <span>')).call(_context15, locale2.localize("Sepia"), '</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-vintage">\n                        <span>')).call(_context14, locale2.localize("Sepia2"), '</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-blur">\n                        <span>')).call(_context13, locale2.localize("Blur"), '</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-sharpen">\n                        <span>')).call(_context12, locale2.localize("Sharpen"), '</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-emboss">\n                        <span>')).call(_context11, locale2.localize("Emboss"), '</span>\n                    </label>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">\n                <div class="tui-image-editor-checkbox-wrap">\n                    <div class="tui-image-editor-checkbox">\n                        <label>\n                            <input type="checkbox" class="tie-remove-white">\n                            <span>')).call(_context10, locale2.localize("Remove White"), '</span>\n                        </label>\n                    </div>\n                </div>\n                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">\n                    <label>')).call(_context9, locale2.localize("Distance"), '</label>\n                    <div class="tie-removewhite-distance-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-brightness">\n                        <span>')).call(_context8, locale2.localize("Brightness"), '</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div class="tie-brightness-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-noise">\n                        <span>')).call(_context7, locale2.localize("Noise"), '</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div class="tie-noise-range"></div>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-pixelate">\n                        <span>')).call(_context6, locale2.localize("Pixelate"), '</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div class="tie-pixelate-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">\n                    <div class="tui-image-editor-checkbox">\n                        <label>\n                            <input type="checkbox" class="tie-color-filter">\n                            <span>')).call(_context5, locale2.localize("Color Filter"), '</span>\n                        </label>\n                    </div>\n                </div>\n                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">\n                    <label>')).call(_context4, locale2.localize("Threshold"), '</label>\n                    <div class="tie-colorfilter-threshold-range"></div>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="filter-color-item">\n                <div class="tie-filter-tint-color" title="')).call(_context3, locale2.localize("Tint"), '"></div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-tint">\n                        <span></span>\n                    </label>\n                </div>\n            </div>\n            <div class="filter-color-item">\n                <div class="tie-filter-multiply-color" title="')).call(_context22, locale2.localize("Multiply"), '"></div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-multiply">\n                        <span></span>\n                    </label>\n                </div>\n            </div>\n            <div class="filter-color-item">\n                <div class="tie-filter-blend-color" title="')).call(_context2, locale2.localize("Blend"), '"></div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-blend">\n                        <span></span>\n                    </label>\n                </div>\n            </div>\n        </li>\n    </ul>\n');
        };
        function filter_createSuper(Derived) {
          var hasNativeReflectConstruct = filter_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function filter_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var PICKER_CONTROL_HEIGHT = "130px";
        var BLEND_OPTIONS = ["add", "diff", "subtract", "multiply", "screen", "lighten", "darken"];
        var FILTER_OPTIONS = ["grayscale", "invert", "sepia", "vintage", "blur", "sharpen", "emboss", "remove-white", "brightness", "noise", "pixelate", "color-filter", "tint", "multiply", "blend"];
        var filterNameMap = {
          grayscale: "grayscale",
          invert: "invert",
          sepia: "sepia",
          blur: "blur",
          sharpen: "sharpen",
          emboss: "emboss",
          removeWhite: "removeColor",
          brightness: "brightness",
          contrast: "contrast",
          saturation: "saturation",
          vintage: "vintage",
          polaroid: "polaroid",
          noise: "noise",
          pixelate: "pixelate",
          colorFilter: "removeColor",
          tint: "blendColor",
          multiply: "blendColor",
          blend: "blendColor",
          hue: "hue",
          gamma: "gamma"
        };
        var RANGE_INSTANCE_NAMES = ["removewhiteDistanceRange", "colorfilterThresholdRange", "pixelateRange", "noiseRange", "brightnessRange", "tintOpacity"];
        var COLORPICKER_INSTANCE_NAMES = ["filterBlendColor", "filterMultiplyColor", "filterTintColor"];
        var Filter = /* @__PURE__ */ function(_Submenu) {
          _inherits(Filter2, _Submenu);
          var _super = filter_createSuper(Filter2);
          function Filter2(subMenuElement, _ref) {
            var _this;
            var locale2 = _ref.locale, menuBarPosition = _ref.menuBarPosition, usageStatistics = _ref.usageStatistics;
            _classCallCheck(this, Filter2);
            _this = _super.call(this, subMenuElement, {
              locale: locale2,
              name: "filter",
              menuBarPosition,
              templateHtml: filter,
              usageStatistics
            });
            _this.selectBoxShow = false;
            _this.checkedMap = {};
            _this._makeControlElement();
            return _this;
          }
          _createClass(Filter2, [{
            key: "destroy",
            value: function destroy() {
              this._removeEvent();
              this._destroyToolInstance();
              assignmentForDestroy(this);
            }
          }, {
            key: "_removeEvent",
            value: function _removeEvent() {
              var _this2 = this, _context2;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), FILTER_OPTIONS, function(filter2) {
                var filterCheckElement = _this2.selector(".tie-".concat(filter2));
                var filterNameCamelCase = toCamelCase(filter2);
                filterCheckElement.removeEventListener("change", _this2.eventHandler[filterNameCamelCase]);
              });
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), concat_default()(_context2 = []).call(_context2, RANGE_INSTANCE_NAMES, COLORPICKER_INSTANCE_NAMES), function(instanceName) {
                _this2._els[instanceName].off();
              });
              this._els.blendType.removeEventListener("change", this.eventHandler.changeBlendFilter);
              this._els.blendType.removeEventListener("click", this.eventHandler.changeBlendFilter);
              external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().forEachArray(this.colorPickerInputBoxes, function(inputBox) {
                var _context22, _context3;
                inputBox.removeEventListener(eventNames.FOCUS, bind_default()(_context22 = _this2._onStartEditingInputBox).call(_context22, _this2));
                inputBox.removeEventListener(eventNames.BLUR, bind_default()(_context3 = _this2._onStopEditingInputBox).call(_context3, _this2));
              }, this);
            }
          }, {
            key: "_destroyToolInstance",
            value: function _destroyToolInstance() {
              var _context4, _this3 = this;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), concat_default()(_context4 = []).call(_context4, RANGE_INSTANCE_NAMES, COLORPICKER_INSTANCE_NAMES), function(instanceName) {
                _this3._els[instanceName].destroy();
              });
            }
          }, {
            key: "addEvent",
            value: function addEvent(_ref2) {
              var _this4 = this, _context6, _context7, _context8;
              var applyFilter = _ref2.applyFilter;
              var changeFilterState = function changeFilterState2(filterName) {
                var _context5;
                return bind_default()(_context5 = _this4._changeFilterState).call(_context5, _this4, applyFilter, filterName);
              };
              var changeFilterStateForRange = function changeFilterStateForRange2(filterName) {
                return function(value, isLast) {
                  return _this4._changeFilterState(applyFilter, filterName, isLast);
                };
              };
              this.eventHandler = {
                changeBlendFilter: changeFilterState("blend"),
                blandTypeClick: function blandTypeClick(event) {
                  return event.stopPropagation();
                }
              };
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), FILTER_OPTIONS, function(filter2) {
                var filterCheckElement = _this4.selector(".tie-".concat(filter2));
                var filterNameCamelCase = toCamelCase(filter2);
                _this4.checkedMap[filterNameCamelCase] = filterCheckElement;
                _this4.eventHandler[filterNameCamelCase] = changeFilterState(filterNameCamelCase);
                filterCheckElement.addEventListener("change", _this4.eventHandler[filterNameCamelCase]);
              });
              this._els.removewhiteDistanceRange.on("change", changeFilterStateForRange("removeWhite"));
              this._els.colorfilterThresholdRange.on("change", changeFilterStateForRange("colorFilter"));
              this._els.pixelateRange.on("change", changeFilterStateForRange("pixelate"));
              this._els.noiseRange.on("change", changeFilterStateForRange("noise"));
              this._els.brightnessRange.on("change", changeFilterStateForRange("brightness"));
              this._els.filterBlendColor.on("change", this.eventHandler.changeBlendFilter);
              this._els.filterMultiplyColor.on("change", changeFilterState("multiply"));
              this._els.filterTintColor.on("change", changeFilterState("tint"));
              this._els.tintOpacity.on("change", changeFilterStateForRange("tint"));
              this._els.filterMultiplyColor.on("changeShow", bind_default()(_context6 = this.colorPickerChangeShow).call(_context6, this));
              this._els.filterTintColor.on("changeShow", bind_default()(_context7 = this.colorPickerChangeShow).call(_context7, this));
              this._els.filterBlendColor.on("changeShow", bind_default()(_context8 = this.colorPickerChangeShow).call(_context8, this));
              this._els.blendType.addEventListener("change", this.eventHandler.changeBlendFilter);
              this._els.blendType.addEventListener("click", this.eventHandler.blandTypeClick);
              external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().forEachArray(this.colorPickerInputBoxes, function(inputBox) {
                var _context9, _context10;
                inputBox.addEventListener(eventNames.FOCUS, bind_default()(_context9 = _this4._onStartEditingInputBox).call(_context9, _this4));
                inputBox.addEventListener(eventNames.BLUR, bind_default()(_context10 = _this4._onStopEditingInputBox).call(_context10, _this4));
              }, this);
            }
          }, {
            key: "setFilterState",
            value: function setFilterState(changedFilterInfos) {
              var type = changedFilterInfos.type, options = changedFilterInfos.options, action2 = changedFilterInfos.action;
              var filterName = this._getFilterNameFromOptions(type, options);
              var isRemove = action2 === "remove";
              if (!isRemove) {
                this._setFilterState(filterName, options);
              }
              this.checkedMap[filterName].checked = !isRemove;
            }
          }, {
            key: "initFilterCheckBoxState",
            value: function initFilterCheckBoxState() {
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), this.checkedMap, function(filter2) {
                filter2.checked = false;
              }, this);
            }
          }, {
            key: "_setFilterState",
            value: function _setFilterState(filterName, options) {
              if (filterName === "colorFilter") {
                this._els.colorfilterThresholdRange.value = options.distance;
              } else if (filterName === "removeWhite") {
                this._els.removewhiteDistanceRange.value = options.distance;
              } else if (filterName === "pixelate") {
                this._els.pixelateRange.value = options.blocksize;
              } else if (filterName === "brightness") {
                this._els.brightnessRange.value = options.brightness;
              } else if (filterName === "noise") {
                this._els.noiseRange.value = options.noise;
              } else if (filterName === "tint") {
                this._els.tintOpacity.value = options.alpha;
                this._els.filterTintColor.color = options.color;
              } else if (filterName === "blend") {
                this._els.filterBlendColor.color = options.color;
              } else if (filterName === "multiply") {
                this._els.filterMultiplyColor.color = options.color;
              }
            }
          }, {
            key: "_getFilterNameFromOptions",
            value: function _getFilterNameFromOptions(type, options) {
              var filterName = type;
              if (type === "removeColor") {
                filterName = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().isExisty(options.useAlpha) ? "removeWhite" : "colorFilter";
              } else if (type === "blendColor") {
                filterName = {
                  add: "blend",
                  multiply: "multiply",
                  tint: "tint"
                }[options.mode];
              }
              return filterName;
            }
          }, {
            key: "_changeFilterState",
            value: function _changeFilterState(applyFilter, filterName) {
              var isLast = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : true;
              var apply = this.checkedMap[filterName].checked;
              var type = filterNameMap[filterName];
              var checkboxGroup = this.checkedMap[filterName].closest(".tui-image-editor-checkbox-group");
              if (checkboxGroup) {
                if (apply) {
                  checkboxGroup.classList.remove("tui-image-editor-disabled");
                } else {
                  checkboxGroup.classList.add("tui-image-editor-disabled");
                }
              }
              applyFilter(apply, type, this._getFilterOption(filterName), !isLast);
            }
          }, {
            key: "_getFilterOption",
            value: function _getFilterOption(type) {
              var option = {};
              switch (type) {
                case "removeWhite":
                  option.color = "#FFFFFF";
                  option.useAlpha = false;
                  option.distance = parse_float_default()(this._els.removewhiteDistanceRange.value);
                  break;
                case "colorFilter":
                  option.color = "#FFFFFF";
                  option.distance = parse_float_default()(this._els.colorfilterThresholdRange.value);
                  break;
                case "pixelate":
                  option.blocksize = toInteger(this._els.pixelateRange.value);
                  break;
                case "noise":
                  option.noise = toInteger(this._els.noiseRange.value);
                  break;
                case "brightness":
                  option.brightness = parse_float_default()(this._els.brightnessRange.value);
                  break;
                case "blend":
                  option.mode = "add";
                  option.color = this._els.filterBlendColor.color;
                  option.mode = this._els.blendType.value;
                  break;
                case "multiply":
                  option.mode = "multiply";
                  option.color = this._els.filterMultiplyColor.color;
                  break;
                case "tint":
                  option.mode = "tint";
                  option.color = this._els.filterTintColor.color;
                  option.alpha = this._els.tintOpacity.value;
                  break;
                case "blur":
                  option.blur = this._els.blurRange.value;
                  break;
              }
              return option;
            }
          }, {
            key: "_makeControlElement",
            value: function _makeControlElement() {
              this._els = {
                removewhiteDistanceRange: new range({
                  slider: this.selector(".tie-removewhite-distance-range")
                }, defaultFilterRangeValues.removewhiteDistanceRange),
                brightnessRange: new range({
                  slider: this.selector(".tie-brightness-range")
                }, defaultFilterRangeValues.brightnessRange),
                noiseRange: new range({
                  slider: this.selector(".tie-noise-range")
                }, defaultFilterRangeValues.noiseRange),
                pixelateRange: new range({
                  slider: this.selector(".tie-pixelate-range")
                }, defaultFilterRangeValues.pixelateRange),
                colorfilterThresholdRange: new range({
                  slider: this.selector(".tie-colorfilter-threshold-range")
                }, defaultFilterRangeValues.colorfilterThresholdRange),
                filterTintColor: new colorpicker(this.selector(".tie-filter-tint-color"), {
                  defaultColor: "#03bd9e",
                  toggleDirection: this.toggleDirection,
                  usageStatistics: this.usageStatistics
                }),
                filterMultiplyColor: new colorpicker(this.selector(".tie-filter-multiply-color"), {
                  defaultColor: "#515ce6",
                  toggleDirection: this.toggleDirection,
                  usageStatistics: this.usageStatistics
                }),
                filterBlendColor: new colorpicker(this.selector(".tie-filter-blend-color"), {
                  defaultColor: "#ffbb3b",
                  toggleDirection: this.toggleDirection,
                  usageStatistics: this.usageStatistics
                }),
                blurRange: defaultFilterRangeValues.blurFilterRange
              };
              this._els.tintOpacity = this._pickerWithRange(this._els.filterTintColor.pickerControl);
              this._els.blendType = this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl);
              this.colorPickerControls.push(this._els.filterTintColor);
              this.colorPickerControls.push(this._els.filterMultiplyColor);
              this.colorPickerControls.push(this._els.filterBlendColor);
              this.colorPickerInputBoxes = [];
              this.colorPickerInputBoxes.push(this._els.filterTintColor.colorpickerElement.querySelector(selectorNames.COLOR_PICKER_INPUT_BOX));
              this.colorPickerInputBoxes.push(this._els.filterMultiplyColor.colorpickerElement.querySelector(selectorNames.COLOR_PICKER_INPUT_BOX));
              this.colorPickerInputBoxes.push(this._els.filterBlendColor.colorpickerElement.querySelector(selectorNames.COLOR_PICKER_INPUT_BOX));
            }
          }, {
            key: "_pickerWithRange",
            value: function _pickerWithRange(pickerControl) {
              var rangeWrap = document.createElement("div");
              var rangeLabel = document.createElement("label");
              var slider = document.createElement("div");
              slider.id = "tie-filter-tint-opacity";
              rangeLabel.innerHTML = "Opacity";
              rangeWrap.appendChild(rangeLabel);
              rangeWrap.appendChild(slider);
              pickerControl.appendChild(rangeWrap);
              pickerControl.style.height = PICKER_CONTROL_HEIGHT;
              return new range({
                slider
              }, defaultFilterRangeValues.tintOpacityRange);
            }
          }, {
            key: "_pickerWithSelectbox",
            value: function _pickerWithSelectbox(pickerControl) {
              var selectlistWrap = document.createElement("div");
              var selectlist = document.createElement("select");
              var optionlist = document.createElement("ul");
              selectlistWrap.className = "tui-image-editor-selectlist-wrap";
              optionlist.className = "tui-image-editor-selectlist";
              selectlistWrap.appendChild(selectlist);
              selectlistWrap.appendChild(optionlist);
              this._makeSelectOptionList(selectlist);
              pickerControl.appendChild(selectlistWrap);
              pickerControl.style.height = PICKER_CONTROL_HEIGHT;
              this._drawSelectOptionList(selectlist, optionlist);
              this._pickerWithSelectboxForAddEvent(selectlist, optionlist);
              return selectlist;
            }
          }, {
            key: "_drawSelectOptionList",
            value: function _drawSelectOptionList(selectlist, optionlist) {
              var options = selectlist.querySelectorAll("option");
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), options, function(option) {
                var optionElement = document.createElement("li");
                optionElement.innerHTML = option.innerHTML;
                optionElement.setAttribute("data-item", option.value);
                optionlist.appendChild(optionElement);
              });
            }
          }, {
            key: "_pickerWithSelectboxForAddEvent",
            value: function _pickerWithSelectboxForAddEvent(selectlist, optionlist) {
              var _this5 = this;
              optionlist.addEventListener("click", function(event) {
                var optionValue = event.target.getAttribute("data-item");
                var fireEvent = document.createEvent("HTMLEvents");
                selectlist.querySelector('[value="'.concat(optionValue, '"]')).selected = true;
                fireEvent.initEvent("change", true, true);
                selectlist.dispatchEvent(fireEvent);
                _this5.selectBoxShow = false;
                optionlist.style.display = "none";
              });
              selectlist.addEventListener("mousedown", function(event) {
                event.preventDefault();
                _this5.selectBoxShow = !_this5.selectBoxShow;
                optionlist.style.display = _this5.selectBoxShow ? "block" : "none";
                optionlist.setAttribute("data-selectitem", selectlist.value);
                optionlist.querySelector("[data-item='".concat(selectlist.value, "']")).classList.add("active");
              });
            }
          }, {
            key: "_makeSelectOptionList",
            value: function _makeSelectOptionList(selectlist) {
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), BLEND_OPTIONS, function(option) {
                var selectOption = document.createElement("option");
                selectOption.setAttribute("value", option);
                selectOption.innerHTML = option.replace(/^[a-z]/, function($0) {
                  return $0.toUpperCase();
                });
                selectlist.appendChild(selectOption);
              });
            }
          }]);
          return Filter2;
        }(submenuBase);
        var ui_filter = Filter;
        var number_parse_int = __webpack_require__(4383);
        var number_parse_int_default = /* @__PURE__ */ __webpack_require__.n(number_parse_int);
        var Panel = /* @__PURE__ */ function() {
          function Panel2(menuElement, _ref) {
            var name = _ref.name;
            _classCallCheck(this, Panel2);
            this.name = name;
            this.items = [];
            this.panelElement = this._makePanelElement();
            this.listElement = this._makeListElement();
            this.panelElement.appendChild(this.listElement);
            menuElement.appendChild(this.panelElement);
          }
          _createClass(Panel2, [{
            key: "_makePanelElement",
            value: function _makePanelElement() {
              var panel = document.createElement("div");
              panel.className = "tie-panel-".concat(this.name);
              return panel;
            }
          }, {
            key: "_makeListElement",
            value: function _makeListElement() {
              var list = document.createElement("ol");
              list.className = "".concat(this.name, "-list");
              return list;
            }
          }, {
            key: "makeListItemElement",
            value: function makeListItemElement(html) {
              var listItem = document.createElement("li");
              listItem.innerHTML = html;
              listItem.className = "".concat(this.name, "-item");
              listItem.setAttribute("data-index", this.items.length);
              return listItem;
            }
          }, {
            key: "pushListItemElement",
            value: function pushListItemElement(item) {
              this.listElement.appendChild(item);
              this.listElement.scrollTop += item.offsetHeight;
              this.items.push(item);
            }
          }, {
            key: "deleteListItemElement",
            value: function deleteListItemElement(start, end) {
              var items = this.items;
              for (var i = start; i < end; i += 1) {
                this.listElement.removeChild(items[i]);
              }
              splice_default()(items).call(items, start, end - start + 1);
            }
          }, {
            key: "getListLength",
            value: function getListLength() {
              return this.items.length;
            }
          }, {
            key: "addClass",
            value: function addClass(index, className) {
              if (this.items[index]) {
                this.items[index].classList.add(className);
              }
            }
          }, {
            key: "removeClass",
            value: function removeClass(index, className) {
              if (this.items[index]) {
                this.items[index].classList.remove(className);
              }
            }
          }, {
            key: "toggleClass",
            value: function toggleClass(index, className) {
              if (this.items[index]) {
                this.items[index].classList.toggle(className);
              }
            }
          }]);
          return Panel2;
        }();
        var panelMenu = Panel;
        var submenu_history = function(_ref) {
          var _context2, _context22, _context3;
          var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon, name = _ref.name, detail = _ref.detail;
          return concat_default()(_context2 = concat_default()(_context22 = concat_default()(_context3 = '\n    <div class="tui-image-editor-history-item history">\n        <div class="history-item-icon">\n            '.concat(makeSvgIcon(["normal", "active"], "history-".concat(name.toLowerCase()), true), "\n        </div>\n        <span>\n            ")).call(_context3, locale2.localize(name), "\n            ")).call(_context22, detail ? "(".concat(locale2.localize(detail), ")") : "", '\n        </span>\n        <div class="history-item-checkbox">\n            ')).call(_context2, makeSvgIcon(["normal"], "history-check", true), "\n        </div>\n    </div>\n");
        };
        function history_createSuper(Derived) {
          var hasNativeReflectConstruct = history_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function history_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var historyClassName = "history-item";
        var selectedClassName = "selected-item";
        var disabledClassName = "disabled-item";
        var History = /* @__PURE__ */ function(_Panel) {
          _inherits(History2, _Panel);
          var _super = history_createSuper(History2);
          function History2(menuElement, _ref) {
            var _this;
            var locale2 = _ref.locale, makeSvgIcon = _ref.makeSvgIcon;
            _classCallCheck(this, History2);
            _this = _super.call(this, menuElement, {
              name: "history"
            });
            menuElement.classList.add("enabled");
            _this.locale = locale2;
            _this.makeSvgIcon = makeSvgIcon;
            _this._eventHandler = {};
            _this._historyIndex = _this.getListLength();
            return _this;
          }
          _createClass(History2, [{
            key: "add",
            value: function add(_ref2) {
              var name = _ref2.name, detail = _ref2.detail;
              if (this._hasDisabledItem()) {
                this.deleteListItemElement(this._historyIndex + 1, this.getListLength());
              }
              var html = submenu_history({
                locale: this.locale,
                makeSvgIcon: this.makeSvgIcon,
                name,
                detail
              });
              var item = this.makeListItemElement(html);
              this.pushListItemElement(item);
              this._historyIndex = this.getListLength() - 1;
              this._selectItem(this._historyIndex);
            }
          }, {
            key: "init",
            value: function init() {
              this.deleteListItemElement(1, this.getListLength());
              this._historyIndex = 0;
              this._selectItem(this._historyIndex);
            }
          }, {
            key: "clear",
            value: function clear() {
              this.deleteListItemElement(0, this.getListLength());
              this._historyIndex = -1;
            }
          }, {
            key: "prev",
            value: function prev() {
              this._historyIndex -= 1;
              this._selectItem(this._historyIndex);
            }
          }, {
            key: "next",
            value: function next() {
              this._historyIndex += 1;
              this._selectItem(this._historyIndex);
            }
          }, {
            key: "_hasDisabledItem",
            value: function _hasDisabledItem() {
              return this.getListLength() - 1 > this._historyIndex;
            }
          }, {
            key: "_addHistoryEventListener",
            value: function _addHistoryEventListener() {
              var _this2 = this;
              this._eventHandler.history = function(event) {
                return _this2._clickHistoryItem(event);
              };
              this.listElement.addEventListener("click", this._eventHandler.history);
            }
          }, {
            key: "_removeHistoryEventListener",
            value: function _removeHistoryEventListener() {
              this.listElement.removeEventListener("click", this._eventHandler.history);
            }
          }, {
            key: "_clickHistoryItem",
            value: function _clickHistoryItem(event) {
              var target = event.target;
              var item = target.closest(".".concat(historyClassName));
              if (!item) {
                return;
              }
              var index = number_parse_int_default()(item.getAttribute("data-index"), 10);
              if (index !== this._historyIndex) {
                var count = Math.abs(index - this._historyIndex);
                if (index < this._historyIndex) {
                  this._actions.undo(count);
                } else {
                  this._actions.redo(count);
                }
              }
            }
          }, {
            key: "_selectItem",
            value: function _selectItem(index) {
              for (var i = 0; i < this.getListLength(); i += 1) {
                this.removeClass(i, selectedClassName);
                this.removeClass(i, disabledClassName);
                if (i > index) {
                  this.addClass(i, disabledClassName);
                }
              }
              this.addClass(index, selectedClassName);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.removeEvent();
              assignmentForDestroy(this);
            }
          }, {
            key: "addEvent",
            value: function addEvent(actions2) {
              this._actions = actions2;
              this._addHistoryEventListener();
            }
          }, {
            key: "removeEvent",
            value: function removeEvent() {
              this._removeHistoryEventListener();
            }
          }]);
          return History2;
        }(panelMenu);
        var ui_history = History;
        var Locale = /* @__PURE__ */ function() {
          function Locale2(locale2) {
            _classCallCheck(this, Locale2);
            this._locale = locale2;
          }
          _createClass(Locale2, [{
            key: "localize",
            value: function localize(message) {
              return this._locale[message] || message;
            }
          }]);
          return Locale2;
        }();
        var locale = Locale;
        var SUB_UI_COMPONENT = {
          Shape: ui_shape,
          Crop: ui_crop,
          Resize: ui_resize,
          Flip: ui_flip,
          Rotate: ui_rotate,
          Text: ui_text,
          Mask: ui_mask,
          Icon: ui_icon,
          Draw: ui_draw,
          Filter: ui_filter
        };
        var CustomEvents = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().CustomEvents;
        var BI_EXPRESSION_MINSIZE_WHEN_TOP_POSITION = "1300";
        var HISTORY_MENU = "history";
        var HISTORY_PANEL_CLASS_NAME = "tie-panel-history";
        var CLASS_NAME_ON = "on";
        var ZOOM_BUTTON_TYPE = {
          ZOOM_IN: "zoomIn",
          HAND: "hand"
        };
        var Ui = /* @__PURE__ */ function() {
          function Ui2(element, options, actions2) {
            _classCallCheck(this, Ui2);
            this.options = this._initializeOption(options);
            this._actions = actions2;
            this.submenu = false;
            this.imageSize = {};
            this.uiSize = {};
            this._locale = new locale(this.options.locale);
            this.theme = new theme(this.options.theme);
            this.eventHandler = {};
            this._submenuChangeTransection = false;
            this._selectedElement = null;
            this._mainElement = null;
            this._editorElementWrap = null;
            this._editorElement = null;
            this._menuBarElement = null;
            this._subMenuElement = null;
            this._makeUiElement(element);
            this._setUiSize();
            this._initMenuEvent = false;
            this._makeSubMenu();
            this._attachHistoryEvent();
            this._attachZoomEvent();
          }
          _createClass(Ui2, [{
            key: "destroy",
            value: function destroy() {
              this._removeUiEvent();
              this._destroyAllMenu();
              this._selectedElement.innerHTML = "";
              assignmentForDestroy(this);
            }
          }, {
            key: "setUiDefaultSelectionStyle",
            value: function setUiDefaultSelectionStyle(option) {
              return external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend({
                applyCropSelectionStyle: true,
                applyGroupSelectionStyle: true,
                selectionStyle: {
                  cornerStyle: "circle",
                  cornerSize: 16,
                  cornerColor: "#fff",
                  cornerStrokeColor: "#fff",
                  transparentCorners: false,
                  lineWidth: 2,
                  borderColor: "#fff"
                }
              }, option);
            }
          }, {
            key: "resizeEditor",
            value: function resizeEditor() {
              var _ref = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, uiSize = _ref.uiSize, _ref$imageSize = _ref.imageSize, imageSize = _ref$imageSize === void 0 ? this.imageSize : _ref$imageSize;
              if (imageSize !== this.imageSize) {
                this.imageSize = imageSize;
              }
              if (uiSize) {
                this._setUiSize(uiSize);
              }
              var _this$_getCanvasMaxDi = this._getCanvasMaxDimension(), width = _this$_getCanvasMaxDi.width, height = _this$_getCanvasMaxDi.height;
              var editorElementStyle = this._editorElement.style;
              var menuBarPosition = this.options.menuBarPosition;
              editorElementStyle.height = "".concat(height, "px");
              editorElementStyle.width = "".concat(width, "px");
              this._setEditorPosition(menuBarPosition);
              this._editorElementWrap.style.bottom = "0px";
              this._editorElementWrap.style.top = "0px";
              this._editorElementWrap.style.left = "0px";
              this._editorElementWrap.style.width = "100%";
              var selectElementClassList = this._selectedElement.classList;
              if (menuBarPosition === "top" && this._selectedElement.offsetWidth < BI_EXPRESSION_MINSIZE_WHEN_TOP_POSITION) {
                selectElementClassList.add("tui-image-editor-top-optimization");
              } else {
                selectElementClassList.remove("tui-image-editor-top-optimization");
              }
            }
          }, {
            key: "toggleZoomButtonStatus",
            value: function toggleZoomButtonStatus(type) {
              var targetClassList = this._buttonElements[type].classList;
              targetClassList.toggle(CLASS_NAME_ON);
              if (type === ZOOM_BUTTON_TYPE.ZOOM_IN) {
                this._buttonElements[ZOOM_BUTTON_TYPE.HAND].classList.remove(CLASS_NAME_ON);
              } else {
                this._buttonElements[ZOOM_BUTTON_TYPE.ZOOM_IN].classList.remove(CLASS_NAME_ON);
              }
            }
          }, {
            key: "offZoomInButtonStatus",
            value: function offZoomInButtonStatus() {
              var zoomInClassList = this._buttonElements[ZOOM_BUTTON_TYPE.ZOOM_IN].classList;
              zoomInClassList.remove(CLASS_NAME_ON);
            }
          }, {
            key: "changeHandButtonStatus",
            value: function changeHandButtonStatus(enabled) {
              var handClassList = this._buttonElements[ZOOM_BUTTON_TYPE.HAND].classList;
              handClassList[enabled ? "add" : "remove"](CLASS_NAME_ON);
            }
          }, {
            key: "changeHelpButtonEnabled",
            value: function changeHelpButtonEnabled(buttonType, enableStatus) {
              var buttonClassList = this._buttonElements[buttonType].classList;
              buttonClassList[enableStatus ? "add" : "remove"]("enabled");
            }
          }, {
            key: "_initializeOption",
            value: function _initializeOption(options) {
              return external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend({
                loadImage: {
                  path: "",
                  name: ""
                },
                locale: {},
                menuIconPath: "",
                menu: ["resize", "crop", "flip", "rotate", "draw", "shape", "icon", "text", "mask", "filter"],
                initMenu: "",
                uiSize: {
                  width: "100%",
                  height: "100%"
                },
                menuBarPosition: "bottom"
              }, options);
            }
          }, {
            key: "_setUiSize",
            value: function _setUiSize() {
              var uiSize = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.options.uiSize;
              var elementDimension = this._selectedElement.style;
              elementDimension.width = uiSize.width;
              elementDimension.height = uiSize.height;
            }
          }, {
            key: "_makeSubMenu",
            value: function _makeSubMenu() {
              var _this = this;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), this.options.menu, function(menuName) {
                var _context2;
                var SubComponentClass = SUB_UI_COMPONENT[menuName.replace(/^[a-z]/, function($0) {
                  return $0.toUpperCase();
                })];
                _this._makeMenuElement(menuName);
                _this._buttonElements[menuName] = _this._menuBarElement.querySelector(".tie-btn-".concat(menuName));
                _this[menuName] = new SubComponentClass(_this._subMenuElement, {
                  locale: _this._locale,
                  makeSvgIcon: bind_default()(_context2 = _this.theme.makeMenSvgIconSet).call(_context2, _this.theme),
                  menuBarPosition: _this.options.menuBarPosition,
                  usageStatistics: _this.options.usageStatistics
                });
              });
            }
          }, {
            key: "_attachHistoryEvent",
            value: function _attachHistoryEvent() {
              var _context2, _context3, _context4;
              this.on(eventNames.EXECUTE_COMMAND, bind_default()(_context2 = this._addHistory).call(_context2, this));
              this.on(eventNames.AFTER_UNDO, bind_default()(_context3 = this._selectPrevHistory).call(_context3, this));
              this.on(eventNames.AFTER_REDO, bind_default()(_context4 = this._selectNextHistory).call(_context4, this));
            }
          }, {
            key: "_attachZoomEvent",
            value: function _attachZoomEvent() {
              var _this2 = this;
              this.on(eventNames.HAND_STARTED, function() {
                _this2.offZoomInButtonStatus();
                _this2.changeHandButtonStatus(true);
              });
              this.on(eventNames.HAND_STOPPED, function() {
                return _this2.changeHandButtonStatus(false);
              });
            }
          }, {
            key: "_makeUiElement",
            value: function _makeUiElement(element) {
              var _context5;
              var selectedElement;
              window.snippet = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default();
              if (element.nodeType) {
                selectedElement = element;
              } else {
                selectedElement = document.querySelector(element);
              }
              var selector = getSelector(selectedElement);
              selectedElement.classList.add("tui-image-editor-container");
              selectedElement.innerHTML = controls({
                locale: this._locale,
                biImage: this.theme.getStyle("common.bi"),
                loadButtonStyle: this.theme.getStyle("loadButton"),
                downloadButtonStyle: this.theme.getStyle("downloadButton"),
                menuBarPosition: this.options.menuBarPosition
              }) + mainContainer({
                locale: this._locale,
                biImage: this.theme.getStyle("common.bi"),
                commonStyle: this.theme.getStyle("common"),
                headerStyle: this.theme.getStyle("header"),
                loadButtonStyle: this.theme.getStyle("loadButton"),
                downloadButtonStyle: this.theme.getStyle("downloadButton"),
                submenuStyle: this.theme.getStyle("submenu")
              });
              this._selectedElement = selectedElement;
              this._selectedElement.classList.add(this.options.menuBarPosition);
              this._mainElement = selector(".tui-image-editor-main");
              this._editorElementWrap = selector(".tui-image-editor-wrap");
              this._editorElement = selector(".tui-image-editor");
              this._helpMenuBarElement = selector(".tui-image-editor-help-menu");
              this._menuBarElement = selector(".tui-image-editor-menu");
              this._subMenuElement = selector(".tui-image-editor-submenu");
              this._buttonElements = {
                download: this._selectedElement.querySelectorAll(".tui-image-editor-download-btn"),
                load: this._selectedElement.querySelectorAll(".tui-image-editor-load-btn")
              };
              this._addHelpMenus();
              this._historyMenu = new ui_history(this._buttonElements[HISTORY_MENU], {
                locale: this._locale,
                makeSvgIcon: bind_default()(_context5 = this.theme.makeMenSvgIconSet).call(_context5, this.theme)
              });
              this._activateZoomMenus();
            }
          }, {
            key: "_activateZoomMenus",
            value: function _activateZoomMenus() {
              var _this3 = this;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), ZOOM_HELP_MENUS, function(menu) {
                _this3.changeHelpButtonEnabled(menu, true);
              });
            }
          }, {
            key: "_makeHelpMenuWithPartition",
            value: function _makeHelpMenuWithPartition() {
              var _context6;
              return concat_default()(_context6 = []).call(_context6, _toConsumableArray(ZOOM_HELP_MENUS), [""], _toConsumableArray(COMMAND_HELP_MENUS), [""], _toConsumableArray(DELETE_HELP_MENUS));
            }
          }, {
            key: "_addHelpMenus",
            value: function _addHelpMenus() {
              var _this4 = this;
              var helpMenuWithPartition = this._makeHelpMenuWithPartition();
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), helpMenuWithPartition, function(menuName) {
                if (!menuName) {
                  _this4._makeMenuPartitionElement();
                } else {
                  _this4._makeMenuElement(menuName, ["normal", "disabled", "hover"], "help");
                  _this4._buttonElements[menuName] = _this4._helpMenuBarElement.querySelector(".tie-btn-".concat(menuName));
                }
              });
            }
          }, {
            key: "_makeMenuPartitionElement",
            value: function _makeMenuPartitionElement() {
              var partitionElement = document.createElement("li");
              var partitionInnerElement = document.createElement("div");
              partitionElement.className = cls("item");
              partitionInnerElement.className = cls("icpartition");
              partitionElement.appendChild(partitionInnerElement);
              this._helpMenuBarElement.appendChild(partitionElement);
            }
          }, {
            key: "_makeMenuElement",
            value: function _makeMenuElement(menuName) {
              var _context7, _context8;
              var useIconTypes = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : ["normal", "active", "hover"];
              var menuType = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "normal";
              var btnElement = document.createElement("li");
              var menuItemHtml = this.theme.makeMenSvgIconSet(useIconTypes, menuName);
              this._addTooltipAttribute(btnElement, menuName);
              btnElement.className = concat_default()(_context7 = concat_default()(_context8 = "tie-btn-".concat(menuName, " ")).call(_context8, cls("item"), " ")).call(_context7, menuType);
              btnElement.innerHTML = menuItemHtml;
              if (menuType === "normal") {
                this._menuBarElement.appendChild(btnElement);
              } else {
                this._helpMenuBarElement.appendChild(btnElement);
              }
            }
          }, {
            key: "_addHelpActionEvent",
            value: function _addHelpActionEvent() {
              var _this5 = this;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), HELP_MENUS, function(helpName) {
                _this5.eventHandler[helpName] = function(event) {
                  return _this5._actions.main[helpName](event);
                };
                _this5._buttonElements[helpName].addEventListener("click", _this5.eventHandler[helpName]);
              });
            }
          }, {
            key: "_removeHelpActionEvent",
            value: function _removeHelpActionEvent() {
              var _this6 = this;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), HELP_MENUS, function(helpName) {
                _this6._buttonElements[helpName].removeEventListener("click", _this6.eventHandler[helpName]);
              });
            }
          }, {
            key: "_addHistory",
            value: function _addHistory(command2) {
              if (!isSilentCommand(command2)) {
                var historyTitle = typeof command2 === "string" ? {
                  name: command2
                } : getHistoryTitle(command2);
                this._historyMenu.add(historyTitle);
              }
            }
          }, {
            key: "initHistory",
            value: function initHistory() {
              this._historyMenu.init();
            }
          }, {
            key: "clearHistory",
            value: function clearHistory() {
              this._historyMenu.clear();
            }
          }, {
            key: "_selectPrevHistory",
            value: function _selectPrevHistory() {
              this._historyMenu.prev();
            }
          }, {
            key: "_selectNextHistory",
            value: function _selectNextHistory() {
              this._historyMenu.next();
            }
          }, {
            key: "toggleHistoryMenu",
            value: function toggleHistoryMenu(event) {
              var target = event.target;
              var item = target.closest(".".concat(HISTORY_PANEL_CLASS_NAME));
              if (item) {
                return;
              }
              var historyButtonClassList = this._buttonElements[HISTORY_MENU].classList;
              historyButtonClassList.toggle("opened");
            }
          }, {
            key: "_addTooltipAttribute",
            value: function _addTooltipAttribute(element, tooltipName) {
              element.setAttribute("tooltip-content", this._locale.localize(tooltipName.replace(/^[a-z]/g, function($0) {
                return $0.toUpperCase();
              })));
            }
          }, {
            key: "_addDownloadEvent",
            value: function _addDownloadEvent() {
              var _this7 = this;
              this.eventHandler.download = function() {
                return _this7._actions.main.download();
              };
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), this._buttonElements.download, function(element) {
                element.addEventListener("click", _this7.eventHandler.download);
              });
            }
          }, {
            key: "_removeDownloadEvent",
            value: function _removeDownloadEvent() {
              var _this8 = this;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), this._buttonElements.download, function(element) {
                element.removeEventListener("click", _this8.eventHandler.download);
              });
            }
          }, {
            key: "_addLoadEvent",
            value: function _addLoadEvent() {
              var _this9 = this;
              this.eventHandler.loadImage = function(event) {
                return _this9._actions.main.load(event.target.files[0]);
              };
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), this._buttonElements.load, function(element) {
                element.addEventListener("change", _this9.eventHandler.loadImage);
              });
            }
          }, {
            key: "_removeLoadEvent",
            value: function _removeLoadEvent() {
              var _this10 = this;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), this._buttonElements.load, function(element) {
                element.removeEventListener("change", _this10.eventHandler.loadImage);
              });
            }
          }, {
            key: "_addMainMenuEvent",
            value: function _addMainMenuEvent(menuName) {
              var _this11 = this;
              this.eventHandler[menuName] = function() {
                return _this11.changeMenu(menuName);
              };
              this._buttonElements[menuName].addEventListener("click", this.eventHandler[menuName]);
            }
          }, {
            key: "_addSubMenuEvent",
            value: function _addSubMenuEvent(menuName) {
              var _this12 = this;
              this[menuName].addEvent(this._actions[menuName]);
              this[menuName].on(eventNames.INPUT_BOX_EDITING_STARTED, function() {
                return _this12.fire(eventNames.INPUT_BOX_EDITING_STARTED);
              });
              this[menuName].on(eventNames.INPUT_BOX_EDITING_STOPPED, function() {
                return _this12.fire(eventNames.INPUT_BOX_EDITING_STOPPED);
              });
            }
          }, {
            key: "_addMenuEvent",
            value: function _addMenuEvent() {
              var _this13 = this;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), this.options.menu, function(menuName) {
                _this13._addMainMenuEvent(menuName);
                _this13._addSubMenuEvent(menuName);
              });
            }
          }, {
            key: "_removeMainMenuEvent",
            value: function _removeMainMenuEvent() {
              var _this14 = this;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), this.options.menu, function(menuName) {
                _this14._buttonElements[menuName].removeEventListener("click", _this14.eventHandler[menuName]);
                _this14[menuName].off(eventNames.INPUT_BOX_EDITING_STARTED);
                _this14[menuName].off(eventNames.INPUT_BOX_EDITING_STOPPED);
              });
            }
          }, {
            key: "getEditorArea",
            value: function getEditorArea() {
              return this._editorElement;
            }
          }, {
            key: "activeMenuEvent",
            value: function activeMenuEvent() {
              if (this._initMenuEvent) {
                return;
              }
              this._addHelpActionEvent();
              this._addDownloadEvent();
              this._addMenuEvent();
              this._initMenu();
              this._historyMenu.addEvent(this._actions.history);
              this._initMenuEvent = true;
            }
          }, {
            key: "_removeUiEvent",
            value: function _removeUiEvent() {
              this._removeHelpActionEvent();
              this._removeDownloadEvent();
              this._removeLoadEvent();
              this._removeMainMenuEvent();
              this._historyMenu.removeEvent();
            }
          }, {
            key: "_destroyAllMenu",
            value: function _destroyAllMenu() {
              var _this15 = this;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), this.options.menu, function(menuName) {
                _this15[menuName].destroy();
              });
              this._historyMenu.destroy();
            }
          }, {
            key: "initCanvas",
            value: function initCanvas() {
              var _this16 = this;
              var loadImageInfo = this._getLoadImage();
              if (loadImageInfo.path) {
                this._actions.main.initLoadImage(loadImageInfo.path, loadImageInfo.name).then(function() {
                  _this16.activeMenuEvent();
                });
              }
              this._addLoadEvent();
              var gridVisual = document.createElement("div");
              gridVisual.className = cls("grid-visual");
              var grid = '<table>\n           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>\n           <tr><td></td><td></td><td></td></tr>\n           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>\n         </table>';
              gridVisual.innerHTML = grid;
              this._editorContainerElement = this._editorElement.querySelector(".tui-image-editor-canvas-container");
              this._editorContainerElement.appendChild(gridVisual);
            }
          }, {
            key: "_getLoadImage",
            value: function _getLoadImage() {
              return this.options.loadImage;
            }
          }, {
            key: "changeMenu",
            value: function changeMenu(menuName) {
              var toggle = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
              var discardSelection = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : true;
              if (!this._submenuChangeTransection) {
                this._submenuChangeTransection = true;
                this._changeMenu(menuName, toggle, discardSelection);
                this._submenuChangeTransection = false;
              }
            }
          }, {
            key: "_changeMenu",
            value: function _changeMenu(menuName, toggle, discardSelection) {
              if (this.submenu) {
                this._buttonElements[this.submenu].classList.remove("active");
                this._mainElement.classList.remove("tui-image-editor-menu-".concat(this.submenu));
                if (discardSelection) {
                  this._actions.main.discardSelection();
                }
                this._actions.main.changeSelectableAll(true);
                this[this.submenu].changeStandbyMode();
              }
              if (this.submenu === menuName && toggle) {
                this.submenu = null;
              } else {
                this._buttonElements[menuName].classList.add("active");
                this._mainElement.classList.add("tui-image-editor-menu-".concat(menuName));
                this.submenu = menuName;
                this[this.submenu].changeStartMode();
              }
              this.resizeEditor();
            }
          }, {
            key: "_initMenu",
            value: function _initMenu() {
              if (this.options.initMenu) {
                var evt = document.createEvent("MouseEvents");
                evt.initEvent("click", true, false);
                this._buttonElements[this.options.initMenu].dispatchEvent(evt);
              }
              if (this.icon) {
                this.icon.registerDefaultIcon();
              }
            }
          }, {
            key: "_getCanvasMaxDimension",
            value: function _getCanvasMaxDimension() {
              var _this$_editorContaine = this._editorContainerElement.style, maxWidth = _this$_editorContaine.maxWidth, maxHeight = _this$_editorContaine.maxHeight;
              var width = parse_float_default()(maxWidth);
              var height = parse_float_default()(maxHeight);
              return {
                width,
                height
              };
            }
          }, {
            key: "_setEditorPosition",
            value: function _setEditorPosition(menuBarPosition) {
              var _this$_getCanvasMaxDi2 = this._getCanvasMaxDimension(), width = _this$_getCanvasMaxDi2.width, height = _this$_getCanvasMaxDi2.height;
              var editorElementStyle = this._editorElement.style;
              var top = 0;
              var left = 0;
              if (this.submenu) {
                if (menuBarPosition === "bottom") {
                  if (height > this._editorElementWrap.scrollHeight - 150) {
                    top = (height - this._editorElementWrap.scrollHeight) / 2;
                  } else {
                    top = 150 / 2 * -1;
                  }
                } else if (menuBarPosition === "top") {
                  if (height > this._editorElementWrap.offsetHeight - 150) {
                    top = 150 / 2 - (height - (this._editorElementWrap.offsetHeight - 150)) / 2;
                  } else {
                    top = 150 / 2;
                  }
                } else if (menuBarPosition === "left") {
                  if (width > this._editorElementWrap.offsetWidth - 248) {
                    left = 248 / 2 - (width - (this._editorElementWrap.offsetWidth - 248)) / 2;
                  } else {
                    left = 248 / 2;
                  }
                } else if (menuBarPosition === "right") {
                  if (width > this._editorElementWrap.scrollWidth - 248) {
                    left = (width - this._editorElementWrap.scrollWidth) / 2;
                  } else {
                    left = 248 / 2 * -1;
                  }
                }
              }
              editorElementStyle.top = "".concat(top, "px");
              editorElementStyle.left = "".concat(left, "px");
            }
          }]);
          return Ui2;
        }();
        CustomEvents.mixin(Ui);
        var ui = Ui;
        var instance_filter = __webpack_require__(381);
        var filter_default = /* @__PURE__ */ __webpack_require__.n(instance_filter);
        var ImageTracer = /* @__PURE__ */ function() {
          function ImageTracer2() {
            _classCallCheck(this, ImageTracer2);
            this.versionnumber = "1.2.4";
            this.optionpresets = {
              default: {
                corsenabled: false,
                ltres: 1,
                qtres: 1,
                pathomit: 8,
                rightangleenhance: true,
                colorsampling: 2,
                numberofcolors: 16,
                mincolorratio: 0,
                colorquantcycles: 3,
                layering: 0,
                strokewidth: 1,
                linefilter: false,
                scale: 1,
                roundcoords: 1,
                viewbox: false,
                desc: false,
                lcpr: 0,
                qcpr: 0,
                blurradius: 0,
                blurdelta: 20
              },
              posterized1: {
                colorsampling: 0,
                numberofcolors: 2
              },
              posterized2: {
                numberofcolors: 4,
                blurradius: 5
              },
              curvy: {
                ltres: 0.01,
                linefilter: true,
                rightangleenhance: false
              },
              sharp: {
                qtres: 0.01,
                linefilter: false
              },
              detailed: {
                pathomit: 0,
                roundcoords: 2,
                ltres: 0.5,
                qtres: 0.5,
                numberofcolors: 64
              },
              smoothed: {
                blurradius: 5,
                blurdelta: 64
              },
              grayscale: {
                colorsampling: 0,
                colorquantcycles: 1,
                numberofcolors: 7
              },
              fixedpalette: {
                colorsampling: 0,
                colorquantcycles: 1,
                numberofcolors: 27
              },
              randomsampling1: {
                colorsampling: 1,
                numberofcolors: 8
              },
              randomsampling2: {
                colorsampling: 1,
                numberofcolors: 64
              },
              artistic1: {
                colorsampling: 0,
                colorquantcycles: 1,
                pathomit: 0,
                blurradius: 5,
                blurdelta: 64,
                ltres: 0.01,
                linefilter: true,
                numberofcolors: 16,
                strokewidth: 2
              },
              artistic2: {
                qtres: 0.01,
                colorsampling: 0,
                colorquantcycles: 1,
                numberofcolors: 4,
                strokewidth: 0
              },
              artistic3: {
                qtres: 10,
                ltres: 10,
                numberofcolors: 8
              },
              artistic4: {
                qtres: 10,
                ltres: 10,
                numberofcolors: 64,
                blurradius: 5,
                blurdelta: 256,
                strokewidth: 2
              },
              posterized3: {
                ltres: 1,
                qtres: 1,
                pathomit: 20,
                rightangleenhance: true,
                colorsampling: 0,
                numberofcolors: 3,
                mincolorratio: 0,
                colorquantcycles: 3,
                blurradius: 3,
                blurdelta: 20,
                strokewidth: 0,
                linefilter: false,
                roundcoords: 1,
                pal: [{
                  r: 0,
                  g: 0,
                  b: 100,
                  a: 255
                }, {
                  r: 255,
                  g: 255,
                  b: 255,
                  a: 255
                }]
              }
            };
            this.pathscan_combined_lookup = [[[-1, -1, -1, -1], [-1, -1, -1, -1], [-1, -1, -1, -1], [-1, -1, -1, -1]], [[0, 1, 0, -1], [-1, -1, -1, -1], [-1, -1, -1, -1], [0, 2, -1, 0]], [[-1, -1, -1, -1], [-1, -1, -1, -1], [0, 1, 0, -1], [0, 0, 1, 0]], [[0, 0, 1, 0], [-1, -1, -1, -1], [0, 2, -1, 0], [-1, -1, -1, -1]], [[-1, -1, -1, -1], [0, 0, 1, 0], [0, 3, 0, 1], [-1, -1, -1, -1]], [[13, 3, 0, 1], [13, 2, -1, 0], [7, 1, 0, -1], [7, 0, 1, 0]], [[-1, -1, -1, -1], [0, 1, 0, -1], [-1, -1, -1, -1], [0, 3, 0, 1]], [[0, 3, 0, 1], [0, 2, -1, 0], [-1, -1, -1, -1], [-1, -1, -1, -1]], [[0, 3, 0, 1], [0, 2, -1, 0], [-1, -1, -1, -1], [-1, -1, -1, -1]], [[-1, -1, -1, -1], [0, 1, 0, -1], [-1, -1, -1, -1], [0, 3, 0, 1]], [[11, 1, 0, -1], [14, 0, 1, 0], [14, 3, 0, 1], [11, 2, -1, 0]], [[-1, -1, -1, -1], [0, 0, 1, 0], [0, 3, 0, 1], [-1, -1, -1, -1]], [[0, 0, 1, 0], [-1, -1, -1, -1], [0, 2, -1, 0], [-1, -1, -1, -1]], [[-1, -1, -1, -1], [-1, -1, -1, -1], [0, 1, 0, -1], [0, 0, 1, 0]], [[0, 1, 0, -1], [-1, -1, -1, -1], [-1, -1, -1, -1], [0, 2, -1, 0]], [[-1, -1, -1, -1], [-1, -1, -1, -1], [-1, -1, -1, -1], [-1, -1, -1, -1]]];
            this.gks = [[0.27901, 0.44198, 0.27901], [0.135336, 0.228569, 0.272192, 0.228569, 0.135336], [0.086776, 0.136394, 0.178908, 0.195843, 0.178908, 0.136394, 0.086776], [0.063327, 0.093095, 0.122589, 0.144599, 0.152781, 0.144599, 0.122589, 0.093095, 0.063327], [0.049692, 0.069304, 0.089767, 0.107988, 0.120651, 0.125194, 0.120651, 0.107988, 0.089767, 0.069304, 0.049692]];
            this.specpalette = [{
              r: 0,
              g: 0,
              b: 0,
              a: 255
            }, {
              r: 128,
              g: 128,
              b: 128,
              a: 255
            }, {
              r: 0,
              g: 0,
              b: 128,
              a: 255
            }, {
              r: 64,
              g: 64,
              b: 128,
              a: 255
            }, {
              r: 192,
              g: 192,
              b: 192,
              a: 255
            }, {
              r: 255,
              g: 255,
              b: 255,
              a: 255
            }, {
              r: 128,
              g: 128,
              b: 192,
              a: 255
            }, {
              r: 0,
              g: 0,
              b: 192,
              a: 255
            }, {
              r: 128,
              g: 0,
              b: 0,
              a: 255
            }, {
              r: 128,
              g: 64,
              b: 64,
              a: 255
            }, {
              r: 128,
              g: 0,
              b: 128,
              a: 255
            }, {
              r: 168,
              g: 168,
              b: 168,
              a: 255
            }, {
              r: 192,
              g: 128,
              b: 128,
              a: 255
            }, {
              r: 192,
              g: 0,
              b: 0,
              a: 255
            }, {
              r: 255,
              g: 255,
              b: 255,
              a: 255
            }, {
              r: 0,
              g: 128,
              b: 0,
              a: 255
            }];
          }
          _createClass(ImageTracer2, [{
            key: "imageToSVG",
            value: function imageToSVG(url2, callback, options) {
              var _this = this;
              options = this.checkoptions(options);
              this.loadImage(url2, function(canvas) {
                callback(_this.imagedataToSVG(_this.getImgdata(canvas), options));
              }, options);
            }
          }, {
            key: "imagedataToSVG",
            value: function imagedataToSVG(imgd, options) {
              options = this.checkoptions(options);
              var td = this.imagedataToTracedata(imgd, options);
              return this.getsvgstring(td, options);
            }
          }, {
            key: "imageToTracedata",
            value: function imageToTracedata(url2, callback, options) {
              var _this2 = this;
              options = this.checkoptions(options);
              this.loadImage(url2, function(canvas) {
                callback(_this2.imagedataToTracedata(_this2.getImgdata(canvas), options));
              }, options);
            }
          }, {
            key: "imagedataToTracedata",
            value: function imagedataToTracedata(imgd, options) {
              options = this.checkoptions(options);
              var ii = this.colorquantization(imgd, options);
              var tracedata;
              if (options.layering === 0) {
                tracedata = {
                  layers: [],
                  palette: ii.palette,
                  width: ii.array[0].length - 2,
                  height: ii.array.length - 2
                };
                for (var colornum = 0; colornum < ii.palette.length; colornum += 1) {
                  var tracedlayer = this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(ii, colornum), options.pathomit), options), options.ltres, options.qtres);
                  tracedata.layers.push(tracedlayer);
                }
              } else {
                var ls = this.layering(ii);
                if (options.layercontainerid) {
                  this.drawLayers(ls, this.specpalette, options.scale, options.layercontainerid);
                }
                var bps = this.batchpathscan(ls, options.pathomit);
                var bis = this.batchinternodes(bps, options);
                tracedata = {
                  layers: this.batchtracelayers(bis, options.ltres, options.qtres),
                  palette: ii.palette,
                  width: imgd.width,
                  height: imgd.height
                };
              }
              return tracedata;
            }
          }, {
            key: "checkoptions",
            value: function checkoptions(options) {
              options = options || {};
              if (typeof options === "string") {
                options = options.toLowerCase();
                if (this.optionpresets[options]) {
                  options = this.optionpresets[options];
                } else {
                  options = {};
                }
              }
              var ok = keys_default()(this.optionpresets["default"]);
              for (var k = 0; k < ok.length; k += 1) {
                if (!options.hasOwnProperty(ok[k])) {
                  options[ok[k]] = this.optionpresets["default"][ok[k]];
                }
              }
              return options;
            }
          }, {
            key: "colorquantization",
            value: function colorquantization(imgd, options) {
              var arr = [];
              var idx = 0;
              var cd;
              var cdl;
              var ci;
              var paletteacc = [];
              var pixelnum = imgd.width * imgd.height;
              var i;
              var j;
              var k;
              var cnt;
              var palette;
              for (j = 0; j < imgd.height + 2; j += 1) {
                arr[j] = [];
                for (i = 0; i < imgd.width + 2; i += 1) {
                  arr[j][i] = -1;
                }
              }
              if (options.pal) {
                palette = options.pal;
              } else if (options.colorsampling === 0) {
                palette = this.generatepalette(options.numberofcolors);
              } else if (options.colorsampling === 1) {
                palette = this.samplepalette(options.numberofcolors, imgd);
              } else {
                palette = this.samplepalette2(options.numberofcolors, imgd);
              }
              if (options.blurradius > 0) {
                imgd = this.blur(imgd, options.blurradius, options.blurdelta);
              }
              for (cnt = 0; cnt < options.colorquantcycles; cnt += 1) {
                if (cnt > 0) {
                  for (k = 0; k < palette.length; k += 1) {
                    if (paletteacc[k].n > 0) {
                      palette[k] = {
                        r: Math.floor(paletteacc[k].r / paletteacc[k].n),
                        g: Math.floor(paletteacc[k].g / paletteacc[k].n),
                        b: Math.floor(paletteacc[k].b / paletteacc[k].n),
                        a: Math.floor(paletteacc[k].a / paletteacc[k].n)
                      };
                    }
                    if (paletteacc[k].n / pixelnum < options.mincolorratio && cnt < options.colorquantcycles - 1) {
                      palette[k] = {
                        r: Math.floor(Math.random() * 255),
                        g: Math.floor(Math.random() * 255),
                        b: Math.floor(Math.random() * 255),
                        a: Math.floor(Math.random() * 255)
                      };
                    }
                  }
                }
                for (i = 0; i < palette.length; i += 1) {
                  paletteacc[i] = {
                    r: 0,
                    g: 0,
                    b: 0,
                    a: 0,
                    n: 0
                  };
                }
                for (j = 0; j < imgd.height; j += 1) {
                  for (i = 0; i < imgd.width; i += 1) {
                    idx = (j * imgd.width + i) * 4;
                    ci = 0;
                    cdl = 1024;
                    for (k = 0; k < palette.length; k += 1) {
                      cd = Math.abs(palette[k].r - imgd.data[idx]) + Math.abs(palette[k].g - imgd.data[idx + 1]) + Math.abs(palette[k].b - imgd.data[idx + 2]) + Math.abs(palette[k].a - imgd.data[idx + 3]);
                      if (cd < cdl) {
                        cdl = cd;
                        ci = k;
                      }
                    }
                    paletteacc[ci].r += imgd.data[idx];
                    paletteacc[ci].g += imgd.data[idx + 1];
                    paletteacc[ci].b += imgd.data[idx + 2];
                    paletteacc[ci].a += imgd.data[idx + 3];
                    paletteacc[ci].n += 1;
                    arr[j + 1][i + 1] = ci;
                  }
                }
              }
              return {
                array: arr,
                palette
              };
            }
          }, {
            key: "samplepalette",
            value: function samplepalette(numberofcolors, imgd) {
              var idx;
              var palette = [];
              for (var i = 0; i < numberofcolors; i += 1) {
                idx = Math.floor(Math.random() * imgd.data.length / 4) * 4;
                palette.push({
                  r: imgd.data[idx],
                  g: imgd.data[idx + 1],
                  b: imgd.data[idx + 2],
                  a: imgd.data[idx + 3]
                });
              }
              return palette;
            }
          }, {
            key: "samplepalette2",
            value: function samplepalette2(numberofcolors, imgd) {
              var idx;
              var palette = [];
              var ni = Math.ceil(Math.sqrt(numberofcolors));
              var nj = Math.ceil(numberofcolors / ni);
              var vx = imgd.width / (ni + 1);
              var vy = imgd.height / (nj + 1);
              for (var j = 0; j < nj; j += 1) {
                for (var i = 0; i < ni; i += 1) {
                  if (palette.length === numberofcolors) {
                    break;
                  } else {
                    idx = Math.floor((j + 1) * vy * imgd.width + (i + 1) * vx) * 4;
                    palette.push({
                      r: imgd.data[idx],
                      g: imgd.data[idx + 1],
                      b: imgd.data[idx + 2],
                      a: imgd.data[idx + 3]
                    });
                  }
                }
              }
              return palette;
            }
          }, {
            key: "generatepalette",
            value: function generatepalette(numberofcolors) {
              var palette = [];
              var rcnt;
              var gcnt;
              var bcnt;
              if (numberofcolors < 8) {
                var graystep = Math.floor(255 / (numberofcolors - 1));
                for (var i = 0; i < numberofcolors; i += 1) {
                  palette.push({
                    r: i * graystep,
                    g: i * graystep,
                    b: i * graystep,
                    a: 255
                  });
                }
              } else {
                var colorqnum = Math.floor(Math.pow(numberofcolors, 1 / 3));
                var colorstep = Math.floor(255 / (colorqnum - 1));
                var rndnum = numberofcolors - colorqnum * colorqnum * colorqnum;
                for (rcnt = 0; rcnt < colorqnum; rcnt += 1) {
                  for (gcnt = 0; gcnt < colorqnum; gcnt += 1) {
                    for (bcnt = 0; bcnt < colorqnum; bcnt += 1) {
                      palette.push({
                        r: rcnt * colorstep,
                        g: gcnt * colorstep,
                        b: bcnt * colorstep,
                        a: 255
                      });
                    }
                  }
                }
                for (rcnt = 0; rcnt < rndnum; rcnt += 1) {
                  palette.push({
                    r: Math.floor(Math.random() * 255),
                    g: Math.floor(Math.random() * 255),
                    b: Math.floor(Math.random() * 255),
                    a: Math.floor(Math.random() * 255)
                  });
                }
              }
              return palette;
            }
          }, {
            key: "layering",
            value: function layering(ii) {
              var layers = [];
              var val = 0;
              var ah = ii.array.length;
              var aw = ii.array[0].length;
              var n1;
              var n2;
              var n3;
              var n4;
              var n5;
              var n6;
              var n7;
              var n8;
              var i;
              var j;
              var k;
              for (k = 0; k < ii.palette.length; k += 1) {
                layers[k] = [];
                for (j = 0; j < ah; j += 1) {
                  layers[k][j] = [];
                  for (i = 0; i < aw; i += 1) {
                    layers[k][j][i] = 0;
                  }
                }
              }
              for (j = 1; j < ah - 1; j += 1) {
                for (i = 1; i < aw - 1; i += 1) {
                  val = ii.array[j][i];
                  n1 = ii.array[j - 1][i - 1] === val ? 1 : 0;
                  n2 = ii.array[j - 1][i] === val ? 1 : 0;
                  n3 = ii.array[j - 1][i + 1] === val ? 1 : 0;
                  n4 = ii.array[j][i - 1] === val ? 1 : 0;
                  n5 = ii.array[j][i + 1] === val ? 1 : 0;
                  n6 = ii.array[j + 1][i - 1] === val ? 1 : 0;
                  n7 = ii.array[j + 1][i] === val ? 1 : 0;
                  n8 = ii.array[j + 1][i + 1] === val ? 1 : 0;
                  layers[val][j + 1][i + 1] = 1 + n5 * 2 + n8 * 4 + n7 * 8;
                  if (!n4) {
                    layers[val][j + 1][i] = 0 + 2 + n7 * 4 + n6 * 8;
                  }
                  if (!n2) {
                    layers[val][j][i + 1] = 0 + n3 * 2 + n5 * 4 + 8;
                  }
                  if (!n1) {
                    layers[val][j][i] = 0 + n2 * 2 + 4 + n4 * 8;
                  }
                }
              }
              return layers;
            }
          }, {
            key: "layeringstep",
            value: function layeringstep(ii, cnum) {
              var layer = [];
              var ah = ii.array.length;
              var aw = ii.array[0].length;
              var i;
              var j;
              for (j = 0; j < ah; j += 1) {
                layer[j] = [];
                for (i = 0; i < aw; i += 1) {
                  layer[j][i] = 0;
                }
              }
              for (j = 1; j < ah; j += 1) {
                for (i = 1; i < aw; i += 1) {
                  layer[j][i] = (ii.array[j - 1][i - 1] === cnum ? 1 : 0) + (ii.array[j - 1][i] === cnum ? 2 : 0) + (ii.array[j][i - 1] === cnum ? 8 : 0) + (ii.array[j][i] === cnum ? 4 : 0);
                }
              }
              return layer;
            }
          }, {
            key: "pathscan",
            value: function pathscan(arr, pathomit) {
              var paths = [];
              var pacnt = 0;
              var pcnt = 0;
              var px = 0;
              var py = 0;
              var w = arr[0].length;
              var h = arr.length;
              var dir = 0;
              var pathfinished = true;
              var holepath = false;
              var lookuprow;
              for (var j = 0; j < h; j += 1) {
                for (var i = 0; i < w; i += 1) {
                  if (arr[j][i] === 4 || arr[j][i] === 11) {
                    px = i;
                    py = j;
                    paths[pacnt] = {};
                    paths[pacnt].points = [];
                    paths[pacnt].boundingbox = [px, py, px, py];
                    paths[pacnt].holechildren = [];
                    pathfinished = false;
                    pcnt = 0;
                    holepath = arr[j][i] === 11;
                    dir = 1;
                    while (!pathfinished) {
                      paths[pacnt].points[pcnt] = {};
                      paths[pacnt].points[pcnt].x = px - 1;
                      paths[pacnt].points[pcnt].y = py - 1;
                      paths[pacnt].points[pcnt].t = arr[py][px];
                      if (px - 1 < paths[pacnt].boundingbox[0]) {
                        paths[pacnt].boundingbox[0] = px - 1;
                      }
                      if (px - 1 > paths[pacnt].boundingbox[2]) {
                        paths[pacnt].boundingbox[2] = px - 1;
                      }
                      if (py - 1 < paths[pacnt].boundingbox[1]) {
                        paths[pacnt].boundingbox[1] = py - 1;
                      }
                      if (py - 1 > paths[pacnt].boundingbox[3]) {
                        paths[pacnt].boundingbox[3] = py - 1;
                      }
                      lookuprow = this.pathscan_combined_lookup[arr[py][px]][dir];
                      arr[py][px] = lookuprow[0];
                      dir = lookuprow[1];
                      px += lookuprow[2];
                      py += lookuprow[3];
                      if (px - 1 === paths[pacnt].points[0].x && py - 1 === paths[pacnt].points[0].y) {
                        pathfinished = true;
                        if (paths[pacnt].points.length < pathomit) {
                          paths.pop();
                        } else {
                          paths[pacnt].isholepath = !!holepath;
                          if (holepath) {
                            var parentidx = 0, parentbbox = [-1, -1, w + 1, h + 1];
                            for (var parentcnt = 0; parentcnt < pacnt; parentcnt++) {
                              if (!paths[parentcnt].isholepath && this.boundingboxincludes(paths[parentcnt].boundingbox, paths[pacnt].boundingbox) && this.boundingboxincludes(parentbbox, paths[parentcnt].boundingbox)) {
                                parentidx = parentcnt;
                                parentbbox = paths[parentcnt].boundingbox;
                              }
                            }
                            paths[parentidx].holechildren.push(pacnt);
                          }
                          pacnt += 1;
                        }
                      }
                      pcnt += 1;
                    }
                  }
                }
              }
              return paths;
            }
          }, {
            key: "boundingboxincludes",
            value: function boundingboxincludes(parentbbox, childbbox) {
              return parentbbox[0] < childbbox[0] && parentbbox[1] < childbbox[1] && parentbbox[2] > childbbox[2] && parentbbox[3] > childbbox[3];
            }
          }, {
            key: "batchpathscan",
            value: function batchpathscan(layers, pathomit) {
              var bpaths = [];
              for (var k in layers) {
                if (!layers.hasOwnProperty(k)) {
                  continue;
                }
                bpaths[k] = this.pathscan(layers[k], pathomit);
              }
              return bpaths;
            }
          }, {
            key: "internodes",
            value: function internodes(paths, options) {
              var ins = [];
              var palen = 0;
              var nextidx = 0;
              var nextidx2 = 0;
              var previdx = 0;
              var previdx2 = 0;
              var pacnt;
              var pcnt;
              for (pacnt = 0; pacnt < paths.length; pacnt += 1) {
                ins[pacnt] = {};
                ins[pacnt].points = [];
                ins[pacnt].boundingbox = paths[pacnt].boundingbox;
                ins[pacnt].holechildren = paths[pacnt].holechildren;
                ins[pacnt].isholepath = paths[pacnt].isholepath;
                palen = paths[pacnt].points.length;
                for (pcnt = 0; pcnt < palen; pcnt += 1) {
                  nextidx = (pcnt + 1) % palen;
                  nextidx2 = (pcnt + 2) % palen;
                  previdx = (pcnt - 1 + palen) % palen;
                  previdx2 = (pcnt - 2 + palen) % palen;
                  if (options.rightangleenhance && this.testrightangle(paths[pacnt], previdx2, previdx, pcnt, nextidx, nextidx2)) {
                    if (ins[pacnt].points.length > 0) {
                      ins[pacnt].points[ins[pacnt].points.length - 1].linesegment = this.getdirection(ins[pacnt].points[ins[pacnt].points.length - 1].x, ins[pacnt].points[ins[pacnt].points.length - 1].y, paths[pacnt].points[pcnt].x, paths[pacnt].points[pcnt].y);
                    }
                    ins[pacnt].points.push({
                      x: paths[pacnt].points[pcnt].x,
                      y: paths[pacnt].points[pcnt].y,
                      linesegment: this.getdirection(paths[pacnt].points[pcnt].x, paths[pacnt].points[pcnt].y, (paths[pacnt].points[pcnt].x + paths[pacnt].points[nextidx].x) / 2, (paths[pacnt].points[pcnt].y + paths[pacnt].points[nextidx].y) / 2)
                    });
                  }
                  ins[pacnt].points.push({
                    x: (paths[pacnt].points[pcnt].x + paths[pacnt].points[nextidx].x) / 2,
                    y: (paths[pacnt].points[pcnt].y + paths[pacnt].points[nextidx].y) / 2,
                    linesegment: this.getdirection((paths[pacnt].points[pcnt].x + paths[pacnt].points[nextidx].x) / 2, (paths[pacnt].points[pcnt].y + paths[pacnt].points[nextidx].y) / 2, (paths[pacnt].points[nextidx].x + paths[pacnt].points[nextidx2].x) / 2, (paths[pacnt].points[nextidx].y + paths[pacnt].points[nextidx2].y) / 2)
                  });
                }
              }
              return ins;
            }
          }, {
            key: "testrightangle",
            value: function testrightangle(path, idx1, idx2, idx3, idx4, idx5) {
              return path.points[idx3].x === path.points[idx1].x && path.points[idx3].x === path.points[idx2].x && path.points[idx3].y === path.points[idx4].y && path.points[idx3].y === path.points[idx5].y || path.points[idx3].y === path.points[idx1].y && path.points[idx3].y === path.points[idx2].y && path.points[idx3].x === path.points[idx4].x && path.points[idx3].x === path.points[idx5].x;
            }
          }, {
            key: "getdirection",
            value: function getdirection(x1, y1, x2, y2) {
              var val = 8;
              if (x1 < x2) {
                if (y1 < y2) {
                  val = 1;
                } else if (y1 > y2) {
                  val = 7;
                } else {
                  val = 0;
                }
              } else if (x1 > x2) {
                if (y1 < y2) {
                  val = 3;
                } else if (y1 > y2) {
                  val = 5;
                } else {
                  val = 4;
                }
              } else if (y1 < y2) {
                val = 2;
              } else if (y1 > y2) {
                val = 6;
              } else {
                val = 8;
              }
              return val;
            }
          }, {
            key: "batchinternodes",
            value: function batchinternodes(bpaths, options) {
              var binternodes = [];
              for (var k in bpaths) {
                if (!bpaths.hasOwnProperty(k)) {
                  continue;
                }
                binternodes[k] = this.internodes(bpaths[k], options);
              }
              return binternodes;
            }
          }, {
            key: "tracepath",
            value: function tracepath(path, ltres, qtres) {
              var pcnt = 0;
              var segtype1;
              var segtype2;
              var seqend;
              var smp = {};
              smp.segments = [];
              smp.boundingbox = path.boundingbox;
              smp.holechildren = path.holechildren;
              smp.isholepath = path.isholepath;
              while (pcnt < path.points.length) {
                var _context2;
                segtype1 = path.points[pcnt].linesegment;
                segtype2 = -1;
                seqend = pcnt + 1;
                while ((path.points[seqend].linesegment === segtype1 || path.points[seqend].linesegment === segtype2 || segtype2 === -1) && seqend < path.points.length - 1) {
                  if (path.points[seqend].linesegment !== segtype1 && segtype2 === -1) {
                    segtype2 = path.points[seqend].linesegment;
                  }
                  seqend += 1;
                }
                if (seqend === path.points.length - 1) {
                  seqend = 0;
                }
                smp.segments = concat_default()(_context2 = smp.segments).call(_context2, this.fitseq(path, ltres, qtres, pcnt, seqend));
                if (seqend > 0) {
                  pcnt = seqend;
                } else {
                  pcnt = path.points.length;
                }
              }
              return smp;
            }
          }, {
            key: "fitseq",
            value: function fitseq(path, ltres, qtres, seqstart, seqend) {
              var _context2;
              if (seqend > path.points.length || seqend < 0) {
                return [];
              }
              var errorpoint = seqstart, errorval = 0, curvepass = true, px, py, dist2;
              var tl = seqend - seqstart;
              if (tl < 0) {
                tl += path.points.length;
              }
              var vx = (path.points[seqend].x - path.points[seqstart].x) / tl, vy = (path.points[seqend].y - path.points[seqstart].y) / tl;
              var pcnt = (seqstart + 1) % path.points.length, pl;
              while (pcnt != seqend) {
                pl = pcnt - seqstart;
                if (pl < 0) {
                  pl += path.points.length;
                }
                px = path.points[seqstart].x + vx * pl;
                py = path.points[seqstart].y + vy * pl;
                dist2 = (path.points[pcnt].x - px) * (path.points[pcnt].x - px) + (path.points[pcnt].y - py) * (path.points[pcnt].y - py);
                if (dist2 > ltres) {
                  curvepass = false;
                }
                if (dist2 > errorval) {
                  errorpoint = pcnt;
                  errorval = dist2;
                }
                pcnt = (pcnt + 1) % path.points.length;
              }
              if (curvepass) {
                return [{
                  type: "L",
                  x1: path.points[seqstart].x,
                  y1: path.points[seqstart].y,
                  x2: path.points[seqend].x,
                  y2: path.points[seqend].y
                }];
              }
              var fitpoint = errorpoint;
              curvepass = true;
              errorval = 0;
              var t = (fitpoint - seqstart) / tl, t1 = (1 - t) * (1 - t), t2 = 2 * (1 - t) * t, t3 = t * t;
              var cpx = (t1 * path.points[seqstart].x + t3 * path.points[seqend].x - path.points[fitpoint].x) / -t2, cpy = (t1 * path.points[seqstart].y + t3 * path.points[seqend].y - path.points[fitpoint].y) / -t2;
              pcnt = seqstart + 1;
              while (pcnt != seqend) {
                t = (pcnt - seqstart) / tl;
                t1 = (1 - t) * (1 - t);
                t2 = 2 * (1 - t) * t;
                t3 = t * t;
                px = t1 * path.points[seqstart].x + t2 * cpx + t3 * path.points[seqend].x;
                py = t1 * path.points[seqstart].y + t2 * cpy + t3 * path.points[seqend].y;
                dist2 = (path.points[pcnt].x - px) * (path.points[pcnt].x - px) + (path.points[pcnt].y - py) * (path.points[pcnt].y - py);
                if (dist2 > qtres) {
                  curvepass = false;
                }
                if (dist2 > errorval) {
                  errorpoint = pcnt;
                  errorval = dist2;
                }
                pcnt = (pcnt + 1) % path.points.length;
              }
              if (curvepass) {
                return [{
                  type: "Q",
                  x1: path.points[seqstart].x,
                  y1: path.points[seqstart].y,
                  x2: cpx,
                  y2: cpy,
                  x3: path.points[seqend].x,
                  y3: path.points[seqend].y
                }];
              }
              var splitpoint = fitpoint;
              return concat_default()(_context2 = this.fitseq(path, ltres, qtres, seqstart, splitpoint)).call(_context2, this.fitseq(path, ltres, qtres, splitpoint, seqend));
            }
          }, {
            key: "batchtracepaths",
            value: function batchtracepaths(internodepaths, ltres, qtres) {
              var btracedpaths = [];
              for (var k in internodepaths) {
                if (!internodepaths.hasOwnProperty(k)) {
                  continue;
                }
                btracedpaths.push(this.tracepath(internodepaths[k], ltres, qtres));
              }
              return btracedpaths;
            }
          }, {
            key: "batchtracelayers",
            value: function batchtracelayers(binternodes, ltres, qtres) {
              var btbis = [];
              for (var k in binternodes) {
                if (!binternodes.hasOwnProperty(k)) {
                  continue;
                }
                btbis[k] = this.batchtracepaths(binternodes[k], ltres, qtres);
              }
              return btbis;
            }
          }, {
            key: "roundtodec",
            value: function roundtodec(val, places) {
              return Number(val.toFixed(places));
            }
          }, {
            key: "svgpathstring",
            value: function svgpathstring(tracedata, lnum, pathnum, options) {
              var _context3, _context4;
              var layer = tracedata.layers[lnum], smp = layer[pathnum], str = "", pcnt;
              if (options.linefilter && smp.segments.length < 3) {
                return str;
              }
              str = concat_default()(_context3 = "<path ".concat(options.desc ? concat_default()(_context4 = 'desc="l '.concat(lnum, " p ")).call(_context4, pathnum, '" ') : "")).call(_context3, this.tosvgcolorstr(tracedata.palette[lnum], options), 'd="');
              if (options.roundcoords === -1) {
                var _context5;
                str += concat_default()(_context5 = "M ".concat(smp.segments[0].x1 * options.scale, " ")).call(_context5, smp.segments[0].y1 * options.scale, " ");
                for (pcnt = 0; pcnt < smp.segments.length; pcnt++) {
                  var _context6, _context7;
                  str += concat_default()(_context6 = concat_default()(_context7 = "".concat(smp.segments[pcnt].type, " ")).call(_context7, smp.segments[pcnt].x2 * options.scale, " ")).call(_context6, smp.segments[pcnt].y2 * options.scale, " ");
                  if (smp.segments[pcnt].hasOwnProperty("x3")) {
                    var _context8;
                    str += concat_default()(_context8 = "".concat(smp.segments[pcnt].x3 * options.scale, " ")).call(_context8, smp.segments[pcnt].y3 * options.scale, " ");
                  }
                }
                str += "Z ";
              } else {
                var _context9;
                str += concat_default()(_context9 = "M ".concat(this.roundtodec(smp.segments[0].x1 * options.scale, options.roundcoords), " ")).call(_context9, this.roundtodec(smp.segments[0].y1 * options.scale, options.roundcoords), " ");
                for (pcnt = 0; pcnt < smp.segments.length; pcnt++) {
                  var _context10, _context11;
                  str += concat_default()(_context10 = concat_default()(_context11 = "".concat(smp.segments[pcnt].type, " ")).call(_context11, this.roundtodec(smp.segments[pcnt].x2 * options.scale, options.roundcoords), " ")).call(_context10, this.roundtodec(smp.segments[pcnt].y2 * options.scale, options.roundcoords), " ");
                  if (smp.segments[pcnt].hasOwnProperty("x3")) {
                    var _context12;
                    str += concat_default()(_context12 = "".concat(this.roundtodec(smp.segments[pcnt].x3 * options.scale, options.roundcoords), " ")).call(_context12, this.roundtodec(smp.segments[pcnt].y3 * options.scale, options.roundcoords), " ");
                  }
                }
                str += "Z ";
              }
              for (var hcnt = 0; hcnt < smp.holechildren.length; hcnt++) {
                var hsmp = layer[smp.holechildren[hcnt]];
                if (options.roundcoords === -1) {
                  if (hsmp.segments[hsmp.segments.length - 1].hasOwnProperty("x3")) {
                    var _context13;
                    str += concat_default()(_context13 = "M ".concat(hsmp.segments[hsmp.segments.length - 1].x3 * options.scale, " ")).call(_context13, hsmp.segments[hsmp.segments.length - 1].y3 * options.scale, " ");
                  } else {
                    var _context14;
                    str += concat_default()(_context14 = "M ".concat(hsmp.segments[hsmp.segments.length - 1].x2 * options.scale, " ")).call(_context14, hsmp.segments[hsmp.segments.length - 1].y2 * options.scale, " ");
                  }
                  for (pcnt = hsmp.segments.length - 1; pcnt >= 0; pcnt--) {
                    var _context16;
                    str += "".concat(hsmp.segments[pcnt].type, " ");
                    if (hsmp.segments[pcnt].hasOwnProperty("x3")) {
                      var _context15;
                      str += concat_default()(_context15 = "".concat(hsmp.segments[pcnt].x2 * options.scale, " ")).call(_context15, hsmp.segments[pcnt].y2 * options.scale, " ");
                    }
                    str += concat_default()(_context16 = "".concat(hsmp.segments[pcnt].x1 * options.scale, " ")).call(_context16, hsmp.segments[pcnt].y1 * options.scale, " ");
                  }
                } else {
                  if (hsmp.segments[hsmp.segments.length - 1].hasOwnProperty("x3")) {
                    var _context17;
                    str += concat_default()(_context17 = "M ".concat(this.roundtodec(hsmp.segments[hsmp.segments.length - 1].x3 * options.scale), " ")).call(_context17, this.roundtodec(hsmp.segments[hsmp.segments.length - 1].y3 * options.scale), " ");
                  } else {
                    var _context18;
                    str += concat_default()(_context18 = "M ".concat(this.roundtodec(hsmp.segments[hsmp.segments.length - 1].x2 * options.scale), " ")).call(_context18, this.roundtodec(hsmp.segments[hsmp.segments.length - 1].y2 * options.scale), " ");
                  }
                  for (pcnt = hsmp.segments.length - 1; pcnt >= 0; pcnt--) {
                    var _context20;
                    str += "".concat(hsmp.segments[pcnt].type, " ");
                    if (hsmp.segments[pcnt].hasOwnProperty("x3")) {
                      var _context19;
                      str += concat_default()(_context19 = "".concat(this.roundtodec(hsmp.segments[pcnt].x2 * options.scale), " ")).call(_context19, this.roundtodec(hsmp.segments[pcnt].y2 * options.scale), " ");
                    }
                    str += concat_default()(_context20 = "".concat(this.roundtodec(hsmp.segments[pcnt].x1 * options.scale), " ")).call(_context20, this.roundtodec(hsmp.segments[pcnt].y1 * options.scale), " ");
                  }
                }
                str += "Z ";
              }
              str += '" />';
              if (options.lcpr || options.qcpr) {
                for (pcnt = 0; pcnt < smp.segments.length; pcnt++) {
                  if (smp.segments[pcnt].hasOwnProperty("x3") && options.qcpr) {
                    var _context21, _context22, _context23, _context24, _context25, _context26, _context27, _context28, _context29, _context30, _context31, _context32, _context33, _context34;
                    str += concat_default()(_context21 = concat_default()(_context22 = concat_default()(_context23 = '<circle cx="'.concat(smp.segments[pcnt].x2 * options.scale, '" cy="')).call(_context23, smp.segments[pcnt].y2 * options.scale, '" r="')).call(_context22, options.qcpr, '" fill="cyan" stroke-width="')).call(_context21, options.qcpr * 0.2, '" stroke="black" />');
                    str += concat_default()(_context24 = concat_default()(_context25 = concat_default()(_context26 = '<circle cx="'.concat(smp.segments[pcnt].x3 * options.scale, '" cy="')).call(_context26, smp.segments[pcnt].y3 * options.scale, '" r="')).call(_context25, options.qcpr, '" fill="white" stroke-width="')).call(_context24, options.qcpr * 0.2, '" stroke="black" />');
                    str += concat_default()(_context27 = concat_default()(_context28 = concat_default()(_context29 = concat_default()(_context30 = '<line x1="'.concat(smp.segments[pcnt].x1 * options.scale, '" y1="')).call(_context30, smp.segments[pcnt].y1 * options.scale, '" x2="')).call(_context29, smp.segments[pcnt].x2 * options.scale, '" y2="')).call(_context28, smp.segments[pcnt].y2 * options.scale, '" stroke-width="')).call(_context27, options.qcpr * 0.2, '" stroke="cyan" />');
                    str += concat_default()(_context31 = concat_default()(_context32 = concat_default()(_context33 = concat_default()(_context34 = '<line x1="'.concat(smp.segments[pcnt].x2 * options.scale, '" y1="')).call(_context34, smp.segments[pcnt].y2 * options.scale, '" x2="')).call(_context33, smp.segments[pcnt].x3 * options.scale, '" y2="')).call(_context32, smp.segments[pcnt].y3 * options.scale, '" stroke-width="')).call(_context31, options.qcpr * 0.2, '" stroke="cyan" />');
                  }
                  if (!smp.segments[pcnt].hasOwnProperty("x3") && options.lcpr) {
                    var _context35, _context36, _context37;
                    str += concat_default()(_context35 = concat_default()(_context36 = concat_default()(_context37 = '<circle cx="'.concat(smp.segments[pcnt].x2 * options.scale, '" cy="')).call(_context37, smp.segments[pcnt].y2 * options.scale, '" r="')).call(_context36, options.lcpr, '" fill="white" stroke-width="')).call(_context35, options.lcpr * 0.2, '" stroke="black" />');
                  }
                }
                for (var hcnt = 0; hcnt < smp.holechildren.length; hcnt++) {
                  var hsmp = layer[smp.holechildren[hcnt]];
                  for (pcnt = 0; pcnt < hsmp.segments.length; pcnt++) {
                    if (hsmp.segments[pcnt].hasOwnProperty("x3") && options.qcpr) {
                      var _context38, _context39, _context40, _context41, _context42, _context43, _context44, _context45, _context46, _context47, _context48, _context49, _context50, _context51;
                      str += concat_default()(_context38 = concat_default()(_context39 = concat_default()(_context40 = '<circle cx="'.concat(hsmp.segments[pcnt].x2 * options.scale, '" cy="')).call(_context40, hsmp.segments[pcnt].y2 * options.scale, '" r="')).call(_context39, options.qcpr, '" fill="cyan" stroke-width="')).call(_context38, options.qcpr * 0.2, '" stroke="black" />');
                      str += concat_default()(_context41 = concat_default()(_context42 = concat_default()(_context43 = '<circle cx="'.concat(hsmp.segments[pcnt].x3 * options.scale, '" cy="')).call(_context43, hsmp.segments[pcnt].y3 * options.scale, '" r="')).call(_context42, options.qcpr, '" fill="white" stroke-width="')).call(_context41, options.qcpr * 0.2, '" stroke="black" />');
                      str += concat_default()(_context44 = concat_default()(_context45 = concat_default()(_context46 = concat_default()(_context47 = '<line x1="'.concat(hsmp.segments[pcnt].x1 * options.scale, '" y1="')).call(_context47, hsmp.segments[pcnt].y1 * options.scale, '" x2="')).call(_context46, hsmp.segments[pcnt].x2 * options.scale, '" y2="')).call(_context45, hsmp.segments[pcnt].y2 * options.scale, '" stroke-width="')).call(_context44, options.qcpr * 0.2, '" stroke="cyan" />');
                      str += concat_default()(_context48 = concat_default()(_context49 = concat_default()(_context50 = concat_default()(_context51 = '<line x1="'.concat(hsmp.segments[pcnt].x2 * options.scale, '" y1="')).call(_context51, hsmp.segments[pcnt].y2 * options.scale, '" x2="')).call(_context50, hsmp.segments[pcnt].x3 * options.scale, '" y2="')).call(_context49, hsmp.segments[pcnt].y3 * options.scale, '" stroke-width="')).call(_context48, options.qcpr * 0.2, '" stroke="cyan" />');
                    }
                    if (!hsmp.segments[pcnt].hasOwnProperty("x3") && options.lcpr) {
                      var _context52, _context53, _context54;
                      str += concat_default()(_context52 = concat_default()(_context53 = concat_default()(_context54 = '<circle cx="'.concat(hsmp.segments[pcnt].x2 * options.scale, '" cy="')).call(_context54, hsmp.segments[pcnt].y2 * options.scale, '" r="')).call(_context53, options.lcpr, '" fill="white" stroke-width="')).call(_context52, options.lcpr * 0.2, '" stroke="black" />');
                    }
                  }
                }
              }
              return str;
            }
          }, {
            key: "getsvgstring",
            value: function getsvgstring(tracedata, options) {
              var _context55, _context56, _context57;
              options = this.checkoptions(options);
              var w = tracedata.width * options.scale;
              var h = tracedata.height * options.scale;
              var svgstr = concat_default()(_context55 = "<svg ".concat(options.viewbox ? concat_default()(_context56 = 'viewBox="0 0 '.concat(w, " ")).call(_context56, h, '" ') : concat_default()(_context57 = 'width="'.concat(w, '" height="')).call(_context57, h, '" '), 'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version ')).call(_context55, this.versionnumber, '" >');
              for (var lcnt = 0; lcnt < tracedata.layers.length; lcnt += 1) {
                for (var pcnt = 0; pcnt < tracedata.layers[lcnt].length; pcnt += 1) {
                  if (!tracedata.layers[lcnt][pcnt].isholepath) {
                    svgstr += this.svgpathstring(tracedata, lcnt, pcnt, options);
                  }
                }
              }
              svgstr += "</svg>";
              return svgstr;
            }
          }, {
            key: "compareNumbers",
            value: function compareNumbers(a, b) {
              return a - b;
            }
          }, {
            key: "torgbastr",
            value: function torgbastr(c) {
              var _context58, _context59, _context60;
              return concat_default()(_context58 = concat_default()(_context59 = concat_default()(_context60 = "rgba(".concat(c.r, ",")).call(_context60, c.g, ",")).call(_context59, c.b, ",")).call(_context58, c.a, ")");
            }
          }, {
            key: "tosvgcolorstr",
            value: function tosvgcolorstr(c, options) {
              var _context61, _context62, _context63, _context64, _context65, _context66, _context67;
              return concat_default()(_context61 = concat_default()(_context62 = concat_default()(_context63 = concat_default()(_context64 = concat_default()(_context65 = concat_default()(_context66 = concat_default()(_context67 = 'fill="rgb('.concat(c.r, ",")).call(_context67, c.g, ",")).call(_context66, c.b, ')" stroke="rgb(')).call(_context65, c.r, ",")).call(_context64, c.g, ",")).call(_context63, c.b, ')" stroke-width="')).call(_context62, options.strokewidth, '" opacity="')).call(_context61, c.a / 255, '" ');
            }
          }, {
            key: "appendSVGString",
            value: function appendSVGString(svgstr, parentid) {
              var div;
              if (parentid) {
                div = document.getElementById(parentid);
                if (!div) {
                  div = document.createElement("div");
                  div.id = parentid;
                  document.body.appendChild(div);
                }
              } else {
                div = document.createElement("div");
                document.body.appendChild(div);
              }
              div.innerHTML += svgstr;
            }
          }, {
            key: "blur",
            value: function blur(imgd, radius, delta) {
              var i, j, k, d, idx, racc, gacc, bacc, aacc, wacc;
              var imgd2 = {
                width: imgd.width,
                height: imgd.height,
                data: []
              };
              radius = Math.floor(radius);
              if (radius < 1) {
                return imgd;
              }
              if (radius > 5) {
                radius = 5;
              }
              delta = Math.abs(delta);
              if (delta > 1024) {
                delta = 1024;
              }
              var thisgk = this.gks[radius - 1];
              for (j = 0; j < imgd.height; j++) {
                for (i = 0; i < imgd.width; i++) {
                  racc = 0;
                  gacc = 0;
                  bacc = 0;
                  aacc = 0;
                  wacc = 0;
                  for (k = -radius; k < radius + 1; k++) {
                    if (i + k > 0 && i + k < imgd.width) {
                      idx = (j * imgd.width + i + k) * 4;
                      racc += imgd.data[idx] * thisgk[k + radius];
                      gacc += imgd.data[idx + 1] * thisgk[k + radius];
                      bacc += imgd.data[idx + 2] * thisgk[k + radius];
                      aacc += imgd.data[idx + 3] * thisgk[k + radius];
                      wacc += thisgk[k + radius];
                    }
                  }
                  idx = (j * imgd.width + i) * 4;
                  imgd2.data[idx] = Math.floor(racc / wacc);
                  imgd2.data[idx + 1] = Math.floor(gacc / wacc);
                  imgd2.data[idx + 2] = Math.floor(bacc / wacc);
                  imgd2.data[idx + 3] = Math.floor(aacc / wacc);
                }
              }
              var himgd = new Uint8ClampedArray(imgd2.data);
              for (j = 0; j < imgd.height; j++) {
                for (i = 0; i < imgd.width; i++) {
                  racc = 0;
                  gacc = 0;
                  bacc = 0;
                  aacc = 0;
                  wacc = 0;
                  for (k = -radius; k < radius + 1; k++) {
                    if (j + k > 0 && j + k < imgd.height) {
                      idx = ((j + k) * imgd.width + i) * 4;
                      racc += himgd[idx] * thisgk[k + radius];
                      gacc += himgd[idx + 1] * thisgk[k + radius];
                      bacc += himgd[idx + 2] * thisgk[k + radius];
                      aacc += himgd[idx + 3] * thisgk[k + radius];
                      wacc += thisgk[k + radius];
                    }
                  }
                  idx = (j * imgd.width + i) * 4;
                  imgd2.data[idx] = Math.floor(racc / wacc);
                  imgd2.data[idx + 1] = Math.floor(gacc / wacc);
                  imgd2.data[idx + 2] = Math.floor(bacc / wacc);
                  imgd2.data[idx + 3] = Math.floor(aacc / wacc);
                }
              }
              for (j = 0; j < imgd.height; j++) {
                for (i = 0; i < imgd.width; i++) {
                  idx = (j * imgd.width + i) * 4;
                  d = Math.abs(imgd2.data[idx] - imgd.data[idx]) + Math.abs(imgd2.data[idx + 1] - imgd.data[idx + 1]) + Math.abs(imgd2.data[idx + 2] - imgd.data[idx + 2]) + Math.abs(imgd2.data[idx + 3] - imgd.data[idx + 3]);
                  if (d > delta) {
                    imgd2.data[idx] = imgd.data[idx];
                    imgd2.data[idx + 1] = imgd.data[idx + 1];
                    imgd2.data[idx + 2] = imgd.data[idx + 2];
                    imgd2.data[idx + 3] = imgd.data[idx + 3];
                  }
                }
              }
              return imgd2;
            }
          }, {
            key: "loadImage",
            value: function loadImage(url2, callback, options) {
              var img = new Image();
              if (options && options.corsenabled) {
                img.crossOrigin = "Anonymous";
              }
              img.src = url2;
              img.onload = function() {
                var canvas = document.createElement("canvas");
                canvas.width = img.width;
                canvas.height = img.height;
                var context = canvas.getContext("2d");
                context.drawImage(img, 0, 0);
                callback(canvas);
              };
            }
          }, {
            key: "getImgdata",
            value: function getImgdata(canvas) {
              var context = canvas.getContext("2d");
              return context.getImageData(0, 0, canvas.width, canvas.height);
            }
          }, {
            key: "drawLayers",
            value: function drawLayers(layers, palette, scale, parentid) {
              scale = scale || 1;
              var w, h, i, j, k;
              var div;
              if (parentid) {
                div = document.getElementById(parentid);
                if (!div) {
                  div = document.createElement("div");
                  div.id = parentid;
                  document.body.appendChild(div);
                }
              } else {
                div = document.createElement("div");
                document.body.appendChild(div);
              }
              for (k in layers) {
                if (!layers.hasOwnProperty(k)) {
                  continue;
                }
                w = layers[k][0].length;
                h = layers[k].length;
                var canvas = document.createElement("canvas");
                canvas.width = w * scale;
                canvas.height = h * scale;
                var context = canvas.getContext("2d");
                for (j = 0; j < h; j += 1) {
                  for (i = 0; i < w; i += 1) {
                    context.fillStyle = this.torgbastr(palette[layers[k][j][i] % palette.length]);
                    context.fillRect(i * scale, j * scale, scale, scale);
                  }
                }
                div.appendChild(canvas);
              }
            }
          }], [{
            key: "tracerDefaultOption",
            value: function tracerDefaultOption() {
              return {
                pathomit: 100,
                ltres: 0.1,
                qtres: 1,
                scale: 1,
                strokewidth: 5,
                viewbox: false,
                linefilter: true,
                desc: false,
                rightangleenhance: false,
                pal: [{
                  r: 0,
                  g: 0,
                  b: 0,
                  a: 255
                }, {
                  r: 255,
                  g: 255,
                  b: 255,
                  a: 255
                }]
              };
            }
          }]);
          return ImageTracer2;
        }();
        var action = {
          getActions: function getActions() {
            return {
              main: this._mainAction(),
              shape: this._shapeAction(),
              crop: this._cropAction(),
              resize: this._resizeAction(),
              flip: this._flipAction(),
              rotate: this._rotateAction(),
              text: this._textAction(),
              mask: this._maskAction(),
              draw: this._drawAction(),
              icon: this._iconAction(),
              filter: this._filterAction(),
              history: this._historyAction()
            };
          },
          _mainAction: function _mainAction() {
            var _this = this;
            var exitCropOnAction = function exitCropOnAction2() {
              if (_this.ui.submenu === "crop") {
                _this.stopDrawingMode();
                _this.ui.changeMenu("crop");
              }
            };
            var setAngleRangeBarOnAction = function setAngleRangeBarOnAction2(angle) {
              if (_this.ui.submenu === "rotate") {
                _this.ui.rotate.setRangeBarAngle("setAngle", angle);
              }
            };
            var setFilterStateRangeBarOnAction = function setFilterStateRangeBarOnAction2(filterOptions) {
              if (_this.ui.submenu === "filter") {
                filter_default()(_this.ui).setFilterState(filterOptions);
              }
            };
            var onEndUndoRedo = function onEndUndoRedo2(result) {
              setAngleRangeBarOnAction(result);
              setFilterStateRangeBarOnAction(result);
              return result;
            };
            var toggleZoomMode = function toggleZoomMode2() {
              var zoomMode = _this._graphics.getZoomMode();
              _this.stopDrawingMode();
              if (zoomMode !== zoomModes.ZOOM) {
                _this.startDrawingMode(drawingModes.ZOOM);
                _this._graphics.startZoomInMode();
              } else {
                _this._graphics.endZoomInMode();
              }
            };
            var toggleHandMode = function toggleHandMode2() {
              var zoomMode = _this._graphics.getZoomMode();
              _this.stopDrawingMode();
              if (zoomMode !== zoomModes.HAND) {
                _this.startDrawingMode(drawingModes.ZOOM);
                _this._graphics.startHandMode();
              } else {
                _this._graphics.endHandMode();
              }
            };
            var initFilterState = function initFilterState2() {
              if (filter_default()(_this.ui)) {
                filter_default()(_this.ui).initFilterCheckBoxState();
              }
            };
            return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
              initLoadImage: function initLoadImage(imagePath, imageName) {
                return _this.loadImageFromURL(imagePath, imageName).then(function(sizeValue) {
                  exitCropOnAction();
                  _this.ui.initializeImgUrl = imagePath;
                  _this.ui.resizeEditor({
                    imageSize: sizeValue
                  });
                  _this.clearUndoStack();
                  _this._invoker.fire(eventNames.EXECUTE_COMMAND, historyNames.LOAD_IMAGE);
                });
              },
              undo: function undo() {
                if (!_this.isEmptyUndoStack()) {
                  exitCropOnAction();
                  _this.deactivateAll();
                  _this.undo().then(onEndUndoRedo);
                }
              },
              redo: function redo() {
                if (!_this.isEmptyRedoStack()) {
                  exitCropOnAction();
                  _this.deactivateAll();
                  _this.redo().then(onEndUndoRedo);
                }
              },
              reset: function reset() {
                exitCropOnAction();
                _this.loadImageFromURL(_this.ui.initializeImgUrl, "resetImage").then(function(sizeValue) {
                  exitCropOnAction();
                  initFilterState();
                  _this.ui.resizeEditor({
                    imageSize: sizeValue
                  });
                  _this.clearUndoStack();
                  _this._initHistory();
                });
              },
              delete: function _delete() {
                _this.ui.changeHelpButtonEnabled("delete", false);
                exitCropOnAction();
                _this.removeActiveObject();
                _this.activeObjectId = null;
              },
              deleteAll: function deleteAll() {
                exitCropOnAction();
                _this.clearObjects();
                _this.ui.changeHelpButtonEnabled("delete", false);
                _this.ui.changeHelpButtonEnabled("deleteAll", false);
              },
              load: function load(file) {
                if (!isSupportFileApi()) {
                  alert("This browser does not support file-api");
                }
                _this.ui.initializeImgUrl = url_default().createObjectURL(file);
                _this.loadImageFromFile(file).then(function(sizeValue) {
                  exitCropOnAction();
                  initFilterState();
                  _this.clearUndoStack();
                  _this.ui.activeMenuEvent();
                  _this.ui.resizeEditor({
                    imageSize: sizeValue
                  });
                  _this._clearHistory();
                  _this._invoker.fire(eventNames.EXECUTE_COMMAND, historyNames.LOAD_IMAGE);
                })["catch"](function(message) {
                  return promise_default().reject(message);
                });
              },
              download: function download() {
                var dataURL = _this.toDataURL();
                var imageName = _this.getImageName();
                var blob, type, w;
                if (isSupportFileApi() && window.saveAs) {
                  blob = base64ToBlob2(dataURL);
                  type = blob.type.split("/")[1];
                  if (imageName.split(".").pop() !== type) {
                    imageName += ".".concat(type);
                  }
                  saveAs(blob, imageName);
                } else {
                  w = window.open();
                  w.document.body.innerHTML = "<img src='".concat(dataURL, "'>");
                }
              },
              history: function history(event) {
                _this.ui.toggleHistoryMenu(event);
              },
              zoomIn: function zoomIn() {
                _this.ui.toggleZoomButtonStatus("zoomIn");
                _this.deactivateAll();
                toggleZoomMode();
              },
              zoomOut: function zoomOut() {
                _this._graphics.zoomOut();
              },
              hand: function hand() {
                _this.ui.offZoomInButtonStatus();
                _this.ui.toggleZoomButtonStatus("hand");
                _this.deactivateAll();
                toggleHandMode();
              }
            }, this._commonAction());
          },
          _iconAction: function _iconAction() {
            var _this2 = this;
            return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
              changeColor: function changeColor(color) {
                if (_this2.activeObjectId) {
                  _this2.changeIconColor(_this2.activeObjectId, color);
                }
              },
              addIcon: function addIcon(iconType, iconColor) {
                _this2.startDrawingMode("ICON");
                _this2.setDrawingIcon(iconType, iconColor);
              },
              cancelAddIcon: function cancelAddIcon() {
                _this2.ui.icon.clearIconType();
                _this2.changeSelectableAll(true);
                _this2.changeCursor("default");
                _this2.stopDrawingMode();
              },
              registerDefaultIcons: function registerDefaultIcons(type, path) {
                var iconObj = {};
                iconObj[type] = path;
                _this2.registerIcons(iconObj);
              },
              registerCustomIcon: function registerCustomIcon(imgUrl, file) {
                var imagetracer = new ImageTracer();
                imagetracer.imageToSVG(imgUrl, function(svgstr) {
                  var _svgstr$match = svgstr.match(/path[^>]*d="([^"]*)"/), _svgstr$match2 = _slicedToArray(_svgstr$match, 2), svgPath = _svgstr$match2[1];
                  var iconObj = {};
                  iconObj[file.name] = svgPath;
                  _this2.registerIcons(iconObj);
                  _this2.addIcon(file.name, {
                    left: 100,
                    top: 100
                  });
                }, ImageTracer.tracerDefaultOption());
              }
            }, this._commonAction());
          },
          _drawAction: function _drawAction() {
            var _this3 = this;
            return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
              setDrawMode: function setDrawMode(type, settings) {
                _this3.stopDrawingMode();
                if (type === "free") {
                  _this3.startDrawingMode("FREE_DRAWING", settings);
                } else {
                  _this3.startDrawingMode("LINE_DRAWING", settings);
                }
              },
              setColor: function setColor(color) {
                _this3.setBrush({
                  color
                });
              }
            }, this._commonAction());
          },
          _maskAction: function _maskAction() {
            var _this4 = this;
            return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
              loadImageFromURL: function loadImageFromURL(imgUrl, file) {
                return _this4.loadImageFromURL(_this4.toDataURL(), "FilterImage").then(function() {
                  _this4.addImageObject(imgUrl).then(function() {
                    url_default().revokeObjectURL(file);
                  });
                  _this4._invoker.fire(eventNames.EXECUTE_COMMAND, historyNames.LOAD_MASK_IMAGE);
                });
              },
              applyFilter: function applyFilter() {
                _this4.applyFilter("mask", {
                  maskObjId: _this4.activeObjectId
                });
              }
            }, this._commonAction());
          },
          _textAction: function _textAction() {
            var _this5 = this;
            return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
              changeTextStyle: function changeTextStyle(styleObj, isSilent) {
                if (_this5.activeObjectId) {
                  _this5.changeTextStyle(_this5.activeObjectId, styleObj, isSilent);
                }
              }
            }, this._commonAction());
          },
          _rotateAction: function _rotateAction() {
            var _this6 = this;
            return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
              rotate: function rotate2(angle, isSilent) {
                _this6.rotate(angle, isSilent);
                _this6.ui.resizeEditor();
                _this6.ui.rotate.setRangeBarAngle("rotate", angle);
              },
              setAngle: function setAngle(angle, isSilent) {
                _this6.setAngle(angle, isSilent);
                _this6.ui.resizeEditor();
                _this6.ui.rotate.setRangeBarAngle("setAngle", angle);
              }
            }, this._commonAction());
          },
          _shapeAction: function _shapeAction() {
            var _this7 = this;
            return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
              changeShape: function changeShape(changeShapeObject, isSilent) {
                if (_this7.activeObjectId) {
                  _this7.changeShape(_this7.activeObjectId, changeShapeObject, isSilent);
                }
              },
              setDrawingShape: function setDrawingShape(shapeType) {
                _this7.setDrawingShape(shapeType);
              }
            }, this._commonAction());
          },
          _cropAction: function _cropAction() {
            var _this8 = this;
            return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
              crop: function crop2() {
                var cropRect = _this8.getCropzoneRect();
                if (cropRect && !isEmptyCropzone(cropRect)) {
                  _this8.crop(cropRect).then(function() {
                    _this8.stopDrawingMode();
                    _this8.ui.resizeEditor();
                    _this8.ui.changeMenu("crop");
                    _this8._invoker.fire(eventNames.EXECUTE_COMMAND, historyNames.CROP);
                  })["catch"](function(message) {
                    return promise_default().reject(message);
                  });
                }
              },
              cancel: function cancel() {
                _this8.stopDrawingMode();
                _this8.ui.changeMenu("crop");
              },
              preset: function preset(presetType) {
                switch (presetType) {
                  case "preset-square":
                    _this8.setCropzoneRect(1 / 1);
                    break;
                  case "preset-3-2":
                    _this8.setCropzoneRect(3 / 2);
                    break;
                  case "preset-4-3":
                    _this8.setCropzoneRect(4 / 3);
                    break;
                  case "preset-5-4":
                    _this8.setCropzoneRect(5 / 4);
                    break;
                  case "preset-7-5":
                    _this8.setCropzoneRect(7 / 5);
                    break;
                  case "preset-16-9":
                    _this8.setCropzoneRect(16 / 9);
                    break;
                  default:
                    _this8.setCropzoneRect();
                    _this8.ui.crop.changeApplyButtonStatus(false);
                    break;
                }
              }
            }, this._commonAction());
          },
          _resizeAction: function _resizeAction() {
            var _this9 = this;
            return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
              getCurrentDimensions: function getCurrentDimensions() {
                return _this9._graphics.getCurrentDimensions();
              },
              preview: function preview(actor, value, lockState) {
                var currentDimensions = _this9._graphics.getCurrentDimensions();
                var calcAspectRatio = function calcAspectRatio2() {
                  return currentDimensions.width / currentDimensions.height;
                };
                var dimensions = {};
                switch (actor) {
                  case "width":
                    dimensions.width = value;
                    if (lockState) {
                      dimensions.height = value / calcAspectRatio();
                    } else {
                      dimensions.height = currentDimensions.height;
                    }
                    break;
                  case "height":
                    dimensions.height = value;
                    if (lockState) {
                      dimensions.width = value * calcAspectRatio();
                    } else {
                      dimensions.width = currentDimensions.width;
                    }
                    break;
                  default:
                    dimensions = currentDimensions;
                }
                _this9._graphics.resize(dimensions).then(function() {
                  _this9.ui.resizeEditor();
                });
                if (lockState) {
                  _this9.ui.resize.setWidthValue(dimensions.width);
                  _this9.ui.resize.setHeightValue(dimensions.height);
                }
              },
              lockAspectRatio: function lockAspectRatio(lockState, min2, max2) {
                var _this9$_graphics$getC = _this9._graphics.getCurrentDimensions(), width = _this9$_graphics$getC.width, height = _this9$_graphics$getC.height;
                var aspectRatio = width / height;
                if (lockState) {
                  if (width > height) {
                    var pMax = max2 / aspectRatio;
                    var pMin = min2 * aspectRatio;
                    _this9.ui.resize.setLimit({
                      minWidth: pMin > min2 ? pMin : min2,
                      minHeight: min2,
                      maxWidth: max2,
                      maxHeight: pMax < max2 ? pMax : max2
                    });
                  } else {
                    var _pMax = max2 * aspectRatio;
                    var _pMin = min2 / aspectRatio;
                    _this9.ui.resize.setLimit({
                      minWidth: min2,
                      minHeight: _pMin > min2 ? _pMin : min2,
                      maxWidth: _pMax < max2 ? _pMax : max2,
                      maxHeight: max2
                    });
                  }
                } else {
                  _this9.ui.resize.setLimit({
                    minWidth: min2,
                    minHeight: min2,
                    maxWidth: max2,
                    maxHeight: max2
                  });
                }
              },
              resize: function resize2() {
                var dimensions = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null;
                if (!dimensions) {
                  dimensions = _this9._graphics.getCurrentDimensions();
                }
                _this9.resize(dimensions).then(function() {
                  _this9._graphics.setOriginalDimensions(dimensions);
                  _this9.stopDrawingMode();
                  _this9.ui.resizeEditor();
                  _this9.ui.changeMenu("resize");
                })["catch"](function(message) {
                  return promise_default().reject(message);
                });
              },
              reset: function reset() {
                var standByMode = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
                var dimensions = _this9._graphics.getOriginalDimensions();
                _this9.ui.resize.setWidthValue(dimensions.width, true);
                _this9.ui.resize.setHeightValue(dimensions.height, true);
                _this9._graphics.resize(dimensions).then(function() {
                  if (!standByMode) {
                    _this9.stopDrawingMode();
                    _this9.ui.resizeEditor();
                    _this9.ui.changeMenu("resize");
                  }
                });
              }
            }, this._commonAction());
          },
          _flipAction: function _flipAction() {
            var _this10 = this;
            return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
              flip: function flip2(flipType) {
                return _this10[flipType]();
              }
            }, this._commonAction());
          },
          _filterAction: function _filterAction() {
            var _this11 = this;
            return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
              applyFilter: function applyFilter(applying, type, options, isSilent) {
                if (applying) {
                  _this11.applyFilter(type, options, isSilent);
                } else if (_this11.hasFilter(type)) {
                  _this11.removeFilter(type);
                }
              }
            }, this._commonAction());
          },
          setReAction: function setReAction() {
            var _this12 = this;
            this.on({
              undoStackChanged: function undoStackChanged(length) {
                if (length) {
                  _this12.ui.changeHelpButtonEnabled("undo", true);
                  _this12.ui.changeHelpButtonEnabled("reset", true);
                } else {
                  _this12.ui.changeHelpButtonEnabled("undo", false);
                  _this12.ui.changeHelpButtonEnabled("reset", false);
                }
                _this12.ui.resizeEditor();
              },
              redoStackChanged: function redoStackChanged(length) {
                if (length) {
                  _this12.ui.changeHelpButtonEnabled("redo", true);
                } else {
                  _this12.ui.changeHelpButtonEnabled("redo", false);
                }
                _this12.ui.resizeEditor();
              },
              objectActivated: function objectActivated(obj) {
                var _context2, _context22;
                _this12.activeObjectId = obj.id;
                _this12.ui.changeHelpButtonEnabled("delete", true);
                _this12.ui.changeHelpButtonEnabled("deleteAll", true);
                if (obj.type === "cropzone") {
                  _this12.ui.crop.changeApplyButtonStatus(true);
                } else if (index_of_default()(_context2 = ["rect", "circle", "triangle"]).call(_context2, obj.type) > -1) {
                  _this12.stopDrawingMode();
                  if (_this12.ui.submenu !== "shape") {
                    _this12.ui.changeMenu("shape", false, false);
                  }
                  _this12.ui.shape.setShapeStatus({
                    strokeColor: obj.stroke,
                    strokeWidth: obj.strokeWidth,
                    fillColor: fill_default()(obj)
                  });
                  _this12.ui.shape.setMaxStrokeValue(Math.min(obj.width, obj.height));
                } else if (obj.type === "path" || obj.type === "line") {
                  if (_this12.ui.submenu !== "draw") {
                    _this12.ui.changeMenu("draw", false, false);
                    _this12.ui.draw.changeStandbyMode();
                  }
                } else if (index_of_default()(_context22 = ["i-text", "text"]).call(_context22, obj.type) > -1) {
                  if (_this12.ui.submenu !== "text") {
                    _this12.ui.changeMenu("text", false, false);
                  }
                  _this12.ui.text.setTextStyleStateOnAction(obj);
                } else if (obj.type === "icon") {
                  _this12.stopDrawingMode();
                  if (_this12.ui.submenu !== "icon") {
                    _this12.ui.changeMenu("icon", false, false);
                  }
                  _this12.ui.icon.setIconPickerColor(fill_default()(obj));
                }
              },
              addText: function addText(pos) {
                var _this12$ui$text = _this12.ui.text, fill = _this12$ui$text.textColor, fontSize = _this12$ui$text.fontSize, fontStyle = _this12$ui$text.fontStyle, fontWeight = _this12$ui$text.fontWeight, underline = _this12$ui$text.underline;
                var fontFamily = "Noto Sans";
                _this12.addText("Double Click", {
                  position: pos.originPosition,
                  styles: {
                    fill,
                    fontSize,
                    fontFamily,
                    fontStyle,
                    fontWeight,
                    underline
                  }
                }).then(function() {
                  _this12.changeCursor("default");
                });
              },
              addObjectAfter: function addObjectAfter(obj) {
                var _context3;
                if (obj.type === "icon") {
                  _this12.ui.icon.changeStandbyMode();
                } else if (index_of_default()(_context3 = ["rect", "circle", "triangle"]).call(_context3, obj.type) > -1) {
                  _this12.ui.shape.setMaxStrokeValue(Math.min(obj.width, obj.height));
                  _this12.ui.shape.changeStandbyMode();
                }
              },
              objectScaled: function objectScaled(obj) {
                var _context4, _context5;
                if (index_of_default()(_context4 = ["i-text", "text"]).call(_context4, obj.type) > -1) {
                  _this12.ui.text.fontSize = toInteger(obj.fontSize);
                } else if (index_of_default()(_context5 = ["rect", "circle", "triangle"]).call(_context5, obj.type) >= 0) {
                  var width = obj.width, height = obj.height;
                  var strokeValue = _this12.ui.shape.getStrokeValue();
                  if (width < strokeValue) {
                    _this12.ui.shape.setStrokeValue(width);
                  }
                  if (height < strokeValue) {
                    _this12.ui.shape.setStrokeValue(height);
                  }
                }
              },
              selectionCleared: function selectionCleared() {
                _this12.activeObjectId = null;
                if (_this12.ui.submenu === "text") {
                  _this12.changeCursor("text");
                } else if (!includes(["draw", "crop", "resize"], _this12.ui.submenu)) {
                  _this12.stopDrawingMode();
                }
              }
            });
          },
          _historyAction: function _historyAction() {
            var _this13 = this;
            return {
              undo: function undo(count) {
                return _this13.undo(count);
              },
              redo: function redo(count) {
                return _this13.redo(count);
              }
            };
          },
          _commonAction: function _commonAction() {
            var _this14 = this, _context6, _context7, _context8, _context9;
            var TEXT2 = drawingModes.TEXT, CROPPER = drawingModes.CROPPER, SHAPE2 = drawingModes.SHAPE, ZOOM = drawingModes.ZOOM, RESIZE2 = drawingModes.RESIZE;
            return {
              modeChange: function modeChange(menu) {
                switch (menu) {
                  case drawingMenuNames.TEXT:
                    _this14._changeActivateMode(TEXT2);
                    break;
                  case drawingMenuNames.CROP:
                    _this14.startDrawingMode(CROPPER);
                    break;
                  case drawingMenuNames.SHAPE:
                    _this14._changeActivateMode(SHAPE2);
                    _this14.setDrawingShape(_this14.ui.shape.type, _this14.ui.shape.options);
                    break;
                  case drawingMenuNames.ZOOM:
                    _this14.startDrawingMode(ZOOM);
                    break;
                  case drawingMenuNames.RESIZE:
                    _this14.startDrawingMode(RESIZE2);
                    break;
                }
              },
              deactivateAll: bind_default()(_context6 = this.deactivateAll).call(_context6, this),
              changeSelectableAll: bind_default()(_context7 = this.changeSelectableAll).call(_context7, this),
              discardSelection: bind_default()(_context8 = this.discardSelection).call(_context8, this),
              stopDrawingMode: bind_default()(_context9 = this.stopDrawingMode).call(_context9, this)
            };
          },
          mixin: function mixin(ImageEditor3) {
            (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)(ImageEditor3.prototype, this);
          }
        };
        var instance_map = __webpack_require__(899);
        var map_default = /* @__PURE__ */ __webpack_require__.n(instance_map);
        var Component = /* @__PURE__ */ function() {
          function Component2(name, graphics2) {
            _classCallCheck(this, Component2);
            this.name = name;
            this.graphics = graphics2;
          }
          _createClass(Component2, [{
            key: "fire",
            value: function fire() {
              var context = this.graphics;
              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                args[_key] = arguments[_key];
              }
              return this.graphics.fire.apply(context, args);
            }
          }, {
            key: "setCanvasImage",
            value: function setCanvasImage(name, oImage) {
              this.graphics.setCanvasImage(name, oImage);
            }
          }, {
            key: "getCanvasElement",
            value: function getCanvasElement() {
              return this.graphics.getCanvasElement();
            }
          }, {
            key: "getCanvas",
            value: function getCanvas() {
              return this.graphics.getCanvas();
            }
          }, {
            key: "getCanvasImage",
            value: function getCanvasImage() {
              return this.graphics.getCanvasImage();
            }
          }, {
            key: "getImageName",
            value: function getImageName() {
              return this.graphics.getImageName();
            }
          }, {
            key: "getEditor",
            value: function getEditor() {
              return this.graphics.getEditor();
            }
          }, {
            key: "getName",
            value: function getName() {
              return this.name;
            }
          }, {
            key: "setImageProperties",
            value: function setImageProperties(setting, withRendering) {
              this.graphics.setImageProperties(setting, withRendering);
            }
          }, {
            key: "setCanvasCssDimension",
            value: function setCanvasCssDimension(dimension) {
              this.graphics.setCanvasCssDimension(dimension);
            }
          }, {
            key: "setCanvasBackstoreDimension",
            value: function setCanvasBackstoreDimension(dimension) {
              this.graphics.setCanvasBackstoreDimension(dimension);
            }
          }, {
            key: "adjustCanvasDimension",
            value: function adjustCanvasDimension() {
              this.graphics.adjustCanvasDimension();
            }
          }, {
            key: "adjustCanvasDimensionBase",
            value: function adjustCanvasDimensionBase() {
              this.graphics.adjustCanvasDimensionBase();
            }
          }]);
          return Component2;
        }();
        var component = Component;
        function imageLoader_createSuper(Derived) {
          var hasNativeReflectConstruct = imageLoader_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function imageLoader_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var imageOption = {
          padding: 0,
          crossOrigin: "Anonymous"
        };
        var ImageLoader = /* @__PURE__ */ function(_Component) {
          _inherits(ImageLoader2, _Component);
          var _super = imageLoader_createSuper(ImageLoader2);
          function ImageLoader2(graphics2) {
            _classCallCheck(this, ImageLoader2);
            return _super.call(this, componentNames.IMAGE_LOADER, graphics2);
          }
          _createClass(ImageLoader2, [{
            key: "load",
            value: function load(imageName, img) {
              var _this = this;
              var promise;
              if (!imageName && !img) {
                var canvas = this.getCanvas();
                canvas.backgroundImage = null;
                canvas.renderAll();
                promise = new (promise_default())(function(resolve) {
                  _this.setCanvasImage("", null);
                  resolve();
                });
              } else {
                promise = this._setBackgroundImage(img).then(function(oImage) {
                  _this.setCanvasImage(imageName, oImage);
                  _this.adjustCanvasDimension();
                  return oImage;
                });
              }
              return promise;
            }
          }, {
            key: "_setBackgroundImage",
            value: function _setBackgroundImage(img) {
              var _this2 = this;
              if (!img) {
                return promise_default().reject(rejectMessages.loadImage);
              }
              return new (promise_default())(function(resolve, reject) {
                var canvas = _this2.getCanvas();
                canvas.setBackgroundImage(img, function() {
                  var oImage = canvas.backgroundImage;
                  if (oImage && oImage.getElement()) {
                    resolve(oImage);
                  } else {
                    reject(rejectMessages.loadingImageFailed);
                  }
                }, imageOption);
              });
            }
          }]);
          return ImageLoader2;
        }(component);
        var imageLoader = ImageLoader;
        var CORNER_TYPE_TOP_LEFT = "tl";
        var CORNER_TYPE_TOP_RIGHT = "tr";
        var CORNER_TYPE_MIDDLE_TOP = "mt";
        var CORNER_TYPE_MIDDLE_LEFT = "ml";
        var CORNER_TYPE_MIDDLE_RIGHT = "mr";
        var CORNER_TYPE_MIDDLE_BOTTOM = "mb";
        var CORNER_TYPE_BOTTOM_LEFT = "bl";
        var CORNER_TYPE_BOTTOM_RIGHT = "br";
        var CORNER_TYPE_LIST = [CORNER_TYPE_TOP_LEFT, CORNER_TYPE_TOP_RIGHT, CORNER_TYPE_MIDDLE_TOP, CORNER_TYPE_MIDDLE_LEFT, CORNER_TYPE_MIDDLE_RIGHT, CORNER_TYPE_MIDDLE_BOTTOM, CORNER_TYPE_BOTTOM_LEFT, CORNER_TYPE_BOTTOM_RIGHT];
        var NOOP_FUNCTION = function NOOP_FUNCTION2() {
        };
        function cornerTypeValid(selectedCorner) {
          return index_of_default()(CORNER_TYPE_LIST).call(CORNER_TYPE_LIST, selectedCorner) >= 0;
        }
        function getScaleBasis(diffX, diffY) {
          return diffX > diffY ? "width" : "height";
        }
        var Cropzone = fabric.fabric.util.createClass(fabric.fabric.Rect, {
          initialize: function initialize(canvas, options, extendsOptions) {
            options = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend(options, extendsOptions);
            options.type = "cropzone";
            this.callSuper("initialize", options);
            this._addEventHandler();
            this.canvas = canvas;
            this.options = options;
          },
          canvasEventDelegation: function canvasEventDelegation(eventName) {
            var _context2;
            var delegationState = "unregistered";
            var isRegistered = this.canvasEventTrigger[eventName] !== NOOP_FUNCTION;
            if (isRegistered) {
              delegationState = "registered";
            } else if (index_of_default()(_context2 = [eventNames.OBJECT_MOVED, eventNames.OBJECT_SCALED]).call(_context2, eventName) < 0) {
              delegationState = "none";
            }
            return delegationState;
          },
          canvasEventRegister: function canvasEventRegister(eventName, eventTrigger) {
            this.canvasEventTrigger[eventName] = eventTrigger;
          },
          _addEventHandler: function _addEventHandler() {
            var _this$canvasEventTrig, _context2, _context3, _context4, _context5;
            this.canvasEventTrigger = (_this$canvasEventTrig = {}, _defineProperty(_this$canvasEventTrig, eventNames.OBJECT_MOVED, NOOP_FUNCTION), _defineProperty(_this$canvasEventTrig, eventNames.OBJECT_SCALED, NOOP_FUNCTION), _this$canvasEventTrig);
            this.on({
              moving: bind_default()(_context2 = this._onMoving).call(_context2, this),
              scaling: bind_default()(_context3 = this._onScaling).call(_context3, this)
            });
            fabric.fabric.util.addListener(document, "keydown", bind_default()(_context4 = this._onKeyDown).call(_context4, this));
            fabric.fabric.util.addListener(document, "keyup", bind_default()(_context5 = this._onKeyUp).call(_context5, this));
          },
          _renderCropzone: function _renderCropzone(ctx) {
            var cropzoneDashLineWidth = 7;
            var cropzoneDashLineOffset = 7;
            var originalFlipX = this.flipX ? -1 : 1;
            var originalFlipY = this.flipY ? -1 : 1;
            var originalScaleX = originalFlipX / this.scaleX;
            var originalScaleY = originalFlipY / this.scaleY;
            ctx.scale(originalScaleX, originalScaleY);
            this._fillOuterRect(ctx, "rgba(0, 0, 0, 0.5)");
            if (this.options.lineWidth) {
              this._fillInnerRect(ctx);
              this._strokeBorder(ctx, "rgb(255, 255, 255)", {
                lineWidth: this.options.lineWidth
              });
            } else {
              this._strokeBorder(ctx, "rgb(0, 0, 0)", {
                lineDashWidth: cropzoneDashLineWidth
              });
              this._strokeBorder(ctx, "rgb(255, 255, 255)", {
                lineDashWidth: cropzoneDashLineWidth,
                lineDashOffset: cropzoneDashLineOffset
              });
            }
            ctx.scale(1 / originalScaleX, 1 / originalScaleY);
          },
          _render: function _render(ctx) {
            this.callSuper("_render", ctx);
            this._renderCropzone(ctx);
          },
          _fillOuterRect: function _fillOuterRect(ctx, fillStyle) {
            var _this$_getCoordinates = this._getCoordinates(), x = _this$_getCoordinates.x, y = _this$_getCoordinates.y;
            ctx.save();
            ctx.fillStyle = fillStyle;
            ctx.beginPath();
            ctx.moveTo(x[0] - 1, y[0] - 1);
            ctx.lineTo(x[3] + 1, y[0] - 1);
            ctx.lineTo(x[3] + 1, y[3] + 1);
            ctx.lineTo(x[0] - 1, y[3] + 1);
            ctx.lineTo(x[0] - 1, y[0] - 1);
            ctx.closePath();
            ctx.moveTo(x[1], y[1]);
            ctx.lineTo(x[1], y[2]);
            ctx.lineTo(x[2], y[2]);
            ctx.lineTo(x[2], y[1]);
            ctx.lineTo(x[1], y[1]);
            ctx.closePath();
            fill_default()(ctx).call(ctx);
            ctx.restore();
          },
          _fillInnerRect: function _fillInnerRect(ctx) {
            var _this$_getCoordinates2 = this._getCoordinates(), outerX = _this$_getCoordinates2.x, outerY = _this$_getCoordinates2.y;
            var x = this._caculateInnerPosition(outerX, (outerX[2] - outerX[1]) / 3);
            var y = this._caculateInnerPosition(outerY, (outerY[2] - outerY[1]) / 3);
            ctx.save();
            ctx.strokeStyle = "rgba(255, 255, 255, 0.7)";
            ctx.lineWidth = this.options.lineWidth;
            ctx.beginPath();
            ctx.moveTo(x[0], y[1]);
            ctx.lineTo(x[3], y[1]);
            ctx.moveTo(x[0], y[2]);
            ctx.lineTo(x[3], y[2]);
            ctx.moveTo(x[1], y[0]);
            ctx.lineTo(x[1], y[3]);
            ctx.moveTo(x[2], y[0]);
            ctx.lineTo(x[2], y[3]);
            ctx.stroke();
            ctx.closePath();
            ctx.restore();
          },
          _caculateInnerPosition: function _caculateInnerPosition(outer, size) {
            var position = [];
            position[0] = outer[1];
            position[1] = outer[1] + size;
            position[2] = outer[1] + size * 2;
            position[3] = outer[2];
            return position;
          },
          _getCoordinates: function _getCoordinates() {
            var canvas = this.canvas, width = this.width, height = this.height, left = this.left, top = this.top;
            var halfWidth = width / 2;
            var halfHeight = height / 2;
            var canvasHeight = canvas.getHeight();
            var canvasWidth = canvas.getWidth();
            return {
              x: map_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), [
                -(halfWidth + left),
                -halfWidth,
                halfWidth,
                halfWidth + (canvasWidth - left - width)
              ], Math.ceil),
              y: map_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), [
                -(halfHeight + top),
                -halfHeight,
                halfHeight,
                halfHeight + (canvasHeight - top - height)
              ], Math.ceil)
            };
          },
          _strokeBorder: function _strokeBorder(ctx, strokeStyle, _ref) {
            var lineDashWidth = _ref.lineDashWidth, lineDashOffset = _ref.lineDashOffset, lineWidth = _ref.lineWidth;
            var halfWidth = this.width / 2;
            var halfHeight = this.height / 2;
            ctx.save();
            ctx.strokeStyle = strokeStyle;
            if (ctx.setLineDash) {
              ctx.setLineDash([lineDashWidth, lineDashWidth]);
            }
            if (lineDashOffset) {
              ctx.lineDashOffset = lineDashOffset;
            }
            if (lineWidth) {
              ctx.lineWidth = lineWidth;
            }
            ctx.beginPath();
            ctx.moveTo(-halfWidth, -halfHeight);
            ctx.lineTo(halfWidth, -halfHeight);
            ctx.lineTo(halfWidth, halfHeight);
            ctx.lineTo(-halfWidth, halfHeight);
            ctx.lineTo(-halfWidth, -halfHeight);
            ctx.stroke();
            ctx.restore();
          },
          _onMoving: function _onMoving() {
            var height = this.height, width = this.width, left = this.left, top = this.top;
            var maxLeft = this.canvas.getWidth() - width;
            var maxTop = this.canvas.getHeight() - height;
            this.left = clamp(left, 0, maxLeft);
            this.top = clamp(top, 0, maxTop);
            this.canvasEventTrigger[eventNames.OBJECT_MOVED](this);
          },
          _onScaling: function _onScaling(fEvent) {
            var selectedCorner = fEvent.transform.corner;
            var pointer = this.canvas.getPointer(fEvent.e);
            var settings = this._calcScalingSizeFromPointer(pointer, selectedCorner);
            this.scale(1).set(settings);
            this.canvasEventTrigger[eventNames.OBJECT_SCALED](this);
          },
          _calcScalingSizeFromPointer: function _calcScalingSizeFromPointer(pointer, selectedCorner) {
            var isCornerTypeValid = cornerTypeValid(selectedCorner);
            return isCornerTypeValid && this._resizeCropZone(pointer, selectedCorner);
          },
          adjustRatioCropzoneSize: function adjustRatioCropzoneSize(_ref2) {
            var width = _ref2.width, height = _ref2.height, leftMaker = _ref2.leftMaker, topMaker = _ref2.topMaker, maxWidth = _ref2.maxWidth, maxHeight = _ref2.maxHeight, scaleTo = _ref2.scaleTo;
            width = maxWidth ? clamp(width, 1, maxWidth) : width;
            height = maxHeight ? clamp(height, 1, maxHeight) : height;
            if (!this.presetRatio) {
              if (this._withShiftKey) {
                if (width > height) {
                  height = width;
                } else if (height > width) {
                  width = height;
                }
              }
              return {
                width,
                height,
                left: leftMaker(width),
                top: topMaker(height)
              };
            }
            if (scaleTo === "width") {
              height = width / this.presetRatio;
            } else {
              width = height * this.presetRatio;
            }
            var maxScaleFactor = Math.min(maxWidth / width, maxHeight / height);
            if (maxScaleFactor <= 1) {
              var _context6;
              var _map = map_default()(_context6 = [width, height]).call(_context6, function(v) {
                return v * maxScaleFactor;
              });
              var _map2 = _slicedToArray(_map, 2);
              width = _map2[0];
              height = _map2[1];
            }
            return {
              width,
              height,
              left: leftMaker(width),
              top: topMaker(height)
            };
          },
          _getCropzoneRectInfo: function _getCropzoneRectInfo() {
            var _this$canvas = this.canvas, canvasWidth = _this$canvas.width, canvasHeight = _this$canvas.height;
            var _this$getBoundingRect = this.getBoundingRect(false, true), rectTop = _this$getBoundingRect.top, rectLeft = _this$getBoundingRect.left, rectWidth = _this$getBoundingRect.width, rectHeight = _this$getBoundingRect.height;
            return {
              rectTop,
              rectLeft,
              rectWidth,
              rectHeight,
              rectRight: rectLeft + rectWidth,
              rectBottom: rectTop + rectHeight,
              canvasWidth,
              canvasHeight
            };
          },
          _resizeCropZone: function _resizeCropZone(_ref3, corner) {
            var x = _ref3.x, y = _ref3.y;
            var _this$_getCropzoneRec = this._getCropzoneRectInfo(), rectWidth = _this$_getCropzoneRec.rectWidth, rectHeight = _this$_getCropzoneRec.rectHeight, rectTop = _this$_getCropzoneRec.rectTop, rectLeft = _this$_getCropzoneRec.rectLeft, rectBottom = _this$_getCropzoneRec.rectBottom, rectRight = _this$_getCropzoneRec.rectRight, canvasWidth = _this$_getCropzoneRec.canvasWidth, canvasHeight = _this$_getCropzoneRec.canvasHeight;
            var resizeInfoMap = {
              tl: {
                width: rectRight - x,
                height: rectBottom - y,
                leftMaker: function leftMaker(newWidth) {
                  return rectRight - newWidth;
                },
                topMaker: function topMaker(newHeight) {
                  return rectBottom - newHeight;
                },
                maxWidth: rectRight,
                maxHeight: rectBottom,
                scaleTo: getScaleBasis(rectLeft - x, rectTop - y)
              },
              tr: {
                width: x - rectLeft,
                height: rectBottom - y,
                leftMaker: function leftMaker() {
                  return rectLeft;
                },
                topMaker: function topMaker(newHeight) {
                  return rectBottom - newHeight;
                },
                maxWidth: canvasWidth - rectLeft,
                maxHeight: rectBottom,
                scaleTo: getScaleBasis(x - rectRight, rectTop - y)
              },
              mt: {
                width: rectWidth,
                height: rectBottom - y,
                leftMaker: function leftMaker() {
                  return rectLeft;
                },
                topMaker: function topMaker(newHeight) {
                  return rectBottom - newHeight;
                },
                maxWidth: canvasWidth - rectLeft,
                maxHeight: rectBottom,
                scaleTo: "height"
              },
              ml: {
                width: rectRight - x,
                height: rectHeight,
                leftMaker: function leftMaker(newWidth) {
                  return rectRight - newWidth;
                },
                topMaker: function topMaker() {
                  return rectTop;
                },
                maxWidth: rectRight,
                maxHeight: canvasHeight - rectTop,
                scaleTo: "width"
              },
              mr: {
                width: x - rectLeft,
                height: rectHeight,
                leftMaker: function leftMaker() {
                  return rectLeft;
                },
                topMaker: function topMaker() {
                  return rectTop;
                },
                maxWidth: canvasWidth - rectLeft,
                maxHeight: canvasHeight - rectTop,
                scaleTo: "width"
              },
              mb: {
                width: rectWidth,
                height: y - rectTop,
                leftMaker: function leftMaker() {
                  return rectLeft;
                },
                topMaker: function topMaker() {
                  return rectTop;
                },
                maxWidth: canvasWidth - rectLeft,
                maxHeight: canvasHeight - rectTop,
                scaleTo: "height"
              },
              bl: {
                width: rectRight - x,
                height: y - rectTop,
                leftMaker: function leftMaker(newWidth) {
                  return rectRight - newWidth;
                },
                topMaker: function topMaker() {
                  return rectTop;
                },
                maxWidth: rectRight,
                maxHeight: canvasHeight - rectTop,
                scaleTo: getScaleBasis(rectLeft - x, y - rectBottom)
              },
              br: {
                width: x - rectLeft,
                height: y - rectTop,
                leftMaker: function leftMaker() {
                  return rectLeft;
                },
                topMaker: function topMaker() {
                  return rectTop;
                },
                maxWidth: canvasWidth - rectLeft,
                maxHeight: canvasHeight - rectTop,
                scaleTo: getScaleBasis(x - rectRight, y - rectBottom)
              }
            };
            return this.adjustRatioCropzoneSize(resizeInfoMap[corner]);
          },
          isValid: function isValid() {
            return this.left >= 0 && this.top >= 0 && this.width > 0 && this.height > 0;
          },
          _onKeyDown: function _onKeyDown(_ref4) {
            var keyCode = _ref4.keyCode;
            if (keyCode === keyCodes.SHIFT) {
              this._withShiftKey = true;
            }
          },
          _onKeyUp: function _onKeyUp(_ref5) {
            var keyCode = _ref5.keyCode;
            if (keyCode === keyCodes.SHIFT) {
              this._withShiftKey = false;
            }
          }
        });
        var cropzone = Cropzone;
        function cropper_createSuper(Derived) {
          var hasNativeReflectConstruct = cropper_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function cropper_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var MOUSE_MOVE_THRESHOLD = 10;
        var DEFAULT_OPTION = {
          presetRatio: null,
          top: -10,
          left: -10,
          height: 1,
          width: 1
        };
        var Cropper = /* @__PURE__ */ function(_Component) {
          _inherits(Cropper2, _Component);
          var _super = cropper_createSuper(Cropper2);
          function Cropper2(graphics2) {
            var _context2, _context22, _context3, _context4, _context5;
            var _this;
            _classCallCheck(this, Cropper2);
            _this = _super.call(this, componentNames.CROPPER, graphics2);
            _this._cropzone = null;
            _this._startX = null;
            _this._startY = null;
            _this._withShiftKey = false;
            _this._listeners = {
              keydown: bind_default()(_context2 = _this._onKeyDown).call(_context2, _assertThisInitialized(_this)),
              keyup: bind_default()(_context22 = _this._onKeyUp).call(_context22, _assertThisInitialized(_this)),
              mousedown: bind_default()(_context3 = _this._onFabricMouseDown).call(_context3, _assertThisInitialized(_this)),
              mousemove: bind_default()(_context4 = _this._onFabricMouseMove).call(_context4, _assertThisInitialized(_this)),
              mouseup: bind_default()(_context5 = _this._onFabricMouseUp).call(_context5, _assertThisInitialized(_this))
            };
            return _this;
          }
          _createClass(Cropper2, [{
            key: "start",
            value: function start() {
              if (this._cropzone) {
                return;
              }
              var canvas = this.getCanvas();
              canvas.forEachObject(function(obj) {
                obj.evented = false;
              });
              this._cropzone = new cropzone(canvas, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend({
                left: 0,
                top: 0,
                width: 0.5,
                height: 0.5,
                strokeWidth: 0,
                cornerSize: 10,
                cornerColor: "black",
                fill: "transparent"
              }, CROPZONE_DEFAULT_OPTIONS, this.graphics.cropSelectionStyle));
              canvas.discardActiveObject();
              canvas.add(this._cropzone);
              canvas.on("mouse:down", this._listeners.mousedown);
              canvas.selection = false;
              canvas.defaultCursor = "crosshair";
              fabric.fabric.util.addListener(document, "keydown", this._listeners.keydown);
              fabric.fabric.util.addListener(document, "keyup", this._listeners.keyup);
            }
          }, {
            key: "end",
            value: function end() {
              var canvas = this.getCanvas();
              var cropzone2 = this._cropzone;
              if (!cropzone2) {
                return;
              }
              canvas.remove(cropzone2);
              canvas.selection = true;
              canvas.defaultCursor = "default";
              canvas.off("mouse:down", this._listeners.mousedown);
              canvas.forEachObject(function(obj) {
                obj.evented = true;
              });
              this._cropzone = null;
              fabric.fabric.util.removeListener(document, "keydown", this._listeners.keydown);
              fabric.fabric.util.removeListener(document, "keyup", this._listeners.keyup);
            }
          }, {
            key: "changeVisibility",
            value: function changeVisibility(visible) {
              if (this._cropzone) {
                this._cropzone.set({
                  visible
                });
              }
            }
          }, {
            key: "_onFabricMouseDown",
            value: function _onFabricMouseDown(fEvent) {
              var canvas = this.getCanvas();
              if (fEvent.target) {
                return;
              }
              canvas.selection = false;
              var coord = canvas.getPointer(fEvent.e);
              this._startX = coord.x;
              this._startY = coord.y;
              canvas.on({
                "mouse:move": this._listeners.mousemove,
                "mouse:up": this._listeners.mouseup
              });
            }
          }, {
            key: "_onFabricMouseMove",
            value: function _onFabricMouseMove(fEvent) {
              var canvas = this.getCanvas();
              var pointer = canvas.getPointer(fEvent.e);
              var x = pointer.x, y = pointer.y;
              var cropzone2 = this._cropzone;
              if (Math.abs(x - this._startX) + Math.abs(y - this._startY) > MOUSE_MOVE_THRESHOLD) {
                canvas.remove(cropzone2);
                cropzone2.set(this._calcRectDimensionFromPoint(x, y));
                canvas.add(cropzone2);
                canvas.setActiveObject(cropzone2);
              }
            }
          }, {
            key: "_calcRectDimensionFromPoint",
            value: function _calcRectDimensionFromPoint(x, y) {
              var canvas = this.getCanvas();
              var canvasWidth = canvas.getWidth();
              var canvasHeight = canvas.getHeight();
              var startX = this._startX;
              var startY = this._startY;
              var left = clamp(x, 0, startX);
              var top = clamp(y, 0, startY);
              var width = clamp(x, startX, canvasWidth) - left;
              var height = clamp(y, startY, canvasHeight) - top;
              if (this._withShiftKey) {
                if (width > height) {
                  height = width;
                } else if (height > width) {
                  width = height;
                }
                if (startX >= x) {
                  left = startX - width;
                }
                if (startY >= y) {
                  top = startY - height;
                }
              }
              return {
                left,
                top,
                width,
                height
              };
            }
          }, {
            key: "_onFabricMouseUp",
            value: function _onFabricMouseUp() {
              var cropzone2 = this._cropzone;
              var listeners = this._listeners;
              var canvas = this.getCanvas();
              canvas.setActiveObject(cropzone2);
              canvas.off({
                "mouse:move": listeners.mousemove,
                "mouse:up": listeners.mouseup
              });
            }
          }, {
            key: "getCroppedImageData",
            value: function getCroppedImageData(cropRect) {
              var canvas = this.getCanvas();
              var containsCropzone = canvas.contains(this._cropzone);
              if (!cropRect) {
                return null;
              }
              if (containsCropzone) {
                canvas.remove(this._cropzone);
              }
              var imageData = {
                imageName: this.getImageName(),
                url: canvas.toDataURL(cropRect)
              };
              if (containsCropzone) {
                canvas.add(this._cropzone);
              }
              return imageData;
            }
          }, {
            key: "getCropzoneRect",
            value: function getCropzoneRect() {
              var cropzone2 = this._cropzone;
              if (!cropzone2.isValid()) {
                return null;
              }
              return {
                left: cropzone2.left,
                top: cropzone2.top,
                width: cropzone2.width,
                height: cropzone2.height
              };
            }
          }, {
            key: "setCropzoneRect",
            value: function setCropzoneRect(presetRatio) {
              var canvas = this.getCanvas();
              var cropzone2 = this._cropzone;
              canvas.discardActiveObject();
              canvas.selection = false;
              canvas.remove(cropzone2);
              cropzone2.set(presetRatio ? this._getPresetPropertiesForCropSize(presetRatio) : DEFAULT_OPTION);
              canvas.add(cropzone2);
              canvas.selection = true;
              if (presetRatio) {
                canvas.setActiveObject(cropzone2);
              }
            }
          }, {
            key: "_getPresetPropertiesForCropSize",
            value: function _getPresetPropertiesForCropSize(presetRatio) {
              var canvas = this.getCanvas();
              var originalWidth = canvas.getWidth();
              var originalHeight = canvas.getHeight();
              var standardSize = originalWidth >= originalHeight ? originalWidth : originalHeight;
              var getScale = function getScale2(value, orignalValue) {
                return value > orignalValue ? orignalValue / value : 1;
              };
              var width = standardSize * presetRatio;
              var height = standardSize;
              var scaleWidth = getScale(width, originalWidth);
              var _snippet$map = map_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), [width, height], function(sizeValue) {
                return sizeValue * scaleWidth;
              });
              var _snippet$map2 = _slicedToArray(_snippet$map, 2);
              width = _snippet$map2[0];
              height = _snippet$map2[1];
              var scaleHeight = getScale(height, originalHeight);
              var _snippet$map3 = map_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), [width, height], function(sizeValue) {
                return fixFloatingPoint(sizeValue * scaleHeight);
              });
              var _snippet$map4 = _slicedToArray(_snippet$map3, 2);
              width = _snippet$map4[0];
              height = _snippet$map4[1];
              return {
                presetRatio,
                top: (originalHeight - height) / 2,
                left: (originalWidth - width) / 2,
                width,
                height
              };
            }
          }, {
            key: "_onKeyDown",
            value: function _onKeyDown(e) {
              if (e.keyCode === keyCodes.SHIFT) {
                this._withShiftKey = true;
              }
            }
          }, {
            key: "_onKeyUp",
            value: function _onKeyUp(e) {
              if (e.keyCode === keyCodes.SHIFT) {
                this._withShiftKey = false;
              }
            }
          }]);
          return Cropper2;
        }(component);
        var cropper = Cropper;
        function component_flip_createSuper(Derived) {
          var hasNativeReflectConstruct = component_flip_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function component_flip_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var flip_Flip = /* @__PURE__ */ function(_Component) {
          _inherits(Flip2, _Component);
          var _super = component_flip_createSuper(Flip2);
          function Flip2(graphics2) {
            _classCallCheck(this, Flip2);
            return _super.call(this, componentNames.FLIP, graphics2);
          }
          _createClass(Flip2, [{
            key: "getCurrentSetting",
            value: function getCurrentSetting() {
              var canvasImage = this.getCanvasImage();
              return {
                flipX: canvasImage.flipX,
                flipY: canvasImage.flipY
              };
            }
          }, {
            key: "set",
            value: function set(newSetting) {
              var setting = this.getCurrentSetting();
              var isChangingFlipX = setting.flipX !== newSetting.flipX;
              var isChangingFlipY = setting.flipY !== newSetting.flipY;
              if (!isChangingFlipX && !isChangingFlipY) {
                return promise_default().reject(rejectMessages.flip);
              }
              external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend(setting, newSetting);
              this.setImageProperties(setting, true);
              this._invertAngle(isChangingFlipX, isChangingFlipY);
              this._flipObjects(isChangingFlipX, isChangingFlipY);
              return promise_default().resolve({
                flipX: setting.flipX,
                flipY: setting.flipY,
                angle: this.getCanvasImage().angle
              });
            }
          }, {
            key: "_invertAngle",
            value: function _invertAngle(isChangingFlipX, isChangingFlipY) {
              var canvasImage = this.getCanvasImage();
              var angle = canvasImage.angle;
              if (isChangingFlipX) {
                angle *= -1;
              }
              if (isChangingFlipY) {
                angle *= -1;
              }
              canvasImage.rotate(parse_float_default()(angle)).setCoords();
            }
          }, {
            key: "_flipObjects",
            value: function _flipObjects(isChangingFlipX, isChangingFlipY) {
              var canvas = this.getCanvas();
              if (isChangingFlipX) {
                canvas.forEachObject(function(obj) {
                  obj.set({
                    angle: parse_float_default()(obj.angle * -1),
                    flipX: !obj.flipX,
                    left: canvas.width - obj.left
                  }).setCoords();
                });
              }
              if (isChangingFlipY) {
                canvas.forEachObject(function(obj) {
                  obj.set({
                    angle: parse_float_default()(obj.angle * -1),
                    flipY: !obj.flipY,
                    top: canvas.height - obj.top
                  }).setCoords();
                });
              }
              canvas.renderAll();
            }
          }, {
            key: "reset",
            value: function reset() {
              return this.set({
                flipX: false,
                flipY: false
              });
            }
          }, {
            key: "flipX",
            value: function flipX() {
              var current = this.getCurrentSetting();
              return this.set({
                flipX: !current.flipX,
                flipY: current.flipY
              });
            }
          }, {
            key: "flipY",
            value: function flipY() {
              var current = this.getCurrentSetting();
              return this.set({
                flipX: current.flipX,
                flipY: !current.flipY
              });
            }
          }]);
          return Flip2;
        }(component);
        var component_flip = flip_Flip;
        function rotation_createSuper(Derived) {
          var hasNativeReflectConstruct = rotation_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function rotation_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var Rotation = /* @__PURE__ */ function(_Component) {
          _inherits(Rotation2, _Component);
          var _super = rotation_createSuper(Rotation2);
          function Rotation2(graphics2) {
            _classCallCheck(this, Rotation2);
            return _super.call(this, componentNames.ROTATION, graphics2);
          }
          _createClass(Rotation2, [{
            key: "getCurrentAngle",
            value: function getCurrentAngle() {
              return this.getCanvasImage().angle;
            }
          }, {
            key: "setAngle",
            value: function setAngle(angle) {
              var oldAngle = this.getCurrentAngle() % 360;
              angle %= 360;
              var canvasImage = this.getCanvasImage();
              var oldImageCenter = canvasImage.getCenterPoint();
              canvasImage.set({
                angle
              }).setCoords();
              this.adjustCanvasDimension();
              var newImageCenter = canvasImage.getCenterPoint();
              this._rotateForEachObject(oldImageCenter, newImageCenter, angle - oldAngle);
              return promise_default().resolve(angle);
            }
          }, {
            key: "_rotateForEachObject",
            value: function _rotateForEachObject(oldImageCenter, newImageCenter, angleDiff) {
              var canvas = this.getCanvas();
              var centerDiff = {
                x: oldImageCenter.x - newImageCenter.x,
                y: oldImageCenter.y - newImageCenter.y
              };
              canvas.forEachObject(function(obj) {
                var objCenter = obj.getCenterPoint();
                var radian = fabric.fabric.util.degreesToRadians(angleDiff);
                var newObjCenter = fabric.fabric.util.rotatePoint(objCenter, oldImageCenter, radian);
                obj.set({
                  left: newObjCenter.x - centerDiff.x,
                  top: newObjCenter.y - centerDiff.y,
                  angle: (obj.angle + angleDiff) % 360
                });
                obj.setCoords();
              });
              canvas.renderAll();
            }
          }, {
            key: "rotate",
            value: function rotate2(additionalAngle) {
              var current = this.getCurrentAngle();
              return this.setAngle(current + additionalAngle);
            }
          }]);
          return Rotation2;
        }(component);
        var rotation = Rotation;
        function freeDrawing_createSuper(Derived) {
          var hasNativeReflectConstruct = freeDrawing_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function freeDrawing_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var FreeDrawing = /* @__PURE__ */ function(_Component) {
          _inherits(FreeDrawing2, _Component);
          var _super = freeDrawing_createSuper(FreeDrawing2);
          function FreeDrawing2(graphics2) {
            var _this;
            _classCallCheck(this, FreeDrawing2);
            _this = _super.call(this, componentNames.FREE_DRAWING, graphics2);
            _this.width = 12;
            _this.oColor = new fabric.fabric.Color("rgba(0, 0, 0, 0.5)");
            return _this;
          }
          _createClass(FreeDrawing2, [{
            key: "start",
            value: function start(setting) {
              var canvas = this.getCanvas();
              canvas.isDrawingMode = true;
              this.setBrush(setting);
            }
          }, {
            key: "setBrush",
            value: function setBrush(setting) {
              var brush = this.getCanvas().freeDrawingBrush;
              setting = setting || {};
              this.width = setting.width || this.width;
              if (setting.color) {
                this.oColor = new fabric.fabric.Color(setting.color);
              }
              brush.width = this.width;
              brush.color = this.oColor.toRgba();
            }
          }, {
            key: "end",
            value: function end() {
              var canvas = this.getCanvas();
              canvas.isDrawingMode = false;
            }
          }]);
          return FreeDrawing2;
        }(component);
        var freeDrawing = FreeDrawing;
        var ARROW_ANGLE = 30;
        var CHEVRON_SIZE_RATIO = 2.7;
        var TRIANGLE_SIZE_RATIO = 1.7;
        var RADIAN_CONVERSION_VALUE = 180;
        var ArrowLine = fabric.fabric.util.createClass(fabric.fabric.Line, {
          type: "line",
          initialize: function initialize(points) {
            var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
            this.callSuper("initialize", points, options);
            this.arrowType = options.arrowType;
          },
          _render: function _render(ctx) {
            var _this$calcLinePoints = this.calcLinePoints(), fromX = _this$calcLinePoints.x1, fromY = _this$calcLinePoints.y1, toX = _this$calcLinePoints.x2, toY = _this$calcLinePoints.y2;
            var linePosition = {
              fromX,
              fromY,
              toX,
              toY
            };
            this.ctx = ctx;
            ctx.lineWidth = this.strokeWidth;
            this._renderBasicLinePath(linePosition);
            this._drawDecoratorPath(linePosition);
            this._renderStroke(ctx);
          },
          _renderBasicLinePath: function _renderBasicLinePath(_ref) {
            var fromX = _ref.fromX, fromY = _ref.fromY, toX = _ref.toX, toY = _ref.toY;
            this.ctx.beginPath();
            this.ctx.moveTo(fromX, fromY);
            this.ctx.lineTo(toX, toY);
          },
          _drawDecoratorPath: function _drawDecoratorPath(linePosition) {
            this._drawDecoratorPathType("head", linePosition);
            this._drawDecoratorPathType("tail", linePosition);
          },
          _drawDecoratorPathType: function _drawDecoratorPathType(type, linePosition) {
            switch (this.arrowType[type]) {
              case "triangle":
                this._drawTrianglePath(type, linePosition);
                break;
              case "chevron":
                this._drawChevronPath(type, linePosition);
                break;
            }
          },
          _drawTrianglePath: function _drawTrianglePath(type, linePosition) {
            var decorateSize = this.ctx.lineWidth * TRIANGLE_SIZE_RATIO;
            this._drawChevronPath(type, linePosition, decorateSize);
            this.ctx.closePath();
          },
          _drawChevronPath: function _drawChevronPath(type, _ref2, decorateSize) {
            var _this = this;
            var fromX = _ref2.fromX, fromY = _ref2.fromY, toX = _ref2.toX, toY = _ref2.toY;
            var ctx = this.ctx;
            if (!decorateSize) {
              decorateSize = this.ctx.lineWidth * CHEVRON_SIZE_RATIO;
            }
            var _ref3 = type === "head" ? [fromX, fromY] : [toX, toY], _ref4 = _slicedToArray(_ref3, 2), standardX = _ref4[0], standardY = _ref4[1];
            var _ref5 = type === "head" ? [toX, toY] : [fromX, fromY], _ref6 = _slicedToArray(_ref5, 2), compareX = _ref6[0], compareY = _ref6[1];
            var angle = Math.atan2(compareY - standardY, compareX - standardX) * RADIAN_CONVERSION_VALUE / Math.PI;
            var rotatedPosition = function rotatedPosition2(changeAngle) {
              return _this.getRotatePosition(decorateSize, changeAngle, {
                x: standardX,
                y: standardY
              });
            };
            ctx.moveTo.apply(ctx, _toConsumableArray(rotatedPosition(angle + ARROW_ANGLE)));
            ctx.lineTo(standardX, standardY);
            ctx.lineTo.apply(ctx, _toConsumableArray(rotatedPosition(angle - ARROW_ANGLE)));
          },
          getRotatePosition: function getRotatePosition(distance, angle, referencePosition) {
            var radian = angle * Math.PI / RADIAN_CONVERSION_VALUE;
            var x = referencePosition.x, y = referencePosition.y;
            return [distance * Math.cos(radian) + x, distance * Math.sin(radian) + y];
          }
        });
        var arrowLine = ArrowLine;
        function line_createSuper(Derived) {
          var hasNativeReflectConstruct = line_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function line_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var Line = /* @__PURE__ */ function(_Component) {
          _inherits(Line2, _Component);
          var _super = line_createSuper(Line2);
          function Line2(graphics2) {
            var _context2, _context22, _context3;
            var _this;
            _classCallCheck(this, Line2);
            _this = _super.call(this, componentNames.LINE, graphics2);
            _this._width = 12;
            _this._oColor = new fabric.fabric.Color("rgba(0, 0, 0, 0.5)");
            _this._listeners = {
              mousedown: bind_default()(_context2 = _this._onFabricMouseDown).call(_context2, _assertThisInitialized(_this)),
              mousemove: bind_default()(_context22 = _this._onFabricMouseMove).call(_context22, _assertThisInitialized(_this)),
              mouseup: bind_default()(_context3 = _this._onFabricMouseUp).call(_context3, _assertThisInitialized(_this))
            };
            return _this;
          }
          _createClass(Line2, [{
            key: "setHeadOption",
            value: function setHeadOption(setting) {
              var _setting$arrowType = setting.arrowType, arrowType = _setting$arrowType === void 0 ? {
                head: null,
                tail: null
              } : _setting$arrowType;
              this._arrowType = arrowType;
            }
          }, {
            key: "start",
            value: function start() {
              var setting = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
              var canvas = this.getCanvas();
              canvas.defaultCursor = "crosshair";
              canvas.selection = false;
              this.setHeadOption(setting);
              this.setBrush(setting);
              canvas.forEachObject(function(obj) {
                obj.set({
                  evented: false
                });
              });
              canvas.on({
                "mouse:down": this._listeners.mousedown
              });
            }
          }, {
            key: "setBrush",
            value: function setBrush(setting) {
              var brush = this.getCanvas().freeDrawingBrush;
              setting = setting || {};
              this._width = setting.width || this._width;
              if (setting.color) {
                this._oColor = new fabric.fabric.Color(setting.color);
              }
              brush.width = this._width;
              brush.color = this._oColor.toRgba();
            }
          }, {
            key: "end",
            value: function end() {
              var canvas = this.getCanvas();
              canvas.defaultCursor = "default";
              canvas.selection = true;
              canvas.forEachObject(function(obj) {
                obj.set({
                  evented: true
                });
              });
              canvas.off("mouse:down", this._listeners.mousedown);
            }
          }, {
            key: "_onFabricMouseDown",
            value: function _onFabricMouseDown(fEvent) {
              var canvas = this.getCanvas();
              var _canvas$getPointer = canvas.getPointer(fEvent.e), x = _canvas$getPointer.x, y = _canvas$getPointer.y;
              var points = [x, y, x, y];
              this._line = new arrowLine(points, {
                stroke: this._oColor.toRgba(),
                strokeWidth: this._width,
                arrowType: this._arrowType,
                evented: false
              });
              this._line.set(fObjectOptions.SELECTION_STYLE);
              canvas.add(this._line);
              canvas.on({
                "mouse:move": this._listeners.mousemove,
                "mouse:up": this._listeners.mouseup
              });
              this.fire(eventNames.ADD_OBJECT, this._createLineEventObjectProperties());
            }
          }, {
            key: "_onFabricMouseMove",
            value: function _onFabricMouseMove(fEvent) {
              var canvas = this.getCanvas();
              var pointer = canvas.getPointer(fEvent.e);
              this._line.set({
                x2: pointer.x,
                y2: pointer.y
              });
              this._line.setCoords();
              canvas.renderAll();
            }
          }, {
            key: "_onFabricMouseUp",
            value: function _onFabricMouseUp() {
              var canvas = this.getCanvas();
              this.fire(eventNames.OBJECT_ADDED, this._createLineEventObjectProperties());
              this._line = null;
              canvas.off({
                "mouse:move": this._listeners.mousemove,
                "mouse:up": this._listeners.mouseup
              });
            }
          }, {
            key: "_createLineEventObjectProperties",
            value: function _createLineEventObjectProperties() {
              var params = this.graphics.createObjectProperties(this._line);
              var _this$_line = this._line, x1 = _this$_line.x1, x2 = _this$_line.x2, y1 = _this$_line.y1, y2 = _this$_line.y2;
              return external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend({}, params, {
                startPosition: {
                  x: x1,
                  y: y1
                },
                endPosition: {
                  x: x2,
                  y: y2
                }
              });
            }
          }]);
          return Line2;
        }(component);
        var line = Line;
        function component_text_createSuper(Derived) {
          var hasNativeReflectConstruct = component_text_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function component_text_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var defaultStyles = {
          fill: "#000000",
          left: 0,
          top: 0
        };
        var resetStyles = {
          fill: "#000000",
          fontStyle: "normal",
          fontWeight: "normal",
          textAlign: "tie-text-align-left",
          underline: false
        };
        var DBCLICK_TIME = 500;
        var text_Text = /* @__PURE__ */ function(_Component) {
          _inherits(Text3, _Component);
          var _super = component_text_createSuper(Text3);
          function Text3(graphics2) {
            var _context2, _context22, _context3, _context4, _context5;
            var _this;
            _classCallCheck(this, Text3);
            _this = _super.call(this, componentNames.TEXT, graphics2);
            _this._defaultStyles = defaultStyles;
            _this._isSelected = false;
            _this._selectedObj = {};
            _this._editingObj = {};
            _this._listeners = {
              mousedown: bind_default()(_context2 = _this._onFabricMouseDown).call(_context2, _assertThisInitialized(_this)),
              select: bind_default()(_context22 = _this._onFabricSelect).call(_context22, _assertThisInitialized(_this)),
              selectClear: bind_default()(_context3 = _this._onFabricSelectClear).call(_context3, _assertThisInitialized(_this)),
              scaling: bind_default()(_context4 = _this._onFabricScaling).call(_context4, _assertThisInitialized(_this)),
              textChanged: bind_default()(_context5 = _this._onFabricTextChanged).call(_context5, _assertThisInitialized(_this))
            };
            _this._textarea = null;
            _this._ratio = 1;
            _this._lastClickTime = new Date().getTime();
            _this._editingObjInfos = {};
            _this.isPrevEditing = false;
            return _this;
          }
          _createClass(Text3, [{
            key: "start",
            value: function start() {
              var _this2 = this;
              var canvas = this.getCanvas();
              canvas.selection = false;
              canvas.defaultCursor = "text";
              canvas.on({
                "mouse:down": this._listeners.mousedown,
                "selection:created": this._listeners.select,
                "selection:updated": this._listeners.select,
                "before:selection:cleared": this._listeners.selectClear,
                "object:scaling": this._listeners.scaling,
                "text:changed": this._listeners.textChanged
              });
              canvas.forEachObject(function(obj) {
                if (obj.type === "i-text") {
                  _this2.adjustOriginPosition(obj, "start");
                }
              });
              this.setCanvasRatio();
            }
          }, {
            key: "end",
            value: function end() {
              var _this3 = this;
              var canvas = this.getCanvas();
              canvas.selection = true;
              canvas.defaultCursor = "default";
              canvas.forEachObject(function(obj) {
                if (obj.type === "i-text") {
                  if (obj.text === "") {
                    canvas.remove(obj);
                  } else {
                    _this3.adjustOriginPosition(obj, "end");
                  }
                }
              });
              canvas.off({
                "mouse:down": this._listeners.mousedown,
                "selection:created": this._listeners.select,
                "selection:updated": this._listeners.select,
                "before:selection:cleared": this._listeners.selectClear,
                "object:selected": this._listeners.select,
                "object:scaling": this._listeners.scaling,
                "text:changed": this._listeners.textChanged
              });
            }
          }, {
            key: "adjustOriginPosition",
            value: function adjustOriginPosition(text, editStatus) {
              var originX = "center", originY = "center";
              if (editStatus === "start") {
                originX = "left";
                originY = "top";
              }
              var _text$getPointByOrigi = text.getPointByOrigin(originX, originY), left = _text$getPointByOrigi.x, top = _text$getPointByOrigi.y;
              text.set({
                left,
                top,
                originX,
                originY
              });
              text.setCoords();
            }
          }, {
            key: "add",
            value: function add(text, options) {
              var _this4 = this;
              return new (promise_default())(function(resolve) {
                var _context6;
                var canvas = _this4.getCanvas();
                var newText = null;
                var selectionStyle = fObjectOptions.SELECTION_STYLE;
                var styles = _this4._defaultStyles;
                _this4._setInitPos(options.position);
                if (options.styles) {
                  styles = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend(styles, options.styles);
                }
                if (!external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().isExisty(options.autofocus)) {
                  options.autofocus = true;
                }
                newText = new fabric.fabric.IText(text, styles);
                selectionStyle = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend({}, selectionStyle, {
                  originX: "left",
                  originY: "top"
                });
                newText.set(selectionStyle);
                newText.on({
                  mouseup: bind_default()(_context6 = _this4._onFabricMouseUp).call(_context6, _this4)
                });
                canvas.add(newText);
                if (options.autofocus) {
                  newText.enterEditing();
                  newText.selectAll();
                }
                if (!canvas.getActiveObject()) {
                  canvas.setActiveObject(newText);
                }
                _this4.isPrevEditing = true;
                resolve(_this4.graphics.createObjectProperties(newText));
              });
            }
          }, {
            key: "change",
            value: function change(activeObj, text) {
              var _this5 = this;
              return new (promise_default())(function(resolve) {
                activeObj.set("text", text);
                _this5.getCanvas().renderAll();
                resolve();
              });
            }
          }, {
            key: "setStyle",
            value: function setStyle(activeObj, styleObj) {
              var _this6 = this;
              return new (promise_default())(function(resolve) {
                for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), styleObj, function(val, key) {
                  if (activeObj[key] === val && key !== "fontSize") {
                    styleObj[key] = resetStyles[key] || "";
                  }
                }, _this6);
                if ("textDecoration" in styleObj) {
                  external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend(styleObj, _this6._getTextDecorationAdaptObject(styleObj.textDecoration));
                }
                activeObj.set(styleObj);
                _this6.getCanvas().renderAll();
                resolve();
              });
            }
          }, {
            key: "getText",
            value: function getText(activeObj) {
              return activeObj.text;
            }
          }, {
            key: "setSelectedInfo",
            value: function setSelectedInfo(obj, state) {
              this._selectedObj = obj;
              this._isSelected = state;
            }
          }, {
            key: "isSelected",
            value: function isSelected() {
              return this._isSelected;
            }
          }, {
            key: "getSelectedObj",
            value: function getSelectedObj() {
              return this._selectedObj;
            }
          }, {
            key: "setCanvasRatio",
            value: function setCanvasRatio() {
              var canvasElement = this.getCanvasElement();
              var cssWidth = parse_int_default()(canvasElement.style.maxWidth, 10);
              var originWidth = canvasElement.width;
              this._ratio = originWidth / cssWidth;
            }
          }, {
            key: "getCanvasRatio",
            value: function getCanvasRatio() {
              return this._ratio;
            }
          }, {
            key: "_getTextDecorationAdaptObject",
            value: function _getTextDecorationAdaptObject(textDecoration) {
              return {
                underline: textDecoration === "underline",
                linethrough: textDecoration === "line-through",
                overline: textDecoration === "overline"
              };
            }
          }, {
            key: "_setInitPos",
            value: function _setInitPos(position) {
              position = position || this.getCanvasImage().getCenterPoint();
              this._defaultStyles.left = position.x;
              this._defaultStyles.top = position.y;
            }
          }, {
            key: "_onInput",
            value: function _onInput() {
              var ratio = this.getCanvasRatio();
              var obj = this._editingObj;
              var textareaStyle = this._textarea.style;
              textareaStyle.width = "".concat(Math.ceil(obj.width / ratio), "px");
              textareaStyle.height = "".concat(Math.ceil(obj.height / ratio), "px");
            }
          }, {
            key: "_onKeyDown",
            value: function _onKeyDown() {
              var _this7 = this;
              var ratio = this.getCanvasRatio();
              var obj = this._editingObj;
              var textareaStyle = this._textarea.style;
              set_timeout_default()(function() {
                obj.text(_this7._textarea.value);
                textareaStyle.width = "".concat(Math.ceil(obj.width / ratio), "px");
                textareaStyle.height = "".concat(Math.ceil(obj.height / ratio), "px");
              }, 0);
            }
          }, {
            key: "_onBlur",
            value: function _onBlur() {
              var ratio = this.getCanvasRatio();
              var editingObj = this._editingObj;
              var editingObjInfos = this._editingObjInfos;
              var textContent = this._textarea.value;
              var transWidth = editingObj.width / ratio - editingObjInfos.width / ratio;
              var transHeight = editingObj.height / ratio - editingObjInfos.height / ratio;
              if (ratio === 1) {
                transWidth /= 2;
                transHeight /= 2;
              }
              this._textarea.style.display = "none";
              editingObj.set({
                left: editingObjInfos.left + transWidth,
                top: editingObjInfos.top + transHeight
              });
              if (textContent.length) {
                this.getCanvas().add(editingObj);
                var params = {
                  id: external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().stamp(editingObj),
                  type: editingObj.type,
                  text: textContent
                };
                this.fire(eventNames.TEXT_CHANGED, params);
              }
            }
          }, {
            key: "_onScroll",
            value: function _onScroll() {
              this._textarea.scrollLeft = 0;
              this._textarea.scrollTop = 0;
            }
          }, {
            key: "_onFabricScaling",
            value: function _onFabricScaling(fEvent) {
              var obj = fEvent.target;
              obj.fontSize = obj.fontSize * obj.scaleY;
              obj.scaleX = 1;
              obj.scaleY = 1;
            }
          }, {
            key: "_onFabricTextChanged",
            value: function _onFabricTextChanged(props) {
              this.fire(eventNames.TEXT_CHANGED, props.target);
            }
          }, {
            key: "_onFabricSelectClear",
            value: function _onFabricSelectClear(fEvent) {
              var obj = this.getSelectedObj();
              this.isPrevEditing = true;
              this.setSelectedInfo(fEvent.target, false);
              if (obj) {
                if (obj.text === "") {
                  this.getCanvas().remove(obj);
                }
              }
            }
          }, {
            key: "_onFabricSelect",
            value: function _onFabricSelect(fEvent) {
              this.isPrevEditing = true;
              this.setSelectedInfo(fEvent.target, true);
            }
          }, {
            key: "_onFabricMouseDown",
            value: function _onFabricMouseDown(fEvent) {
              var obj = fEvent.target;
              if (obj && !obj.isType("text")) {
                return;
              }
              if (this.isPrevEditing) {
                this.isPrevEditing = false;
                return;
              }
              this._fireAddText(fEvent);
            }
          }, {
            key: "_fireAddText",
            value: function _fireAddText(fEvent) {
              var obj = fEvent.target;
              var e = fEvent.e || {};
              var originPointer = this.getCanvas().getPointer(e);
              if (!obj) {
                this.fire(eventNames.ADD_TEXT, {
                  originPosition: {
                    x: originPointer.x,
                    y: originPointer.y
                  },
                  clientPosition: {
                    x: e.clientX || 0,
                    y: e.clientY || 0
                  }
                });
              }
            }
          }, {
            key: "_onFabricMouseUp",
            value: function _onFabricMouseUp(fEvent) {
              var target = fEvent.target;
              var newClickTime = new Date().getTime();
              if (this._isDoubleClick(newClickTime) && !target.isEditing) {
                target.enterEditing();
              }
              if (target.isEditing) {
                this.fire(eventNames.TEXT_EDITING);
              }
              this._lastClickTime = newClickTime;
            }
          }, {
            key: "_isDoubleClick",
            value: function _isDoubleClick(newClickTime) {
              return newClickTime - this._lastClickTime < DBCLICK_TIME;
            }
          }]);
          return Text3;
        }(component);
        var component_text = text_Text;
        function component_icon_createSuper(Derived) {
          var hasNativeReflectConstruct = component_icon_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function component_icon_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var pathMap = {
          arrow: "M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z",
          cancel: "M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z"
        };
        var icon_Icon = /* @__PURE__ */ function(_Component) {
          _inherits(Icon2, _Component);
          var _super = component_icon_createSuper(Icon2);
          function Icon2(graphics2) {
            var _context2, _context22, _context3;
            var _this;
            _classCallCheck(this, Icon2);
            _this = _super.call(this, componentNames.ICON, graphics2);
            _this._oColor = "#000000";
            _this._pathMap = pathMap;
            _this._type = null;
            _this._iconColor = null;
            _this._handlers = {
              mousedown: bind_default()(_context2 = _this._onFabricMouseDown).call(_context2, _assertThisInitialized(_this)),
              mousemove: bind_default()(_context22 = _this._onFabricMouseMove).call(_context22, _assertThisInitialized(_this)),
              mouseup: bind_default()(_context3 = _this._onFabricMouseUp).call(_context3, _assertThisInitialized(_this))
            };
            return _this;
          }
          _createClass(Icon2, [{
            key: "setStates",
            value: function setStates(type, iconColor) {
              this._type = type;
              this._iconColor = iconColor;
            }
          }, {
            key: "start",
            value: function start() {
              var canvas = this.getCanvas();
              canvas.selection = false;
              canvas.on("mouse:down", this._handlers.mousedown);
            }
          }, {
            key: "end",
            value: function end() {
              var canvas = this.getCanvas();
              canvas.selection = true;
              canvas.off({
                "mouse:down": this._handlers.mousedown
              });
            }
          }, {
            key: "add",
            value: function add(type, options) {
              var _this2 = this;
              return new (promise_default())(function(resolve, reject) {
                var canvas = _this2.getCanvas();
                var path = _this2._pathMap[type];
                var selectionStyle = fObjectOptions.SELECTION_STYLE;
                var icon2 = path ? _this2._createIcon(path) : null;
                _this2._icon = icon2;
                if (!icon2) {
                  reject(rejectMessages.invalidParameters);
                }
                icon2.set(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend({
                  type: "icon",
                  fill: _this2._oColor
                }, selectionStyle, options, _this2.graphics.controlStyle));
                canvas.add(icon2).setActiveObject(icon2);
                resolve(_this2.graphics.createObjectProperties(icon2));
              });
            }
          }, {
            key: "registerPaths",
            value: function registerPaths(pathInfos) {
              var _this3 = this;
              for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), pathInfos, function(path, type) {
                _this3._pathMap[type] = path;
              }, this);
            }
          }, {
            key: "setColor",
            value: function setColor(color, obj) {
              this._oColor = color;
              if (obj && obj.get("type") === "icon") {
                obj.set({
                  fill: this._oColor
                });
                this.getCanvas().renderAll();
              }
            }
          }, {
            key: "getColor",
            value: function getColor(obj) {
              return fill_default()(obj);
            }
          }, {
            key: "_createIcon",
            value: function _createIcon(path) {
              return new fabric.fabric.Path(path);
            }
          }, {
            key: "_onFabricMouseDown",
            value: function _onFabricMouseDown(fEvent) {
              var _this4 = this;
              var canvas = this.getCanvas();
              this._startPoint = canvas.getPointer(fEvent.e);
              var _this$_startPoint = this._startPoint, left = _this$_startPoint.x, top = _this$_startPoint.y;
              this.add(this._type, {
                left,
                top,
                fill: this._iconColor
              }).then(function() {
                _this4.fire(eventNames.ADD_OBJECT, _this4.graphics.createObjectProperties(_this4._icon));
                canvas.on("mouse:move", _this4._handlers.mousemove);
                canvas.on("mouse:up", _this4._handlers.mouseup);
              });
            }
          }, {
            key: "_onFabricMouseMove",
            value: function _onFabricMouseMove(fEvent) {
              var canvas = this.getCanvas();
              if (!this._icon) {
                return;
              }
              var moveOriginPointer = canvas.getPointer(fEvent.e);
              var scaleX = (moveOriginPointer.x - this._startPoint.x) / this._icon.width;
              var scaleY = (moveOriginPointer.y - this._startPoint.y) / this._icon.height;
              this._icon.set({
                scaleX: Math.abs(scaleX * 2),
                scaleY: Math.abs(scaleY * 2)
              });
              this._icon.setCoords();
              canvas.renderAll();
            }
          }, {
            key: "_onFabricMouseUp",
            value: function _onFabricMouseUp() {
              var canvas = this.getCanvas();
              this.fire(eventNames.OBJECT_ADDED, this.graphics.createObjectProperties(this._icon));
              this._icon = null;
              canvas.off("mouse:down", this._handlers.mousedown);
              canvas.off("mouse:move", this._handlers.mousemove);
              canvas.off("mouse:up", this._handlers.mouseup);
            }
          }]);
          return Icon2;
        }(component);
        var component_icon = icon_Icon;
        var mask_Mask = fabric.fabric.util.createClass(fabric.fabric.Image.filters.BlendImage, {
          applyTo: function applyTo(pipelineState) {
            if (!this.mask) {
              return;
            }
            var canvas = pipelineState.canvasEl;
            var width = canvas.width, height = canvas.height;
            var maskCanvasEl = this._createCanvasOfMask(width, height);
            var ctx = canvas.getContext("2d");
            var maskCtx = maskCanvasEl.getContext("2d");
            var imageData = ctx.getImageData(0, 0, width, height);
            this._drawMask(maskCtx, canvas, ctx);
            this._mapData(maskCtx, imageData, width, height);
            pipelineState.imageData = imageData;
          },
          _createCanvasOfMask: function _createCanvasOfMask(width, height) {
            var maskCanvasEl = fabric.fabric.util.createCanvasElement();
            maskCanvasEl.width = width;
            maskCanvasEl.height = height;
            return maskCanvasEl;
          },
          _drawMask: function _drawMask(maskCtx) {
            var mask2 = this.mask;
            var maskImg = mask2.getElement();
            var angle = mask2.angle, left = mask2.left, scaleX = mask2.scaleX, scaleY = mask2.scaleY, top = mask2.top;
            maskCtx.save();
            maskCtx.translate(left, top);
            maskCtx.rotate(angle * Math.PI / 180);
            maskCtx.scale(scaleX, scaleY);
            maskCtx.drawImage(maskImg, -maskImg.width / 2, -maskImg.height / 2);
            maskCtx.restore();
          },
          _mapData: function _mapData(maskCtx, imageData, width, height) {
            var data = imageData.data, imgHeight = imageData.height, imgWidth = imageData.width;
            var sourceData = data;
            var len = imgWidth * imgHeight * 4;
            var maskData = maskCtx.getImageData(0, 0, width, height).data;
            for (var i = 0; i < len; i += 4) {
              sourceData[i + 3] = maskData[i];
            }
          }
        });
        var extension_mask = mask_Mask;
        var Sharpen = fabric.fabric.util.createClass(fabric.fabric.Image.filters.Convolute, {
          type: "Sharpen",
          initialize: function initialize() {
            this.matrix = [0, -1, 0, -1, 5, -1, 0, -1, 0];
          }
        });
        var sharpen = Sharpen;
        var Emboss = fabric.fabric.util.createClass(fabric.fabric.Image.filters.Convolute, {
          type: "Emboss",
          initialize: function initialize() {
            this.matrix = [1, 1, 1, 1, 0.7, -1, -1, -1, -1];
          }
        });
        var emboss = Emboss;
        var ColorFilter = fabric.fabric.util.createClass(fabric.fabric.Image.filters.BaseFilter, {
          type: "ColorFilter",
          initialize: function initialize(options) {
            if (!options) {
              options = {};
            }
            this.color = options.color || "#FFFFFF";
            this.threshold = options.threshold || 45;
            this.x = options.x || null;
            this.y = options.y || null;
          },
          applyTo: function applyTo(canvas) {
            var canvasEl = canvas.canvasEl;
            var context = canvasEl.getContext("2d");
            var imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height);
            var data = imageData.data;
            var threshold = this.threshold;
            var filterColor = fabric.fabric.Color.sourceFromHex(this.color);
            var i, len;
            if (this.x && this.y) {
              filterColor = this._getColor(imageData, this.x, this.y);
            }
            for (i = 0, len = data.length; i < len; i += 4) {
              if (this._isOutsideThreshold(data[i], filterColor[0], threshold) || this._isOutsideThreshold(data[i + 1], filterColor[1], threshold) || this._isOutsideThreshold(data[i + 2], filterColor[2], threshold)) {
                continue;
              }
              data[i] = data[i + 1] = data[i + 2] = data[i + 3] = 0;
            }
            context.putImageData(imageData, 0, 0);
          },
          _isOutsideThreshold: function _isOutsideThreshold(color1, color2, threshold) {
            var diff = color1 - color2;
            return Math.abs(diff) > threshold;
          },
          _getColor: function _getColor(imageData, x, y) {
            var color = [0, 0, 0, 0];
            var data = imageData.data, width = imageData.width;
            var bytes = 4;
            var position = (width * y + x) * bytes;
            color[0] = data[position];
            color[1] = data[position + 1];
            color[2] = data[position + 2];
            color[3] = data[position + 3];
            return color;
          }
        });
        var colorFilter = ColorFilter;
        function component_filter_createSuper(Derived) {
          var hasNativeReflectConstruct = component_filter_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function component_filter_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var filters = fabric.fabric.Image.filters;
        filters.Mask = extension_mask;
        filters.Sharpen = sharpen;
        filters.Emboss = emboss;
        filters.ColorFilter = colorFilter;
        var filter_Filter = /* @__PURE__ */ function(_Component) {
          _inherits(Filter2, _Component);
          var _super = component_filter_createSuper(Filter2);
          function Filter2(graphics2) {
            _classCallCheck(this, Filter2);
            return _super.call(this, componentNames.FILTER, graphics2);
          }
          _createClass(Filter2, [{
            key: "add",
            value: function add(type, options) {
              var _this = this;
              return new (promise_default())(function(resolve, reject) {
                var sourceImg = _this._getSourceImage();
                var canvas = _this.getCanvas();
                var imgFilter = _this._getFilter(sourceImg, type);
                if (!imgFilter) {
                  imgFilter = _this._createFilter(sourceImg, type, options);
                }
                if (!imgFilter) {
                  reject(rejectMessages.invalidParameters);
                }
                _this._changeFilterValues(imgFilter, options);
                _this._apply(sourceImg, function() {
                  canvas.renderAll();
                  resolve({
                    type,
                    action: "add",
                    options
                  });
                });
              });
            }
          }, {
            key: "remove",
            value: function remove(type) {
              var _this2 = this;
              return new (promise_default())(function(resolve, reject) {
                var sourceImg = _this2._getSourceImage();
                var canvas = _this2.getCanvas();
                var options = _this2.getOptions(type);
                if (!sourceImg.filters.length) {
                  reject(rejectMessages.unsupportedOperation);
                }
                _this2._removeFilter(sourceImg, type);
                _this2._apply(sourceImg, function() {
                  canvas.renderAll();
                  resolve({
                    type,
                    action: "remove",
                    options
                  });
                });
              });
            }
          }, {
            key: "hasFilter",
            value: function hasFilter(type) {
              return !!this._getFilter(this._getSourceImage(), type);
            }
          }, {
            key: "getOptions",
            value: function getOptions(type) {
              var sourceImg = this._getSourceImage();
              var imgFilter = this._getFilter(sourceImg, type);
              if (!imgFilter) {
                return null;
              }
              return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({}, imgFilter.options);
            }
          }, {
            key: "_changeFilterValues",
            value: function _changeFilterValues(imgFilter, options) {
              (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.forEach)(options, function(value, key) {
                if (!(0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.isUndefined)(imgFilter[key])) {
                  imgFilter[key] = value;
                }
              });
              (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.forEach)(imgFilter.options, function(value, key) {
                if (!(0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.isUndefined)(options[key])) {
                  imgFilter.options[key] = options[key];
                }
              });
            }
          }, {
            key: "_apply",
            value: function _apply(sourceImg, callback) {
              sourceImg.filters.push();
              var result = sourceImg.applyFilters();
              if (result) {
                callback();
              }
            }
          }, {
            key: "_getSourceImage",
            value: function _getSourceImage() {
              return this.getCanvasImage();
            }
          }, {
            key: "_createFilter",
            value: function _createFilter(sourceImg, type, options) {
              var filterObj;
              var fabricType = this._getFabricFilterType(type);
              var ImageFilter = fabric.fabric.Image.filters[fabricType];
              if (ImageFilter) {
                filterObj = new ImageFilter(options);
                filterObj.options = options;
                sourceImg.filters.push(filterObj);
              }
              return filterObj;
            }
          }, {
            key: "_getFilter",
            value: function _getFilter(sourceImg, type) {
              var imgFilter = null;
              if (sourceImg) {
                var fabricType = this._getFabricFilterType(type);
                var length = sourceImg.filters.length;
                var item, i;
                for (i = 0; i < length; i += 1) {
                  item = sourceImg.filters[i];
                  if (item.type === fabricType) {
                    imgFilter = item;
                    break;
                  }
                }
              }
              return imgFilter;
            }
          }, {
            key: "_removeFilter",
            value: function _removeFilter(sourceImg, type) {
              var fabricType = this._getFabricFilterType(type);
              sourceImg.filters = (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.filter)(sourceImg.filters, function(value) {
                return value.type !== fabricType;
              });
            }
          }, {
            key: "_getFabricFilterType",
            value: function _getFabricFilterType(type) {
              return type.charAt(0).toUpperCase() + slice_default()(type).call(type, 1);
            }
          }]);
          return Filter2;
        }(component);
        var component_filter = filter_Filter;
        var shapeResizeHelper = __webpack_require__(1801);
        var shapeResizeHelper_default = /* @__PURE__ */ __webpack_require__.n(shapeResizeHelper);
        var FILTER_OPTION_MAP = {
          pixelate: "blocksize",
          blur: "blur"
        };
        var POSITION_DIMENSION_MAP = {
          x: "width",
          y: "height"
        };
        var FILTER_NAME_VALUE_MAP = flipObject(FILTER_OPTION_MAP);
        var cachedCanvasImageElement = null;
        function getFillImageFromShape(shapeObj) {
          var _getCustomProperty = getCustomProperty(shapeObj, "patternSourceCanvas"), patternSourceCanvas = _getCustomProperty.patternSourceCanvas;
          var _patternSourceCanvas$ = patternSourceCanvas.getObjects(), _patternSourceCanvas$2 = _slicedToArray(_patternSourceCanvas$, 1), fillImage = _patternSourceCanvas$2[0];
          return fillImage;
        }
        function rePositionFilterTypeFillImage(shapeObj) {
          var angle = shapeObj.angle, flipX = shapeObj.flipX, flipY = shapeObj.flipY;
          var fillImage = getFillImageFromShape(shapeObj);
          var rotatedShapeCornerDimension = getRotatedDimension(shapeObj);
          var right = rotatedShapeCornerDimension.right, bottom = rotatedShapeCornerDimension.bottom;
          var width = rotatedShapeCornerDimension.width, height = rotatedShapeCornerDimension.height;
          var diffLeft = (width - shapeObj.width) / 2;
          var diffTop = (height - shapeObj.height) / 2;
          var cropX = shapeObj.left - shapeObj.width / 2 - diffLeft;
          var cropY = shapeObj.top - shapeObj.height / 2 - diffTop;
          var left = width / 2 - diffLeft;
          var top = height / 2 - diffTop;
          var fillImageMaxSize = Math.max(width, height) + Math.max(diffLeft, diffTop);
          var _calculateFillImageDi = calculateFillImageDimensionOutsideCanvas({
            shapeObj,
            left,
            top,
            width,
            height,
            cropX,
            cropY,
            flipX,
            flipY,
            right,
            bottom
          });
          var _calculateFillImageDi2 = _slicedToArray(_calculateFillImageDi, 4);
          left = _calculateFillImageDi2[0];
          top = _calculateFillImageDi2[1];
          width = _calculateFillImageDi2[2];
          height = _calculateFillImageDi2[3];
          fillImage.set({
            angle: flipX === flipY ? -angle : angle,
            left,
            top,
            width,
            height,
            cropX,
            cropY,
            flipX,
            flipY
          });
          setCustomProperty(fillImage, {
            fillImageMaxSize
          });
        }
        function makeFilterOptionFromFabricImage(imageObject) {
          return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.map)(imageObject.filters, function(filter2) {
            var _Object$keys = keys_default()(filter2), _Object$keys2 = _slicedToArray(_Object$keys, 1), key = _Object$keys2[0];
            return _defineProperty({}, FILTER_NAME_VALUE_MAP[key], filter2[key]);
          });
        }
        function calculateFillImageDimensionOutsideCanvas(_ref2) {
          var shapeObj = _ref2.shapeObj, left = _ref2.left, top = _ref2.top, width = _ref2.width, height = _ref2.height, cropX = _ref2.cropX, cropY = _ref2.cropY, flipX = _ref2.flipX, flipY = _ref2.flipY, right = _ref2.right, bottom = _ref2.bottom;
          var overflowAreaPositionFixer = function overflowAreaPositionFixer2(type, outDistance, imageLeft, imageTop) {
            return calculateDistanceOverflowPart({
              type,
              outDistance,
              shapeObj,
              flipX,
              flipY,
              left: imageLeft,
              top: imageTop
            });
          };
          var originalWidth = width, originalHeight = height;
          var _calculateDimensionLe = calculateDimensionLeftTopEdge(overflowAreaPositionFixer, {
            left,
            top,
            width,
            height,
            cropX,
            cropY
          });
          var _calculateDimensionLe2 = _slicedToArray(_calculateDimensionLe, 4);
          left = _calculateDimensionLe2[0];
          top = _calculateDimensionLe2[1];
          width = _calculateDimensionLe2[2];
          height = _calculateDimensionLe2[3];
          var _calculateDimensionRi = calculateDimensionRightBottomEdge(overflowAreaPositionFixer, {
            left,
            top,
            insideCanvasRealImageWidth: width,
            insideCanvasRealImageHeight: height,
            right,
            bottom,
            cropX,
            cropY,
            originalWidth,
            originalHeight
          });
          var _calculateDimensionRi2 = _slicedToArray(_calculateDimensionRi, 4);
          left = _calculateDimensionRi2[0];
          top = _calculateDimensionRi2[1];
          width = _calculateDimensionRi2[2];
          height = _calculateDimensionRi2[3];
          return [left, top, width, height];
        }
        function calculateDimensionRightBottomEdge(overflowAreaPositionFixer, _ref3) {
          var left = _ref3.left, top = _ref3.top, insideCanvasRealImageWidth = _ref3.insideCanvasRealImageWidth, insideCanvasRealImageHeight = _ref3.insideCanvasRealImageHeight, right = _ref3.right, bottom = _ref3.bottom, cropX = _ref3.cropX, cropY = _ref3.cropY, originalWidth = _ref3.originalWidth, originalHeight = _ref3.originalHeight;
          var width = insideCanvasRealImageWidth, height = insideCanvasRealImageHeight;
          var _cachedCanvasImageEle = cachedCanvasImageElement, canvasWidth = _cachedCanvasImageEle.width, canvasHeight = _cachedCanvasImageEle.height;
          if (right > canvasWidth && cropX > 0) {
            width = originalWidth - Math.abs(right - canvasWidth);
          }
          if (bottom > canvasHeight && cropY > 0) {
            height = originalHeight - Math.abs(bottom - canvasHeight);
          }
          var diff = {
            x: (insideCanvasRealImageWidth - width) / 2,
            y: (insideCanvasRealImageHeight - height) / 2
          };
          (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.forEach)(["x", "y"], function(type) {
            var cropDistance2 = diff[type];
            if (cropDistance2 > 0) {
              var _overflowAreaPosition = overflowAreaPositionFixer(type, cropDistance2, left, top);
              var _overflowAreaPosition2 = _slicedToArray(_overflowAreaPosition, 2);
              left = _overflowAreaPosition2[0];
              top = _overflowAreaPosition2[1];
            }
          });
          return [left, top, width, height];
        }
        function calculateDimensionLeftTopEdge(overflowAreaPositionFixer, _ref4) {
          var left = _ref4.left, top = _ref4.top, width = _ref4.width, height = _ref4.height, cropX = _ref4.cropX, cropY = _ref4.cropY;
          var dimension = {
            width,
            height
          };
          (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.forEach)(["x", "y"], function(type) {
            var cropDistance = type === "x" ? cropX : cropY;
            var compareSize = dimension[POSITION_DIMENSION_MAP[type]];
            var standardSize = cachedCanvasImageElement[POSITION_DIMENSION_MAP[type]];
            if (compareSize > standardSize) {
              var outDistance = (compareSize - standardSize) / 2;
              dimension[POSITION_DIMENSION_MAP[type]] = standardSize;
              var _overflowAreaPosition3 = overflowAreaPositionFixer(type, outDistance, left, top);
              var _overflowAreaPosition4 = _slicedToArray(_overflowAreaPosition3, 2);
              left = _overflowAreaPosition4[0];
              top = _overflowAreaPosition4[1];
            }
            if (cropDistance < 0) {
              var _overflowAreaPosition5 = overflowAreaPositionFixer(type, cropDistance, left, top);
              var _overflowAreaPosition6 = _slicedToArray(_overflowAreaPosition5, 2);
              left = _overflowAreaPosition6[0];
              top = _overflowAreaPosition6[1];
            }
          });
          return [left, top, dimension.width, dimension.height];
        }
        function makeFillPatternForFilter(canvasImage, filterOption, patternSourceCanvas) {
          var copiedCanvasElement = getCachedCanvasImageElement(canvasImage);
          var fillImage = makeFillImage(copiedCanvasElement, canvasImage.angle, filterOption);
          patternSourceCanvas.add(fillImage);
          var fabricProperty = {
            fill: new fabric.fabric.Pattern({
              source: patternSourceCanvas.getElement(),
              repeat: "no-repeat"
            })
          };
          setCustomProperty(fabricProperty, {
            patternSourceCanvas
          });
          return fabricProperty;
        }
        function resetFillPatternCanvas(patternSourceCanvas) {
          var _patternSourceCanvas$3 = patternSourceCanvas.getObjects(), _patternSourceCanvas$4 = _slicedToArray(_patternSourceCanvas$3, 1), innerImage = _patternSourceCanvas$4[0];
          var _getCustomProperty2 = getCustomProperty(innerImage, "fillImageMaxSize"), fillImageMaxSize = _getCustomProperty2.fillImageMaxSize;
          fillImageMaxSize = Math.max(1, fillImageMaxSize);
          patternSourceCanvas.setDimensions({
            width: fillImageMaxSize,
            height: fillImageMaxSize
          });
          patternSourceCanvas.renderAll();
        }
        function reMakePatternImageSource(shapeObj, canvasImage) {
          var _getCustomProperty3 = getCustomProperty(shapeObj, "patternSourceCanvas"), patternSourceCanvas = _getCustomProperty3.patternSourceCanvas;
          var _patternSourceCanvas$5 = patternSourceCanvas.getObjects(), _patternSourceCanvas$6 = _slicedToArray(_patternSourceCanvas$5, 1), fillImage = _patternSourceCanvas$6[0];
          var filterOption = makeFilterOptionFromFabricImage(fillImage);
          patternSourceCanvas.remove(fillImage);
          var copiedCanvasElement = getCachedCanvasImageElement(canvasImage, true);
          var newFillImage = makeFillImage(copiedCanvasElement, canvasImage.angle, filterOption);
          patternSourceCanvas.add(newFillImage);
        }
        function getCachedCanvasImageElement(canvasImage) {
          var reset = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
          if (!cachedCanvasImageElement || reset) {
            cachedCanvasImageElement = canvasImage.toCanvasElement();
          }
          return cachedCanvasImageElement;
        }
        function calculateDistanceOverflowPart(_ref5) {
          var type = _ref5.type, shapeObj = _ref5.shapeObj, outDistance = _ref5.outDistance, left = _ref5.left, top = _ref5.top, flipX = _ref5.flipX, flipY = _ref5.flipY;
          var shapePointNavigation = getShapeEdgePoint(shapeObj);
          var shapeNeighborPointNavigation = [[1, 2], [0, 3], [0, 3], [1, 2]];
          var linePointsOutsideCanvas = calculateLinePointsOutsideCanvas(type, shapePointNavigation, shapeNeighborPointNavigation);
          var reatAngles = calculateLineAngleOfOutsideCanvas(type, shapePointNavigation, linePointsOutsideCanvas);
          var startPointIndex = linePointsOutsideCanvas.startPointIndex;
          var diffPosition = getReversePositionForFlip({
            outDistance,
            startPointIndex,
            flipX,
            flipY,
            reatAngles
          });
          return [left + diffPosition.left, top + diffPosition.top];
        }
        function getReversePositionForFlip(_ref6) {
          var outDistance = _ref6.outDistance, startPointIndex = _ref6.startPointIndex, flipX = _ref6.flipX, flipY = _ref6.flipY, reatAngles = _ref6.reatAngles;
          var rotationChangePoint1 = outDistance * Math.cos(reatAngles[0] * Math.PI / 180);
          var rotationChangePoint2 = outDistance * Math.cos(reatAngles[1] * Math.PI / 180);
          var isForward = startPointIndex === 2 || startPointIndex === 3;
          var diffPosition = {
            top: isForward ? rotationChangePoint1 : rotationChangePoint2,
            left: isForward ? rotationChangePoint2 : rotationChangePoint1
          };
          if (isReverseLeftPositionForFlip(startPointIndex, flipX, flipY)) {
            diffPosition.left = diffPosition.left * -1;
          }
          if (isReverseTopPositionForFlip(startPointIndex, flipX, flipY)) {
            diffPosition.top = diffPosition.top * -1;
          }
          return diffPosition;
        }
        function calculateLinePointsOutsideCanvas(type, shapePointNavigation, shapeNeighborPointNavigation) {
          var minimumPoint = 0;
          var minimumPointIndex = 0;
          (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.forEach)(shapePointNavigation, function(point, index) {
            if (point[type] < minimumPoint) {
              minimumPoint = point[type];
              minimumPointIndex = index;
            }
          });
          var _shapeNeighborPointNa = _slicedToArray(shapeNeighborPointNavigation[minimumPointIndex], 2), endPointIndex1 = _shapeNeighborPointNa[0], endPointIndex2 = _shapeNeighborPointNa[1];
          return {
            startPointIndex: minimumPointIndex,
            endPointIndex1,
            endPointIndex2
          };
        }
        function calculateLineAngleOfOutsideCanvas(type, shapePointNavigation, linePointsOfOneVertexIndex) {
          var startPointIndex = linePointsOfOneVertexIndex.startPointIndex, endPointIndex1 = linePointsOfOneVertexIndex.endPointIndex1, endPointIndex2 = linePointsOfOneVertexIndex.endPointIndex2;
          var horizontalVerticalAngle = type === "x" ? 180 : 270;
          return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.map)([endPointIndex1, endPointIndex2], function(pointIndex) {
            var startPoint = shapePointNavigation[startPointIndex];
            var endPoint = shapePointNavigation[pointIndex];
            var diffY = startPoint.y - endPoint.y;
            var diffX = startPoint.x - endPoint.x;
            return Math.atan2(diffY, diffX) * 180 / Math.PI - horizontalVerticalAngle;
          });
        }
        function isReverseLeftPositionForFlip(startPointIndex, flipX, flipY) {
          return (!flipX && flipY || !flipX && !flipY) && startPointIndex === 0 || (flipX && flipY || flipX && !flipY) && startPointIndex === 1 || (!flipX && !flipY || !flipX && flipY) && startPointIndex === 2 || (flipX && !flipY || flipX && flipY) && startPointIndex === 3;
        }
        function isReverseTopPositionForFlip(startPointIndex, flipX, flipY) {
          return (flipX && !flipY || !flipX && !flipY) && startPointIndex === 0 || (!flipX && !flipY || flipX && !flipY) && startPointIndex === 1 || (flipX && flipY || !flipX && flipY) && startPointIndex === 2 || (!flipX && flipY || flipX && flipY) && startPointIndex === 3;
        }
        function getShapeEdgePoint(shapeObj) {
          return [shapeObj.getPointByOrigin("left", "top"), shapeObj.getPointByOrigin("right", "top"), shapeObj.getPointByOrigin("left", "bottom"), shapeObj.getPointByOrigin("right", "bottom")];
        }
        function getRotatedDimension(shapeObj) {
          var _getShapeEdgePoint = getShapeEdgePoint(shapeObj), _getShapeEdgePoint2 = _slicedToArray(_getShapeEdgePoint, 4), _getShapeEdgePoint2$ = _getShapeEdgePoint2[0], ax = _getShapeEdgePoint2$.x, ay = _getShapeEdgePoint2$.y, _getShapeEdgePoint2$2 = _getShapeEdgePoint2[1], bx = _getShapeEdgePoint2$2.x, by = _getShapeEdgePoint2$2.y, _getShapeEdgePoint2$3 = _getShapeEdgePoint2[2], cx = _getShapeEdgePoint2$3.x, cy = _getShapeEdgePoint2$3.y, _getShapeEdgePoint2$4 = _getShapeEdgePoint2[3], dx = _getShapeEdgePoint2$4.x, dy = _getShapeEdgePoint2$4.y;
          var left = Math.min(ax, bx, cx, dx);
          var top = Math.min(ay, by, cy, dy);
          var right = Math.max(ax, bx, cx, dx);
          var bottom = Math.max(ay, by, cy, dy);
          return {
            left,
            top,
            right,
            bottom,
            width: right - left,
            height: bottom - top
          };
        }
        function makeFillImage(copiedCanvasElement, currentCanvasImageAngle, filterOption) {
          var _context2;
          var fillImage = new fabric.fabric.Image(copiedCanvasElement);
          (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.forEach)(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend.apply(void 0, concat_default()(_context2 = [{}]).call(_context2, _toConsumableArray(filterOption))), function(value, key) {
            var fabricFilterClassName = capitalizeString(key);
            var filter2 = new fabric.fabric.Image.filters[fabricFilterClassName](_defineProperty({}, FILTER_OPTION_MAP[key], value));
            fillImage.filters.push(filter2);
          });
          fillImage.applyFilters();
          setCustomProperty(fillImage, {
            originalAngle: currentCanvasImageAngle,
            fillImageMaxSize: Math.max(fillImage.width, fillImage.height)
          });
          shapeResizeHelper_default().adjustOriginToCenter(fillImage);
          return fillImage;
        }
        function shape_createSuper(Derived) {
          var hasNativeReflectConstruct = shape_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function shape_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var SHAPE_INIT_OPTIONS = (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
          strokeWidth: 1,
          stroke: "#000000",
          fill: "#ffffff",
          width: 1,
          height: 1,
          rx: 0,
          ry: 0
        }, SHAPE_DEFAULT_OPTIONS);
        var DEFAULT_TYPE = "rect";
        var DEFAULT_WIDTH = 20;
        var DEFAULT_HEIGHT = 20;
        function makeFabricFillOption(options, canvasImage, createStaticCanvas) {
          var fillOption = fill_default()(options);
          var fillType = getFillTypeFromOption(fill_default()(options));
          var fill = fillOption;
          if (fillOption.color) {
            fill = fillOption.color;
          }
          var extOption = null;
          if (fillType === "filter") {
            var newStaticCanvas = createStaticCanvas();
            extOption = makeFillPatternForFilter(canvasImage, filter_default()(fillOption), newStaticCanvas);
          } else {
            extOption = {
              fill
            };
          }
          return (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({}, options, extOption);
        }
        var shape_Shape = /* @__PURE__ */ function(_Component) {
          _inherits(Shape2, _Component);
          var _super = shape_createSuper(Shape2);
          function Shape2(graphics2) {
            var _context2, _context22, _context3, _context4, _context5;
            var _this;
            _classCallCheck(this, Shape2);
            _this = _super.call(this, componentNames.SHAPE, graphics2);
            _this._shapeObj = null;
            _this._type = DEFAULT_TYPE;
            _this._options = (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({}, SHAPE_INIT_OPTIONS);
            _this._isSelected = false;
            _this._startPoint = {};
            _this._withShiftKey = false;
            _this._handlers = {
              mousedown: bind_default()(_context2 = _this._onFabricMouseDown).call(_context2, _assertThisInitialized(_this)),
              mousemove: bind_default()(_context22 = _this._onFabricMouseMove).call(_context22, _assertThisInitialized(_this)),
              mouseup: bind_default()(_context3 = _this._onFabricMouseUp).call(_context3, _assertThisInitialized(_this)),
              keydown: bind_default()(_context4 = _this._onKeyDown).call(_context4, _assertThisInitialized(_this)),
              keyup: bind_default()(_context5 = _this._onKeyUp).call(_context5, _assertThisInitialized(_this))
            };
            return _this;
          }
          _createClass(Shape2, [{
            key: "start",
            value: function start() {
              var canvas = this.getCanvas();
              this._isSelected = false;
              canvas.defaultCursor = "crosshair";
              canvas.selection = false;
              canvas.uniformScaling = true;
              canvas.on({
                "mouse:down": this._handlers.mousedown
              });
              fabric.fabric.util.addListener(document, "keydown", this._handlers.keydown);
              fabric.fabric.util.addListener(document, "keyup", this._handlers.keyup);
            }
          }, {
            key: "end",
            value: function end() {
              var canvas = this.getCanvas();
              this._isSelected = false;
              canvas.defaultCursor = "default";
              canvas.selection = true;
              canvas.uniformScaling = false;
              canvas.off({
                "mouse:down": this._handlers.mousedown
              });
              fabric.fabric.util.removeListener(document, "keydown", this._handlers.keydown);
              fabric.fabric.util.removeListener(document, "keyup", this._handlers.keyup);
            }
          }, {
            key: "setStates",
            value: function setStates(type, options) {
              this._type = type;
              if (options) {
                this._options = (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)(this._options, options);
              }
            }
          }, {
            key: "add",
            value: function add(type, options) {
              var _this2 = this;
              return new (promise_default())(function(resolve) {
                var canvas = _this2.getCanvas();
                var extendOption = _this2._extendOptions(options);
                var shapeObj = _this2._createInstance(type, extendOption);
                var objectProperties = _this2.graphics.createObjectProperties(shapeObj);
                _this2._bindEventOnShape(shapeObj);
                canvas.add(shapeObj).setActiveObject(shapeObj);
                _this2._resetPositionFillFilter(shapeObj);
                resolve(objectProperties);
              });
            }
          }, {
            key: "change",
            value: function change(shapeObj, options) {
              var _this3 = this;
              return new (promise_default())(function(resolve, reject) {
                if (!isShape(shapeObj)) {
                  reject(rejectMessages.unsupportedType);
                }
                var hasFillOption = getFillTypeFromOption(fill_default()(options)) === "filter";
                var _this3$graphics = _this3.graphics, canvasImage = _this3$graphics.canvasImage, createStaticCanvas = _this3$graphics.createStaticCanvas;
                shapeObj.set(hasFillOption ? makeFabricFillOption(options, canvasImage, createStaticCanvas) : options);
                if (hasFillOption) {
                  _this3._resetPositionFillFilter(shapeObj);
                }
                _this3.getCanvas().renderAll();
                resolve();
              });
            }
          }, {
            key: "makeFillPropertyForUserEvent",
            value: function makeFillPropertyForUserEvent(shapeObj) {
              var fillType = getFillTypeFromObject(shapeObj);
              var fillProp = {};
              if (fillType === SHAPE_FILL_TYPE.FILTER) {
                var fillImage = getFillImageFromShape(shapeObj);
                var filterOption = makeFilterOptionFromFabricImage(fillImage);
                fillProp.type = fillType;
                fillProp.filter = filterOption;
              } else {
                fillProp.type = SHAPE_FILL_TYPE.COLOR;
                fillProp.color = fill_default()(shapeObj) || "transparent";
              }
              return fillProp;
            }
          }, {
            key: "processForCopiedObject",
            value: function processForCopiedObject(shapeObj, originalShapeObj) {
              this._bindEventOnShape(shapeObj);
              if (getFillTypeFromObject(shapeObj) === "filter") {
                var fillImage = getFillImageFromShape(originalShapeObj);
                var filterOption = makeFilterOptionFromFabricImage(fillImage);
                var newStaticCanvas = this.graphics.createStaticCanvas();
                shapeObj.set(makeFillPatternForFilter(this.graphics.canvasImage, filterOption, newStaticCanvas));
                this._resetPositionFillFilter(shapeObj);
              }
            }
          }, {
            key: "_createInstance",
            value: function _createInstance(type, options) {
              var instance;
              switch (type) {
                case "rect":
                  instance = new fabric.fabric.Rect(options);
                  break;
                case "circle":
                  instance = new fabric.fabric.Ellipse((0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
                    type: "circle"
                  }, options));
                  break;
                case "triangle":
                  instance = new fabric.fabric.Triangle(options);
                  break;
                default:
                  instance = {};
              }
              return instance;
            }
          }, {
            key: "_extendOptions",
            value: function _extendOptions(options) {
              var selectionStyles = fObjectOptions.SELECTION_STYLE;
              var _this$graphics = this.graphics, canvasImage = _this$graphics.canvasImage, createStaticCanvas = _this$graphics.createStaticCanvas;
              options = (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({}, SHAPE_INIT_OPTIONS, this._options, selectionStyles, options);
              return makeFabricFillOption(options, canvasImage, createStaticCanvas);
            }
          }, {
            key: "_bindEventOnShape",
            value: function _bindEventOnShape(shapeObj) {
              var self2 = this;
              var canvas = this.getCanvas();
              shapeObj.on({
                added: function added() {
                  self2._shapeObj = this;
                  shapeResizeHelper_default().setOrigins(self2._shapeObj);
                },
                selected: function selected() {
                  self2._isSelected = true;
                  self2._shapeObj = this;
                  canvas.uniformScaling = true;
                  canvas.defaultCursor = "default";
                  shapeResizeHelper_default().setOrigins(self2._shapeObj);
                },
                deselected: function deselected() {
                  self2._isSelected = false;
                  self2._shapeObj = null;
                  canvas.defaultCursor = "crosshair";
                  canvas.uniformScaling = false;
                },
                modified: function modified() {
                  var currentObj = self2._shapeObj;
                  shapeResizeHelper_default().adjustOriginToCenter(currentObj);
                  shapeResizeHelper_default().setOrigins(currentObj);
                },
                modifiedInGroup: function modifiedInGroup(activeSelection) {
                  self2._fillFilterRePositionInGroupSelection(shapeObj, activeSelection);
                },
                moving: function moving() {
                  self2._resetPositionFillFilter(this);
                },
                rotating: function rotating() {
                  self2._resetPositionFillFilter(this);
                },
                scaling: function scaling(fEvent) {
                  var pointer = canvas.getPointer(fEvent.e);
                  var currentObj = self2._shapeObj;
                  canvas.setCursor("crosshair");
                  shapeResizeHelper_default().resize(currentObj, pointer, true);
                  self2._resetPositionFillFilter(this);
                }
              });
            }
          }, {
            key: "_onFabricMouseDown",
            value: function _onFabricMouseDown(fEvent) {
              if (!fEvent.target) {
                this._isSelected = false;
                this._shapeObj = false;
              }
              if (!this._isSelected && !this._shapeObj) {
                var canvas = this.getCanvas();
                this._startPoint = canvas.getPointer(fEvent.e);
                canvas.on({
                  "mouse:move": this._handlers.mousemove,
                  "mouse:up": this._handlers.mouseup
                });
              }
            }
          }, {
            key: "_onFabricMouseMove",
            value: function _onFabricMouseMove(fEvent) {
              var _this4 = this;
              var canvas = this.getCanvas();
              var pointer = canvas.getPointer(fEvent.e);
              var startPointX = this._startPoint.x;
              var startPointY = this._startPoint.y;
              var width = startPointX - pointer.x;
              var height = startPointY - pointer.y;
              var shape2 = this._shapeObj;
              if (!shape2) {
                this.add(this._type, {
                  left: startPointX,
                  top: startPointY,
                  width,
                  height
                }).then(function(objectProps) {
                  _this4.fire(eventNames.ADD_OBJECT, objectProps);
                });
              } else {
                this._shapeObj.set({
                  isRegular: this._withShiftKey
                });
                shapeResizeHelper_default().resize(shape2, pointer);
                canvas.renderAll();
                this._resetPositionFillFilter(shape2);
              }
            }
          }, {
            key: "_onFabricMouseUp",
            value: function _onFabricMouseUp() {
              var _this5 = this;
              var canvas = this.getCanvas();
              var startPointX = this._startPoint.x;
              var startPointY = this._startPoint.y;
              var shape2 = this._shapeObj;
              if (!shape2) {
                this.add(this._type, {
                  left: startPointX,
                  top: startPointY,
                  width: DEFAULT_WIDTH,
                  height: DEFAULT_HEIGHT
                }).then(function(objectProps) {
                  _this5.fire(eventNames.ADD_OBJECT, objectProps);
                });
              } else if (shape2) {
                shapeResizeHelper_default().adjustOriginToCenter(shape2);
                this.fire(eventNames.OBJECT_ADDED, this.graphics.createObjectProperties(shape2));
              }
              canvas.off({
                "mouse:move": this._handlers.mousemove,
                "mouse:up": this._handlers.mouseup
              });
            }
          }, {
            key: "_onKeyDown",
            value: function _onKeyDown(e) {
              if (e.keyCode === keyCodes.SHIFT) {
                this._withShiftKey = true;
                if (this._shapeObj) {
                  this._shapeObj.isRegular = true;
                }
              }
            }
          }, {
            key: "_onKeyUp",
            value: function _onKeyUp(e) {
              if (e.keyCode === keyCodes.SHIFT) {
                this._withShiftKey = false;
                if (this._shapeObj) {
                  this._shapeObj.isRegular = false;
                }
              }
            }
          }, {
            key: "_resetPositionFillFilter",
            value: function _resetPositionFillFilter(shapeObj) {
              if (getFillTypeFromObject(shapeObj) !== "filter") {
                return;
              }
              var _getCustomProperty = getCustomProperty(shapeObj, "patternSourceCanvas"), patternSourceCanvas = _getCustomProperty.patternSourceCanvas;
              var fillImage = getFillImageFromShape(shapeObj);
              var _getCustomProperty2 = getCustomProperty(fillImage, "originalAngle"), originalAngle = _getCustomProperty2.originalAngle;
              if (this.graphics.canvasImage.angle !== originalAngle) {
                reMakePatternImageSource(shapeObj, this.graphics.canvasImage);
              }
              var originX = shapeObj.originX, originY = shapeObj.originY;
              shapeResizeHelper_default().adjustOriginToCenter(shapeObj);
              shapeObj.width *= shapeObj.scaleX;
              shapeObj.height *= shapeObj.scaleY;
              shapeObj.rx *= shapeObj.scaleX;
              shapeObj.ry *= shapeObj.scaleY;
              shapeObj.scaleX = 1;
              shapeObj.scaleY = 1;
              rePositionFilterTypeFillImage(shapeObj);
              changeOrigin(shapeObj, {
                originX,
                originY
              });
              resetFillPatternCanvas(patternSourceCanvas);
            }
          }, {
            key: "_fillFilterRePositionInGroupSelection",
            value: function _fillFilterRePositionInGroupSelection(shapeObj, activeSelection) {
              if (activeSelection.scaleX !== 1 || activeSelection.scaleY !== 1) {
                activeSelection.addWithUpdate();
              }
              var angle = shapeObj.angle, left = shapeObj.left, top = shapeObj.top;
              fabric.fabric.util.addTransformToObject(shapeObj, activeSelection.calcTransformMatrix());
              this._resetPositionFillFilter(shapeObj);
              shapeObj.set({
                angle,
                left,
                top
              });
            }
          }]);
          return Shape2;
        }(component);
        function zoom_createSuper(Derived) {
          var hasNativeReflectConstruct = zoom_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function zoom_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var zoom_MOUSE_MOVE_THRESHOLD = 10;
        var DEFAULT_SCROLL_OPTION = {
          left: 0,
          top: 0,
          width: 0,
          height: 0,
          stroke: "#000000",
          strokeWidth: 0,
          fill: "#000000",
          opacity: 0.4,
          evented: false,
          selectable: false,
          hoverCursor: "auto"
        };
        var DEFAULT_VERTICAL_SCROLL_RATIO = {
          SIZE: 45e-4,
          MARGIN: 3e-3,
          BORDER_RADIUS: 3e-3
        };
        var DEFAULT_HORIZONTAL_SCROLL_RATIO = {
          SIZE: 66e-4,
          MARGIN: 44e-4,
          BORDER_RADIUS: 3e-3
        };
        var DEFAULT_ZOOM_LEVEL = 1;
        var ZOOM_CHANGED = eventNames.ZOOM_CHANGED, ADD_TEXT = eventNames.ADD_TEXT, TEXT_EDITING = eventNames.TEXT_EDITING, OBJECT_MODIFIED = eventNames.OBJECT_MODIFIED, KEY_DOWN = eventNames.KEY_DOWN, KEY_UP = eventNames.KEY_UP, HAND_STARTED = eventNames.HAND_STARTED, HAND_STOPPED = eventNames.HAND_STOPPED;
        var Zoom = /* @__PURE__ */ function(_Component) {
          _inherits(Zoom2, _Component);
          var _super = zoom_createSuper(Zoom2);
          function Zoom2(graphics2) {
            var _context2, _context22, _context3, _context4, _context5, _context6, _context7, _context8, _context9, _context10, _context11, _context12;
            var _this;
            _classCallCheck(this, Zoom2);
            _this = _super.call(this, componentNames.ZOOM, graphics2);
            _this.zoomArea = null;
            _this._startPoint = null;
            _this._centerPoints = [];
            _this.zoomLevel = DEFAULT_ZOOM_LEVEL;
            _this.zoomMode = zoomModes.DEFAULT;
            _this._listeners = {
              startZoom: bind_default()(_context2 = _this._onMouseDownWithZoomMode).call(_context2, _assertThisInitialized(_this)),
              moveZoom: bind_default()(_context22 = _this._onMouseMoveWithZoomMode).call(_context22, _assertThisInitialized(_this)),
              stopZoom: bind_default()(_context3 = _this._onMouseUpWithZoomMode).call(_context3, _assertThisInitialized(_this)),
              startHand: bind_default()(_context4 = _this._onMouseDownWithHandMode).call(_context4, _assertThisInitialized(_this)),
              moveHand: bind_default()(_context5 = _this._onMouseMoveWithHandMode).call(_context5, _assertThisInitialized(_this)),
              stopHand: bind_default()(_context6 = _this._onMouseUpWithHandMode).call(_context6, _assertThisInitialized(_this)),
              zoomChanged: bind_default()(_context7 = _this._changeScrollState).call(_context7, _assertThisInitialized(_this)),
              keydown: bind_default()(_context8 = _this._startHandModeWithSpaceBar).call(_context8, _assertThisInitialized(_this)),
              keyup: bind_default()(_context9 = _this._endHandModeWithSpaceBar).call(_context9, _assertThisInitialized(_this))
            };
            var canvas = _this.getCanvas();
            _this.aspectRatio = canvas.width / canvas.height;
            _this._verticalScroll = new fabric.fabric.Rect(DEFAULT_SCROLL_OPTION);
            _this._horizontalScroll = new fabric.fabric.Rect(DEFAULT_SCROLL_OPTION);
            canvas.on(ZOOM_CHANGED, _this._listeners.zoomChanged);
            _this.graphics.on(ADD_TEXT, bind_default()(_context10 = _this._startTextEditingHandler).call(_context10, _assertThisInitialized(_this)));
            _this.graphics.on(TEXT_EDITING, bind_default()(_context11 = _this._startTextEditingHandler).call(_context11, _assertThisInitialized(_this)));
            _this.graphics.on(OBJECT_MODIFIED, bind_default()(_context12 = _this._stopTextEditingHandler).call(_context12, _assertThisInitialized(_this)));
            return _this;
          }
          _createClass(Zoom2, [{
            key: "attachKeyboardZoomEvents",
            value: function attachKeyboardZoomEvents() {
              fabric.fabric.util.addListener(document, KEY_DOWN, this._listeners.keydown);
              fabric.fabric.util.addListener(document, KEY_UP, this._listeners.keyup);
            }
          }, {
            key: "detachKeyboardZoomEvents",
            value: function detachKeyboardZoomEvents() {
              fabric.fabric.util.removeListener(document, KEY_DOWN, this._listeners.keydown);
              fabric.fabric.util.removeListener(document, KEY_UP, this._listeners.keyup);
            }
          }, {
            key: "_startTextEditingHandler",
            value: function _startTextEditingHandler() {
              this.isTextEditing = true;
            }
          }, {
            key: "_stopTextEditingHandler",
            value: function _stopTextEditingHandler() {
              this.isTextEditing = false;
            }
          }, {
            key: "_startHandModeWithSpaceBar",
            value: function _startHandModeWithSpaceBar(e) {
              if (this.withSpace || this.isTextEditing) {
                return;
              }
              if (e.keyCode === keyCodes.SPACE) {
                this.withSpace = true;
                this.startHandMode();
              }
            }
          }, {
            key: "_endHandModeWithSpaceBar",
            value: function _endHandModeWithSpaceBar(e) {
              if (e.keyCode === keyCodes.SPACE) {
                this.withSpace = false;
                this.endHandMode();
              }
            }
          }, {
            key: "startZoomInMode",
            value: function startZoomInMode() {
              if (this.zoomArea) {
                return;
              }
              this.endHandMode();
              this.zoomMode = zoomModes.ZOOM;
              var canvas = this.getCanvas();
              this._changeObjectsEventedState(false);
              this.zoomArea = new fabric.fabric.Rect({
                left: 0,
                top: 0,
                width: 0.5,
                height: 0.5,
                stroke: "black",
                strokeWidth: 1,
                fill: "transparent",
                hoverCursor: "zoom-in"
              });
              canvas.discardActiveObject();
              canvas.add(this.zoomArea);
              canvas.on("mouse:down", this._listeners.startZoom);
              canvas.selection = false;
              canvas.defaultCursor = "zoom-in";
            }
          }, {
            key: "endZoomInMode",
            value: function endZoomInMode() {
              this.zoomMode = zoomModes.DEFAULT;
              var canvas = this.getCanvas();
              var _this$_listeners = this._listeners, startZoom = _this$_listeners.startZoom, moveZoom = _this$_listeners.moveZoom, stopZoom = _this$_listeners.stopZoom;
              canvas.selection = true;
              canvas.defaultCursor = "auto";
              canvas.off({
                "mouse:down": startZoom,
                "mouse:move": moveZoom,
                "mouse:up": stopZoom
              });
              this._changeObjectsEventedState(true);
              canvas.remove(this.zoomArea);
              this.zoomArea = null;
            }
          }, {
            key: "start",
            value: function start() {
              this.zoomArea = null;
              this._startPoint = null;
              this._startHandPoint = null;
            }
          }, {
            key: "end",
            value: function end() {
              this.endZoomInMode();
              this.endHandMode();
            }
          }, {
            key: "startHandMode",
            value: function startHandMode() {
              this.endZoomInMode();
              this.zoomMode = zoomModes.HAND;
              var canvas = this.getCanvas();
              this._changeObjectsEventedState(false);
              canvas.discardActiveObject();
              canvas.off("mouse:down", this._listeners.startHand);
              canvas.on("mouse:down", this._listeners.startHand);
              canvas.selection = false;
              canvas.defaultCursor = "grab";
              canvas.fire(HAND_STARTED);
            }
          }, {
            key: "endHandMode",
            value: function endHandMode() {
              this.zoomMode = zoomModes.DEFAULT;
              var canvas = this.getCanvas();
              this._changeObjectsEventedState(true);
              canvas.off("mouse:down", this._listeners.startHand);
              canvas.selection = true;
              canvas.defaultCursor = "auto";
              this._startHandPoint = null;
              canvas.fire(HAND_STOPPED);
            }
          }, {
            key: "_onMouseDownWithZoomMode",
            value: function _onMouseDownWithZoomMode(_ref) {
              var target = _ref.target, e = _ref.e;
              if (target) {
                return;
              }
              var canvas = this.getCanvas();
              canvas.selection = false;
              this._startPoint = canvas.getPointer(e);
              this.zoomArea.set({
                width: 0,
                height: 0
              });
              var _this$_listeners2 = this._listeners, moveZoom = _this$_listeners2.moveZoom, stopZoom = _this$_listeners2.stopZoom;
              canvas.on({
                "mouse:move": moveZoom,
                "mouse:up": stopZoom
              });
            }
          }, {
            key: "_onMouseMoveWithZoomMode",
            value: function _onMouseMoveWithZoomMode(_ref2) {
              var e = _ref2.e;
              var canvas = this.getCanvas();
              var pointer = canvas.getPointer(e);
              var x = pointer.x, y = pointer.y;
              var zoomArea = this.zoomArea, _startPoint = this._startPoint;
              var deltaX = Math.abs(x - _startPoint.x);
              var deltaY = Math.abs(y - _startPoint.y);
              if (deltaX + deltaY > zoom_MOUSE_MOVE_THRESHOLD) {
                canvas.remove(zoomArea);
                zoomArea.set(this._calcRectDimensionFromPoint(x, y));
                canvas.add(zoomArea);
              }
            }
          }, {
            key: "_calcRectDimensionFromPoint",
            value: function _calcRectDimensionFromPoint(x, y) {
              var canvas = this.getCanvas();
              var canvasWidth = canvas.getWidth();
              var canvasHeight = canvas.getHeight();
              var _this$_startPoint = this._startPoint, startX = _this$_startPoint.x, startY = _this$_startPoint.y;
              var min2 = Math.min;
              var left = min2(startX, x);
              var top = min2(startY, y);
              var width = clamp(x, startX, canvasWidth) - left;
              var height = clamp(y, startY, canvasHeight) - top;
              return {
                left,
                top,
                width,
                height
              };
            }
          }, {
            key: "_onMouseUpWithZoomMode",
            value: function _onMouseUpWithZoomMode() {
              var zoomLevel = this.zoomLevel;
              var zoomArea = this.zoomArea;
              var _this$_listeners3 = this._listeners, moveZoom = _this$_listeners3.moveZoom, stopZoom = _this$_listeners3.stopZoom;
              var canvas = this.getCanvas();
              var center = this._getCenterPoint();
              var x = center.x, y = center.y;
              if (!this._isMaxZoomLevel()) {
                this._centerPoints.push({
                  x,
                  y,
                  prevZoomLevel: zoomLevel,
                  zoomLevel: zoomLevel + 1
                });
                zoomLevel += 1;
                canvas.zoomToPoint({
                  x,
                  y
                }, zoomLevel);
                this._fireZoomChanged(canvas, zoomLevel);
                this.zoomLevel = zoomLevel;
              }
              canvas.off({
                "mouse:move": moveZoom,
                "mouse:up": stopZoom
              });
              canvas.remove(zoomArea);
              this._startPoint = null;
            }
          }, {
            key: "_getCenterPoint",
            value: function _getCenterPoint() {
              var _this$zoomArea = this.zoomArea, left = _this$zoomArea.left, top = _this$zoomArea.top, width = _this$zoomArea.width, height = _this$zoomArea.height;
              var _this$_startPoint2 = this._startPoint, x = _this$_startPoint2.x, y = _this$_startPoint2.y;
              var aspectRatio = this.aspectRatio;
              if (width < zoom_MOUSE_MOVE_THRESHOLD && height < zoom_MOUSE_MOVE_THRESHOLD) {
                return {
                  x,
                  y
                };
              }
              return width > height ? {
                x: left + aspectRatio * height / 2,
                y: top + height / 2
              } : {
                x: left + width / 2,
                y: top + width / aspectRatio / 2
              };
            }
          }, {
            key: "zoom",
            value: function zoom2(_ref3) {
              var x = _ref3.x, y = _ref3.y;
              var zoomLevel = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this.zoomLevel;
              var canvas = this.getCanvas();
              var centerPoints = this._centerPoints;
              for (var i = centerPoints.length - 1; i >= 0; i -= 1) {
                if (centerPoints[i].zoomLevel < zoomLevel) {
                  break;
                }
                var _centerPoints$pop = centerPoints.pop(), prevX = _centerPoints$pop.x, prevY = _centerPoints$pop.y, prevZoomLevel = _centerPoints$pop.prevZoomLevel;
                canvas.zoomToPoint({
                  x: prevX,
                  y: prevY
                }, prevZoomLevel);
                this.zoomLevel = prevZoomLevel;
              }
              canvas.zoomToPoint({
                x,
                y
              }, zoomLevel);
              if (!this._isDefaultZoomLevel(zoomLevel)) {
                this._centerPoints.push({
                  x,
                  y,
                  zoomLevel,
                  prevZoomLevel: this.zoomLevel
                });
              }
              this.zoomLevel = zoomLevel;
              this._fireZoomChanged(canvas, zoomLevel);
            }
          }, {
            key: "zoomOut",
            value: function zoomOut() {
              var centerPoints = this._centerPoints;
              if (!centerPoints.length) {
                return;
              }
              var canvas = this.getCanvas();
              var point = centerPoints.pop();
              var x = point.x, y = point.y, prevZoomLevel = point.prevZoomLevel;
              if (this._isDefaultZoomLevel(prevZoomLevel)) {
                canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);
              } else {
                canvas.zoomToPoint({
                  x,
                  y
                }, prevZoomLevel);
              }
              this.zoomLevel = prevZoomLevel;
              this._fireZoomChanged(canvas, this.zoomLevel);
            }
          }, {
            key: "resetZoom",
            value: function resetZoom() {
              var canvas = this.getCanvas();
              canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);
              this.zoomLevel = DEFAULT_ZOOM_LEVEL;
              this._centerPoints = [];
              this._fireZoomChanged(canvas, this.zoomLevel);
            }
          }, {
            key: "_isMaxZoomLevel",
            value: function _isMaxZoomLevel() {
              return this.zoomLevel >= 5;
            }
          }, {
            key: "_movePointOfZoom",
            value: function _movePointOfZoom(_ref4) {
              var deltaX = _ref4.x, deltaY = _ref4.y;
              var centerPoints = this._centerPoints;
              if (!centerPoints.length) {
                return;
              }
              var canvas = this.getCanvas();
              var zoomLevel = this.zoomLevel;
              var point = centerPoints.pop();
              var originX = point.x, originY = point.y, prevZoomLevel = point.prevZoomLevel;
              var x = originX - deltaX;
              var y = originY - deltaY;
              canvas.zoomToPoint({
                x: originX,
                y: originY
              }, prevZoomLevel);
              canvas.zoomToPoint({
                x,
                y
              }, zoomLevel);
              centerPoints.push({
                x,
                y,
                prevZoomLevel,
                zoomLevel
              });
              this._fireZoomChanged(canvas, zoomLevel);
            }
          }, {
            key: "_onMouseDownWithHandMode",
            value: function _onMouseDownWithHandMode(_ref5) {
              var target = _ref5.target, e = _ref5.e;
              if (target) {
                return;
              }
              var canvas = this.getCanvas();
              if (this.zoomLevel <= DEFAULT_ZOOM_LEVEL) {
                return;
              }
              canvas.selection = false;
              this._startHandPoint = canvas.getPointer(e);
              var _this$_listeners4 = this._listeners, moveHand = _this$_listeners4.moveHand, stopHand = _this$_listeners4.stopHand;
              canvas.on({
                "mouse:move": moveHand,
                "mouse:up": stopHand
              });
            }
          }, {
            key: "_onMouseMoveWithHandMode",
            value: function _onMouseMoveWithHandMode(_ref6) {
              var e = _ref6.e;
              var canvas = this.getCanvas();
              var _canvas$getPointer = canvas.getPointer(e), x = _canvas$getPointer.x, y = _canvas$getPointer.y;
              var deltaX = x - this._startHandPoint.x;
              var deltaY = y - this._startHandPoint.y;
              this._movePointOfZoom({
                x: deltaX,
                y: deltaY
              });
            }
          }, {
            key: "_onMouseUpWithHandMode",
            value: function _onMouseUpWithHandMode() {
              var canvas = this.getCanvas();
              var _this$_listeners5 = this._listeners, moveHand = _this$_listeners5.moveHand, stopHand = _this$_listeners5.stopHand;
              canvas.off({
                "mouse:move": moveHand,
                "mouse:up": stopHand
              });
              this._startHandPoint = null;
            }
          }, {
            key: "_changeScrollState",
            value: function _changeScrollState(_ref7) {
              var viewport = _ref7.viewport, zoomLevel = _ref7.zoomLevel;
              var canvas = this.getCanvas();
              canvas.remove(this._verticalScroll);
              canvas.remove(this._horizontalScroll);
              if (this._isDefaultZoomLevel(zoomLevel)) {
                return;
              }
              var canvasWidth = canvas.width;
              var canvasHeight = canvas.height;
              var tl = viewport.tl, tr = viewport.tr, bl = viewport.bl;
              var viewportWidth = tr.x - tl.x;
              var viewportHeight = bl.y - tl.y;
              var horizontalScrollWidth = viewportWidth * viewportWidth / canvasWidth;
              var horizontalScrollHeight = viewportHeight * DEFAULT_HORIZONTAL_SCROLL_RATIO.SIZE;
              var horizontalScrollLeft = clamp(tl.x + tl.x / canvasWidth * viewportWidth, tl.x, tr.x - horizontalScrollWidth);
              var horizontalScrollMargin = viewportHeight * DEFAULT_HORIZONTAL_SCROLL_RATIO.MARGIN;
              var horizontalScrollBorderRadius = viewportHeight * DEFAULT_HORIZONTAL_SCROLL_RATIO.BORDER_RADIUS;
              this._horizontalScroll.set({
                left: horizontalScrollLeft,
                top: bl.y - horizontalScrollHeight - horizontalScrollMargin,
                width: horizontalScrollWidth,
                height: horizontalScrollHeight,
                rx: horizontalScrollBorderRadius,
                ry: horizontalScrollBorderRadius
              });
              var verticalScrollWidth = viewportWidth * DEFAULT_VERTICAL_SCROLL_RATIO.SIZE;
              var verticalScrollHeight = viewportHeight * viewportHeight / canvasHeight;
              var verticalScrollTop = clamp(tl.y + tl.y / canvasHeight * viewportHeight, tr.y, bl.y - verticalScrollHeight);
              var verticalScrollMargin = viewportWidth * DEFAULT_VERTICAL_SCROLL_RATIO.MARGIN;
              var verticalScrollBorderRadius = viewportWidth * DEFAULT_VERTICAL_SCROLL_RATIO.BORDER_RADIUS;
              this._verticalScroll.set({
                left: tr.x - verticalScrollWidth - verticalScrollMargin,
                top: verticalScrollTop,
                width: verticalScrollWidth,
                height: verticalScrollHeight,
                rx: verticalScrollBorderRadius,
                ry: verticalScrollBorderRadius
              });
              this._addScrollBar();
            }
          }, {
            key: "_changeObjectsEventedState",
            value: function _changeObjectsEventedState() {
              var evented = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
              var canvas = this.getCanvas();
              canvas.forEachObject(function(obj) {
                obj.evented = evented;
              });
            }
          }, {
            key: "_addScrollBar",
            value: function _addScrollBar() {
              var _this2 = this;
              var canvas = this.getCanvas();
              canvas.add(this._horizontalScroll);
              canvas.add(this._verticalScroll);
              if (this.scrollBarTid) {
                clearTimeout(this.scrollBarTid);
              }
              this.scrollBarTid = set_timeout_default()(function() {
                canvas.remove(_this2._horizontalScroll);
                canvas.remove(_this2._verticalScroll);
              }, 3e3);
            }
          }, {
            key: "_isDefaultZoomLevel",
            value: function _isDefaultZoomLevel(zoomLevel) {
              return zoomLevel === DEFAULT_ZOOM_LEVEL;
            }
          }, {
            key: "_fireZoomChanged",
            value: function _fireZoomChanged(canvas, zoomLevel) {
              canvas.fire(ZOOM_CHANGED, {
                viewport: canvas.calcViewportBoundaries(),
                zoomLevel
              });
            }
          }, {
            key: "mode",
            get: function get() {
              return this.zoomMode;
            }
          }]);
          return Zoom2;
        }(component);
        var zoom = Zoom;
        var drawingMode_createMessage = errorMessage.create;
        var drawingMode_errorTypes = errorMessage.types;
        var DrawingMode = /* @__PURE__ */ function() {
          function DrawingMode2(name) {
            _classCallCheck(this, DrawingMode2);
            this.name = name;
          }
          _createClass(DrawingMode2, [{
            key: "getName",
            value: function getName() {
              return this.name;
            }
          }, {
            key: "start",
            value: function start() {
              throw new Error(drawingMode_createMessage(drawingMode_errorTypes.UN_IMPLEMENTATION, "start"));
            }
          }, {
            key: "end",
            value: function end() {
              throw new Error(drawingMode_createMessage(drawingMode_errorTypes.UN_IMPLEMENTATION, "stop"));
            }
          }]);
          return DrawingMode2;
        }();
        var drawingMode = DrawingMode;
        function drawingMode_cropper_createSuper(Derived) {
          var hasNativeReflectConstruct = drawingMode_cropper_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function drawingMode_cropper_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var CropperDrawingMode = /* @__PURE__ */ function(_DrawingMode) {
          _inherits(CropperDrawingMode2, _DrawingMode);
          var _super = drawingMode_cropper_createSuper(CropperDrawingMode2);
          function CropperDrawingMode2() {
            _classCallCheck(this, CropperDrawingMode2);
            return _super.call(this, drawingModes.CROPPER);
          }
          _createClass(CropperDrawingMode2, [{
            key: "start",
            value: function start(graphics2) {
              var cropper2 = graphics2.getComponent(componentNames.CROPPER);
              cropper2.start();
            }
          }, {
            key: "end",
            value: function end(graphics2) {
              var cropper2 = graphics2.getComponent(componentNames.CROPPER);
              cropper2.end();
            }
          }]);
          return CropperDrawingMode2;
        }(drawingMode);
        var drawingMode_cropper = CropperDrawingMode;
        function drawingMode_freeDrawing_createSuper(Derived) {
          var hasNativeReflectConstruct = drawingMode_freeDrawing_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function drawingMode_freeDrawing_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var FreeDrawingMode = /* @__PURE__ */ function(_DrawingMode) {
          _inherits(FreeDrawingMode2, _DrawingMode);
          var _super = drawingMode_freeDrawing_createSuper(FreeDrawingMode2);
          function FreeDrawingMode2() {
            _classCallCheck(this, FreeDrawingMode2);
            return _super.call(this, drawingModes.FREE_DRAWING);
          }
          _createClass(FreeDrawingMode2, [{
            key: "start",
            value: function start(graphics2, options) {
              var freeDrawing2 = graphics2.getComponent(componentNames.FREE_DRAWING);
              freeDrawing2.start(options);
            }
          }, {
            key: "end",
            value: function end(graphics2) {
              var freeDrawing2 = graphics2.getComponent(componentNames.FREE_DRAWING);
              freeDrawing2.end();
            }
          }]);
          return FreeDrawingMode2;
        }(drawingMode);
        var drawingMode_freeDrawing = FreeDrawingMode;
        function lineDrawing_createSuper(Derived) {
          var hasNativeReflectConstruct = lineDrawing_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function lineDrawing_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var LineDrawingMode = /* @__PURE__ */ function(_DrawingMode) {
          _inherits(LineDrawingMode2, _DrawingMode);
          var _super = lineDrawing_createSuper(LineDrawingMode2);
          function LineDrawingMode2() {
            _classCallCheck(this, LineDrawingMode2);
            return _super.call(this, drawingModes.LINE_DRAWING);
          }
          _createClass(LineDrawingMode2, [{
            key: "start",
            value: function start(graphics2, options) {
              var lineDrawing2 = graphics2.getComponent(componentNames.LINE);
              lineDrawing2.start(options);
            }
          }, {
            key: "end",
            value: function end(graphics2) {
              var lineDrawing2 = graphics2.getComponent(componentNames.LINE);
              lineDrawing2.end();
            }
          }]);
          return LineDrawingMode2;
        }(drawingMode);
        var lineDrawing = LineDrawingMode;
        function drawingMode_shape_createSuper(Derived) {
          var hasNativeReflectConstruct = drawingMode_shape_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function drawingMode_shape_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var ShapeDrawingMode = /* @__PURE__ */ function(_DrawingMode) {
          _inherits(ShapeDrawingMode2, _DrawingMode);
          var _super = drawingMode_shape_createSuper(ShapeDrawingMode2);
          function ShapeDrawingMode2() {
            _classCallCheck(this, ShapeDrawingMode2);
            return _super.call(this, drawingModes.SHAPE);
          }
          _createClass(ShapeDrawingMode2, [{
            key: "start",
            value: function start(graphics2) {
              var shape2 = graphics2.getComponent(componentNames.SHAPE);
              shape2.start();
            }
          }, {
            key: "end",
            value: function end(graphics2) {
              var shape2 = graphics2.getComponent(componentNames.SHAPE);
              shape2.end();
            }
          }]);
          return ShapeDrawingMode2;
        }(drawingMode);
        var drawingMode_shape = ShapeDrawingMode;
        function drawingMode_text_createSuper(Derived) {
          var hasNativeReflectConstruct = drawingMode_text_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function drawingMode_text_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var TextDrawingMode = /* @__PURE__ */ function(_DrawingMode) {
          _inherits(TextDrawingMode2, _DrawingMode);
          var _super = drawingMode_text_createSuper(TextDrawingMode2);
          function TextDrawingMode2() {
            _classCallCheck(this, TextDrawingMode2);
            return _super.call(this, drawingModes.TEXT);
          }
          _createClass(TextDrawingMode2, [{
            key: "start",
            value: function start(graphics2) {
              var text = graphics2.getComponent(componentNames.TEXT);
              text.start();
            }
          }, {
            key: "end",
            value: function end(graphics2) {
              var text = graphics2.getComponent(componentNames.TEXT);
              text.end();
            }
          }]);
          return TextDrawingMode2;
        }(drawingMode);
        var drawingMode_text = TextDrawingMode;
        function drawingMode_icon_createSuper(Derived) {
          var hasNativeReflectConstruct = drawingMode_icon_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function drawingMode_icon_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var IconDrawingMode = /* @__PURE__ */ function(_DrawingMode) {
          _inherits(IconDrawingMode2, _DrawingMode);
          var _super = drawingMode_icon_createSuper(IconDrawingMode2);
          function IconDrawingMode2() {
            _classCallCheck(this, IconDrawingMode2);
            return _super.call(this, drawingModes.ICON);
          }
          _createClass(IconDrawingMode2, [{
            key: "start",
            value: function start(graphics2) {
              var icon2 = graphics2.getComponent(componentNames.ICON);
              icon2.start();
            }
          }, {
            key: "end",
            value: function end(graphics2) {
              var icon2 = graphics2.getComponent(componentNames.ICON);
              icon2.end();
            }
          }]);
          return IconDrawingMode2;
        }(drawingMode);
        var drawingMode_icon = IconDrawingMode;
        function drawingMode_zoom_createSuper(Derived) {
          var hasNativeReflectConstruct = drawingMode_zoom_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function drawingMode_zoom_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var ZoomDrawingMode = /* @__PURE__ */ function(_DrawingMode) {
          _inherits(ZoomDrawingMode2, _DrawingMode);
          var _super = drawingMode_zoom_createSuper(ZoomDrawingMode2);
          function ZoomDrawingMode2() {
            _classCallCheck(this, ZoomDrawingMode2);
            return _super.call(this, drawingModes.ZOOM);
          }
          _createClass(ZoomDrawingMode2, [{
            key: "start",
            value: function start(graphics2) {
              var zoom2 = graphics2.getComponent(componentNames.ZOOM);
              zoom2.start();
            }
          }, {
            key: "end",
            value: function end(graphics2) {
              var zoom2 = graphics2.getComponent(componentNames.ZOOM);
              zoom2.end();
            }
          }]);
          return ZoomDrawingMode2;
        }(drawingMode);
        var drawingMode_zoom = ZoomDrawingMode;
        var cachedUndoDataForChangeDimension = null;
        function setCachedUndoDataForDimension(undoData) {
          cachedUndoDataForChangeDimension = undoData;
        }
        function getCachedUndoDataForDimension() {
          return cachedUndoDataForChangeDimension;
        }
        function makeSelectionUndoData(obj, undoDatumMaker) {
          var undoData;
          if (obj.type === "activeSelection") {
            var _context2;
            undoData = map_default()(_context2 = obj.getObjects()).call(_context2, function(item) {
              var angle = item.angle, left = item.left, top = item.top, scaleX = item.scaleX, scaleY = item.scaleY, width = item.width, height = item.height;
              fabric.fabric.util.addTransformToObject(item, obj.calcTransformMatrix());
              var result = undoDatumMaker(item);
              item.set({
                angle,
                left,
                top,
                width,
                height,
                scaleX,
                scaleY
              });
              return result;
            });
          } else {
            undoData = [undoDatumMaker(obj)];
          }
          return undoData;
        }
        function makeSelectionUndoDatum(id, obj, isSelection) {
          return isSelection ? {
            id,
            width: obj.width,
            height: obj.height,
            top: obj.top,
            left: obj.left,
            angle: obj.angle,
            scaleX: obj.scaleX,
            scaleY: obj.scaleY
          } : (0, external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_.extend)({
            id
          }, obj);
        }
        function component_resize_createSuper(Derived) {
          var hasNativeReflectConstruct = component_resize_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function component_resize_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var resize_Resize = /* @__PURE__ */ function(_Component) {
          _inherits(Resize2, _Component);
          var _super = component_resize_createSuper(Resize2);
          function Resize2(graphics2) {
            var _this;
            _classCallCheck(this, Resize2);
            _this = _super.call(this, componentNames.RESIZE, graphics2);
            _this._dimensions = null;
            _this._originalDimensions = null;
            return _this;
          }
          _createClass(Resize2, [{
            key: "getCurrentDimensions",
            value: function getCurrentDimensions() {
              var canvasImage = this.getCanvasImage();
              if (!this._dimensions && canvasImage) {
                var width = canvasImage.width, height = canvasImage.height;
                this._dimensions = {
                  width,
                  height
                };
              }
              return this._dimensions;
            }
          }, {
            key: "getOriginalDimensions",
            value: function getOriginalDimensions() {
              return this._originalDimensions;
            }
          }, {
            key: "setOriginalDimensions",
            value: function setOriginalDimensions(dimensions) {
              this._originalDimensions = dimensions;
            }
          }, {
            key: "resize",
            value: function resize2(dimensions) {
              var canvasImage = this.getCanvasImage();
              var width = canvasImage.width, height = canvasImage.height, scaleX = canvasImage.scaleX, scaleY = canvasImage.scaleY;
              var dimensionsWidth = dimensions.width, dimensionsHeight = dimensions.height;
              var scaleValues = {
                scaleX: dimensionsWidth ? dimensionsWidth / width : scaleX,
                scaleY: dimensionsHeight ? dimensionsHeight / height : scaleY
              };
              if (scaleX !== scaleValues.scaleX || scaleY !== scaleValues.scaleY) {
                canvasImage.set(scaleValues).setCoords();
                this._dimensions = {
                  width: canvasImage.width * canvasImage.scaleX,
                  height: canvasImage.height * canvasImage.scaleY
                };
              }
              this.adjustCanvasDimensionBase();
              return promise_default().resolve();
            }
          }, {
            key: "start",
            value: function start() {
              var dimensions = this.getCurrentDimensions();
              this.setOriginalDimensions(dimensions);
            }
          }, {
            key: "end",
            value: function end() {
            }
          }]);
          return Resize2;
        }(component);
        var component_resize = resize_Resize;
        function drawingMode_resize_createSuper(Derived) {
          var hasNativeReflectConstruct = drawingMode_resize_isNativeReflectConstruct();
          return function _createSuperInternal() {
            var Super = _getPrototypeOf(Derived), result;
            if (hasNativeReflectConstruct) {
              var NewTarget = _getPrototypeOf(this).constructor;
              result = construct_default()(Super, arguments, NewTarget);
            } else {
              result = Super.apply(this, arguments);
            }
            return _possibleConstructorReturn(this, result);
          };
        }
        function drawingMode_resize_isNativeReflectConstruct() {
          if (typeof Reflect === "undefined" || !construct_default())
            return false;
          if (construct_default().sham)
            return false;
          if (typeof Proxy === "function")
            return true;
          try {
            Boolean.prototype.valueOf.call(construct_default()(Boolean, [], function() {
            }));
            return true;
          } catch (e) {
            return false;
          }
        }
        var ResizeDrawingMode = /* @__PURE__ */ function(_DrawingMode) {
          _inherits(ResizeDrawingMode2, _DrawingMode);
          var _super = drawingMode_resize_createSuper(ResizeDrawingMode2);
          function ResizeDrawingMode2() {
            _classCallCheck(this, ResizeDrawingMode2);
            return _super.call(this, drawingModes.RESIZE);
          }
          _createClass(ResizeDrawingMode2, [{
            key: "start",
            value: function start(graphics2) {
              var resize2 = graphics2.getComponent(componentNames.RESIZE);
              resize2.start();
            }
          }, {
            key: "end",
            value: function end(graphics2) {
              var resize2 = graphics2.getComponent(componentNames.RESIZE);
              resize2.end();
            }
          }]);
          return ResizeDrawingMode2;
        }(drawingMode);
        var drawingMode_resize = ResizeDrawingMode;
        var extend = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend, stamp = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().stamp, isArray = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().isArray, isString = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().isString, forEachArray = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().forEachArray, forEachOwnProperties = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().forEachOwnProperties, graphics_CustomEvents = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().CustomEvents;
        var DEFAULT_CSS_MAX_WIDTH = 1e3;
        var DEFAULT_CSS_MAX_HEIGHT = 800;
        var EXTRA_PX_FOR_PASTE = 10;
        var cssOnly = {
          cssOnly: true
        };
        var backstoreOnly = {
          backstoreOnly: true
        };
        var Graphics = /* @__PURE__ */ function() {
          function Graphics2(element) {
            var _context2, _context22, _context3, _context4, _context5, _context6, _context7, _context8, _context9, _context10, _context11;
            var _ref = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, cssMaxWidth = _ref.cssMaxWidth, cssMaxHeight = _ref.cssMaxHeight;
            _classCallCheck(this, Graphics2);
            this.canvasImage = null;
            this.cssMaxWidth = cssMaxWidth || DEFAULT_CSS_MAX_WIDTH;
            this.cssMaxHeight = cssMaxHeight || DEFAULT_CSS_MAX_HEIGHT;
            this.cropSelectionStyle = {};
            this.targetObjectForCopyPaste = null;
            this.imageName = "";
            this._objects = {};
            this._canvas = null;
            this._drawingMode = drawingModes.NORMAL;
            this._drawingModeMap = {};
            this._componentMap = {};
            this._handler = {
              onMouseDown: bind_default()(_context2 = this._onMouseDown).call(_context2, this),
              onObjectAdded: bind_default()(_context22 = this._onObjectAdded).call(_context22, this),
              onObjectRemoved: bind_default()(_context3 = this._onObjectRemoved).call(_context3, this),
              onObjectMoved: bind_default()(_context4 = this._onObjectMoved).call(_context4, this),
              onObjectScaled: bind_default()(_context5 = this._onObjectScaled).call(_context5, this),
              onObjectModified: bind_default()(_context6 = this._onObjectModified).call(_context6, this),
              onObjectRotated: bind_default()(_context7 = this._onObjectRotated).call(_context7, this),
              onObjectSelected: bind_default()(_context8 = this._onObjectSelected).call(_context8, this),
              onPathCreated: bind_default()(_context9 = this._onPathCreated).call(_context9, this),
              onSelectionCleared: bind_default()(_context10 = this._onSelectionCleared).call(_context10, this),
              onSelectionCreated: bind_default()(_context11 = this._onSelectionCreated).call(_context11, this)
            };
            this._setObjectCachingToFalse();
            this._setCanvasElement(element);
            this._createDrawingModeInstances();
            this._createComponents();
            this._attachCanvasEvents();
            this._attachZoomEvents();
          }
          _createClass(Graphics2, [{
            key: "destroy",
            value: function destroy() {
              var wrapperEl = this._canvas.wrapperEl;
              this._canvas.clear();
              wrapperEl.parentNode.removeChild(wrapperEl);
              this._detachZoomEvents();
            }
          }, {
            key: "_attachZoomEvents",
            value: function _attachZoomEvents() {
              var zoom2 = this.getComponent(componentNames.ZOOM);
              zoom2.attachKeyboardZoomEvents();
            }
          }, {
            key: "_detachZoomEvents",
            value: function _detachZoomEvents() {
              var zoom2 = this.getComponent(componentNames.ZOOM);
              zoom2.detachKeyboardZoomEvents();
            }
          }, {
            key: "deactivateAll",
            value: function deactivateAll() {
              this._canvas.discardActiveObject();
              return this;
            }
          }, {
            key: "renderAll",
            value: function renderAll() {
              this._canvas.renderAll();
              return this;
            }
          }, {
            key: "add",
            value: function add(objects) {
              var _this$_canvas;
              var theArgs = [];
              if (isArray(objects)) {
                theArgs = objects;
              } else {
                theArgs.push(objects);
              }
              (_this$_canvas = this._canvas).add.apply(_this$_canvas, _toConsumableArray(theArgs));
            }
          }, {
            key: "contains",
            value: function contains(target) {
              return this._canvas.contains(target);
            }
          }, {
            key: "getObjects",
            value: function getObjects() {
              var _context12;
              return slice_default()(_context12 = this._canvas.getObjects()).call(_context12);
            }
          }, {
            key: "getObject",
            value: function getObject(id) {
              return this._objects[id];
            }
          }, {
            key: "remove",
            value: function remove(target) {
              this._canvas.remove(target);
            }
          }, {
            key: "removeAll",
            value: function removeAll(includesBackground) {
              var _context13;
              var canvas = this._canvas;
              var objects = slice_default()(_context13 = canvas.getObjects()).call(_context13);
              canvas.remove.apply(canvas, _toConsumableArray(this._canvas.getObjects()));
              if (includesBackground) {
                canvas.clear();
              }
              return objects;
            }
          }, {
            key: "removeObjectById",
            value: function removeObjectById(id) {
              var objects = [];
              var canvas = this._canvas;
              var target = this.getObject(id);
              var isValidGroup = target && target.isType("group") && !target.isEmpty();
              if (isValidGroup) {
                canvas.discardActiveObject();
                target.forEachObject(function(obj) {
                  objects.push(obj);
                  canvas.remove(obj);
                });
              } else if (canvas.contains(target)) {
                objects.push(target);
                canvas.remove(target);
              }
              return objects;
            }
          }, {
            key: "getObjectId",
            value: function getObjectId(object) {
              var key = null;
              for (key in this._objects) {
                if (this._objects.hasOwnProperty(key)) {
                  if (object === this._objects[key]) {
                    return key;
                  }
                }
              }
              return null;
            }
          }, {
            key: "getActiveObject",
            value: function getActiveObject() {
              return this._canvas._activeObject;
            }
          }, {
            key: "getActiveObjectIdForRemove",
            value: function getActiveObjectIdForRemove() {
              var activeObject = this.getActiveObject();
              var type = activeObject.type, left = activeObject.left, top = activeObject.top;
              var isSelection = type === "activeSelection";
              if (isSelection) {
                var group = new fabric.fabric.Group(_toConsumableArray(activeObject.getObjects()), {
                  left,
                  top
                });
                return this._addFabricObject(group);
              }
              return this.getObjectId(activeObject);
            }
          }, {
            key: "isReadyRemoveObject",
            value: function isReadyRemoveObject() {
              var activeObject = this.getActiveObject();
              return activeObject && !activeObject.isEditing;
            }
          }, {
            key: "getActiveObjects",
            value: function getActiveObjects() {
              var activeObject = this._canvas._activeObject;
              return activeObject && activeObject.type === "activeSelection" ? activeObject : null;
            }
          }, {
            key: "getActiveSelectionFromObjects",
            value: function getActiveSelectionFromObjects(objects) {
              var canvas = this.getCanvas();
              return new fabric.fabric.ActiveSelection(objects, {
                canvas
              });
            }
          }, {
            key: "setActiveObject",
            value: function setActiveObject(target) {
              this._canvas.setActiveObject(target);
            }
          }, {
            key: "setCropSelectionStyle",
            value: function setCropSelectionStyle(style2) {
              this.cropSelectionStyle = style2;
            }
          }, {
            key: "getComponent",
            value: function getComponent(name) {
              return this._componentMap[name];
            }
          }, {
            key: "getDrawingMode",
            value: function getDrawingMode() {
              return this._drawingMode;
            }
          }, {
            key: "startDrawingMode",
            value: function startDrawingMode(mode, option) {
              if (this._isSameDrawingMode(mode)) {
                return true;
              }
              this.stopDrawingMode();
              var drawingModeInstance = this._getDrawingModeInstance(mode);
              if (drawingModeInstance && drawingModeInstance.start) {
                drawingModeInstance.start(this, option);
                this._drawingMode = mode;
              }
              return !!drawingModeInstance;
            }
          }, {
            key: "stopDrawingMode",
            value: function stopDrawingMode() {
              if (this._isSameDrawingMode(drawingModes.NORMAL)) {
                return;
              }
              var drawingModeInstance = this._getDrawingModeInstance(this.getDrawingMode());
              if (drawingModeInstance && drawingModeInstance.end) {
                drawingModeInstance.end(this);
              }
              this._drawingMode = drawingModes.NORMAL;
            }
          }, {
            key: "zoom",
            value: function zoom2(_ref2, zoomLevel) {
              var x = _ref2.x, y = _ref2.y;
              var zoom3 = this.getComponent(componentNames.ZOOM);
              zoom3.zoom({
                x,
                y
              }, zoomLevel);
            }
          }, {
            key: "getZoomMode",
            value: function getZoomMode() {
              var zoom2 = this.getComponent(componentNames.ZOOM);
              return zoom2.mode;
            }
          }, {
            key: "startZoomInMode",
            value: function startZoomInMode() {
              var zoom2 = this.getComponent(componentNames.ZOOM);
              zoom2.startZoomInMode();
            }
          }, {
            key: "endZoomInMode",
            value: function endZoomInMode() {
              var zoom2 = this.getComponent(componentNames.ZOOM);
              zoom2.endZoomInMode();
            }
          }, {
            key: "zoomOut",
            value: function zoomOut() {
              var zoom2 = this.getComponent(componentNames.ZOOM);
              zoom2.zoomOut();
            }
          }, {
            key: "startHandMode",
            value: function startHandMode() {
              var zoom2 = this.getComponent(componentNames.ZOOM);
              zoom2.startHandMode();
            }
          }, {
            key: "endHandMode",
            value: function endHandMode() {
              var zoom2 = this.getComponent(componentNames.ZOOM);
              zoom2.endHandMode();
            }
          }, {
            key: "resetZoom",
            value: function resetZoom() {
              var zoom2 = this.getComponent(componentNames.ZOOM);
              zoom2.resetZoom();
            }
          }, {
            key: "toDataURL",
            value: function toDataURL(options) {
              var cropper2 = this.getComponent(componentNames.CROPPER);
              cropper2.changeVisibility(false);
              var dataUrl = this._canvas && this._canvas.toDataURL(options);
              cropper2.changeVisibility(true);
              return dataUrl;
            }
          }, {
            key: "setCanvasImage",
            value: function setCanvasImage(name, canvasImage) {
              if (canvasImage) {
                stamp(canvasImage);
              }
              this.imageName = name;
              this.canvasImage = canvasImage;
            }
          }, {
            key: "setCssMaxDimension",
            value: function setCssMaxDimension(maxDimension) {
              this.cssMaxWidth = maxDimension.width || this.cssMaxWidth;
              this.cssMaxHeight = maxDimension.height || this.cssMaxHeight;
            }
          }, {
            key: "adjustCanvasDimension",
            value: function adjustCanvasDimension() {
              this.adjustCanvasDimensionBase(this.canvasImage.scale(1));
            }
          }, {
            key: "adjustCanvasDimensionBase",
            value: function adjustCanvasDimensionBase() {
              var canvasImage = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null;
              if (!canvasImage) {
                canvasImage = this.canvasImage;
              }
              var _canvasImage$getBound = canvasImage.getBoundingRect(), width = _canvasImage$getBound.width, height = _canvasImage$getBound.height;
              var maxDimension = this._calcMaxDimension(width, height);
              this.setCanvasCssDimension({
                width: "100%",
                height: "100%",
                "max-width": "".concat(maxDimension.width, "px"),
                "max-height": "".concat(maxDimension.height, "px")
              });
              this.setCanvasBackstoreDimension({
                width,
                height
              });
              this._canvas.centerObject(canvasImage);
            }
          }, {
            key: "setCanvasCssDimension",
            value: function setCanvasCssDimension(dimension) {
              this._canvas.setDimensions(dimension, cssOnly);
            }
          }, {
            key: "setCanvasBackstoreDimension",
            value: function setCanvasBackstoreDimension(dimension) {
              this._canvas.setDimensions(dimension, backstoreOnly);
            }
          }, {
            key: "setImageProperties",
            value: function setImageProperties(setting, withRendering) {
              var canvasImage = this.canvasImage;
              if (!canvasImage) {
                return;
              }
              canvasImage.set(setting).setCoords();
              if (withRendering) {
                this._canvas.renderAll();
              }
            }
          }, {
            key: "getCanvasElement",
            value: function getCanvasElement() {
              return this._canvas.getElement();
            }
          }, {
            key: "getCanvas",
            value: function getCanvas() {
              return this._canvas;
            }
          }, {
            key: "getCanvasImage",
            value: function getCanvasImage() {
              return this.canvasImage;
            }
          }, {
            key: "getImageName",
            value: function getImageName() {
              return this.imageName;
            }
          }, {
            key: "addImageObject",
            value: function addImageObject(imgUrl) {
              var _context14, _this = this;
              var callback = bind_default()(_context14 = this._callbackAfterLoadingImageObject).call(_context14, this);
              return new (promise_default())(function(resolve) {
                fabric.fabric.Image.fromURL(imgUrl, function(image) {
                  callback(image);
                  resolve(_this.createObjectProperties(image));
                }, {
                  crossOrigin: "Anonymous"
                });
              });
            }
          }, {
            key: "getCenter",
            value: function getCenter() {
              return this._canvas.getCenter();
            }
          }, {
            key: "getCropzoneRect",
            value: function getCropzoneRect() {
              return this.getComponent(componentNames.CROPPER).getCropzoneRect();
            }
          }, {
            key: "setCropzoneRect",
            value: function setCropzoneRect(mode) {
              this.getComponent(componentNames.CROPPER).setCropzoneRect(mode);
            }
          }, {
            key: "getCroppedImageData",
            value: function getCroppedImageData(cropRect) {
              return this.getComponent(componentNames.CROPPER).getCroppedImageData(cropRect);
            }
          }, {
            key: "setBrush",
            value: function setBrush(option) {
              var drawingMode2 = this._drawingMode;
              var compName = componentNames.FREE_DRAWING;
              if (drawingMode2 === drawingModes.LINE_DRAWING) {
                compName = componentNames.LINE;
              }
              this.getComponent(compName).setBrush(option);
            }
          }, {
            key: "setDrawingShape",
            value: function setDrawingShape(type, options) {
              this.getComponent(componentNames.SHAPE).setStates(type, options);
            }
          }, {
            key: "setIconStyle",
            value: function setIconStyle(type, iconColor) {
              this.getComponent(componentNames.ICON).setStates(type, iconColor);
            }
          }, {
            key: "registerPaths",
            value: function registerPaths(pathInfos) {
              this.getComponent(componentNames.ICON).registerPaths(pathInfos);
            }
          }, {
            key: "changeCursor",
            value: function changeCursor(cursorType) {
              var canvas = this.getCanvas();
              canvas.defaultCursor = cursorType;
              canvas.renderAll();
            }
          }, {
            key: "hasFilter",
            value: function hasFilter(type) {
              return this.getComponent(componentNames.FILTER).hasFilter(type);
            }
          }, {
            key: "setSelectionStyle",
            value: function setSelectionStyle(styles) {
              extend(fObjectOptions.SELECTION_STYLE, styles);
            }
          }, {
            key: "setObjectProperties",
            value: function setObjectProperties(id, props) {
              var object = this.getObject(id);
              var clone = extend({}, props);
              object.set(clone);
              object.setCoords();
              this.getCanvas().renderAll();
              return clone;
            }
          }, {
            key: "getObjectProperties",
            value: function getObjectProperties(id, keys2) {
              var object = this.getObject(id);
              var props = {};
              if (isString(keys2)) {
                props[keys2] = object[keys2];
              } else if (isArray(keys2)) {
                forEachArray(keys2, function(value) {
                  props[value] = object[value];
                });
              } else {
                forEachOwnProperties(keys2, function(value, key) {
                  props[key] = object[key];
                });
              }
              return props;
            }
          }, {
            key: "getObjectPosition",
            value: function getObjectPosition(id, originX, originY) {
              var targetObj = this.getObject(id);
              if (!targetObj) {
                return null;
              }
              return targetObj.getPointByOrigin(originX, originY);
            }
          }, {
            key: "setObjectPosition",
            value: function setObjectPosition(id, posInfo) {
              var targetObj = this.getObject(id);
              var x = posInfo.x, y = posInfo.y, originX = posInfo.originX, originY = posInfo.originY;
              if (!targetObj) {
                return false;
              }
              var targetOrigin = targetObj.getPointByOrigin(originX, originY);
              var centerOrigin = targetObj.getPointByOrigin("center", "center");
              var diffX = centerOrigin.x - targetOrigin.x;
              var diffY = centerOrigin.y - targetOrigin.y;
              targetObj.set({
                left: x + diffX,
                top: y + diffY
              });
              targetObj.setCoords();
              return true;
            }
          }, {
            key: "getCanvasSize",
            value: function getCanvasSize() {
              var image = this.getCanvasImage();
              return {
                width: image ? image.width : 0,
                height: image ? image.height : 0
              };
            }
          }, {
            key: "createStaticCanvas",
            value: function createStaticCanvas() {
              var staticCanvas = new fabric.fabric.StaticCanvas();
              staticCanvas.set({
                enableRetinaScaling: false
              });
              return staticCanvas;
            }
          }, {
            key: "_getDrawingModeInstance",
            value: function _getDrawingModeInstance(modeName) {
              return this._drawingModeMap[modeName];
            }
          }, {
            key: "_setObjectCachingToFalse",
            value: function _setObjectCachingToFalse() {
              fabric.fabric.Object.prototype.objectCaching = false;
            }
          }, {
            key: "_setCanvasElement",
            value: function _setCanvasElement(element) {
              var selectedElement;
              var canvasElement;
              if (element.nodeType) {
                selectedElement = element;
              } else {
                selectedElement = document.querySelector(element);
              }
              if (selectedElement.nodeName.toUpperCase() !== "CANVAS") {
                canvasElement = document.createElement("canvas");
                selectedElement.appendChild(canvasElement);
              }
              this._canvas = new fabric.fabric.Canvas(canvasElement, {
                containerClass: "tui-image-editor-canvas-container",
                enableRetinaScaling: false
              });
            }
          }, {
            key: "_createDrawingModeInstances",
            value: function _createDrawingModeInstances() {
              this._register(this._drawingModeMap, new drawingMode_cropper());
              this._register(this._drawingModeMap, new drawingMode_freeDrawing());
              this._register(this._drawingModeMap, new lineDrawing());
              this._register(this._drawingModeMap, new drawingMode_shape());
              this._register(this._drawingModeMap, new drawingMode_text());
              this._register(this._drawingModeMap, new drawingMode_icon());
              this._register(this._drawingModeMap, new drawingMode_zoom());
              this._register(this._drawingModeMap, new drawingMode_resize());
            }
          }, {
            key: "_createComponents",
            value: function _createComponents() {
              this._register(this._componentMap, new imageLoader(this));
              this._register(this._componentMap, new cropper(this));
              this._register(this._componentMap, new component_flip(this));
              this._register(this._componentMap, new rotation(this));
              this._register(this._componentMap, new freeDrawing(this));
              this._register(this._componentMap, new line(this));
              this._register(this._componentMap, new component_text(this));
              this._register(this._componentMap, new component_icon(this));
              this._register(this._componentMap, new component_filter(this));
              this._register(this._componentMap, new shape_Shape(this));
              this._register(this._componentMap, new zoom(this));
              this._register(this._componentMap, new component_resize(this));
            }
          }, {
            key: "_register",
            value: function _register(map2, module2) {
              map2[module2.getName()] = module2;
            }
          }, {
            key: "_isSameDrawingMode",
            value: function _isSameDrawingMode(mode) {
              return this.getDrawingMode() === mode;
            }
          }, {
            key: "_calcMaxDimension",
            value: function _calcMaxDimension(width, height) {
              var wScaleFactor = this.cssMaxWidth / width;
              var hScaleFactor = this.cssMaxHeight / height;
              var cssMaxWidth = Math.min(width, this.cssMaxWidth);
              var cssMaxHeight = Math.min(height, this.cssMaxHeight);
              if (wScaleFactor < 1 && wScaleFactor < hScaleFactor) {
                cssMaxWidth = width * wScaleFactor;
                cssMaxHeight = height * wScaleFactor;
              } else if (hScaleFactor < 1 && hScaleFactor < wScaleFactor) {
                cssMaxWidth = width * hScaleFactor;
                cssMaxHeight = height * hScaleFactor;
              }
              return {
                width: Math.floor(cssMaxWidth),
                height: Math.floor(cssMaxHeight)
              };
            }
          }, {
            key: "_callbackAfterLoadingImageObject",
            value: function _callbackAfterLoadingImageObject(obj) {
              var centerPos = this.getCanvasImage().getCenterPoint();
              obj.set(fObjectOptions.SELECTION_STYLE);
              obj.set({
                left: centerPos.x,
                top: centerPos.y,
                crossOrigin: "Anonymous"
              });
              this.getCanvas().add(obj).setActiveObject(obj);
            }
          }, {
            key: "_attachCanvasEvents",
            value: function _attachCanvasEvents() {
              var canvas = this._canvas;
              var handler = this._handler;
              canvas.on({
                "mouse:down": handler.onMouseDown,
                "object:added": handler.onObjectAdded,
                "object:removed": handler.onObjectRemoved,
                "object:moving": handler.onObjectMoved,
                "object:scaling": handler.onObjectScaled,
                "object:modified": handler.onObjectModified,
                "object:rotating": handler.onObjectRotated,
                "path:created": handler.onPathCreated,
                "selection:cleared": handler.onSelectionCleared,
                "selection:created": handler.onSelectionCreated,
                "selection:updated": handler.onObjectSelected
              });
            }
          }, {
            key: "_onMouseDown",
            value: function _onMouseDown(fEvent) {
              var _this2 = this;
              var event = fEvent.e, target = fEvent.target;
              var originPointer = this._canvas.getPointer(event);
              if (target) {
                var type = target.type;
                var undoData = makeSelectionUndoData(target, function(item) {
                  return makeSelectionUndoDatum(_this2.getObjectId(item), item, type === "activeSelection");
                });
                setCachedUndoDataForDimension(undoData);
              }
              this.fire(eventNames.MOUSE_DOWN, event, originPointer);
            }
          }, {
            key: "_onObjectAdded",
            value: function _onObjectAdded(fEvent) {
              var obj = fEvent.target;
              if (obj.isType("cropzone")) {
                return;
              }
              this._addFabricObject(obj);
            }
          }, {
            key: "_onObjectRemoved",
            value: function _onObjectRemoved(fEvent) {
              var obj = fEvent.target;
              this._removeFabricObject(stamp(obj));
            }
          }, {
            key: "_onObjectMoved",
            value: function _onObjectMoved(fEvent) {
              var _this3 = this;
              this._lazyFire(eventNames.OBJECT_MOVED, function(object) {
                return _this3.createObjectProperties(object);
              }, fEvent.target);
            }
          }, {
            key: "_onObjectScaled",
            value: function _onObjectScaled(fEvent) {
              var _this4 = this;
              this._lazyFire(eventNames.OBJECT_SCALED, function(object) {
                return _this4.createObjectProperties(object);
              }, fEvent.target);
            }
          }, {
            key: "_onObjectModified",
            value: function _onObjectModified(fEvent) {
              var target = fEvent.target;
              if (target.type === "activeSelection") {
                var items = target.getObjects();
                for_each_default()(items).call(items, function(item) {
                  return item.fire("modifiedInGroup", target);
                });
              }
              this.fire(eventNames.OBJECT_MODIFIED, target, this.getObjectId(target));
            }
          }, {
            key: "_onObjectRotated",
            value: function _onObjectRotated(fEvent) {
              var _this5 = this;
              this._lazyFire(eventNames.OBJECT_ROTATED, function(object) {
                return _this5.createObjectProperties(object);
              }, fEvent.target);
            }
          }, {
            key: "_lazyFire",
            value: function _lazyFire(eventName, paramsMaker, target) {
              var _this6 = this;
              var existEventDelegation = target && target.canvasEventDelegation;
              var delegationState = existEventDelegation ? target.canvasEventDelegation(eventName) : "none";
              if (delegationState === "unregistered") {
                target.canvasEventRegister(eventName, function(object) {
                  _this6.fire(eventName, paramsMaker(object));
                });
              }
              if (delegationState === "none") {
                this.fire(eventName, paramsMaker(target));
              }
            }
          }, {
            key: "_onObjectSelected",
            value: function _onObjectSelected(fEvent) {
              var target = fEvent.target;
              var params = this.createObjectProperties(target);
              this.fire(eventNames.OBJECT_ACTIVATED, params);
            }
          }, {
            key: "_onPathCreated",
            value: function _onPathCreated(obj) {
              var _obj$path$getCenterPo = obj.path.getCenterPoint(), left = _obj$path$getCenterPo.x, top = _obj$path$getCenterPo.y;
              obj.path.set(extend({
                left,
                top
              }, fObjectOptions.SELECTION_STYLE));
              var params = this.createObjectProperties(obj.path);
              this.fire(eventNames.ADD_OBJECT, params);
            }
          }, {
            key: "_onSelectionCleared",
            value: function _onSelectionCleared() {
              this.fire(eventNames.SELECTION_CLEARED);
            }
          }, {
            key: "_onSelectionCreated",
            value: function _onSelectionCreated(fEvent) {
              var target = fEvent.target;
              var params = this.createObjectProperties(target);
              this.fire(eventNames.OBJECT_ACTIVATED, params);
              this.fire(eventNames.SELECTION_CREATED, fEvent.target);
            }
          }, {
            key: "discardSelection",
            value: function discardSelection() {
              this._canvas.discardActiveObject();
              this._canvas.renderAll();
            }
          }, {
            key: "changeSelectableAll",
            value: function changeSelectableAll(selectable) {
              this._canvas.forEachObject(function(obj) {
                obj.selectable = selectable;
                obj.hoverCursor = selectable ? "move" : "crosshair";
              });
            }
          }, {
            key: "createObjectProperties",
            value: function createObjectProperties(obj) {
              var predefinedKeys = ["left", "top", "width", "height", "fill", "stroke", "strokeWidth", "opacity", "angle"];
              var props = {
                id: stamp(obj),
                type: obj.type
              };
              extend(props, getProperties(obj, predefinedKeys));
              if (includes(["i-text", "text"], obj.type)) {
                extend(props, this._createTextProperties(obj, props));
              } else if (includes(["rect", "triangle", "circle"], obj.type)) {
                var shapeComp = this.getComponent(componentNames.SHAPE);
                extend(props, {
                  fill: shapeComp.makeFillPropertyForUserEvent(obj)
                });
              }
              return props;
            }
          }, {
            key: "_createTextProperties",
            value: function _createTextProperties(obj) {
              var predefinedKeys = ["text", "fontFamily", "fontSize", "fontStyle", "textAlign", "textDecoration", "fontWeight"];
              var props = {};
              extend(props, getProperties(obj, predefinedKeys));
              return props;
            }
          }, {
            key: "_addFabricObject",
            value: function _addFabricObject(obj) {
              var id = stamp(obj);
              this._objects[id] = obj;
              return id;
            }
          }, {
            key: "_removeFabricObject",
            value: function _removeFabricObject(id) {
              delete this._objects[id];
            }
          }, {
            key: "resetTargetObjectForCopyPaste",
            value: function resetTargetObjectForCopyPaste() {
              var activeObject = this.getActiveObject();
              if (activeObject) {
                this.targetObjectForCopyPaste = activeObject;
              }
            }
          }, {
            key: "pasteObject",
            value: function pasteObject() {
              var _this7 = this;
              if (!this.targetObjectForCopyPaste) {
                return promise_default().resolve([]);
              }
              var targetObject = this.targetObjectForCopyPaste;
              var isGroupSelect = targetObject.type === "activeSelection";
              var targetObjects = isGroupSelect ? targetObject.getObjects() : [targetObject];
              var newTargetObject = null;
              this.discardSelection();
              return this._cloneObject(targetObjects).then(function(addedObjects) {
                if (addedObjects.length > 1) {
                  newTargetObject = _this7.getActiveSelectionFromObjects(addedObjects);
                } else {
                  var _addedObjects = _slicedToArray(addedObjects, 1);
                  newTargetObject = _addedObjects[0];
                }
                _this7.targetObjectForCopyPaste = newTargetObject;
                _this7.setActiveObject(newTargetObject);
              });
            }
          }, {
            key: "_cloneObject",
            value: function _cloneObject(targetObjects) {
              var _this8 = this;
              var addedObjects = map_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()).call(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default(), targetObjects, function(targetObject) {
                return _this8._cloneObjectItem(targetObject);
              });
              return promise_default().all(addedObjects);
            }
          }, {
            key: "_cloneObjectItem",
            value: function _cloneObjectItem(targetObject) {
              var _this9 = this;
              return this._copyFabricObjectForPaste(targetObject).then(function(clonedObject) {
                var objectProperties = _this9.createObjectProperties(clonedObject);
                _this9.add(clonedObject);
                _this9.fire(eventNames.ADD_OBJECT, objectProperties);
                return clonedObject;
              });
            }
          }, {
            key: "_copyFabricObjectForPaste",
            value: function _copyFabricObjectForPaste(targetObject) {
              var _this10 = this;
              var addExtraPx = function addExtraPx2(value, isReverse) {
                return isReverse ? value - EXTRA_PX_FOR_PASTE : value + EXTRA_PX_FOR_PASTE;
              };
              return this._copyFabricObject(targetObject).then(function(clonedObject) {
                var left = clonedObject.left, top = clonedObject.top, width = clonedObject.width, height = clonedObject.height;
                var _this10$getCanvasSize = _this10.getCanvasSize(), canvasWidth = _this10$getCanvasSize.width, canvasHeight = _this10$getCanvasSize.height;
                var rightEdge = left + width / 2;
                var bottomEdge = top + height / 2;
                clonedObject.set(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend({
                  left: addExtraPx(left, rightEdge + EXTRA_PX_FOR_PASTE > canvasWidth),
                  top: addExtraPx(top, bottomEdge + EXTRA_PX_FOR_PASTE > canvasHeight)
                }, fObjectOptions.SELECTION_STYLE));
                return clonedObject;
              });
            }
          }, {
            key: "_copyFabricObject",
            value: function _copyFabricObject(targetObject) {
              var _this11 = this;
              return new (promise_default())(function(resolve) {
                targetObject.clone(function(cloned) {
                  var shapeComp = _this11.getComponent(componentNames.SHAPE);
                  if (isShape(cloned)) {
                    shapeComp.processForCopiedObject(cloned, targetObject);
                  }
                  resolve(cloned);
                });
              });
            }
          }, {
            key: "getCurrentDimensions",
            value: function getCurrentDimensions() {
              var resize2 = this.getComponent(componentNames.RESIZE);
              return resize2.getCurrentDimensions();
            }
          }, {
            key: "getOriginalDimensions",
            value: function getOriginalDimensions() {
              var resize2 = this.getComponent(componentNames.RESIZE);
              return resize2.getOriginalDimensions();
            }
          }, {
            key: "setOriginalDimensions",
            value: function setOriginalDimensions(dimensions) {
              var resize2 = this.getComponent(componentNames.RESIZE);
              resize2.setOriginalDimensions(dimensions);
            }
          }, {
            key: "resize",
            value: function resize2(dimensions) {
              var resize3 = this.getComponent(componentNames.RESIZE);
              return resize3.resize(dimensions);
            }
          }]);
          return Graphics2;
        }();
        graphics_CustomEvents.mixin(Graphics);
        var graphics = Graphics;
        var isUndefined = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().isUndefined, imageEditor_forEach = for_each_default()(external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default()), imageEditor_CustomEvents = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().CustomEvents;
        var MOUSE_DOWN = eventNames.MOUSE_DOWN, OBJECT_MOVED = eventNames.OBJECT_MOVED, OBJECT_SCALED = eventNames.OBJECT_SCALED, OBJECT_ACTIVATED = eventNames.OBJECT_ACTIVATED, OBJECT_ROTATED = eventNames.OBJECT_ROTATED, OBJECT_ADDED = eventNames.OBJECT_ADDED, imageEditor_OBJECT_MODIFIED = eventNames.OBJECT_MODIFIED, imageEditor_ADD_TEXT = eventNames.ADD_TEXT, ADD_OBJECT = eventNames.ADD_OBJECT, imageEditor_TEXT_EDITING = eventNames.TEXT_EDITING, TEXT_CHANGED = eventNames.TEXT_CHANGED, ICON_CREATE_RESIZE = eventNames.ICON_CREATE_RESIZE, ICON_CREATE_END = eventNames.ICON_CREATE_END, SELECTION_CLEARED = eventNames.SELECTION_CLEARED, SELECTION_CREATED = eventNames.SELECTION_CREATED, ADD_OBJECT_AFTER = eventNames.ADD_OBJECT_AFTER;
        var ImageEditor2 = /* @__PURE__ */ function() {
          function ImageEditor3(wrapper, options) {
            var _context2, _context22, _context3, _context4, _context5, _context6, _context7, _context8, _context9, _context10, _context11, _context12, _context13, _context14, _context15, _context16;
            _classCallCheck(this, ImageEditor3);
            options = external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend({
              includeUI: false,
              usageStatistics: true
            }, options);
            this.mode = null;
            this.activeObjectId = null;
            if (options.includeUI) {
              var UIOption = options.includeUI;
              UIOption.usageStatistics = options.usageStatistics;
              this.ui = new ui(wrapper, UIOption, this.getActions());
              options = this.ui.setUiDefaultSelectionStyle(options);
            }
            this._invoker = new invoker();
            this._graphics = new graphics(this.ui ? this.ui.getEditorArea() : wrapper, {
              cssMaxWidth: options.cssMaxWidth,
              cssMaxHeight: options.cssMaxHeight
            });
            this._handlers = {
              keydown: bind_default()(_context2 = this._onKeyDown).call(_context2, this),
              mousedown: bind_default()(_context22 = this._onMouseDown).call(_context22, this),
              objectActivated: bind_default()(_context3 = this._onObjectActivated).call(_context3, this),
              objectMoved: bind_default()(_context4 = this._onObjectMoved).call(_context4, this),
              objectScaled: bind_default()(_context5 = this._onObjectScaled).call(_context5, this),
              objectRotated: bind_default()(_context6 = this._onObjectRotated).call(_context6, this),
              objectAdded: bind_default()(_context7 = this._onObjectAdded).call(_context7, this),
              objectModified: bind_default()(_context8 = this._onObjectModified).call(_context8, this),
              createdPath: this._onCreatedPath,
              addText: bind_default()(_context9 = this._onAddText).call(_context9, this),
              addObject: bind_default()(_context10 = this._onAddObject).call(_context10, this),
              textEditing: bind_default()(_context11 = this._onTextEditing).call(_context11, this),
              textChanged: bind_default()(_context12 = this._onTextChanged).call(_context12, this),
              iconCreateResize: bind_default()(_context13 = this._onIconCreateResize).call(_context13, this),
              iconCreateEnd: bind_default()(_context14 = this._onIconCreateEnd).call(_context14, this),
              selectionCleared: bind_default()(_context15 = this._selectionCleared).call(_context15, this),
              selectionCreated: bind_default()(_context16 = this._selectionCreated).call(_context16, this)
            };
            this._attachInvokerEvents();
            this._attachGraphicsEvents();
            this._attachDomEvents();
            this._setSelectionStyle(options.selectionStyle, {
              applyCropSelectionStyle: options.applyCropSelectionStyle,
              applyGroupSelectionStyle: options.applyGroupSelectionStyle
            });
            if (options.usageStatistics) {
              sendHostName();
            }
            if (this.ui) {
              this.ui.initCanvas();
              this.setReAction();
              this._attachColorPickerInputBoxEvents();
            }
            fabric.fabric.enableGLFiltering = false;
          }
          _createClass(ImageEditor3, [{
            key: "_attachColorPickerInputBoxEvents",
            value: function _attachColorPickerInputBoxEvents() {
              var _this = this;
              this.ui.on(eventNames.INPUT_BOX_EDITING_STARTED, function() {
                _this.isColorPickerInputBoxEditing = true;
              });
              this.ui.on(eventNames.INPUT_BOX_EDITING_STOPPED, function() {
                _this.isColorPickerInputBoxEditing = false;
              });
            }
          }, {
            key: "_detachColorPickerInputBoxEvents",
            value: function _detachColorPickerInputBoxEvents() {
              this.ui.off(eventNames.INPUT_BOX_EDITING_STARTED);
              this.ui.off(eventNames.INPUT_BOX_EDITING_STOPPED);
            }
          }, {
            key: "_setSelectionStyle",
            value: function _setSelectionStyle(selectionStyle, _ref) {
              var applyCropSelectionStyle = _ref.applyCropSelectionStyle, applyGroupSelectionStyle = _ref.applyGroupSelectionStyle;
              if (selectionStyle) {
                this._graphics.setSelectionStyle(selectionStyle);
              }
              if (applyCropSelectionStyle) {
                this._graphics.setCropSelectionStyle(selectionStyle);
              }
              if (applyGroupSelectionStyle) {
                this.on("selectionCreated", function(eventTarget) {
                  if (eventTarget.type === "activeSelection") {
                    eventTarget.set(selectionStyle);
                  }
                });
              }
            }
          }, {
            key: "_attachInvokerEvents",
            value: function _attachInvokerEvents() {
              var _context17, _context18, _this2 = this;
              var UNDO_STACK_CHANGED = eventNames.UNDO_STACK_CHANGED, REDO_STACK_CHANGED = eventNames.REDO_STACK_CHANGED, EXECUTE_COMMAND = eventNames.EXECUTE_COMMAND, AFTER_UNDO = eventNames.AFTER_UNDO, AFTER_REDO = eventNames.AFTER_REDO, HAND_STARTED2 = eventNames.HAND_STARTED, HAND_STOPPED2 = eventNames.HAND_STOPPED;
              this._invoker.on(UNDO_STACK_CHANGED, bind_default()(_context17 = this.fire).call(_context17, this, UNDO_STACK_CHANGED));
              this._invoker.on(REDO_STACK_CHANGED, bind_default()(_context18 = this.fire).call(_context18, this, REDO_STACK_CHANGED));
              if (this.ui) {
                var canvas = this._graphics.getCanvas();
                this._invoker.on(EXECUTE_COMMAND, function(command2) {
                  return _this2.ui.fire(EXECUTE_COMMAND, command2);
                });
                this._invoker.on(AFTER_UNDO, function(command2) {
                  return _this2.ui.fire(AFTER_UNDO, command2);
                });
                this._invoker.on(AFTER_REDO, function(command2) {
                  return _this2.ui.fire(AFTER_REDO, command2);
                });
                canvas.on(HAND_STARTED2, function() {
                  return _this2.ui.fire(HAND_STARTED2);
                });
                canvas.on(HAND_STOPPED2, function() {
                  return _this2.ui.fire(HAND_STOPPED2);
                });
              }
            }
          }, {
            key: "_attachGraphicsEvents",
            value: function _attachGraphicsEvents() {
              var _this$_graphics$on;
              this._graphics.on((_this$_graphics$on = {}, _defineProperty(_this$_graphics$on, MOUSE_DOWN, this._handlers.mousedown), _defineProperty(_this$_graphics$on, OBJECT_MOVED, this._handlers.objectMoved), _defineProperty(_this$_graphics$on, OBJECT_SCALED, this._handlers.objectScaled), _defineProperty(_this$_graphics$on, OBJECT_ROTATED, this._handlers.objectRotated), _defineProperty(_this$_graphics$on, OBJECT_ACTIVATED, this._handlers.objectActivated), _defineProperty(_this$_graphics$on, OBJECT_ADDED, this._handlers.objectAdded), _defineProperty(_this$_graphics$on, imageEditor_OBJECT_MODIFIED, this._handlers.objectModified), _defineProperty(_this$_graphics$on, imageEditor_ADD_TEXT, this._handlers.addText), _defineProperty(_this$_graphics$on, ADD_OBJECT, this._handlers.addObject), _defineProperty(_this$_graphics$on, imageEditor_TEXT_EDITING, this._handlers.textEditing), _defineProperty(_this$_graphics$on, TEXT_CHANGED, this._handlers.textChanged), _defineProperty(_this$_graphics$on, ICON_CREATE_RESIZE, this._handlers.iconCreateResize), _defineProperty(_this$_graphics$on, ICON_CREATE_END, this._handlers.iconCreateEnd), _defineProperty(_this$_graphics$on, SELECTION_CLEARED, this._handlers.selectionCleared), _defineProperty(_this$_graphics$on, SELECTION_CREATED, this._handlers.selectionCreated), _this$_graphics$on));
            }
          }, {
            key: "_attachDomEvents",
            value: function _attachDomEvents() {
              document.addEventListener("keydown", this._handlers.keydown);
            }
          }, {
            key: "_detachDomEvents",
            value: function _detachDomEvents() {
              document.removeEventListener("keydown", this._handlers.keydown);
            }
          }, {
            key: "_onKeyDown",
            value: function _onKeyDown(e) {
              var ctrlKey = e.ctrlKey, keyCode = e.keyCode, metaKey = e.metaKey;
              var isModifierKey = ctrlKey || metaKey;
              if (isModifierKey) {
                if (keyCode === keyCodes.C) {
                  this._graphics.resetTargetObjectForCopyPaste();
                } else if (keyCode === keyCodes.V) {
                  this._graphics.pasteObject();
                  this.clearRedoStack();
                } else if (keyCode === keyCodes.Z) {
                  this.undo()["catch"](function() {
                  });
                } else if (keyCode === keyCodes.Y) {
                  this.redo()["catch"](function() {
                  });
                }
              }
              var isDeleteKey = keyCode === keyCodes.BACKSPACE || keyCode === keyCodes.DEL;
              var isRemoveReady = this._graphics.isReadyRemoveObject();
              if (!this.isColorPickerInputBoxEditing && isRemoveReady && isDeleteKey) {
                e.preventDefault();
                this.removeActiveObject();
              }
            }
          }, {
            key: "removeActiveObject",
            value: function removeActiveObject() {
              var activeObjectId = this._graphics.getActiveObjectIdForRemove();
              this.removeObject(activeObjectId);
            }
          }, {
            key: "_onMouseDown",
            value: function _onMouseDown(event, originPointer) {
              this.fire(eventNames.MOUSE_DOWN, event, originPointer);
            }
          }, {
            key: "_pushAddObjectCommand",
            value: function _pushAddObjectCommand(obj) {
              var command2 = factory_command.create(commandNames.ADD_OBJECT, this._graphics, obj);
              this._invoker.pushUndoStack(command2);
            }
          }, {
            key: "_pushModifyObjectCommand",
            value: function _pushModifyObjectCommand(obj) {
              var _this3 = this;
              var type = obj.type;
              var props = makeSelectionUndoData(obj, function(item) {
                return makeSelectionUndoDatum(_this3._graphics.getObjectId(item), item, type === "activeSelection");
              });
              var command2 = factory_command.create(commandNames.CHANGE_SELECTION, this._graphics, props);
              command2.execute(this._graphics, props);
              this._invoker.pushUndoStack(command2);
            }
          }, {
            key: "_onObjectActivated",
            value: function _onObjectActivated(props) {
              this.fire(eventNames.OBJECT_ACTIVATED, props);
            }
          }, {
            key: "_onObjectMoved",
            value: function _onObjectMoved(props) {
              this.fire(eventNames.OBJECT_MOVED, props);
            }
          }, {
            key: "_onObjectScaled",
            value: function _onObjectScaled(props) {
              this.fire(eventNames.OBJECT_SCALED, props);
            }
          }, {
            key: "_onObjectRotated",
            value: function _onObjectRotated(props) {
              this.fire(eventNames.OBJECT_ROTATED, props);
            }
          }, {
            key: "getDrawingMode",
            value: function getDrawingMode() {
              return this._graphics.getDrawingMode();
            }
          }, {
            key: "clearObjects",
            value: function clearObjects() {
              return this.execute(commandNames.CLEAR_OBJECTS);
            }
          }, {
            key: "deactivateAll",
            value: function deactivateAll() {
              this._graphics.deactivateAll();
              this._graphics.renderAll();
            }
          }, {
            key: "discardSelection",
            value: function discardSelection() {
              this._graphics.discardSelection();
            }
          }, {
            key: "changeSelectableAll",
            value: function changeSelectableAll(selectable) {
              this._graphics.changeSelectableAll(selectable);
            }
          }, {
            key: "_initHistory",
            value: function _initHistory() {
              if (this.ui) {
                this.ui.initHistory();
              }
            }
          }, {
            key: "_clearHistory",
            value: function _clearHistory() {
              if (this.ui) {
                this.ui.clearHistory();
              }
            }
          }, {
            key: "execute",
            value: function execute(commandName) {
              var _context19, _this$_invoker, _context20;
              for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                args[_key - 1] = arguments[_key];
              }
              var theArgs = concat_default()(_context19 = [this._graphics]).call(_context19, args);
              return (_this$_invoker = this._invoker).execute.apply(_this$_invoker, concat_default()(_context20 = [commandName]).call(_context20, _toConsumableArray(theArgs)));
            }
          }, {
            key: "executeSilent",
            value: function executeSilent(commandName) {
              var _context21, _this$_invoker2, _context22;
              for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                args[_key2 - 1] = arguments[_key2];
              }
              var theArgs = concat_default()(_context21 = [this._graphics]).call(_context21, args);
              return (_this$_invoker2 = this._invoker).executeSilent.apply(_this$_invoker2, concat_default()(_context22 = [commandName]).call(_context22, _toConsumableArray(theArgs)));
            }
          }, {
            key: "undo",
            value: function undo() {
              var _this4 = this;
              var iterationCount = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1;
              var promise = promise_default().resolve();
              for (var i = 0; i < iterationCount; i += 1) {
                promise = promise.then(function() {
                  return _this4._invoker.undo();
                });
              }
              return promise;
            }
          }, {
            key: "redo",
            value: function redo() {
              var _this5 = this;
              var iterationCount = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1;
              var promise = promise_default().resolve();
              for (var i = 0; i < iterationCount; i += 1) {
                promise = promise.then(function() {
                  return _this5._invoker.redo();
                });
              }
              return promise;
            }
          }, {
            key: "zoom",
            value: function zoom2(_ref2) {
              var x = _ref2.x, y = _ref2.y, zoomLevel = _ref2.zoomLevel;
              this._graphics.zoom({
                x,
                y
              }, zoomLevel);
            }
          }, {
            key: "resetZoom",
            value: function resetZoom() {
              this._graphics.resetZoom();
            }
          }, {
            key: "loadImageFromFile",
            value: function loadImageFromFile(imgFile, imageName) {
              if (!imgFile) {
                return promise_default().reject(rejectMessages.invalidParameters);
              }
              var imgUrl = url_default().createObjectURL(imgFile);
              imageName = imageName || imgFile.name;
              return this.loadImageFromURL(imgUrl, imageName).then(function(value) {
                url_default().revokeObjectURL(imgFile);
                return value;
              });
            }
          }, {
            key: "loadImageFromURL",
            value: function loadImageFromURL(url2, imageName) {
              if (!imageName || !url2) {
                return promise_default().reject(rejectMessages.invalidParameters);
              }
              return this.execute(commandNames.LOAD_IMAGE, imageName, url2);
            }
          }, {
            key: "addImageObject",
            value: function addImageObject(imgUrl) {
              if (!imgUrl) {
                return promise_default().reject(rejectMessages.invalidParameters);
              }
              return this.execute(commandNames.ADD_IMAGE_OBJECT, imgUrl);
            }
          }, {
            key: "startDrawingMode",
            value: function startDrawingMode(mode, option) {
              return this._graphics.startDrawingMode(mode, option);
            }
          }, {
            key: "stopDrawingMode",
            value: function stopDrawingMode() {
              this._graphics.stopDrawingMode();
            }
          }, {
            key: "crop",
            value: function crop2(rect) {
              var data = this._graphics.getCroppedImageData(rect);
              if (!data) {
                return promise_default().reject(rejectMessages.invalidParameters);
              }
              return this.loadImageFromURL(data.url, data.imageName);
            }
          }, {
            key: "getCropzoneRect",
            value: function getCropzoneRect() {
              return this._graphics.getCropzoneRect();
            }
          }, {
            key: "setCropzoneRect",
            value: function setCropzoneRect(mode) {
              this._graphics.setCropzoneRect(mode);
            }
          }, {
            key: "_flip",
            value: function _flip(type) {
              return this.execute(commandNames.FLIP_IMAGE, type);
            }
          }, {
            key: "flipX",
            value: function flipX() {
              return this._flip("flipX");
            }
          }, {
            key: "flipY",
            value: function flipY() {
              return this._flip("flipY");
            }
          }, {
            key: "resetFlip",
            value: function resetFlip() {
              return this._flip("reset");
            }
          }, {
            key: "_rotate",
            value: function _rotate(type, angle, isSilent) {
              var result = null;
              if (isSilent) {
                result = this.executeSilent(commandNames.ROTATE_IMAGE, type, angle);
              } else {
                result = this.execute(commandNames.ROTATE_IMAGE, type, angle);
              }
              return result;
            }
          }, {
            key: "rotate",
            value: function rotate2(angle, isSilent) {
              return this._rotate("rotate", angle, isSilent);
            }
          }, {
            key: "setAngle",
            value: function setAngle(angle, isSilent) {
              return this._rotate("setAngle", angle, isSilent);
            }
          }, {
            key: "setBrush",
            value: function setBrush(option) {
              this._graphics.setBrush(option);
            }
          }, {
            key: "setDrawingShape",
            value: function setDrawingShape(type, options) {
              this._graphics.setDrawingShape(type, options);
            }
          }, {
            key: "setDrawingIcon",
            value: function setDrawingIcon(type, iconColor) {
              this._graphics.setIconStyle(type, iconColor);
            }
          }, {
            key: "addShape",
            value: function addShape(type, options) {
              options = options || {};
              this._setPositions(options);
              return this.execute(commandNames.ADD_SHAPE, type, options);
            }
          }, {
            key: "changeShape",
            value: function changeShape(id, options, isSilent) {
              var executeMethodName = isSilent ? "executeSilent" : "execute";
              return this[executeMethodName](commandNames.CHANGE_SHAPE, id, options);
            }
          }, {
            key: "addText",
            value: function addText(text, options) {
              text = text || "";
              options = options || {};
              return this.execute(commandNames.ADD_TEXT, text, options);
            }
          }, {
            key: "changeText",
            value: function changeText(id, text) {
              text = text || "";
              return this.execute(commandNames.CHANGE_TEXT, id, text);
            }
          }, {
            key: "changeTextStyle",
            value: function changeTextStyle(id, styleObj, isSilent) {
              var executeMethodName = isSilent ? "executeSilent" : "execute";
              return this[executeMethodName](commandNames.CHANGE_TEXT_STYLE, id, styleObj);
            }
          }, {
            key: "_changeActivateMode",
            value: function _changeActivateMode(type) {
              if (type !== "ICON" && this.getDrawingMode() !== type) {
                this.startDrawingMode(type);
              }
            }
          }, {
            key: "_onTextChanged",
            value: function _onTextChanged(target) {
              this.fire(eventNames.TEXT_CHANGED, target);
            }
          }, {
            key: "_onIconCreateResize",
            value: function _onIconCreateResize(originPointer) {
              this.fire(eventNames.ICON_CREATE_RESIZE, originPointer);
            }
          }, {
            key: "_onIconCreateEnd",
            value: function _onIconCreateEnd(originPointer) {
              this.fire(eventNames.ICON_CREATE_END, originPointer);
            }
          }, {
            key: "_onTextEditing",
            value: function _onTextEditing() {
              this.fire(eventNames.TEXT_EDITING);
            }
          }, {
            key: "_onAddText",
            value: function _onAddText(event) {
              this.fire(eventNames.ADD_TEXT, {
                originPosition: event.originPosition,
                clientPosition: event.clientPosition
              });
            }
          }, {
            key: "_onAddObject",
            value: function _onAddObject(objectProps) {
              var obj = this._graphics.getObject(objectProps.id);
              this._invoker.fire(eventNames.EXECUTE_COMMAND, getObjectType(obj.type));
              this._pushAddObjectCommand(obj);
            }
          }, {
            key: "_onObjectAdded",
            value: function _onObjectAdded(objectProps) {
              this.fire(OBJECT_ADDED, objectProps);
              this.fire(ADD_OBJECT_AFTER, objectProps);
            }
          }, {
            key: "_onObjectModified",
            value: function _onObjectModified(obj) {
              if (obj.type !== OBJ_TYPE.CROPZONE) {
                this._invoker.fire(eventNames.EXECUTE_COMMAND, getObjectType(obj.type));
                this._pushModifyObjectCommand(obj);
              }
            }
          }, {
            key: "_selectionCleared",
            value: function _selectionCleared() {
              this.fire(SELECTION_CLEARED);
            }
          }, {
            key: "_selectionCreated",
            value: function _selectionCreated(eventTarget) {
              this.fire(SELECTION_CREATED, eventTarget);
            }
          }, {
            key: "registerIcons",
            value: function registerIcons(infos) {
              this._graphics.registerPaths(infos);
            }
          }, {
            key: "changeCursor",
            value: function changeCursor(cursorType) {
              this._graphics.changeCursor(cursorType);
            }
          }, {
            key: "addIcon",
            value: function addIcon(type, options) {
              options = options || {};
              this._setPositions(options);
              return this.execute(commandNames.ADD_ICON, type, options);
            }
          }, {
            key: "changeIconColor",
            value: function changeIconColor(id, color) {
              return this.execute(commandNames.CHANGE_ICON_COLOR, id, color);
            }
          }, {
            key: "removeObject",
            value: function removeObject(id) {
              var _this$_graphics$getOb = this._graphics.getObject(id), type = _this$_graphics$getOb.type;
              return this.execute(commandNames.REMOVE_OBJECT, id, getObjectType(type));
            }
          }, {
            key: "hasFilter",
            value: function hasFilter(type) {
              return this._graphics.hasFilter(type);
            }
          }, {
            key: "removeFilter",
            value: function removeFilter(type) {
              return this.execute(commandNames.REMOVE_FILTER, type);
            }
          }, {
            key: "applyFilter",
            value: function applyFilter(type, options, isSilent) {
              var executeMethodName = isSilent ? "executeSilent" : "execute";
              return this[executeMethodName](commandNames.APPLY_FILTER, type, options);
            }
          }, {
            key: "toDataURL",
            value: function toDataURL(options) {
              return this._graphics.toDataURL(options);
            }
          }, {
            key: "getImageName",
            value: function getImageName() {
              return this._graphics.getImageName();
            }
          }, {
            key: "clearUndoStack",
            value: function clearUndoStack() {
              this._invoker.clearUndoStack();
            }
          }, {
            key: "clearRedoStack",
            value: function clearRedoStack() {
              this._invoker.clearRedoStack();
            }
          }, {
            key: "isEmptyUndoStack",
            value: function isEmptyUndoStack() {
              return this._invoker.isEmptyUndoStack();
            }
          }, {
            key: "isEmptyRedoStack",
            value: function isEmptyRedoStack() {
              return this._invoker.isEmptyRedoStack();
            }
          }, {
            key: "resizeCanvasDimension",
            value: function resizeCanvasDimension(dimension) {
              if (!dimension) {
                return promise_default().reject(rejectMessages.invalidParameters);
              }
              return this.execute(commandNames.RESIZE_CANVAS_DIMENSION, dimension);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              var _this6 = this;
              this.stopDrawingMode();
              this._detachDomEvents();
              this._graphics.destroy();
              this._graphics = null;
              if (this.ui) {
                this._detachColorPickerInputBoxEvents();
                this.ui.destroy();
              }
              imageEditor_forEach(this, function(value, key) {
                _this6[key] = null;
              }, this);
            }
          }, {
            key: "_setPositions",
            value: function _setPositions(options) {
              var centerPosition = this._graphics.getCenter();
              if (isUndefined(options.left)) {
                options.left = centerPosition.left;
              }
              if (isUndefined(options.top)) {
                options.top = centerPosition.top;
              }
            }
          }, {
            key: "setObjectProperties",
            value: function setObjectProperties(id, keyValue) {
              return this.execute(commandNames.SET_OBJECT_PROPERTIES, id, keyValue);
            }
          }, {
            key: "setObjectPropertiesQuietly",
            value: function setObjectPropertiesQuietly(id, keyValue) {
              this._graphics.setObjectProperties(id, keyValue);
            }
          }, {
            key: "getObjectProperties",
            value: function getObjectProperties(id, keys2) {
              var object = this._graphics.getObject(id);
              if (!object) {
                return null;
              }
              return this._graphics.getObjectProperties(id, keys2);
            }
          }, {
            key: "getCanvasSize",
            value: function getCanvasSize() {
              return this._graphics.getCanvasSize();
            }
          }, {
            key: "getObjectPosition",
            value: function getObjectPosition(id, originX, originY) {
              return this._graphics.getObjectPosition(id, originX, originY);
            }
          }, {
            key: "setObjectPosition",
            value: function setObjectPosition(id, posInfo) {
              return this.execute(commandNames.SET_OBJECT_POSITION, id, posInfo);
            }
          }, {
            key: "resize",
            value: function resize2(dimensions) {
              return this.execute(commandNames.RESIZE_IMAGE, dimensions);
            }
          }]);
          return ImageEditor3;
        }();
        action.mixin(ImageEditor2);
        imageEditor_CustomEvents.mixin(ImageEditor2);
        var imageEditor = ImageEditor2;
        var ICON = componentNames.ICON;
        var addIcon_command = {
          name: commandNames.ADD_ICON,
          execute: function execute(graphics2, type, options) {
            var _this = this;
            var iconComp = graphics2.getComponent(ICON);
            return iconComp.add(type, options).then(function(objectProps) {
              _this.undoData.object = graphics2.getObject(objectProps.id);
              return objectProps;
            });
          },
          undo: function undo(graphics2) {
            graphics2.remove(this.undoData.object);
            return promise_default().resolve();
          }
        };
        factory_command.register(addIcon_command);
        var addImageObject_command = {
          name: commandNames.ADD_IMAGE_OBJECT,
          execute: function execute(graphics2, imgUrl) {
            var _this = this;
            return graphics2.addImageObject(imgUrl).then(function(objectProps) {
              _this.undoData.object = graphics2.getObject(objectProps.id);
              return objectProps;
            });
          },
          undo: function undo(graphics2) {
            graphics2.remove(this.undoData.object);
            return promise_default().resolve();
          }
        };
        factory_command.register(addImageObject_command);
        var addObject_command = {
          name: commandNames.ADD_OBJECT,
          execute: function execute(graphics2, object) {
            return new (promise_default())(function(resolve, reject) {
              if (!graphics2.contains(object)) {
                graphics2.add(object);
                resolve(object);
              } else {
                reject(rejectMessages.addedObject);
              }
            });
          },
          undo: function undo(graphics2, object) {
            return new (promise_default())(function(resolve, reject) {
              if (graphics2.contains(object)) {
                graphics2.remove(object);
                resolve(object);
              } else {
                reject(rejectMessages.noObject);
              }
            });
          }
        };
        factory_command.register(addObject_command);
        var SHAPE = componentNames.SHAPE;
        var addShape_command = {
          name: commandNames.ADD_SHAPE,
          execute: function execute(graphics2, type, options) {
            var _this = this;
            var shapeComp = graphics2.getComponent(SHAPE);
            return shapeComp.add(type, options).then(function(objectProps) {
              var id = objectProps.id;
              _this.undoData.object = graphics2.getObject(id);
              return objectProps;
            });
          },
          undo: function undo(graphics2) {
            graphics2.remove(this.undoData.object);
            return promise_default().resolve();
          }
        };
        factory_command.register(addShape_command);
        var TEXT = componentNames.TEXT;
        var addText_command = {
          name: commandNames.ADD_TEXT,
          execute: function execute(graphics2, text, options) {
            var _this = this;
            var textComp = graphics2.getComponent(TEXT);
            if (this.undoData.object) {
              var undoObject = this.undoData.object;
              return new (promise_default())(function(resolve, reject) {
                if (!graphics2.contains(undoObject)) {
                  graphics2.add(undoObject);
                  resolve(undoObject);
                } else {
                  reject(rejectMessages.redo);
                }
              });
            }
            return textComp.add(text, options).then(function(objectProps) {
              var id = objectProps.id;
              var textObject = graphics2.getObject(id);
              _this.undoData.object = textObject;
              setCachedUndoDataForDimension(makeSelectionUndoData(textObject, function() {
                return makeSelectionUndoDatum(id, textObject, false);
              }));
              return objectProps;
            });
          },
          undo: function undo(graphics2) {
            graphics2.remove(this.undoData.object);
            return promise_default().resolve();
          }
        };
        factory_command.register(addText_command);
        var FILTER = componentNames.FILTER;
        var cachedUndoDataForSilent = null;
        function makeUndoData(type, prevfilterOption, options) {
          var undoData = {};
          if (type === "mask") {
            undoData.object = options.mask;
          }
          undoData.options = prevfilterOption;
          return undoData;
        }
        var applyFilter_command = {
          name: commandNames.APPLY_FILTER,
          execute: function execute(graphics2, type, options, isSilent) {
            var filterComp = graphics2.getComponent(FILTER);
            if (type === "mask") {
              var maskObj = graphics2.getObject(options.maskObjId);
              if (!(maskObj && maskObj.isType("image"))) {
                return promise_default().reject(rejectMessages.invalidParameters);
              }
              external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().extend(options, {
                mask: maskObj
              });
              graphics2.remove(options.mask);
            }
            if (!this.isRedo) {
              var prevfilterOption = filterComp.getOptions(type);
              var undoData = makeUndoData(type, prevfilterOption, options);
              cachedUndoDataForSilent = this.setUndoData(undoData, cachedUndoDataForSilent, isSilent);
            }
            return filterComp.add(type, options);
          },
          undo: function undo(graphics2, type) {
            var filterComp = graphics2.getComponent(FILTER);
            if (type === "mask") {
              var mask2 = this.undoData.object;
              graphics2.add(mask2);
              graphics2.setActiveObject(mask2);
              return filterComp.remove(type);
            }
            if (this.undoData.options) {
              return filterComp.add(type, this.undoData.options);
            }
            return filterComp.remove(type);
          }
        };
        factory_command.register(applyFilter_command);
        var changeIconColor_ICON = componentNames.ICON;
        var changeIconColor_command = {
          name: commandNames.CHANGE_ICON_COLOR,
          execute: function execute(graphics2, id, color) {
            var _this = this;
            return new (promise_default())(function(resolve, reject) {
              var iconComp = graphics2.getComponent(changeIconColor_ICON);
              var targetObj = graphics2.getObject(id);
              if (!targetObj) {
                reject(rejectMessages.noObject);
              }
              _this.undoData.object = targetObj;
              _this.undoData.color = iconComp.getColor(targetObj);
              iconComp.setColor(color, targetObj);
              resolve();
            });
          },
          undo: function undo(graphics2) {
            var iconComp = graphics2.getComponent(changeIconColor_ICON);
            var _this$undoData = this.undoData, icon2 = _this$undoData.object, color = _this$undoData.color;
            iconComp.setColor(color, icon2);
            return promise_default().resolve();
          }
        };
        factory_command.register(changeIconColor_command);
        var changeShape_SHAPE = componentNames.SHAPE;
        var changeShape_cachedUndoDataForSilent = null;
        function changeShape_makeUndoData(options, targetObj) {
          var undoData = {
            object: targetObj,
            options: {}
          };
          external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().forEachOwnProperties(options, function(value, key) {
            undoData.options[key] = targetObj[key];
          });
          return undoData;
        }
        var changeShape_command = {
          name: commandNames.CHANGE_SHAPE,
          execute: function execute(graphics2, id, options, isSilent) {
            var shapeComp = graphics2.getComponent(changeShape_SHAPE);
            var targetObj = graphics2.getObject(id);
            if (!targetObj) {
              return promise_default().reject(rejectMessages.noObject);
            }
            if (!this.isRedo) {
              var undoData = changeShape_makeUndoData(options, targetObj);
              changeShape_cachedUndoDataForSilent = this.setUndoData(undoData, changeShape_cachedUndoDataForSilent, isSilent);
            }
            return shapeComp.change(targetObj, options);
          },
          undo: function undo(graphics2) {
            var shapeComp = graphics2.getComponent(changeShape_SHAPE);
            var _this$undoData = this.undoData, shape2 = _this$undoData.object, options = _this$undoData.options;
            return shapeComp.change(shape2, options);
          }
        };
        factory_command.register(changeShape_command);
        var changeText_TEXT = componentNames.TEXT;
        var changeText_command = {
          name: commandNames.CHANGE_TEXT,
          execute: function execute(graphics2, id, text) {
            var textComp = graphics2.getComponent(changeText_TEXT);
            var targetObj = graphics2.getObject(id);
            if (!targetObj) {
              return promise_default().reject(rejectMessages.noObject);
            }
            this.undoData.object = targetObj;
            this.undoData.text = textComp.getText(targetObj);
            return textComp.change(targetObj, text);
          },
          undo: function undo(graphics2) {
            var textComp = graphics2.getComponent(changeText_TEXT);
            var _this$undoData = this.undoData, textObj = _this$undoData.object, text = _this$undoData.text;
            return textComp.change(textObj, text);
          }
        };
        factory_command.register(changeText_command);
        var changeTextStyle_TEXT = componentNames.TEXT;
        var changeTextStyle_cachedUndoDataForSilent = null;
        function changeTextStyle_makeUndoData(styles, targetObj) {
          var undoData = {
            object: targetObj,
            styles: {}
          };
          external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().forEachOwnProperties(styles, function(value, key) {
            var undoValue = targetObj[key];
            undoData.styles[key] = undoValue;
          });
          return undoData;
        }
        var changeTextStyle_command = {
          name: commandNames.CHANGE_TEXT_STYLE,
          execute: function execute(graphics2, id, styles, isSilent) {
            var textComp = graphics2.getComponent(changeTextStyle_TEXT);
            var targetObj = graphics2.getObject(id);
            if (!targetObj) {
              return promise_default().reject(rejectMessages.noObject);
            }
            if (!this.isRedo) {
              var undoData = changeTextStyle_makeUndoData(styles, targetObj);
              changeTextStyle_cachedUndoDataForSilent = this.setUndoData(undoData, changeTextStyle_cachedUndoDataForSilent, isSilent);
            }
            return textComp.setStyle(targetObj, styles);
          },
          undo: function undo(graphics2) {
            var textComp = graphics2.getComponent(changeTextStyle_TEXT);
            var _this$undoData = this.undoData, textObj = _this$undoData.object, styles = _this$undoData.styles;
            return textComp.setStyle(textObj, styles);
          }
        };
        factory_command.register(changeTextStyle_command);
        var clearObjects_command = {
          name: commandNames.CLEAR_OBJECTS,
          execute: function execute(graphics2) {
            var _this = this;
            return new (promise_default())(function(resolve) {
              _this.undoData.objects = graphics2.removeAll();
              resolve();
            });
          },
          undo: function undo(graphics2) {
            graphics2.add(this.undoData.objects);
            return promise_default().resolve();
          }
        };
        factory_command.register(clearObjects_command);
        var FLIP = componentNames.FLIP;
        var flip_command = {
          name: commandNames.FLIP_IMAGE,
          execute: function execute(graphics2, type) {
            var flipComp = graphics2.getComponent(FLIP);
            this.undoData.setting = flipComp.getCurrentSetting();
            return flipComp[type]();
          },
          undo: function undo(graphics2) {
            var flipComp = graphics2.getComponent(FLIP);
            return flipComp.set(this.undoData.setting);
          }
        };
        factory_command.register(flip_command);
        var IMAGE_LOADER = componentNames.IMAGE_LOADER;
        var loadImage_command = {
          name: commandNames.LOAD_IMAGE,
          execute: function execute(graphics2, imageName, imgUrl) {
            var _context2;
            var loader = graphics2.getComponent(IMAGE_LOADER);
            var prevImage = loader.getCanvasImage();
            var prevImageWidth = prevImage ? prevImage.width : 0;
            var prevImageHeight = prevImage ? prevImage.height : 0;
            var objects = filter_default()(_context2 = graphics2.removeAll(true)).call(_context2, function(objectItem) {
              return objectItem.type !== "cropzone";
            });
            for_each_default()(objects).call(objects, function(objectItem) {
              objectItem.evented = true;
            });
            this.undoData = {
              name: loader.getImageName(),
              image: prevImage,
              objects
            };
            return loader.load(imageName, imgUrl).then(function(newImage) {
              return {
                oldWidth: prevImageWidth,
                oldHeight: prevImageHeight,
                newWidth: newImage.width,
                newHeight: newImage.height
              };
            });
          },
          undo: function undo(graphics2) {
            var loader = graphics2.getComponent(IMAGE_LOADER);
            var _this$undoData = this.undoData, objects = _this$undoData.objects, name = _this$undoData.name, image = _this$undoData.image;
            graphics2.removeAll(true);
            graphics2.add(objects);
            return loader.load(name, image);
          }
        };
        factory_command.register(loadImage_command);
        var removeFilter_FILTER = componentNames.FILTER;
        var removeFilter_command = {
          name: commandNames.REMOVE_FILTER,
          execute: function execute(graphics2, type) {
            var filterComp = graphics2.getComponent(removeFilter_FILTER);
            this.undoData.options = filterComp.getOptions(type);
            return filterComp.remove(type);
          },
          undo: function undo(graphics2, type) {
            var filterComp = graphics2.getComponent(removeFilter_FILTER);
            var options = this.undoData.options;
            return filterComp.add(type, options);
          }
        };
        factory_command.register(removeFilter_command);
        var removeObject_command = {
          name: commandNames.REMOVE_OBJECT,
          execute: function execute(graphics2, id) {
            var _this = this;
            return new (promise_default())(function(resolve, reject) {
              _this.undoData.objects = graphics2.removeObjectById(id);
              if (_this.undoData.objects.length) {
                resolve();
              } else {
                reject(rejectMessages.noObject);
              }
            });
          },
          undo: function undo(graphics2) {
            graphics2.add(this.undoData.objects);
            return promise_default().resolve();
          }
        };
        factory_command.register(removeObject_command);
        var resizeCanvasDimension_command = {
          name: commandNames.RESIZE_CANVAS_DIMENSION,
          execute: function execute(graphics2, dimension) {
            var _this = this;
            return new (promise_default())(function(resolve) {
              _this.undoData.size = {
                width: graphics2.cssMaxWidth,
                height: graphics2.cssMaxHeight
              };
              graphics2.setCssMaxDimension(dimension);
              graphics2.adjustCanvasDimension();
              resolve();
            });
          },
          undo: function undo(graphics2) {
            graphics2.setCssMaxDimension(this.undoData.size);
            graphics2.adjustCanvasDimension();
            return promise_default().resolve();
          }
        };
        factory_command.register(resizeCanvasDimension_command);
        var ROTATION = componentNames.ROTATION;
        var rotate_cachedUndoDataForSilent = null;
        function rotate_makeUndoData(rotationComp) {
          return {
            angle: rotationComp.getCurrentAngle()
          };
        }
        var rotate_command = {
          name: commandNames.ROTATE_IMAGE,
          execute: function execute(graphics2, type, angle, isSilent) {
            var rotationComp = graphics2.getComponent(ROTATION);
            if (!this.isRedo) {
              var undoData = rotate_makeUndoData(rotationComp);
              rotate_cachedUndoDataForSilent = this.setUndoData(undoData, rotate_cachedUndoDataForSilent, isSilent);
            }
            return rotationComp[type](angle);
          },
          undo: function undo(graphics2) {
            var rotationComp = graphics2.getComponent(ROTATION);
            var _this$args = _slicedToArray(this.args, 3), type = _this$args[1], angle = _this$args[2];
            if (type === "setAngle") {
              return rotationComp[type](this.undoData.angle);
            }
            return rotationComp.rotate(-angle);
          }
        };
        factory_command.register(rotate_command);
        var setObjectProperties_command = {
          name: commandNames.SET_OBJECT_PROPERTIES,
          execute: function execute(graphics2, id, props) {
            var _this = this;
            var targetObj = graphics2.getObject(id);
            if (!targetObj) {
              return promise_default().reject(rejectMessages.noObject);
            }
            this.undoData.props = {};
            external_commonjs_tui_code_snippet_commonjs2_tui_code_snippet_amd_tui_code_snippet_root_tui_util_default().forEachOwnProperties(props, function(value, key) {
              _this.undoData.props[key] = targetObj[key];
            });
            graphics2.setObjectProperties(id, props);
            return promise_default().resolve();
          },
          undo: function undo(graphics2, id) {
            var props = this.undoData.props;
            graphics2.setObjectProperties(id, props);
            return promise_default().resolve();
          }
        };
        factory_command.register(setObjectProperties_command);
        var setObjectPosition_command = {
          name: commandNames.SET_OBJECT_POSITION,
          execute: function execute(graphics2, id, posInfo) {
            var targetObj = graphics2.getObject(id);
            if (!targetObj) {
              return promise_default().reject(rejectMessages.noObject);
            }
            this.undoData.objectId = id;
            this.undoData.props = graphics2.getObjectProperties(id, ["left", "top"]);
            graphics2.setObjectPosition(id, posInfo);
            graphics2.renderAll();
            return promise_default().resolve();
          },
          undo: function undo(graphics2) {
            var _this$undoData = this.undoData, objectId = _this$undoData.objectId, props = _this$undoData.props;
            graphics2.setObjectProperties(objectId, props);
            graphics2.renderAll();
            return promise_default().resolve();
          }
        };
        factory_command.register(setObjectPosition_command);
        var changeSelection_command = {
          name: commandNames.CHANGE_SELECTION,
          execute: function execute(graphics2, props) {
            if (this.isRedo) {
              for_each_default()(props).call(props, function(prop) {
                graphics2.setObjectProperties(prop.id, prop);
              });
            } else {
              this.undoData = getCachedUndoDataForDimension();
            }
            return promise_default().resolve();
          },
          undo: function undo(graphics2) {
            var _context2;
            for_each_default()(_context2 = this.undoData).call(_context2, function(datum) {
              graphics2.setObjectProperties(datum.id, datum);
            });
            return promise_default().resolve();
          }
        };
        factory_command.register(changeSelection_command);
        var RESIZE = componentNames.RESIZE;
        var resize_command = {
          name: commandNames.RESIZE_IMAGE,
          execute: function execute(graphics2, dimensions) {
            var resizeComp = graphics2.getComponent(RESIZE);
            var originalDimensions = resizeComp.getOriginalDimensions();
            if (!originalDimensions) {
              originalDimensions = resizeComp.getCurrentDimensions();
            }
            this.undoData.dimensions = originalDimensions;
            return resizeComp.resize(dimensions);
          },
          undo: function undo(graphics2) {
            var resizeComp = graphics2.getComponent(RESIZE);
            return resizeComp.resize(this.undoData.dimensions);
          }
        };
        factory_command.register(resize_command);
        var src = imageEditor;
      }();
      __webpack_exports__ = __webpack_exports__["default"];
      return __webpack_exports__;
    }();
  });
})(tuiImageEditor);
var ToastImageEditor = /* @__PURE__ */ getDefaultExportFromCjs(tuiImageEditor.exports);
const rImageType = /data:(image\/.+);base64,/;
function isURL(d) {
  return typeof d === "string" && /^https?:\/\//.test(d);
}
function base64ToBlob(data) {
  let mimeString = "";
  let raw, uInt8Array, i, rawLength;
  raw = data.replace(rImageType, function(header, imageType) {
    mimeString = imageType;
    return "";
  });
  raw = atob(raw);
  rawLength = raw.length;
  uInt8Array = new Uint8Array(rawLength);
  for (i = 0; i < rawLength; i += 1) {
    uInt8Array[i] = raw.charCodeAt(i);
  }
  return new Blob([uInt8Array], { type: mimeString });
}
function dataURLtoFile(dataurl, filename) {
  const arr = dataurl.split(",");
  const mime = arr[0].match(/:(.*?);/)[1];
  const bstr = atob(arr[1]);
  let n = bstr.length;
  const u8arr = new Uint8Array(n);
  while (n--) {
    u8arr[n] = bstr.charCodeAt(n);
  }
  return new File([u8arr], filename, { type: mime });
}
const actions = [{
  icon: IconPark$1,
  start: (editor2) => {
    editor2.startDrawingMode("CROPPER");
  },
  apply: async (editor2, containerContext) => {
    const { newHeight, newWidth } = await editor2.crop(editor2.getCropzoneRect());
    editor2.stopDrawingMode();
    containerContext.width.value = newWidth;
    containerContext.height.value = newHeight;
  },
  needResize: true
}, {
  icon: IconPark,
  start: (editor2) => {
    editor2.stopDrawingMode();
  },
  apply: async (editor2, containerContext) => {
  },
  renderPanel(editor2, { iconSize }) {
    return /* @__PURE__ */ createElement("div", null, /* @__PURE__ */ createElement(IconPark$6, {
      size: iconSize,
      onClick: () => editor2.rotate(90)
    }), /* @__PURE__ */ createElement(IconPark$5, {
      size: iconSize,
      onClick: () => editor2.rotate(-90)
    }));
  },
  needResize: true
}];
function ImageEditor({ iconSize, ref: parentRef, data }) {
  let editorRef;
  let file;
  const containerRef = useRef();
  const containerWidth = atom(0);
  const containerHeight = atom(0);
  const containerContext = {
    width: containerWidth,
    height: containerHeight
  };
  const instruments = {
    getFileName() {
      return file ? file.name : typeof data === "string" ? data : data.name;
    },
    toFileBlob(options) {
      return base64ToBlob(this.toDataURL(options));
    },
    toFile(options) {
      return dataURLtoFile(this.toDataURL(options));
    }
  };
  if (parentRef) {
    useImperativeHandle(parentRef, new Proxy({}, {
      get(target, method) {
        if (instruments[method])
          return instruments[method];
        return editorRef[method];
      }
    }));
  }
  useViewEffect(async () => {
    editorRef = new ToastImageEditor(containerRef.current, {});
    if (data) {
      let loadPromise;
      if (isURL(data)) {
        loadPromise = editorRef.loadImageFromURL(data);
      } else if (data instanceof File) {
        loadPromise = editorRef.loadImageFromFile(data);
      } else if (data.data) {
        const file2 = dataURLtoFile(data.data, data.name);
        loadPromise = editorRef.loadImageFromFile(file2);
      }
      if (loadPromise) {
        const { newWidth, newHeight } = await loadPromise;
        containerWidth.value = newWidth;
        containerHeight.value = newHeight;
        editorRef.clearUndoStack();
      }
    }
  });
  const onFileChange = async (event) => {
    file = event.target.files[0];
    const { newWidth, newHeight } = await editorRef.loadImageFromFile(file);
    containerWidth.value = newWidth;
    containerHeight.value = newHeight;
    editorRef.clearUndoStack();
  };
  const applyMenuHide = atom(true);
  const currentAction = atom(null);
  const startAction = (action) => {
    if (action.apply) {
      applyMenuHide.value = false;
      currentAction.value = action;
    }
    action.start(editorRef, containerContext);
  };
  const applyAction = async () => {
    currentAction.value.apply(editorRef, containerContext);
    applyMenuHide.value = true;
    currentAction.value = null;
  };
  const cancelAction = async () => {
    currentAction.value.cancel(editorRef, containerContext);
    applyMenuHide.value = true;
    currentAction.value = null;
  };
  return /* @__PURE__ */ createElement("container", {
    inline: true
  }, /* @__PURE__ */ createElement("filePicker", {
    block: true,
    "flex-display": true,
    "block-display-none": atomComputed(() => containerWidth.value !== 0),
    "inline-height-100px": true,
    "inline-width-100px": true,
    "flex-justify-content-center": true,
    "flex-align-items-center": true
  }, /* @__PURE__ */ createElement("addPic", {
    use: IconPark$4,
    size: 5,
    fill: "#bebebe"
  }), /* @__PURE__ */ createElement("input", {
    type: "file",
    onChange: onFileChange
  })), /* @__PURE__ */ createElement("div", {
    ref: containerRef,
    block: true,
    "block-width": containerWidth,
    "block-height": containerHeight
  }), /* @__PURE__ */ createElement("div", {
    block: true
  }, () => {
    var _a, _b;
    return ((_a = currentAction.value) == null ? void 0 : _a.renderPanel) ? (_b = currentAction.value) == null ? void 0 : _b.renderPanel(editorRef, { iconSize }) : null;
  }), /* @__PURE__ */ createElement("div", {
    block: true,
    "block-display-none": applyMenuHide
  }, /* @__PURE__ */ createElement(IconPark$3, {
    size: iconSize,
    onClick: cancelAction
  }), /* @__PURE__ */ createElement(IconPark$2, {
    size: iconSize,
    onClick: applyAction
  })), /* @__PURE__ */ createElement("div", {
    block: true,
    "flex-display": true,
    "flex-justify-content-center": true,
    "block-display-none": atomComputed(() => containerWidth.value === 0 || currentAction.value !== null)
  }, actions.map((action) => {
    return /* @__PURE__ */ createElement("actionIcon", {
      use: action.icon,
      size: iconSize,
      onClick: () => startAction(action)
    });
  })));
}
ImageEditor.Style = (fragments) => {
  fragments.root.elements.filePicker.style({
    background: "#efefef",
    border: "4px #cecece dashed",
    position: "relative"
  });
  fragments.root.elements.input.style({
    position: "absolute",
    left: 0,
    top: 0,
    width: "100%",
    height: "100%",
    opacity: 0
  });
};
ImageEditor.propTypes = {
  iconSize: propTypes.number.default(() => atom(2))
};
ImageEditor.forwardRef = true;
var ImageEditor$1 = createComponent(ImageEditor);
function uuid() {
  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) => (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16));
}
class imageEditorPlugin {
  static get isReadOnlySupported() {
    return true;
  }
  static get toolbox() {
    return {
      title: "Image",
      icon: '<svg width="17" height="15" viewBox="0 0 336 276" xmlns="http://www.w3.org/2000/svg"><path d="M291 150V79c0-19-15-34-34-34H79c-19 0-34 15-34 34v42l67-44 81 72 56-29 42 30zm0 52l-43-30-56 30-81-67-66 39v23c0 19 15 34 34 34h178c17 0 31-13 34-29zM79 0h178c44 0 79 35 79 79v118c0 44-35 79-79 79H79c-44 0-79-35-79-79V79C0 35 35 0 79 0z"/></svg>'
    };
  }
  constructor({ data, api, config, readOnly }) {
    this.id = uuid();
    this.data = data;
    this.config = config;
    this.readOnly = readOnly;
  }
  render() {
    var _a;
    if (this.readOnly) {
      const image = document.createElement("img");
      if (this.config.inline) {
        image.setAttribute("src", this.data.data);
      } else {
        const resource = this.config.resources.find(({ token }) => token === this.data.resourceId);
        image.setAttribute("src", resource.url);
      }
      return image;
    }
    const fileObject = this.config.inline ? this.data : (_a = this.config.resources) == null ? void 0 : _a.find(({ token }) => token === this.data.resourceId).url;
    const container = document.createElement("div");
    render(/* @__PURE__ */ createElement(ImageEditor$1, {
      ref: (e) => this.editor = e,
      data: fileObject
    }), container);
    return container;
  }
  save(blockContent) {
    const fileName = this.editor.getFileName();
    const newFileName = fileName.replace(/\.\w+$/i, ".png");
    if (this.config.inline) {
      return {
        name: newFileName,
        data: this.editor.toDataURL({ format: "png" })
      };
    }
    this.config.collectResource(this.id, {
      name: newFileName,
      type: "image/png",
      data: this.editor.toFileBlob({ format: "png" })
    });
    return {
      resourceId: this.id
    };
  }
  validate(savedData) {
    return true;
  }
}
var bundle = { exports: {} };
(function(module, exports) {
  !function(e, l) {
    module.exports = l();
  }(window, function() {
    return function(e) {
      var l = {};
      function a(_) {
        if (l[_])
          return l[_].exports;
        var t = l[_] = { i: _, l: false, exports: {} };
        return e[_].call(t.exports, t, t.exports, a), t.l = true, t.exports;
      }
      return a.m = e, a.c = l, a.d = function(e2, l2, _) {
        a.o(e2, l2) || Object.defineProperty(e2, l2, { enumerable: true, get: _ });
      }, a.r = function(e2) {
        typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(e2, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e2, "__esModule", { value: true });
      }, a.t = function(e2, l2) {
        if (1 & l2 && (e2 = a(e2)), 8 & l2)
          return e2;
        if (4 & l2 && typeof e2 == "object" && e2 && e2.__esModule)
          return e2;
        var _ = Object.create(null);
        if (a.r(_), Object.defineProperty(_, "default", { enumerable: true, value: e2 }), 2 & l2 && typeof e2 != "string")
          for (var t in e2)
            a.d(_, t, function(l3) {
              return e2[l3];
            }.bind(null, t));
        return _;
      }, a.n = function(e2) {
        var l2 = e2 && e2.__esModule ? function() {
          return e2.default;
        } : function() {
          return e2;
        };
        return a.d(l2, "a", l2), l2;
      }, a.o = function(e2, l2) {
        return Object.prototype.hasOwnProperty.call(e2, l2);
      }, a.p = "", a(a.s = 2);
    }([function(e, l) {
      e.exports = function(e2) {
        var l2 = [];
        return l2.toString = function() {
          return this.map(function(l3) {
            var a = function(e3, l4) {
              var a2 = e3[1] || "", _ = e3[3];
              if (!_)
                return a2;
              if (l4 && typeof btoa == "function") {
                var t = (o = _, "/*# sourceMappingURL=data:application/json;charset=utf-8;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(o)))) + " */"), r = _.sources.map(function(e4) {
                  return "/*# sourceURL=" + _.sourceRoot + e4 + " */";
                });
                return [a2].concat(r).concat([t]).join("\n");
              }
              var o;
              return [a2].join("\n");
            }(l3, e2);
            return l3[2] ? "@media " + l3[2] + "{" + a + "}" : a;
          }).join("");
        }, l2.i = function(e3, a) {
          typeof e3 == "string" && (e3 = [[null, e3, ""]]);
          for (var _ = {}, t = 0; t < this.length; t++) {
            var r = this[t][0];
            typeof r == "number" && (_[r] = true);
          }
          for (t = 0; t < e3.length; t++) {
            var o = e3[t];
            typeof o[0] == "number" && _[o[0]] || (a && !o[2] ? o[2] = a : a && (o[2] = "(" + o[2] + ") and (" + a + ")"), l2.push(o));
          }
        }, l2;
      };
    }, function(e, l, a) {
      var _, t, r = {}, o = (_ = function() {
        return window && document && document.all && !window.atob;
      }, function() {
        return t === void 0 && (t = _.apply(this, arguments)), t;
      }), s = function(e2, l2) {
        return l2 ? l2.querySelector(e2) : document.querySelector(e2);
      }, c = function(e2) {
        var l2 = {};
        return function(e3, a2) {
          if (typeof e3 == "function")
            return e3();
          if (l2[e3] === void 0) {
            var _2 = s.call(this, e3, a2);
            if (window.HTMLIFrameElement && _2 instanceof window.HTMLIFrameElement)
              try {
                _2 = _2.contentDocument.head;
              } catch (e4) {
                _2 = null;
              }
            l2[e3] = _2;
          }
          return l2[e3];
        };
      }(), d = null, h = 0, n = [], i = a(5);
      function v(e2, l2) {
        for (var a2 = 0; a2 < e2.length; a2++) {
          var _2 = e2[a2], t2 = r[_2.id];
          if (t2) {
            t2.refs++;
            for (var o2 = 0; o2 < t2.parts.length; o2++)
              t2.parts[o2](_2.parts[o2]);
            for (; o2 < _2.parts.length; o2++)
              t2.parts.push(b(_2.parts[o2], l2));
          } else {
            var s2 = [];
            for (o2 = 0; o2 < _2.parts.length; o2++)
              s2.push(b(_2.parts[o2], l2));
            r[_2.id] = { id: _2.id, refs: 1, parts: s2 };
          }
        }
      }
      function w(e2, l2) {
        for (var a2 = [], _2 = {}, t2 = 0; t2 < e2.length; t2++) {
          var r2 = e2[t2], o2 = l2.base ? r2[0] + l2.base : r2[0], s2 = { css: r2[1], media: r2[2], sourceMap: r2[3] };
          _2[o2] ? _2[o2].parts.push(s2) : a2.push(_2[o2] = { id: o2, parts: [s2] });
        }
        return a2;
      }
      function C(e2, l2) {
        var a2 = c(e2.insertInto);
        if (!a2)
          throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");
        var _2 = n[n.length - 1];
        if (e2.insertAt === "top")
          _2 ? _2.nextSibling ? a2.insertBefore(l2, _2.nextSibling) : a2.appendChild(l2) : a2.insertBefore(l2, a2.firstChild), n.push(l2);
        else if (e2.insertAt === "bottom")
          a2.appendChild(l2);
        else {
          if (typeof e2.insertAt != "object" || !e2.insertAt.before)
            throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");
          var t2 = c(e2.insertAt.before, a2);
          a2.insertBefore(l2, t2);
        }
      }
      function u(e2) {
        if (e2.parentNode === null)
          return false;
        e2.parentNode.removeChild(e2);
        var l2 = n.indexOf(e2);
        l2 >= 0 && n.splice(l2, 1);
      }
      function f(e2) {
        var l2 = document.createElement("style");
        if (e2.attrs.type === void 0 && (e2.attrs.type = "text/css"), e2.attrs.nonce === void 0) {
          var _2 = function() {
            return a.nc;
          }();
          _2 && (e2.attrs.nonce = _2);
        }
        return p(l2, e2.attrs), C(e2, l2), l2;
      }
      function p(e2, l2) {
        Object.keys(l2).forEach(function(a2) {
          e2.setAttribute(a2, l2[a2]);
        });
      }
      function b(e2, l2) {
        var a2, _2, t2, r2;
        if (l2.transform && e2.css) {
          if (!(r2 = typeof l2.transform == "function" ? l2.transform(e2.css) : l2.transform.default(e2.css)))
            return function() {
            };
          e2.css = r2;
        }
        if (l2.singleton) {
          var o2 = h++;
          a2 = d || (d = f(l2)), _2 = y.bind(null, a2, o2, false), t2 = y.bind(null, a2, o2, true);
        } else
          e2.sourceMap && typeof URL == "function" && typeof URL.createObjectURL == "function" && typeof URL.revokeObjectURL == "function" && typeof Blob == "function" && typeof btoa == "function" ? (a2 = function(e3) {
            var l3 = document.createElement("link");
            return e3.attrs.type === void 0 && (e3.attrs.type = "text/css"), e3.attrs.rel = "stylesheet", p(l3, e3.attrs), C(e3, l3), l3;
          }(l2), _2 = M.bind(null, a2, l2), t2 = function() {
            u(a2), a2.href && URL.revokeObjectURL(a2.href);
          }) : (a2 = f(l2), _2 = x.bind(null, a2), t2 = function() {
            u(a2);
          });
        return _2(e2), function(l3) {
          if (l3) {
            if (l3.css === e2.css && l3.media === e2.media && l3.sourceMap === e2.sourceMap)
              return;
            _2(e2 = l3);
          } else
            t2();
        };
      }
      e.exports = function(e2, l2) {
        if (typeof DEBUG != "undefined" && DEBUG && typeof document != "object")
          throw new Error("The style-loader cannot be used in a non-browser environment");
        (l2 = l2 || {}).attrs = typeof l2.attrs == "object" ? l2.attrs : {}, l2.singleton || typeof l2.singleton == "boolean" || (l2.singleton = o()), l2.insertInto || (l2.insertInto = "head"), l2.insertAt || (l2.insertAt = "bottom");
        var a2 = w(e2, l2);
        return v(a2, l2), function(e3) {
          for (var _2 = [], t2 = 0; t2 < a2.length; t2++) {
            var o2 = a2[t2];
            (s2 = r[o2.id]).refs--, _2.push(s2);
          }
          e3 && v(w(e3, l2), l2);
          for (t2 = 0; t2 < _2.length; t2++) {
            var s2;
            if ((s2 = _2[t2]).refs === 0) {
              for (var c2 = 0; c2 < s2.parts.length; c2++)
                s2.parts[c2]();
              delete r[s2.id];
            }
          }
        };
      };
      var m, g = (m = [], function(e2, l2) {
        return m[e2] = l2, m.filter(Boolean).join("\n");
      });
      function y(e2, l2, a2, _2) {
        var t2 = a2 ? "" : _2.css;
        if (e2.styleSheet)
          e2.styleSheet.cssText = g(l2, t2);
        else {
          var r2 = document.createTextNode(t2), o2 = e2.childNodes;
          o2[l2] && e2.removeChild(o2[l2]), o2.length ? e2.insertBefore(r2, o2[l2]) : e2.appendChild(r2);
        }
      }
      function x(e2, l2) {
        var a2 = l2.css, _2 = l2.media;
        if (_2 && e2.setAttribute("media", _2), e2.styleSheet)
          e2.styleSheet.cssText = a2;
        else {
          for (; e2.firstChild; )
            e2.removeChild(e2.firstChild);
          e2.appendChild(document.createTextNode(a2));
        }
      }
      function M(e2, l2, a2) {
        var _2 = a2.css, t2 = a2.sourceMap, r2 = l2.convertToAbsoluteUrls === void 0 && t2;
        (l2.convertToAbsoluteUrls || r2) && (_2 = i(_2)), t2 && (_2 += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(t2)))) + " */");
        var o2 = new Blob([_2], { type: "text/css" }), s2 = e2.href;
        e2.href = URL.createObjectURL(o2), s2 && URL.revokeObjectURL(s2);
      }
    }, function(e, l, a) {
      const { TableConstructor: _ } = a(15), t = { Toolbox: a(8), InsertColBefore: a(9), InsertColAfter: a(10), InsertRowBefore: a(11), InsertRowAfter: a(12), DeleteRow: a(13), DeleteCol: a(14) }, r = "tc-table__inp";
      e.exports = class {
        static get enableLineBreaks() {
          return true;
        }
        static get toolbox() {
          return { icon: t.Toolbox, title: "Table" };
        }
        constructor({ data: e2, config: l2, api: a2 }) {
          this.api = a2, this.wrapper = void 0, this.config = l2, this.data = e2, this._tableConstructor = new _(e2, l2, a2), this.actions = [{ actionName: "InsertColBefore", icon: t.InsertColBefore, label: "Insert column before" }, { actionName: "InsertColAfter", icon: t.InsertColAfter, label: "Insert column after" }, { actionName: "InsertRowBefore", icon: t.InsertRowBefore, label: "Insert row before" }, { actionName: "InsertRowAfter", icon: t.InsertRowAfter, label: "Insert row after" }, { actionName: "DeleteRow", icon: t.DeleteRow, label: "Delete row" }, { actionName: "DeleteCol", icon: t.DeleteCol, label: "Delete column" }];
        }
        performAction(e2) {
          switch (e2) {
            case "InsertColBefore":
              this._tableConstructor.table.insertColumnBefore();
              break;
            case "InsertColAfter":
              this._tableConstructor.table.insertColumnAfter();
              break;
            case "InsertRowBefore":
              this._tableConstructor.table.insertRowBefore();
              break;
            case "InsertRowAfter":
              this._tableConstructor.table.insertRowAfter();
              break;
            case "DeleteRow":
              this._tableConstructor.table.deleteRow();
              break;
            case "DeleteCol":
              this._tableConstructor.table.deleteColumn();
          }
        }
        renderSettings() {
          const e2 = document.createElement("div");
          return this.actions.forEach(({ actionName: l2, label: a2, icon: _2 }) => {
            const t2 = this.api.i18n.t(a2), r2 = document.createElement("div");
            r2.classList.add("cdx-settings-button"), r2.innerHTML = _2, r2.title = l2, this.api.tooltip.onHover(r2, t2, { placement: "top" }), r2.addEventListener("click", this.performAction.bind(this, l2)), e2.appendChild(r2), this._tableConstructor.table.selectedCell && this._tableConstructor.table.focusCellOnSelectedCell();
          }), e2;
        }
        render() {
          if (this.wrapper = document.createElement("div"), this.data && this.data.content)
            this._createTableConfiguration();
          else {
            this.wrapper.classList.add("table-selector"), this.wrapper.setAttribute("data-hoveredClass", "m,n");
            const e2 = 6;
            this.createCells(e2), this.wrapper.className === "table-selector" && this.wrapper.addEventListener("mouseover", (e3) => {
              if (e3.target.id.length) {
                const l2 = e3.target.attributes.row.value, a2 = e3.target.attributes.column.value;
                this.wrapper.setAttribute("data-hoveredClass", `${l2},${a2}`);
              }
            }), this.wrapper.addEventListener("click", (e3) => {
              if (e3.target.id.length) {
                const l2 = e3.target.attributes.row.value, a2 = e3.target.attributes.column.value;
                this.wrapper.removeEventListener("mouseover", () => {
                }), this.config.rows = l2, this.config.cols = a2, this._createTableConfiguration();
              }
            });
          }
          return this.wrapper;
        }
        createCells(e2) {
          if (e2 !== 0)
            for (let l3 = 0; l3 < e2; l3++) {
              let a2 = document.createElement("div");
              a2.setAttribute("class", "table-row");
              for (let _2 = 0; _2 < e2; _2++) {
                let e3 = document.createElement("div"), t2 = document.createElement("div");
                e3.setAttribute("class", "table-cell-container"), t2.setAttribute("class", "table-cell"), e3.setAttribute("id", `row_${l3 + 1}_cell_${_2 + 1}`), e3.setAttribute("column", _2 + 1), e3.setAttribute("row", l3 + 1), t2.setAttribute("id", "cell_" + (_2 + 1)), t2.setAttribute("column", _2 + 1), t2.setAttribute("row", l3 + 1), e3.appendChild(t2), a2.appendChild(e3);
              }
              this.wrapper.appendChild(a2);
            }
          const l2 = document.createElement("input");
          l2.classList.add("hidden-element"), l2.setAttribute("tabindex", 0), this.wrapper.appendChild(l2);
        }
        _createTableConfiguration() {
          this.wrapper.innerHTML = "", this._tableConstructor = new _(this.data, this.config, this.api), this.wrapper.appendChild(this._tableConstructor.htmlElement);
        }
        save(e2) {
          const l2 = e2.querySelector("table"), a2 = [], _2 = l2 ? l2.rows : 0;
          if (_2.length) {
            for (let e3 = 0; e3 < _2.length; e3++) {
              const l3 = _2[e3], t2 = Array.from(l3.cells).map((e4) => e4.querySelector("." + r));
              t2.every(this._isEmpty) || a2.push(t2.map((e4) => e4.innerHTML));
            }
            return { content: a2 };
          }
        }
        _isEmpty(e2) {
          return !e2.textContent.trim();
        }
        static get pasteConfig() {
          return { tags: ["TABLE", "TR", "TD", "TBODY", "TH"] };
        }
        async onPaste(e2) {
          const l2 = e2.detail.data;
          this.data = this.pasteHandler(l2), this._createTableConfiguration();
        }
        pasteHandler(e2) {
          const { tagName: l2 } = e2, a2 = { content: [], config: { rows: 0, cols: 0 } };
          if (l2 === "TABLE") {
            let l3 = Array.from(e2.childNodes);
            l3 = l3.find((e3) => e3.nodeName === "TBODY");
            let _2 = Array.from(l3.childNodes);
            _2 = [_2].map((e3) => e3.filter((e4) => e4.nodeName === "TR")), a2.config.rows = _2[0].length, a2.content = _2[0].map((e3) => {
              let l4 = e3.childNodes;
              return a2.config.cols = l4.length, l4 = [...l4].map((e4) => e4.innerHTML), l4;
            });
          }
          return a2;
        }
      };
    }, function(e, l, a) {
      var _ = a(4);
      typeof _ == "string" && (_ = [[e.i, _, ""]]);
      var t = { hmr: true, transform: void 0, insertInto: void 0 };
      a(1)(_, t);
      _.locals && (e.exports = _.locals);
    }, function(e, l, a) {
      (e.exports = a(0)(false)).push([e.i, ".tc-editor{padding:10px;position:relative;box-sizing:content-box;width:100%;left:-10px}", ""]);
    }, function(e, l) {
      e.exports = function(e2) {
        var l2 = typeof window != "undefined" && window.location;
        if (!l2)
          throw new Error("fixUrls requires window.location");
        if (!e2 || typeof e2 != "string")
          return e2;
        var a = l2.protocol + "//" + l2.host, _ = a + l2.pathname.replace(/\/[^\/]*$/, "/");
        return e2.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function(e3, l3) {
          var t, r = l3.trim().replace(/^"(.*)"$/, function(e4, l4) {
            return l4;
          }).replace(/^'(.*)'$/, function(e4, l4) {
            return l4;
          });
          return /^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r) ? e3 : (t = r.indexOf("//") === 0 ? r : r.indexOf("/") === 0 ? a + r : _ + r.replace(/^\.\//, ""), "url(" + JSON.stringify(t) + ")");
        });
      };
    }, function(e, l, a) {
      var _ = a(7);
      typeof _ == "string" && (_ = [[e.i, _, ""]]);
      var t = { hmr: true, transform: void 0, insertInto: void 0 };
      a(1)(_, t);
      _.locals && (e.exports = _.locals);
    }, function(e, l, a) {
      (e.exports = a(0)(false)).push([e.i, '.tc-table{width:100%;height:100%;border-collapse:collapse;table-layout:fixed;}.tc-table__wrap{border:1px solid #dbdbe2;border-radius:3px;position:relative;height:100%;width:100%;box-sizing:border-box}.tc-table__cell{border:1px solid #dbdbe2;padding:0;vertical-align:top}.tc-table__area{padding:10px;height:100%}.tc-table__inp{outline:none;flex-grow:100;min-height:1.5em;height:100%;overflow:hidden}.tc-table__highlight:focus-within{background-color:rgba(173,164,176,.1)}.tc-table tbody tr:first-child td{border-top:none}.tc-table tbody tr:last-child td{border-bottom:none}.tc-table tbody tr td:last-child{border-right:none}.tc-table tbody tr td:first-child{border-left:none}.table-selector{display:flex;flex-direction:column;}.table-selector .hidden-element{display:none}.table-row{display:flex;flex-direction:row}.table-cell-container{width:30px;height:30px}.table-cell{width:25px;height:25px;background:#f6f6f6;border:1px solid #e4e4e4;cursor:pointer}[data-hoveredClass="1,1"] #row_1_cell_1 #cell_1,[data-hoveredClass="1,2"] #row_1_cell_1 #cell_1,[data-hoveredClass="1,2"] #row_1_cell_2 #cell_2,[data-hoveredClass="1,3"] #row_1_cell_1 #cell_1,[data-hoveredClass="1,3"] #row_1_cell_2 #cell_2,[data-hoveredClass="1,3"] #row_1_cell_3 #cell_3,[data-hoveredClass="1,4"] #row_1_cell_1 #cell_1,[data-hoveredClass="1,4"] #row_1_cell_2 #cell_2,[data-hoveredClass="1,4"] #row_1_cell_3 #cell_3,[data-hoveredClass="1,4"] #row_1_cell_4 #cell_4,[data-hoveredClass="1,5"] #row_1_cell_1 #cell_1,[data-hoveredClass="1,5"] #row_1_cell_2 #cell_2,[data-hoveredClass="1,5"] #row_1_cell_3 #cell_3,[data-hoveredClass="1,5"] #row_1_cell_4 #cell_4,[data-hoveredClass="1,5"] #row_1_cell_5 #cell_5,[data-hoveredClass="1,6"] #row_1_cell_1 #cell_1,[data-hoveredClass="1,6"] #row_1_cell_2 #cell_2,[data-hoveredClass="1,6"] #row_1_cell_3 #cell_3,[data-hoveredClass="1,6"] #row_1_cell_4 #cell_4,[data-hoveredClass="1,6"] #row_1_cell_5 #cell_5,[data-hoveredClass="1,6"] #row_1_cell_6 #cell_6,[data-hoveredClass="2,1"] #row_1_cell_1 #cell_1,[data-hoveredClass="2,1"] #row_2_cell_1 #cell_1,[data-hoveredClass="2,2"] #row_1_cell_1 #cell_1,[data-hoveredClass="2,2"] #row_1_cell_2 #cell_2,[data-hoveredClass="2,2"] #row_2_cell_1 #cell_1,[data-hoveredClass="2,2"] #row_2_cell_2 #cell_2,[data-hoveredClass="2,3"] #row_1_cell_1 #cell_1,[data-hoveredClass="2,3"] #row_1_cell_2 #cell_2,[data-hoveredClass="2,3"] #row_1_cell_3 #cell_3,[data-hoveredClass="2,3"] #row_2_cell_1 #cell_1,[data-hoveredClass="2,3"] #row_2_cell_2 #cell_2,[data-hoveredClass="2,3"] #row_2_cell_3 #cell_3,[data-hoveredClass="2,4"] #row_1_cell_1 #cell_1,[data-hoveredClass="2,4"] #row_1_cell_2 #cell_2,[data-hoveredClass="2,4"] #row_1_cell_3 #cell_3,[data-hoveredClass="2,4"] #row_1_cell_4 #cell_4,[data-hoveredClass="2,4"] #row_2_cell_1 #cell_1,[data-hoveredClass="2,4"] #row_2_cell_2 #cell_2,[data-hoveredClass="2,4"] #row_2_cell_3 #cell_3,[data-hoveredClass="2,4"] #row_2_cell_4 #cell_4,[data-hoveredClass="2,5"] #row_1_cell_1 #cell_1,[data-hoveredClass="2,5"] #row_1_cell_2 #cell_2,[data-hoveredClass="2,5"] #row_1_cell_3 #cell_3,[data-hoveredClass="2,5"] #row_1_cell_4 #cell_4,[data-hoveredClass="2,5"] #row_1_cell_5 #cell_5,[data-hoveredClass="2,5"] #row_2_cell_1 #cell_1,[data-hoveredClass="2,5"] #row_2_cell_2 #cell_2,[data-hoveredClass="2,5"] #row_2_cell_3 #cell_3,[data-hoveredClass="2,5"] #row_2_cell_4 #cell_4,[data-hoveredClass="2,5"] #row_2_cell_5 #cell_5,[data-hoveredClass="2,6"] #row_1_cell_1 #cell_1,[data-hoveredClass="2,6"] #row_1_cell_2 #cell_2,[data-hoveredClass="2,6"] #row_1_cell_3 #cell_3,[data-hoveredClass="2,6"] #row_1_cell_4 #cell_4,[data-hoveredClass="2,6"] #row_1_cell_5 #cell_5,[data-hoveredClass="2,6"] #row_1_cell_6 #cell_6,[data-hoveredClass="2,6"] #row_2_cell_1 #cell_1,[data-hoveredClass="2,6"] #row_2_cell_2 #cell_2,[data-hoveredClass="2,6"] #row_2_cell_3 #cell_3,[data-hoveredClass="2,6"] #row_2_cell_4 #cell_4,[data-hoveredClass="2,6"] #row_2_cell_5 #cell_5,[data-hoveredClass="2,6"] #row_2_cell_6 #cell_6,[data-hoveredClass="3,1"] #row_1_cell_1 #cell_1,[data-hoveredClass="3,1"] #row_2_cell_1 #cell_1,[data-hoveredClass="3,1"] #row_3_cell_1 #cell_1,[data-hoveredClass="3,2"] #row_1_cell_1 #cell_1,[data-hoveredClass="3,2"] #row_1_cell_2 #cell_2,[data-hoveredClass="3,2"] #row_2_cell_1 #cell_1,[data-hoveredClass="3,2"] #row_2_cell_2 #cell_2,[data-hoveredClass="3,2"] #row_3_cell_1 #cell_1,[data-hoveredClass="3,2"] #row_3_cell_2 #cell_2,[data-hoveredClass="3,3"] #row_1_cell_1 #cell_1,[data-hoveredClass="3,3"] #row_1_cell_2 #cell_2,[data-hoveredClass="3,3"] #row_1_cell_3 #cell_3,[data-hoveredClass="3,3"] #row_2_cell_1 #cell_1,[data-hoveredClass="3,3"] #row_2_cell_2 #cell_2,[data-hoveredClass="3,3"] #row_2_cell_3 #cell_3,[data-hoveredClass="3,3"] #row_3_cell_1 #cell_1,[data-hoveredClass="3,3"] #row_3_cell_2 #cell_2,[data-hoveredClass="3,3"] #row_3_cell_3 #cell_3,[data-hoveredClass="3,4"] #row_1_cell_1 #cell_1,[data-hoveredClass="3,4"] #row_1_cell_2 #cell_2,[data-hoveredClass="3,4"] #row_1_cell_3 #cell_3,[data-hoveredClass="3,4"] #row_1_cell_4 #cell_4,[data-hoveredClass="3,4"] #row_2_cell_1 #cell_1,[data-hoveredClass="3,4"] #row_2_cell_2 #cell_2,[data-hoveredClass="3,4"] #row_2_cell_3 #cell_3,[data-hoveredClass="3,4"] #row_2_cell_4 #cell_4,[data-hoveredClass="3,4"] #row_3_cell_1 #cell_1,[data-hoveredClass="3,4"] #row_3_cell_2 #cell_2,[data-hoveredClass="3,4"] #row_3_cell_3 #cell_3,[data-hoveredClass="3,4"] #row_3_cell_4 #cell_4,[data-hoveredClass="3,5"] #row_1_cell_1 #cell_1,[data-hoveredClass="3,5"] #row_1_cell_2 #cell_2,[data-hoveredClass="3,5"] #row_1_cell_3 #cell_3,[data-hoveredClass="3,5"] #row_1_cell_4 #cell_4,[data-hoveredClass="3,5"] #row_1_cell_5 #cell_5,[data-hoveredClass="3,5"] #row_2_cell_1 #cell_1,[data-hoveredClass="3,5"] #row_2_cell_2 #cell_2,[data-hoveredClass="3,5"] #row_2_cell_3 #cell_3,[data-hoveredClass="3,5"] #row_2_cell_4 #cell_4,[data-hoveredClass="3,5"] #row_2_cell_5 #cell_5,[data-hoveredClass="3,5"] #row_3_cell_1 #cell_1,[data-hoveredClass="3,5"] #row_3_cell_2 #cell_2,[data-hoveredClass="3,5"] #row_3_cell_3 #cell_3,[data-hoveredClass="3,5"] #row_3_cell_4 #cell_4,[data-hoveredClass="3,5"] #row_3_cell_5 #cell_5,[data-hoveredClass="3,6"] #row_1_cell_1 #cell_1,[data-hoveredClass="3,6"] #row_1_cell_2 #cell_2,[data-hoveredClass="3,6"] #row_1_cell_3 #cell_3,[data-hoveredClass="3,6"] #row_1_cell_4 #cell_4,[data-hoveredClass="3,6"] #row_1_cell_5 #cell_5,[data-hoveredClass="3,6"] #row_1_cell_6 #cell_6,[data-hoveredClass="3,6"] #row_2_cell_1 #cell_1,[data-hoveredClass="3,6"] #row_2_cell_2 #cell_2,[data-hoveredClass="3,6"] #row_2_cell_3 #cell_3,[data-hoveredClass="3,6"] #row_2_cell_4 #cell_4,[data-hoveredClass="3,6"] #row_2_cell_5 #cell_5,[data-hoveredClass="3,6"] #row_2_cell_6 #cell_6,[data-hoveredClass="3,6"] #row_3_cell_1 #cell_1,[data-hoveredClass="3,6"] #row_3_cell_2 #cell_2,[data-hoveredClass="3,6"] #row_3_cell_3 #cell_3,[data-hoveredClass="3,6"] #row_3_cell_4 #cell_4,[data-hoveredClass="3,6"] #row_3_cell_5 #cell_5,[data-hoveredClass="3,6"] #row_3_cell_6 #cell_6,[data-hoveredClass="4,1"] #row_1_cell_1 #cell_1,[data-hoveredClass="4,1"] #row_2_cell_1 #cell_1,[data-hoveredClass="4,1"] #row_3_cell_1 #cell_1,[data-hoveredClass="4,1"] #row_4_cell_1 #cell_1,[data-hoveredClass="4,2"] #row_1_cell_1 #cell_1,[data-hoveredClass="4,2"] #row_1_cell_2 #cell_2,[data-hoveredClass="4,2"] #row_2_cell_1 #cell_1,[data-hoveredClass="4,2"] #row_2_cell_2 #cell_2,[data-hoveredClass="4,2"] #row_3_cell_1 #cell_1,[data-hoveredClass="4,2"] #row_3_cell_2 #cell_2,[data-hoveredClass="4,2"] #row_4_cell_1 #cell_1,[data-hoveredClass="4,2"] #row_4_cell_2 #cell_2,[data-hoveredClass="4,3"] #row_1_cell_1 #cell_1,[data-hoveredClass="4,3"] #row_1_cell_2 #cell_2,[data-hoveredClass="4,3"] #row_1_cell_3 #cell_3,[data-hoveredClass="4,3"] #row_2_cell_1 #cell_1,[data-hoveredClass="4,3"] #row_2_cell_2 #cell_2,[data-hoveredClass="4,3"] #row_2_cell_3 #cell_3,[data-hoveredClass="4,3"] #row_3_cell_1 #cell_1,[data-hoveredClass="4,3"] #row_3_cell_2 #cell_2,[data-hoveredClass="4,3"] #row_3_cell_3 #cell_3,[data-hoveredClass="4,3"] #row_4_cell_1 #cell_1,[data-hoveredClass="4,3"] #row_4_cell_2 #cell_2,[data-hoveredClass="4,3"] #row_4_cell_3 #cell_3,[data-hoveredClass="4,4"] #row_1_cell_1 #cell_1,[data-hoveredClass="4,4"] #row_1_cell_2 #cell_2,[data-hoveredClass="4,4"] #row_1_cell_3 #cell_3,[data-hoveredClass="4,4"] #row_1_cell_4 #cell_4,[data-hoveredClass="4,4"] #row_2_cell_1 #cell_1,[data-hoveredClass="4,4"] #row_2_cell_2 #cell_2,[data-hoveredClass="4,4"] #row_2_cell_3 #cell_3,[data-hoveredClass="4,4"] #row_2_cell_4 #cell_4,[data-hoveredClass="4,4"] #row_3_cell_1 #cell_1,[data-hoveredClass="4,4"] #row_3_cell_2 #cell_2,[data-hoveredClass="4,4"] #row_3_cell_3 #cell_3,[data-hoveredClass="4,4"] #row_3_cell_4 #cell_4,[data-hoveredClass="4,4"] #row_4_cell_1 #cell_1,[data-hoveredClass="4,4"] #row_4_cell_2 #cell_2,[data-hoveredClass="4,4"] #row_4_cell_3 #cell_3,[data-hoveredClass="4,4"] #row_4_cell_4 #cell_4,[data-hoveredClass="4,5"] #row_1_cell_1 #cell_1,[data-hoveredClass="4,5"] #row_1_cell_2 #cell_2,[data-hoveredClass="4,5"] #row_1_cell_3 #cell_3,[data-hoveredClass="4,5"] #row_1_cell_4 #cell_4,[data-hoveredClass="4,5"] #row_1_cell_5 #cell_5,[data-hoveredClass="4,5"] #row_2_cell_1 #cell_1,[data-hoveredClass="4,5"] #row_2_cell_2 #cell_2,[data-hoveredClass="4,5"] #row_2_cell_3 #cell_3,[data-hoveredClass="4,5"] #row_2_cell_4 #cell_4,[data-hoveredClass="4,5"] #row_2_cell_5 #cell_5,[data-hoveredClass="4,5"] #row_3_cell_1 #cell_1,[data-hoveredClass="4,5"] #row_3_cell_2 #cell_2,[data-hoveredClass="4,5"] #row_3_cell_3 #cell_3,[data-hoveredClass="4,5"] #row_3_cell_4 #cell_4,[data-hoveredClass="4,5"] #row_3_cell_5 #cell_5,[data-hoveredClass="4,5"] #row_4_cell_1 #cell_1,[data-hoveredClass="4,5"] #row_4_cell_2 #cell_2,[data-hoveredClass="4,5"] #row_4_cell_3 #cell_3,[data-hoveredClass="4,5"] #row_4_cell_4 #cell_4,[data-hoveredClass="4,5"] #row_4_cell_5 #cell_5,[data-hoveredClass="4,6"] #row_1_cell_1 #cell_1,[data-hoveredClass="4,6"] #row_1_cell_2 #cell_2,[data-hoveredClass="4,6"] #row_1_cell_3 #cell_3,[data-hoveredClass="4,6"] #row_1_cell_4 #cell_4,[data-hoveredClass="4,6"] #row_1_cell_5 #cell_5,[data-hoveredClass="4,6"] #row_1_cell_6 #cell_6,[data-hoveredClass="4,6"] #row_2_cell_1 #cell_1,[data-hoveredClass="4,6"] #row_2_cell_2 #cell_2,[data-hoveredClass="4,6"] #row_2_cell_3 #cell_3,[data-hoveredClass="4,6"] #row_2_cell_4 #cell_4,[data-hoveredClass="4,6"] #row_2_cell_5 #cell_5,[data-hoveredClass="4,6"] #row_2_cell_6 #cell_6,[data-hoveredClass="4,6"] #row_3_cell_1 #cell_1,[data-hoveredClass="4,6"] #row_3_cell_2 #cell_2,[data-hoveredClass="4,6"] #row_3_cell_3 #cell_3,[data-hoveredClass="4,6"] #row_3_cell_4 #cell_4,[data-hoveredClass="4,6"] #row_3_cell_5 #cell_5,[data-hoveredClass="4,6"] #row_3_cell_6 #cell_6,[data-hoveredClass="4,6"] #row_4_cell_1 #cell_1,[data-hoveredClass="4,6"] #row_4_cell_2 #cell_2,[data-hoveredClass="4,6"] #row_4_cell_3 #cell_3,[data-hoveredClass="4,6"] #row_4_cell_4 #cell_4,[data-hoveredClass="4,6"] #row_4_cell_5 #cell_5,[data-hoveredClass="4,6"] #row_4_cell_6 #cell_6,[data-hoveredClass="5,1"] #row_1_cell_1 #cell_1,[data-hoveredClass="5,1"] #row_2_cell_1 #cell_1,[data-hoveredClass="5,1"] #row_3_cell_1 #cell_1,[data-hoveredClass="5,1"] #row_4_cell_1 #cell_1,[data-hoveredClass="5,1"] #row_5_cell_1 #cell_1,[data-hoveredClass="5,2"] #row_1_cell_1 #cell_1,[data-hoveredClass="5,2"] #row_1_cell_2 #cell_2,[data-hoveredClass="5,2"] #row_2_cell_1 #cell_1,[data-hoveredClass="5,2"] #row_2_cell_2 #cell_2,[data-hoveredClass="5,2"] #row_3_cell_1 #cell_1,[data-hoveredClass="5,2"] #row_3_cell_2 #cell_2,[data-hoveredClass="5,2"] #row_4_cell_1 #cell_1,[data-hoveredClass="5,2"] #row_4_cell_2 #cell_2,[data-hoveredClass="5,2"] #row_5_cell_1 #cell_1,[data-hoveredClass="5,2"] #row_5_cell_2 #cell_2,[data-hoveredClass="5,3"] #row_1_cell_1 #cell_1,[data-hoveredClass="5,3"] #row_1_cell_2 #cell_2,[data-hoveredClass="5,3"] #row_1_cell_3 #cell_3,[data-hoveredClass="5,3"] #row_2_cell_1 #cell_1,[data-hoveredClass="5,3"] #row_2_cell_2 #cell_2,[data-hoveredClass="5,3"] #row_2_cell_3 #cell_3,[data-hoveredClass="5,3"] #row_3_cell_1 #cell_1,[data-hoveredClass="5,3"] #row_3_cell_2 #cell_2,[data-hoveredClass="5,3"] #row_3_cell_3 #cell_3,[data-hoveredClass="5,3"] #row_4_cell_1 #cell_1,[data-hoveredClass="5,3"] #row_4_cell_2 #cell_2,[data-hoveredClass="5,3"] #row_4_cell_3 #cell_3,[data-hoveredClass="5,3"] #row_5_cell_1 #cell_1,[data-hoveredClass="5,3"] #row_5_cell_2 #cell_2,[data-hoveredClass="5,3"] #row_5_cell_3 #cell_3,[data-hoveredClass="5,4"] #row_1_cell_1 #cell_1,[data-hoveredClass="5,4"] #row_1_cell_2 #cell_2,[data-hoveredClass="5,4"] #row_1_cell_3 #cell_3,[data-hoveredClass="5,4"] #row_1_cell_4 #cell_4,[data-hoveredClass="5,4"] #row_2_cell_1 #cell_1,[data-hoveredClass="5,4"] #row_2_cell_2 #cell_2,[data-hoveredClass="5,4"] #row_2_cell_3 #cell_3,[data-hoveredClass="5,4"] #row_2_cell_4 #cell_4,[data-hoveredClass="5,4"] #row_3_cell_1 #cell_1,[data-hoveredClass="5,4"] #row_3_cell_2 #cell_2,[data-hoveredClass="5,4"] #row_3_cell_3 #cell_3,[data-hoveredClass="5,4"] #row_3_cell_4 #cell_4,[data-hoveredClass="5,4"] #row_4_cell_1 #cell_1,[data-hoveredClass="5,4"] #row_4_cell_2 #cell_2,[data-hoveredClass="5,4"] #row_4_cell_3 #cell_3,[data-hoveredClass="5,4"] #row_4_cell_4 #cell_4,[data-hoveredClass="5,4"] #row_5_cell_1 #cell_1,[data-hoveredClass="5,4"] #row_5_cell_2 #cell_2,[data-hoveredClass="5,4"] #row_5_cell_3 #cell_3,[data-hoveredClass="5,4"] #row_5_cell_4 #cell_4,[data-hoveredClass="5,5"] #row_1_cell_1 #cell_1,[data-hoveredClass="5,5"] #row_1_cell_2 #cell_2,[data-hoveredClass="5,5"] #row_1_cell_3 #cell_3,[data-hoveredClass="5,5"] #row_1_cell_4 #cell_4,[data-hoveredClass="5,5"] #row_1_cell_5 #cell_5,[data-hoveredClass="5,5"] #row_2_cell_1 #cell_1,[data-hoveredClass="5,5"] #row_2_cell_2 #cell_2,[data-hoveredClass="5,5"] #row_2_cell_3 #cell_3,[data-hoveredClass="5,5"] #row_2_cell_4 #cell_4,[data-hoveredClass="5,5"] #row_2_cell_5 #cell_5,[data-hoveredClass="5,5"] #row_3_cell_1 #cell_1,[data-hoveredClass="5,5"] #row_3_cell_2 #cell_2,[data-hoveredClass="5,5"] #row_3_cell_3 #cell_3,[data-hoveredClass="5,5"] #row_3_cell_4 #cell_4,[data-hoveredClass="5,5"] #row_3_cell_5 #cell_5,[data-hoveredClass="5,5"] #row_4_cell_1 #cell_1,[data-hoveredClass="5,5"] #row_4_cell_2 #cell_2,[data-hoveredClass="5,5"] #row_4_cell_3 #cell_3,[data-hoveredClass="5,5"] #row_4_cell_4 #cell_4,[data-hoveredClass="5,5"] #row_4_cell_5 #cell_5,[data-hoveredClass="5,5"] #row_5_cell_1 #cell_1,[data-hoveredClass="5,5"] #row_5_cell_2 #cell_2,[data-hoveredClass="5,5"] #row_5_cell_3 #cell_3,[data-hoveredClass="5,5"] #row_5_cell_4 #cell_4,[data-hoveredClass="5,5"] #row_5_cell_5 #cell_5,[data-hoveredClass="5,6"] #row_1_cell_1 #cell_1,[data-hoveredClass="5,6"] #row_1_cell_2 #cell_2,[data-hoveredClass="5,6"] #row_1_cell_3 #cell_3,[data-hoveredClass="5,6"] #row_1_cell_4 #cell_4,[data-hoveredClass="5,6"] #row_1_cell_5 #cell_5,[data-hoveredClass="5,6"] #row_1_cell_6 #cell_6,[data-hoveredClass="5,6"] #row_2_cell_1 #cell_1,[data-hoveredClass="5,6"] #row_2_cell_2 #cell_2,[data-hoveredClass="5,6"] #row_2_cell_3 #cell_3,[data-hoveredClass="5,6"] #row_2_cell_4 #cell_4,[data-hoveredClass="5,6"] #row_2_cell_5 #cell_5,[data-hoveredClass="5,6"] #row_2_cell_6 #cell_6,[data-hoveredClass="5,6"] #row_3_cell_1 #cell_1,[data-hoveredClass="5,6"] #row_3_cell_2 #cell_2,[data-hoveredClass="5,6"] #row_3_cell_3 #cell_3,[data-hoveredClass="5,6"] #row_3_cell_4 #cell_4,[data-hoveredClass="5,6"] #row_3_cell_5 #cell_5,[data-hoveredClass="5,6"] #row_3_cell_6 #cell_6,[data-hoveredClass="5,6"] #row_4_cell_1 #cell_1,[data-hoveredClass="5,6"] #row_4_cell_2 #cell_2,[data-hoveredClass="5,6"] #row_4_cell_3 #cell_3,[data-hoveredClass="5,6"] #row_4_cell_4 #cell_4,[data-hoveredClass="5,6"] #row_4_cell_5 #cell_5,[data-hoveredClass="5,6"] #row_4_cell_6 #cell_6,[data-hoveredClass="5,6"] #row_5_cell_1 #cell_1,[data-hoveredClass="5,6"] #row_5_cell_2 #cell_2,[data-hoveredClass="5,6"] #row_5_cell_3 #cell_3,[data-hoveredClass="5,6"] #row_5_cell_4 #cell_4,[data-hoveredClass="5,6"] #row_5_cell_5 #cell_5,[data-hoveredClass="5,6"] #row_5_cell_6 #cell_6,[data-hoveredClass="6,1"] #row_1_cell_1 #cell_1,[data-hoveredClass="6,1"] #row_2_cell_1 #cell_1,[data-hoveredClass="6,1"] #row_3_cell_1 #cell_1,[data-hoveredClass="6,1"] #row_4_cell_1 #cell_1,[data-hoveredClass="6,1"] #row_5_cell_1 #cell_1,[data-hoveredClass="6,1"] #row_6_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_1_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_1_cell_2 #cell_2,[data-hoveredClass="6,2"] #row_2_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_2_cell_2 #cell_2,[data-hoveredClass="6,2"] #row_3_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_3_cell_2 #cell_2,[data-hoveredClass="6,2"] #row_4_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_4_cell_2 #cell_2,[data-hoveredClass="6,2"] #row_5_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_5_cell_2 #cell_2,[data-hoveredClass="6,2"] #row_6_cell_1 #cell_1,[data-hoveredClass="6,2"] #row_6_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_1_cell_1 #cell_1,[data-hoveredClass="6,3"] #row_1_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_1_cell_3 #cell_3,[data-hoveredClass="6,3"] #row_2_cell_1 #cell_1,[data-hoveredClass="6,3"] #row_2_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_2_cell_3 #cell_3,[data-hoveredClass="6,3"] #row_3_cell_1 #cell_1,[data-hoveredClass="6,3"] #row_3_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_3_cell_3 #cell_3,[data-hoveredClass="6,3"] #row_4_cell_1 #cell_1,[data-hoveredClass="6,3"] #row_4_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_4_cell_3 #cell_3,[data-hoveredClass="6,3"] #row_5_cell_1 #cell_1,[data-hoveredClass="6,3"] #row_5_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_5_cell_3 #cell_3,[data-hoveredClass="6,3"] #row_6_cell_1 #cell_1,[data-hoveredClass="6,3"] #row_6_cell_2 #cell_2,[data-hoveredClass="6,3"] #row_6_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_1_cell_1 #cell_1,[data-hoveredClass="6,4"] #row_1_cell_2 #cell_2,[data-hoveredClass="6,4"] #row_1_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_1_cell_4 #cell_4,[data-hoveredClass="6,4"] #row_2_cell_1 #cell_1,[data-hoveredClass="6,4"] #row_2_cell_2 #cell_2,[data-hoveredClass="6,4"] #row_2_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_2_cell_4 #cell_4,[data-hoveredClass="6,4"] #row_3_cell_1 #cell_1,[data-hoveredClass="6,4"] #row_3_cell_2 #cell_2,[data-hoveredClass="6,4"] #row_3_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_3_cell_4 #cell_4,[data-hoveredClass="6,4"] #row_4_cell_1 #cell_1,[data-hoveredClass="6,4"] #row_4_cell_2 #cell_2,[data-hoveredClass="6,4"] #row_4_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_4_cell_4 #cell_4,[data-hoveredClass="6,4"] #row_5_cell_1 #cell_1,[data-hoveredClass="6,4"] #row_5_cell_2 #cell_2,[data-hoveredClass="6,4"] #row_5_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_5_cell_4 #cell_4,[data-hoveredClass="6,4"] #row_6_cell_1 #cell_1,[data-hoveredClass="6,4"] #row_6_cell_2 #cell_2,[data-hoveredClass="6,4"] #row_6_cell_3 #cell_3,[data-hoveredClass="6,4"] #row_6_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_1_cell_1 #cell_1,[data-hoveredClass="6,5"] #row_1_cell_2 #cell_2,[data-hoveredClass="6,5"] #row_1_cell_3 #cell_3,[data-hoveredClass="6,5"] #row_1_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_1_cell_5 #cell_5,[data-hoveredClass="6,5"] #row_2_cell_1 #cell_1,[data-hoveredClass="6,5"] #row_2_cell_2 #cell_2,[data-hoveredClass="6,5"] #row_2_cell_3 #cell_3,[data-hoveredClass="6,5"] #row_2_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_2_cell_5 #cell_5,[data-hoveredClass="6,5"] #row_3_cell_1 #cell_1,[data-hoveredClass="6,5"] #row_3_cell_2 #cell_2,[data-hoveredClass="6,5"] #row_3_cell_3 #cell_3,[data-hoveredClass="6,5"] #row_3_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_3_cell_5 #cell_5,[data-hoveredClass="6,5"] #row_4_cell_1 #cell_1,[data-hoveredClass="6,5"] #row_4_cell_2 #cell_2,[data-hoveredClass="6,5"] #row_4_cell_3 #cell_3,[data-hoveredClass="6,5"] #row_4_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_4_cell_5 #cell_5,[data-hoveredClass="6,5"] #row_5_cell_1 #cell_1,[data-hoveredClass="6,5"] #row_5_cell_2 #cell_2,[data-hoveredClass="6,5"] #row_5_cell_3 #cell_3,[data-hoveredClass="6,5"] #row_5_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_5_cell_5 #cell_5,[data-hoveredClass="6,5"] #row_6_cell_1 #cell_1,[data-hoveredClass="6,5"] #row_6_cell_2 #cell_2,[data-hoveredClass="6,5"] #row_6_cell_3 #cell_3,[data-hoveredClass="6,5"] #row_6_cell_4 #cell_4,[data-hoveredClass="6,5"] #row_6_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_1_cell_1 #cell_1,[data-hoveredClass="6,6"] #row_1_cell_2 #cell_2,[data-hoveredClass="6,6"] #row_1_cell_3 #cell_3,[data-hoveredClass="6,6"] #row_1_cell_4 #cell_4,[data-hoveredClass="6,6"] #row_1_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_1_cell_6 #cell_6,[data-hoveredClass="6,6"] #row_2_cell_1 #cell_1,[data-hoveredClass="6,6"] #row_2_cell_2 #cell_2,[data-hoveredClass="6,6"] #row_2_cell_3 #cell_3,[data-hoveredClass="6,6"] #row_2_cell_4 #cell_4,[data-hoveredClass="6,6"] #row_2_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_2_cell_6 #cell_6,[data-hoveredClass="6,6"] #row_3_cell_1 #cell_1,[data-hoveredClass="6,6"] #row_3_cell_2 #cell_2,[data-hoveredClass="6,6"] #row_3_cell_3 #cell_3,[data-hoveredClass="6,6"] #row_3_cell_4 #cell_4,[data-hoveredClass="6,6"] #row_3_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_3_cell_6 #cell_6,[data-hoveredClass="6,6"] #row_4_cell_1 #cell_1,[data-hoveredClass="6,6"] #row_4_cell_2 #cell_2,[data-hoveredClass="6,6"] #row_4_cell_3 #cell_3,[data-hoveredClass="6,6"] #row_4_cell_4 #cell_4,[data-hoveredClass="6,6"] #row_4_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_4_cell_6 #cell_6,[data-hoveredClass="6,6"] #row_5_cell_1 #cell_1,[data-hoveredClass="6,6"] #row_5_cell_2 #cell_2,[data-hoveredClass="6,6"] #row_5_cell_3 #cell_3,[data-hoveredClass="6,6"] #row_5_cell_4 #cell_4,[data-hoveredClass="6,6"] #row_5_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_5_cell_6 #cell_6,[data-hoveredClass="6,6"] #row_6_cell_1 #cell_1,[data-hoveredClass="6,6"] #row_6_cell_2 #cell_2,[data-hoveredClass="6,6"] #row_6_cell_3 #cell_3,[data-hoveredClass="6,6"] #row_6_cell_4 #cell_4,[data-hoveredClass="6,6"] #row_6_cell_5 #cell_5,[data-hoveredClass="6,6"] #row_6_cell_6 #cell_6{background:#d5e4f9;border:1px solid #c0cffd}', ""]);
    }, function(e, l) {
      e.exports = '<svg width="18" height="14"><path d="M2.833 8v1.95a1.7 1.7 0 0 0 1.7 1.7h3.45V8h-5.15zm0-2h5.15V2.35h-3.45a1.7 1.7 0 0 0-1.7 1.7V6zm12.3 2h-5.15v3.65h3.45a1.7 1.7 0 0 0 1.7-1.7V8zm0-2V4.05a1.7 1.7 0 0 0-1.7-1.7h-3.45V6h5.15zM4.533.1h8.9a3.95 3.95 0 0 1 3.95 3.95v5.9a3.95 3.95 0 0 1-3.95 3.95h-8.9a3.95 3.95 0 0 1-3.95-3.95v-5.9A3.95 3.95 0 0 1 4.533.1z"></path></svg>';
    }, function(e, l) {
      e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-21 0 512 512" width="18" height="18"><path d="M181.332031 106.667969c-3.925781 0-7.828125-1.429688-10.921875-4.3125l-80-74.664063c-4.820312-4.480468-6.378906-11.457031-3.96875-17.558594C88.851562 4.011719 94.761719 0 101.332031 0h160c6.570313 0 12.480469 4.011719 14.871094 10.132812 2.410156 6.125.851563 13.078126-3.96875 17.558594l-80 74.664063c-3.070313 2.882812-6.976563 4.3125-10.902344 4.3125zM141.910156 32l39.421875 36.777344L220.757812 32zm0 0M90.667969 512H37.332031C16.746094 512 0 495.253906 0 474.667969V144c0-20.585938 16.746094-37.332031 37.332031-37.332031h53.335938C111.253906 106.667969 128 123.414062 128 144v330.667969C128 495.253906 111.253906 512 90.667969 512zM37.332031 138.667969C34.390625 138.667969 32 141.054688 32 144v330.667969C32 477.609375 34.390625 480 37.332031 480h53.335938C93.609375 480 96 477.609375 96 474.667969V144c0-2.945312-2.390625-5.332031-5.332031-5.332031zm0 0M432 512H272c-20.585938 0-37.332031-16.746094-37.332031-37.332031V144c0-20.585938 16.746093-37.332031 37.332031-37.332031h160c20.585938 0 37.332031 16.746093 37.332031 37.332031v330.667969C469.332031 495.253906 452.585938 512 432 512zM272 138.667969c-2.945312 0-5.332031 2.386719-5.332031 5.332031v330.667969C266.667969 477.609375 269.054688 480 272 480h160c2.945312 0 5.332031-2.390625 5.332031-5.332031V144c0-2.945312-2.386719-5.332031-5.332031-5.332031zm0 0"></path><path d="M112 325.332031H16c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h96c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0M453.332031 325.332031H250.667969c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h202.664062c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"></path><path d="M352 512c-8.832031 0-16-7.167969-16-16V122.667969c0-8.832031 7.167969-16 16-16s16 7.167969 16 16V496c0 8.832031-7.167969 16-16 16zm0 0"></path></svg>';
    }, function(e, l) {
      e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-21 0 512 512" width="18" height="18"><path d="M288 106.667969c-3.925781 0-7.851562-1.429688-10.921875-4.3125l-80-74.664063c-4.800781-4.480468-6.378906-11.457031-3.96875-17.558594C195.519531 4.03125 201.429688 0 208 0h160c6.570312 0 12.480469 4.011719 14.890625 10.132812 2.410156 6.125.832031 13.078126-3.96875 17.558594l-80 74.664063c-3.070313 2.882812-6.996094 4.3125-10.921875 4.3125zM248.597656 32L288 68.777344 327.402344 32zm0 0M432 512h-53.332031c-20.589844 0-37.335938-16.746094-37.335938-37.332031V144c0-20.585938 16.746094-37.332031 37.335938-37.332031H432c20.585938 0 37.332031 16.746093 37.332031 37.332031v330.667969C469.332031 495.253906 452.585938 512 432 512zm-53.332031-373.332031c-2.945313 0-5.335938 2.386719-5.335938 5.332031v330.667969c0 2.941406 2.390625 5.332031 5.335938 5.332031H432c2.945312 0 5.332031-2.390625 5.332031-5.332031V144c0-2.945312-2.386719-5.332031-5.332031-5.332031zm0 0M197.332031 512h-160C16.746094 512 0 495.253906 0 474.667969V144c0-20.585938 16.746094-37.332031 37.332031-37.332031h160c20.589844 0 37.335938 16.746093 37.335938 37.332031v330.667969c0 20.585937-16.746094 37.332031-37.335938 37.332031zm-160-373.332031C34.390625 138.667969 32 141.054688 32 144v330.667969C32 477.609375 34.390625 480 37.332031 480h160c2.945313 0 5.335938-2.390625 5.335938-5.332031V144c0-2.945312-2.390625-5.332031-5.335938-5.332031zm0 0"></path><path d="M453.332031 325.332031h-96c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h96c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0M218.667969 325.332031H16c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h202.667969c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"></path><path d="M117.332031 512c-8.832031 0-16-7.167969-16-16V122.667969c0-8.832031 7.167969-16 16-16s16 7.167969 16 16V496c0 8.832031-7.167969 16-16 16zm0 0"></path></svg>';
    }, function(e, l) {
      e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -21 512 512" width="18" height="18"><path d="M16 277.332031c-1.984375 0-3.96875-.363281-5.867188-1.109375C4.011719 273.8125 0 267.902344 0 261.332031v-160c0-6.570312 4.011719-12.480469 10.132812-14.890625 6.144532-2.410156 13.078126-.851562 17.558594 3.96875l74.664063 80c5.761719 6.144532 5.761719 15.679688 0 21.824219l-74.664063 80C24.597656 275.5625 20.351562 277.332031 16 277.332031zm16-135.402343v78.804687l36.777344-39.402344zm0 0M474.667969 128H144c-20.585938 0-37.332031-16.746094-37.332031-37.332031V37.332031C106.667969 16.746094 123.414062 0 144 0h330.667969C495.253906 0 512 16.746094 512 37.332031v53.335938C512 111.253906 495.253906 128 474.667969 128zM144 32c-2.945312 0-5.332031 2.390625-5.332031 5.332031v53.335938C138.667969 93.609375 141.054688 96 144 96h330.667969C477.609375 96 480 93.609375 480 90.667969V37.332031C480 34.390625 477.609375 32 474.667969 32zm0 0M474.667969 469.332031H144c-20.585938 0-37.332031-16.746093-37.332031-37.332031V272c0-20.585938 16.746093-37.332031 37.332031-37.332031h330.667969C495.253906 234.667969 512 251.414062 512 272v160c0 20.585938-16.746094 37.332031-37.332031 37.332031zM144 266.667969c-2.945312 0-5.332031 2.386719-5.332031 5.332031v160c0 2.945312 2.386719 5.332031 5.332031 5.332031h330.667969C477.609375 437.332031 480 434.945312 480 432V272c0-2.945312-2.390625-5.332031-5.332031-5.332031zm0 0"></path><path d="M309.332031 128c-8.832031 0-16-7.167969-16-16V16c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v96c0 8.832031-7.167969 16-16 16zm0 0M309.332031 469.332031c-8.832031 0-16-7.167969-16-16V250.667969c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v202.664062c0 8.832031-7.167969 16-16 16zm0 0"></path><path d="M496 368H122.667969c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16H496c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"></path></svg>';
    }, function(e, l) {
      e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -21 512 512" width="18" height="18"><path d="M16 384c-1.984375 0-3.96875-.363281-5.867188-1.109375C4.011719 380.480469 0 374.570312 0 368V208c0-6.570312 4.011719-12.480469 10.132812-14.890625 6.144532-2.410156 13.078126-.851563 17.558594 3.96875l74.664063 80c5.761719 6.144531 5.761719 15.679687 0 21.824219l-74.664063 80C24.597656 382.230469 20.351562 384 16 384zm16-135.402344v78.804688L68.777344 288zm0 0M474.667969 469.332031H144c-20.585938 0-37.332031-16.746093-37.332031-37.332031v-53.332031c0-20.589844 16.746093-37.335938 37.332031-37.335938h330.667969c20.585937 0 37.332031 16.746094 37.332031 37.335938V432c0 20.585938-16.746094 37.332031-37.332031 37.332031zm-330.667969-96c-2.945312 0-5.332031 2.390625-5.332031 5.335938V432c0 2.945312 2.386719 5.332031 5.332031 5.332031h330.667969C477.609375 437.332031 480 434.945312 480 432v-53.332031c0-2.945313-2.390625-5.335938-5.332031-5.335938zm0 0M474.667969 234.667969H144c-20.585938 0-37.332031-16.746094-37.332031-37.335938v-160C106.667969 16.746094 123.414062 0 144 0h330.667969C495.253906 0 512 16.746094 512 37.332031v160c0 20.589844-16.746094 37.335938-37.332031 37.335938zM144 32c-2.945312 0-5.332031 2.390625-5.332031 5.332031v160c0 2.945313 2.386719 5.335938 5.332031 5.335938h330.667969c2.941406 0 5.332031-2.390625 5.332031-5.335938v-160C480 34.390625 477.609375 32 474.667969 32zm0 0"></path><path d="M309.332031 469.332031c-8.832031 0-16-7.167969-16-16v-96c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v96c0 8.832031-7.167969 16-16 16zm0 0M309.332031 234.667969c-8.832031 0-16-7.167969-16-16V16c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v202.667969c0 8.832031-7.167969 16-16 16zm0 0"></path><path d="M496 133.332031H122.667969c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16H496c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"></path></svg>';
    }, function(e, l) {
      e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.381 15.381" width="18" height="18"><g><path d="M0 1.732v7.732h6.053c0-.035-.004-.07-.004-.104 0-.434.061-.854.165-1.255H1.36V3.092h12.662v2.192c.546.396 1.01.897 1.359 1.477V1.732H0z"></path><path d="M11.196 5.28c-2.307 0-4.183 1.877-4.183 4.184 0 2.308 1.876 4.185 4.183 4.185 2.309 0 4.185-1.877 4.185-4.185 0-2.307-1.876-4.184-4.185-4.184zm0 7.233c-1.679 0-3.047-1.367-3.047-3.049 0-1.68 1.368-3.049 3.047-3.049 1.684 0 3.05 1.369 3.05 3.049 0 1.682-1.366 3.049-3.05 3.049z"></path><path d="M9.312 8.759h3.844v1.104H9.312z"></path></g></svg>';
    }, function(e, l) {
      e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="18" height="18"><path d="M13.594 20.85V24h-10V2h10v3.15c.633-.323 1.304-.565 2-.727V1c0-.551-.448-1-1-1h-12c-.55 0-1 .449-1 1v24c0 .551.449 1 1 1h12c.552 0 1-.449 1-1v-3.424c-.696-.161-1.367-.403-2-.726z"></path><path d="M17.594 6.188c-3.762 0-6.813 3.051-6.812 6.813-.001 3.761 3.05 6.812 6.812 6.812s6.813-3.051 6.813-6.813-3.052-6.812-6.813-6.812zm3.632 7.802l-7.267.001v-1.982h7.268l-.001 1.981z"></path></svg>';
    }, function(e, l, a) {
      a.r(l), a.d(l, "TableConstructor", function() {
        return w;
      });
      a(3);
      function _(e2) {
        return !(e2 == null);
      }
      function t(e2, l2 = null, a2 = null, t2 = null) {
        const r2 = document.createElement(e2);
        if (_(l2))
          for (let e3 = 0; e3 < l2.length; e3++)
            _(l2[e3]) && r2.classList.add(l2[e3]);
        if (_(a2))
          for (let e3 in a2)
            r2.setAttribute(e3, a2[e3]);
        if (_(t2))
          for (let e3 = 0; e3 < t2.length; e3++)
            _(t2[e3]) && r2.appendChild(t2[e3]);
        return r2;
      }
      a(6);
      const r = "tc-table", o = "tc-table__inp", s = "tc-table__cell", c = "tc-table__wrap", d = "tc-table__area", h = "tc-table__highlight";
      class n {
        constructor() {
          this._numberOfColumns = 0, this._numberOfRows = 0, this._element = this._createTableWrapper(), this._table = this._element.querySelector("table"), this._selectedCell = null, this._attachEvents();
        }
        get selectedCell() {
          return this._selectedCell;
        }
        set selectedCell(e2) {
          this._selectedCell && this._selectedCell.classList.remove(h), this._selectedCell = e2, this._selectedCell && this._selectedCell.classList.add(h);
        }
        get selectedRow() {
          return this.selectedCell ? this.selectedCell.closest("tr") : null;
        }
        insertColumnAfter() {
          this.insertColumn(1), this.focusCellOnSelectedCell();
        }
        insertColumnBefore() {
          this.insertColumn(), this.focusCellOnSelectedCell();
        }
        insertRowBefore() {
          this.insertRow(), this.focusCellOnSelectedCell();
        }
        insertRowAfter() {
          this.insertRow(1), this.focusCellOnSelectedCell();
        }
        insertColumn(e2 = 0) {
          e2 = Math.min(Math.max(e2, 0), 1);
          const l2 = this.selectedCell ? this.selectedCell.cellIndex + e2 : 0;
          this._numberOfColumns++;
          const a2 = this._table.rows;
          for (let e3 = 0; e3 < a2.length; e3++) {
            const _2 = a2[e3].insertCell(l2);
            this._fillCell(_2);
          }
        }
        deleteColumn() {
          if (!this.selectedCell)
            return;
          const e2 = this.selectedCell.cellIndex;
          this._numberOfColumns--;
          const l2 = this._table.rows;
          for (let a2 = 0; a2 < l2.length; a2++)
            l2[a2].deleteCell(e2);
        }
        insertRow(e2 = 0) {
          e2 = Math.min(Math.max(e2, 0), 1);
          const l2 = this.selectedRow ? this.selectedRow.rowIndex + e2 : 0, a2 = this._table.insertRow(l2);
          return this._numberOfRows++, this._fillRow(a2), a2;
        }
        deleteRow(e2 = -1) {
          if (!this.selectedRow)
            return;
          const l2 = this.selectedRow.rowIndex;
          this._table.deleteRow(l2), this._numberOfRows--;
        }
        get htmlElement() {
          return this._element;
        }
        get body() {
          return this._table;
        }
        _createTableWrapper() {
          return t("div", [c], null, [t("table", [r])]);
        }
        _createContenteditableArea() {
          return t("div", [o], { contenteditable: "true" });
        }
        _fillCell(e2) {
          e2.classList.add(s);
          const l2 = this._createContenteditableArea();
          e2.appendChild(t("div", [d], null, [l2]));
        }
        _fillRow(e2) {
          for (let l2 = 0; l2 < this._numberOfColumns; l2++) {
            const l3 = e2.insertCell();
            this._fillCell(l3);
          }
        }
        _attachEvents() {
          this._table.addEventListener("focus", (e2) => {
            this._focusEditField(e2);
          }, true), this._table.addEventListener("keydown", (e2) => {
            this._pressedEnterInEditField(e2);
          }), this._table.addEventListener("click", (e2) => {
            this._clickedOnCell(e2);
          }), this.htmlElement.addEventListener("keydown", (e2) => {
            this._containerKeydown(e2);
          });
        }
        _focusEditField(e2) {
          this.selectedCell = e2.target.tagName === "TD" ? e2.target : e2.target.closest("td");
        }
        focusCellOnSelectedCell() {
          this.selectedCell.childNodes[0].childNodes[0].focus();
        }
        _pressedEnterInEditField(e2) {
          e2.target.classList.contains(o) && (e2.key !== "Enter" || e2.shiftKey || e2.preventDefault());
        }
        _clickedOnCell(e2) {
          if (!e2.target.classList.contains(s))
            return;
          e2.target.querySelector("." + o).focus();
        }
        _containerKeydown(e2) {
          e2.key === "Enter" && e2.ctrlKey && this._containerEnterPressed(e2);
        }
        _containerEnterPressed(e2) {
          this.insertRow(1).cells[0].click();
        }
      }
      const i = "tc-editor", v = "tc-table__inp";
      class w {
        constructor(e2, l2, a2) {
          this._table = new n();
          const _2 = this._resizeTable(e2, l2);
          this._fillTable(e2, _2), this._container = t("div", [i, a2.styles && a2.styles.block], null, [this._table.htmlElement]);
        }
        get htmlElement() {
          return this._container;
        }
        get table() {
          return this._table;
        }
        _fillTable(e2, l2) {
          if (e2.content !== void 0)
            for (let a2 = 0; a2 < l2.rows && a2 < e2.content.length; a2++)
              for (let _2 = 0; _2 < l2.cols && _2 < e2.content[a2].length; _2++) {
                this._table.body.rows[a2].cells[_2].querySelector("." + v).innerHTML = e2.content[a2][_2];
              }
        }
        _resizeTable(e2, l2) {
          const a2 = Array.isArray(e2.content), _2 = !!a2 && e2.content.length, t2 = a2 ? e2.content.length : void 0, r2 = _2 ? e2.content[0].length : void 0, o2 = Number.parseInt(l2.rows), s2 = Number.parseInt(l2.cols), c2 = !isNaN(o2) && o2 > 0 ? o2 : void 0, d2 = !isNaN(s2) && s2 > 0 ? s2 : void 0, h2 = t2 || c2 || 1, n2 = r2 || d2 || 1;
          for (let e3 = 0; e3 < h2; e3++)
            this._table.insertRow();
          for (let e3 = 0; e3 < n2; e3++)
            this._table.insertColumn();
          return { rows: h2, cols: n2 };
        }
      }
    }]);
  });
})(bundle);
var TablePlugin = /* @__PURE__ */ getDefaultExportFromCjs(bundle.exports);
function EditorjsComponent(_o) {
  var _p = _o, { ref: parentRef, data } = _p, options = __objRest(_p, ["ref", "data"]);
  const editorId = `editorjs-${Date.now()}-${Math.random().toFixed(7).slice(2)}`;
  let editorRef;
  watchReactive(data, () => {
    if (data.value) {
      (editorRef == null ? void 0 : editorRef.render) && editorRef.render(data.value);
    } else {
      setTimeout(() => {
        (editorRef == null ? void 0 : editorRef.clear) && editorRef.clear();
      }, 1);
    }
  });
  useViewEffect(() => {
    editorRef = new Editorjs$1(__spreadProps(__spreadValues({}, options), {
      holder: editorId
    }));
    editorRef.isReady.then(() => {
      console.log("ready render", data.value);
      data.value && editorRef.render(data.value);
    });
    return () => editorRef == null ? void 0 : (editorRef.destroy && editorRef.destroy());
  });
  if (parentRef) {
    useImperativeHandle(parentRef, () => new Proxy({}, {
      get(target, method) {
        return editorRef[method];
      }
    }));
  }
  return /* @__PURE__ */ createElement("editorContainer", {
    block: true
  }, /* @__PURE__ */ createElement("editorRoot", {
    id: editorId
  }));
}
EditorjsComponent.propTypes = {
  data: propTypes.object.default(() => atom({}))
};
EditorjsComponent.Style = (fragments) => {
  fragments.root.elements.editorContainer.style({
    background: "#fff"
  });
};
EditorjsComponent.forwardRef = true;
const StyledEditorjsComponent = createComponent(EditorjsComponent);
StyledEditorjsComponent.ImageEditorPlugin = imageEditorPlugin;
StyledEditorjsComponent.TablePlugin = TablePlugin;
export { StyledEditorjsComponent as default };
